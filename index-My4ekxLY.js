const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-rjhLG1eB.js","assets/index-D57cUaFw.js","assets/mdxeditor-Cxvfqdhz.js","assets/apexcharts-BnXoAgVT.js","assets/index-DdbShWyY.js","assets/index-nOtcpH01.js","assets/index-uAn85tBp.js","assets/index-D4Wp6AEg.js","assets/index-CWmy4eKR.js","assets/index-CfyObm-o.js","assets/index-yU9Yh-H5.js","assets/index-BdmKeUBW.js","assets/index-DQ-8l3PE.js","assets/index-JH4Gotpn.js","assets/index-FrdabaJ1.js","assets/index-BgBG5lba.js","assets/index-BlSIl150.js","assets/index-BGm_t98o.js"])))=>i.map(i=>d[i]);
import{r as y,j as m,c as le,R as N,_ as wt,k as O3,b as L3,i as j3,a as w0,u as B3,d as zt,g as Wu,e as V3,f as $3,h as H3,l as ux,m as F3,n as z3,o as kt,p as xE,q as U3,s as Wr,t as Pi,v as ar,w as Jf,x as W3,y as hx,z as Gl,A as kE}from"./mdxeditor-Cxvfqdhz.js";import{a as G3,g as q3}from"./apexcharts-BnXoAgVT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var bl={},fx;function K3(){if(fx)return bl;fx=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.parse=i,bl.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,s=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function i(h,f){const p=new s,g=h.length;if(g<2)return p;const b=(f==null?void 0:f.decode)||d;let v=0;do{const x=h.indexOf("=",v);if(x===-1)break;const w=h.indexOf(";",v),k=w===-1?g:w;if(x>k){v=h.lastIndexOf(";",x-1)+1;continue}const C=a(h,v,x),S=l(h,x,C),T=h.slice(C,S);if(p[T]===void 0){let E=a(h,x+1,k),M=l(h,k,E);const R=b(h.slice(E,M));p[T]=R}v=k+1}while(v<g);return p}function a(h,f,p){do{const g=h.charCodeAt(f);if(g!==32&&g!==9)return f}while(++f<p);return p}function l(h,f,p){for(;f>p;){const g=h.charCodeAt(--f);if(g!==32&&g!==9)return f+1}return p}function c(h,f,p){const g=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(h))throw new TypeError(`argument name is invalid: ${h}`);const b=g(f);if(!e.test(b))throw new TypeError(`argument val is invalid: ${f}`);let v=h+"="+b;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!u(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function d(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function u(h){return o.call(h)==="[object Date]"}return bl}K3();var px="popstate";function Z3(t={}){function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return gy("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:wc(o)}return Y3(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J3(){return Math.random().toString(36).substring(2,10)}function mx(t,e){return{usr:t.state,key:t.key,idx:e}}function gy(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?za(e):e,state:n,key:e&&e.key||r||J3()}}function wc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function za(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Y3(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a="POP",l=null,c=d();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function d(){return(i.state||{idx:null}).idx}function u(){a="POP";let b=d(),v=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:v})}function h(b,v){a="PUSH";let x=gy(g.location,b,v);c=d()+1;let w=mx(x,c),k=g.createHref(x);try{i.pushState(w,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(k)}s&&l&&l({action:a,location:g.location,delta:1})}function f(b,v){a="REPLACE";let x=gy(g.location,b,v);c=d();let w=mx(x,c),k=g.createHref(x);i.replaceState(w,"",k),s&&l&&l({action:a,location:g.location,delta:0})}function p(b){return X3(b)}let g={get action(){return a},get location(){return t(o,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(px,u),l=b,()=>{o.removeEventListener(px,u),l=null}},createHref(b){return e(o,b)},createURL:p,encodeLocation(b){let v=p(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(b){return i.go(b)}};return g}function X3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),We(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:wc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function CE(t,e,n="/"){return Q3(t,e,n,!1)}function Q3(t,e,n,r){let o=typeof e=="string"?za(e):e,s=Eo(o.pathname||"/",n);if(s==null)return null;let i=SE(t);eO(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=uO(s);a=cO(i[l],c,r)}return a}function SE(t,e=[],n=[],r=""){let o=(s,i,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=vo([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(We(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),SE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:aO(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let l of TE(s.path))o(s,i,l)}),e}function TE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=TE(r.join("/")),a=[];return a.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function eO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var tO=/^:[\w-]+$/,nO=3,rO=2,oO=1,sO=10,iO=-2,gx=t=>t==="*";function aO(t,e){let n=t.split("/"),r=n.length;return n.some(gx)&&(r+=iO),e&&(r+=rO),n.filter(o=>!gx(o)).reduce((o,s)=>o+(tO.test(s)?nO:s===""?oO:sO),r)}function lO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function cO(t,e,n=!1){let{routesMeta:r}=t,o={},s="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",u=bh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=bh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(o,u.params),i.push({params:o,pathname:vo([s,u.pathname]),pathnameBase:mO(vo([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=vo([s,u.pathnameBase]))}return i}function bh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=dO(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:u},h)=>{if(d==="*"){let p=a[h]||"";i=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return u&&!f?c[d]=void 0:c[d]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function dO(t,e=!1,n=!0){lr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function uO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Eo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hO(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?za(t):t;return{pathname:n?n.startsWith("/")?n:fO(n,e):e,search:gO(r),hash:yO(o)}}function fO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Cm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function EE(t){let e=pO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function ME(t,e,n,r=!1){let o;typeof t=="string"?o=za(t):(o={...t},We(!o.pathname||!o.pathname.includes("?"),Cm("?","pathname","search",o)),We(!o.pathname||!o.pathname.includes("#"),Cm("#","pathname","hash",o)),We(!o.search||!o.search.includes("#"),Cm("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let u=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),u-=1;o.pathname=h.join("/")}a=u>=0?e[u]:"/"}let l=hO(o,a),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var vo=t=>t.join("/").replace(/\/\/+/g,"/"),mO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var AE=["POST","PUT","PATCH","DELETE"];new Set(AE);var vO=["GET",...AE];new Set(vO);var Ua=y.createContext(null);Ua.displayName="DataRouter";var Yf=y.createContext(null);Yf.displayName="DataRouterState";var RE=y.createContext({isTransitioning:!1});RE.displayName="ViewTransition";var wO=y.createContext(new Map);wO.displayName="Fetchers";var xO=y.createContext(null);xO.displayName="Await";var Gr=y.createContext(null);Gr.displayName="Navigation";var md=y.createContext(null);md.displayName="Location";var qr=y.createContext({outlet:null,matches:[],isDataRoute:!1});qr.displayName="Route";var x0=y.createContext(null);x0.displayName="RouteError";function kO(t,{relative:e}={}){We(gd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(Gr),{hash:o,pathname:s,search:i}=yd(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:vo([n,s])),r.createHref({pathname:a,search:i,hash:o})}function gd(){return y.useContext(md)!=null}function Io(){return We(gd(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(md).location}var _E="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function IE(t){y.useContext(Gr).static||y.useLayoutEffect(t)}function yr(){let{isDataRoute:t}=y.useContext(qr);return t?OO():CO()}function CO(){We(gd(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(Ua),{basename:e,navigator:n}=y.useContext(Gr),{matches:r}=y.useContext(qr),{pathname:o}=Io(),s=JSON.stringify(EE(r)),i=y.useRef(!1);return IE(()=>{i.current=!0}),y.useCallback((l,c={})=>{if(lr(i.current,_E),!i.current)return;if(typeof l=="number"){n.go(l);return}let d=ME(l,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:vo([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,o,t])}y.createContext(null);function NE(){let{matches:t}=y.useContext(qr),e=t[t.length-1];return e?e.params:{}}function yd(t,{relative:e}={}){let{matches:n}=y.useContext(qr),{pathname:r}=Io(),o=JSON.stringify(EE(n));return y.useMemo(()=>ME(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function SO(t,e){return DE(t,e)}function DE(t,e,n,r){var x;We(gd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:s}=y.useContext(Gr),{matches:i}=y.useContext(qr),a=i[i.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",u=a&&a.route;{let w=u&&u.path||"";PE(c,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=Io(),f;if(e){let w=typeof e=="string"?za(e):e;We(d==="/"||((x=w.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=h;let p=f.pathname||"/",g=p;if(d!=="/"){let w=d.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=!s&&n&&n.matches&&n.matches.length>0?n.matches:CE(t,{pathname:g});lr(u||b!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),lr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=RO(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:vo([d,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:vo([d,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&v?y.createElement(md.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},v):v}function TO(){let t=PO(),e=bO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=y.createElement(y.Fragment,null,y.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:o},n):null,i)}var EO=y.createElement(TO,null),MO=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?y.createElement(qr.Provider,{value:this.props.routeContext},y.createElement(x0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AO({routeContext:t,match:e,children:n}){let r=y.useContext(Ua);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(qr.Provider,{value:t},n)}function RO(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let l=o.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);We(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<o.length;l++){let c=o[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:d,errors:u}=n,h=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!u||u[c.route.id]===void 0);if(c.route.lazy||h){i=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((l,c,d)=>{let u,h=!1,f=null,p=null;n&&(u=s&&c.route.id?s[c.route.id]:void 0,f=c.route.errorElement||EO,i&&(a<0&&d===0?(PE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):a===d&&(h=!0,p=c.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),b=()=>{let v;return u?v=f:h?v=p:c.route.Component?v=y.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=l,y.createElement(AO,{match:c,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?y.createElement(MO,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function k0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _O(t){let e=y.useContext(Ua);return We(e,k0(t)),e}function IO(t){let e=y.useContext(Yf);return We(e,k0(t)),e}function NO(t){let e=y.useContext(qr);return We(e,k0(t)),e}function C0(t){let e=NO(t),n=e.matches[e.matches.length-1];return We(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function DO(){return C0("useRouteId")}function PO(){var r;let t=y.useContext(x0),e=IO("useRouteError"),n=C0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function OO(){let{router:t}=_O("useNavigate"),e=C0("useNavigate"),n=y.useRef(!1);return IE(()=>{n.current=!0}),y.useCallback(async(o,s={})=>{lr(n.current,_E),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...s}))},[t,e])}var yx={};function PE(t,e,n){!e&&!yx[t]&&(yx[t]=!0,lr(!1,n))}y.memo(LO);function LO({routes:t,future:e,state:n}){return DE(t,void 0,n,e)}function Nn(t){We(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jO({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:s=!1}){We(!gd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:i,navigator:o,static:s,future:{}}),[i,o,s]);typeof n=="string"&&(n=za(n));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=n,f=y.useMemo(()=>{let p=Eo(l,i);return p==null?null:{location:{pathname:p,search:c,hash:d,state:u,key:h},navigationType:r}},[i,l,c,d,u,h,r]);return lr(f!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:y.createElement(Gr.Provider,{value:a},y.createElement(md.Provider,{children:e,value:f}))}function BO({children:t,location:e}){return SO(yy(t),e)}function yy(t,e=[]){let n=[];return y.Children.forEach(t,(r,o)=>{if(!y.isValidElement(r))return;let s=[...e,o];if(r.type===y.Fragment){n.push.apply(n,yy(r.props.children,s));return}We(r.type===Nn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),We(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=yy(r.props.children,s)),n.push(i)}),n}var Gu="get",qu="application/x-www-form-urlencoded";function Xf(t){return t!=null&&typeof t.tagName=="string"}function VO(t){return Xf(t)&&t.tagName.toLowerCase()==="button"}function $O(t){return Xf(t)&&t.tagName.toLowerCase()==="form"}function HO(t){return Xf(t)&&t.tagName.toLowerCase()==="input"}function FO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zO(t,e){return t.button===0&&(!e||e==="_self")&&!FO(t)}function by(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function UO(t,e){let n=by(t);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(s=>{n.append(o,s)})}),n}var au=null;function WO(){if(au===null)try{new FormData(document.createElement("form"),0),au=!1}catch{au=!0}return au}var GO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sm(t){return t!=null&&!GO.has(t)?(lr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qu}"`),null):t}function qO(t,e){let n,r,o,s,i;if($O(t)){let a=t.getAttribute("action");r=a?Eo(a,e):null,n=t.getAttribute("method")||Gu,o=Sm(t.getAttribute("enctype"))||qu,s=new FormData(t)}else if(VO(t)||HO(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Eo(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Gu,o=Sm(t.getAttribute("formenctype"))||Sm(a.getAttribute("enctype"))||qu,s=new FormData(a,t),!WO()){let{name:c,type:d,value:u}=t;if(d==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,u)}}else{if(Xf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gu,r=null,o=qu,i=t}return s&&o==="text/plain"&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:s,body:i}}function S0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function KO(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function JO(t,e,n){let r=await Promise.all(t.map(async o=>{let s=e.routes[o.route.id];if(s){let i=await KO(s,n);return i.links?i.links():[]}return[]}));return e5(r.flat(1).filter(ZO).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function bx(t,e,n,r,o,s){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>i(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var u;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(i(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((u=n[0])==null?void 0:u.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function YO(t,e,{includeHydrateFallback:n}={}){return XO(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let s=[o.module];return o.clientActionModule&&(s=s.concat(o.clientActionModule)),o.clientLoaderModule&&(s=s.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(s=s.concat(o.hydrateFallbackModule)),o.imports&&(s=s.concat(o.imports)),s}).flat(1))}function XO(t){return[...new Set(t)]}function QO(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function e5(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let s=JSON.stringify(QO(o));return n.has(s)||(n.add(s),r.push({key:s,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var t5=new Set([100,101,204,205]);function n5(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Eo(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function OE(){let t=y.useContext(Ua);return S0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function r5(){let t=y.useContext(Yf);return S0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var T0=y.createContext(void 0);T0.displayName="FrameworkContext";function LE(){let t=y.useContext(T0);return S0(t,"You must render this element inside a <HydratedRouter> element"),t}function o5(t,e){let n=y.useContext(T0),[r,o]=y.useState(!1),[s,i]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=e,h=y.useRef(null);y.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let g=v=>{v.forEach(x=>{i(x.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[t]),y.useEffect(()=>{if(r){let g=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(g)}}},[r]);let f=()=>{o(!0)},p=()=>{o(!1),i(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:vl(a,f),onBlur:vl(l,p),onMouseEnter:vl(c,f),onMouseLeave:vl(d,p),onTouchStart:vl(u,f)}]:[!1,h,{}]}function vl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function s5({page:t,...e}){let{router:n}=OE(),r=y.useMemo(()=>CE(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(a5,{page:t,matches:r,...e}):null}function i5(t){let{manifest:e,routeModules:n}=LE(),[r,o]=y.useState([]);return y.useEffect(()=>{let s=!1;return JO(t,e,n).then(i=>{s||o(i)}),()=>{s=!0}},[t,e,n]),r}function a5({page:t,matches:e,...n}){let r=Io(),{manifest:o,routeModules:s}=LE(),{basename:i}=OE(),{loaderData:a,matches:l}=r5(),c=y.useMemo(()=>bx(t,e,l,o,r,"data"),[t,e,l,o,r]),d=y.useMemo(()=>bx(t,e,l,o,r,"assets"),[t,e,l,o,r]),u=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(e.forEach(v=>{var w;let x=o.routes[v.route.id];!x||!x.hasLoader||(!c.some(k=>k.route.id===v.route.id)&&v.route.id in a&&((w=s[v.route.id])!=null&&w.shouldRevalidate)||x.hasClientLoader?g=!0:p.add(v.route.id))}),p.size===0)return[];let b=n5(t,i);return g&&p.size>0&&b.searchParams.set("_routes",e.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[b.pathname+b.search]},[i,a,r,o,c,e,t,s]),h=y.useMemo(()=>YO(d,o),[d,o]),f=i5(d);return y.createElement(y.Fragment,null,u.map(p=>y.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>y.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:g})=>y.createElement("link",{key:p,...g})))}function l5(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var jE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jE&&(window.__reactRouterVersion="7.6.0")}catch{}function c5({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=Z3({window:n,v5Compat:!0}));let o=r.current,[s,i]=y.useState({action:o.action,location:o.location}),a=y.useCallback(l=>{y.startTransition(()=>i(l))},[i]);return y.useLayoutEffect(()=>o.listen(a),[o,a]),y.createElement(jO,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o})}var BE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VE=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:s,replace:i,state:a,target:l,to:c,preventScrollReset:d,viewTransition:u,...h},f){let{basename:p}=y.useContext(Gr),g=typeof c=="string"&&BE.test(c),b,v=!1;if(typeof c=="string"&&g&&(b=c,jE))try{let M=new URL(window.location.href),R=c.startsWith("//")?new URL(M.protocol+c):new URL(c),I=Eo(R.pathname,p);R.origin===M.origin&&I!=null?c=I+R.search+R.hash:v=!0}catch{lr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=kO(c,{relative:o}),[w,k,C]=o5(r,h),S=f5(c,{replace:i,state:a,target:l,preventScrollReset:d,relative:o,viewTransition:u});function T(M){e&&e(M),M.defaultPrevented||S(M)}let E=y.createElement("a",{...h,...C,href:b||x,onClick:v||s?e:T,ref:l5(f,k),target:l,"data-discover":!g&&n==="render"?"true":void 0});return w&&!g?y.createElement(y.Fragment,null,E,y.createElement(s5,{page:x})):E});VE.displayName="Link";var d5=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:s,to:i,viewTransition:a,children:l,...c},d){let u=yd(i,{relative:c.relative}),h=Io(),f=y.useContext(Yf),{navigator:p,basename:g}=y.useContext(Gr),b=f!=null&&v5(u)&&a===!0,v=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,x=h.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(x=x.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&g&&(w=Eo(w,g)||w);const k=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let C=x===v||!o&&x.startsWith(v)&&x.charAt(k)==="/",S=w!=null&&(w===v||!o&&w.startsWith(v)&&w.charAt(v.length)==="/"),T={isActive:C,isPending:S,isTransitioning:b},E=C?e:void 0,M;typeof r=="function"?M=r(T):M=[r,C?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(T):s;return y.createElement(VE,{...c,"aria-current":E,className:M,ref:d,style:R,to:i,viewTransition:a},typeof l=="function"?l(T):l)});d5.displayName="NavLink";var u5=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:s,method:i=Gu,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:u,...h},f)=>{let p=y5(),g=b5(a,{relative:c}),b=i.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&BE.test(a),x=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let k=w.nativeEvent.submitter,C=(k==null?void 0:k.getAttribute("formmethod"))||i;p(k||w.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:o,state:s,relative:c,preventScrollReset:d,viewTransition:u})};return y.createElement("form",{ref:f,method:b,action:g,onSubmit:r?l:x,...h,"data-discover":!v&&t==="render"?"true":void 0})});u5.displayName="Form";function h5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $E(t){let e=y.useContext(Ua);return We(e,h5(t)),e}function f5(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:i}={}){let a=yr(),l=Io(),c=yd(t,{relative:s});return y.useCallback(d=>{if(zO(d,e)){d.preventDefault();let u=n!==void 0?n:wc(l)===wc(c);a(t,{replace:u,state:r,preventScrollReset:o,relative:s,viewTransition:i})}},[l,a,c,n,r,e,t,o,s,i])}function p5(t){lr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(by(t)),n=y.useRef(!1),r=Io(),o=y.useMemo(()=>UO(r.search,n.current?null:e.current),[r.search]),s=yr(),i=y.useCallback((a,l)=>{const c=by(typeof a=="function"?a(o):a);n.current=!0,s("?"+c,l)},[s,o]);return[o,i]}var m5=0,g5=()=>`__${String(++m5)}__`;function y5(){let{router:t}=$E("useSubmit"),{basename:e}=y.useContext(Gr),n=DO();return y.useCallback(async(r,o={})=>{let{action:s,method:i,encType:a,formData:l,body:c}=qO(r,e);if(o.navigate===!1){let d=o.fetcherKey||g5();await t.fetch(d,n,o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function b5(t,{relative:e}={}){let{basename:n}=y.useContext(Gr),r=y.useContext(qr);We(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s={...yd(t||".",{relative:e})},i=Io();if(t==null){s.search=i.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(u=>u).forEach(u=>a.append("index",u));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:vo([n,s.pathname])),wc(s)}function v5(t,e={}){let n=y.useContext(RE);We(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=$E("useViewTransitionState"),o=yd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Eo(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Eo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return bh(o.pathname,i)!=null||bh(o.pathname,s)!=null}[...t5];const w5="_icon_1vtik_1",bd={icon:w5};function x5({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:le(bd.icon,t),...e,children:m.jsx("g",{children:m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.855 15.67C12.995 15.31 12.9049 14.9 12.625 14.62L10.5349 12.56L10.5649 12.53C12.3049 10.59 13.5449 8.35999 14.2749 6H16.215C16.755 6 17.205 5.54999 17.205 5.01001V4.98999C17.205 4.45001 16.755 4 16.215 4H10.205V3C10.205 2.45001 9.755 2 9.20496 2C8.65491 2 8.20496 2.45001 8.20496 3V4H2.19495C1.65491 4 1.20496 4.45001 1.20496 4.98999C1.20496 5.53998 1.65491 5.97998 2.19495 5.97998H12.375C11.705 7.91998 10.6449 9.75 9.20496 11.35C8.3949 10.46 7.71497 9.48999 7.1449 8.46997C6.98499 8.17999 6.69495 8 6.36499 8C5.67493 8 5.23499 8.75 5.57495 9.34998C6.20496 10.48 6.97498 11.56 7.875 12.56L3.505 16.87C3.10498 17.26 3.10498 17.9 3.505 18.29C3.8949 18.68 4.5249 18.68 4.92493 18.29L9.20496 14L11.225 16.02C11.735 16.53 12.605 16.34 12.855 15.67ZM17.705 10C17.105 10 16.5649 10.37 16.355 10.94L12.6849 20.74C12.4449 21.35 12.9049 22 13.5549 22C13.9449 22 14.2949 21.76 14.4349 21.39L15.325 19H20.075L20.975 21.39C21.1149 21.75 21.465 22 21.855 22C22.5049 22 22.965 21.35 22.7349 20.74L19.0649 10.94C18.845 10.37 18.3049 10 17.705 10ZM17.705 12.67L16.085 17H19.325L17.705 12.67Z",fillOpacity:"0.54"})})})}const k5="_primary_pdmgw_6",C5="_noMargin_pdmgw_10",Tm={default:"_default_pdmgw_1",primary:k5,noMargin:C5};function S5({level:t,children:e,primary:n,noMargin:r,className:o,onClick:s}){const i=[Tm.default,n&&Tm.primary,r&&Tm.noMargin,o];switch(t){case 1:return m.jsx("h1",{onClick:s,className:le(...i),children:e});case 2:return m.jsx("h2",{onClick:s,className:le(...i),children:e});case 3:return m.jsx("h3",{onClick:s,className:le(...i),children:e});case 4:return m.jsx("h4",{onClick:s,className:le(...i),children:e});default:return m.jsx("h5",{onClick:s,className:le(...i),children:e})}}const T5="_description_11sgl_6",E5="_noMargin_11sgl_12",M5="_underline_11sgl_16",A5="_bold_11sgl_20",ts={default:"_default_11sgl_1",description:T5,noMargin:E5,underline:M5,bold:A5};function R5({children:t,isDescription:e,underline:n,className:r,...o}){return m.jsx("span",{className:le(ts.default,e&&ts.description,n&&ts.underline,r),...o,children:t})}function _5({children:t,isDescription:e,noMargin:n,underline:r,bold:o,className:s}){return m.jsx("p",{className:le(ts.default,e&&ts.description,n&&ts.noMargin,r&&ts.underline,o&&ts.bold,s),children:t})}const ae={Title:S5,Paragraph:_5,Text:R5},I5="_container_1p3r9_2",N5="_body_1p3r9_14",vx={container:I5,body:N5};function D5({className:t,title:e,logo:n,description:r,rightComponent:o,onClick:s}){return m.jsxs("div",{className:le(vx.container,t),onClick:s,children:[n,m.jsxs("div",{className:vx.body,children:[m.jsx(ae.Paragraph,{bold:!0,noMargin:!0,children:e}),m.jsx(ae.Paragraph,{noMargin:!0,isDescription:!0,children:r})]}),o]})}const dt={ItemMeta:D5},P5="_ghost_p15d2_12",O5="_sm_p15d2_20",L5="_lg_p15d2_25",j5="_md_p15d2_30",B5="_dash_p15d2_35",V5="_block_p15d2_41",$5="_disabled_p15d2_46",zo={default:"_default_p15d2_1",ghost:P5,sm:O5,lg:L5,md:j5,dash:B5,block:V5,disabled:$5};function St({onClick:t,disabled:e,children:n,type:r,className:o,block:s,size:i,...a}){return m.jsx("button",{onClick:t,className:le(zo.default,r==="ghost"&&zo.ghost,r==="dash"&&zo.dash,s&&zo.block,i==="sm"&&zo.sm,i==="lg"&&zo.lg,i==="md"&&zo.md,e&&zo.disabled,o),disabled:e,...a,children:n})}const H5="_button_aap0f_1",F5="_firstButton_aap0f_5",z5="_lastButton_aap0f_10",U5="_middleButton_aap0f_14",W5="_active_aap0f_18",G5="_leftActiveBorder_aap0f_24",q5="_rightActiveBorder_aap0f_28",K5="_rightActiveAndLastBorder_aap0f_32",Uo={button:H5,firstButton:F5,lastButton:z5,middleButton:U5,active:W5,leftActiveBorder:G5,rightActiveBorder:q5,rightActiveAndLastBorder:K5};function vy({isButton:t,options:e,value:n,onChangeValue:r,classNameOption:o,getClassNameActiveOption:s=()=>""}){return t?m.jsx(m.Fragment,{children:e.map(({label:i,value:a},l)=>{const c=l>e.length-1&&e[l+1].value===n,d=l>0&&e[l-1].value===n;return m.jsx(St,{type:"ghost",size:"md",onClick:()=>r&&r(a),className:le(Uo.button,l===0&&Uo.firstButton,l===e.length-1&&Uo.lastButton,l!==e.length-1&&l!==0&&Uo.middleButton,a===n&&Uo.active,a===n&&c&&Uo.leftActiveBorder,d&&Uo.rightActiveBorder,d&&l===e.length-1&&Uo.rightActiveAndLastBorder,o,a===n&&s({label:i,value:a})),children:i},`${n}-${l}`)})}):null}function Z5({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:le(bd.icon,t),...e,children:m.jsx("g",{id:"color_lens_24px",children:m.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 3C7.03003 3 3 7.03 3 12C3 16.97 7.03003 21 12 21C12.83 21 13.5 20.33 13.5 19.5C13.5 19.11 13.35 18.76 13.11 18.49C12.88 18.23 12.73 17.88 12.73 17.5C12.73 16.67 13.4 16 14.23 16H16C18.76 16 21 13.76 21 11C21 6.57999 16.97 3 12 3ZM6.5 12C5.66998 12 5 11.33 5 10.5C5 9.67001 5.66998 9 6.5 9C7.33002 9 8 9.67001 8 10.5C8 11.33 7.33002 12 6.5 12ZM8 6.5C8 7.32999 8.66998 8 9.5 8C10.33 8 11 7.32999 11 6.5C11 5.67001 10.33 5 9.5 5C8.66998 5 8 5.67001 8 6.5ZM14.5 8C13.67 8 13 7.32999 13 6.5C13 5.67001 13.67 5 14.5 5C15.33 5 16 5.67001 16 6.5C16 7.32999 15.33 8 14.5 8ZM16 10.5C16 11.33 16.67 12 17.5 12C18.33 12 19 11.33 19 10.5C19 9.67001 18.33 9 17.5 9C16.67 9 16 9.67001 16 10.5Z","fill-opacity":"0.54"})})})}var xc=(t=>(t.Vi="vi",t.En="en",t))(xc||{});const wx=t=>{let e;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(e):c;if(!Object.is(u,e)){const h=e;e=d??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(f=>f(e,h))}},o=()=>e,a={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,o,a);return a},J5=t=>t?wx(t):wx,Y5=t=>t;function X5(t,e=Y5){const n=N.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return N.useDebugValue(n),n}const xx=t=>{const e=J5(t),n=r=>X5(e,r);return Object.assign(n,e),n},Qf=t=>t?xx(t):xx,Em=new Map;function cr(t,e,{storeOnMount:n}={}){if(!Em.has(t)){const i=Qf(a=>({storedValue:(()=>{if(typeof window>"u")return e;try{const l=window.localStorage.getItem(t);return n&&!l&&e&&window.localStorage.setItem(t,JSON.stringify(e)),l?JSON.parse(l):e}catch(l){return console.log(l),e}})(),setValue:l=>{a(c=>{const d=l instanceof Function?l(c.storedValue):l;try{window.localStorage.setItem(t,JSON.stringify(d))}catch(u){console.log(u)}return{storedValue:d}})}}));Em.set(t,i)}const r=Em.get(t),{storedValue:o,setValue:s}=r();return[o,s]}var kx,Cx;(function(t){t.CANCELED_BY_MOVEMENT="canceled-by-movement",t.CANCELED_BY_TIMEOUT="canceled-by-timeout"})(kx||(kx={})),function(t){t.BOTH="both",t.MOUSE="mouse",t.TOUCH="touch"}(Cx||(Cx={}));const Sx=Symbol.for("constructDateFrom");function ep(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Sx in t?t[Sx](e):t instanceof Date?new t.constructor(e):new Date(e)}function Oi(t,e){return ep(t,t)}function Q5(t,...e){const n=ep.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Tx(t,e){const n=Oi(t);return n.setHours(0,0,0,0),n}function eL(t){return ep(t,Date.now())}function tL(t,e,n){const[r,o]=Q5(n==null?void 0:n.in,t,e);return+Tx(r)==+Tx(o)}function HE(t,e){const n=Oi(t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function FE(t,e){const n=Oi(t);return n.setDate(1),n.setHours(0,0,0,0),n}function nL(t,e){return tL(ep(t,t),eL(t))}function rL(t,e,n){const r=Oi(t);return r.setHours(e),r}function oL(t,e,n){const r=Oi(t);return r.setMilliseconds(e),r}function sL(t,e,n){const r=Oi(t);return r.setMinutes(e),r}function iL(t,e,n){const r=Oi(t);return r.setSeconds(e),r}const aL="baby",lL=()=>{const[t,e]=cr(aL,{});return{baby:t,setBaby:e,calculateStartDateFromDueDate:r=>new Date(new Date(r).getTime()-24192e6).toISOString()}};var gt=[];for(var Mm=0;Mm<256;++Mm)gt.push((Mm+256).toString(16).slice(1));function cL(t,e=0){return(gt[t[e+0]]+gt[t[e+1]]+gt[t[e+2]]+gt[t[e+3]]+"-"+gt[t[e+4]]+gt[t[e+5]]+"-"+gt[t[e+6]]+gt[t[e+7]]+"-"+gt[t[e+8]]+gt[t[e+9]]+"-"+gt[t[e+10]]+gt[t[e+11]]+gt[t[e+12]]+gt[t[e+13]]+gt[t[e+14]]+gt[t[e+15]]).toLowerCase()}var lu,dL=new Uint8Array(16);function uL(){if(!lu&&(lu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lu(dL)}var hL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ex={randomUUID:hL};function rn(t,e,n){if(Ex.randomUUID&&!t)return Ex.randomUUID();t=t||{};var r=t.random||(t.rng||uL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,cL(r)}const fL="checklist_template",pL="selected_checklist_templates",Hs={repeat:{minute:"0",hour:"8",dayOfMonth:"*",month:"*",dayOfWeek:"*",startedAt:new Date().toISOString()},createdAt:new Date().toISOString(),records:[],fieldGroups:[]},mL=[{id:rn(),title:"Drink water",...Hs,avatar:{type:"icon",name:"mdi:water",color:"#00aaff"}},{id:rn(),title:"Drink Orange juice",...Hs,avatar:{type:"icon",name:"noto-v1:tropical-drink",color:"#ff9900"}},{id:rn(),title:"Take vitamin supplement",...Hs,avatar:{type:"icon",name:"game-icons:medicines",color:"#00ff00"}},{id:rn(),title:"Eat fruits(banana, seeds) and vegetables",...Hs,avatar:{type:"icon",name:"twemoji:pot-of-food",color:"#00aaff"}},{id:rn(),title:"Exercise",...Hs,avatar:{type:"icon",name:"healthicons:exercise-yoga-outline"}},{id:rn(),title:"Sleep early",...Hs,avatar:{type:"icon",name:"fxemoji:sleeping"}},{id:rn(),title:"Drink milk",...Hs,avatar:{type:"icon",name:"icon-park-outline:milk",color:"#ff9900"}}],gL=mL.reduce((t,e)=>({...t,[e.id]:e}),{}),vs=()=>{const[t,e]=cr(fL,gL,{storeOnMount:!0}),[n,r]=cr(pL,[]),o=u=>{const h=rn();return e({...t,[h]:{...u,id:h,createdAt:new Date().toISOString()}}),a([...n,h]),{id:h}},s=u=>{var h;e({...t,[u.id]:{...u,createdAt:((h=t[u.id])==null?void 0:h.createdAt)||new Date().toISOString()}})},i=u=>{const h={...t};delete h[u],e(h),n.includes(u)&&a(n.filter(f=>f!==u))},a=(u=[])=>{r(u)};return{checklistTemplate:t,getChecklistTemplate:u=>t[u],addChecklistTemplate:o,updateChecklistTemplate:s,deleteChecklistTemplate:i,selectedChecklistTemplates:n,updateSelectedChecklistTemplate:a,getRecommendChecklistTemplates:()=>Object.values(t),getChecklistTemplateIdsByGivingDate:({date:u}={date:new Date})=>n.filter(h=>{var p,g;const f=t[h];return((p=f==null?void 0:f.repeat)==null?void 0:p.dayOfWeek.split(",").includes(u.getDay().toString()))||((g=f==null?void 0:f.repeat)==null?void 0:g.dayOfWeek)==="*"})}},yL="checklist",tp=()=>{const[t,e]=cr(yL,{}),{getChecklistTemplateIdsByGivingDate:n,checklistTemplate:r}=vs(),[o,s]=N.useState([]),[i,a]=N.useState({}),l=({date:p}={date:new Date})=>{const g=Object.values(t).filter(x=>new Date(x.startedAt).toLocaleDateString()===p.toLocaleDateString()),v=n({date:p}).map(x=>{const w=g.find(k=>k.checklistTemplateId===x);return w||{id:rn(),clientOnly:!0,title:r[x].title,checklistTemplateId:x,startedAt:new Date(p).toISOString(),endedAt:new Date(new Date().setHours(23,59,59,999)).toISOString()}});return{checklistIds:v.map(x=>x.id),checklist:v.reduce((x,w)=>({...x,[w.id]:w}),{})}},c=p=>{e({...t,[p.id]:{...t[p.id],...p}})},d=p=>{const g=rn(),b={...p,id:g};return e({...t,[g]:b}),b},u=({date:p})=>{const{checklistIds:g,checklist:b}=l({date:p});s(g),a(b)},h=p=>Object.values(t).filter(g=>g.checklistTemplateId===p).sort((g,b)=>new Date(g.startedAt)-new Date(b.startedAt)),f=p=>t[p];return{updateChecklist:c,getChecklistByGivingDate:u,getAllChecklistWithTemplate:h,allChecklist:{...i,...t},addChecklist:d,checklistByGivingDateIds:o,getChecklistDetail:f}},bL="body_metric",vL=Qf(t=>({chartData:{},setChartData:e=>t({chartData:e})})),wL=Qf(t=>({currentDay:new Date,setCurrentDay:e=>t({currentDay:e}),currentBodyMetric:void 0,setCurrentBodyMetric:e=>t({currentBodyMetric:e})})),E0=()=>{const[t,e]=cr(bL,{}),{chartData:n,setChartData:r}=vL(),{currentBodyMetric:o,setCurrentBodyMetric:s,currentDay:i,setCurrentDay:a}=wL(),l=(h=t)=>{const f=Object.values(h).sort((v,x)=>new Date(v.createdAt).getTime()-new Date(x.createdAt).getTime()),p=f.map(v=>new Date(v.createdAt).toLocaleDateString()),g=f.map(v=>v.weight),b=f.map(v=>v.bellySize);return{categories:p,weights:g,bellySizes:b}},c=h=>{const f=l(h);r(f)},d=h=>{const f=Object.values(t).find(b=>new Date(b.createdAt).toLocaleDateString()===new Date(h.createdAt).toLocaleDateString());let p,g=(f==null?void 0:f.id)||"";f?p={...t,[f.id]:{...f,...h}}:(g=rn(),p={...t,[g]:{...h,id:g}}),e(p),c(p),s(p[g])},u=({date:h})=>{const f=Object.values(t).find(p=>new Date(p.createdAt).toLocaleDateString()===h.toLocaleDateString());return s(f),a(h),f};return N.useEffect(()=>{u({date:new Date})},[]),{addBodyMetric:d,getChartData:l,chartData:n,updateChartDate:c,setChartData:r,currentBodyMetric:o,updateCurrentBodyMetric:u,currentDay:i}};var bi=(t=>(t.Light="light",t.Dark="dark",t))(bi||{});const zE=N.createContext({pomodoro:0,setPomodoro:()=>{},shortBreak:0,setShortBreak:()=>{},longBreak:0,setLongBreak:()=>{},theme:bi.Light,setTheme:()=>{}});var UE=(t=>(t[t.Pomodoro=0]="Pomodoro",t[t.ShortBreak=1]="ShortBreak",t[t.LongBreak=2]="LongBreak",t))(UE||{});const Am={time:0,isPlaying:!1,pause:()=>{},start:()=>{},stop:()=>{}};N.createContext({pomodoroTimer:Am,shortBreakTimer:Am,longBreakTimer:Am,pomodoroPhase:UE.Pomodoro,setPomodoroPhase:()=>{},autoStartTimerWhenChangePomodoroPhase:()=>{}});const np=()=>N.useContext(zE),Rm=60*1e3,xL=t=>function(e){const[n,r]=cr("pomodoro",{pomodoro:25*Rm,shortBreak:5*Rm,longBreak:10*Rm,theme:bi.Light});return m.jsx(zE.Provider,{value:{...n,setPomodoro:o=>r({...n,pomodoro:o}),setShortBreak:o=>r({...n,shortBreak:o}),setLongBreak:o=>r({...n,longBreak:o}),setTheme:o=>r({...n,theme:o})},children:m.jsx(t,{...e})})},kL=t=>`https://raw.githubusercontent.com/zTwist201/audio/main/${t}`;var wy=(t=>(t.MusicBox="mb",t.Chime="ch",t))(wy||{});wy.MusicBox+"",wy.Chime+"";const CL=(t,e,n)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},WE=N.createContext({messages:{},changeLanguage:()=>{},language:xc.En,formatMessage:()=>""}),SL=t=>function(n){const[r,o]=cr("app_language",xc.En),[s,i]=N.useState({}),a=async c=>{const{default:d}=await CL(Object.assign({"./language/en.json":()=>wt(()=>import("./en-BFYQVkaU.js"),[]),"./language/vi.json":()=>wt(()=>import("./vi-BU6JAnvG.js"),[])}),`./language/${c}.json`,3);i(d)};N.useEffect(()=>{a(r)},[]);const l=(c,d)=>{const{id:u,defaultMessage:h}=c,f=s[u]||h;return d?Object.entries(d).reduce((p,[g,b])=>p.replace(new RegExp(`{{${g}}}`,"gm"),b),f):f};return m.jsx(WE.Provider,{value:{messages:s,language:r,changeLanguage:async c=>{o(c),a(c)},formatMessage:l},children:m.jsx(t,{...n})})},Bt=()=>N.useContext(WE),TL="_container_uzw7y_2",EL="_body_uzw7y_9",ML="_footer_uzw7y_13",AL="_version_uzw7y_19",RL="_link_uzw7y_24",wl={container:TL,body:EL,footer:ML,version:AL,link:RL},_L="_container_t6uy9_2",IL="_left_t6uy9_15",NL="_right_t6uy9_24",DL="_rightIcon_t6uy9_30",PL="_backIcon_t6uy9_37",as={container:_L,left:IL,right:NL,rightIcon:DL,backIcon:PL},GE=Object.freeze({left:0,top:0,width:16,height:16}),vh=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),M0=Object.freeze({...GE,...vh}),xy=Object.freeze({...M0,body:"",hidden:!1});function OL(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}function Mx(t,e){const n=OL(t,e);for(const r in xy)r in vh?r in t&&!(r in n)&&(n[r]=vh[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function LL(t,e){const n=t.icons,r=t.aliases||Object.create(null),o=Object.create(null);function s(i){if(n[i])return o[i]=[];if(!(i in o)){o[i]=null;const a=r[i]&&r[i].parent,l=a&&s(a);l&&(o[i]=[a].concat(l))}return o[i]}return Object.keys(n).concat(Object.keys(r)).forEach(s),o}function jL(t,e,n){const r=t.icons,o=t.aliases||Object.create(null);let s={};function i(a){s=Mx(r[a]||o[a],s)}return i(e),n.forEach(i),Mx(t,s)}function qE(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(o=>{e(o,null),n.push(o)});const r=LL(t);for(const o in r){const s=r[o];s&&(e(o,jL(t,o,s)),n.push(o))}return n}const BL={provider:"",aliases:{},not_found:{},...GE};function _m(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function KE(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!_m(t,BL))return null;const n=e.icons;for(const o in n){const s=n[o];if(!o||typeof s.body!="string"||!_m(s,xy))return null}const r=e.aliases||Object.create(null);for(const o in r){const s=r[o],i=s.parent;if(!o||typeof i!="string"||!n[i]&&!r[i]||!_m(s,xy))return null}return e}const ZE=/^[a-z0-9]+(-[a-z0-9]+)*$/,rp=(t,e,n,r="")=>{const o=t.split(":");if(t.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;r=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){const a=o.pop(),l=o.pop(),c={provider:o.length>0?o[0]:r,prefix:l,name:a};return e&&!Ku(c)?null:c}const s=o[0],i=s.split("-");if(i.length>1){const a={provider:r,prefix:i.shift(),name:i.join("-")};return e&&!Ku(a)?null:a}if(n&&r===""){const a={provider:r,prefix:"",name:s};return e&&!Ku(a,n)?null:a}return null},Ku=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1,Ax=Object.create(null);function VL(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Ea(t,e){const n=Ax[t]||(Ax[t]=Object.create(null));return n[e]||(n[e]=VL(t,e))}function JE(t,e){return KE(e)?qE(e,(n,r)=>{r?t.icons[n]=r:t.missing.add(n)}):[]}function $L(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let kc=!1;function YE(t){return typeof t=="boolean"&&(kc=t),kc}function Rx(t){const e=typeof t=="string"?rp(t,!0,kc):t;if(e){const n=Ea(e.provider,e.prefix),r=e.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function HL(t,e){const n=rp(t,!0,kc);if(!n)return!1;const r=Ea(n.provider,n.prefix);return e?$L(r,n.name,e):(r.missing.add(n.name),!0)}function FL(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),kc&&!e&&!t.prefix){let o=!1;return KE(t)&&(t.prefix="",qE(t,(s,i)=>{HL(s,i)&&(o=!0)})),o}const n=t.prefix;if(!Ku({prefix:n,name:"a"}))return!1;const r=Ea(e,n);return!!JE(r,t)}const XE=Object.freeze({width:null,height:null}),QE=Object.freeze({...XE,...vh}),zL=/(-?[0-9.]*[0-9]+[0-9.]*)/g,UL=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function _x(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const r=t.split(zL);if(r===null||!r.length)return t;const o=[];let s=r.shift(),i=UL.test(s);for(;;){if(i){const a=parseFloat(s);isNaN(a)?o.push(s):o.push(Math.ceil(a*e*n)/n)}else o.push(s);if(s=r.shift(),s===void 0)return o.join("");i=!i}}function WL(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const o=t.indexOf(">",r),s=t.indexOf("</"+e);if(o===-1||s===-1)break;const i=t.indexOf(">",s);if(i===-1)break;n+=t.slice(o+1,s).trim(),t=t.slice(0,r).trim()+t.slice(i+1)}return{defs:n,content:t}}function GL(t,e){return t?"<defs>"+t+"</defs>"+e:e}function qL(t,e,n){const r=WL(t);return GL(r.defs,e+r.content+n)}const KL=t=>t==="unset"||t==="undefined"||t==="none";function ZL(t,e){const n={...M0,...t},r={...QE,...e},o={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(g=>{const b=[],v=g.hFlip,x=g.vFlip;let w=g.rotate;v?x?w+=2:(b.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),b.push("scale(-1 1)"),o.top=o.left=0):x&&(b.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),b.push("scale(1 -1)"),o.top=o.left=0);let k;switch(w<0&&(w-=Math.floor(w/4)*4),w=w%4,w){case 1:k=o.height/2+o.top,b.unshift("rotate(90 "+k.toString()+" "+k.toString()+")");break;case 2:b.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:k=o.width/2+o.left,b.unshift("rotate(-90 "+k.toString()+" "+k.toString()+")");break}w%2===1&&(o.left!==o.top&&(k=o.left,o.left=o.top,o.top=k),o.width!==o.height&&(k=o.width,o.width=o.height,o.height=k)),b.length&&(s=qL(s,'<g transform="'+b.join(" ")+'">',"</g>"))});const i=r.width,a=r.height,l=o.width,c=o.height;let d,u;i===null?(u=a===null?"1em":a==="auto"?c:a,d=_x(u,l/c)):(d=i==="auto"?l:i,u=a===null?_x(d,c/l):a==="auto"?c:a);const h={},f=(g,b)=>{KL(b)||(h[g]=b.toString())};f("width",d),f("height",u);const p=[o.left,o.top,l,c];return h.viewBox=p.join(" "),{attributes:h,viewBox:p,body:s}}const JL=/\sid="(\S+)"/g,YL="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let XL=0;function QL(t,e=YL){const n=[];let r;for(;r=JL.exec(t);)n.push(r[1]);if(!n.length)return t;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const i=typeof e=="function"?e(s):e+(XL++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+i+o+"$3")}),t=t.replace(new RegExp(o,"g"),""),t}const ky=Object.create(null);function ej(t,e){ky[t]=e}function Cy(t){return ky[t]||ky[""]}function A0(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const R0=Object.create(null),xl=["https://api.simplesvg.com","https://api.unisvg.com"],Zu=[];for(;xl.length>0;)xl.length===1||Math.random()>.5?Zu.push(xl.shift()):Zu.push(xl.pop());R0[""]=A0({resources:["https://api.iconify.design"].concat(Zu)});function tj(t,e){const n=A0(e);return n===null?!1:(R0[t]=n,!0)}function _0(t){return R0[t]}const nj=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let Ix=nj();function rj(t,e){const n=_0(t);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let o=0;n.resources.forEach(i=>{o=Math.max(o,i.length)});const s=e+".json?icons=";r=n.maxURL-o-n.path.length-s.length}return r}function oj(t){return t===404}const sj=(t,e,n)=>{const r=[],o=rj(t,e),s="icons";let i={type:s,provider:t,prefix:e,icons:[]},a=0;return n.forEach((l,c)=>{a+=l.length+1,a>=o&&c>0&&(r.push(i),i={type:s,provider:t,prefix:e,icons:[]},a=l.length),i.icons.push(l)}),r.push(i),r};function ij(t){if(typeof t=="string"){const e=_0(t);if(e)return e.path}return"/"}const aj=(t,e,n)=>{if(!Ix){n("abort",424);return}let r=ij(e.provider);switch(e.type){case"icons":{const s=e.prefix,a=e.icons.join(","),l=new URLSearchParams({icons:a});r+=s+".json?"+l.toString();break}case"custom":{const s=e.uri;r+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let o=503;Ix(t+r).then(s=>{const i=s.status;if(i!==200){setTimeout(()=>{n(oj(i)?"abort":"next",i)});return}return o=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?n("abort",s):n("next",o)});return}setTimeout(()=>{n("success",s)})}).catch(()=>{n("next",o)})},lj={prepare:sj,send:aj};function cj(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((o,s)=>o.provider!==s.provider?o.provider.localeCompare(s.provider):o.prefix!==s.prefix?o.prefix.localeCompare(s.prefix):o.name.localeCompare(s.name));let r={provider:"",prefix:"",name:""};return t.forEach(o=>{if(r.name===o.name&&r.prefix===o.prefix&&r.provider===o.provider)return;r=o;const s=o.provider,i=o.prefix,a=o.name,l=n[s]||(n[s]=Object.create(null)),c=l[i]||(l[i]=Ea(s,i));let d;a in c.icons?d=e.loaded:i===""||c.missing.has(a)?d=e.missing:d=e.pending;const u={provider:s,prefix:i,name:a};d.push(u)}),e}function eM(t,e){t.forEach(n=>{const r=n.loaderCallbacks;r&&(n.loaderCallbacks=r.filter(o=>o.id!==e))})}function dj(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const r=t.provider,o=t.prefix;e.forEach(s=>{const i=s.icons,a=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==o)return!0;const c=l.name;if(t.icons[c])i.loaded.push({provider:r,prefix:o,name:c});else if(t.missing.has(c))i.missing.push({provider:r,prefix:o,name:c});else return n=!0,!0;return!1}),i.pending.length!==a&&(n||eM([t],s.id),s.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),s.abort))})}))}let uj=0;function hj(t,e,n){const r=uj++,o=eM.bind(null,n,r);if(!e.pending.length)return o;const s={id:r,icons:e,callback:t,abort:o};return n.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(s)}),o}function fj(t,e=!0,n=!1){const r=[];return t.forEach(o=>{const s=typeof o=="string"?rp(o,e,n):o;s&&r.push(s)}),r}var pj={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function mj(t,e,n,r){const o=t.resources.length,s=t.random?Math.floor(Math.random()*o):t.index;let i;if(t.random){let S=t.resources.slice(0);for(i=[];S.length>1;){const T=Math.floor(Math.random()*S.length);i.push(S[T]),S=S.slice(0,T).concat(S.slice(T+1))}i=i.concat(S)}else i=t.resources.slice(s).concat(t.resources.slice(0,s));const a=Date.now();let l="pending",c=0,d,u=null,h=[],f=[];typeof r=="function"&&f.push(r);function p(){u&&(clearTimeout(u),u=null)}function g(){l==="pending"&&(l="aborted"),p(),h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function b(S,T){T&&(f=[]),typeof S=="function"&&f.push(S)}function v(){return{startTime:a,payload:e,status:l,queriesSent:c,queriesPending:h.length,subscribe:b,abort:g}}function x(){l="failed",f.forEach(S=>{S(void 0,d)})}function w(){h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function k(S,T,E){const M=T!=="success";switch(h=h.filter(R=>R!==S),l){case"pending":break;case"failed":if(M||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){d=E,x();return}if(M){d=E,h.length||(i.length?C():x());return}if(p(),w(),!t.random){const R=t.resources.indexOf(S.resource);R!==-1&&R!==t.index&&(t.index=R)}l="completed",f.forEach(R=>{R(E)})}function C(){if(l!=="pending")return;p();const S=i.shift();if(S===void 0){if(h.length){u=setTimeout(()=>{p(),l==="pending"&&(w(),x())},t.timeout);return}x();return}const T={status:"pending",resource:S,callback:(E,M)=>{k(T,E,M)}};h.push(T),c++,u=setTimeout(C,t.rotate),n(S,e,T.callback)}return setTimeout(C),v}function tM(t){const e={...pj,...t};let n=[];function r(){n=n.filter(a=>a().status==="pending")}function o(a,l,c){const d=mj(e,a,l,(u,h)=>{r(),c&&c(u,h)});return n.push(d),d}function s(a){return n.find(l=>a(l))||null}return{query:o,find:s,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:r}}function Nx(){}const Im=Object.create(null);function gj(t){if(!Im[t]){const e=_0(t);if(!e)return;const n=tM(e),r={config:e,redundancy:n};Im[t]=r}return Im[t]}function yj(t,e,n){let r,o;if(typeof t=="string"){const s=Cy(t);if(!s)return n(void 0,424),Nx;o=s.send;const i=gj(t);i&&(r=i.redundancy)}else{const s=A0(t);if(s){r=tM(s);const i=t.resources?t.resources[0]:"",a=Cy(i);a&&(o=a.send)}}return!r||!o?(n(void 0,424),Nx):r.query(e,o,n)().abort}function Dx(){}function bj(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,dj(t)}))}function vj(t){const e=[],n=[];return t.forEach(r=>{(r.match(ZE)?e:n).push(r)}),{valid:e,invalid:n}}function kl(t,e,n){function r(){const o=t.pendingIcons;e.forEach(s=>{o&&o.delete(s),t.icons[s]||t.missing.add(s)})}if(n&&typeof n=="object")try{if(!JE(t,n).length){r();return}}catch(o){console.error(o)}r(),bj(t)}function Px(t,e){t instanceof Promise?t.then(n=>{e(n)}).catch(()=>{e(null)}):e(t)}function wj(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:r}=t,o=t.iconsToLoad;if(delete t.iconsToLoad,!o||!o.length)return;const s=t.loadIcon;if(t.loadIcons&&(o.length>1||!s)){Px(t.loadIcons(o,r,n),d=>{kl(t,o,d)});return}if(s){o.forEach(d=>{const u=s(d,r,n);Px(u,h=>{const f=h?{prefix:r,icons:{[d]:h}}:null;kl(t,[d],f)})});return}const{valid:i,invalid:a}=vj(o);if(a.length&&kl(t,a,null),!i.length)return;const l=r.match(ZE)?Cy(n):null;if(!l){kl(t,i,null);return}l.prepare(n,r,i).forEach(d=>{yj(n,d,u=>{kl(t,d.icons,u)})})}))}const xj=(t,e)=>{const n=fj(t,!0,YE()),r=cj(n);if(!r.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(r.loaded,r.missing,r.pending,Dx)}),()=>{l=!1}}const o=Object.create(null),s=[];let i,a;return r.pending.forEach(l=>{const{provider:c,prefix:d}=l;if(d===a&&c===i)return;i=c,a=d,s.push(Ea(c,d));const u=o[c]||(o[c]=Object.create(null));u[d]||(u[d]=[])}),r.pending.forEach(l=>{const{provider:c,prefix:d,name:u}=l,h=Ea(c,d),f=h.pendingIcons||(h.pendingIcons=new Set);f.has(u)||(f.add(u),o[c][d].push(u))}),s.forEach(l=>{const c=o[l.provider][l.prefix];c.length&&wj(l,c)}),e?hj(e,r,s):Dx};function kj(t,e){const n={...t};for(const r in e){const o=e[r],s=typeof o;r in XE?(o===null||o&&(s==="string"||s==="number"))&&(n[r]=o):s===typeof n[r]&&(n[r]=r==="rotate"?o%4:o)}return n}const Cj=/[\s,]+/;function Sj(t,e){e.split(Cj).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function Tj(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function r(o){for(;o<0;)o+=4;return o%4}if(n===""){const o=parseInt(t);return isNaN(o)?0:r(o)}else if(n!==t){let o=0;switch(n){case"%":o=25;break;case"deg":o=90}if(o){let s=parseFloat(t.slice(0,t.length-n.length));return isNaN(s)?0:(s=s/o,s%1===0?r(s):0)}}return e}function Ej(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function Mj(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Aj(t){return"data:image/svg+xml,"+Mj(t)}function Rj(t){return'url("'+Aj(t)+'")'}let ql;function _j(){try{ql=window.trustedTypes.createPolicy("iconify",{createHTML:t=>t})}catch{ql=null}}function Ij(t){return ql===void 0&&_j(),ql?ql.createHTML(t):t}const nM={...QE,inline:!1},Nj={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Dj={display:"inline-block"},Sy={backgroundColor:"currentColor"},rM={backgroundColor:"transparent"},Ox={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Lx={WebkitMask:Sy,mask:Sy,background:rM};for(const t in Lx){const e=Lx[t];for(const n in Ox)e[t+n]=Ox[n]}const Pj={...nM,inline:!0};function jx(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const Oj=(t,e,n)=>{const r=e.inline?Pj:nM,o=kj(r,e),s=e.mode||"svg",i={},a=e.style||{},l={...s==="svg"?Nj:{}};if(n){const b=rp(n,!1,!0);if(b){const v=["iconify"],x=["provider","prefix"];for(const w of x)b[w]&&v.push("iconify--"+b[w]);l.className=v.join(" ")}}for(let b in e){const v=e[b];if(v!==void 0)switch(b){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":break;case"_ref":l.ref=v;break;case"className":l[b]=(l[b]?l[b]+" ":"")+v;break;case"inline":case"hFlip":case"vFlip":o[b]=v===!0||v==="true"||v===1;break;case"flip":typeof v=="string"&&Sj(o,v);break;case"color":i.color=v;break;case"rotate":typeof v=="string"?o[b]=Tj(v):typeof v=="number"&&(o[b]=v);break;case"ariaHidden":case"aria-hidden":v!==!0&&v!=="true"&&delete l["aria-hidden"];break;default:r[b]===void 0&&(l[b]=v)}}const c=ZL(t,o),d=c.attributes;if(o.inline&&(i.verticalAlign="-0.125em"),s==="svg"){l.style={...i,...a},Object.assign(l,d);let b=0,v=e.id;return typeof v=="string"&&(v=v.replace(/-/g,"_")),l.dangerouslySetInnerHTML={__html:Ij(QL(c.body,v?()=>v+"ID"+b++:"iconifyReact"))},y.createElement("svg",l)}const{body:u,width:h,height:f}=t,p=s==="mask"||(s==="bg"?!1:u.indexOf("currentColor")!==-1),g=Ej(u,{...d,width:h+"",height:f+""});return l.style={...i,"--svg":Rj(g),width:jx(d.width),height:jx(d.height),...Dj,...p?Sy:rM,...a},y.createElement("span",l)};YE(!0);ej("",lj);if(typeof document<"u"&&typeof window<"u"){const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!FL(r))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const r="IconifyProviders["+n+"] is invalid.";try{const o=e[n];if(typeof o!="object"||!o||o.resources===void 0)continue;tj(n,o)||console.error(r)}catch{console.error(r)}}}}function oM(t){const[e,n]=y.useState(!!t.ssr),[r,o]=y.useState({});function s(f){if(f){const p=t.icon;if(typeof p=="object")return{name:"",data:p};const g=Rx(p);if(g)return{name:p,data:g}}return{name:""}}const[i,a]=y.useState(s(!!t.ssr));function l(){const f=r.callback;f&&(f(),o({}))}function c(f){if(JSON.stringify(i)!==JSON.stringify(f))return l(),a(f),!0}function d(){var f;const p=t.icon;if(typeof p=="object"){c({name:"",data:p});return}const g=Rx(p);if(c({name:p,data:g}))if(g===void 0){const b=xj([p],d);o({callback:b})}else g&&((f=t.onLoad)===null||f===void 0||f.call(t,p))}y.useEffect(()=>(n(!0),l),[]),y.useEffect(()=>{e&&d()},[t.icon,e]);const{name:u,data:h}=i;return h?Oj({...M0,...h},t,u):t.children?t.children:t.fallback?t.fallback:y.createElement("span",{})}const Lj=y.forwardRef((t,e)=>oM({...t,_ref:e}));y.forwardRef((t,e)=>oM({inline:!0,...t,_ref:e}));const Q=({className:t,...e})=>m.jsx(Lj,{className:le(bd.icon,t),...e}),jj=()=>{const t=yr();return m.jsxs("div",{className:as.container,children:[m.jsx("div",{className:as.left,onClick:()=>t("/"),children:"DREAMER"}),m.jsx("div",{className:as.right,children:m.jsx(Q,{className:as.rightIcon,width:24,icon:"solar:settings-linear",onClick:()=>{t("/setting")}})})]})},vd=({renderLeftComponent:t,renderRightComponent:e,onClickLeftButton:n})=>{const r=yr();return m.jsxs("div",{className:as.container,children:[m.jsxs("div",{className:as.left,onClick:n||(()=>r(-1)),children:[m.jsx(Q,{icon:"solar:arrow-left-outline",width:24,className:as.backIcon}),t==null?void 0:t()]}),m.jsx("div",{className:as.right,children:e==null?void 0:e()})]})},Bj="1.0.1";function Vj(){const{shortBreak:t,setShortBreak:e,pomodoro:n,setPomodoro:r,longBreak:o,setLongBreak:s,theme:i,setTheme:a}=np(),l=yr(),{language:c,changeLanguage:d,formatMessage:u}=Bt();return m.jsxs("div",{className:wl.container,children:[m.jsx(vd,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:u({id:"setting-page.title",defaultMessage:"Setting"})})}),m.jsxs("div",{className:wl.body,children:[m.jsx(dt.ItemMeta,{logo:m.jsx(Z5,{}),title:u({id:"setting-page.label-theme",defaultMessage:"Theme"}),description:u({id:"setting-page.description-theme",defaultMessage:"Config theme for whole page"}),rightComponent:m.jsx(vy,{isButton:!0,value:i,onChangeValue:h=>a(h),options:[{label:u({id:"setting-page.label-light",defaultMessage:"Light"}),value:bi.Light},{label:u({id:"setting-page.label-dark",defaultMessage:"Dark"}),value:bi.Dark}]})}),m.jsx(dt.ItemMeta,{logo:m.jsx(x5,{}),title:"Language",description:"Config language for whole page",rightComponent:m.jsx(vy,{isButton:!0,value:c,onChangeValue:h=>d(h),options:[{label:"VN",value:xc.Vi},{label:"EN",value:xc.En}]})}),m.jsx(dt.ItemMeta,{onClick:()=>l("/checklist-template"),logo:m.jsx(Q,{width:24,icon:"proicons:task-list"}),title:"Task Management",description:"Select/ Deselect Tasks"})]}),m.jsxs("a",{href:"https://github.com/tomzaku/dreamer-web-public/issues",className:wl.footer,children:[m.jsxs(ae.Text,{className:wl.version,children:["Version: ",Bj]}),m.jsx(ae.Text,{className:wl.link,children:"| Feature Request | Bug Report"})]})]})}const $j="record_field",Hj={duration:{id:"duration",title:"Duration",icon:"solar:clock-square-broken",description:"Record duration for tracking purpose",type:"metric",unit:"minutes"},"push-ups":{id:"push-ups",title:"Push-ups",icon:"iconoir:gym",description:"For example: Push-ups, Squats",type:"metric",unit:"reps"},note:{id:"note",title:"Note",icon:"solar:notebook-minimalistic-linear",description:"Note for tracking purpose",type:"note",unit:"words"}},I0=()=>{const[t,e]=cr($j,Hj);return{getAllRecordFields:()=>Object.values(t),getRecordFields:s=>s.map(i=>t[i]),addRecordField:s=>{const i=rn();e(a=>({...a,[i]:{id:i,...s}}))},removeRecordField:s=>{e(i=>{const a={...i};return delete a[s],a})}}},Fj="_container_cj2x8_1",zj={container:Fj};function jr({children:t,className:e,onClick:n}){return m.jsx("div",{onClick:n,className:le(zj.container,e),children:t})}const Uj="_container_yw9a7_2",Wj="_title_yw9a7_8",Gj="_button_yw9a7_12",qj="_buttonActive_yw9a7_19",Kj="_addIcon_yw9a7_23",Zj="_icon_yw9a7_27",Jj="_iconActive_yw9a7_31",Yj="_hr_yw9a7_35",Wo={container:Uj,title:Wj,button:Gj,buttonActive:qj,addIcon:Kj,icon:Zj,iconActive:Jj,hr:Yj},Xj="_container_ngn4e_1",Qj="_hr_ngn4e_11",Bx={container:Xj,hr:Qj},Kl=({classes:t}={})=>m.jsx("div",{className:le(Bx.container,t==null?void 0:t.container),children:m.jsx("div",{className:le(Bx.hr,t==null?void 0:t.hr)})});var Ft=(t=>(t[t.Home=0]="Home",t[t.History=1]="History",t[t.Add=2]="Add",t[t.Metric=3]="Metric",t))(Ft||{});const e9=({onClickHome:t,onClickHistory:e,onClickAdd:n,onClickMetric:r,activeTab:o,renderTitle:s=()=>null})=>{const i=[{icon:"solar:home-2-line-duotone",iconActive:"solar:home-2-bold",onClick:t,isActive:o===0},{icon:"solar:clock-square-broken",iconActive:"solar:clock-square-bold",onClick:e,isActive:o===1},{icon:"solar:chart-square-linear",iconActive:"solar:chart-square-bold",onClick:r,isActive:o===3}],a=Bt();return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:Wo.container,children:[m.jsx(ae.Title,{level:4,noMargin:!0,className:Wo.title,children:s()}),i.map(({icon:l,iconActive:c,onClick:d,isActive:u},h)=>m.jsx(Q,{onClick:d,className:le(Wo.icon,u&&Wo.iconActive),width:24,icon:u?c:l},h)),m.jsxs(St,{className:le(Wo.button,o===2&&Wo.buttonActive),type:"dash",onClick:n,children:[m.jsx(Q,{icon:"material-symbols:add",className:Wo.addIcon}),a.formatMessage({id:"record-header.add-record",defaultMessage:"Add"})]})]}),m.jsx(Kl,{classes:{hr:Wo.hr}})]})},t9="_cardContainer_zrk1z_2",n9={cardContainer:t9},r9="_container_udzj2_2",o9="_dash_udzj2_18",s9="_solid_udzj2_22",Nm={container:r9,dash:o9,solid:s9},mo=N.forwardRef(({className:t,border:e,...n},r)=>m.jsx("input",{ref:r,className:le(Nm.container,e==="dash"&&Nm.dash,e==="solid"&&Nm.solid,t),...n}));function bt(t){this.content=t}bt.prototype={constructor:bt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new bt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new bt(n)},addToStart:function(t,e){return new bt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new bt(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new bt(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=bt.from(t),t.size?new bt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=bt.from(t),t.size?new bt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=bt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};bt.from=function(t){if(t instanceof bt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new bt(e)};function sM(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=sM(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function iM(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,d=Math.min(i.text.length,a.text.length);for(;c<d&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=iM(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class _{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,o+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new _(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new _(r,o)}cutByIndex(e,n){return e==n?_.empty:e==0&&n==this.content.length?this:new _(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new _(o,s)}addToStart(e){return new _([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return sM(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return iM(this,e,n,r)}findIndex(e,n=-1){if(e==0)return cu(0,e);if(e==this.size)return cu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?cu(r+1,i):cu(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return _.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new _(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new _(n||e,r)}static from(e){if(!e)return _.empty;if(e instanceof _)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_.empty=new _([],0);const Dm={index:0,offset:0};function cu(t,e){return Dm.index=t,Dm.offset=e,Dm}function wh(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!wh(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!wh(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ne=class Ty{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&wh(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ty.none;if(e instanceof Ty)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Ne.none=[];class xh extends Error{}class j{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=lM(this.content,e+this.openStart,n);return r&&new j(r,this.openStart,this.openEnd)}removeBetween(e,n){return new j(aM(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return j.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new j(_.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new j(e,r,o)}}j.empty=new j(_.empty,0,0);function aM(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(aM(s.content,e-o-1,n-o-1)))}function lM(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=lM(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function i9(t,e,n){if(n.openStart>t.depth)throw new xh("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new xh("Inconsistent open depths");return cM(t,e,n,0)}function cM(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=cM(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return ci(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=a9(n,t);return ci(s,uM(t,i,a,e,r))}else return ci(s,kh(t,e,r))}function dM(t,e){if(!e.type.compatibleContent(t.type))throw new xh("Cannot join "+e.type.name+" onto "+t.type.name)}function Ey(t,e,n){let r=t.node(n);return dM(r,e.node(n)),r}function li(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Zl(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(li(t.nodeAfter,r),s++));for(let a=s;a<i;a++)li(o.child(a),r);e&&e.depth==n&&e.textOffset&&li(e.nodeBefore,r)}function ci(t,e){return t.type.checkContent(e),t.copy(e)}function uM(t,e,n,r,o){let s=t.depth>o&&Ey(t,e,o+1),i=r.depth>o&&Ey(n,r,o+1),a=[];return Zl(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(dM(s,i),li(ci(s,uM(t,e,n,r,o+1)),a)):(s&&li(ci(s,kh(t,e,o+1)),a),Zl(e,n,o,a),i&&li(ci(i,kh(n,r,o+1)),a)),Zl(r,null,o,a),new _(a)}function kh(t,e,n){let r=[];if(Zl(null,t,n,r),t.depth>n){let o=Ey(t,e,n+1);li(ci(o,kh(t,e,n+1)),r)}return Zl(e,null,n,r),new _(r)}function a9(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(_.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class Cc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ne.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ch(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new Cc(n,r,s)}static resolveCached(e,n){let r=Vx.get(e);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else Vx.set(e,r=new l9);let o=r.elts[r.i]=Cc.resolve(e,n);return r.i=(r.i+1)%c9,o}}class l9{constructor(){this.elts=[],this.i=0}}const c9=12,Vx=new WeakMap;class Ch{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const d9=Object.create(null);let wo=class My{constructor(e,n,r,o=Ne.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||_.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&wh(this.attrs,n||e.defaultAttrs||d9)&&Ne.sameSet(this.marks,r||Ne.none)}copy(e=null){return e==this.content?this:new My(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new My(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return j.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new j(c,o.depth-i,s.depth-i)}replace(e,n,r){return i9(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return Cc.resolveCached(this,e)}resolveNoCache(e){return Cc.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),hM(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=_.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ne.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ne.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=_.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};wo.prototype.text=void 0;class Sh extends wo{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):hM(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Sh(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Sh(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function hM(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class vi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new u9(e,n);if(r.next==null)return vi.empty;let o=fM(r);r.next&&r.err("Unexpected trailing text");let s=b9(y9(o));return v9(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return _.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:d,next:u}=i.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(u)==-1){o.push(u);let h=s(u,a.concat(d));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}vi.empty=new vi(!0);class u9{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function fM(t){let e=[];do e.push(h9(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function h9(t){let e=[];do e.push(f9(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function f9(t){let e=g9(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=p9(t,e);else break;return e}function $x(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function p9(t,e){let n=$x(t),r=n;return t.eat(",")&&(t.next!="}"?r=$x(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function m9(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(e)&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function g9(t){if(t.eat("(")){let e=fM(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=m9(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function y9(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let d=n();o(s(i.expr,l),d),l=d}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let d=n();r(l,d),o(s(i.expr,l),d),l=d}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function pM(t,e){return e-t}function Hx(t,e){let n=[];return r(e),n.sort(pM);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function b9(t){let e=Object.create(null);return n(Hx(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<o.length;d++)o[d][0]==a&&(c=o[d][1]);Hx(t,l).forEach(d=>{c||o.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[r.join(",")]=new vi(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(pM);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function v9(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function mM(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function gM(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function yM(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function bM(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new x9(t,r,e[r]);return n}let Fx=class vM{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=bM(e,r.attrs),this.defaultAttrs=mM(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==vi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:gM(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wo(this,this.computeAttrs(e),_.from(n),Ne.setFrom(r))}createChecked(e=null,n,r){return n=_.from(n),this.checkContent(n),new wo(this,this.computeAttrs(e),n,Ne.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=_.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(_.empty,!0);return s?new wo(this,e,n.append(s),Ne.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){yM(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ne.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new vM(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function w9(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class x9{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?w9(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class op{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=bM(e,o.attrs),this.excluded=null;let s=mM(this.attrs);this.instance=s?new Ne(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ne(this,gM(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new op(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){yM(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class wM{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=bt.from(e.nodes),n.marks=bt.from(e.marks||{}),this.nodes=Fx.compile(this.spec.nodes,this),this.marks=op.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=vi.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?zx(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:zx(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Fx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Sh(r,r.defaultAttrs,e,Ne.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return wo.fromJSON(this,e)}markFromJSON(e){return Ne.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function zx(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function k9(t){return t.tag!=null}function C9(t){return t.style!=null}let xo=class Ay{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(k9(o))this.tags.push(o);else if(C9(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new Wx(this,n,!1);return r.addAll(e,Ne.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Wx(this,n,!0);return r.addAll(e,Ne.none,n.from,n.to),j.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(E9(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=Gx(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=Gx(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ay(e,Ay.schemaRules(e)))}};const xM={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},S9={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},kM={ol:!0,ul:!0},Sc=1,Ry=2,Ju=4;function Ux(t,e,n){return e!=null?(e?Sc:0)|(e==="full"?Ry:0):t&&t.whitespace=="pre"?Sc|Ry:n&-5}class du{constructor(e,n,r,o,s,i){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=Ne.none,this.match=s||(i&Ju?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(_.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Sc)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=_.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(_.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!xM.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Wx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=Ux(null,n.preserveWhitespace,0)|(r?Ju:0);o?s=new du(o.type,o.attrs,Ne.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new du(null,null,Ne.none,!0,null,i):s=new du(e.schema.topNodeType,null,Ne.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&Ry?"full":this.localPreserveWS||(o.options&Sc)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;kM.hasOwnProperty(i)&&this.parser.normalizeLists&&T9(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:S9.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(xM.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let u=l&&l.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,n);this.findAtPoint(e,s)}findPlace(e,n,r){let o,s;for(let i=this.open,a=0;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(s);for(let i=0;i<o.length;i++)n=this.enterInner(o[i],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=Ne.none;for(let a of o.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):qx(a.type,e.type))&&(i=a.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=Ux(e,s,i.options);i.options&Ju&&i.content.length==0&&(a|=Ju);let l=Ne.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):qx(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new du(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Sc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let d=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function T9(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&kM.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function E9(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Gx(t){let e={};for(let n in t)e[n]=t[n];return e}function qx(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&i(d))return!0}};if(i(o.contentMatch))return!0}}class No{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Pm(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],d=this.serializeMark(c,i.isInline,n);d&&(s.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=Yu(Pm(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&Yu(Pm(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return Yu(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new No(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Kx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Kx(e.marks)}}function Kx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Pm(t){return t.document||window.document}const Zx=new WeakMap;function M9(t){let e=Zx.get(t);return e===void 0&&Zx.set(t,e=A9(t)),e}function A9(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function Yu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=M9(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let u in c)if(c[u]!=null){let h=u.indexOf(" ");h>0?l.setAttributeNS(u.slice(0,h),u.slice(h+1),c[u]):l.setAttribute(u,c[u])}}for(let u=d;u<e.length;u++){let h=e[u];if(h===0){if(u<e.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=Yu(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const CM=65535,SM=Math.pow(2,16);function R9(t,e){return t+e*SM}function Jx(t){return t&CM}function _9(t){return(t-(t&CM))/SM}const TM=1,EM=2,Xu=4,MM=8;class _y{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&MM)>0}get deletedBefore(){return(this.delInfo&(TM|Xu))>0}get deletedAfter(){return(this.delInfo&(EM|Xu))>0}get deletedAcross(){return(this.delInfo&Xu)>0}}class bn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&bn.empty)return bn.empty}recover(e){let n=0,r=Jx(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+_9(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+i],u=l+c;if(e<=u){let h=c?e==l?-1:e==u?1:n:n,f=l+o+(h<0?0:d);if(r)return f;let p=e==(n<0?l:u)?null:R9(a/3,e-l),g=e==l?EM:e==u?TM:Xu;return(n<0?e!=l:e!=u)&&(g|=MM),new _y(f,g,p)}o+=d-c}return r?e+o:new _y(e+o,0,null)}touches(e,n){let r=0,o=Jx(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],d=this.ranges[o+r];e(a,a+c,l,l+d),s+=d-c}}invert(){return new bn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?bn.empty:new bn(e<0?[0,-e,0]:[0,0,e])}}bn.empty=new bn([]);class Ma{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ma(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Ma;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this._maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new _y(e,o,null)}}const Om=Object.create(null);class Vt{getMap(){return bn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Om[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Om)throw new RangeError("Duplicate use of step JSON ID "+e);return Om[e]=n,n.prototype.jsonID=e,n}}class ot{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ot(e,null)}static fail(e){return new ot(null,e)}static fromReplace(e,n,r,o){try{return ot.ok(e.replace(n,r,o))}catch(s){if(s instanceof xh)return ot.fail(s.message);throw s}}}function N0(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(N0(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return _.fromArray(r)}class ls extends Vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new j(N0(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return ot.fromReplace(e,this.from,this.to,s)}invert(){return new Rr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ls(n.pos,r.pos,this.mark)}merge(e){return e instanceof ls&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ls(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ls(n.from,n.to,e.markFromJSON(n.mark))}}Vt.jsonID("addMark",ls);class Rr extends Vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new j(N0(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return ot.fromReplace(e,this.from,this.to,r)}invert(){return new ls(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Rr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Rr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Rr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Rr(n.from,n.to,e.markFromJSON(n.mark))}}Vt.jsonID("removeMark",Rr);class cs extends Vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ot.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ot.fromReplace(e,this.pos,this.pos+1,new j(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new cs(this.pos,n.marks[o]);return new cs(this.pos,this.mark)}}return new wi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new cs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new cs(n.pos,e.markFromJSON(n.mark))}}Vt.jsonID("addNodeMark",cs);class wi extends Vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ot.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ot.fromReplace(e,this.pos,this.pos+1,new j(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new cs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new wi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new wi(n.pos,e.markFromJSON(n.mark))}}Vt.jsonID("removeNodeMark",wi);class rt extends Vt{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Iy(e,this.from,this.to)?ot.fail("Structure replace would overwrite content"):ot.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new bn([this.from,this.to-this.from,this.slice.size])}invert(e){return new rt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new rt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof rt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?j.empty:new j(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new rt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?j.empty:new j(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new rt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new rt(n.from,n.to,j.fromJSON(e,n.slice),!!n.structure)}}Vt.jsonID("replace",rt);class nt extends Vt{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(Iy(e,this.from,this.gapFrom)||Iy(e,this.gapTo,this.to)))return ot.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ot.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ot.fromReplace(e,this.from,this.to,r):ot.fail("Content does not fit in gap")}getMap(){return new bn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new nt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new nt(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new nt(n.from,n.to,n.gapFrom,n.gapTo,j.fromJSON(e,n.slice),n.insert,!!n.structure)}}Vt.jsonID("replaceAround",nt);function Iy(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function I9(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let u=l.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(u);for(let g=0;g<u.length;g++)u[g].isInSet(p)||(i&&i.to==h&&i.mark.eq(u[g])?i.to=f:o.push(i=new Rr(h,f,u[g])));a&&a.to==h?a.to=f:s.push(a=new ls(h,f,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function N9(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof op){let c=i.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let d=0;d<l.length;d++){let u=l[d],h;for(let f=0;f<o.length;f++){let p=o[f];p.step==s-1&&u.eq(o[f].style)&&(h=p)}h?(h.to=c,h.step=s):o.push({style:u,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new Rr(i.from,i.to,i.style)))}function D0(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,u=r.matchType(c.type);if(!u)i.push(new rt(a,d,j.empty));else{r=u;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Rr(a,d,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new j(_.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new rt(a+h.index,a+h.index+h[0].length,p))}}a=d}if(!r.validEnd){let l=r.fillBefore(_.empty,!0);t.replace(a,a,new j(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function D9(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Wa(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!D9(o,s,i))break}return null}function P9(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,d=_.empty,u=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,d=_.from(r.node(p).copy(d)),u++):l--;let h=_.empty,f=0;for(let p=s,g=!1;p>n;p--)g||o.after(p+1)<o.end(p)?(g=!0,h=_.from(o.node(p).copy(h)),f++):c++;t.step(new nt(l,c,i,a,new j(d.append(h),u,f),d.size-u,!0))}function AM(t,e,n=null,r=t){let o=O9(t,e),s=o&&L9(r,e);return s?o.map(Yx).concat({type:e,attrs:n}).concat(s.map(Yx)):null}function Yx(t){return{type:t,attrs:null}}function O9(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function L9(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function j9(t,e,n){let r=_.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new nt(o,s,o,s,new j(r,0,0),n.length,!0))}function B9(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&V9(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&_M(t,i,a,s),D0(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let d=t.mapping.slice(s),u=d.map(a,1),h=d.map(a+i.nodeSize,1);return t.step(new nt(u,h,u+1,h-1,new j(_.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&RM(t,i,a,s),!1}})}function RM(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+s+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function _M(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+s);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function V9(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function $9(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new nt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new j(_.from(i),0,0),1,!0))}function ko(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=n-2;c>s;c--,d--){let u=o.node(c),h=o.index(c);if(u.type.spec.isolating)return!1;let f=u.content.cutByIndex(h,u.childCount),p=r&&r[d+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[d]||u;if(!u.canReplace(h+1,u.childCount)||!g.type.validContent(f))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function H9(t,e,n=1,r){let o=t.doc.resolve(e),s=_.empty,i=_.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=_.from(o.node(a).copy(s));let d=r&&r[c];i=_.from(d?d.type.create(d.attrs,i):o.node(a).copy(i))}t.step(new rt(e,e,new j(s.append(i),n,n),!0))}function Li(t,e){let n=t.resolve(e),r=n.index();return IM(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function F9(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),i=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function IM(t,e){return!!(t&&e&&!t.isLeaf&&F9(t,e))}function sp(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&IM(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function z9(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),i=s.node().type;if(o&&i.inlineContent){let d=i.whitespace=="pre",u=!!i.contentMatch.matchType(o);d&&!u?r=!1:!d&&u&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);_M(t,d.node(),d.before(),a)}i.inlineContent&&D0(t,e+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new rt(c,l.map(e+n,-1),j.empty,!0)),r===!0){let d=t.doc.resolve(c);RM(t,d.node(),d.before(),t.steps.length)}return t}function U9(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function NM(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),d=!1;if(s==1)d=c.canReplace(l,l,o);else{let u=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=u&&c.canReplaceWith(l,l,u[0])}if(d)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function ip(t,e,n=e,r=j.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return DM(o,s,r)?new rt(e,n,r):new W9(o,s,r).fit()}function DM(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class W9{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=_.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=_.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new j(s,i,a);return e>-1?new nt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new rt(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=Lm(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,u=null;if(n==1&&(i?c.matchType(i.type)||(u=c.fillBefore(_.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:u};if(n==2&&i&&(d=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Lm(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new j(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Lm(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new j(jl(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new j(jl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,d=[],{match:u,type:h}=this.frontier[n];if(o){for(let g=0;g<o.childCount;g++)d.push(o.child(g));u=u.matchFragment(o)}let f=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let g=a.child(c),b=u.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(u=b,d.push(PM(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Bl(this.placed,n,_.from(d)),this.frontier[n].match=u,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<f;g++){let v=b.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),b=v.content}this.unplaced=p?e==0?j.empty:new j(jl(i.content,e-1,1),e-1,f<0?i.openEnd:e-1):new j(jl(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!jm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=jm(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=jm(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Bl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Bl(this.placed,this.depth,_.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(_.empty,!0);n.childCount&&(this.placed=Bl(this.placed,this.frontier.length,n))}}function jl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(jl(t.firstChild.content,e-1,n)))}function Bl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Bl(t.lastChild.content,e-1,n)))}function Lm(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function PM(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,PM(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(_.empty,!0)))),t.copy(r)}function jm(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!G9(n,s.content,i)?a:null}function G9(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function q9(t){return t.spec.defining||t.spec.definingForContent}function K9(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(DM(o,s,r))return t.step(new rt(e,n,r));let i=LM(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let h=o.depth,f=o.pos-1;h>0;h--,f--){let p=o.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;i.indexOf(h)>-1?a=h:o.before(h)==f&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],d=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=d-1;h>=0;h--){let f=c[h],p=q9(f.type);if(p&&!f.sameMarkup(o.node(Math.abs(a)-1)))d=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+d+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<i.length;g++){let b=i[(g+l)%i.length],v=!0;b<0&&(v=!1,b=-b);let x=o.node(b-1),w=o.index(b-1);if(x.canReplaceWith(w,w,p.type,p.marks))return t.replace(o.before(b),v?s.after(b):n,new j(OM(r.content,0,r.openStart,f),f,r.openEnd))}}let u=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>u));h--){let f=i[h];f<0||(e=o.before(f),n=s.after(f))}}function OM(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(OM(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(_.empty,!0))}return t}function Z9(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=U9(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new j(_.from(r),0,0))}function J9(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=LM(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function LM(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class ma extends Vt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ot.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return ot.fromReplace(e,this.pos,this.pos+1,new j(_.from(o),0,n.isLeaf?0:1))}getMap(){return bn.empty}invert(e){return new ma(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ma(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ma(n.pos,n.attr,n.value)}}Vt.jsonID("attr",ma);class Tc extends Vt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ot.ok(r)}getMap(){return bn.empty}invert(e){return new Tc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Tc(n.attr,n.value)}}Vt.jsonID("docAttr",Tc);let Aa=class extends Error{};Aa=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Aa.prototype=Object.create(Error.prototype);Aa.prototype.constructor=Aa;Aa.prototype.name="TransformError";class P0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ma}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Aa(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=j.empty){let o=ip(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new j(_.from(r),0,0))}delete(e,n){return this.replace(e,n,j.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return K9(this,e,n,r),this}replaceRangeWith(e,n,r){return Z9(this,e,n,r),this}deleteRange(e,n){return J9(this,e,n),this}lift(e,n){return P9(this,e,n),this}join(e,n=1){return z9(this,e,n),this}wrap(e,n){return j9(this,e,n),this}setBlockType(e,n=e,r,o=null){return B9(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return $9(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new ma(e,n,r)),this}setDocAttribute(e,n){return this.step(new Tc(e,n)),this}addNodeMark(e,n){return this.step(new cs(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ne)n.isInSet(r.marks)&&this.step(new wi(e,n));else{let o=r.marks,s,i=[];for(;s=n.isInSet(o);)i.push(new wi(e,s)),o=s.removeFromSet(o);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(e,n=1,r){return H9(this,e,n,r),this}addMark(e,n,r){return I9(this,e,n,r),this}removeMark(e,n,r){return N9(this,e,n,r),this}clearIncompatible(e,n,r){return D0(this,e,n,r),this}}const Bm=Object.create(null);class ee{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new jM(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=j.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?j.empty:n),a==0&&ek(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),ek(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new U(e):ra(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?ra(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):ra(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new cn(e.node(0))}static atStart(e){return ra(e,e,0,0,1)||new cn(e)}static atEnd(e){return ra(e,e,e.content.size,e.childCount,-1)||new cn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Bm[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Bm)throw new RangeError("Duplicate use of selection JSON ID "+e);return Bm[e]=n,n.prototype.jsonID=e,n}getBookmark(){return U.between(this.$anchor,this.$head).getBookmark()}}ee.prototype.visible=!0;class jM{constructor(e,n){this.$from=e,this.$to=n}}let Xx=!1;function Qx(t){!Xx&&!t.parent.inlineContent&&(Xx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class U extends ee{constructor(e,n=e){Qx(e),Qx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ee.near(r);let o=e.resolve(n.map(this.anchor));return new U(o.parent.inlineContent?o:r,r)}replace(e,n=j.empty){if(super.replace(e,n),n==j.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof U&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ap(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new U(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=ee.findFrom(n,r,!0)||ee.findFrom(n,-r,!0);if(s)n=s.$head;else return ee.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(ee.findFrom(e,-r,!0)||ee.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new U(e,n)}}ee.jsonID("text",U);class ap{constructor(e,n){this.anchor=e,this.head=n}map(e){return new ap(e.map(this.anchor),e.map(this.head))}resolve(e){return U.between(e.resolve(this.anchor),e.resolve(this.head))}}class q extends ee{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?ee.near(s):new q(s)}content(){return new j(_.from(this.node),0,0)}eq(e){return e instanceof q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new O0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new q(e.resolve(n.anchor))}static create(e,n){return new q(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}q.prototype.visible=!1;ee.jsonID("node",q);class O0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new ap(r,r):new O0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&q.isSelectable(r)?new q(n):ee.near(n)}}class cn extends ee{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=j.empty){if(n==j.empty){e.delete(0,e.doc.content.size);let r=ee.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new cn(e)}map(e){return new cn(e)}eq(e){return e instanceof cn}getBookmark(){return Y9}}ee.jsonID("all",cn);const Y9={map(){return this},resolve(t){return new cn(t)}};function ra(t,e,n,r,o,s=!1){if(e.inlineContent)return U.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&q.isSelectable(a))return q.create(t,n-(o<0?a.nodeSize:0))}else{let l=ra(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function ek(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof rt||o instanceof nt))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,d)=>{i==null&&(i=d)}),t.setSelection(ee.near(t.doc.resolve(i),n))}const tk=1,nk=2,rk=4;let X9=class extends P0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|tk)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&tk)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=nk,this}ensureMarks(e){return Ne.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&nk)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ne.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(ee.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=rk,this}get scrolledIntoView(){return(this.updated&rk)>0}};function ok(t,e){return!e||!t?t:t.bind(e)}class Vl{constructor(e,n,r){this.name=e,this.init=ok(n.init,r),this.apply=ok(n.apply,r)}}const Q9=[new Vl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Vl("selection",{init(t,e){return t.selection||ee.atStart(e.doc)},apply(t){return t.selection}}),new Vl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Vl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Vm{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Q9.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Vl(r.key,r.spec.state,r))})}}class ei{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,i)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let u=0;u<this.config.plugins.length;u++)o.push(u<i?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ei(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new X9(this)}static create(e){let n=new Vm(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ei(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Vm(this.schema,e.plugins),r=n.fields,o=new ei(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Vm(e.schema,e.plugins),s=new ei(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=wo.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=ee.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function BM(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=BM(o,e,{})),n[r]=o}return n}class me{constructor(e){this.spec=e,this.props={},e.props&&BM(e.props,this,this.props),this.key=e.key?e.key.key:VM("plugin")}getState(e){return e[this.key]}}const $m=Object.create(null);function VM(t){return t in $m?t+"$"+ ++$m[t]:($m[t]=0,t+"$")}class Te{constructor(e="key"){this.key=VM(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const xt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ra=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Ny=null;const ho=function(t,e,n){let r=Ny||(Ny=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},eB=function(){Ny=null},xi=function(t,e,n,r){return n&&(sk(t,e,n,r,-1)||sk(t,e,n,r,1))},tB=/^(img|br|input|textarea|hr)$/i;function sk(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Vn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||wd(t)||tB.test(t.nodeName)||t.contentEditable=="false")return!1;e=xt(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?Vn(t):0}else return!1}}function Vn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function nB(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Vn(t)}else if(t.parentNode&&!wd(t))e=xt(t),t=t.parentNode;else return null}}function rB(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!wd(t))e=xt(t)+1,t=t.parentNode;else return null}}function oB(t,e,n){for(let r=e==0,o=e==Vn(t);r||o;){if(t==n)return!0;let s=xt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==Vn(t)}}function wd(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const lp=function(t){return t.focusNode&&xi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Zs(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function sB(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function iB(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Vn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Vn(r.startContainer),r.startOffset)}}}const Br=typeof navigator<"u"?navigator:null,ik=typeof document<"u"?document:null,Is=Br&&Br.userAgent||"",Dy=/Edge\/(\d+)/.exec(Is),$M=/MSIE \d/.exec(Is),Py=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Is),dn=!!($M||Py||Dy),ms=$M?document.documentMode:Py?+Py[1]:Dy?+Dy[1]:0,dr=!dn&&/gecko\/(\d+)/i.test(Is);dr&&+(/Firefox\/(\d+)/.exec(Is)||[0,0])[1];const Oy=!dn&&/Chrome\/(\d+)/.exec(Is),Dt=!!Oy,HM=Oy?+Oy[1]:0,qt=!dn&&!!Br&&/Apple Computer/.test(Br.vendor),_a=qt&&(/Mobile\/\w+/.test(Is)||!!Br&&Br.maxTouchPoints>2),Ln=_a||(Br?/Mac/.test(Br.platform):!1),aB=Br?/Win/.test(Br.platform):!1,go=/Android \d/.test(Is),xd=!!ik&&"webkitFontSmoothing"in ik.documentElement.style,lB=xd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function cB(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function no(t,e){return typeof t=="number"?t:t[e]}function dB(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function ak(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;){if(i.nodeType!=1){i=Ra(i);continue}let a=i,l=a==s.body,c=l?cB(s):dB(a),d=0,u=0;if(e.top<c.top+no(r,"top")?u=-(c.top-e.top+no(o,"top")):e.bottom>c.bottom-no(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+no(o,"top")-c.top:e.bottom-c.bottom+no(o,"bottom")),e.left<c.left+no(r,"left")?d=-(c.left-e.left+no(o,"left")):e.right>c.right-no(r,"right")&&(d=e.right-c.right+no(o,"right")),d||u)if(l)s.defaultView.scrollBy(d,u);else{let f=a.scrollLeft,p=a.scrollTop;u&&(a.scrollTop+=u),d&&(a.scrollLeft+=d);let g=a.scrollLeft-f,b=a.scrollTop-p;e={left:e.left-g,top:e.top-b,right:e.right-g,bottom:e.bottom-b}}let h=l?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(h))break;i=h=="absolute"?i.offsetParent:Ra(i)}}function uB(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:FM(t.dom)}}function FM(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ra(r));return e}function hB({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;zM(n,r==0?0:r-e)}function zM(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let qi=null;function fB(t){if(t.setActive)return t.setActive();if(qi)return t.focus(qi);let e=FM(t);t.focus(qi==null?{get preventScroll(){return qi={preventScroll:!0},!0}}:void 0),qi||(qi=!1,zM(e,0))}function UM(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let d=t.firstChild,u=0;d;d=d.nextSibling,u++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=ho(d).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=i&&p.bottom>=a){i=Math.max(p.bottom,i),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=d,r=g,o=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,d.nodeType==1&&g&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=d,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?pB(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:UM(n,o)}function pB(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=Zo(r,1);if(s.top!=s.bottom&&L0(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function L0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function mB(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function gB(t,e,n){let{node:r,offset:o}=UM(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function yB(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function WM(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(L0(e,c))return WM(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function bB(t,e){let n=t.dom.ownerDocument,r,o=0,s=iB(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!L0(e,c)||(i=WM(t.dom,e,c),!i))return null}if(qt)for(let c=i;r&&c;c=Ra(c))c.draggable&&(r=void 0);if(i=mB(i,e),r){if(dr&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}let c;xd&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=yB(t,r,o,e))}a==null&&(a=gB(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function lk(t){return t.top<t.bottom||t.left<t.right}function Zo(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(lk(r))return r}return Array.prototype.find.call(n,lk)||t.getBoundingClientRect()}const vB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function GM(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=xd||dr;if(r.nodeType==3)if(i&&(vB.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Zo(ho(r,o,o),n);if(dr&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Zo(ho(r,o-1,o-1),-1);if(c.top==l.top){let d=Zo(ho(r,o,o+1),-1);if(d.top!=l.top)return Cl(d,d.left<c.left)}}return l}else{let l=o,c=o,d=n<0?1:-1;return n<0&&!o?(c++,d=-1):n>=0&&o==r.nodeValue.length?(l--,d=1):n<0?l--:c++,Cl(Zo(ho(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==Vn(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return Hm(l.getBoundingClientRect(),!1)}if(s==null&&o<Vn(r)){let l=r.childNodes[o];if(l.nodeType==1)return Hm(l.getBoundingClientRect(),!0)}return Hm(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==Vn(r))){let l=r.childNodes[o-1],c=l.nodeType==3?ho(l,Vn(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Cl(Zo(c,1),!1)}if(s==null&&o<Vn(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?ho(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Cl(Zo(c,-1),!0)}return Cl(Zo(r.nodeType==3?ho(r):r,-n),n>=0)}function Cl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Hm(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function qM(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function wB(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return qM(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=GM(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ho(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?i.top-d.top>(d.bottom-i.top)*2:d.bottom-i.bottom>(i.bottom-d.top)*2))return!1}}return!0})}const xB=/[\u0590-\u08ac]/;function kB(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return a?!xB.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:qM(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:u}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),b=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(d,u),l&&(l!=d||c!=u)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),b}):r.pos==r.start()||r.pos==r.end()}let ck=null,dk=null,uk=!1;function CB(t,e,n){return ck==e&&dk==n?uk:(ck=e,dk=n,uk=n=="up"||n=="down"?wB(t,e,n):kB(t,e,n))}const zn=0,hk=1,ti=2,Vr=3;class kd{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=zn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>xt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof ZM){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof KM&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?xt(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?xt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let d=i+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=i;for(let u=a;u>0;u--){let h=this.children[u-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=xt(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=xt(u.dom);break}n+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],b=p+g.size;if(s>p&&i<b)return g.setSelection(e-p-g.border,n-p-g.border,r,o);p=b}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),u=!1;if((dr||qt)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(u=!!(p&&f.nodeValue[p-1]==`
`),u&&p==f.nodeValue.length)for(let g=f,b;g;g=g.parentNode){if(b=g.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:xt(b)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=f.childNodes[p-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(dr&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let f=d.focusNode.childNodes[d.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||u&&qt)&&xi(a.node,a.offset,d.anchorNode,d.anchorOffset)&&xi(l.node,l.offset,d.focusNode,d.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?ti:hk,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Vr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ti:Vr}r=i}this.dirty=ti}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ti:hk;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class KM extends kd{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==zn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class SB extends kd{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ki extends kd{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=No.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ki(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&Vr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Vr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=zn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=zn}}slice(e,n,r){let o=ki.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=jy(s,n,i,r)),e>0&&(s=jy(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class gs extends kd{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),d=c&&c.dom,u=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=No.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!u&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=XM(d,r,n),c?l=new TB(e,n,r,o,d,u||null,h,c,s,i+1):n.isText?new cp(e,n,r,o,d,h,s):new gs(e,n,r,o,d,u||null,h,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_.empty)}return e}matchesNode(e,n,r){return this.dirty==zn&&e.eq(this.node)&&Th(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new MB(this,i&&i.node,e);_B(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&l.syncToMarks(d==this.node.childCount?Ne.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,o)},(c,d,u,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,d,u,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,u,f,e)||l.updateNextNode(c,d,u,e,h,o)||l.addNode(c,d,u,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ti)&&(i&&this.protectLocalComposition(e,i),JM(this.contentDOM,this.children,e),_a&&IB(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof U)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=NB(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new SB(this,s,n,o);e.input.compositionNodes.push(i),this.children=jy(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==Vr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=zn}updateOuterDeco(e){if(Th(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=YM(this.dom,this.nodeDOM,Ly(this.outerDeco,this.node,n),Ly(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function fk(t,e,n,r,o){XM(r,e,t);let s=new gs(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class cp extends gs{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Vr||this.dirty!=zn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=zn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=zn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new cp(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Vr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ZM extends kd{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==zn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class TB extends gs{constructor(e,n,r,o,s,i,a,l,c,d){super(e,n,r,o,s,i,a,c,d),this.spec=l}update(e,n,r,o){if(this.dirty==Vr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function JM(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=pk(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof ki){let l=r?r.previousSibling:t.lastChild;JM(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=pk(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const Jl=function(t){t&&(this.nodeName=t)};Jl.prototype=Object.create(null);const ni=[new Jl];function Ly(t,e,n){if(t.length==0)return ni;let r=n?ni[0]:new Jl,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new Jl(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new Jl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function YM(t,e,n,r){if(n==ni&&r==ni)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=ni[0]),o=l}EB(o,a||ni[0],i)}return o}function EB(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function XM(t,e,n){return YM(t,t,ni,Ly(e,n,t.nodeType!=1))}function Th(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function pk(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class MB{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=AB(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=zn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ki.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==Vr&&i.dom==i.contentDOM&&(i.dirty=ti),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof gs){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,u,h=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Vr&&Th(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(u=this.recreateWrapper(l,e,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=ti,u.updateChildren(o,i+1),u.dirty=zn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Th(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=gs.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=gs.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new KM(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ki;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof cp)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qt||Dt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new ZM(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function AB(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ki)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function RB(t,e){return t.type.side-e.type.side}function _B(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,o,e.forChild(s,d),c),s+=d.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let d,u;for(;i<o.length&&o[i].to==s;){let b=o[i++];b.widget&&(d?(u||(u=[d])).push(b):d=b)}if(d)if(u){u.sort(RB);for(let b=0;b<u.length;b++)n(u[b],c,!!l)}else n(d,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let p=s+h.nodeSize;if(h.isText){let b=p;i<o.length&&o[i].from<b&&(b=o[i].from);for(let v=0;v<a.length;v++)a[v].to<b&&(b=a[v].to);b<p&&(l=h.cut(b-s),h=h.cut(0,b-s),p=b,f=-1)}else for(;i<o.length&&o[i].to<p;)i++;let g=h.isInline&&!h.isLeaf?a.filter(b=>!b.inline):a.slice();r(h,g,e.forChild(s,h),f),s=p}}function IB(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function NB(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function jy(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,d=a+=l.size;c>=n||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),d>n&&s.push(l.slice(n-c,l.size,r)))}return s}function j0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(lp(n)){for(l=i;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&q.isSelectable(u)&&o.parent&&!(u.isInline&&oB(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new q(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let u=i,h=i;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);u=Math.min(u,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[l,i]=h==t.state.selection.anchor?[h,u]:[u,h],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=B0(t,d,a,u)}return c}function QM(t){return t.editable?t.hasFocus():tA(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Co(t,e=!1){let n=t.state.selection;if(eA(t,n),!!QM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Dt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&xi(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)PB(t);else{let{anchor:r,head:o}=n,s,i;mk&&!(n instanceof U)&&(n.$from.parent.inlineContent||(s=gk(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=gk(t,n.to))),t.docView.setSelection(r,o,t,e),mk&&(s&&yk(s),i&&yk(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&DB(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const mk=qt||Dt&&HM<63;function gk(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(qt&&o&&o.contentEditable=="false")return Fm(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return Fm(o);if(s)return Fm(s)}}function Fm(t){return t.contentEditable="true",qt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function yk(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function DB(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!QM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function PB(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,xt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&dn&&ms<=11&&(r.disabled=!0,r.disabled=!1)}function eA(t,e){if(e instanceof q){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(bk(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else bk(t)}function bk(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function B0(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||U.between(e,n,r)}function vk(t){return t.editable&&!t.hasFocus()?!1:tA(t)}function tA(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function OB(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return xi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function By(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&ee.findFrom(s,e)}function Yo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function wk(t,e,n){let r=t.state.selection;if(r instanceof U)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return Yo(t,new U(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=By(t.state,e);return o&&o instanceof q?Yo(t,o):!1}else if(!(Ln&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?q.isSelectable(s)?Yo(t,new q(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):xd?Yo(t,new U(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof q&&r.node.isInline)return Yo(t,new U(e>0?r.$to:r.$from));{let o=By(t.state,e);return o?Yo(t,o):!1}}}function Eh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Yl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ki(t,e){return e<0?LB(t):jB(t)}function LB(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(dr&&n.nodeType==1&&r<Eh(n)&&Yl(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Yl(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(nA(n))break;{let a=n.previousSibling;for(;a&&Yl(a,-1);)o=n.parentNode,s=xt(a),a=a.previousSibling;if(a)n=a,r=Eh(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?Vy(t,n,r):o&&Vy(t,o,s)}function jB(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Eh(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Yl(a,1))s=n,i=++r;else break}else{if(nA(n))break;{let a=n.nextSibling;for(;a&&Yl(a,1);)s=a.parentNode,i=xt(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Eh(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&Vy(t,s,i)}function nA(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function BB(t,e){for(;t&&e==t.childNodes.length&&!wd(t);)e=xt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function VB(t,e){for(;t&&!e&&!wd(t);)e=xt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Vy(t,e,n){if(e.nodeType!=3){let s,i;(i=BB(e,n))?(e=i,n=0):(s=VB(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(lp(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Co(t)},50)}function xk(t,e){let n=t.state.doc.resolve(e);if(!(Dt||aB)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function kk(t,e,n){let r=t.state.selection;if(r instanceof U&&!r.empty||n.indexOf("s")>-1||Ln&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=By(t.state,e);if(i&&i instanceof q)return Yo(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof cn?ee.near(i,e):ee.findFrom(i,e);return a?Yo(t,a):!1}return!1}function Ck(t,e){if(!(t.state.selection instanceof U))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function Sk(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function $B(t){if(!qt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Sk(t,r,"true"),setTimeout(()=>Sk(t,r,"false"),20)}return!1}function HB(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function FB(t,e){let n=e.keyCode,r=HB(e);if(n==8||Ln&&n==72&&r=="c")return Ck(t,-1)||Ki(t,-1);if(n==46&&!e.shiftKey||Ln&&n==68&&r=="c")return Ck(t,1)||Ki(t,1);if(n==13||n==27)return!0;if(n==37||Ln&&n==66&&r=="c"){let o=n==37?xk(t,t.state.selection.from)=="ltr"?-1:1:-1;return wk(t,o,r)||Ki(t,o)}else if(n==39||Ln&&n==70&&r=="c"){let o=n==39?xk(t,t.state.selection.from)=="ltr"?1:-1:1;return wk(t,o,r)||Ki(t,o)}else{if(n==38||Ln&&n==80&&r=="c")return kk(t,-1,r)||Ki(t,-1);if(n==40||Ln&&n==78&&r=="c")return $B(t)||kk(t,1,r)||Ki(t,1);if(r==(Ln?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function V0(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let i=t.someProp("clipboardSerializer")||No.fromSchema(t.state.schema),a=lA(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=aA[c.nodeName.toLowerCase()]);){for(let f=d.length-1;f>=0;f--){let p=a.createElement(d[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${u?` -${u}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function rA(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new j(_.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):j.empty;let u=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(u)a=u;else{let h=o.marks(),{schema:f}=t.state,p=No.fromSchema(f);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=i.appendChild(document.createElement("p"));g&&b.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",u=>{n=u(n,t)}),i=GB(n),xd&&qB(i);let c=i&&i.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||xo.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||d),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!zB.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)a=KB(Tk(a,+d[1],+d[2]),d[4]);else if(a=j.maxOpen(UB(a.content,o),!0),a.openStart||a.openEnd){let u=0,h=0;for(let f=a.content.firstChild;u<a.openStart&&!f.type.spec.isolating;u++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=Tk(a,u,h)}return t.someProp("transformPasted",u=>{a=u(a,t)}),a}const zB=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function UB(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&sA(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=iA(i[i.length-1],s.length));let d=oA(a,l);i.push(d),o=o.matchType(d.type),s=l}}),i)return _.from(i)}return t}function oA(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,_.from(t));return t}function sA(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=sA(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(_.from(oA(n,t,o+1))))}}function iA(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,iA(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(_.empty,!0);return t.copy(n.append(r))}function $y(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=$y(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(_.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function Tk(t,e,n){return e<t.openStart&&(t=new j($y(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new j($y(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const aA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ek=null;function lA(){return Ek||(Ek=document.implementation.createHTMLDocument("title"))}let zm=null;function WB(t){let e=window.trustedTypes;return e?(zm||(zm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),zm.createHTML(t)):t}function GB(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=lA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&aA[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=WB(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function qB(t){let e=t.querySelectorAll(Dt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent=="Â "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function KB(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=_.from(l.create(r[a+1],o)),s++,i++}return new j(o,s,i)}const Kt={},Zt={},ZB={touchstart:!0,touchmove:!0};class JB{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function YB(t){for(let e in Kt){let n=Kt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{QB(t,r)&&!$0(t,r)&&(t.editable||!(r.type in Zt))&&n(t,r)},ZB[e]?{passive:!0}:void 0)}qt&&t.dom.addEventListener("input",()=>null),Hy(t)}function ds(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function XB(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Hy(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>$0(t,r))})}function $0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function QB(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function e7(t,e){!$0(t,e)&&Kt[e.type]&&(t.editable||!(e.type in Zt))&&Kt[e.type](t,e)}Zt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!dA(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(go&&Dt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),_a&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Zs(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||FB(t,n)?n.preventDefault():ds(t,"key")};Zt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Zt.keypress=(t,e)=>{let n=e;if(dA(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ln&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof U)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function dp(t){return{left:t.clientX,top:t.clientY}}function t7(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function H0(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function ga(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function n7(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&q.isSelectable(r)?(ga(t,new q(n)),!0):!1}function r7(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof q&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(q.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(ga(t,q.create(t.state.doc,o)),!0):!1}function o7(t,e,n,r,o){return H0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?r7(t,n):n7(t,n))}function s7(t,e,n,r){return H0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function i7(t,e,n,r){return H0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||a7(t,n,r)}function a7(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ga(t,U.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)ga(t,U.create(r,a+1,a+1+i.content.size));else if(q.isSelectable(i))ga(t,q.create(r,a));else continue;return!0}}function F0(t){return Mh(t)}const cA=Ln?"metaKey":"ctrlKey";Kt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=F0(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&t7(n,t.input.lastClick)&&!n[cA]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s,button:n.button};let i=t.posAtCoords(dp(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new l7(t,i,n,!!r)):(s=="doubleClick"?s7:i7)(t,i.pos,i.inside,n)?n.preventDefault():ds(t,"pointer"))};class l7{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[cA],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,i=d.depth?d.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof q&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&dr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ds(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Co(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(dp(e))),this.updateAllowDefault(e),this.allowDefault||!n?ds(this.view,"pointer"):o7(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||qt&&this.mightDrag&&!this.mightDrag.node.isAtom||Dt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ga(this.view,ee.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ds(this.view,"pointer")}move(e){this.updateAllowDefault(e),ds(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Kt.touchstart=t=>{t.input.lastTouch=Date.now(),F0(t),ds(t,"pointer")};Kt.touchmove=t=>{t.input.lastTouch=Date.now(),ds(t,"pointer")};Kt.contextmenu=t=>F0(t);function dA(t,e){return t.composing?!0:qt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const c7=go?5e3:-1;Zt.compositionstart=Zt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof U&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Mh(t,!0),t.markCursor=null;else if(Mh(t,!e.selection.empty),dr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}uA(t,c7)};Zt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,uA(t,20))};function uA(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Mh(t),e))}function hA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=u7());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function d7(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=nB(e.focusNode,e.focusOffset),r=rB(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function u7(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Mh(t,e=!1){if(!(go&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),hA(t),e||t.docView&&t.docView.dirty){let n=j0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function h7(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ec=dn&&ms<15||_a&&lB<604;Kt.copy=Zt.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=Ec?null:n.clipboardData,i=r.content(),{dom:a,text:l}=V0(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):h7(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function f7(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function p7(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Mc(t,r.value,null,o,e):Mc(t,r.textContent,r.innerHTML,o,e)},50)}function Mc(t,e,n,r,o){let s=rA(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||j.empty)))return!0;if(!s)return!1;let i=f7(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function fA(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Zt.paste=(t,e)=>{let n=e;if(t.composing&&!go)return;let r=Ec?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Mc(t,fA(r),r.getData("text/html"),o,n)?n.preventDefault():p7(t,n)};class pA{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const m7=Ln?"altKey":"ctrlKey";function mA(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[m7]}Kt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(dp(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof q?o.to-1:o.to))){if(r&&r.mightDrag)i=q.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(i=q.create(t.state.doc,u.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:d}=V0(t,a);(!n.dataTransfer.files.length||!Dt||HM>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ec?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ec||n.dataTransfer.setData("text/plain",c),t.dragging=new pA(d,mA(t,n),i)};Kt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Zt.dragover=Zt.dragenter=(t,e)=>e.preventDefault();Zt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(dp(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t)}):i=rA(t,fA(n.dataTransfer),Ec?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&mA(t,n));if(t.someProp("handleDrop",p=>p(t,n,i||j.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?NM(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(u?c.replaceRangeWith(d,d,i.content.firstChild):c.replaceRange(d,d,i),c.doc.eq(h))return;let f=c.doc.resolve(d);if(u&&q.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new q(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,b,v,x)=>p=x),c.setSelection(B0(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Kt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Co(t)},20))};Kt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Kt.beforeinput=(t,e)=>{if(Dt&&go&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Zs(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Zt)Kt[t]=Zt[t];function Ac(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ah{constructor(e,n){this.toDOM=e,this.spec=n||di,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new Ae(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ah&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ac(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ys{constructor(e,n){this.attrs=e,this.spec=n||di}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new Ae(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ys&&Ac(this.attrs,e.attrs)&&Ac(this.spec,e.spec)}static is(e){return e.type instanceof ys}destroy(){}}class z0{constructor(e,n){this.attrs=e,this.spec=n||di}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new Ae(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof z0&&Ac(this.attrs,e.attrs)&&Ac(this.spec,e.spec)}destroy(){}}class Ae{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Ae(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Ae(e,e,new Ah(n,r))}static inline(e,n,r,o){return new Ae(e,n,new ys(r,o))}static node(e,n,r,o){return new Ae(e,n,new z0(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof ys}get widget(){return this.type instanceof Ah}}const oa=[],di={};class be{constructor(e,n){this.local=e.length?e:oa,this.children=n.length?n:oa}static create(e,n){return n.length?Rh(n,e,0,di):It}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==It||e.maps.length==0?this:this.mapInner(e,n,0,0,r||di)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?g7(this.children,i||[],e,n,r,o,s):i?new be(i.sort(ui),oa):It}add(e,n){return n.length?this==It?be.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,d;if(d=yA(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,d,c+1):o.splice(s,0,l,l+a.nodeSize,Rh(d,a,c+1,di)),s+=3}});let i=gA(s?bA(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new be(i.length?this.local.concat(i).sort(ui):this.local,o||this.children)}remove(e){return e.length==0||this==It?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>a&&u.to<l&&(e[d]=null,(i||(i=[])).push(u));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=It?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new be(o,r):It}forChild(e,n){if(this==It)return this;if(n.isLeaf)return be.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof ys){let c=Math.max(s,l.from)-s,d=Math.min(i,l.to)-s;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){let a=new be(o.sort(ui),oa);return r?new ns([a,r]):a}return r||It}eq(e){if(this==e)return!0;if(!(e instanceof be)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return U0(this.localsInner(e))}localsInner(e){if(this==It)return oa;if(e.inlineContent||!this.local.some(ys.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ys||n.push(this.local[r]);return n}forEachSet(e){e(this)}}be.empty=new be([],[]);be.removeOverlap=U0;const It=be.empty;class ns{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,di));return ns.from(r)}forChild(e,n){if(n.isLeaf)return be.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=It&&(s instanceof ns?r=r.concat(s.members):r.push(s))}return ns.from(r)}eq(e){if(!(e instanceof ns)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?U0(r?n:n.sort(ui)):oa}static from(e){switch(e.length){case 0:return It;case 1:return e[0];default:return new ns(e.every(n=>n instanceof be)?e:e.reduce((n,r)=>n.concat(r instanceof be?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function g7(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,d=s;c<n.maps.length;c++){let u=0;n.maps[c].forEach((h,f,p,g)=>{let b=g-p-(f-h);for(let v=0;v<a.length;v+=3){let x=a[v+1];if(x<0||h>x+d-u)continue;let w=a[v]+d-u;f>=w?a[v+1]=h<=w?-2:-1:h>=d&&b&&(a[v]+=b,a[v+1]+=b)}u+=b}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+s),u=d-o;if(u<0||u>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),f=h-o,{index:p,offset:g}=r.content.findIndex(u),b=r.maybeChild(p);if(b&&g==u&&g+b.nodeSize==f){let v=a[c+2].mapInner(n,b,d+1,t[c]+s+1,i);v!=It?(a[c]=u,a[c+1]=f,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=y7(a,t,e,n,o,s,i),d=Rh(c,r,0,i);e=d.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,h=0;u<d.children.length;u+=3){let f=d.children[u];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,d.children[u],d.children[u+1],d.children[u+2])}}return new be(e.sort(ui),a)}function gA(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Ae(o.from+e,o.to+e,o.type))}return n}function y7(t,e,n,r,o,s,i){function a(l,c){for(let d=0;d<l.local.length;d++){let u=l.local[d].map(r,o,c);u?n.push(u):i.onRemove&&i.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function yA(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function bA(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Rh(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=yA(t,a,l+n);if(c){s=!0;let d=Rh(c,a,n+l+1,r);d!=It&&o.push(l,l+a.nodeSize,d)}});let i=gA(s?bA(t):t,-n).sort(ui);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new be(i,o):It}function ui(t,e){return t.from-e.from||t.to-e.to}function U0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),Mk(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Mk(e,o,r.copy(s.from,r.to)));break}}}return e}function Mk(t,e,n){for(;e<t.length&&ui(n,t[e])>0;)e++;t.splice(e,0,n)}function Um(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=It&&e.push(r)}),t.cursorWrapper&&e.push(be.create(t.state.doc,[t.cursorWrapper.deco])),ns.from(e)}const b7={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},v7=dn&&ms<=11;class w7{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class x7{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new w7,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);dn&&ms<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),v7&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,b7)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(vk(this.view)){if(this.suppressingSelectionUpdates)return Co(this.view);if(dn&&ms<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&xi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Ra(s))n.add(s);for(let s=e.anchorNode;s;s=Ra(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&vk(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let u=this.registerMutation(n[d],l);u&&(s=s<0?u.from:Math.min(u.from,s),i=i<0?u.to:Math.max(u.to,i),u.typeOver&&(a=!0))}if(dr&&l.length){let d=l.filter(u=>u.nodeName=="BR");if(d.length==2){let[u,h]=d;u.parentNode&&u.parentNode.parentNode==h.parentNode?h.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let h of d){let f=h.parentNode;f&&f.nodeName=="LI"&&(!u||S7(e,u)!=f)&&h.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&lp(r)&&(c=j0(e))&&c.eq(ee.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Co(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),k7(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Co(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let u=e.addedNodes[d];n.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(dn&&ms<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:h}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let i=o&&o.parentNode==e.target?xt(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?xt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Ak=new WeakMap,Rk=!1;function k7(t){if(!Ak.has(t)&&(Ak.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=dr,Rk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Rk=!0}}function _k(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return xi(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function C7(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return _k(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?_k(t,n):null}function S7(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function T7(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],lp(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Dt&&t.input.lastKeyCode===8)for(let b=s;b>o;b--){let v=r.childNodes[b-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){s=b;break}if(!x||x.size)break}let u=t.state.doc,h=t.someProp("domParser")||xo.fromSchema(t.state.schema),f=u.resolve(i),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:o,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:E7,context:f});if(c&&c[0].pos!=null){let b=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=b),p={anchor:b+i,head:v+i}}return{doc:g,sel:p,from:i,to:a}}function E7(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(qt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||qt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const M7=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function A7(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let M=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,R=j0(t,M);if(R&&!t.state.selection.eq(R)){if(Dt&&go&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",L=>L(t,Zs(13,"Enter"))))return;let I=t.state.tr.setSelection(R);M=="pointer"?I.setMeta("pointer",!0):M=="key"&&I.scrollIntoView(),s&&I.setMeta("composition",s),t.dispatch(I)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=T7(t,e,n),d=t.state.doc,u=d.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=I7(u.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(_a&&t.input.lastIOSEnter>Date.now()-225||go)&&o.some(M=>M.nodeType==1&&!M7.test(M.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",M=>M(t,Zs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof U&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let M=Ik(t,t.state.doc,c.sel);if(M&&!M.eq(t.state.selection)){let R=t.state.tr.setSelection(M);s&&R.setMeta("composition",s),t.dispatch(R)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof U&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),dn&&ms<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" Â "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),b=c.doc.resolveNoCache(p.endB-c.from),v=d.resolve(p.start),x=g.sameParent(b)&&g.parent.inlineContent&&v.end()>=p.endA,w;if((_a&&t.input.lastIOSEnter>Date.now()-225&&(!x||o.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(b)||!g.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(g.pos,b.pos,"",""))&&(w=ee.findFrom(c.doc.resolve(g.pos+1),1,!0))&&w.head>g.pos)&&t.someProp("handleKeyDown",M=>M(t,Zs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&_7(d,p.start,p.endA,g,b)&&t.someProp("handleKeyDown",M=>M(t,Zs(8,"Backspace")))){go&&Dt&&t.domObserver.suppressSelectionUpdates();return}Dt&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),go&&!x&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,b=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(M){return M(t,Zs(13,"Enter"))})},20));let k=p.start,C=p.endA,S,T,E;if(x){if(g.pos==b.pos)dn&&ms<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Co(t),20)),S=t.state.tr.delete(k,C),T=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(E=R7(g.parent.content.cut(g.parentOffset,b.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start()))))S=t.state.tr,E.type=="add"?S.addMark(k,C,E.mark):S.removeMark(k,C,E.mark);else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let M=g.parent.textBetween(g.parentOffset,b.parentOffset);if(t.someProp("handleTextInput",R=>R(t,k,C,M)))return;S=t.state.tr.insertText(M,k,C)}}if(S||(S=t.state.tr.replace(k,C,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let M=Ik(t,S.doc,c.sel);M&&!(Dt&&t.composing&&M.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==k||M.head==S.mapping.map(C)-1)||dn&&M.empty&&M.head==k)&&S.setSelection(M)}T&&S.ensureMarks(T),s&&S.setMeta("composition",s),t.dispatch(S.scrollIntoView())}function Ik(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:B0(t,e.resolve(n.anchor),e.resolve(n.head))}function R7(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=d=>d.mark(a.addToSet(d.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(_.from(c).eq(t))return{mark:a,type:i}}function _7(t,e,n,r,o){if(n-e<=o.pos-r.pos||Wm(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(Wm(s,!0,!0));return!i.parent.isTextblock||i.pos>n||Wm(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function Wm(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function I7(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<e.size&&Nk(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&Nk(t.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function Nk(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class vA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new JB,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(jk),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ok(this),Pk(this),this.nodeViews=Lk(this),this.docView=fk(this.state.doc,Dk(this),Um(this),this.dom,this),this.domObserver=new x7(this,(r,o,s,i)=>A7(this,r,o,s,i)),this.domObserver.start(),YB(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Hy(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(jk),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(hA(this),i=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=Lk(this);D7(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Hy(this),this.editable=Ok(this),Pk(this);let l=Um(this),c=Dk(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(o.selection))&&(i=!0);let h=d=="preserve"&&i&&this.dom.style.overflowAnchor==null&&uB(this);if(i){this.domObserver.stop();let f=u&&(dn||Dt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&N7(o.selection,e.selection);if(u){let p=Dt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=d7(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=fk(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&OB(this))?Co(this,f):(eA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&hB(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof q){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&ak(this,n.getBoundingClientRect(),e)}else ak(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new pA(e.slice,e.move,o<0?void 0:q.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(dn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&fB(this.dom),Co(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return bB(this,e)}coordsAtPos(e,n=1){return GM(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return CB(this,n||this.state,e)}pasteHTML(e,n){return Mc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Mc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return V0(this,e)}destroy(){this.docView&&(XB(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Um(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,eB())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return e7(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?qt&&this.root.nodeType===11&&sB(this.dom.ownerDocument)==this.dom&&C7(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Dk(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Ae.node(0,t.state.doc.content.size,e)]}function Pk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ae.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ok(t){return!t.someProp("editable",e=>e(t.state)===!1)}function N7(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Lk(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function D7(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function jk(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const P7=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),O7=typeof navigator<"u"&&/Win/.test(navigator.platform);function L7(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))P7?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function j7(t){let e=Object.create(null);for(let n in t)e[L7(n)]=t[n];return e}function Gm(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function B7(t){return new me({props:{handleKeyDown:W0(t)}})}function W0(t){let e=j7(t);return function(n,r){let o=O3(r),s,i=e[Gm(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[Gm(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(O7&&r.ctrlKey&&r.altKey)&&(s=L3[r.keyCode])&&s!=o){let a=e[Gm(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const G0=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function wA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const xA=(t,e,n)=>{let r=wA(t,n);if(!r)return!1;let o=q0(r);if(!o){let i=r.blockRange(),a=i&&Wa(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(_A(t,o,e,-1))return!0;if(r.parent.content.size==0&&(Ia(s,"end")||q.isSelectable(s)))for(let i=r.depth;;i--){let a=ip(t.doc,r.before(i),r.after(i),j.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ia(s,"end")?ee.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):q.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},V7=(t,e,n)=>{let r=wA(t,n);if(!r)return!1;let o=q0(r);return o?kA(t,o,e):!1},$7=(t,e,n)=>{let r=SA(t,n);if(!r)return!1;let o=K0(r);return o?kA(t,o,e):!1};function kA(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=ip(t.doc,s,l,j.empty);if(!c||c.from!=s||c instanceof rt&&c.slice.size>=l-s)return!1;if(n){let d=t.tr.step(c);d.setSelection(U.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Ia(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const CA=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=q0(r)}let i=s&&s.nodeBefore;return!i||!q.isSelectable(i)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function q0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function SA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const TA=(t,e,n)=>{let r=SA(t,n);if(!r)return!1;let o=K0(r);if(!o)return!1;let s=o.nodeAfter;if(_A(t,o,e,1))return!0;if(r.parent.content.size==0&&(Ia(s,"start")||q.isSelectable(s))){let i=ip(t.doc,r.before(),r.after(),j.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(Ia(s,"start")?ee.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):q.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},EA=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=K0(r)}let i=s&&s.nodeAfter;return!i||!q.isSelectable(i)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,s.pos)).scrollIntoView()),!0)};function K0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const H7=(t,e)=>{let n=t.selection,r=n instanceof q,o;if(r){if(n.node.isTextblock||!Li(t.doc,n.from))return!1;o=n.from}else if(o=sp(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(q.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},F7=(t,e)=>{let n=t.selection,r;if(n instanceof q){if(n.node.isTextblock||!Li(t.doc,n.to))return!1;r=n.to}else if(r=sp(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},z7=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&Wa(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},MA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Z0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const U7=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=Z0(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(ee.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},AA=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof cn||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=Z0(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(U.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},RA=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(ko(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Wa(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function W7(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof q&&e.selection.node.isBlock)return!r.parentOffset||!ko(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],i,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=Z0(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(l&&a?{type:a}:null),i=f;break}else{if(f==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof U||e.selection instanceof cn)&&d.deleteSelection();let u=d.mapping.map(r.pos),h=ko(d.doc,u,s.length,s);if(h||(s[0]=a?{type:a}:null,h=ko(d.doc,u,s.length,s)),!h)return!1;if(d.split(u,s.length,s),!l&&c&&r.node(i).type!=a){let f=d.mapping.map(r.before(i)),p=d.doc.resolve(f);a&&r.node(i-1).canReplaceWith(p.index(),p.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(i)),a)}return n&&n(d.scrollIntoView()),!0}}const G7=W7(),q7=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(q.create(t.doc,o))),!0)};function K7(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||Li(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function _A(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&K7(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=_.empty;for(let v=i.length-1;v>=0;v--)p=_.from(i[v].create(null,p));p=_.from(o.copy(p));let g=t.tr.step(new nt(e.pos-1,f,e.pos,f,new j(p,1,0),i.length,!0)),b=g.doc.resolve(f+2*i.length);b.nodeAfter&&b.nodeAfter.type==o.type&&Li(g.doc,b.pos)&&g.join(b.pos),n(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&l?null:ee.findFrom(e,1),u=d&&d.$from.blockRange(d.$to),h=u&&Wa(u);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(u,h).scrollIntoView()),!0;if(c&&Ia(s,"start",!0)&&Ia(o,"end")){let f=o,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,b=1;for(;!g.isTextblock;g=g.firstChild)b++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let v=_.empty;for(let w=p.length-1;w>=0;w--)v=_.from(p[w].copy(v));let x=t.tr.step(new nt(e.pos-p.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new j(v,p.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function IA(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(U.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const Z7=IA(-1),J7=IA(1);function Y7(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&AM(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function Bk(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let d=n.doc.resolve(c),u=d.index();o=d.parent.canReplaceWith(u,u+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function J0(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}J0(G0,xA,CA);J0(G0,TA,EA);J0(MA,AA,RA,G7);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function X7(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return Q7(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function Q7(t,e,n,r=null){let o=!1,s=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);s=new Ch(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Ch(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=AM(s,n,r,e);return a?(t&&e8(t,e,a,o,n),!0):!1}function e8(t,e,n,r,o){let s=_.empty;for(let d=n.length-1;d>=0;d--)s=_.from(n[d].type.create(n[d].attrs,s));t.step(new nt(e.start-(r?2:0),e.end,e.start,e.end,new j(s,0,0),n.length,!0));let i=0;for(let d=0;d<n.length;d++)n[d].type==o&&(i=d+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,h=!0;d<u;d++,h=!1)!h&&ko(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function t8(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?n8(e,n,t,s):r8(e,n,s):!0:!1}}function n8(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new nt(s-1,i,s,i,new j(_.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ch(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Wa(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(s,-1)-1);return Li(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function r8(t,e,n){let r=t.tr,o=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=o.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,i.content.append(l?_.empty:_.from(o))))return!1;let u=s.pos,h=u+i.nodeSize;return r.step(new nt(u-(a?1:0),h+(l?1:0),u+1,h-1,new j((a?_.empty:_.from(o.copy(_.empty))).append(l?_.empty:_.from(o.copy(_.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function o8(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=_.from(c?t.create():null),u=new j(_.from(t.create(null,_.from(a.type.create(null,d)))),c?3:1,0),h=s.start,f=s.end;n(e.tr.step(new nt(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}function up(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class hp{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...d)=>{const u=l(...d)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),u={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...g)=>{const b=this.buildProps(c,n),v=f(...g)(b);return a.push(v),u}])),run:d};return u}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a={tr:e,editor:o,view:i,state:up({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}}class s8{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function W(t,e,n){return t.config[e]===void 0&&t.parent?W(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?W(t.parent,e,n):null}):t.config[e]}function fp(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function NA(t){const e=[],{nodeExtensions:n,markExtensions:r}=fp(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=W(i,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([h,f])=>{e.push({type:u,name:h,attribute:{...s,...f}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=W(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const h={...s,...u};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:d,attribute:h})})}),e}function ft(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function kn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),a.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=s}),r},{})}function _h(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>kn(n,r),{})}function DA(t){return typeof t=="function"}function ye(t,e=void 0,...n){return DA(t)?e?t.bind(e)(...n):t(...n):t}function i8(t={}){return Object.keys(t).length===0&&t.constructor===Object}function a8(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Vk(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):a8(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function $k(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&i8(n)?!1:n!=null))}function PA(t,e){var n;const r=NA(t),{nodeExtensions:o,markExtensions:s}=fp(t),i=(n=o.find(c=>W(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const d=r.filter(v=>v.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,x)=>{const w=W(x,"extendNodeSchema",u);return{...v,...w?w(c):{}}},{}),f=$k({...h,content:ye(W(c,"content",u)),marks:ye(W(c,"marks",u)),group:ye(W(c,"group",u)),inline:ye(W(c,"inline",u)),atom:ye(W(c,"atom",u)),selectable:ye(W(c,"selectable",u)),draggable:ye(W(c,"draggable",u)),code:ye(W(c,"code",u)),whitespace:ye(W(c,"whitespace",u)),linebreakReplacement:ye(W(c,"linebreakReplacement",u)),defining:ye(W(c,"defining",u)),isolating:ye(W(c,"isolating",u)),attrs:Object.fromEntries(d.map(v=>{var x;return[v.name,{default:(x=v==null?void 0:v.attribute)===null||x===void 0?void 0:x.default}]}))}),p=ye(W(c,"parseHTML",u));p&&(f.parseDOM=p.map(v=>Vk(v,d)));const g=W(c,"renderHTML",u);g&&(f.toDOM=v=>g({node:v,HTMLAttributes:_h(v,d)}));const b=W(c,"renderText",u);return b&&(f.toText=b),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const d=r.filter(b=>b.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,v)=>{const x=W(v,"extendMarkSchema",u);return{...b,...x?x(c):{}}},{}),f=$k({...h,inclusive:ye(W(c,"inclusive",u)),excludes:ye(W(c,"excludes",u)),group:ye(W(c,"group",u)),spanning:ye(W(c,"spanning",u)),code:ye(W(c,"code",u)),attrs:Object.fromEntries(d.map(b=>{var v;return[b.name,{default:(v=b==null?void 0:b.attribute)===null||v===void 0?void 0:v.default}]}))}),p=ye(W(c,"parseHTML",u));p&&(f.parseDOM=p.map(b=>Vk(b,d)));const g=W(c,"renderHTML",u);return g&&(f.toDOM=b=>g({mark:b,HTMLAttributes:_h(b,d)})),[c.name,f]}));return new wM({topNode:i,nodes:a,marks:l})}function qm(t,e){return e.nodes[t]||e.marks[t]||null}function Hk(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Y0(t,e){const n=No.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const l8=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const d=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-s))}),n};function X0(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class ws{constructor(e){this.find=e.find,this.handler=e.handler}}const c8=(t,e)=>{if(X0(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function uu(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let d=!1;const u=l8(c)+s;return i.forEach(h=>{if(d)return;const f=c8(u,h.find);if(!f)return;const p=l.state.tr,g=up({state:l.state,transaction:p}),b={from:r-(f[0].length-s.length),to:o},{commands:v,chain:x,can:w}=new hp({editor:n,state:g});h.handler({state:g,range:b,match:f,commands:v,chain:x,can:w})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:o,text:s}),l.dispatch(p),d=!0)}),d}function d8(t){const{editor:e,rules:n}=t,r=new me({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=Y0(_.from(d),i.schema);const{from:u}=l,h=u+d.length;uu({editor:e,from:u,to:h,text:d,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return uu({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&uu({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?uu({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function u8(t){return Object.prototype.toString.call(t).slice(8,-1)}function hu(t){return u8(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function pp(t,e){const n={...t};return hu(t)&&hu(e)&&Object.keys(e).forEach(r=>{hu(e[r])&&hu(t[r])?n[r]=pp(t[r],e[r]):n[r]=e[r]}),n}class Et{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Et(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>pp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Et(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function h8(t){return typeof t=="number"}class f8{constructor(e){this.find=e.find,this.handler=e.handler}}const p8=(t,e,n)=>{if(X0(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function m8(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:d}=new hp({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,o,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const g=Math.max(r,p),b=Math.min(o,p+f.content.size),v=f.textBetween(g-p,b-p,void 0,"ï¿¼");p8(v,s.find,i).forEach(w=>{if(w.index===void 0)return;const k=g+w.index+1,C=k+w[0].length,S={from:n.tr.mapping.map(k),to:n.tr.mapping.map(C)},T=s.handler({state:n,range:S,match:w,commands:l,chain:c,can:d,pasteEvent:i,dropEvent:a});u.push(T)})}),u.every(f=>f!==null)}let fu=null;const g8=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function y8(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:u,to:h,rule:f,pasteEvt:p})=>{const g=d.tr,b=up({state:d,transaction:g});if(!(!m8({editor:e,state:b,from:Math.max(u-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new me({view(u){const h=p=>{var g;r=!((g=u.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?u.dom.parentElement:null,r&&(fu=e)},f=()=>{fu&&(fu=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(u,h)=>{if(s=r===u.dom.parentElement,a=h,!s){const f=fu;f&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(u,h)=>{var f;const p=(f=h.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return i=h,o=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(u,h,f)=>{const p=u[0],g=p.getMeta("uiEvent")==="paste"&&!o,b=p.getMeta("uiEvent")==="drop"&&!s,v=p.getMeta("applyPasteRules"),x=!!v;if(!g&&!b&&!x)return;if(x){let{text:C}=v;typeof C=="string"?C=C:C=Y0(_.from(C),f.schema);const{from:S}=v,T=S+C.length,E=g8(C);return l({rule:d,state:f,from:S,to:{b:T},pasteEvt:E})}const w=h.doc.content.findDiffStart(f.doc.content),k=h.doc.content.findDiffEnd(f.doc.content);if(!(!h8(w)||!k||w===k.b))return l({rule:d,state:f,from:w,to:k,pasteEvt:i})}}))}function b8(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class ri{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=ri.resolve(e),this.schema=PA(this.extensions,n),this.setupExtensions()}static resolve(e){const n=ri.sort(ri.flatten(e)),r=b8(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=W(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=W(r,"priority")||100,i=W(o,"priority")||100;return s>i?-1:s<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:qm(n.name,this.schema)},o=W(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=ri.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:qm(i.name,this.schema)},l=[],c=W(i,"addKeyboardShortcuts",a);let d={};if(i.type==="mark"&&W(i,"exitable",a)&&(d.ArrowRight=()=>Et.handleExit({editor:e,mark:i})),c){const g=Object.fromEntries(Object.entries(c()).map(([b,v])=>[b,()=>v({editor:e})]));d={...d,...g}}const u=B7(d);l.push(u);const h=W(i,"addInputRules",a);Hk(i,e.options.enableInputRules)&&h&&r.push(...h());const f=W(i,"addPasteRules",a);Hk(i,e.options.enablePasteRules)&&f&&o.push(...f());const p=W(i,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[d8({editor:e,rules:r}),...y8({editor:e,rules:o}),...s]}get attributes(){return NA(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=fp(this.extensions);return Object.fromEntries(n.filter(r=>!!W(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:ft(r.name,this.schema)},i=W(r,"addNodeView",s);if(!i)return[];const a=(l,c,d,u,h)=>{const f=_h(l,o);return i()({node:l,view:c,getPos:d,decorations:u,innerDecorations:h,editor:e,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:qm(e.name,this.schema)};e.type==="mark"&&(!((n=ye(W(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=W(e,"onBeforeCreate",r),s=W(e,"onCreate",r),i=W(e,"onUpdate",r),a=W(e,"onSelectionUpdate",r),l=W(e,"onTransaction",r),c=W(e,"onFocus",r),d=W(e,"onBlur",r),u=W(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}}class De{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new De(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>pp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new De({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}}function OA(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,d,u)=>{var h;l.isBlock&&c>r&&(a+=s);const f=i==null?void 0:i[l.type.name];if(f)return d&&(a+=f({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function LA(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const jA=De.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new me({key:new Te("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=LA(n);return OA(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),v8=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),w8=(t=!1)=>({commands:e})=>e.setContent("",t),x8=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),h=c.resolve(d.map(l+a.nodeSize)),f=u.blockRange(h);if(!f)return;const p=Wa(f);if(a.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},k8=t=>e=>t(e),C8=()=>({state:t,dispatch:e})=>AA(t,e),S8=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,s.content),r.setSelection(new U(r.doc.resolve(i-1))),!0},T8=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const a=o.before(s),l=o.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},E8=t=>({tr:e,state:n,dispatch:r})=>{const o=ft(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},M8=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},A8=()=>({state:t,dispatch:e})=>G0(t,e),R8=()=>({commands:t})=>t.keyboardShortcut("Enter"),_8=()=>({state:t,dispatch:e})=>U7(t,e);function Ih(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:X0(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function BA(t,e,n={}){return t.find(r=>r.type===e&&Ih(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function Fk(t,e,n={}){return!!BA(t,e,n)}function Rc(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!BA([...o.node.marks],e,n)))return;let i=o.index,a=t.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&Fk([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&Fk([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Ns(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const I8=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=Ns(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:d}=a;if(o){const u=Rc(l,s,e);if(u&&u.from<=c&&u.to>=d){const h=U.create(i,u.from,u.to);n.setSelection(h)}}return!0},N8=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function mp(t){return t instanceof U}function yo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function VA(t,e=null){if(!e)return null;const n=ee.atStart(t),r=ee.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?U.create(t,yo(0,o,s),yo(t.content.size,o,s)):U.create(t,yo(e,o,s),yo(e,o,s))}function $A(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function gp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const D8=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{(gp()||$A())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!mp(n.state.selection))return i(),!0;const a=VA(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},P8=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),O8=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),HA=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&HA(r)}return t};function pu(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return HA(n)}function Nh(t,e,n){if(t instanceof wo||t instanceof _)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return _.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Nh("",e,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new wM({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?xo.fromSchema(l).parseSlice(pu(t),n.parseOptions):xo.fromSchema(l).parse(pu(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=xo.fromSchema(e);return n.slice?s.parseSlice(pu(t),n.parseOptions).content:s.parse(pu(t),n.parseOptions)}return Nh("",e,n)}function FA(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof rt||o instanceof nt))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,d)=>{i===0&&(i=d)}),t.setSelection(ee.near(t.doc.resolve(i),n))}const L8=t=>!("type"in t),j8=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Nh(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:s.options.enableContentCheck})}catch(p){return s.emit("contentError",{editor:s,error:p,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},d=!0,u=!0;if((L8(a)?a:[a]).forEach(p=>{p.check(),d=d?p.isText&&p.marks.length===0:!1,u=u?p.isBlock:!1}),l===c&&u){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let f;if(d){if(Array.isArray(e))f=e.map(p=>p.text||"").join("");else if(e instanceof _){let p="";e.forEach(g=>{g.text&&(p+=g.text)}),f=p}else typeof e=="object"&&e&&e.text?f=e.text:f=e;r.insertText(f,l,c)}else f=a,r.replaceWith(l,c,f);n.updateSelection&&FA(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:f}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:f})}return!0},B8=()=>({state:t,dispatch:e})=>H7(t,e),V8=()=>({state:t,dispatch:e})=>F7(t,e),$8=()=>({state:t,dispatch:e})=>xA(t,e),H8=()=>({state:t,dispatch:e})=>TA(t,e),F8=()=>({state:t,dispatch:e,tr:n})=>{try{const r=sp(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},z8=()=>({state:t,dispatch:e,tr:n})=>{try{const r=sp(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},U8=()=>({state:t,dispatch:e})=>V7(t,e),W8=()=>({state:t,dispatch:e})=>$7(t,e);function zA(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function G8(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))gp()||zA()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const q8=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=G8(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0};function _c(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?ft(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(u,h)=>{if(u.isText)return;const f=Math.max(r,h),p=Math.min(o,h+u.nodeSize);a.push({node:u,from:f,to:p})});const l=o-r,c=a.filter(u=>i?i.name===u.node.type.name:!0).filter(u=>Ih(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,h)=>u+h.to-h.from,0)>=l}const K8=(t,e={})=>({state:n,dispatch:r})=>{const o=ft(t,n.schema);return _c(n,o,e)?z7(n,r):!1},Z8=()=>({state:t,dispatch:e})=>RA(t,e),J8=t=>({state:e,dispatch:n})=>{const r=ft(t,e.schema);return t8(r)(e,n)},Y8=()=>({state:t,dispatch:e})=>MA(t,e);function yp(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function zk(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const X8=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=yp(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=ft(t,r.schema)),a==="mark"&&(i=Ns(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{s&&s===c.type&&n.setNodeMarkup(d,void 0,zk(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(u=>{i===u.type&&n.addMark(d,d+c.nodeSize,i.create(zk(u.attrs,e)))})})}),!0):!1},Q8=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),eV=()=>({tr:t,dispatch:e})=>{if(e){const n=new cn(t.doc);t.setSelection(n)}return!0},tV=()=>({state:t,dispatch:e})=>CA(t,e),nV=()=>({state:t,dispatch:e})=>EA(t,e),rV=()=>({state:t,dispatch:e})=>q7(t,e),oV=()=>({state:t,dispatch:e})=>J7(t,e),sV=()=>({state:t,dispatch:e})=>Z7(t,e);function Dh(t,e,n={},r={}){return Nh(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const iV=(t,e=!1,n={},r={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{var l,c;const{doc:d}=s;if(n.preserveWhitespace!=="full"){const u=Dh(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return i&&s.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!e),!0}return i&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function UA(t,e){const n=Ns(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Q0(t,e){const n=new P0(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function aV(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Uk(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function Ph(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function lV(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function bp(t){return e=>lV(e.$from,t)}function cV(t,e){const n=ri.resolve(t);return PA(n,e)}function dV(t,e){const n={from:0,to:t.content.size};return OA(t,n,e)}function uV(t,e){const n=ft(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function WA(t,e){const n=yp(typeof e=="string"?e:e.name,t.schema);return n==="node"?uV(t,e):n==="mark"?UA(t,e):{}}function hV(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function fV(t){const e=hV(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,i)=>i!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function e1(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,s)=>{const i=[];if(o.ranges.length)o.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),u=e.invert().map(c,-1),h=e.invert().map(d);r.push({oldRange:{from:u,to:h},newRange:{from:c,to:d}})})}),fV(r)}function t1(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),i=Rc(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function Qu(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function Fy(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?Ns(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Ih(u.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:u,$to:h})=>{const f=u.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,b)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(f,b),x=Math.min(p,b+g.nodeSize),w=x-v;i+=w,a.push(...g.marks.map(k=>({mark:k,from:v,to:x})))})}),i===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Ih(u.mark.attrs,n,{strict:!1})).reduce((u,h)=>u+h.to-h.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,h)=>u+h.to-h.from,0);return(l>0?l+c:l)>=i}function pV(t,e,n={}){if(!e)return _c(t,null,n)||Fy(t,null,n);const r=yp(e,t.schema);return r==="node"?_c(t,e,n):r==="mark"?Fy(t,e,n):!1}function Wk(t,e){const{nodeExtensions:n}=fp(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=ye(W(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function n1(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(n1(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function zy(t){return t instanceof q}function Oh(t,e,n){const o=t.state.doc.content.size,s=yo(e,0,o),i=yo(n,0,o),a=t.coordsAtPos(s),l=t.coordsAtPos(i,-1),c=Math.min(a.top,l.top),d=Math.max(a.bottom,l.bottom),u=Math.min(a.left,l.left),h=Math.max(a.right,l.right),f=h-u,p=d-c,v={top:c,bottom:d,left:u,right:h,width:f,height:p,x:u,y:c};return{...v,toJSON:()=>v}}function mV(t,e,n){var r;const{selection:o}=e;let s=null;if(mp(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,u,h)=>{if(c)return!1;if(d.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=f&&p}return!c}),c})}const gV=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=Ns(t,r.schema);if(o)if(i){const c=UA(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(h,f)=>{const p=Math.max(f,d),g=Math.min(f+h.nodeSize,u);h.marks.find(v=>v.type===l)?h.marks.forEach(v=>{l===v.type&&n.addMark(p,g,l.create({...v.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return mV(r,n,l)},yV=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),bV=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=ft(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>Bk(s,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Bk(s,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},vV=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=yo(t,0,r.content.size),s=q.create(r,o);e.setSelection(s)}return!0},wV=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=U.atStart(r).from,a=U.atEnd(r).to,l=yo(o,i,a),c=yo(s,i,a),d=U.create(r,l,c);e.setSelection(d)}return!0},xV=t=>({state:e,dispatch:n})=>{const r=ft(t,e.schema);return o8(r)(e,n)};function Gk(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const kV=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,d=Qu(c,a.node().type.name,a.node().attrs);if(s instanceof q&&s.node.isBlock)return!a.parentOffset||!ko(i,a.pos)?!1:(r&&(t&&Gk(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:aV(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&h?[{type:h,attrs:d}]:void 0,p=ko(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&ko(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:d}]:void 0),r){if(p&&(s instanceof U&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!u&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&Gk(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return p},CV=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=ft(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let v=_.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-x;E>=l.depth-3;E-=1)v=_.from(l.node(E).copy(v));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...Qu(h,l.node().type.name,l.node().attrs),...e},C=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(k))||void 0;v=v.append(_.from(a.createAndFill(null,C)||void 0));const S=l.before(l.depth-(x-1));n.replace(S,l.after(-w),new j(v,4-x,0));let T=-1;n.doc.nodesBetween(S,n.doc.content.size,(E,M)=>{if(T>-1)return!1;E.isTextblock&&E.content.size===0&&(T=M+1)}),T>-1&&n.setSelection(U.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,p={...Qu(h,u.type.name,u.attrs),...e},g={...Qu(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const b=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!ko(n.doc,l.pos,2))return!1;if(o){const{selection:v,storedMarks:x}=r,{splittableMarks:w}=s.extensionManager,k=x||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,b).scrollIntoView(),!k||!o)return!0;const C=k.filter(S=>w.includes(S.type.name));n.ensureMarks(C)}return!0},Km=(t,e)=>{const n=bp(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Li(t.doc,n.pos)&&t.join(n.pos),!0},Zm=(t,e)=>{const n=bp(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Li(t.doc,r)&&t.join(r),!0},SV=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:h}=o.extensionManager,f=ft(t,i.schema),p=ft(e,i.schema),{selection:g,storedMarks:b}=i,{$from:v,$to:x}=g,w=v.blockRange(x),k=b||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const C=bp(S=>Wk(S.type.name,u))(g);if(w.depth>=1&&C&&w.depth-C.depth<=1){if(C.node.type===f)return c.liftListItem(p);if(Wk(C.node.type.name,u)&&f.validContent(C.node.content)&&a)return l().command(()=>(s.setNodeMarkup(C.pos,f),!0)).command(()=>Km(s,f)).command(()=>Zm(s,f)).run()}return!n||!k||!a?l().command(()=>d().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Km(s,f)).command(()=>Zm(s,f)).run():l().command(()=>{const S=d().wrapInList(f,r),T=k.filter(E=>h.includes(E.type.name));return s.ensureMarks(T),S?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Km(s,f)).command(()=>Zm(s,f)).run()},TV=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=Ns(t,r.schema);return Fy(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},EV=(t,e,n={})=>({state:r,commands:o})=>{const s=ft(t,r.schema),i=ft(e,r.schema),a=_c(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},MV=(t,e={})=>({state:n,commands:r})=>{const o=ft(t,n.schema);return _c(n,o,e)?r.lift(o):r.wrapIn(o,e)},AV=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},RV=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},_V=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=Ns(t,r.schema),{$from:c,empty:d,ranges:u}=a;if(!o)return!0;if(d&&i){let{from:h,to:f}=a;const p=(s=c.marks().find(b=>b.type===l))===null||s===void 0?void 0:s.attrs,g=Rc(c,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else u.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},IV=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=yp(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=ft(t,r.schema)),a==="mark"&&(i=Ns(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let u,h,f,p;n.selection.empty?r.doc.nodesBetween(c,d,(g,b)=>{s&&s===g.type&&(f=Math.max(b,c),p=Math.min(b+g.nodeSize,d),u=b,h=g)}):r.doc.nodesBetween(c,d,(g,b)=>{b<c&&s&&s===g.type&&(f=Math.max(b,c),p=Math.min(b+g.nodeSize,d),u=b,h=g),b>=c&&b<=d&&(s&&s===g.type&&n.setNodeMarkup(b,void 0,{...g.attrs,...e}),i&&g.marks.length&&g.marks.forEach(v=>{if(i===v.type){const x=Math.max(b,c),w=Math.min(b+g.nodeSize,d);n.addMark(x,w,i.create({...v.attrs,...e}))}}))}),h&&(u!==void 0&&n.setNodeMarkup(u,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(g=>{i===g.type&&n.addMark(f,p,i.create({...g.attrs,...e}))}))}),!0):!1},NV=(t,e={})=>({state:n,dispatch:r})=>{const o=ft(t,n.schema);return Y7(o,e)(n,r)},DV=(t,e={})=>({state:n,dispatch:r})=>{const o=ft(t,n.schema);return X7(o,e)(n,r)};var PV=Object.freeze({__proto__:null,blur:v8,clearContent:w8,clearNodes:x8,command:k8,createParagraphNear:C8,cut:S8,deleteCurrentNode:T8,deleteNode:E8,deleteRange:M8,deleteSelection:A8,enter:R8,exitCode:_8,extendMarkRange:I8,first:N8,focus:D8,forEach:P8,insertContent:O8,insertContentAt:j8,joinBackward:$8,joinDown:V8,joinForward:H8,joinItemBackward:F8,joinItemForward:z8,joinTextblockBackward:U8,joinTextblockForward:W8,joinUp:B8,keyboardShortcut:q8,lift:K8,liftEmptyBlock:Z8,liftListItem:J8,newlineInCode:Y8,resetAttributes:X8,scrollIntoView:Q8,selectAll:eV,selectNodeBackward:tV,selectNodeForward:nV,selectParentNode:rV,selectTextblockEnd:oV,selectTextblockStart:sV,setContent:iV,setMark:gV,setMeta:yV,setNode:bV,setNodeSelection:vV,setTextSelection:wV,sinkListItem:xV,splitBlock:kV,splitListItem:CV,toggleList:SV,toggleMark:TV,toggleNode:EV,toggleWrap:MV,undoInputRule:AV,unsetAllMarks:RV,unsetMark:_V,updateAttributes:IV,wrapIn:NV,wrapInList:DV});const GA=De.create({name:"commands",addCommands(){return{...PV}}}),qA=De.create({name:"drop",addProseMirrorPlugins(){return[new me({key:new Te("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),KA=De.create({name:"editable",addProseMirrorPlugins(){return[new me({key:new Te("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ZA=new Te("focusEvents"),JA=De.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new me({key:ZA,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),YA=De.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:h,parent:f}=u,p=u.parent.isTextblock&&h>0?a.doc.resolve(h-1):u,g=p.parent.type.spec.isolating,b=u.pos-u.parentOffset,v=g&&p.parent.childCount===1?b===u.pos:ee.atStart(c).from===h;return!d||!f.type.isTextblock||f.textContent.length||!v||v&&u.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return gp()||zA()?s:o},addProseMirrorPlugins(){return[new me({key:new Te("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),o=t.some(g=>g.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=e.selection,l=ee.atStart(e.doc).from,c=ee.atEnd(e.doc).to;if(s||!(i===l&&a===c)||!n1(n.doc))return;const h=n.tr,f=up({state:n,transaction:h}),{commands:p}=new hp({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),XA=De.create({name:"paste",addProseMirrorPlugins(){return[new me({key:new Te("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),QA=De.create({name:"tabindex",addProseMirrorPlugins(){return[new me({key:new Te("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Sl=Object.freeze({__proto__:null,ClipboardTextSerializer:jA,Commands:GA,Drop:qA,Editable:KA,FocusEvents:JA,Keymap:YA,Paste:XA,Tabindex:QA,focusEventsPluginKey:ZA});class Js{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You canâ€™t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Js(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Js(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Js(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new Js(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new Js(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===e&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const OV=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function LV(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}class jV extends s8{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=LV(OV,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=DA(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=r.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[KA,jA.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),GA,JA,YA,QA,qA,XA].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new ri(o,this)}createCommandManager(){this.commandManager=new hp({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Dh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=Dh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=VA(n,this.options.autofocus);this.view=new vA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:ei.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return WA(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return pV(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Y0(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return dV(this.state.doc,{blockSeparator:n,textSerializers:{...LA(this.schema),...r}})}get isEmpty(){return n1(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Js(n,this)}get $doc(){return this.$pos(0)}}function Na(t){return new ws({find:t.find,handler:({state:e,range:n,match:r})=>{const o=ye(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),d=c+i.length;if(t1(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;d<n.to&&s.delete(d,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+i.length;s.addMark(n.from+l,h,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}let Kr=class Uy{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Uy(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>pp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Uy(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}};class BV{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,s,i,a,l;const{view:c}=this.editor,d=e.target,u=d.nodeType===3?(n=d.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):d.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(d)||!u)return;let h=0,f=0;if(this.dom!==u){const x=this.dom.getBoundingClientRect(),w=u.getBoundingClientRect(),k=(o=e.offsetX)!==null&&o!==void 0?o:(s=e.nativeEvent)===null||s===void 0?void 0:s.offsetX,C=(i=e.offsetY)!==null&&i!==void 0?i:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;h=w.x-x.x+k,f=w.y-x.y+C}const p=this.dom.cloneNode(!0);(l=e.dataTransfer)===null||l===void 0||l.setDragImage(p,h,f);const g=this.getPos();if(typeof g!="number")return;const b=q.create(c.state.doc,g),v=c.state.tr.setSelection(b);c.dispatch(v)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const s=e.type.startsWith("drag"),i=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!s)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,d=!!this.node.type.spec.draggable,u=q.isSelectable(this.node),h=e.type==="copy",f=e.type==="paste",p=e.type==="cut",g=e.type==="mousedown";if(!d&&u&&s&&e.target===this.dom&&e.preventDefault(),d&&s&&!c&&e.target===this.dom)return e.preventDefault(),!1;if(d&&l&&!c&&g){const b=r.closest("[data-drag-handle]");b&&(this.dom===b||this.dom.contains(b))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||i||h||f||p||g&&u)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(gp()||$A())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Ci(t){return new f8({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=ye(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),u=n.from+l.indexOf(a),h=u+a.length;if(t1(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(b=>b===t.type&&b!==p.mark.type)).filter(p=>p.to>u).length)return null;h<n.to&&i.delete(h,n.to),u>n.from&&i.delete(n.from+d,u),c=n.from+d+a.length,i.addMark(n.from+d,c,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}var mu,VV=new Uint8Array(16);function $V(){if(!mu&&(mu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!mu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mu(VV)}const HV=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function FV(t){return typeof t=="string"&&HV.test(t)}var yt=[];for(var Jm=0;Jm<256;++Jm)yt.push((Jm+256).toString(16).substr(1));function zV(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(yt[t[e+0]]+yt[t[e+1]]+yt[t[e+2]]+yt[t[e+3]]+"-"+yt[t[e+4]]+yt[t[e+5]]+"-"+yt[t[e+6]]+yt[t[e+7]]+"-"+yt[t[e+8]]+yt[t[e+9]]+"-"+yt[t[e+10]]+yt[t[e+11]]+yt[t[e+12]]+yt[t[e+13]]+yt[t[e+14]]+yt[t[e+15]]).toLowerCase();if(!FV(n))throw TypeError("Stringified UUID is invalid");return n}function eR(t,e,n){t=t||{};var r=t.random||(t.rng||$V)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,zV(r)}var UV=class tR{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,o){this.remove(e),this.set(n,r,o)}remove(e){this.cache.delete(e)}invalidate(e){const n=new tR(this.cache),r=e.mapping;return this.cache.forEach(([o,s],i)=>{if(i<0)return;const a=r.mapResult(i),l=e.doc.nodeAt(a.pos);if(a.deleted||!(l!=null&&l.eq(o)))n.remove(i);else if(i!==a.pos){const c=s.map(d=>d.map(r,0,0)).filter(d=>d!=null);n.replace(i,a.pos,l,c)}}),n}};function WV({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new Te("prosemirror-highlight");return new me({key:r,state:{init(o,s){const i=new UV,[a,l]=qk(s.doc,t,e,n,i);return{cache:i,decorations:a,promises:l}},apply:(o,s)=>{const i=s.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const d=s.decorations.map(o.mapping,o.doc),u=s.promises;return{cache:i,decorations:d,promises:u}}const[l,c]=qk(o.doc,t,e,n,i);return{cache:i,decorations:l,promises:c}}},view:o=>{const s=new Set,i=()=>{if(s.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const c=r.getState(o.state);for(const d of(l=c==null?void 0:c.promises)!=null?l:[])s.add(d),d.then(()=>{s.delete(d),i()}).catch(()=>{s.delete(d)})};return a(),{update:()=>{a()}}},props:{decorations(o){var s;return(s=this.getState(o))==null?void 0:s.decorations}}})}function qk(t,e,n,r,o){const s=[],i=[];return t.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),d=o.get(l);if(d){const[u,h]=d;s.push(...h)}else{const u=e({content:a.textContent,language:c||void 0,pos:l,size:a.nodeSize});u&&Array.isArray(u)?(o.set(l,a,u),s.push(...u)):u instanceof Promise&&(o.remove(l),i.push(u))}}return!1}),[be.create(t,s),i]}function GV(t,e){return function({content:r,language:o,pos:s,size:i}){var a;const l=[],{tokens:c,fg:d,bg:u,rootStyle:h}=t.codeToTokens(r,{lang:o,theme:t.getLoadedThemes()[0]}),f=h||(d&&u?`--prosemirror-highlight:${d};--prosemirror-highlight-bg:${u}`:"");if(f){const g=Ae.node(s,s+i,{style:f});l.push(g)}let p=s+1;for(const g of c){for(const b of g){const v=p+b.content.length,x=Ae.inline(p,v,{style:qV((a=b.htmlStyle)!=null?a:`color: ${b.color}`),class:"shiki"});l.push(x),p=v}p+=1}return l}}function qV(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const KV=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ZV=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,JV=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,YV=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,XV=Et.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",kn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Na({find:KV,type:this.type}),Na({find:JV,type:this.type})]},addPasteRules(){return[Ci({find:ZV,type:this.type}),Ci({find:YV,type:this.type})]}}),QV=/(^|[^`])`([^`]+)`(?!`)/,e$=/(^|[^`])`([^`]+)`(?!`)/g,t$=Et.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",kn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Na({find:QV,type:this.type})]},addPasteRules(){return[Ci({find:e$,type:this.type})]}}),n$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,r$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,o$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,s$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,i$=Et.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",kn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Na({find:n$,type:this.type}),Na({find:o$,type:this.type})]},addPasteRules(){return[Ci({find:r$,type:this.type}),Ci({find:s$,type:this.type})]}}),a$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,l$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,c$=Et.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",kn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Na({find:a$,type:this.type})]},addPasteRules(){return[Ci({find:l$,type:this.type})]}}),d$=Et.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",kn(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),u$=Kr.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",kn(this.options.HTMLAttributes,t),0]}}),h$=Kr.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",kn(this.options.HTMLAttributes,t),0]}});var Wy,Gy;if(typeof WeakMap<"u"){let t=new WeakMap;Wy=e=>t.get(e),Gy=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;Wy=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},Gy=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var Fe=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let s=r+1,i=o+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;i<this.height&&this.map[e+this.width*a]==n;a++)i++;return{left:r,top:o,right:s,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:i==this.height)?null:this.map[r+this.width*(n<0?s-1:i)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:s}=this.findCell(t),{left:i,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,i),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const s=r*this.width+o,i=this.map[s];n[i]||(n[i]=!0,!(o==t.left&&o&&this.map[s-1]==i||r==t.top&&r&&this.map[s-this.width]==i)&&e.push(i))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==t){let i=e+t*this.width;const a=(t+1)*this.width;for(;i<a&&this.map[i]<o;)i++;return i==a?s-1:this.map[i]}o=s}}static get(t){return Wy(t)||Gy(t,f$(t))}};function f$(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=p$(t),n=t.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,d=e*n;c<d;c++)r[c]=0;for(let c=0,d=0;c<n;c++){const u=t.child(c);d++;for(let p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==u.childCount)break;const g=u.child(p),{colspan:b,rowspan:v,colwidth:x}=g.attrs;for(let w=0;w<v;w++){if(w+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:v-w});break}const k=o+w*e;for(let C=0;C<b;C++){r[k+C]==0?r[k+C]=d:(s||(s=[])).push({type:"collision",row:c,pos:d,n:b-C});const S=x&&x[C];if(S){const T=(k+C)%e*2,E=i[T];E==null||E!=S&&i[T+1]==1?(i[T]=S,i[T+1]=1):E==S&&i[T+1]++}}}o+=b,d+=g.nodeSize}const h=(c+1)*e;let f=0;for(;o<h;)r[o++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),d++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Fe(e,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&m$(a,i,t),a}function p$(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=t.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function m$(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const d=(o+c)%t.width,u=e[d*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=g$(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function g$(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function jt(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var rs=new Te("selectingCells");function Ga(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function y$(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Zr(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function r1(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Ga(e.$head)||b$(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function b$(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function qy(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function v$(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function o1(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function nR(t,e,n){const r=t.node(-1),o=Fe.get(r),s=t.start(-1),i=o.nextCell(t.pos-s,e,n);return i==null?null:t.node(0).resolve(s+i)}function Si(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function rR(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function w$(t,e,n){const r=jt(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var Re=class co extends ee{constructor(e,n=e){const r=e.node(-1),o=Fe.get(r),s=e.start(-1),i=o.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=o.cellsInRect(i).filter(d=>d!=n.pos-s);l.unshift(n.pos-s);const c=l.map(d=>{const u=r.nodeAt(d);if(!u)throw RangeError(`No cell with offset ${d} found`);const h=s+d+1;return new jM(a.resolve(h),a.resolve(h+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(qy(r)&&qy(o)&&o1(r,o)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?co.rowSelection(r,o):s&&this.isColSelection()?co.colSelection(r,o):new co(r,o)}return U.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=Fe.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},i=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let d=l*n.width+o.left,u=o.left;u<o.right;u++,d++){const h=n.map[d];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const g=o.left-f.left,b=f.right-o.right;if(g>0||b>0){let v=p.attrs;if(g>0&&(v=Si(v,0,g)),b>0&&(v=Si(v,v.colspan-b,b)),f.left<o.left){if(p=p.type.createAndFill(v),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else p=p.type.create(v,p.content)}if(f.top<o.top||f.bottom>o.bottom){const v={...p.attrs,rowspan:Math.min(f.bottom,o.bottom)-Math.max(f.top,o.top)};f.top<o.top?p=p.type.createAndFill(v):p=p.type.create(v,p.content)}c.push(p)}i.push(e.child(l).copy(_.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:i;return new j(_.from(a),1,1)}replace(e,n=j.empty){const r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){const{$from:a,$to:l}=o[i],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),i?j.empty:n)}const s=ee.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new j(_.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Fe.get(n),o=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let i=0;i<s.length;i++)e(n.nodeAt(s[i]),o+s[i])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=Fe.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.top<=a.top?(i.top>0&&(e=l.resolve(s+o.map[i.left])),a.bottom<o.height&&(n=l.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+o.map[a.left])),i.bottom<o.height&&(e=l.resolve(s+o.map[o.width*(o.height-1)+i.right-1]))),new co(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Fe.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(o,s)>0)return!1;const i=o+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(e){return e instanceof co&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=Fe.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.left<=a.left?(i.left>0&&(e=l.resolve(s+o.map[i.top*o.width])),a.right<o.width&&(n=l.resolve(s+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+o.map[a.top*o.width])),i.right<o.width&&(e=l.resolve(s+o.map[o.width*(i.top+1)-1]))),new co(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new co(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new co(e.resolve(n),e.resolve(r))}getBookmark(){return new x$(this.$anchorCell.pos,this.$headCell.pos)}};Re.prototype.visible=!1;ee.jsonID("cell",Re);var x$=class oR{constructor(e,n){this.anchor=e,this.head=n}map(e){return new oR(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&o1(n,r)?new Re(n,r):ee.near(r,1)}};function k$(t){if(!(t.selection instanceof Re))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Ae.node(r,r+n.nodeSize,{class:"selectedCell"}))}),be.create(t.doc,e)}function C$({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function S$({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function T$(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,i;if(r instanceof q&&(i=r.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")s=Re.create(o,r.from);else if(i=="row"){const a=o.resolve(r.from+1);s=Re.rowSelection(a,a)}else if(!n){const a=Fe.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=Re.create(o,l+1,c)}}else r instanceof U&&C$(r)?s=U.create(o,r.from):r instanceof U&&S$(r)&&(s=U.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var E$=new Te("fix-tables");function sR(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let i=0,a=0;i<s;i++){const l=e.child(i);for(let c=a,d=Math.min(o,i+3);c<d;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?sR(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function M$(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=A$(t,o,s,n))};return e?e.doc!=t.doc&&sR(e.doc,t.doc,0,r):t.doc.descendants(r),n}function A$(t,e,n,r){const o=Fe.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const d=e.nodeAt(c.pos);if(!d)continue;const u=d.attrs;for(let h=0;h<u.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Si(u,u.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let i,a;for(let l=0;l<s.length;l++)s[l]&&(i==null&&(i=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const d=e.child(l),u=c+d.nodeSize,h=s[l];if(h>0){let f="cell";d.firstChild&&(f=d.firstChild.type.spec.tableRole);const p=[];for(let b=0;b<h;b++){const v=jt(t.schema)[f].createAndFill();v&&p.push(v)}const g=(l==0||i==l-1)&&a==l?c+1:u-1;r.insert(r.mapping.map(g),p)}c=u}return r.setMeta(E$,{fixTables:!0})}function Jr(t){const e=t.selection,n=r1(t),r=n.node(-1),o=n.start(-1),s=Fe.get(r);return{...e instanceof Re?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function iR(t,{map:e,tableStart:n,table:r},o){let s=o>0?-1:0;w$(e,r,o+s)&&(s=o==0||o==e.width?null:0);for(let i=0;i<e.height;i++){const a=i*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,rR(c.attrs,o-e.colCount(l))),i+=c.attrs.rowspan-1}else{const l=s==null?jt(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(i,o,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function R$(t,e){if(!Zr(t))return!1;if(e){const n=Jr(t);e(iR(t.tr,n,n.left))}return!0}function _$(t,e){if(!Zr(t))return!1;if(e){const n=Jr(t);e(iR(t.tr,n,n.right))}return!0}function I$(t,{map:e,table:n,tableStart:r},o){const s=t.mapping.maps.length;for(let i=0;i<e.height;){const a=i*e.width+o,l=e.map[a],c=n.nodeAt(l),d=c.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,Si(d,o-e.colCount(l)));else{const u=t.mapping.slice(s).map(r+l);t.delete(u,u+c.nodeSize)}i+=d.rowspan}}function N$(t,e){if(!Zr(t))return!1;if(e){const n=Jr(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;I$(r,n,o),o!=n.left;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Fe.get(s)}e(r)}return!0}function D$(t,e,n){var r;const o=jt(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function aR(t,{map:e,tableStart:n,table:r},o){var s;let i=n;for(let c=0;c<o;c++)i+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;D$(e,r,o+l)&&(l=o==0||o==e.height?null:0);for(let c=0,d=e.width*o;c<e.width;c++,d++)if(o>0&&o<e.height&&e.map[d]==e.map[d-e.width]){const u=e.map[d],h=r.nodeAt(u).attrs;t.setNodeMarkup(n+u,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const u=l==null?jt(r.type.schema).cell:(s=r.nodeAt(e.map[d+l*e.width]))==null?void 0:s.type,h=u==null?void 0:u.createAndFill();h&&a.push(h)}return t.insert(i,jt(r.type.schema).row.create(null,a)),t}function P$(t,e){if(!Zr(t))return!1;if(e){const n=Jr(t);e(aR(t.tr,n,n.top))}return!0}function O$(t,e){if(!Zr(t))return!1;if(e){const n=Jr(t);e(aR(t.tr,n,n.bottom))}return!0}function L$(t,{map:e,table:n,tableStart:r},o){let s=0;for(let c=0;c<o;c++)s+=n.child(c).nodeSize;const i=s+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(s+r,i+r);const l=new Set;for(let c=0,d=o*e.width;c<e.width;c++,d++){const u=e.map[d];if(!l.has(u)){if(l.add(u),o>0&&u==e.map[d-e.width]){const h=n.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(o<e.height&&u==e.map[d+e.width]){const h=n.nodeAt(u),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),g=e.positionAt(o+1,c,n);t.insert(t.mapping.slice(a).map(r+g),p),c+=f.colspan-1}}}}function j$(t,e){if(!Zr(t))return!1;if(e){const n=Jr(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;L$(r,n,o),o!=n.top;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Fe.get(n.table)}e(r)}return!0}function Kk(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function B$({width:t,height:e,map:n},r){let o=r.top*t+r.left,s=o,i=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[i]==n[i+t])return!0;o++,i++}return!1}function V$(t,e){const n=t.selection;if(!(n instanceof Re)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Jr(t),{map:o}=r;if(B$(o,r))return!1;if(e){const s=t.tr,i={};let a=_.empty,l,c;for(let d=r.top;d<r.bottom;d++)for(let u=r.left;u<r.right;u++){const h=o.map[d*o.width+u],f=r.table.nodeAt(h);if(!(i[h]||!f))if(i[h]=!0,l==null)l=h,c=f;else{Kk(f)||(a=a.append(f.content));const p=s.mapping.map(h+r.tableStart);s.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...rR(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const d=l+1+c.content.size,u=Kk(c)?l+1:d;s.replaceWith(u+r.tableStart,d+r.tableStart,a)}s.setSelection(new Re(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function $$(t,e){const n=jt(t.schema);return H$(({node:r})=>n[r.type.spec.tableRole])(t,e)}function H$(t){return(e,n)=>{var r;const o=e.selection;let s,i;if(o instanceof Re){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;s=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(s=y$(o.$from),!s)return!1;i=(r=Ga(o.$from))==null?void 0:r.pos}if(s==null||i==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const d=Jr(e),u=e.tr;for(let f=0;f<d.right-d.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=d.top;f<d.bottom;f++){let p=d.map.positionAt(f,d.left,d.table);f==d.top&&(p+=s.nodeSize);for(let g=d.left,b=0;g<d.right;g++,b++)g==d.left&&f==d.top||u.insert(h=u.mapping.map(p+d.tableStart,1),t({node:s,row:f,col:g}).createAndFill(l[b]))}u.setNodeMarkup(i,t({node:s,row:d.top,col:d.left}),l[0]),o instanceof Re&&u.setSelection(new Re(u.doc.resolve(o.$anchorCell.pos),h?u.doc.resolve(h):void 0)),n(u)}return!0}}function F$(t){return function(e,n){if(!Zr(e))return!1;if(n){const r=jt(e.schema),o=Jr(e),s=e.tr,i=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function Zk(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function s1(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?F$(t):function(n,r){if(!Zr(n))return!1;if(r){const o=jt(n.schema),s=Jr(n),i=n.tr,a=Zk("row",s,o),l=Zk("column",s,o),d=(t==="column"?a:t==="row"?l:!1)?1:0,u=t=="column"?{left:0,top:d,right:1,bottom:s.map.height}:t=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(u).forEach(f=>{const p=f+s.tableStart,g=i.doc.nodeAt(p);g&&i.setNodeMarkup(p,h,g.attrs)}),r(i)}return!0}}s1("row",{useDeprecatedLogic:!0});s1("column",{useDeprecatedLogic:!0});s1("cell",{useDeprecatedLogic:!0});function z$(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),i=s.lastChild;if(i)return o-1-i.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function Jk(t){return function(e,n){if(!Zr(e))return!1;const r=z$(r1(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(U.between(o,v$(o))).scrollIntoView())}return!0}}function gu(t,e){const n=t.selection;if(!(n instanceof Re))return!1;if(e){const r=t.tr,o=jt(t.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new j(o,0,0))}),r.docChanged&&e(r)}return!0}function U$(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,i=o.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const d=l?0:Math.max(0,n-1),u=l<e.childCount-1?0:Math.max(0,r-1);(d||u)&&(c=Ky(jt(i).row,new j(c,d,u)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?Ky(jt(i).row,new j(e,n,r)).content:e);else return null;return W$(i,a)}function W$(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let i=s.childCount-1;i>=0;i--){const{rowspan:a,colspan:l}=s.child(i).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(_.empty),n[o]<r){const s=jt(t).cell.createAndFill(),i=[];for(let a=n[o];a<r;a++)i.push(s);e[o]=e[o].append(_.from(i))}return{height:e.length,width:r,rows:e}}function Ky(t,e){const n=t.createAndFill();return new P0(n).replace(0,n.content.size,e).doc}function G$({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],i=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let d=s[a]||0,u=0;d<r;u++){let h=l.child(u%l.childCount);d+h.attrs.colspan>r&&(h=h.type.createChecked(Si(h.attrs,h.attrs.colspan,d+h.attrs.colspan-r),h.content)),c.push(h),d+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}i.push(_.from(c))}n=i,t=r}if(e!=o){const s=[];for(let i=0,a=0;i<o;i++,a++){const l=[],c=n[a%e];for(let d=0;d<c.childCount;d++){let u=c.child(d);i+u.attrs.rowspan>o&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,o-u.attrs.rowspan)},u.content)),l.push(u)}s.push(_.from(l))}n=s,e=o}return{width:t,height:e,rows:n}}function q$(t,e,n,r,o,s,i){const a=t.doc.type.schema,l=jt(a);let c,d;if(o>e.width)for(let u=0,h=0;u<e.height;u++){const f=n.child(u);h+=f.nodeSize;const p=[];let g;f.lastChild==null||f.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=d||(d=l.header_cell.createAndFill());for(let b=e.width;b<o;b++)p.push(g);t.insert(t.mapping.slice(i).map(h-1+r),p)}if(s>e.height){const u=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,o);p++){const b=p>=e.width?!1:n.nodeAt(e.map[g+p]).type==l.header_cell;u.push(b?d||(d=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,_.from(u)),f=[];for(let p=e.height;p<s;p++)f.push(h);t.insert(t.mapping.slice(i).map(r+n.nodeSize-2),f)}return!!(c||d)}function Yk(t,e,n,r,o,s,i,a){if(i==0||i==e.height)return!1;let l=!1;for(let c=o;c<s;c++){const d=i*e.width+c,u=e.map[d];if(e.map[d-e.width]==u){l=!0;const h=n.nodeAt(u),{top:f,left:p}=e.findCell(u);t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h.attrs,rowspan:i-f}),t.insert(t.mapping.slice(a).map(e.positionAt(i,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-i})),c+=h.attrs.colspan-1}}return l}function Xk(t,e,n,r,o,s,i,a){if(i==0||i==e.width)return!1;let l=!1;for(let c=o;c<s;c++){const d=c*e.width+i,u=e.map[d];if(e.map[d-1]==u){l=!0;const h=n.nodeAt(u),f=e.colCount(u),p=t.mapping.slice(a).map(u+r);t.setNodeMarkup(p,null,Si(h.attrs,i-f,h.attrs.colspan-(i-f))),t.insert(p+h.nodeSize,h.type.createAndFill(Si(h.attrs,0,i-f))),c+=h.attrs.rowspan-1}}return l}function Qk(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=Fe.get(s);const{top:a,left:l}=r,c=l+o.width,d=a+o.height,u=t.tr;let h=0;function f(){if(s=n?u.doc.nodeAt(n-1):u.doc,!s)throw new Error("No table found");i=Fe.get(s),h=u.mapping.maps.length}q$(u,i,s,n,c,d,h)&&f(),Yk(u,i,s,n,l,c,a,h)&&f(),Yk(u,i,s,n,l,c,d,h)&&f(),Xk(u,i,s,n,a,d,l,h)&&f(),Xk(u,i,s,n,a,d,c,h)&&f();for(let p=a;p<d;p++){const g=i.positionAt(p,l,s),b=i.positionAt(p,c,s);u.replace(u.mapping.slice(h).map(g+n),u.mapping.slice(h).map(b+n),new j(o.rows[p-a],0,0))}f(),u.setSelection(new Re(u.doc.resolve(n+i.positionAt(a,l,s)),u.doc.resolve(n+i.positionAt(d-1,c-1,s)))),e(u)}var K$=W0({ArrowLeft:yu("horiz",-1),ArrowRight:yu("horiz",1),ArrowUp:yu("vert",-1),ArrowDown:yu("vert",1),"Shift-ArrowLeft":bu("horiz",-1),"Shift-ArrowRight":bu("horiz",1),"Shift-ArrowUp":bu("vert",-1),"Shift-ArrowDown":bu("vert",1),Backspace:gu,"Mod-Backspace":gu,Delete:gu,"Mod-Delete":gu});function eh(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function yu(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof Re)return eh(n,r,ee.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const i=lR(o,t,e);if(i==null)return!1;if(t=="horiz")return eh(n,r,ee.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(i),l=nR(a,t,e);let c;return l?c=ee.near(l,1):e<0?c=ee.near(n.doc.resolve(a.before(-1)),-1):c=ee.near(n.doc.resolve(a.after(-1)),1),eh(n,r,c)}}}function bu(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof Re)i=s;else{const l=lR(o,t,e);if(l==null)return!1;i=new Re(n.doc.resolve(l))}const a=nR(i.$headCell,t,e);return a?eh(n,r,new Re(i.$anchorCell,a)):!1}}function Z$(t,e){const n=t.state.doc,r=Ga(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Re(r))),!0):!1}function J$(t,e,n){if(!Zr(t.state))return!1;let r=U$(n);const o=t.state.selection;if(o instanceof Re){r||(r={width:1,height:1,rows:[_.from(Ky(jt(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=Fe.get(s).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=G$(r,a.right-a.left,a.bottom-a.top),Qk(t.state,t.dispatch,i,a,r),!0}else if(r){const s=r1(t.state),i=s.start(-1);return Qk(t.state,t.dispatch,i,Fe.get(s.node(-1)).findCell(s.pos-i),r),!0}else return!1}function Y$(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=eC(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof Re)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=Ga(t.state.selection.$anchor))!=null&&((n=Ym(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(l,c){let d=Ym(t,c);const u=rs.getState(t.state)==null;if(!d||!o1(l,d))if(u)d=l;else return;const h=new Re(l,d);if(u||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);u&&f.setMeta(rs,l.pos),t.dispatch(f)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),rs.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(rs,-1))}function a(l){const c=l,d=rs.getState(t.state);let u;if(d!=null)u=t.state.doc.resolve(d);else if(eC(t,c.target)!=r&&(u=Ym(t,e),!u))return i();u&&s(u,c)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function lR(t,e,n){if(!(t.state.selection instanceof U))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function eC(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Ym(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Ga(t.state.doc.resolve(n.pos)):null}var cR=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Zy(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,Zy(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function Zy(t,e,n,r,o,s){var i;let a=0,l=!0,c=e.firstChild;const d=t.firstChild;if(d){for(let u=0,h=0;u<d.childCount;u++){const{colspan:f,colwidth:p}=d.child(u).attrs;for(let g=0;g<f;g++,h++){const b=o==h?s:p&&p[g],v=b?b+"px":"";if(a+=b||r,b||(l=!1),c)c.style.width!=v&&(c.style.width=v),c=c.nextSibling;else{const x=document.createElement("col");x.style.width=v,e.appendChild(x)}}}for(;c;){const u=c.nextSibling;(i=c.parentNode)==null||i.removeChild(c),c=u}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var vn=new Te("tableColumnResizing");function X$({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=cR,lastColumnResizable:o=!0}={}){const s=new me({key:vn,state:{init(i,a){var l,c;const d=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,u=jt(a.schema).table.name;return r&&d&&(d[u]=(h,f)=>new r(h,n,f)),new Q$(-1,!1)},apply(i,a){return a.apply(i)}},props:{attributes:i=>{const a=vn.getState(i);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(i,a)=>{e6(i,a,t,o)},mouseleave:i=>{t6(i)},mousedown:(i,a)=>{n6(i,a,e,n)}},decorations:i=>{const a=vn.getState(i);if(a&&a.activeHandle>-1)return a6(i,a.activeHandle)},nodeViews:{}}});return s}var Q$=class th{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(vn);if(r&&r.setHandle!=null)return new th(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new th(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return qy(e.doc.resolve(o))||(o=-1),new th(o,n.dragging)}return n}};function e6(t,e,n,r){if(!t.editable)return;const o=vn.getState(t.state);if(o&&!o.dragging){const s=o6(e.target);let i=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?i=tC(t,e,"left",n):l-e.clientX<=n&&(i=tC(t,e,"right",n))}if(i!=o.activeHandle){if(!r&&i!==-1){const a=t.state.doc.resolve(i),l=a.node(-1),c=Fe.get(l),d=a.start(-1);if(c.colCount(a.pos-d)+a.nodeAfter.attrs.colspan-1==c.width-1)return}dR(t,i)}}}function t6(t){if(!t.editable)return;const e=vn.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&dR(t,-1)}function n6(t,e,n,r){var o;if(!t.editable)return!1;const s=(o=t.dom.ownerDocument.defaultView)!=null?o:window,i=vn.getState(t.state);if(!i||i.activeHandle==-1||i.dragging)return!1;const a=t.state.doc.nodeAt(i.activeHandle),l=r6(t,i.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(vn,{setDragging:{startX:e.clientX,startWidth:l}}));function c(u){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",d);const h=vn.getState(t.state);h!=null&&h.dragging&&(s6(t,h.activeHandle,nC(h.dragging,u,n)),t.dispatch(t.state.tr.setMeta(vn,{setDragging:null})))}function d(u){if(!u.which)return c(u);const h=vn.getState(t.state);if(h&&h.dragging){const f=nC(h.dragging,u,n);rC(t,h.activeHandle,f,r)}}return rC(t,i.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",d),e.preventDefault(),!0}function r6(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function o6(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function tC(t,e,n,r){const o=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!s)return-1;const{pos:i}=s,a=Ga(t.state.doc.resolve(i));if(!a)return-1;if(n=="right")return a.pos;const l=Fe.get(a.node(-1)),c=a.start(-1),d=l.map.indexOf(a.pos-c);return d%l.width==0?-1:c+l.map[d-1]}function nC(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function dR(t,e){t.dispatch(t.state.tr.setMeta(vn,{setHandle:e}))}function s6(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),s=Fe.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const d=c*s.width+a;if(c&&s.map[d]==s.map[d-s.width])continue;const u=s.map[d],h=o.nodeAt(u).attrs,f=h.colspan==1?0:a-s.colCount(u);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():i6(h.colspan);p[f]=n,l.setNodeMarkup(i+u,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function rC(t,e,n,r){const o=t.state.doc.resolve(e),s=o.node(-1),i=o.start(-1),a=Fe.get(s).colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&Zy(s,l.firstChild,l,r,a,n)}function i6(t){return Array(t).fill(0)}function a6(t,e){var n;const r=[],o=t.doc.resolve(e),s=o.node(-1);if(!s)return be.empty;const i=Fe.get(s),a=o.start(-1),l=i.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<i.height;c++){const d=l+c*i.width;if((l==i.width-1||i.map[d]!=i.map[d+1])&&(c==0||i.map[d]!=i.map[d-i.width])){const u=i.map[d],h=a+u+s.nodeAt(u).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=vn.getState(t))!=null&&n.dragging&&r.push(Ae.node(a+u,a+u+s.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),r.push(Ae.widget(h,f))}}return be.create(t.doc,r)}function l6({allowTableNodeSelection:t=!1}={}){return new me({key:rs,state:{init(){return null},apply(e,n){const r=e.getMeta(rs);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:k$,handleDOMEvents:{mousedown:Y$},createSelectionBetween(e){return rs.getState(e.state)!=null?e.state.selection:null},handleTripleClick:Z$,handleKeyDown:K$,handlePaste:J$},appendTransaction(e,n,r){return T$(r,M$(r,n),t)}})}class Xe extends ee{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Xe.valid(r)?new Xe(r):ee.near(r)}content(){return j.empty}eq(e){return e instanceof Xe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Xe(e.resolve(n.pos))}getBookmark(){return new i1(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!c6(e)||!d6(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Xe.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(Xe.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!q.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(Xe.valid(a))return a}return null}}}Xe.prototype.visible=!1;Xe.findFrom=Xe.findGapCursorFrom;ee.jsonID("gapcursor",Xe);class i1{constructor(e){this.pos=e}map(e){return new i1(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Xe.valid(n)?new Xe(n):ee.near(n)}}function c6(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function d6(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function u6(){return new me({props:{decorations:m6,createSelectionBetween(t,e,n){return e.pos==n.pos&&Xe.valid(n)?new Xe(n):null},handleClick:f6,handleKeyDown:h6,handleDOMEvents:{beforeinput:p6}}})}const h6=W0({ArrowLeft:vu("horiz",-1),ArrowRight:vu("horiz",1),ArrowUp:vu("vert",-1),ArrowDown:vu("vert",1)});function vu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof U){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Xe.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Xe(c))),!0):!1}}function f6(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Xe.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&q.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Xe(r))),!0)}function p6(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Xe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=_.empty;for(let i=r.length-1;i>=0;i--)o=_.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new j(o,0,0));return s.setSelection(U.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function m6(t){if(!(t.selection instanceof Xe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",be.create(t.doc,[Ae.widget(t.selection.head,e,{key:"gapcursor"})])}const g6=De.create({name:"gapCursor",addProseMirrorPlugins(){return[u6()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ye(W(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var Lh=200,ut=function(){};ut.prototype.append=function(e){return e.length?(e=ut.from(e),!this.length&&e||e.length<Lh&&this.leafAppend(e)||this.length<Lh&&e.leafPrepend(this)||this.appendInner(e)):this};ut.prototype.prepend=function(e){return e.length?ut.from(e).append(this):this};ut.prototype.appendInner=function(e){return new y6(this,e)};ut.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ut.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ut.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ut.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ut.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};ut.from=function(e){return e instanceof ut?e:e&&e.length?new uR(e):ut.empty};var uR=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Lh)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Lh)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ut);ut.empty=new uR([]);var y6=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ut);const b6=500;class nr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],d=[];return this.items.forEach((u,h)=>{if(!u.step){o||(o=this.remapping(r,h+1),s=o.maps.length),s--,d.push(u);return}if(o){d.push(new Go(u.map));let f=u.step.map(o.slice(s)),p;f&&i.maybeStep(f).doc&&(p=i.mapping.maps[i.mapping.maps.length-1],c.push(new Go(p,void 0,void 0,c.length+d.length))),s--,p&&o.appendMap(p,s)}else i.maybeStep(u.step);if(u.selection)return a=o?u.selection.map(o.slice(s)):u.selection,l=new nr(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),h=new Go(e.mapping.maps[d],u,n),f;(f=l&&l.merge(h))&&(h=f,d?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(i++,n=void 0),o||(l=h)}let c=i-r.depth;return c>w6&&(a=v6(a,c),i-=c),new nr(a.append(s),i)}remapping(e,n){let r=new Ma;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new nr(this.items.append(e.map(n=>new Go(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;i=Math.min(i,f);let p=s.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),b=h.selection&&h.selection.map(s.slice(l+1,f));b&&a++,r.push(new Go(p,g,b))}else r.push(new Go(p))},o);let c=[];for(let h=n;h<i;h++)c.push(new Go(s.maps[h]));let d=this.items.slice(0,o).append(c).append(r),u=new nr(d,a);return u.emptyItemCount()>b6&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=i.selection&&i.selection.map(n.slice(r));d&&s++;let u=new Go(c.invert(),l,d),h,f=o.length-1;(h=o.length&&o[f].merge(u))?o[f]=h:o.push(u)}}else i.map&&r--},this.items.length,0),new nr(ut.from(o.reverse()),s)}}nr.empty=new nr(ut.empty,0);function v6(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let Go=class hR{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new hR(n.getMap().invert(),n,this.selection)}}};class Xo{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const w6=20;function x6(t,e,n,r){let o=n.getMeta(hi),s;if(o)return o.historyState;n.getMeta(S6)&&(t=new Xo(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(hi))return i.getMeta(hi).redo?new Xo(t.done.addTransform(n,void 0,r,nh(e)),t.undone,oC(n.mapping.maps),t.prevTime,t.prevComposition):new Xo(t.done,t.undone.addTransform(n,void 0,r,nh(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!k6(n,t.prevRanges)),c=i?Xm(t.prevRanges,n.mapping):oC(n.mapping.maps);return new Xo(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,nh(e)),nr.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Xo(t.done.rebased(n,s),t.undone.rebased(n,s),Xm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Xo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Xm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function k6(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function oC(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,i)=>e.push(s,i));return e}function Xm(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function C6(t,e,n){let r=nh(e),o=hi.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),l=new Xo(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(hi,{redo:n,historyState:l})}let Qm=!1,sC=null;function nh(t){let e=t.plugins;if(sC!=e){Qm=!1,sC=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Qm=!0;break}}return Qm}const hi=new Te("history"),S6=new Te("closeHistory");function T6(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new me({key:hi,state:{init(){return new Xo(nr.empty,nr.empty,null,0,-1)},apply(e,n,r){return x6(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?a1:r=="historyRedo"?l1:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function fR(t,e){return(n,r)=>{let o=hi.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=C6(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const a1=fR(!1,!0),l1=fR(!0,!0),E6=De.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>a1(t,e),redo:()=>({state:t,dispatch:e})=>l1(t,e)}},addProseMirrorPlugins(){return[T6(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Ñ":()=>this.editor.commands.undo(),"Shift-Mod-Ñ":()=>this.editor.commands.redo()}}}),M6="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mÃ¶gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",A6="ÎµÎ»1Ï…2Ð±Ð³1ÐµÐ»3Ð´ÐµÑ‚Ð¸4ÐµÑŽ2ÐºÐ°Ñ‚Ð¾Ð»Ð¸Ðº6Ð¾Ð¼3Ð¼ÐºÐ´2Ð¾Ð½1ÑÐºÐ²Ð°6Ð¾Ð½Ð»Ð°Ð¹Ð½5Ñ€Ð³3Ñ€ÑƒÑ2Ñ„2ÑÐ°Ð¹Ñ‚3Ñ€Ð±3ÑƒÐºÑ€3Ò›Ð°Ð·3Õ°Õ¡Õµ3×™×©×¨××œ5×§×•×3Ø§Ø¨ÙˆØ¸Ø¨ÙŠ5Ø±Ø§Ù…ÙƒÙˆ5Ù„Ø§Ø±Ø¯Ù†4Ø¨Ø­Ø±ÙŠÙ†5Ø¬Ø²Ø§Ø¦Ø±5Ø³Ø¹ÙˆØ¯ÙŠØ©6Ø¹Ù„ÙŠØ§Ù†5Ù…ØºØ±Ø¨5Ù…Ø§Ø±Ø§Øª5ÛŒØ±Ø§Ù†5Ø¨Ø§Ø±Øª2Ø²Ø§Ø±4ÙŠØªÙƒ3Ú¾Ø§Ø±Øª5ØªÙˆÙ†Ø³4Ø³ÙˆØ¯Ø§Ù†3Ø±ÙŠØ©5Ø´Ø¨ÙƒØ©4Ø¹Ø±Ø§Ù‚2Ø¨2Ù…Ø§Ù†4ÙÙ„Ø³Ø·ÙŠÙ†6Ù‚Ø·Ø±3ÙƒØ§Ø«ÙˆÙ„ÙŠÙƒ6ÙˆÙ…3Ù…ØµØ±2Ù„ÙŠØ³ÙŠØ§5ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§7Ù‚Ø¹4Ù‡Ù…Ø±Ø§Ù‡5Ù¾Ø§Ú©Ø³ØªØ§Ù†7Ú€Ø§Ø±Øª4à¤•à¥‰à¤®3à¤¨à¥‡à¤Ÿ3à¤­à¤¾à¤°à¤¤0à¤®à¥3à¥‹à¤¤5à¤¸à¤‚à¤—à¤ à¤¨5à¦¬à¦¾à¦‚à¦²à¦¾5à¦­à¦¾à¦°à¦¤2à§°à¦¤4à¨­à¨¾à¨°à¨¤4àª­àª¾àª°àª¤4à¬­à¬¾à¬°à¬¤4à®‡à®¨à¯à®¤à®¿à®¯à®¾6à®²à®™à¯à®•à¯ˆ6à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯11à°­à°¾à°°à°¤à±5à²­à²¾à²°à²¤4à´­à´¾à´°à´¤à´‚5à¶½à¶‚à¶šà·4à¸„à¸­à¸¡3à¹„à¸—à¸¢3àº¥àº²àº§3áƒ’áƒ”2ã¿ã‚“ãª3ã‚¢ãƒžã‚¾ãƒ³4ã‚¯ãƒ©ã‚¦ãƒ‰4ã‚°ãƒ¼ã‚°ãƒ«4ã‚³ãƒ 2ã‚¹ãƒˆã‚¢3ã‚»ãƒ¼ãƒ«3ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³6ãƒã‚¤ãƒ³ãƒˆ4ä¸–ç•Œ2ä¸­ä¿¡1å›½1åœ‹1æ–‡ç½‘3äºšé©¬é€Š3ä¼ä¸š2ä½›å±±2ä¿¡æ¯2å¥åº·2å…«å¦2å…¬å¸1ç›Š2å°æ¹¾1ç£2å•†åŸŽ1åº—1æ ‡2å˜‰é‡Œ0å¤§é…’åº—5åœ¨çº¿2å¤§æ‹¿2å¤©ä¸»æ•™3å¨±ä¹2å®¶é›»2å¹¿ä¸œ2å¾®åš2æ…ˆå–„2æˆ‘çˆ±ä½ 3æ‰‹æœº2æ‹›è˜2æ”¿åŠ¡1åºœ2æ–°åŠ å¡2é—»2æ—¶å°š2æ›¸ç±2æœºæž„2æ·¡é©¬é”¡3æ¸¸æˆ2æ¾³é–€2ç‚¹çœ‹2ç§»åŠ¨2ç»„ç»‡æœºæž„4ç½‘å€1åº—1ç«™1ç»œ2è”é€š2è°·æ­Œ2è´­ç‰©2é€šè²©2é›†å›¢2é›»è¨Šç›ˆç§‘4é£žåˆ©æµ¦3é£Ÿå“2é¤åŽ…2é¦™æ ¼é‡Œæ‹‰3æ¸¯2ë‹·ë„·1ì»´2ì‚¼ì„±2í•œêµ­2",Da=(t,e)=>{for(const n in e)t[n]=e[n];return t},Jy="numeric",Yy="ascii",Xy="alpha",Xl="asciinumeric",$l="alphanumeric",Qy="domain",pR="emoji",R6="scheme",_6="slashscheme",eg="whitespace";function I6(t,e){return t in e||(e[t]=[]),e[t]}function oi(t,e,n){e[Jy]&&(e[Xl]=!0,e[$l]=!0),e[Yy]&&(e[Xl]=!0,e[Xy]=!0),e[Xl]&&(e[$l]=!0),e[Xy]&&(e[$l]=!0),e[$l]&&(e[Qy]=!0),e[pR]&&(e[Qy]=!0);for(const r in e){const o=I6(r,n);o.indexOf(t)<0&&o.push(t)}}function N6(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function sn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}sn.groups={};sn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||sn.groups;let o;return e&&e.j?o=e:(o=new sn(e),n&&r&&oi(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const s=t.length;if(!s)return o;for(let i=0;i<s-1;i++)o=o.tt(t[i]);return o.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||sn.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const s=e;let i,a=o.go(t);if(a?(i=new sn,Da(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new sn,s){if(r)if(i.t&&typeof i.t=="string"){const l=Da(N6(i.t,r),n);oi(s,l,r)}else n&&oi(s,n,r);i.t=s}return o.j[t]=i,i}};const fe=(t,e,n,r,o)=>t.ta(e,n,r,o),Je=(t,e,n,r,o)=>t.tr(e,n,r,o),iC=(t,e,n,r,o)=>t.ts(e,n,r,o),O=(t,e,n,r,o)=>t.tt(e,n,r,o),uo="WORD",eb="UWORD",mR="ASCIINUMERICAL",gR="ALPHANUMERICAL",Ic="LOCALHOST",tb="TLD",nb="UTLD",rh="SCHEME",sa="SLASH_SCHEME",c1="NUM",rb="WS",d1="NL",Ql="OPENBRACE",ec="CLOSEBRACE",jh="OPENBRACKET",Bh="CLOSEBRACKET",Vh="OPENPAREN",$h="CLOSEPAREN",Hh="OPENANGLEBRACKET",Fh="CLOSEANGLEBRACKET",zh="FULLWIDTHLEFTPAREN",Uh="FULLWIDTHRIGHTPAREN",Wh="LEFTCORNERBRACKET",Gh="RIGHTCORNERBRACKET",qh="LEFTWHITECORNERBRACKET",Kh="RIGHTWHITECORNERBRACKET",Zh="FULLWIDTHLESSTHAN",Jh="FULLWIDTHGREATERTHAN",Yh="AMPERSAND",Xh="APOSTROPHE",Qh="ASTERISK",Qo="AT",ef="BACKSLASH",tf="BACKTICK",nf="CARET",ss="COLON",u1="COMMA",rf="DOLLAR",Tr="DOT",of="EQUALS",h1="EXCLAMATION",Dn="HYPHEN",tc="PERCENT",sf="PIPE",af="PLUS",lf="POUND",nc="QUERY",f1="QUOTE",yR="FULLWIDTHMIDDLEDOT",p1="SEMI",Er="SLASH",rc="TILDE",cf="UNDERSCORE",bR="EMOJI",df="SYM";var vR=Object.freeze({__proto__:null,ALPHANUMERICAL:gR,AMPERSAND:Yh,APOSTROPHE:Xh,ASCIINUMERICAL:mR,ASTERISK:Qh,AT:Qo,BACKSLASH:ef,BACKTICK:tf,CARET:nf,CLOSEANGLEBRACKET:Fh,CLOSEBRACE:ec,CLOSEBRACKET:Bh,CLOSEPAREN:$h,COLON:ss,COMMA:u1,DOLLAR:rf,DOT:Tr,EMOJI:bR,EQUALS:of,EXCLAMATION:h1,FULLWIDTHGREATERTHAN:Jh,FULLWIDTHLEFTPAREN:zh,FULLWIDTHLESSTHAN:Zh,FULLWIDTHMIDDLEDOT:yR,FULLWIDTHRIGHTPAREN:Uh,HYPHEN:Dn,LEFTCORNERBRACKET:Wh,LEFTWHITECORNERBRACKET:qh,LOCALHOST:Ic,NL:d1,NUM:c1,OPENANGLEBRACKET:Hh,OPENBRACE:Ql,OPENBRACKET:jh,OPENPAREN:Vh,PERCENT:tc,PIPE:sf,PLUS:af,POUND:lf,QUERY:nc,QUOTE:f1,RIGHTCORNERBRACKET:Gh,RIGHTWHITECORNERBRACKET:Kh,SCHEME:rh,SEMI:p1,SLASH:Er,SLASH_SCHEME:sa,SYM:df,TILDE:rc,TLD:tb,UNDERSCORE:cf,UTLD:nb,UWORD:eb,WORD:uo,WS:rb});const ro=/[a-z]/,Tl=new RegExp("\\p{L}","u"),tg=new RegExp("\\p{Emoji}","u"),oo=/\d/,ng=/\s/,aC="\r",rg=`
`,D6="ï¸",P6="â€",og="ï¿¼";let wu=null,xu=null;function O6(t=[]){const e={};sn.groups=e;const n=new sn;wu==null&&(wu=lC(M6)),xu==null&&(xu=lC(A6)),O(n,"'",Xh),O(n,"{",Ql),O(n,"}",ec),O(n,"[",jh),O(n,"]",Bh),O(n,"(",Vh),O(n,")",$h),O(n,"<",Hh),O(n,">",Fh),O(n,"ï¼ˆ",zh),O(n,"ï¼‰",Uh),O(n,"ã€Œ",Wh),O(n,"ã€",Gh),O(n,"ã€Ž",qh),O(n,"ã€",Kh),O(n,"ï¼œ",Zh),O(n,"ï¼ž",Jh),O(n,"&",Yh),O(n,"*",Qh),O(n,"@",Qo),O(n,"`",tf),O(n,"^",nf),O(n,":",ss),O(n,",",u1),O(n,"$",rf),O(n,".",Tr),O(n,"=",of),O(n,"!",h1),O(n,"-",Dn),O(n,"%",tc),O(n,"|",sf),O(n,"+",af),O(n,"#",lf),O(n,"?",nc),O(n,'"',f1),O(n,"/",Er),O(n,";",p1),O(n,"~",rc),O(n,"_",cf),O(n,"\\",ef),O(n,"ãƒ»",yR);const r=Je(n,oo,c1,{[Jy]:!0});Je(r,oo,r);const o=Je(r,ro,mR,{[Xl]:!0}),s=Je(r,Tl,gR,{[$l]:!0}),i=Je(n,ro,uo,{[Yy]:!0});Je(i,oo,o),Je(i,ro,i),Je(o,oo,o),Je(o,ro,o);const a=Je(n,Tl,eb,{[Xy]:!0});Je(a,ro),Je(a,oo,s),Je(a,Tl,a),Je(s,oo,s),Je(s,ro),Je(s,Tl,s);const l=O(n,rg,d1,{[eg]:!0}),c=O(n,aC,rb,{[eg]:!0}),d=Je(n,ng,rb,{[eg]:!0});O(n,og,d),O(c,rg,l),O(c,og,d),Je(c,ng,d),O(d,aC),O(d,rg),Je(d,ng,d),O(d,og,d);const u=Je(n,tg,bR,{[pR]:!0});O(u,"#"),Je(u,tg,u),O(u,D6,u);const h=O(u,P6);O(h,"#"),Je(h,tg,u);const f=[[ro,i],[oo,o]],p=[[ro,null],[Tl,a],[oo,s]];for(let g=0;g<wu.length;g++)qo(n,wu[g],tb,uo,f);for(let g=0;g<xu.length;g++)qo(n,xu[g],nb,eb,p);oi(tb,{tld:!0,ascii:!0},e),oi(nb,{utld:!0,alpha:!0},e),qo(n,"file",rh,uo,f),qo(n,"mailto",rh,uo,f),qo(n,"http",sa,uo,f),qo(n,"https",sa,uo,f),qo(n,"ftp",sa,uo,f),qo(n,"ftps",sa,uo,f),oi(rh,{scheme:!0,ascii:!0},e),oi(sa,{slashscheme:!0,ascii:!0},e),t=t.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<t.length;g++){const b=t[g][0],x=t[g][1]?{[R6]:!0}:{[_6]:!0};b.indexOf("-")>=0?x[Qy]=!0:ro.test(b)?oo.test(b)?x[Xl]=!0:x[Yy]=!0:x[Jy]=!0,iC(n,b,b,x)}return iC(n,"localhost",Ic,{ascii:!0}),n.jd=new sn(df),{start:n,tokens:Da({groups:e},vR)}}function wR(t,e){const n=L6(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let s=0,i=0;for(;i<r;){let a=t,l=null,c=0,d=null,u=-1,h=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(u=0,h=0,d=a):u>=0&&(u+=n[i].length,h++),c+=n[i].length,s+=n[i].length,i++;s-=u,i-=h,c-=u,o.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return o}function L6(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),s,i=o<55296||o>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function qo(t,e,n,r,o){let s;const i=e.length;for(let a=0;a<i-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new sn(r),s.jr=o.slice(),t.j[l]=s),t=s}return s=new sn(n),s.jr=o.slice(),t.j[e[i-1]]=s,s}function lC(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let s=0;for(;o.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+s),10);i>0;i--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Nc={defaultProtocol:"http",events:null,format:cC,formatHref:cC,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function m1(t,e=null){let n=Da({},Nc);t&&(n=Da(n,t instanceof m1?t.o:t));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}m1.prototype={o:Nc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:Nc[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function cC(t){return t}function xR(t,e){this.t="token",this.v=t,this.tk=e}xR.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"â€¦":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Nc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),s=this.toFormattedString(t),i={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),u=t.getObj("events",n,e);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),d&&Da(i,d),{tagName:o,attributes:i,content:s,eventListeners:u}}};function vp(t,e){class n extends xR{constructor(o,s){super(o,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const dC=vp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),uC=vp("text"),j6=vp("nl"),ku=vp("url",{isLink:!0,toHref(t=Nc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ic&&t[1].t===ss}}),Rn=t=>new sn(t);function B6({groups:t}){const e=t.domain.concat([Yh,Qh,Qo,ef,tf,nf,rf,of,Dn,c1,tc,sf,af,lf,Er,df,rc,cf]),n=[Xh,ss,u1,Tr,h1,tc,nc,f1,p1,Hh,Fh,Ql,ec,Bh,jh,Vh,$h,zh,Uh,Wh,Gh,qh,Kh,Zh,Jh],r=[Yh,Xh,Qh,ef,tf,nf,rf,of,Dn,Ql,ec,tc,sf,af,lf,nc,Er,df,rc,cf],o=Rn(),s=O(o,rc);fe(s,r,s),fe(s,t.domain,s);const i=Rn(),a=Rn(),l=Rn();fe(o,t.domain,i),fe(o,t.scheme,a),fe(o,t.slashscheme,l),fe(i,r,s),fe(i,t.domain,i);const c=O(i,Qo);O(s,Qo,c),O(a,Qo,c),O(l,Qo,c);const d=O(s,Tr);fe(d,r,s),fe(d,t.domain,s);const u=Rn();fe(c,t.domain,u),fe(u,t.domain,u);const h=O(u,Tr);fe(h,t.domain,u);const f=Rn(dC);fe(h,t.tld,f),fe(h,t.utld,f),O(c,Ic,f);const p=O(u,Dn);O(p,Dn,p),fe(p,t.domain,u),fe(f,t.domain,u),O(f,Tr,h),O(f,Dn,p);const g=O(f,ss);fe(g,t.numeric,dC);const b=O(i,Dn),v=O(i,Tr);O(b,Dn,b),fe(b,t.domain,i),fe(v,r,s),fe(v,t.domain,i);const x=Rn(ku);fe(v,t.tld,x),fe(v,t.utld,x),fe(x,t.domain,i),fe(x,r,s),O(x,Tr,v),O(x,Dn,b),O(x,Qo,c);const w=O(x,ss),k=Rn(ku);fe(w,t.numeric,k);const C=Rn(ku),S=Rn();fe(C,e,C),fe(C,n,S),fe(S,e,C),fe(S,n,S),O(x,Er,C),O(k,Er,C);const T=O(a,ss),E=O(l,ss),M=O(E,Er),R=O(M,Er);fe(a,t.domain,i),O(a,Tr,v),O(a,Dn,b),fe(l,t.domain,i),O(l,Tr,v),O(l,Dn,b),fe(T,t.domain,C),O(T,Er,C),O(T,nc,C),fe(R,t.domain,C),fe(R,e,C),O(R,Er,C);const I=[[Ql,ec],[jh,Bh],[Vh,$h],[Hh,Fh],[zh,Uh],[Wh,Gh],[qh,Kh],[Zh,Jh]];for(let L=0;L<I.length;L++){const[$,F]=I[L],z=O(C,$);O(S,$,z),O(z,F,C);const J=Rn(ku);fe(z,e,J);const P=Rn();fe(z,n),fe(J,e,J),fe(J,n,P),fe(P,e,J),fe(P,n,P),O(J,F,C),O(P,F,C)}return O(o,Ic,x),O(o,d1,j6),{start:o,tokens:vR}}function V6(t,e,n){let r=n.length,o=0,s=[],i=[];for(;o<r;){let a=t,l=null,c=null,d=0,u=null,h=-1;for(;o<r&&!(l=a.go(n[o].t));)i.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(h=0,u=a):h>=0&&h++,o++,d++;if(h<0)o-=d,o<r&&(i.push(n[o]),o++);else{i.length>0&&(s.push(sg(uC,e,i)),i=[]),o-=h,d-=h;const f=u.t,p=n.slice(o-d,o);s.push(sg(f,e,p))}}return i.length>0&&s.push(sg(uC,e,i)),s}function sg(t,e,n){const r=n[0].s,o=n[n.length-1].e,s=e.slice(r,o);return new t(s,n)}const $6=typeof console<"u"&&console&&console.warn||(()=>{}),H6="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",$e={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function F6(){return sn.groups={},$e.scanner=null,$e.parser=null,$e.tokenQueue=[],$e.pluginQueue=[],$e.customSchemes=[],$e.initialized=!1,$e}function hC(t,e=!1){if($e.initialized&&$6(`linkifyjs: already initialized - will not register custom scheme "${t}" ${H6}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);$e.customSchemes.push([t,e])}function z6(){$e.scanner=O6($e.customSchemes);for(let t=0;t<$e.tokenQueue.length;t++)$e.tokenQueue[t][1]({scanner:$e.scanner});$e.parser=B6($e.scanner.tokens);for(let t=0;t<$e.pluginQueue.length;t++)$e.pluginQueue[t][1]({scanner:$e.scanner,parser:$e.parser});return $e.initialized=!0,$e}function g1(t){return $e.initialized||z6(),V6($e.parser.start,t,wR($e.scanner.start,t))}g1.scan=wR;function kR(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new m1(n),o=g1(t),s=[];for(let i=0;i<o.length;i++){const a=o[i];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}function U6(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function W6(t){return new me({key:new Te("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!o||s)return;const{tr:i}=r,a=Q0(n.doc,[...e]);if(e1(a).forEach(({newRange:c})=>{const d=Ph(r.doc,c,f=>f.isTextblock);let u,h;if(d.length>1?(u=d[0],h=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ")):d.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(u=d[0],h=r.doc.textBetween(u.pos,c.to,void 0," ")),u&&h){const f=h.split(" ").filter(v=>v!=="");if(f.length<=0)return!1;const p=f[f.length-1],g=u.pos+h.lastIndexOf(p);if(!p)return!1;const b=g1(p).map(v=>v.toObject(t.defaultProtocol));if(!U6(b))return!1;b.filter(v=>v.isLink).map(v=>({...v,from:g+v.start+1,to:g+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{t1(v.from,v.to,r.doc).some(x=>x.mark.type===t.type)||i.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!i.steps.length)return i}})}function G6(t){return new me({key:new Te("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let i=r.target;const a=[];for(;i.nodeName!=="DIV";)a.push(i),i=i.parentNode;if(!a.find(h=>h.nodeName==="A"))return!1;const l=WA(e.state,t.type.name),c=r.target,d=(o=c==null?void 0:c.href)!==null&&o!==void 0?o:l.href,u=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&d?(window.open(d,u),!0):!1}}})}function q6(t){return new me({key:new Te("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:s}=o,{empty:i}=s;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=kR(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}const K6=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Fs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(K6,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Z6=Et.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){hC(t);return}hC(t.scheme,t.optionalSlashes)})},onDestroy(){F6()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Fs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Fs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Fs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",kn(this.options.HTMLAttributes,t),0]:["a",kn(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Fs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Fs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ci({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=kR(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:i=>!!Fs(i,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(W6({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!Fs(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(G6({type:this.type})),this.options.linkOnPaste&&t.push(q6({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),J6=Kr.create({name:"text",group:"inline"}),Un=()=>new Map,ob=t=>{const e=Un();return t.forEach((n,r)=>{e.set(r,n)}),e},Yr=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},Y6=(t,e)=>{const n=[];for(const[r,o]of t)n.push(e(o,r));return n},X6=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Ti=()=>new Set,ig=t=>t[t.length-1],Q6=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Ei=Array.from,eH=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},sb=Array.isArray;class CR{constructor(){this._observers=Un()}on(e,n){return Yr(this._observers,e,Ti).add(n),n}once(e,n){const r=(...o)=>{this.off(e,r),n(...o)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Ei((this._observers.get(e)||Un()).values()).forEach(r=>r(...n))}destroy(){this._observers=Un()}}const Mo=Math.floor,oh=Math.abs,So=(t,e)=>t<e?t:e,ur=(t,e)=>t>e?t:e,SR=t=>t!==0?t<0:1/t<0,fC=1,pC=2,ag=4,lg=8,Dc=32,To=64,Gt=128,tH=1<<29,wp=31,ib=63,fi=127,nH=2147483647,TR=Number.MAX_SAFE_INTEGER,rH=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Mo(t)===t),oH=String.fromCharCode,sH=t=>t.toLowerCase(),iH=/^\s*/g,aH=t=>t.replace(iH,""),lH=/([A-Z])/g,mC=(t,e)=>aH(t.replace(lH,n=>`${e}${sH(n)}`)),cH=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.codePointAt(o);return r},Pc=typeof TextEncoder<"u"?new TextEncoder:null,dH=t=>Pc.encode(t),uH=Pc?dH:cH;let oc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});oc&&oc.decode(new Uint8Array).length===1&&(oc=null);class Cd{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Sd=()=>new Cd,hH=t=>{const e=Sd();return t(e),rr(e)},fH=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},rr=t=>{const e=new Uint8Array(fH(t));let n=0;for(let r=0;r<t.bufs.length;r++){const o=t.bufs[r];e.set(o,n),n+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},pH=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(ur(n,e)*2),t.cpos=0)},lt=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},ab=lt,Se=(t,e)=>{for(;e>fi;)lt(t,Gt|fi&e),e=Mo(e/128);lt(t,fi&e)},y1=(t,e)=>{const n=SR(e);for(n&&(e=-e),lt(t,(e>ib?Gt:0)|(n?To:0)|ib&e),e=Mo(e/64);e>0;)lt(t,(e>fi?Gt:0)|fi&e),e=Mo(e/128)},lb=new Uint8Array(3e4),mH=lb.length/3,gH=(t,e)=>{if(e.length<mH){const n=Pc.encodeInto(e,lb).written||0;Se(t,n);for(let r=0;r<n;r++)lt(t,lb[r])}else gn(t,uH(e))},yH=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Se(t,r);for(let o=0;o<r;o++)lt(t,n.codePointAt(o))},ya=Pc&&Pc.encodeInto?gH:yH,xp=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=So(n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(ur(n*2,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},gn=(t,e)=>{Se(t,e.byteLength),xp(t,e)},b1=(t,e)=>{pH(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},bH=(t,e)=>b1(t,4).setFloat32(0,e,!1),vH=(t,e)=>b1(t,8).setFloat64(0,e,!1),wH=(t,e)=>b1(t,8).setBigInt64(0,e,!1),gC=new DataView(new ArrayBuffer(4)),xH=t=>(gC.setFloat32(0,t),gC.getFloat32(0)===t),Pa=(t,e)=>{switch(typeof e){case"string":lt(t,119),ya(t,e);break;case"number":rH(e)&&oh(e)<=nH?(lt(t,125),y1(t,e)):xH(e)?(lt(t,124),bH(t,e)):(lt(t,123),vH(t,e));break;case"bigint":lt(t,122),wH(t,e);break;case"object":if(e===null)lt(t,126);else if(sb(e)){lt(t,117),Se(t,e.length);for(let n=0;n<e.length;n++)Pa(t,e[n])}else if(e instanceof Uint8Array)lt(t,116),gn(t,e);else{lt(t,118);const n=Object.keys(e);Se(t,n.length);for(let r=0;r<n.length;r++){const o=n[r];ya(t,o),Pa(t,e[o])}}break;case"boolean":lt(t,e?120:121);break;default:lt(t,127)}};class yC extends Cd{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Se(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const bC=t=>{t.count>0&&(y1(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Se(t.encoder,t.count-2))};class sh{constructor(){this.encoder=new Cd,this.s=0,this.count=0}write(e){this.s===e?this.count++:(bC(this),this.count=1,this.s=e)}toUint8Array(){return bC(this),rr(this.encoder)}}const vC=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);y1(t.encoder,e),t.count>1&&Se(t.encoder,t.count-2)}};class cg{constructor(){this.encoder=new Cd,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(vC(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return vC(this),rr(this.encoder)}}class kH{constructor(){this.sarr=[],this.s="",this.lensE=new sh}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Cd;return this.sarr.push(this.s),this.s="",ya(e,this.sarr.join("")),xp(e,this.lensE.toUint8Array()),rr(e)}}const xs=t=>new Error(t),ir=()=>{throw xs("Method unimplemented")},Cn=()=>{throw xs("Unexpected case")},ER=xs("Unexpected end of array"),MR=xs("Integer out of Range");class kp{constructor(e){this.arr=e,this.pos=0}}const qa=t=>new kp(t),CH=t=>t.pos!==t.arr.length,SH=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},yn=t=>SH(t,ge(t)),Oa=t=>t.arr[t.pos++],ge=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const o=t.arr[t.pos++];if(e=e+(o&fi)*n,n*=128,o<Gt)return e;if(e>TR)throw MR}throw ER},v1=t=>{let e=t.arr[t.pos++],n=e&ib,r=64;const o=(e&To)>0?-1:1;if((e&Gt)===0)return o*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&fi)*r,r*=128,e<Gt)return o*n;if(n>TR)throw MR}throw ER},TH=t=>{let e=ge(t);if(e===0)return"";{let n=String.fromCodePoint(Oa(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Oa(t));else for(;e>0;){const r=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,o),e-=r}return decodeURIComponent(escape(n))}},EH=t=>oc.decode(yn(t)),ba=oc?EH:TH,w1=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},MH=t=>w1(t,4).getFloat32(0,!1),AH=t=>w1(t,8).getFloat64(0,!1),RH=t=>w1(t,8).getBigInt64(0,!1),_H=[t=>{},t=>null,v1,MH,AH,RH,t=>!1,t=>!0,ba,t=>{const e=ge(t),n={};for(let r=0;r<e;r++){const o=ba(t);n[o]=Oc(t)}return n},t=>{const e=ge(t),n=[];for(let r=0;r<e;r++)n.push(Oc(t));return n},yn],Oc=t=>_H[127-Oa(t)](t);class wC extends kp{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),CH(this)?this.count=ge(this)+1:this.count=-1),this.count--,this.s}}class ih extends kp{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=v1(this);const e=SR(this.s);this.count=1,e&&(this.s=-this.s,this.count=ge(this)+2)}return this.count--,this.s}}class dg extends kp{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=v1(this),n=e&1;this.diff=Mo(e/2),this.count=1,n&&(this.count=ge(this)+2)}return this.s+=this.diff,this.count--,this.s}}class IH{constructor(e){this.decoder=new ih(e),this.str=ba(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const NH=crypto.getRandomValues.bind(crypto),DH=Math.random,AR=()=>NH(new Uint32Array(1))[0],PH=t=>t[Mo(DH()*t.length)],OH="10000000-1000-4000-8000"+-1e11,LH=()=>OH.replace(/[018]/g,t=>(t^AR()&15>>t/4).toString(16)),jH=Date.now,xC=t=>new Promise(t);Promise.all.bind(Promise);const kC=t=>t===void 0?null:t;class BH{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let RR=new BH,VH=!0;try{typeof localStorage<"u"&&localStorage&&(RR=localStorage,VH=!1)}catch{}const $H=RR,HH=Object.assign,_R=Object.keys,FH=(t,e)=>{for(const n in t)e(t[n],n)},CC=t=>_R(t).length,zH=t=>{for(const e in t)return!1;return!0},IR=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},UH=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),WH=(t,e)=>t===e||CC(t)===CC(e)&&IR(t,(n,r)=>(n!==void 0||UH(e,r))&&e[r]===n),GH=Object.freeze,NR=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&NR(t[e])}return GH(t)},x1=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&x1(t,e,n+1)}},qH=t=>t,KH=(t,e)=>e.includes(t);var DR={};const La=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",PR=typeof window<"u"&&typeof document<"u"&&!La;let Cr;const ZH=()=>{if(Cr===void 0)if(La){Cr=Un();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Cr.set(e,""),e=r):e!==null&&(Cr.set(e,r),e=null)}e!==null&&Cr.set(e,"")}else typeof location=="object"?(Cr=Un(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Cr.set(`--${mC(e,"-")}`,n),Cr.set(`-${mC(e,"-")}`,n)}})):Cr=Un();return Cr},cb=t=>ZH().has(t),uf=t=>kC(La?DR[t.toUpperCase().replaceAll("-","_")]:$H.getItem(t)),OR=t=>cb("--"+t)||uf(t)!==null;OR("production");const JH=La&&KH(DR.FORCE_COLOR,["true","1","2"]),YH=JH||!cb("--no-colors")&&!OR("no-color")&&(!La||process.stdout.isTTY)&&(!La||cb("--color")||uf("COLORTERM")!==null||(uf("TERM")||"").includes("color")),XH=t=>new Uint8Array(t),QH=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=oH(t[n]);return btoa(e)},eF=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),tF=PR?QH:eF,nF=t=>{const e=XH(t.byteLength);return e.set(t),e},rF=t=>hH(e=>Pa(e,t));class oF{constructor(e,n){this.left=e,this.right=n}}const so=(t,e)=>new oF(t,e),sF=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const iF=t=>Y6(t,(e,n)=>`${n}:${e};`).join(""),aF=t=>class{constructor(n){this._=n}destroy(){t(this._)}},lF=aF(clearTimeout),k1=(t,e)=>new lF(setTimeout(e,t)),Do=Symbol,LR=Do(),jR=Do(),cF=Do(),dF=Do(),uF=Do(),BR=Do(),hF=Do(),C1=Do(),fF=Do(),pF=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},mF={[LR]:so("font-weight","bold"),[jR]:so("font-weight","normal"),[cF]:so("color","blue"),[uF]:so("color","green"),[dF]:so("color","grey"),[BR]:so("color","red"),[hF]:so("color","purple"),[C1]:so("color","orange"),[fF]:so("color","black")},gF=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[],r=Un();let o=[],s=0;for(;s<t.length;s++){const a=t[s],l=mF[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=iF(r);s>0||c.length>0?(e.push("%c"+a),n.push(c)):e.push(a)}else break}}for(s>0&&(o=n,o.unshift(e.join("")));s<t.length;s++){const a=t[s];a instanceof Symbol||o.push(a)}return o},VR=YH?gF:pF,yF=(...t)=>{console.log(...VR(t)),HR.forEach(e=>e.print(t))},$R=(...t)=>{console.warn(...VR(t)),t.unshift(C1),HR.forEach(e=>e.print(t))},HR=Ti(),FR=t=>({[Symbol.iterator](){return this},next:t}),bF=(t,e)=>FR(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),ug=(t,e)=>FR(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class S1{constructor(e,n){this.clock=e,this.len=n}}class Ka{constructor(){this.clients=new Map}}const ks=(t,e,n)=>e.clients.forEach((r,o)=>{const s=t.doc.store.clients.get(o);if(s!=null){const i=s[s.length-1],a=i.id.clock+i.length;for(let l=0,c=r[l];l<r.length&&c.clock<a;c=r[++l])QR(t,s,c.clock,c.len,n)}}),vF=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const o=Mo((n+r)/2),s=t[o],i=s.clock;if(i<=e){if(e<i+s.len)return o;n=o+1}else r=o-1}return null},Za=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&vF(n,e.clock)!==null},T1=t=>{t.clients.forEach(e=>{e.sort((o,s)=>o.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const o=e[r-1],s=e[n];o.clock+o.len>=s.clock?o.len=ur(o.len,s.clock+s.len-o.clock):(r<n&&(e[r]=s),r++)}e.length=r})},db=t=>{const e=new Ka;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let i=n+1;i<t.length;i++)Q6(s,t[i].clients.get(o)||[]);e.clients.set(o,s)}});return T1(e),e},Lc=(t,e,n,r)=>{Yr(t.clients,e,()=>[]).push(new S1(n,r))},zR=()=>new Ka,UR=t=>{const e=zR();return t.clients.forEach((n,r)=>{const o=[];for(let s=0;s<n.length;s++){const i=n[s];if(i.deleted){const a=i.id.clock;let l=i.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])l+=c.length;o.push(new S1(a,l))}}o.length>0&&e.clients.set(r,o)}),e},Ja=(t,e)=>{Se(t.restEncoder,e.clients.size),Ei(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Se(t.restEncoder,n);const o=r.length;Se(t.restEncoder,o);for(let s=0;s<o;s++){const i=r[s];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},E1=t=>{const e=new Ka,n=ge(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const o=ge(t.restDecoder),s=ge(t.restDecoder);if(s>0){const i=Yr(e.clients,o,()=>[]);for(let a=0;a<s;a++)i.push(new S1(t.readDsClock(),t.readDsLen()))}}return e},SC=(t,e,n)=>{const r=new Ka,o=ge(t.restDecoder);for(let s=0;s<o;s++){t.resetDsCurVal();const i=ge(t.restDecoder),a=ge(t.restDecoder),l=n.clients.get(i)||[],c=tt(n,i);for(let d=0;d<a;d++){const u=t.readDsClock(),h=u+t.readDsLen();if(u<c){c<h&&Lc(r,i,c,h-c);let f=Gn(l,u),p=l[f];for(!p.deleted&&p.id.clock<u&&(l.splice(f+1,0,bf(e,p,u-p.id.clock)),f++);f<l.length&&(p=l[f++],p.id.clock<h);)p.deleted||(h<p.id.clock+p.length&&l.splice(f,0,bf(e,p,h-p.id.clock)),p.delete(e))}else Lc(r,i,u,h-u)}}if(r.clients.size>0){const s=new Mi;return Se(s.restEncoder,0),Ja(s,r),s.toUint8Array()}return null},WR=AR;class Ds extends CR{constructor({guid:e=LH(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:s=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=WR(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new YR,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=xC(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>xC(c=>{const d=u=>{(u===void 0||u===!0)&&(this.off("sync",d),c())};this.on("sync",d)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ie(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ei(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Ie(this,e,n)}get(e,n=ht){const r=Yr(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),o=r.constructor;if(n!==ht&&o!==n)if(o===ht){const s=new n;s._map=r._map,r._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=s}),s._start=r._start;for(let i=s._start;i!==null;i=i.right)i.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,xa)}getText(e=""){return this.get(e,Cs)}getMap(e=""){return this.get(e,Ba)}getXmlElement(e=""){return this.get(e,Ut)}getXmlFragment(e=""){return this.get(e,Ai)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Ei(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Ds({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Ie(e.parent.doc,r=>{const o=n.doc;e.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class GR{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ge(this.restDecoder)}readDsLen(){return ge(this.restDecoder)}}class qR extends GR{readLeftID(){return de(ge(this.restDecoder),ge(this.restDecoder))}readRightID(){return de(ge(this.restDecoder),ge(this.restDecoder))}readClient(){return ge(this.restDecoder)}readInfo(){return Oa(this.restDecoder)}readString(){return ba(this.restDecoder)}readParentInfo(){return ge(this.restDecoder)===1}readTypeRef(){return ge(this.restDecoder)}readLen(){return ge(this.restDecoder)}readAny(){return Oc(this.restDecoder)}readBuf(){return nF(yn(this.restDecoder))}readJSON(){return JSON.parse(ba(this.restDecoder))}readKey(){return ba(this.restDecoder)}}class wF{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ge(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ge(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class ja extends wF{constructor(e){super(e),this.keys=[],ge(e),this.keyClockDecoder=new dg(yn(e)),this.clientDecoder=new ih(yn(e)),this.leftClockDecoder=new dg(yn(e)),this.rightClockDecoder=new dg(yn(e)),this.infoDecoder=new wC(yn(e),Oa),this.stringDecoder=new IH(yn(e)),this.parentInfoDecoder=new wC(yn(e),Oa),this.typeRefDecoder=new ih(yn(e)),this.lenDecoder=new ih(yn(e))}readLeftID(){return new va(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new va(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Oc(this.restDecoder)}readBuf(){return yn(this.restDecoder)}readJSON(){return Oc(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class xF{constructor(){this.restEncoder=Sd()}toUint8Array(){return rr(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Se(this.restEncoder,e)}writeDsLen(e){Se(this.restEncoder,e)}}class Td extends xF{writeLeftID(e){Se(this.restEncoder,e.client),Se(this.restEncoder,e.clock)}writeRightID(e){Se(this.restEncoder,e.client),Se(this.restEncoder,e.clock)}writeClient(e){Se(this.restEncoder,e)}writeInfo(e){ab(this.restEncoder,e)}writeString(e){ya(this.restEncoder,e)}writeParentInfo(e){Se(this.restEncoder,e?1:0)}writeTypeRef(e){Se(this.restEncoder,e)}writeLen(e){Se(this.restEncoder,e)}writeAny(e){Pa(this.restEncoder,e)}writeBuf(e){gn(this.restEncoder,e)}writeJSON(e){ya(this.restEncoder,JSON.stringify(e))}writeKey(e){ya(this.restEncoder,e)}}class kF{constructor(){this.restEncoder=Sd(),this.dsCurrVal=0}toUint8Array(){return rr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Se(this.restEncoder,n)}writeDsLen(e){e===0&&Cn(),Se(this.restEncoder,e-1),this.dsCurrVal+=e}}class Mi extends kF{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new cg,this.clientEncoder=new sh,this.leftClockEncoder=new cg,this.rightClockEncoder=new cg,this.infoEncoder=new yC(ab),this.stringEncoder=new kH,this.parentInfoEncoder=new yC(ab),this.typeRefEncoder=new sh,this.lenEncoder=new sh}toUint8Array(){const e=Sd();return Se(e,0),gn(e,this.keyClockEncoder.toUint8Array()),gn(e,this.clientEncoder.toUint8Array()),gn(e,this.leftClockEncoder.toUint8Array()),gn(e,this.rightClockEncoder.toUint8Array()),gn(e,rr(this.infoEncoder)),gn(e,this.stringEncoder.toUint8Array()),gn(e,rr(this.parentInfoEncoder)),gn(e,this.typeRefEncoder.toUint8Array()),gn(e,this.lenEncoder.toUint8Array()),xp(e,rr(this.restEncoder)),rr(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Pa(this.restEncoder,e)}writeBuf(e){gn(this.restEncoder,e)}writeJSON(e){Pa(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const CF=(t,e,n,r)=>{r=ur(r,e[0].id.clock);const o=Gn(e,r);Se(t.restEncoder,e.length-o),t.writeClient(n),Se(t.restEncoder,r);const s=e[o];s.write(t,r-s.id.clock);for(let i=o+1;i<e.length;i++)e[i].write(t,0)},M1=(t,e,n)=>{const r=new Map;n.forEach((o,s)=>{tt(e,s)>o&&r.set(s,o)}),Cp(e).forEach((o,s)=>{n.has(s)||r.set(s,0)}),Se(t.restEncoder,r.size),Ei(r.entries()).sort((o,s)=>s[0]-o[0]).forEach(([o,s])=>{CF(t,e.clients.get(o),o,s)})},SF=(t,e)=>{const n=Un(),r=ge(t.restDecoder);for(let o=0;o<r;o++){const s=ge(t.restDecoder),i=new Array(s),a=t.readClient();let l=ge(t.restDecoder);n.set(a,{i:0,refs:i});for(let c=0;c<s;c++){const d=t.readInfo();switch(wp&d){case 0:{const u=t.readLen();i[c]=new $n(de(a,l),u),l+=u;break}case 10:{const u=ge(t.restDecoder);i[c]=new Hn(de(a,l),u),l+=u;break}default:{const u=(d&(To|Gt))===0,h=new Me(de(a,l),null,(d&Gt)===Gt?t.readLeftID():null,null,(d&To)===To?t.readRightID():null,u?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,u&&(d&Dc)===Dc?t.readString():null,x_(t,d));i[c]=h,l+=h.length}}}}return n},TF=(t,e,n)=>{const r=[];let o=Ei(n.keys()).sort((f,p)=>f-p);if(o.length===0)return null;const s=()=>{if(o.length===0)return null;let f=n.get(o[o.length-1]);for(;f.refs.length===f.i;)if(o.pop(),o.length>0)f=n.get(o[o.length-1]);else return null;return f};let i=s();if(i===null)return null;const a=new YR,l=new Map,c=(f,p)=>{const g=l.get(f);(g==null||g>p)&&l.set(f,p)};let d=i.refs[i.i++];const u=new Map,h=()=>{for(const f of r){const p=f.id.client,g=n.get(p);g?(g.i--,a.clients.set(p,g.refs.slice(g.i)),n.delete(p),g.i=0,g.refs=[]):a.clients.set(p,[f]),o=o.filter(b=>b!==p)}r.length=0};for(;;){if(d.constructor!==Hn){const p=Yr(u,d.id.client,()=>tt(e,d.id.client))-d.id.clock;if(p<0)r.push(d),c(d.id.client,d.id.clock-1),h();else{const g=d.getMissing(t,e);if(g!==null){r.push(d);const b=n.get(g)||{refs:[],i:0};if(b.refs.length===b.i)c(g,tt(e,g)),h();else{d=b.refs[b.i++];continue}}else(p===0||p<d.length)&&(d.integrate(t,p),u.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(i!==null&&i.i<i.refs.length)d=i.refs[i.i++];else{if(i=s(),i===null)break;d=i.refs[i.i++]}}if(a.clients.size>0){const f=new Mi;return M1(f,a,new Map),Se(f.restEncoder,0),{missing:l,update:f.toUint8Array()}}return null},EF=(t,e)=>M1(t,e.doc.store,e.beforeState),MF=(t,e,n,r=new ja(t))=>Ie(e,o=>{o.local=!1;let s=!1;const i=o.doc,a=i.store,l=SF(r,i),c=TF(o,a,l),d=a.pendingStructs;if(d){for(const[h,f]of d.missing)if(f<tt(a,h)){s=!0;break}if(c){for(const[h,f]of c.missing){const p=d.missing.get(h);(p==null||p>f)&&d.missing.set(h,f)}d.update=ff([d.update,c.update])}}else a.pendingStructs=c;const u=SC(r,o,a);if(a.pendingDs){const h=new ja(qa(a.pendingDs));ge(h.restDecoder);const f=SC(h,o,a);u&&f?a.pendingDs=ff([u,f]):a.pendingDs=u||f}else a.pendingDs=u;if(s){const h=a.pendingStructs.update;a.pendingStructs=null,hf(o.doc,h)}},n,!1),hf=(t,e,n,r=ja)=>{const o=qa(e);MF(o,t,n,new r(o))},TC=(t,e,n)=>hf(t,e,n,qR),AF=(t,e,n=new Map)=>{M1(t,e.store,n),Ja(t,UR(e.store))},RF=(t,e=new Uint8Array([0]),n=new Mi)=>{const r=KR(e);AF(n,t,r);const o=[n.toUint8Array()];if(t.store.pendingDs&&o.push(t.store.pendingDs),t.store.pendingStructs&&o.push(WF(t.store.pendingStructs.update,e)),o.length>1){if(n.constructor===Td)return zF(o.map((s,i)=>i===0?s:qF(s)));if(n.constructor===Mi)return ff(o)}return o[0]},EC=(t,e)=>RF(t,e,new Td),_F=t=>{const e=new Map,n=ge(t.restDecoder);for(let r=0;r<n;r++){const o=ge(t.restDecoder),s=ge(t.restDecoder);e.set(o,s)}return e},KR=t=>_F(new GR(qa(t)));class IF{constructor(){this.l=[]}}const MC=()=>new IF,AC=(t,e)=>t.l.push(e),RC=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(o=>e!==o),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ZR=(t,e,n)=>x1(t.l,[e,n]);class va{constructor(e,n){this.client=e,this.clock=n}}const aa=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,de=(t,e)=>new va(t,e),jc=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Cn()},Bc=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Vc{constructor(e,n,r,o=0){this.type=e,this.tname=n,this.item=r,this.assoc=o}}const sc=t=>new Vc(t.type==null?null:de(t.type.client,t.type.clock),t.tname??null,t.item==null?null:de(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class NF{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const DF=(t,e,n=0)=>new NF(t,e,n),Cu=(t,e,n)=>{let r=null,o=null;return t._item===null?o=jc(t):r=de(t._item.id.client,t._item.id.clock),new Vc(r,o,e,n)},hg=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return Cu(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return Cu(t,de(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return Cu(t,r.lastId,n);r=r.right}return Cu(t,null,n)},PF=(t,e)=>{const n=wa(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},OF=(t,e,n=!0)=>{const r=e.store,o=t.item,s=t.type,i=t.tname,a=t.assoc;let l=null,c=0;if(o!==null){if(tt(r,o.client)<=o.clock)return null;const d=n?pb(r,o):PF(r,o),u=d.item;if(!(u instanceof Me))return null;if(l=u.parent,l._item===null||!l._item.deleted){c=u.deleted||!u.countable?0:d.diff+(a>=0?0:1);let h=u.left;for(;h!==null;)!h.deleted&&h.countable&&(c+=h.length),h=h.left}}else{if(i!==null)l=e.get(i);else if(s!==null){if(tt(r,s.client)<=s.clock)return null;const{item:d}=n?pb(r,s):{item:wa(r,s)};if(d instanceof Me&&d.content instanceof br)l=d.content.type;else return null}else throw Cn();a>=0?c=l._length:c=0}return DF(l,c,t.assoc)},_C=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&aa(t.item,e.item)&&aa(t.type,e.type)&&t.assoc===e.assoc;class A1{constructor(e,n){this.ds=e,this.sv=n}}const JR=(t,e)=>new A1(t,e),fg=t=>JR(UR(t.store),Cp(t.store)),Ys=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!Za(e.ds,t.id),ub=(t,e)=>{const n=Yr(t.meta,ub,Ti),r=t.doc.store;n.has(e)||(e.sv.forEach((o,s)=>{o<tt(r,s)&&an(t,de(s,o))}),ks(t,e.ds,o=>{}),n.add(e))};class YR{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Cp=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const o=n[n.length-1];e.set(r,o.id.clock+o.length)}),e},tt=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},XR=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Cn()}n.push(e)},Gn=(t,e)=>{let n=0,r=t.length-1,o=t[r],s=o.id.clock;if(s===e)return r;let i=Mo(e/(s+o.length-1)*r);for(;n<=r;){if(o=t[i],s=o.id.clock,s<=e){if(e<s+o.length)return i;n=i+1}else r=i-1;i=Mo((n+r)/2)}throw Cn()},LF=(t,e)=>{const n=t.clients.get(e.client);return n[Gn(n,e.clock)]},wa=LF,hb=(t,e,n)=>{const r=Gn(e,n),o=e[r];return o.id.clock<n&&o instanceof Me?(e.splice(r+1,0,bf(t,o,n-o.id.clock)),r+1):r},an=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[hb(t,n,e.clock)]},IC=(t,e,n)=>{const r=e.clients.get(n.client),o=Gn(r,n.clock),s=r[o];return n.clock!==s.id.clock+s.length-1&&s.constructor!==$n&&r.splice(o+1,0,bf(t,s,n.clock-s.id.clock+1)),s},jF=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Gn(r,e.id.clock)]=n},QR=(t,e,n,r,o)=>{if(r===0)return;const s=n+r;let i=hb(t,e,n),a;do a=e[i++],s<a.id.clock+a.length&&hb(t,e,s),o(a);while(i<e.length&&e[i].id.clock<s)};class BF{constructor(e,n,r){this.doc=e,this.deleteSet=new Ka,this.beforeState=Cp(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const NC=(t,e)=>e.deleteSet.clients.size===0&&!X6(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(T1(e.deleteSet),EF(t,e),Ja(t,e.deleteSet),!0),DC=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Yr(t.changed,e,Ti).add(n)},ah=(t,e)=>{let n=t[e],r=t[e-1],o=e;for(;o>0;n=r,r=t[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Me&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-o;return s&&t.splice(e+1-s,s),s},VF=(t,e,n)=>{for(const[r,o]of t.clients.entries()){const s=e.clients.get(r);for(let i=o.length-1;i>=0;i--){const a=o[i],l=a.clock+a.len;for(let c=Gn(s,a.clock),d=s[c];c<s.length&&d.id.clock<l;d=s[++c]){const u=s[c];if(a.clock+a.len<=u.id.clock)break;u instanceof Me&&u.deleted&&!u.keep&&n(u)&&u.gc(e,!1)}}}},$F=(t,e)=>{t.clients.forEach((n,r)=>{const o=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const i=n[s],a=So(o.length-1,1+Gn(o,i.clock+i.len-1));for(let l=a,c=o[l];l>0&&c.id.clock>=i.clock;c=o[l])l-=1+ah(o,l)}})},e_=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,o=r.store,s=n.deleteSet,i=n._mergeStructs;try{T1(s),n.afterState=Cp(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=c,d._path=null}),l.sort((d,u)=>d.path.length-u.path.length),ZR(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),x1(a,[]),n._needFormattingCleanup&&az(n)}finally{r.gc&&VF(s,o,r.gcFilter),$F(s,o),n.afterState.forEach((d,u)=>{const h=n.beforeState.get(u)||0;if(h!==d){const f=o.clients.get(u),p=ur(Gn(f,h),1);for(let g=f.length-1;g>=p;)g-=1+ah(f,g)}});for(let d=i.length-1;d>=0;d--){const{client:u,clock:h}=i[d].id,f=o.clients.get(u),p=Gn(f,h);p+1<f.length&&ah(f,p+1)>1||p>0&&ah(f,p)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(yF(C1,LR,"[yjs] ",jR,BR,"Changed the client-id because another client seems to be using it."),r.clientID=WR()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new Td;NC(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new Mi;NC(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),c.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):e_(t,e+1)}}},Ie=(t,e,n=null,r=!0)=>{const o=t._transactionCleanups;let s=!1,i=null;t._transaction===null&&(s=!0,t._transaction=new BF(t,n,r),o.push(t._transaction),o.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(s){const a=t._transaction===o[0];t._transaction=null,a&&e_(o,0)}}return i};class HF{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const PC=(t,e,n)=>{ks(t,n.deletions,r=>{r instanceof Me&&e.scope.some(o=>o===t.doc||Bc(o,r))&&L1(r,!1)})},OC=(t,e,n)=>{let r=null;const o=t.doc,s=t.scope;Ie(o,a=>{for(;e.length>0&&t.currStackItem===null;){const l=o.store,c=e.pop(),d=new Set,u=[];let h=!1;ks(a,c.insertions,f=>{if(f instanceof Me){if(f.redone!==null){let{item:p,diff:g}=pb(l,f.id);g>0&&(p=an(a,de(p.id.client,p.id.clock+g))),f=p}!f.deleted&&s.some(p=>p===a.doc||Bc(p,f))&&u.push(f)}}),ks(a,c.deletions,f=>{f instanceof Me&&s.some(p=>p===a.doc||Bc(p,f))&&!Za(c.insertions,f.id)&&d.add(f)}),d.forEach(f=>{h=w_(a,f,d,c.insertions,t.ignoreRemoteMapChanges,t)!==null||h});for(let f=u.length-1;f>=0;f--){const p=u[f];t.deleteFilter(p)&&(p.delete(a),h=!0)}t.currStackItem=h?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},t);const i=t.currStackItem;if(i!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:i,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return i};class t_ extends CR{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=sb(e)?e[0].doc:e instanceof Ds?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=o,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(b=>l.changedParentTypes.has(b)||b===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,d=this.redoing,u=c?this.redoStack:this.undoStack;c?this.stopCapturing():d||this.clear(!1,!0);const h=new Ka;l.afterState.forEach((b,v)=>{const x=l.beforeState.get(v)||0,w=b-x;w>0&&Lc(h,v,x,w)});const f=jH();let p=!1;if(this.lastChange>0&&f-this.lastChange<this.captureTimeout&&u.length>0&&!c&&!d){const b=u[u.length-1];b.deletions=db([b.deletions,l.deleteSet]),b.insertions=db([b.insertions,h])}else u.push(new HF(l.deleteSet,h)),p=!0;!c&&!d&&(this.lastChange=f),ks(l,l.deleteSet,b=>{b instanceof Me&&this.scope.some(v=>v===l.doc||Bc(v,b))&&L1(b,!0)});const g=[{stackItem:u[u.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];p?this.emit("stack-item-added",g):this.emit("stack-item-updated",g)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=sb(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof ht?r.doc!==this.doc:r!==this.doc)&&$R("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(o=>PC(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>PC(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=OC(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=OC(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*FF(t){const e=ge(t.restDecoder);for(let n=0;n<e;n++){const r=ge(t.restDecoder),o=t.readClient();let s=ge(t.restDecoder);for(let i=0;i<r;i++){const a=t.readInfo();if(a===10){const l=ge(t.restDecoder);yield new Hn(de(o,s),l),s+=l}else if((wp&a)!==0){const l=(a&(To|Gt))===0,c=new Me(de(o,s),null,(a&Gt)===Gt?t.readLeftID():null,null,(a&To)===To?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&Dc)===Dc?t.readString():null,x_(t,a));yield c,s+=c.length}else{const l=t.readLen();yield new $n(de(o,s),l),s+=l}}}}class R1{constructor(e,n){this.gen=FF(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Hn);return this.curr}}class _1{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const zF=t=>ff(t,qR,Td),UF=(t,e)=>{if(t.constructor===$n){const{client:n,clock:r}=t.id;return new $n(de(n,r+e),t.length-e)}else if(t.constructor===Hn){const{client:n,clock:r}=t.id;return new Hn(de(n,r+e),t.length-e)}else{const n=t,{client:r,clock:o}=n.id;return new Me(de(r,o+e),null,de(r,o+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},ff=(t,e=ja,n=Mi)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(qa(d)));let o=r.map(d=>new R1(d,!0)),s=null;const i=new n,a=new _1(i);for(;o=o.filter(h=>h.curr!==null),o.sort((h,f)=>{if(h.curr.id.client===f.curr.id.client){const p=h.curr.id.clock-f.curr.id.clock;return p===0?h.curr.constructor===f.curr.constructor?0:h.curr.constructor===Hn?1:-1:p}else return f.curr.id.client-h.curr.id.client}),o.length!==0;){const d=o[0],u=d.curr.id.client;if(s!==null){let h=d.curr,f=!1;for(;h!==null&&h.id.clock+h.length<=s.struct.id.clock+s.struct.length&&h.id.client>=s.struct.id.client;)h=d.next(),f=!0;if(h===null||h.id.client!==u||f&&h.id.clock>s.struct.id.clock+s.struct.length)continue;if(u!==s.struct.id.client)is(a,s.struct,s.offset),s={struct:h,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<h.id.clock)if(s.struct.constructor===Hn)s.struct.length=h.id.clock+h.length-s.struct.id.clock;else{is(a,s.struct,s.offset);const p=h.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Hn(de(u,s.struct.id.clock+s.struct.length),p),offset:0}}else{const p=s.struct.id.clock+s.struct.length-h.id.clock;p>0&&(s.struct.constructor===Hn?s.struct.length-=p:h=UF(h,p)),s.struct.mergeWith(h)||(is(a,s.struct,s.offset),s={struct:h,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let h=d.curr;h!==null&&h.id.client===u&&h.id.clock===s.struct.id.clock+s.struct.length&&h.constructor!==Hn;h=d.next())is(a,s.struct,s.offset),s={struct:h,offset:0}}s!==null&&(is(a,s.struct,s.offset),s=null),I1(a);const l=r.map(d=>E1(d)),c=db(l);return Ja(i,c),i.toUint8Array()},WF=(t,e,n=ja,r=Mi)=>{const o=KR(e),s=new r,i=new _1(s),a=new n(qa(t)),l=new R1(a,!1);for(;l.curr;){const d=l.curr,u=d.id.client,h=o.get(u)||0;if(l.curr.constructor===Hn){l.next();continue}if(d.id.clock+d.length>h)for(is(i,d,ur(h-d.id.clock,0)),l.next();l.curr&&l.curr.id.client===u;)is(i,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===u&&l.curr.id.clock+l.curr.length<=h;)l.next()}I1(i);const c=E1(a);return Ja(s,c),s.toUint8Array()},n_=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:rr(t.encoder.restEncoder)}),t.encoder.restEncoder=Sd(),t.written=0)},is=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&n_(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Se(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},I1=t=>{n_(t);const e=t.encoder.restEncoder;Se(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Se(e,r.written),xp(e,r.restEncoder)}},GF=(t,e,n,r)=>{const o=new n(qa(t)),s=new R1(o,!1),i=new r,a=new _1(i);for(let c=s.curr;c!==null;c=s.next())is(a,e(c),0);I1(a);const l=E1(o);return Ja(i,l),i.toUint8Array()},qF=t=>GF(t,qH,ja,Td),LC="You must not compute changes after the event-handler fired.";class Sp{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=KF(this.currentTarget,this.target))}deletes(e){return Za(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw xs(LC);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const s=n._map.get(o);let i,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))i="delete",a=ig(l.content.getContent());else return;else l!==null&&this.deletes(l)?(i="update",a=ig(l.content.getContent())):(i="add",a=void 0)}else if(this.deletes(s))i="delete",a=ig(s.content.getContent());else return;e.set(o,{action:i,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw xs(LC);const n=this.target,r=Ti(),o=Ti(),s=[];if(e={added:r,deleted:o,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,o.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const KF=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,o=e._item.parent._start;for(;o!==e._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}e=e._item.parent}return n},Ot=()=>{$R("Invalid access: Add Yjs type to a document before reading data.")},r_=80;let N1=0;class ZF{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=N1++}}const JF=t=>{t.timestamp=N1++},o_=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=N1++},YF=(t,e,n)=>{if(t.length>=r_){const r=t.reduce((o,s)=>o.timestamp<s.timestamp?o:s);return o_(r,e,n),r}else{const r=new ZF(e,n);return t.push(r),r}},Tp=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,i)=>oh(e-s.index)<oh(e-i.index)?s:i);let r=t._start,o=0;for(n!==null&&(r=n.p,o=n.index,JF(n));r.right!==null&&o<e;){if(!r.deleted&&r.countable){if(e<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>e;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&oh(n.index-o)<r.parent.length/r_?(o_(n,r,o),n):YF(t._searchMarker,r,o)},$c=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const o=t[r];if(n>0){let s=o.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(o.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}o.p=s,s.marker=!0}(e<o.index||n>0&&e===o.index)&&(o.index=ur(e,o.index+n))}},Ep=(t,e,n)=>{const r=t,o=e.changedParentTypes;for(;Yr(o,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;ZR(r._eH,n,e)};class ht{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=MC(),this._dEH=MC(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw ir()}clone(){throw ir()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){AC(this._eH,e)}observeDeep(e){AC(this._dEH,e)}unobserve(e){RC(this._eH,e)}unobserveDeep(e){RC(this._dEH,e)}toJSON(){}}const s_=(t,e,n)=>{t.doc??Ot(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const o=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const i=s.content.getContent();if(i.length<=e)e-=i.length;else{for(let a=e;a<i.length&&r>0;a++)o.push(i[a]),r--;e=0}}s=s.right}return o},i_=t=>{t.doc??Ot();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)e.push(r[o])}n=n.right}return e},a_=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&Ys(r,e)){const o=r.content.getContent();for(let s=0;s<o.length;s++)n.push(o[s])}r=r.right}return n},Hc=(t,e)=>{let n=0,r=t._start;for(t.doc??Ot();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let s=0;s<o.length;s++)e(o[s],n++,t)}r=r.right}},l_=(t,e)=>{const n=[];return Hc(t,(r,o)=>{n.push(e(r,o,t))}),n},XF=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},c_=(t,e)=>{t.doc??Ot();const n=Tp(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},pf=(t,e,n,r)=>{let o=n;const s=t.doc,i=s.clientID,a=s.store,l=n===null?e._start:n.right;let c=[];const d=()=>{c.length>0&&(o=new Me(de(i,tt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Ri(c)),o.integrate(t,0),c=[])};r.forEach(u=>{if(u===null)c.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(u);break;default:switch(d(),u.constructor){case Uint8Array:case ArrayBuffer:o=new Me(de(i,tt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Ed(new Uint8Array(u))),o.integrate(t,0);break;case Ds:o=new Me(de(i,tt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Md(u)),o.integrate(t,0);break;default:if(u instanceof ht)o=new Me(de(i,tt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new br(u)),o.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},d_=()=>xs("Length exceeded!"),u_=(t,e,n,r)=>{if(n>e._length)throw d_();if(n===0)return e._searchMarker&&$c(e._searchMarker,n,r.length),pf(t,e,null,r);const o=n,s=Tp(e,n);let i=e._start;for(s!==null&&(i=s.p,n-=s.index,n===0&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&an(t,de(i.id.client,i.id.clock+n));break}n-=i.length}return e._searchMarker&&$c(e._searchMarker,o,r.length),pf(t,e,i,r)},QF=(t,e,n)=>{let o=(e._searchMarker||[]).reduce((s,i)=>i.index>s.index?i:s,{index:0,p:e._start}).p;if(o)for(;o.right;)o=o.right;return pf(t,e,o,n)},h_=(t,e,n,r)=>{if(r===0)return;const o=n,s=r,i=Tp(e,n);let a=e._start;for(i!==null&&(a=i.p,n-=i.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&an(t,de(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&an(t,de(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw d_();e._searchMarker&&$c(e._searchMarker,o,-s+r)},mf=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},D1=(t,e,n,r)=>{const o=e._map.get(n)||null,s=t.doc,i=s.clientID;let a;if(r==null)a=new Ri([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Ri([r]);break;case Uint8Array:a=new Ed(r);break;case Ds:a=new Md(r);break;default:if(r instanceof ht)a=new br(r);else throw new Error("Unexpected content type")}new Me(de(i,tt(s.store,i)),o,o&&o.lastId,null,null,e,n,a).integrate(t,0)},P1=(t,e)=>{t.doc??Ot();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},f_=t=>{const e={};return t.doc??Ot(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},p_=(t,e)=>{t.doc??Ot();const n=t._map.get(e);return n!==void 0&&!n.deleted},ez=(t,e)=>{const n={};return t._map.forEach((r,o)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&Ys(s,e)&&(n[o]=s.content.getContent()[s.length-1])}),n},Su=t=>(t.doc??Ot(),bF(t._map.entries(),e=>!e[1].deleted));class tz extends Sp{}class xa extends ht{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new xa;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new xa}clone(){const e=new xa;return e.insert(0,this.toArray().map(n=>n instanceof ht?n.clone():n)),e}get length(){return this.doc??Ot(),this._length}_callObserver(e,n){super._callObserver(e,n),Ep(this,e,new tz(this,e))}insert(e,n){this.doc!==null?Ie(this.doc,r=>{u_(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Ie(this.doc,n=>{QF(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Ie(this.doc,r=>{h_(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return c_(this,e)}toArray(){return i_(this)}slice(e=0,n=this.length){return s_(this,e,n)}toJSON(){return this.map(e=>e instanceof ht?e.toJSON():e)}map(e){return l_(this,e)}forEach(e){Hc(this,e)}[Symbol.iterator](){return XF(this)}_write(e){e.writeTypeRef(Ez)}}const nz=t=>new xa;class rz extends Sp{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Ba extends ht{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new Ba}clone(){const e=new Ba;return this.forEach((n,r)=>{e.set(r,n instanceof ht?n.clone():n)}),e}_callObserver(e,n){Ep(this,e,new rz(this,e,n))}toJSON(){this.doc??Ot();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];e[r]=o instanceof ht?o.toJSON():o}}),e}get size(){return[...Su(this)].length}keys(){return ug(Su(this),e=>e[0])}values(){return ug(Su(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return ug(Su(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Ot(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ie(this.doc,n=>{mf(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Ie(this.doc,r=>{D1(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return P1(this,e)}has(e){return p_(this,e)}clear(){this.doc!==null?Ie(this.doc,e=>{this.forEach(function(n,r,o){mf(e,o,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Mz)}}const oz=t=>new Ba,us=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&WH(t,e);class fb{constructor(e,n,r,o){this.left=e,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&Cn(),this.right.content.constructor){case it:this.right.deleted||Ya(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const jC=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case it:e.right.deleted||Ya(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&an(t,de(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Tu=(t,e,n,r)=>{const o=new Map,s=r?Tp(e,n):null;if(s){const i=new fb(s.p.left,s.p,s.index,o);return jC(t,i,n-s.index)}else{const i=new fb(null,e._start,0,o);return jC(t,i,n)}},m_=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===it&&us(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=t.doc,s=o.clientID;r.forEach((i,a)=>{const l=n.left,c=n.right,d=new Me(de(s,tt(o.store,s)),l,l&&l.lastId,c,c&&c.id,e,null,new it(a,i));d.integrate(t,0),n.right=d,n.forward()})},Ya=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},g_=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===it&&us(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},y_=(t,e,n,r)=>{const o=t.doc,s=o.clientID,i=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!us(c,l)){i.set(a,c);const{left:d,right:u}=n;n.right=new Me(de(s,tt(o.store,s)),d,d&&d.lastId,u,u&&u.id,e,null,new it(a,l)),n.right.integrate(t,0),n.forward()}}return i},pg=(t,e,n,r,o)=>{n.currentAttributes.forEach((h,f)=>{o[f]===void 0&&(o[f]=null)});const s=t.doc,i=s.clientID;g_(n,o);const a=y_(t,e,n,o),l=r.constructor===String?new hr(r):r instanceof ht?new br(r):new ji(r);let{left:c,right:d,index:u}=n;e._searchMarker&&$c(e._searchMarker,n.index,l.getLength()),d=new Me(de(i,tt(s.store,i)),c,c&&c.lastId,d,d&&d.id,e,null,l),d.integrate(t,0),n.right=d,n.index=u,n.forward(),m_(t,e,n,a)},BC=(t,e,n,r,o)=>{const s=t.doc,i=s.clientID;g_(n,o);const a=y_(t,e,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===it));){if(!n.right.deleted)switch(n.right.content.constructor){case it:{const{key:l,value:c}=n.right.content,d=o[l];if(d!==void 0){if(us(d,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&an(t,de(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Me(de(i,tt(s.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new hr(l)),n.right.integrate(t,0),n.forward()}m_(t,e,n,a)},b_=(t,e,n,r,o)=>{let s=e;const i=Un();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===it){const c=s.content;i.set(c.key,c)}s=s.right}let a=0,l=!1;for(;e!==s;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case it:{const{key:d,value:u}=c,h=r.get(d)??null;(i.get(d)!==c||h===u)&&(e.delete(t),a++,!l&&(o.get(d)??null)===u&&h!==u&&(h===null?o.delete(d):o.set(d,h))),!l&&!e.deleted&&Ya(o,c);break}}}e=e.right}return a},sz=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===it){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},iz=t=>{let e=0;return Ie(t.doc,n=>{let r=t._start,o=t._start,s=Un();const i=ob(s);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case it:Ya(i,o.content);break;default:e+=b_(n,r,o,s,i),s=ob(i),r=o;break}o=o.right}}),e},az=t=>{const e=new Set,n=t.doc;for(const[r,o]of t.afterState.entries()){const s=t.beforeState.get(r)||0;o!==s&&QR(t,n.store.clients.get(r),s,o,i=>{!i.deleted&&i.content.constructor===it&&i.constructor!==$n&&e.add(i.parent)})}Ie(n,r=>{ks(t,t.deleteSet,o=>{if(o instanceof $n||!o.parent._hasFormatting||e.has(o.parent))return;const s=o.parent;o.content.constructor===it?e.add(s):sz(r,o)});for(const o of e)iz(o)})},VC=(t,e,n)=>{const r=n,o=ob(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case br:case ji:case hr:n<e.right.length&&an(t,de(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&b_(t,s,e.right,o,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&$c(i._searchMarker,e.index,-r+n),e};class lz extends Sp{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Ie(e,r=>{const o=new Map,s=new Map;let i=this.target._start,a=null;const l={};let c="",d=0,u=0;const h=()=>{if(a!==null){let f=null;switch(a){case"delete":u>0&&(f={delete:u}),u=0;break;case"insert":(typeof c=="object"||c.length>0)&&(f={insert:c},o.size>0&&(f.attributes={},o.forEach((p,g)=>{p!==null&&(f.attributes[g]=p)}))),c="";break;case"retain":d>0&&(f={retain:d},zH(l)||(f.attributes=HH({},l))),d=0;break}f&&n.push(f),a=null}};for(;i!==null;){switch(i.content.constructor){case br:case ji:this.adds(i)?this.deletes(i)||(h(),a="insert",c=i.content.getContent()[0],h()):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),u+=1):i.deleted||(a!=="retain"&&(h(),a="retain"),d+=1);break;case hr:this.adds(i)?this.deletes(i)||(a!=="insert"&&(h(),a="insert"),c+=i.content.str):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),u+=i.length):i.deleted||(a!=="retain"&&(h(),a="retain"),d+=i.length);break;case it:{const{key:f,value:p}=i.content;if(this.adds(i)){if(!this.deletes(i)){const g=o.get(f)??null;us(g,p)?p!==null&&i.delete(r):(a==="retain"&&h(),us(p,s.get(f)??null)?delete l[f]:l[f]=p)}}else if(this.deletes(i)){s.set(f,p);const g=o.get(f)??null;us(g,p)||(a==="retain"&&h(),l[f]=g)}else if(!i.deleted){s.set(f,p);const g=l[f];g!==void 0&&(us(g,p)?g!==null&&i.delete(r):(a==="retain"&&h(),p===null?delete l[f]:l[f]=p))}i.deleted||(a==="insert"&&h(),Ya(o,i.content));break}}i=i.right}for(h();n.length>0;){const f=n[n.length-1];if(f.retain!==void 0&&f.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Cs extends ht{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Ot(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Cs}clone(){const e=new Cs;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new lz(this,e,n);Ep(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Ot();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===hr&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Ie(this.doc,r=>{const o=new fb(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const i=e[s];if(i.insert!==void 0){const a=!n&&typeof i.insert=="string"&&s===e.length-1&&o.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof a!="string"||a.length>0)&&pg(r,this,o,a,i.attributes||{})}else i.retain!==void 0?BC(r,this,o,i.retain,i.attributes||{}):i.delete!==void 0&&VC(r,o,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??Ot();const o=[],s=new Map,i=this.doc;let a="",l=this._start;function c(){if(a.length>0){const u={};let h=!1;s.forEach((p,g)=>{h=!0,u[g]=p});const f={insert:a};h&&(f.attributes=u),o.push(f),a=""}}const d=()=>{for(;l!==null;){if(Ys(l,e)||n!==void 0&&Ys(l,n))switch(l.content.constructor){case hr:{const u=s.get("ychange");e!==void 0&&!Ys(l,e)?(u===void 0||u.user!==l.id.client||u.type!=="removed")&&(c(),s.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!Ys(l,n)?(u===void 0||u.user!==l.id.client||u.type!=="added")&&(c(),s.set("ychange",r?r("added",l.id):{type:"added"})):u!==void 0&&(c(),s.delete("ychange")),a+=l.content.str;break}case br:case ji:{c();const u={insert:l.content.getContent()[0]};if(s.size>0){const h={};u.attributes=h,s.forEach((f,p)=>{h[p]=f})}o.push(u);break}case it:Ys(l,e)&&(c(),Ya(s,l.content));break}l=l.right}c()};return e||n?Ie(i,u=>{e&&ub(u,e),n&&ub(u,n),d()},"cleanup"):d(),o}insert(e,n,r){if(n.length<=0)return;const o=this.doc;o!==null?Ie(o,s=>{const i=Tu(s,this,e,!r);r||(r={},i.currentAttributes.forEach((a,l)=>{r[l]=a})),pg(s,this,i,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const o=this.doc;o!==null?Ie(o,s=>{const i=Tu(s,this,e,!r);pg(s,this,i,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Ie(r,o=>{VC(o,Tu(o,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const o=this.doc;o!==null?Ie(o,s=>{const i=Tu(s,this,e,!1);i.right!==null&&BC(s,this,i,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Ie(this.doc,n=>{mf(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Ie(this.doc,r=>{D1(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return P1(this,e)}getAttributes(){return f_(this)}_write(e){e.writeTypeRef(Az)}}const cz=t=>new Cs;class mg{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Ot()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Ut||n.constructor===Ai)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Ai extends ht{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ai}clone(){const e=new Ai;return e.insert(0,this.toArray().map(n=>n instanceof ht?n.clone():n)),e}get length(){return this.doc??Ot(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new mg(this,e)}querySelector(e){e=e.toUpperCase();const r=new mg(this,o=>o.nodeName&&o.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Ei(new mg(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Ep(this,e,new hz(this,n,e))}toString(){return l_(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const o=e.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),Hc(this,s=>{o.insertBefore(s.toDOM(e,n,r),null)}),o}insert(e,n){this.doc!==null?Ie(this.doc,r=>{u_(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Ie(this.doc,r=>{const o=e&&e instanceof ht?e._item:e;pf(r,this,o,n)});else{const r=this._prelimContent,o=e===null?0:r.findIndex(s=>s===e)+1;if(o===0&&e!==null)throw xs("Reference item not found");r.splice(o,0,...n)}}delete(e,n=1){this.doc!==null?Ie(this.doc,r=>{h_(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return i_(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return c_(this,e)}slice(e=0,n=this.length){return s_(this,e,n)}forEach(e){Hc(this,e)}_write(e){e.writeTypeRef(_z)}}const dz=t=>new Ai;class Ut extends Ai{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new Ut(this.nodeName)}clone(){const e=new Ut(this.nodeName),n=this.getAttributes();return FH(n,(r,o)=>{typeof r=="string"&&e.setAttribute(o,r)}),e.insert(0,this.toArray().map(r=>r instanceof ht?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),i=n.length>0?" "+n.join(" "):"";return`<${s}${i}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?Ie(this.doc,n=>{mf(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Ie(this.doc,r=>{D1(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return P1(this,e)}hasAttribute(e){return p_(this,e)}getAttributes(e){return e?ez(this,e):f_(this)}toDOM(e=document,n={},r){const o=e.createElement(this.nodeName),s=this.getAttributes();for(const i in s){const a=s[i];typeof a=="string"&&o.setAttribute(i,a)}return Hc(this,i=>{o.appendChild(i.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(Rz),e.writeKey(this.nodeName)}}const uz=t=>new Ut(t.readKey());class hz extends Sp{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class gf extends Ba{constructor(e){super(),this.hookName=e}_copy(){return new gf(this.hookName)}clone(){const e=new gf(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const o=n[this.hookName];let s;return o!==void 0?s=o.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(Iz),e.writeKey(this.hookName)}}const fz=t=>new gf(t.readKey());class xn extends Cs{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new xn}clone(){const e=new xn;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const o=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(e=>{const n=[];for(const o in e.attributes){const s=[];for(const i in e.attributes[o])s.push({key:i,value:e.attributes[o][i]});s.sort((i,a)=>i.key<a.key?-1:1),n.push({nodeName:o,attrs:s})}n.sort((o,s)=>o.nodeName<s.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const s=n[o];r+=`<${s.nodeName}`;for(let i=0;i<s.attrs.length;i++){const a=s.attrs[i];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Nz)}}const pz=t=>new xn;class O1{constructor(e,n){this.id=e,this.length=n}get deleted(){throw ir()}mergeWith(e){return!1}write(e,n,r){throw ir()}integrate(e,n){throw ir()}}const mz=0;class $n extends O1{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),XR(e.doc.store,this)}write(e,n){e.writeInfo(mz),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Ed{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ed(this.content)}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const gz=t=>new Ed(t.readBuf());class Fc{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Fc(this.len)}splice(e){const n=new Fc(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Lc(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const yz=t=>new Fc(t.readLen()),v_=(t,e)=>new Ds({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Md{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Md(v_(this.doc.guid,this.opts))}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const bz=t=>new Md(v_(t.readString(),t.readAny()));class ji{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ji(this.embed)}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const vz=t=>new ji(t.readJSON());class it{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new it(this.key,this.value)}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const wz=t=>new it(t.readKey(),t.readJSON());class yf{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new yf(this.arr)}splice(e){const n=new yf(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const xz=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const o=t.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new yf(n)},kz=uf("node_env")==="development";class Ri{constructor(e){this.arr=e,kz&&NR(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ri(this.arr)}splice(e){const n=new Ri(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeAny(s)}}getRef(){return 8}}const Cz=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Ri(n)};class hr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new hr(this.str)}splice(e){const n=new hr(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"ï¿½",n.str="ï¿½"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Sz=t=>new hr(t.readString()),Tz=[nz,oz,cz,uz,dz,fz,pz],Ez=0,Mz=1,Az=2,Rz=3,_z=4,Iz=5,Nz=6;class br{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new br(this.type._copy())}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const Dz=t=>new br(Tz[t.readTypeRef()](t)),pb=(t,e)=>{let n=e,r=0,o;do r>0&&(n=de(n.client,n.clock+r)),o=wa(t,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof Me);return{item:o,diff:r}},L1=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},bf=(t,e,n)=>{const{client:r,clock:o}=e.id,s=new Me(de(r,o+n),e,de(r,o+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=de(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},$C=(t,e)=>eH(t,n=>Za(n.deletions,e)),w_=(t,e,n,r,o,s)=>{const i=t.doc,a=i.store,l=i.clientID,c=e.redone;if(c!==null)return an(t,c);let d=e.parent._item,u=null,h;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||w_(t,d,n,r,o,s)===null))return null;for(;d.redone!==null;)d=an(t,d.redone)}const f=d===null?e.parent:d.content.type;if(e.parentSub===null){for(u=e.left,h=e;u!==null;){let v=u;for(;v!==null&&v.parent._item!==d;)v=v.redone===null?null:an(t,v.redone);if(v!==null&&v.parent._item===d){u=v;break}u=u.left}for(;h!==null;){let v=h;for(;v!==null&&v.parent._item!==d;)v=v.redone===null?null:an(t,v.redone);if(v!==null&&v.parent._item===d){h=v;break}h=h.right}}else if(h=null,e.right&&!o){for(u=e;u!==null&&u.right!==null&&(u.right.redone||Za(r,u.right.id)||$C(s.undoStack,u.right.id)||$C(s.redoStack,u.right.id));)for(u=u.right;u.redone;)u=an(t,u.redone);if(u&&u.right!==null)return null}else u=f._map.get(e.parentSub)||null;const p=tt(a,l),g=de(l,p),b=new Me(g,u,u&&u.lastId,h,h&&h.id,f,e.parentSub,e.content.copy());return e.redone=g,L1(b,!0),b.integrate(t,0),b};class Me extends O1{constructor(e,n,r,o,s,i,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=s,this.parent=i,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?pC:0}set marker(e){(this.info&lg)>0!==e&&(this.info^=lg)}get marker(){return(this.info&lg)>0}get keep(){return(this.info&fC)>0}set keep(e){this.keep!==e&&(this.info^=fC)}get countable(){return(this.info&pC)>0}get deleted(){return(this.info&ag)>0}set deleted(e){this.deleted!==e&&(this.info^=ag)}markDeleted(){this.info|=ag}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=tt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=tt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===va&&this.id.client!==this.parent.client&&this.parent.clock>=tt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=IC(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=an(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===$n||this.right&&this.right.constructor===$n)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Me?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Me&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===va){const r=wa(n,this.parent);r.constructor===$n?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=IC(e,e.doc.store,de(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const s=new Set,i=new Set;for(;o!==null&&o!==this.right;){if(i.add(o),s.add(o),aa(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,s.clear();else if(aa(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&i.has(wa(e.doc.store,o.origin)))s.has(wa(e.doc.store,o.origin))||(r=o,s.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),XR(e.doc.store,this),this.content.integrate(e,this),DC(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new $n(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:de(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&aa(e.origin,this.lastId)&&this.right===e&&aa(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Lc(e.deleteSet,this.id.client,this.id.clock,this.length),DC(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Cn();this.content.gc(e),n?jF(e,this,new $n(this.id,this.length)):this.content=new Fc(this.length)}write(e,n){const r=n>0?de(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,s=this.parentSub,i=this.content.getRef()&wp|(r===null?0:Gt)|(o===null?0:To)|(s===null?0:Dc);if(e.writeInfo(i),r!==null&&e.writeLeftID(r),o!==null&&e.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=jc(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===va?(e.writeParentInfo(!1),e.writeLeftID(a)):Cn();s!==null&&e.writeString(s)}this.content.write(e,n)}}const x_=(t,e)=>Pz[e&wp](t),Pz=[()=>{Cn()},yz,xz,gz,Sz,vz,wz,Dz,Cz,bz,()=>{Cn()}],Oz=10;class Hn extends O1{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Cn()}write(e,n){e.writeInfo(Oz),Se(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const k_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},C_="__ $YJS$ __";k_[C_]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");k_[C_]=!0;const Lz=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},jz=/[\uD800-\uDBFF]/,Bz=/[\uDC00-\uDFFF]/,Vz=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&jz.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&Bz.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},$z=Vz,Ee=new Te("y-sync"),Ir=new Te("y-undo"),Hl=new Te("yjs-cursor"),Nr=(t,e)=>t>>>e|t<<32-e,Hz=t=>Nr(t,2)^Nr(t,13)^Nr(t,22),Fz=t=>Nr(t,6)^Nr(t,11)^Nr(t,25),zz=t=>Nr(t,7)^Nr(t,18)^t>>>3,Uz=t=>Nr(t,17)^Nr(t,19)^t>>>10,Wz=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Gz=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class qz{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(Gz),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let u=16;u<64;u++)n[u]=Uz(n[u-2])+n[u-7]+zz(n[u-15])+n[u-16];let r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],l=e[5],c=e[6],d=e[7];for(let u=0,h,f;u<64;u++)h=d+Fz(a)+(a&l^~a&c)+Wz[u]+n[u]>>>0,f=Hz(r)+(r&o^r&s^o&s)>>>0,d=c,c=l,l=a,a=i+h>>>0,i=s,s=o,o=r,r=h+f>>>0;e[0]+=r,e[1]+=o,e[2]+=s,e[3]+=i,e[4]+=a,e[5]+=l,e[6]+=c,e[7]+=d}digest(e){let n=0;for(;n+56<=e.length;){let i=0;for(;i<16&&n+3<e.length;i++)this._W[i]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,i,16);n<e.length;)this._W[i]|=e[n]<<(3-n%4)*8,n++;this._W[i]|=Gt<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<e.length;o++)for(let i=3;i>=0&&n<e.length;i--)this._W[o]|=e[n++]<<i*8;r||(this._W[o-(n%4===0?0:1)]|=Gt<<(3-n%4)*8),this._W[14]=e.byteLength/tH,this._W[15]=e.byteLength*8,this._updateHash();const s=new Uint8Array(32);for(let i=0;i<this._H.length;i++)for(let a=0;a<4;a++)s[i*4+a]=this._H[i]>>>(3-a)*8;return s}}const Kz=t=>new qz().digest(t),Zz=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},Jz=t=>tF(Zz(Kz(rF(t)))),vf=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!Za(e.ds,t.id),Yz=[{light:"#ecd44433",dark:"#ecd444"}],Xz=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Ti();t.forEach(o=>r.add(o)),e=e.filter(o=>!r.has(o))}t.set(n,PH(e))}return t.get(n)},Qz=(t,{colors:e=Yz,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:s}={})=>{let i=!1;const a=new tU(t,s),l=new me({props:{editable:c=>{const d=Ee.getState(c);return d.snapshot==null&&d.prevSnapshot==null}},key:Ee,state:{init:(c,d)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,d)=>{const u=c.getMeta(Ee);if(u!==void 0){d=Object.assign({},d);for(const h in u)d[h]=u[h]}return d.addToHistory=c.getMeta("addToHistory")!==!1,d.isChangeOrigin=u!==void 0&&!!u.isChangeOrigin,d.isUndoRedoOperation=u!==void 0&&!!u.isChangeOrigin&&!!u.isUndoRedoOperation,a.prosemirrorView!==null&&u!==void 0&&(u.snapshot!=null||u.prevSnapshot!=null)&&k1(0,()=>{a.prosemirrorView!=null&&(u.restore==null?a._renderSnapshot(u.snapshot,u.prevSnapshot,d):(a._renderSnapshot(u.snapshot,u.snapshot,d),delete d.restore,delete d.snapshot,delete d.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),d}},view:c=>(a.initView(c),s==null&&a._forceRerender(),o(),{update:()=>{const d=l.getState(c.state);if(d.snapshot==null&&d.prevSnapshot==null&&(i||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(i=!0,d.addToHistory===!1&&!d.isChangeOrigin){const u=Ir.getState(c.state),h=u&&u.undoManager;h&&h.stopCapturing()}a.mux(()=>{d.doc.transact(u=>{u.meta.set("addToHistory",d.addToHistory),a._prosemirrorChanged(c.state.doc)},Ee)})}},destroy:()=>{a.destroy()}})});return l},eU=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new cn(t.doc));else if(e.type==="node"){const r=pi(n.doc,n.type,e.anchor,n.mapping);t.setSelection(q.create(t.doc,r))}else{const r=pi(n.doc,n.type,e.anchor,n.mapping),o=pi(n.doc,n.type,e.head,n.mapping);r!==null&&o!==null&&t.setSelection(U.between(t.doc.resolve(r),t.doc.resolve(o)))}},wf=(t,e)=>({type:e.selection.jsonID,anchor:Uc(e.selection.anchor,t.type,t.mapping),head:Uc(e.selection.head,t.type,t.mapping)});class tU{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=Lz(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=wf(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(PR&&this._domSelectionInView===null&&(k1(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),s=sF.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||s.clientWidth||0)&&o.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,n){n||(n=JR(zR(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Ee,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>lh(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(_.from(e),0,0));n.setMeta(Ee,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>lh(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(_.from(n),0,0));if(e){const o=So(ur(e.anchor,0),r.doc.content.size),s=So(ur(e.head,0),r.doc.content.size);r.setSelection(U.create(r.doc,o,s))}this.prosemirrorView.dispatch(r.setMeta(Ee,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let o=this.doc,s=this.type;if(e||(e=fg(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&Cn(),o=new Ds({gc:!1}),hf(o,n),n=fg(o),hf(o,e),e=fg(o),s._item===null){const i=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);s=o.getXmlFragment(i)}else{const i=o.store.clients.get(s._item.id.client)??[],a=Gn(i,s._item.id.clock);s=i[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(i=>{const a=r.permanentUserData;a&&a.dss.forEach(u=>{ks(i,u,h=>{})});const l=(u,h)=>{const f=u==="added"?a.getUserByClientId(h.client):a.getUserByDeletedId(h);return{user:f,type:u,color:Xz(r.colorMapping,r.colors,f)}},c=a_(s,new A1(n.ds,e.sv)).map(u=>!u._item.deleted||vf(u._item,e)||vf(u._item,n)?lh(u,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(u=>u!==null),d=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(_.from(c),0,0));this.prosemirrorView.dispatch(d.setMeta(Ee,{isChangeOrigin:!0}))},Ee)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=Ee.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);ks(n,n.deleteSet,a=>{if(a.constructor===Me){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const s=this.type.toArray().map(a=>S_(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let i=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(_.from(s),0,0));eU(i,this.beforeTransactionSelection,this),i=i.setMeta(Ee,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof t_}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&i.scrollIntoView(),this.prosemirrorView.dispatch(i)})}_prosemirrorChanged(e){this.doc.transact(()=>{gb(this.doc,this.type,e,this),this.beforeTransactionSelection=wf(this,this.prosemirrorView.state)},Ee)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const S_=(t,e,n,r,o,s)=>{const i=n.mapping.get(t);if(i===void 0){if(t instanceof Ut)return lh(t,e,n,r,o,s);throw ir()}return i},lh=(t,e,n,r,o,s)=>{const i=[],a=l=>{var c,d;if(l instanceof Ut){const u=S_(l,e,n,r,o,s);u!==null&&i.push(u)}else{const u=(d=(c=l._item.right)==null?void 0:c.content)==null?void 0:d.type;u instanceof Cs&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(l.applyDelta([{retain:l.length},...u.toDelta()]),u.doc.transact(f=>{u._item.delete(f)}));const h=nU(l,e,n,r,o,s);h!==null&&h.forEach(f=>{f!==null&&i.push(f)})}};r===void 0||o===void 0?t.toArray().forEach(a):a_(t,new A1(o.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(vf(t._item,r)?vf(t._item,o)||(l.ychange=s?s("added",t._item.id):{type:"added"}):l.ychange=s?s("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,l,i);return n.mapping.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},Ee),n.mapping.delete(t),null}},nU=(t,e,n,r,o,s)=>{const i=[],a=t.toDelta(r,o,s);try{for(let l=0;l<a.length;l++){const c=a[l];i.push(e.text(c.insert,lU(c.attributes,e)))}}catch{return t.doc.transact(c=>{t._item.delete(c)},Ee),null}return i},rU=(t,e)=>{const n=new xn,r=t.map(o=>({insert:o.text,attributes:M_(o.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},oU=(t,e)=>{const n=new Ut(t.type.name);for(const r in t.attrs){const o=t.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,Mp(t).map(r=>mb(r,e))),e.mapping.set(n,t),n},mb=(t,e)=>t instanceof Array?rU(t,e):oU(t,e),HC=t=>typeof t=="object"&&t!==null,j1=(t,e)=>{const n=Object.keys(t).filter(o=>t[o]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(o=>e[o]!==null).length);for(let o=0;o<n.length&&r;o++){const s=n[o],i=t[s],a=e[s];r=s==="ychange"||i===a||HC(i)&&HC(a)&&j1(i,a)}return r},Mp=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.isText){const s=[];for(let i=e[r];r<e.length&&i.isText;i=e[++r])s.push(i);r--,n.push(s)}else n.push(o)}return n},T_=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,o)=>r.insert===e[o].text&&_R(r.attributes||{}).length===e[o].marks.length&&IR(r.attributes,(s,i)=>{var c;const a=E_(i),l=e[o].marks;return j1(s,(c=l.find(d=>d.type.name===a))==null?void 0:c.attrs)}))},zc=(t,e)=>{if(t instanceof Ut&&!(e instanceof Array)&&yb(t,e)){const n=Mp(e);return t._length===n.length&&j1(t.getAttributes(),e.attrs)&&t.toArray().every((r,o)=>zc(r,n[o]))}return t instanceof xn&&e instanceof Array&&T_(t,e)},xf=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),FC=(t,e,n)=>{const r=t.toArray(),o=Mp(e),s=o.length,i=r.length,a=So(i,s);let l=0,c=0,d=!1;for(;l<a;l++){const u=r[l],h=o[l];if(xf(n.mapping.get(u),h))d=!0;else if(!zc(u,h))break}for(;l+c<a;c++){const u=r[i-c-1],h=o[s-c-1];if(xf(n.mapping.get(u),h))d=!0;else if(!zc(u,h))break}return{equalityFactor:l+c,foundMappedChild:d}},sU=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof hr?e+=n.content.str:n.content instanceof it&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},iU=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:o}=sU(t),s=e.map(c=>({insert:c.text,attributes:Object.assign({},r,M_(c.marks,n))})),{insert:i,remove:a,index:l}=$z(o,s.map(c=>c.insert).join(""));t.delete(l,a),t.insert(l,i),t.applyDelta(s.map(c=>({retain:c.insert.length,attributes:c.attributes})))},aU=/(.*)(--[a-zA-Z0-9+/=]{8})$/,E_=t=>{var e;return((e=aU.exec(t))==null?void 0:e[1])??t},lU=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(E_(r),t[r]));return n},M_=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const o=Yr(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${Jz(r.toJSON())}`:r.type.name]=r.attrs}}),n},gb=(t,e,n,r)=>{if(e instanceof Ut&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Ut){const u=e.getAttributes(),h=n.attrs;for(const f in h)h[f]!==null?u[f]!==h[f]&&f!=="ychange"&&e.setAttribute(f,h[f]):e.removeAttribute(f);for(const f in u)h[f]===void 0&&e.removeAttribute(f)}const o=Mp(n),s=o.length,i=e.toArray(),a=i.length,l=So(s,a);let c=0,d=0;for(;c<l;c++){const u=i[c],h=o[c];if(!xf(r.mapping.get(u),h))if(zc(u,h))r.mapping.set(u,h);else break}for(;d+c+1<l;d++){const u=i[a-d-1],h=o[s-d-1];if(!xf(r.mapping.get(u),h))if(zc(u,h))r.mapping.set(u,h);else break}t.transact(()=>{for(;a-c-d>0&&s-c-d>0;){const h=i[c],f=o[c],p=i[a-d-1],g=o[s-d-1];if(h instanceof xn&&f instanceof Array)T_(h,f)||iU(h,f,r),c+=1;else{let b=h instanceof Ut&&yb(h,f),v=p instanceof Ut&&yb(p,g);if(b&&v){const x=FC(h,f,r),w=FC(p,g,r);x.foundMappedChild&&!w.foundMappedChild?v=!1:!x.foundMappedChild&&w.foundMappedChild||x.equalityFactor<w.equalityFactor?b=!1:v=!1}b?(gb(t,h,f,r),c+=1):v?(gb(t,p,g,r),d+=1):(r.mapping.delete(e.get(c)),e.delete(c,1),e.insert(c,[mb(f,r)]),c+=1)}}const u=a-c-d;if(a===1&&s===0&&i[0]instanceof xn?(r.mapping.delete(i[0]),i[0].delete(0,i[0].length)):u>0&&(e.slice(c,c+u).forEach(h=>r.mapping.delete(h)),e.delete(c,u)),c+d<s){const h=[];for(let f=c;f<s-d;f++)h.push(mb(o[f],r));e.insert(c,h)}},Ee)},yb=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let ic=null;const cU=()=>{const t=ic;ic=null,t.forEach((e,n)=>{const r=n.state.tr,o=Ee.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((s,i)=>{r.setMeta(i,s)}),n.dispatch(r))})},dU=(t,e,n)=>{ic||(ic=new Map,k1(0,cU)),Yr(ic,t,Un).set(e,n)},Uc=(t,e,n)=>{if(t===0)return hg(e,0,-1);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof xn){if(r._length>=t)return hg(r,t,-1);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<o)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&o>1)return new Vc(r._item===null?null:r._item.id,r._item===null?jc(r):null,null);if(t-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Vc(r._item===null?null:r._item.id,r._item===null?jc(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw Cn();if(t===0&&r.constructor!==xn&&r!==e)return uU(r._item.parent,r._item)}return hg(e,e._length,-1)},uU=(t,e)=>{let n=null,r=null;return t._item===null?r=jc(t):n=de(t._item.id.client,t._item.id.clock),new Vc(n,r,e.id)},pi=(t,e,n,r)=>{const o=OF(n,t);if(o===null||o.type!==e&&!Bc(e,o.type._item))return null;let s=o.type,i=0;if(s.constructor===xn)i=o.index;else if(s._item===null||!s._item.deleted){let a=s._first,l=0;for(;l<s._length&&l<o.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof xn?i+=c._length:i+=r.get(c).nodeSize}a=a.right}i+=1}for(;s!==e&&s._item!==null;){const a=s._item.parent;if(a._item===null||!a._item.deleted){i+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===s)break;l.deleted||(c instanceof xn?i+=c._length:i+=r.get(c).nodeSize),l=l.right}}s=a}return i-1},hU=(t,e,n)=>t!==e,fU=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("â "),o=document.createTextNode("â ");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(o,null),e},A_=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),pU=/^#[0-9a-fA-F]{6}$/,zC=(t,e,n,r,o)=>{const s=Ee.getState(t),i=s.doc,a=[];return s.snapshot!=null||s.prevSnapshot!=null||s.binding.mapping.size===0?be.create(t.doc,[]):(e.getStates().forEach((l,c)=>{if(n(i.clientID,c,l)&&l.cursor!=null){const d=l.user||{};d.color==null?d.color="#ffa500":pU.test(d.color)||console.warn("A user uses an unsupported color format",d),d.name==null&&(d.name=`User: ${c}`);let u=pi(i,s.type,sc(l.cursor.anchor),s.binding.mapping),h=pi(i,s.type,sc(l.cursor.head),s.binding.mapping);if(u!==null&&h!==null){const f=ur(t.doc.content.size-1,0);u=So(u,f),h=So(h,f),a.push(Ae.widget(h,()=>r(d,c),{key:c+"",side:10}));const p=So(u,h),g=ur(u,h);a.push(Ae.inline(p,g,o(d,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),be.create(t.doc,a))},mU=(t,{awarenessStateFilter:e=hU,cursorBuilder:n=fU,selectionBuilder:r=A_,getSelection:o=i=>i.selection}={},s="cursor")=>new me({key:Hl,state:{init(i,a){return zC(a,t,e,n,r)},apply(i,a,l,c){const d=Ee.getState(c),u=i.getMeta(Hl);return d&&d.isChangeOrigin||u&&u.awarenessUpdated?zC(c,t,e,n,r):a.map(i.mapping,i.doc)}},props:{decorations:i=>Hl.getState(i)},view:i=>{const a=()=>{i.docView&&dU(i,Hl,{awarenessUpdated:!0})},l=()=>{const c=Ee.getState(i.state),d=t.getLocalState()||{};if(i.hasFocus()){const u=o(i.state),h=Uc(u.anchor,c.type,c.binding.mapping),f=Uc(u.head,c.type,c.binding.mapping);(d.cursor==null||!_C(sc(d.cursor.anchor),h)||!_C(sc(d.cursor.head),f))&&t.setLocalStateField(s,{anchor:h,head:f})}else d.cursor!=null&&pi(c.doc,c.type,sc(d.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(s,null)};return t.on("change",a),i.dom.addEventListener("focusin",l),i.dom.addEventListener("focusout",l),{update:l,destroy:()=>{i.dom.removeEventListener("focusin",l),i.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(s,null)}}}}),gU=t=>{var e,n;return((n=(e=Ir.getState(t))==null?void 0:e.undoManager)==null?void 0:n.undo())!=null},yU=t=>{var e,n;return((n=(e=Ir.getState(t))==null?void 0:e.undoManager)==null?void 0:n.redo())!=null},bU=(t,e)=>{var n,r;return e==null?(r=(n=Ir.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canUndo():gU(t)},vU=(t,e)=>{var n,r;return e==null?(r=(n=Ir.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canRedo():yU(t)},wU=new Set(["paragraph"]),xU=(t,e)=>!(t instanceof Me)||!(t.content instanceof br)||!(t.content.type instanceof Cs||t.content.type instanceof Ut&&e.has(t.content.type.nodeName))||t.content.type._length===0,kU=({protectedNodes:t=wU,trackedOrigins:e=[],undoManager:n=null}={})=>new me({key:Ir,state:{init:(r,o)=>{const s=Ee.getState(o),i=n||new t_(s.type,{trackedOrigins:new Set([Ee].concat(e)),deleteFilter:a=>xU(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:(r,o,s,i)=>{const a=Ee.getState(i).binding,l=o.undoManager,c=l.undoStack.length>0,d=l.redoStack.length>0;return a?{undoManager:l,prevSel:wf(a,s),hasUndoOps:c,hasRedoOps:d}:c!==o.hasUndoOps||d!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=Ee.getState(r.state),s=Ir.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:i})=>{const a=o.binding;a&&i.meta.set(a,Ir.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:i})=>{const a=o.binding;a&&(a.beforeTransactionSelection=i.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}});function CU(t={}){return new me({view(e){return new SU(e,t)}})}class SU{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,s=o.getBoundingClientRect(),i=s.width/o.offsetWidth,a=s.height/o.offsetHeight;if(n){let u=e.nodeBefore,h=e.nodeAfter;if(u||h){let f=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=u?p.bottom:p.top;u&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;r={left:p.left,right:p.right,top:g-b,bottom:g+b}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*i;r={left:u.left-h,right:u.left+h,top:u.top,bottom:u.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let u=l.getBoundingClientRect(),h=u.width/l.offsetWidth,f=u.height/l.offsetHeight;c=u.left-l.scrollLeft*h,d=u.top-l.scrollTop*f}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=NM(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const TU={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var EU=Object.defineProperty,MU=(t,e,n)=>e in t?EU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A=(t,e,n)=>MU(t,typeof e!="symbol"?e+"":e,n);function AU(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function RU(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return AU(e)}const Ap=De.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return eR()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new me({key:new Te("uniqueID"),appendTransaction:(n,r,o)=>{const s=n.some(f=>f.docChanged)&&!r.doc.eq(o.doc),i=this.options.filterTransaction&&n.some(f=>{let p,g;return!(!((g=(p=this.options).filterTransaction)===null||g===void 0)&&g.call(p,f))});if(!s||i)return;const{tr:a}=o,{types:l,attributeName:c,generateID:d}=this.options,u=Q0(r.doc,n),{mapping:h}=u;if(e1(u).forEach(({newRange:f})=>{const p=Ph(o.doc,f,v=>l.includes(v.type.name)),g=p.map(({node:v})=>v.attrs[c]).filter(v=>v!==null),b=RU(g);p.forEach(({node:v,pos:x})=>{let w;const k=(w=a.doc.nodeAt(x))===null||w===void 0?void 0:w.attrs[c];if(k===null){const S=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(S)===null){const T=JSON.parse(JSON.stringify(o.doc.toJSON()));if(T.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(T.content)===JSON.stringify(S.toJSON())){a.setNodeMarkup(x,void 0,{...v.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(x,void 0,{...v.attrs,[c]:d()});return}const{deleted:C}=h.invert().mapResult(x);C&&b.includes(k)&&a.setNodeMarkup(x,void 0,{...v.attrs,[c]:d()})})}),!!a.steps.length)return a},view(n){const r=o=>{let s;t=!((s=n.dom.parentElement)===null||s===void 0)&&s.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return t!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:o}=this.options,s=i=>{const a=[];return i.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(s(l.content)));return}const c=l.type.create({...l.attrs,[o]:null},s(l.content),l.marks);a.push(c)}),_.from(a)};return e=!1,new j(s(n.content),n.openStart,n.openEnd)}}})]}});function UC(t){return t.type==="link"}function R_(t){return typeof t!="string"&&t.type==="link"}function _i(t){return typeof t!="string"&&t.type==="text"}function Ss(t){var e,n,r,o,s;return Ts(t)?{...t}:Wc(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((o=t.props)==null?void 0:o.colspan)??1,rowspan:((s=t.props)==null?void 0:s.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function Wc(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function Ts(t){return Wc(t)&&t.props!==void 0&&t.content!==void 0}function Ii(t){return Ts(t)?t.props.colspan??1:1}function Gc(t){return Ts(t)?t.props.rowspan??1:1}class $r extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function he(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}const _U=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function On(t,e="Ctrl"){return _U()?t.replace("Mod","âŒ˜"):t.replace("Mod",e)}function je(...t){return t.filter(e=>e).join(" ")}const bb=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Hr(t,e,n,r){const o=document.createElement("div");o.className=je("bn-block-content",n.class),o.setAttribute("data-content-type",t);for(const[i,a]of Object.entries(n))i!=="class"&&o.setAttribute(i,a);const s=document.createElement(e);s.className=je("bn-inline-content",r.class);for(const[i,a]of Object.entries(r))i!=="class"&&s.setAttribute(i,a);return o.appendChild(s),{dom:o,contentDOM:s}}const WC=(t,e)=>{let n=Bi(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},st={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},B1=["backgroundColor","textColor"];function kf(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function GC(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function Ad(t){const e={};return Object.entries(t).filter(([n,r])=>!B1.includes(n)).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const s=o.getAttribute(kf(n));if(s===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return s==="true"?!0:s==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const i=parseFloat(s);return!Number.isNaN(i)&&Number.isFinite(i)?i:null}return s},renderHTML:o=>o[n]!==r.default?{[kf(n)]:o[n]}:{}}}),e}function __(t,e,n,r){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=t(),s=n.state.doc.resolve(o).node().attrs.id;if(!s)throw new Error("Block doesn't have id");const i=e.getBlock(s);if(i.type!==r)throw new Error("Block type does not match");return i}function Fl(t,e,n,r,o=!1,s){const i=document.createElement("div");if(s!==void 0)for(const[a,l]of Object.entries(s))a!=="class"&&i.setAttribute(a,l);i.className=je("bn-block-content",(s==null?void 0:s.class)||""),i.setAttribute("data-content-type",e);for(const[a,l]of Object.entries(n)){const c=r[a].default;!B1.includes(a)&&l!==c&&i.setAttribute(kf(a),l)}return o&&i.setAttribute("data-file-block",""),i.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=je("bn-inline-content",t.contentDOM.className)),{...t,dom:i}}function qn(t){return Kr.create(t)}function V1(t,e){return{config:t,implementation:e}}function Po(t,e,n){return V1({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:n,toInternalHTML:WC,toExternalHTML:WC})}function I_(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function N_(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function D_(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=e==null?void 0:e(r);return o===void 0?!1:o}}),n}function Rd(t,e){const n=qn({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return Ad(t.propSchema)},parseHTML(){return D_(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Fl({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const s=this.options.editor,i=__(r,s,this.editor,t.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=e.render(i,s),c=Fl(l,i.type,i.props,t.propSchema,a);return t.isSelectable===!1&&N_(c,this.editor),c}}});if(n.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return V1(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render(r,o);return Fl(a,r.type,r.props,t.propSchema,t.isFileBlock,i)},toExternalHTML:(r,o)=>{var s,i;const a=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{};let l=(i=e.toExternalHTML)==null?void 0:i.call(e,r,o);return l===void 0&&(l=e.render(r,o)),Fl(l,r.type,r.props,t.propSchema,a)}})}function Ao(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const s=[];t.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&s.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const i=t.resolve(s.find(a=>a>=e)||s[s.length-1]);return{posBeforeNode:i.pos,node:i.nodeAfter}}function $1(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,o=r+n.nodeSize,s={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let i,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const d=l,u=r+c+1,h=u+l.nodeSize;i={node:d,beforePos:u,afterPos:h}}else if(l.type.name==="blockGroup"){const d=l,u=r+c+1,h=u+l.nodeSize;a={node:d,beforePos:u,afterPos:h}}}),!i)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:s,blockContent:i,childContainer:a,blockNoteType:i.node.type.name}}else{if(!s.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${s.node}`);return{isBlockContainer:!1,bnBlock:s,childContainer:s,blockNoteType:s.node.type.name}}}function Es(t){return $1(t.node,t.posBeforeNode)}function _d(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return $1(t.nodeAfter,t.pos)}function Oe(t){const e=Ao(t.doc,t.selection.anchor);return Es(e)}function Rp(t){const e=Ao(t.doc,t.selection.anchor);return Es(e)}function pt(t){return"doc"in t?t.doc.type.schema:t.type.schema}function P_(t){return t.cached.blockNoteEditor}function Id(t){return P_(t).schema}function H1(t){return Id(t).blockSchema}function F1(t){return Id(t).inlineContentSchema}function Xa(t){return Id(t).styleSchema}function z1(t){return P_(t).blockCache}function O_(t,e,n){var r,o;const s={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},i=[];t.content.forEach((a,l,c)=>{const d={cells:[]};c===0&&a.content.forEach(u=>{let h=u.attrs.colwidth;h==null&&(h=new Array(u.attrs.colspan??1).fill(void 0)),s.columnWidths.push(...h)}),d.cells=a.content.content.map((u,h)=>(i[c]||(i[c]=[]),i[c][h]=u.type.name==="tableHeader",{type:"tableCell",content:u.content.content.map(f=>_p(f,e,n)).reduce((f,p)=>{if(!f.length)return p;const g=f[f.length-1],b=p[0];return b&&_i(g)&&_i(b)&&JSON.stringify(g.styles)===JSON.stringify(b.styles)?(g.text+=`
`+b.text,f.push(...p.slice(1)),f):(f.push(...p),f)},[]),props:{colspan:u.attrs.colspan,rowspan:u.attrs.rowspan,backgroundColor:u.attrs.backgroundColor,textColor:u.attrs.textColor,textAlignment:u.attrs.textAlignment}})),s.rows.push(d)});for(let a=0;a<i.length;a++)(r=i[a])!=null&&r.every(l=>l)&&(s.headerRows=(s.headerRows??0)+1);for(let a=0;a<((o=i[0])==null?void 0:o.length);a++)i!=null&&i.every(l=>l[a])&&(s.headerCols=(s.headerCols??0)+1);return s}function _p(t,e,n){const r=[];let o;return t.content.forEach(s=>{if(s.type.name==="hardBreak"){if(o)if(_i(o))o.text+=`
`;else if(UC(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(s.type.name!=="link"&&s.type.name!=="text"){if(!e[s.type.name]){console.warn("unrecognized inline content type",s.type.name);return}o&&(r.push(o),o=void 0),r.push(IU(s,e,n));return}const i={};let a;for(const l of s.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(c.propSchema==="boolean")i[c.type]=!0;else if(c.propSchema==="string")i[c.type]=l.attrs.stringValue;else throw new $r(c.propSchema)}o?_i(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):JSON.stringify(o.styles)===JSON.stringify(i)?o.text+=s.textContent:(r.push(o),o={type:"text",text:s.textContent,styles:i}):UC(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(i)?o.content[o.content.length-1].text+=s.textContent:o.content.push({type:"text",text:s.textContent,styles:i}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):(r.push(o),o={type:"text",text:s.textContent,styles:i})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}:o={type:"text",text:s.textContent,styles:i}}),o&&r.push(o),r}function IU(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},o=e[t.type.name];for(const[i,a]of Object.entries(t.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=o.propSchema;i in l&&(r[i]=a)}let s;return o.content==="styled"?s=_p(t,e,n):s=void 0,{type:t.type.name,props:r,content:s}}function ze(t,e,n=H1(e),r=F1(e),o=Xa(e),s=z1(e)){var i;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const a=s==null?void 0:s.get(t);if(a)return a;const l=$1(t,0);let c=l.bnBlock.node.attrs.id;c===null&&(c=Ap.options.generateID());const d=n[l.blockNoteType];if(!d)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const u={};for(const[b,v]of Object.entries({...t.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const x=d.propSchema;b in x&&!(x[b].default===void 0&&v===void 0)&&(u[b]=v)}const h=n[l.blockNoteType],f=[];(i=l.childContainer)==null||i.node.forEach(b=>{f.push(ze(b,e,n,r,o,s))});let p;if(h.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");p=_p(l.blockContent.node,r,o)}else if(h.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");p=O_(l.blockContent.node,r,o)}else if(h.content==="none")p=void 0;else throw new $r(h.content);const g={id:c,type:h.type,props:u,content:p,children:f};return s==null||s.set(t,g),g}function NU(t,e,n=H1(e),r=F1(e),o=Xa(e),s=z1(e)){const i=[];return t.firstChild.descendants(a=>(i.push(ze(a,e,n,r,o,s)),!1)),i}function DU(t,e,n=H1(e),r=F1(e),o=Xa(e),s=z1(e)){function i(a,l,c){if(a.type.name!=="blockGroup")throw new Error("unexpected");const d=[];let u,h;return a.forEach((f,p,g)=>{if(f.type.name!=="blockContainer")throw new Error("unexpected");if(f.childCount===0)return;if(f.childCount===0||f.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+f.childCount);const b=g===0,v=g===a.childCount-1;if(f.firstChild.type.name==="blockGroup"){if(!b)throw new Error("unexpected");const C=i(f.firstChild,Math.max(0,l-1),v?Math.max(0,c-1):0);u=C.blockCutAtStart,v&&(h=C.blockCutAtEnd),d.push(...C.blocks);return}const x=ze(f,e,n,r,o,s),w=f.childCount>1?f.child(1):void 0;let k=[];if(w){const C=i(w,0,v?Math.max(0,c-1):0);k=C.blocks,v&&(h=C.blockCutAtEnd)}v&&!w&&c>1&&(h=x.id),b&&l>1&&(u=x.id),d.push({...x,children:k})}),{blocks:d,blockCutAtStart:u,blockCutAtEnd:h}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return i(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function L_(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function PU(t,e){return{config:t,implementation:e}}function Xs(t,e){return PU({type:t.name,propSchema:e},{mark:t})}function j_(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function Ps(t){const{height:e,width:n}=U1(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),o=(s,i)=>{for(let a=s;a<e;a++)for(let l=i;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let s=0;s<t.content.rows.length;s++)for(let i=0;i<t.content.rows[s].cells.length;i++){const a=Ss(t.content.rows[s].cells[i]),l=Gc(a),c=Ii(a),{row:d,col:u}=o(s,i);for(let h=d;h<d+l;h++)for(let f=u;f<u+c;f++){if(r[h][f])throw new Error(`Unable to create occupancy grid for table, cell at ${h},${f} is already occupied`);r[h][f]={row:s,col:i,rowspan:l,colspan:c,cell:a}}}return r}function qc(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function Ni(t,e,n=Ps(e)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const s=n[r][o];if(s.row===t.row&&s.col===t.col)return{row:r,col:o,cell:s.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function U1(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let o=0;r.cells.forEach(s=>{o+=Ii(s)}),n=Math.max(n,o)}),{height:e,width:n}}function B_(t,e,n=Ps(e)){var r;const o=(r=n[t.row])==null?void 0:r[t.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function vb(t,e){var n;const r=Ps(t);if(e<0||e>=r.length)return[];let o=0;for(let i=0;i<e;i++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const s=new Array(r[0].length).fill(!1).map((i,a)=>B_({row:o,col:a},t,r)).filter(i=>i!==void 0);return s.filter((i,a)=>s.findIndex(l=>l.row===i.row&&l.col===i.col)===a)}function wb(t,e){var n;const r=Ps(t);if(e<0||e>=r[0].length)return[];let o=0;for(let i=0;i<e;i++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const s=new Array(r.length).fill(!1).map((i,a)=>B_({row:a,col:o},t,r)).filter(i=>i!==void 0);return s.filter((i,a)=>s.findIndex(l=>l.row===i.row&&l.col===i.col)===a)}function OU(t,e,n,r=Ps(t)){const{col:o}=Ni({row:0,col:e},t,r),{col:s}=Ni({row:0,col:n},t,r);return r.forEach(i=>{const[a]=i.splice(o,1);i.splice(s,0,a)}),qc(r)}function LU(t,e,n,r=Ps(t)){const{row:o}=Ni({row:e,col:0},t,r),{row:s}=Ni({row:n,col:0},t,r),[i]=r.splice(o,1);return r.splice(s,0,i),qc(r)}function xb(t){return t?Wc(t)?xb(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:_i(e)?e.text.length===0:R_(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function jU(t,e,n=Ps(t)){if(e==="columns"){let s=0;for(let i=n[0].length-1;i>=0&&n.every(a=>xb(a[i].cell)&&a[i].colspan===1);i--)s++;for(let i=n.length-1;i>=0;i--){const a=Math.max(n[i].length-s,1);n[i]=n[i].slice(0,a)}return qc(n)}let r=0;for(let s=n.length-1;s>=0&&n[s].every(i=>xb(i.cell)&&i.rowspan===1);s--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),qc(n)}function BU(t,e,n,r=Ps(t)){const{width:o,height:s}=U1(t);if(e==="columns")r.forEach((i,a)=>{if(n>=0)for(let l=0;l<n;l++)i.push({row:a,col:Math.max(...i.map(c=>c.col))+1,rowspan:1,colspan:1,cell:Ss("")});else i.splice(o+n,-1*n)});else if(n>0)for(let i=0;i<n;i++){const a=new Array(o).fill(null).map((l,c)=>({row:s+i,col:c,rowspan:1,colspan:1,cell:Ss("")}));r.push(a)}else n<0&&r.splice(s+n,-1*n);return qc(r)}function V_(t,e,n){const r=vb(t,n);if(!r.some(i=>Gc(i.cell)>1))return!0;let o=n,s=n;return r.forEach(i=>{const a=Gc(i.cell);o=Math.max(o,i.row+a-1),s=Math.min(s,i.row)}),e<n?n===o:n===s}function $_(t,e,n){const r=wb(t,n);if(!r.some(i=>Ii(i.cell)>1))return!0;let o=n,s=n;return r.forEach(i=>{const a=Ii(i.cell);o=Math.max(o,i.col+a-1),s=Math.min(s,i.col)}),e<n?n===o:n===s}function VU(t,e,n){const r=Ni(t,n),o=Ni(e,n);return r.col===o.col}function qC(t,e,n,r){const o=[];for(const[s,i]of Object.entries(t.styles||{})){const a=n[s];if(!a)throw new Error(`style ${s} not found in styleSchema`);if(a.propSchema==="boolean")o.push(e.mark(s));else if(a.propSchema==="string")o.push(e.mark(s,{stringValue:i}));else throw new $r(a.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(s=>s.length>0).map(s=>s===`
`?e.nodes.hardBreak.createChecked():e.text(s,o)):t.text.length>0?[e.text(t.text,o)]:[]}function $U(t,e,n){const r=e.marks.link.create({href:t.href});return kb(t.content,e,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function kb(t,e,n,r){const o=[];if(typeof t=="string")return o.push(...qC({text:t,styles:{}},e,n,r)),o;for(const s of t)o.push(...qC(s,e,n,r));return o}function fr(t,e,n,r=Xa(e)){const o=[];for(const s of t)typeof s=="string"?o.push(...kb(s,e,r,n)):R_(s)?o.push(...$U(s,e,r)):_i(s)?o.push(...kb([s],e,r,n)):o.push(H_(s,e,r));return o}function Ip(t,e,n=Xa(e)){const r=[],o=new Array(t.headerRows??0).fill(!0),s=new Array(t.headerCols??0).fill(!0),i=t.columnWidths??[];for(let a=0;a<t.rows.length;a++){const l=t.rows[a],c=[],d=o[a];for(let h=0;h<l.cells.length;h++){const f=l.cells[h],p=s[h],g=void 0;let b=null;const v=Ni({row:a,col:h},{content:t});let x=i[v.col]?[i[v.col]]:null;if(f)if(typeof f=="string")b=e.text(f);else if(Wc(f)){f.content&&(b=fr(f.content,e,"tableParagraph",n));const k=Ii(f);k>1&&(x=new Array(k).fill(!1).map((C,S)=>i[v.col+S]??void 0))}else b=fr(f,e,"tableParagraph",n);const w=e.nodes[p||d?"tableHeader":"tableCell"].createChecked({...Wc(f)?f.props:{},colwidth:x},e.nodes.tableParagraph.createChecked(g,b));c.push(w)}const u=e.nodes.tableRow.createChecked({},c);r.push(u)}return r}function H_(t,e,n){let r,o=t.type;if(o===void 0&&(o="paragraph"),!e.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!t.content)r=e.nodes[o].createChecked(t.props);else if(typeof t.content=="string"){const s=fr([t.content],e,o,n);r=e.nodes[o].createChecked(t.props,s)}else if(Array.isArray(t.content)){const s=fr(t.content,e,o,n);r=e.nodes[o].createChecked(t.props,s)}else if(t.content.type==="tableContent"){const s=Ip(t.content,e,n);r=e.nodes[o].createChecked(t.props,s)}else throw new $r(t.content.type);return r}function Bi(t,e,n=Xa(e)){let r=t.id;r===void 0&&(r=Ap.options.generateID());const o=[];if(t.children)for(const s of t.children)o.push(Bi(s,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const s=H_(t,e,n),i=o.length>0?e.nodes.blockGroup.createChecked({},o):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},i?[s,i]:s)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},o);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function Sn(t,e){let n,r;if(e.firstChild.descendants((o,s)=>n?!1:!Cb(o)||o.attrs.id!==t?!0:(n=o,r=s+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function Cb(t){return t.type.isInGroup("bnBlock")}function HU(t,e){return t.id!==e.id||t.type!==e.type||JSON.stringify(t.props)!==JSON.stringify(e.props)||JSON.stringify(t.content)!==JSON.stringify(e.content)}function FU(t,e=[]){let n={type:"local"};t.getMeta("paste")?n={type:"paste"}:t.getMeta("uiEvent")==="drop"?n={type:"drop"}:t.getMeta("history$")?n={type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")&&(t.getMeta("y-sync$").isUndoRedoOperation?n={type:"undo-redo"}:n={type:"yjs-remote"});const r=pt(t),o=Q0(t.before,[t,...e]),s=e1(o),i=s.flatMap(u=>Ph(o.before,u.oldRange,Cb)).map(({node:u})=>ze(u,r)),a=s.flatMap(u=>Ph(o.doc,u.newRange,Cb)).map(({node:u})=>ze(u,r)),l=new Map(a.map(u=>[u.id,u])),c=new Map(i.map(u=>[u.id,u])),d=[];for(const[u,h]of l)c.has(u)||d.push({type:"insert",block:h,source:n,prevBlock:void 0});for(const[u,h]of c)l.has(u)||d.push({type:"delete",block:h,source:n,prevBlock:void 0});for(const[u,h]of l)if(c.has(u)){const f=c.get(u);HU(f,h)&&d.push({type:"update",block:h,prevBlock:f,source:n})}return d}function zU(t,e,n,r="before"){const o=typeof n=="string"?n:n.id,s=pt(t),i=e.map(c=>Bi(c,s)),a=Sn(o,t.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),t.step(new rt(l,l,new j(_.from(i),0,0))),i.map(c=>ze(c,s))}function KC(t,e,n){const r=pt(t),o=n.map(c=>Bi(c,r)),s=new Set(e.map(c=>typeof c=="string"?c:c.id)),i=[],a=typeof e[0]=="string"?e[0]:e[0].id;let l=0;if(t.doc.descendants((c,d)=>{if(s.size===0)return!1;if(!c.type.isInGroup("bnBlock")||!s.has(c.attrs.id))return!0;if(i.push(ze(c,r)),s.delete(c.attrs.id),n.length>0&&c.attrs.id===a){const p=t.doc.nodeSize;t.insert(d,o);const g=t.doc.nodeSize;l+=p-g}const u=t.doc.nodeSize,h=t.doc.resolve(d-l);h.node().type.name==="blockGroup"&&h.node(h.depth-1).type.name!=="doc"&&h.node().childCount===1?t.delete(h.before(),h.after()):t.delete(d-l,d-l+c.nodeSize);const f=t.doc.nodeSize;return l+=u-f,!1}),s.size>0){const c=[...s].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+c)}return{insertedBlocks:o.map(c=>ze(c,r)),removedBlocks:i}}const Ct=(t,e)=>({tr:n,dispatch:r})=>(r&&F_(n,t,e),!0);function F_(t,e,n,r,o){const s=_d(t.doc.resolve(e)),i=pt(t),a=i.nodes[s.blockNoteType],l=i.nodes[n.type||s.blockNoteType],c=l.isInGroup("bnBlock")?l:i.nodes.blockContainer;if(s.isBlockContainer&&l.isInGroup("blockContent"))ZC(n,t,s),UU(n,t,a,l,s);else if(!s.isBlockContainer&&l.isInGroup("bnBlock"))ZC(n,t,s);else{const d=ze(s.bnBlock.node,i);t.replaceWith(s.bnBlock.beforePos,s.bnBlock.afterPos,Bi({children:d.children,...n},i));return}t.setNodeMarkup(s.bnBlock.beforePos,c,{...s.bnBlock.node.attrs,...n.props})}function UU(t,e,n,r,o,s,i){const a=pt(e);let l="keep";if(t.content)if(typeof t.content=="string")l=fr([t.content],a,r.name);else if(Array.isArray(t.content))l=fr(t.content,a,r.name);else if(t.content.type==="tableContent")l=Ip(t.content,a);else throw new $r(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);l==="keep"?e.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...t.props}):e.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...t.props},l))}function ZC(t,e,n){const r=pt(e);if(t.children!==void 0&&t.children.length>0){const o=t.children.map(s=>Bi(s,r));if(n.childContainer)e.step(new rt(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new j(_.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function WU(t,e,n,r,o){const s=typeof e=="string"?e:e.id,i=Sn(s,t.doc);if(!i)throw new Error(`Block with ID ${s} not found`);F_(t,i.posBeforeNode,n);const a=t.doc.resolve(i.posBeforeNode+1).node(),l=pt(t);return ze(a,l)}function z_(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function U_(t,e,n,r){let o;if(e)if(typeof e=="string")o=fr([e],t.pmSchema);else if(Array.isArray(e))o=fr(e,t.pmSchema);else if(e.type==="tableContent")o=Ip(e,t.pmSchema);else throw new $r(e.type);else throw new Error("blockContent is required");const s=n.serializeFragment(_.from(o),r);return s.nodeType===1&&z_(s),s}function GU(t,e,n,r,o,s,i){var a,l,c,d,u,h,f,p;const g=(i==null?void 0:i.document)??document,b=e.pmSchema.nodes.blockContainer;let v=n.props;if(!n.props){v={};for(const[T,E]of Object.entries(e.schema.blockSchema[n.type].propSchema))E.default!==void 0&&(v[T]=E.default)}const x=(l=(a=b.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,b.create({id:n.id,...v})),w=Array.from(x.dom.attributes),k=e.blockImplementations[n.type].implementation.toExternalHTML({...n,props:v},e),C=g.createDocumentFragment();if(k.dom.classList.contains("bn-block-content")){const T=[...w,...Array.from(k.dom.attributes)].filter(E=>E.name.startsWith("data")&&E.name!=="data-content-type"&&E.name!=="data-file-block"&&E.name!=="data-node-view-wrapper"&&E.name!=="data-node-type"&&E.name!=="data-id"&&E.name!=="data-index"&&E.name!=="data-editable");for(const E of T)k.dom.firstChild.setAttribute(E.name,E.value);z_(k.dom.firstChild),C.append(...Array.from(k.dom.childNodes))}else C.append(k.dom);if(k.contentDOM&&n.content){const T=U_(e,n.content,r,i);k.contentDOM.appendChild(T)}let S;if(o.has(n.type)?S="OL":s.has(n.type)&&(S="UL"),S){if(((c=t.lastChild)==null?void 0:c.nodeName)!==S){const E=g.createElement(S);S==="OL"&&v!=null&&v.start&&(v==null?void 0:v.start)!==1&&E.setAttribute("start",v.start+""),t.append(E)}const T=g.createElement("li");T.append(C),t.lastChild.appendChild(T)}else t.append(C);if(n.children&&n.children.length>0){const T=g.createDocumentFragment();if(W_(T,e,n.children,r,o,s,i),((d=t.lastChild)==null?void 0:d.nodeName)==="UL"||((u=t.lastChild)==null?void 0:u.nodeName)==="OL")for(;((h=T.firstChild)==null?void 0:h.nodeName)==="UL"||((f=T.firstChild)==null?void 0:f.nodeName)==="OL";)t.lastChild.lastChild.appendChild(T.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(T):(p=k.contentDOM)==null||p.append(T)}}const W_=(t,e,n,r,o,s,i)=>{for(const a of n)GU(t,e,a,r,o,s,i)},qU=(t,e,n,r,o,s)=>{const i=((s==null?void 0:s.document)??document).createDocumentFragment();return W_(i,t,e,n,r,o,s),i},Np=(t,e)=>{const n=No.fromSchema(t);return{exportBlocks:(r,o)=>{const s=qU(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),i=document.createElement("div");return i.append(s),i.innerHTML},exportInlineContent:(r,o)=>{const s=U_(e,r,n,o),i=document.createElement("div");return i.append(s.cloneNode(!0)),i.innerHTML}}};function KU(t,e,n,r,o){let s;if(e)if(typeof e=="string")s=fr([e],t.pmSchema,r);else if(Array.isArray(e))s=fr(e,t.pmSchema,r);else if(e.type==="tableContent")s=Ip(e,t.pmSchema);else throw new $r(e.type);else throw new Error("blockContent is required");return n.serializeFragment(_.from(s),o)}function ZU(t,e,n,r,o){var s,i,a,l,c;const d=t.pmSchema.nodes.blockContainer;let u=e.props;if(!e.props){u={};for(const[p,g]of Object.entries(t.schema.blockSchema[e.type].propSchema))g.default!==void 0&&(u[p]=g.default)}const h=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:u},t);if(e.type==="numberedListItem"&&h.dom.setAttribute("data-index",r.toString()),h.contentDOM&&e.content){const p=KU(t,e.content,n,e.type,o);h.contentDOM.appendChild(p)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const p=G_(t,e.children,n,o);(s=h.contentDOM)==null||s.append(p)}return h.dom}const f=(a=(i=d.spec)==null?void 0:i.toDOM)==null?void 0:a.call(i,d.create({id:e.id,...u}));return(l=f.contentDOM)==null||l.appendChild(h.dom),e.children&&e.children.length>0&&((c=f.contentDOM)==null||c.appendChild(q_(t,e.children,n,o))),f.dom}function G_(t,e,n,r){const o=((r==null?void 0:r.document)??document).createDocumentFragment();let s=0;for(const i of e){i.type==="numberedListItem"?s++:s=0;const a=ZU(t,i,n,s,r);o.appendChild(a)}return o}const q_=(t,e,n,r)=>{var o;const s=t.pmSchema.nodes.blockGroup,i=s.spec.toDOM(s.create({})),a=G_(t,e,n,r);return(o=i.contentDOM)==null||o.appendChild(a),i.dom},JU=(t,e)=>{const n=No.fromSchema(t);return{serializeBlocks:(r,o)=>q_(e,r,n,o).outerHTML}},Dp=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),o=(r==null?void 0:r.textContent)??void 0;return{targetElement:n,caption:o}},YU=(t,e,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const s=document.createElement("div");s.className="bn-add-file-button-icon",r?s.appendChild(r):s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(s);const i=document.createElement("p");i.className="bn-add-file-button-text",i.innerHTML=n||e.dictionary.file_blocks.file.add_button_text,o.appendChild(i);const a=c=>{c.preventDefault()},l=()=>{e.transact(c=>c.setMeta(e.filePanel.plugins[0],{block:t}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},XU='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',QU=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=XU,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},W1=(t,e,n,r,o)=>{const s=document.createElement("div");if(s.className="bn-file-block-content-wrapper",t.props.url===""){const a=YU(t,e,r,o);s.appendChild(a.dom);const l=e.onUploadStart(c=>{if(c===t.id){s.removeChild(a.dom);const d=document.createElement("div");d.className="bn-file-loading-preview",d.textContent="Loading...",s.appendChild(d)}});return{dom:s,destroy:()=>{l(),a.destroy()}}}const i={dom:s};if(t.props.showPreview===!1||!n){const a=QU(t);s.appendChild(a.dom),i.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else s.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,s.appendChild(a)}return i},G1=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},Pp=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},JC=t=>({url:t.src||void 0}),eW='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',tW={backgroundColor:st.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},K_={type:"audio",propSchema:tW,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},nW=(t,e)=>{const n=document.createElement("div");n.innerHTML=eW;const r=document.createElement("audio");return r.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(o=>{r.src=o}):r.src=t.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,W1(t,e,{dom:r},e.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},Z_=t=>{if(t.tagName==="AUDIO")return t.closest("figure")?void 0:JC(t);if(t.tagName==="FIGURE"){const e=Dp(t,"audio");if(!e)return;const{targetElement:n,caption:r}=e;return{...JC(n),caption:r}}},rW=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?G1(e,t.props.caption):Pp(e,t.props.caption):{dom:e}},oW=Rd(K_,{render:nW,parse:Z_,toExternalHTML:rW}),YC=Symbol.for("blocknote.shikiParser"),gg=Symbol.for("blocknote.shikiHighlighterPromise"),sW={language:{default:"text"}},iW=qn({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const t=this.options;return{language:{default:t.editor.settings.codeBlock.defaultLanguage,parseHTML:e=>{let n=e,r=null;(n==null?void 0:n.tagName)==="DIV"&&(n==null?void 0:n.dataset.contentType)==="codeBlock"&&(n=n.children[0]),(n==null?void 0:n.tagName)==="PRE"&&(n=n==null?void 0:n.children[0]);const o=n==null?void 0:n.getAttribute("data-language");if(o)r=o.toLowerCase();else{const s=[...(n==null?void 0:n.className.split(" "))||[]].filter(i=>i.startsWith("language-")).map(i=>i.replace("language-",""));s.length>0&&(r=s[0].toLowerCase())}return r?yg(t.editor.settings.codeBlock,r)??r:null},renderHTML:e=>e.language?{class:`language-${e.language}`,"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,n;const r=document.createElement("pre"),{dom:o,contentDOM:s}=Hr(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...t});return o.removeChild(s),o.appendChild(r),r.appendChild(s),{dom:o,contentDOM:s}},addNodeView(){const t=this.options;return({editor:e,node:n,getPos:r,HTMLAttributes:o})=>{var s,i;const a=document.createElement("pre"),l=document.createElement("select"),c=document.createElement("div"),{dom:d,contentDOM:u}=Hr(this.name,"code",{...((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},...o},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{}),h=f=>{const p=f.target.value;e.commands.command(({tr:g})=>(g.setNodeAttribute(r(),"language",p),!0))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach(([f,{name:p}])=>{const g=document.createElement("option");g.value=f,g.text=p,l.appendChild(g)}),c.contentEditable="false",l.value=n.attrs.language||t.editor.settings.codeBlock.defaultLanguage,d.removeChild(u),d.appendChild(c),d.appendChild(a),a.appendChild(u),c.appendChild(l),l.addEventListener("change",h),{dom:d,contentDOM:u,update:f=>f.type===this.type,destroy:()=>{l.removeEventListener("change",h)}}}},addProseMirrorPlugins(){const t=this.options,e=globalThis;let n,r;return[WV({parser:o=>{if(!t.editor.settings.codeBlock.createHighlighter)return[];if(!n)return e[gg]=e[gg]||t.editor.settings.codeBlock.createHighlighter(),e[gg].then(i=>{n=i});const s=yg(t.editor.settings.codeBlock,o.language);return!s||s==="text"||s==="none"||s==="plaintext"||s==="txt"?[]:n.getLoadedLanguages().includes(s)?(r||(r=e[YC]||GV(n),e[YC]=r),r(o)):n.loadLanguage(s)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options;return[new ws({find:/^```(.*?)\s$/,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=r[1].trim(),i={language:yg(t.editor.settings.codeBlock,s)??s};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,i).setSelection(U.create(e.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:n}=e;if(t.isActive(this.name)&&!n.parent.textContent&&mp(e)){const r=n.pos-n.parentOffset-2;return t.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const n=e.parentOffset===e.parent.nodeSize-2,r=e.parent.textContent.endsWith(`

`);return!n||!r?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:o})=>(o.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),aW=Po(iW,sW);function yg(t,e){var n;return(n=Object.entries(t.supportedLanguages).find(([r,{aliases:o}])=>(o==null?void 0:o.includes(e))||r===e))==null?void 0:n[0]}const lW=Et.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),cW=Xs(lW,"string"),dW=Et.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),uW=Xs(dW,"string"),XC=t=>({url:t.src||void 0}),hW={backgroundColor:st.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},J_={type:"file",propSchema:hW,content:"none",isFileBlock:!0},fW=(t,e)=>W1(t,e),Y_=t=>{if(t.tagName==="EMBED")return t.closest("figure")?void 0:XC(t);if(t.tagName==="FIGURE"){const e=Dp(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e;return{...XC(n),caption:r}}},pW=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?Pp(e,t.props.caption):{dom:e}},mW=Rd(J_,{render:fW,parse:Y_,toExternalHTML:pW}),X_={...st,level:{default:1,values:[1,2,3]}},gW=qn({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return Ad(X_)},addInputRules(){return[...[1,2,3].map(t=>new ws({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:n,range:r})=>{const o=Oe(e);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(Ct(o.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){return{"Mod-Alt-1":()=>{const t=Oe(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ct(t.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":()=>{const t=Oe(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ct(t.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":()=>{const t=Oe(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ct(t.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;return Hr(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),yW=Po(gW,X_),Q_=(t,e,n,r,o,s)=>{const{dom:i,destroy:a}=W1(t,e,n,o,s),l=i;t.props.url&&t.props.showPreview&&(t.props.previewWidth?l.style.width=`${t.props.previewWidth}px`:l.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const d=document.createElement("div");d.className="bn-resize-handle",d.style.right="4px";let u,h=t.props.previewWidth;const f=w=>{var k,C;if(!u){!e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d));return}let S;t.props.textAlignment==="center"?u.handleUsed==="left"?S=u.initialWidth+(u.initialClientX-w.clientX)*2:S=u.initialWidth+(w.clientX-u.initialClientX)*2:u.handleUsed==="left"?S=u.initialWidth+u.initialClientX-w.clientX:S=u.initialWidth+w.clientX-u.initialClientX,h=Math.min(Math.max(S,64),((C=(k=e.domElement)==null?void 0:k.firstElementChild)==null?void 0:C.clientWidth)||Number.MAX_VALUE),l.style.width=`${h}px`},p=w=>{(!w.target||!l.contains(w.target)||!e.isEditable)&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d)),u&&(u=void 0,e.updateBlock(t,{props:{previewWidth:h}}))},g=()=>{e.isEditable&&(r.appendChild(c),r.appendChild(d))},b=w=>{w.relatedTarget===c||w.relatedTarget===d||u||e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},v=w=>{w.preventDefault(),u={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:w.clientX}},x=w=>{w.preventDefault(),u={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:w.clientX}};return window.addEventListener("mousemove",f),window.addEventListener("mouseup",p),l.addEventListener("mouseenter",g),l.addEventListener("mouseleave",b),c.addEventListener("mousedown",v),d.addEventListener("mousedown",x),{dom:l,destroy:()=>{a==null||a(),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p),l.removeEventListener("mouseenter",g),l.removeEventListener("mouseleave",b),c.removeEventListener("mousedown",v),d.removeEventListener("mousedown",x)}}},QC=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},bW='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',vW={textAlignment:st.textAlignment,backgroundColor:st.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},eI={type:"image",propSchema:vW,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},wW=(t,e)=>{const n=document.createElement("div");n.innerHTML=bW;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),Q_(t,e,{dom:r},r,e.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},tI=t=>{if(t.tagName==="IMG")return t.closest("figure")?void 0:QC(t);if(t.tagName==="FIGURE"){const e=Dp(t,"img");if(!e)return;const{targetElement:n,caption:r}=e;return{...QC(n),caption:r}}},xW=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?G1(e,t.props.caption):Pp(e,t.props.caption):{dom:e}},kW=Rd(eI,{render:wW,parse:tI,toExternalHTML:xW});function q1(t,e,n){var r,o,s;const i=xo.fromSchema(e),a=t,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const f of Array.from(a.childNodes))l.appendChild(f.cloneNode(!0));let c=i.parse(l,{topNode:e.nodes.blockGroup.create()});((o=(r=c.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const d=(s=c.firstChild)==null?void 0:s.firstChild;if(!(d!=null&&d.isTextblock))return _.from(c);const u=e.nodes[n].create({},d.content),h=c.content.cut(d.nodeSize+2);if(h.size>0){const f=c.copy(h);return u.content.addToEnd(f)}return u.content}const nI=(t,e,n)=>({state:r,dispatch:o})=>{const s=Ao(r.doc,t),i=Es(s);if(!i.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const a=[{type:i.bnBlock.node.type,attrs:n?{...i.bnBlock.node.attrs,id:void 0}:{}},{type:e?i.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...i.blockContent.node.attrs}:{}}];return o&&r.tr.split(t,2,a),!0},K1=t=>{const{blockInfo:e,selectionEmpty:n}=t.transact(s=>({blockInfo:Rp(s),selectionEmpty:s.selection.anchor===s.selection.head}));if(!e.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=e;return!(o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:t._tiptapEditor.commands.first(({state:s,chain:i,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(Ct(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(i().deleteSelection().command(nI(s.selection.from,!0)).run(),!0):!1)])},CW={...st},SW=qn({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new ws({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Oe(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Ct(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>K1(this.options.editor),"Mod-Shift-8":()=>{const t=Oe(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ct(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"?{}:!1},getContent:(t,e)=>q1(t,e,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Hr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),TW=Po(SW,CW),rI={...st,checked:{default:!1}},EW=qn({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return Ad(rI)},addInputRules(){return[new ws({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Oe(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Ct(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new ws({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Oe(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Ct(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>K1(this.options.editor),"Mod-Shift-9":()=>{const t=Oe(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ct(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:t=>typeof t=="string"||t.closest("[data-content-type]")||t.closest("li")?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"){const r=t.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(t,e)=>q1(t,e,this.name),node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=t.attrs.checked,t.attrs.checked&&o.setAttribute("checked","");const{dom:s,contentDOM:i}=Hr(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return s.insertBefore(o,i),{dom:s,contentDOM:i}},addNodeView(){return({node:t,getPos:e,editor:n,HTMLAttributes:r})=>{var o,s;const i=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=t.attrs.checked,t.attrs.checked&&l.setAttribute("checked","");const c=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof e!="boolean"){const h=Ao(n.state.doc,e());if(h.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${h.node.type.name}`);this.editor.commands.command(Ct(h.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",c);const{dom:d,contentDOM:u}=Hr(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{});if(typeof e!="boolean"){const h="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;l.setAttribute("aria-labelledby",h),u.id=h}return d.removeChild(u),d.appendChild(i),i.appendChild(a),i.appendChild(u),a.appendChild(l),{dom:d,contentDOM:u,destroy:()=>{l.removeEventListener("change",c)}}}}}),MW=Po(EW,rI),AW=new Te("numbered-list-indexing"),RW=()=>new me({key:AW,appendTransaction:(t,e,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((s,i)=>{var a;if(s.type.name==="blockContainer"&&s.firstChild.type.name==="numberedListItem"){let l=`${s.firstChild.attrs.start||1}`;const c=Es({posBeforeNode:i,node:s});if(!c.isBlockContainer)throw new Error("impossible");const d=r.doc.resolve(c.bnBlock.beforePos).nodeBefore;if(d){const p=Es({posBeforeNode:c.bnBlock.beforePos-d.nodeSize,node:d});if(p.blockNoteType==="numberedListItem"){if(!p.isBlockContainer)throw new Error("impossible");const g=p.blockContent.node.attrs.index;l=(parseInt(g)+1).toString()}}const u=c.blockContent.node,h=u.attrs.index,f=((a=d==null?void 0:d.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(h!==l||u.attrs.start&&!f){o=!0;const{start:p,...g}=u.attrs;r.setNodeMarkup(c.blockContent.beforePos,void 0,{...g,index:l,...typeof p=="number"&&f&&{start:p}})}}}),o?r:null}}),oI={...st,start:{default:void 0,type:"number"}},_W=qn({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...Ad(oI),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new ws({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:n,match:r})=>{const o=Oe(t);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem")return;const s=parseInt(r[1]);e().command(Ct(o.bnBlock.beforePos,{type:"numberedListItem",props:s===1&&{}||{start:s}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>K1(this.options.editor),"Mod-Shift-7":()=>{const t=Oe(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ct(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[RW()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return t.previousSibling||r===1?{}:{start:r}}return!1},getContent:(t,e)=>q1(t,e,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Hr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),IW=Po(_W,oI),NW={...st},DW=qn({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=Oe(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ct(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,n;return Hr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),PW=Po(DW,NW),OW={...st},LW=qn({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new ws({find:new RegExp("^>\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Oe(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Ct(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const t=Oe(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ct(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML({HTMLAttributes:t}){var e,n;return Hr(this.name,"blockquote",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),jW=Po(LW,OW),BW=35,Z1=120,VW=31,$W=De.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[X$({cellMinWidth:BW,defaultCellMinWidth:Z1,View:null}),l6()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>Jk(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>Jk(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:ye(W(t,"tableRole",e))}}}),HW={textColor:st.textColor},FW=qn({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){var e,n;return Hr(this.name,"table",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends cR{constructor(s,i,a){super(s,i),this.node=s,this.cellMinWidth=i,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=je("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[h,f]of Object.entries(a))h!=="class"&&l.setAttribute(h,f);const c=this.dom,d=document.createElement("div");d.className="tableWrapper-inner",d.appendChild(c.firstChild),c.appendChild(d),l.appendChild(c);const u=document.createElement("div");u.className="table-widgets-container",u.style.position="relative",c.appendChild(u),this.dom=l}ignoreMutation(s){return!s.target.closest(".tableWrapper-inner")||super.ignoreMutation(s)}}return new r(t,Z1,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),zW=qn({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),UW=Kr.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",kn(this.options.HTMLAttributes,t),0]}});function eS(t,e){const n=xo.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),_.fromArray(r)}const WW=Po(FW,HW,[$W,zW,h$.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(t,e)=>eS(t,e)}]}}),u$.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(t,e)=>eS(t,e)}]}}),UW]),tS=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},GW='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',qW={textAlignment:st.textAlignment,backgroundColor:st.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},sI={type:"video",propSchema:qW,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},KW=(t,e)=>{const n=document.createElement("div");n.innerHTML=GW;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,r.appendChild(o),Q_(t,e,{dom:r},r,e.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},iI=t=>{if(t.tagName==="VIDEO")return t.closest("figure")?void 0:tS(t);if(t.tagName==="FIGURE"){const e=Dp(t,"video");if(!e)return;const{targetElement:n,caption:r}=e;return{...tS(n),caption:r}}},ZW=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?G1(e,t.props.caption):Pp(e,t.props.caption):{dom:e}},JW=Rd(sI,{render:KW,parse:iI,toExternalHTML:ZW}),J1={paragraph:PW,heading:yW,quote:jW,codeBlock:aW,bulletListItem:TW,numberedListItem:IW,checkListItem:MW,table:WW,file:mW,image:kW,video:JW,audio:oW},YW=I_(J1),Y1={bold:Xs(XV,"boolean"),italic:Xs(i$,"boolean"),underline:Xs(d$,"boolean"),strike:Xs(c$,"boolean"),code:Xs(t$,"boolean"),textColor:uW,backgroundColor:cW};j_(Y1);const aI={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},XW=L_(aI);function tn(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===YW[t]}function QW(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===XW[t]}function eG(t,e,n){return e.type===t&&e.type in n.schema.blockSchema&&tn(e.type,n)}function Nd(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function tG(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function Dd(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function la(t,e,n){return e in n.schema.blockSchema&&t in n.schema.blockSchema[e].propSchema&&n.schema.blockSchema[e].propSchema[t]===st[t]}function Sb(t,e,n){return la(t,e.type,n)}function Tb(t){return t instanceof Re}function nG(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function en(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&_i(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),nG(t),r}function rG(t){const e=[];return tn("heading",t)&&e.push({onItemClick:()=>{en(t,{type:"heading",props:{level:1}})},badge:On("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{en(t,{type:"heading",props:{level:2}})},badge:On("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{en(t,{type:"heading",props:{level:3}})},badge:On("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),tn("quote",t)&&e.push({onItemClick:()=>{en(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),tn("numberedListItem",t)&&e.push({onItemClick:()=>{en(t,{type:"numberedListItem"})},badge:On("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),tn("bulletListItem",t)&&e.push({onItemClick:()=>{en(t,{type:"bulletListItem"})},badge:On("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),tn("checkListItem",t)&&e.push({onItemClick:()=>{en(t,{type:"checkListItem"})},badge:On("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),tn("paragraph",t)&&e.push({onItemClick:()=>{en(t,{type:"paragraph"})},badge:On("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),tn("codeBlock",t)&&e.push({onItemClick:()=>{en(t,{type:"codeBlock"})},badge:On("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),tn("table",t)&&e.push({onItemClick:()=>{en(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),tn("image",t)&&e.push({onItemClick:()=>{const n=en(t,{type:"image"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"image",...t.dictionary.slash_menu.image}),tn("video",t)&&e.push({onItemClick:()=>{const n=en(t,{type:"video"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"video",...t.dictionary.slash_menu.video}),tn("audio",t)&&e.push({onItemClick:()=>{const n=en(t,{type:"audio"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"audio",...t.dictionary.slash_menu.audio}),tn("file",t)&&e.push({onItemClick:()=>{const n=en(t,{type:"file"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"file",...t.dictionary.slash_menu.file}),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function oG(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(e.toLowerCase())).length!==0)}function bg(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let X1=class lI{constructor(e){A(this,"blockSpecs"),A(this,"inlineContentSpecs"),A(this,"styleSpecs"),A(this,"blockSchema"),A(this,"inlineContentSchema"),A(this,"styleSchema"),A(this,"BlockNoteEditor","only for types"),A(this,"Block","only for types"),A(this,"PartialBlock","only for types"),this.blockSpecs=bg(e==null?void 0:e.blockSpecs)||J1,this.inlineContentSpecs=bg(e==null?void 0:e.inlineContentSpecs)||aI,this.styleSpecs=bg(e==null?void 0:e.styleSpecs)||Y1,this.blockSchema=I_(this.blockSpecs),this.inlineContentSchema=L_(this.inlineContentSpecs),this.styleSchema=j_(this.styleSpecs)}static create(e){return new lI(e)}};const sG={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},iG=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},aG=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},lG=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},cG=Rd(sG,{render:iG,parse:aG,toExternalHTML:lG});X1.create({blockSpecs:{pageBreak:cG}});function dG(t){return t.transact(e=>{const n=Ao(e.doc,e.selection.anchor);if(e.selection instanceof Re)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof q)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=Ao(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function uG(t,e){var n,r;const o=(n=Sn(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let s;if(e.type==="cell")s=Re.create(t.doc,o+e.anchorCellOffset,o+e.headCellOffset);else if(e.type==="node")s=q.create(t.doc,o+1);else{const i=(r=Sn(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(i===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);s=U.create(t.doc,o+e.anchorOffset,i+e.headOffset)}t.setSelection(s)}function Eb(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>Eb(n.children)).flat():{...e,children:Eb(e.children)}).flat()}function cI(t,e,n){t.transact(r=>{var o;const s=((o=t.getSelection())==null?void 0:o.blocks)||[t.getTextCursorPosition().block],i=dG(t);t.removeBlocks(s),t.insertBlocks(Eb(s),e,n),uG(r,i)})}function dI(t){return!t||t.type!=="columnList"}function uI(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[e.children.length-1],o="after"):(r=e,o="before"):n&&(r=n,o="before"),!r||!o)return;const s=t.getParentBlock(r);return dI(s)?{referenceBlock:r,placement:o}:uI(t,o==="after"?r:t.getPrevBlock(r),s)}function hI(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[0],o="before"):(r=e,o="after"):n&&(r=n,o="after"),!r||!o)return;const s=t.getParentBlock(r);return dI(s)?{referenceBlock:r,placement:o}:hI(t,o==="before"?r:t.getNextBlock(r),s)}function hG(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[0])||t.getTextCursorPosition().block,r=uI(t,t.getPrevBlock(n),t.getParentBlock(n));r&&cI(t,r.referenceBlock,r.placement)})}function fG(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[(e==null?void 0:e.blocks.length)-1])||t.getTextCursorPosition().block,r=hI(t,t.getNextBlock(n),t.getParentBlock(n));r&&cI(t,r.referenceBlock,r.placement)})}function pG(t,e){return function(n,r){const{$from:o,$to:s}=n.selection,i=o.blockRange(s,c=>c.childCount>0&&(c.type.name==="blockGroup"||c.type.name==="column"));if(!i)return!1;const a=i.startIndex;if(a===0)return!1;const l=i.parent.child(a-1);if(l.type!==t)return!1;if(r){const c=l.lastChild&&l.lastChild.type===e,d=_.from(c?t.create():null),u=new j(_.from(t.create(null,_.from(e.create(null,d)))),c?3:1,0),h=i.start,f=i.end;r(n.tr.step(new nt(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}function fI(t){return t.exec((e,n)=>pG(e.schema.nodes.blockContainer,e.schema.nodes.blockGroup)(e,n))}function mG(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function gG(t){return t.transact(e=>{const{bnBlock:n}=Rp(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function yG(t){return t.transact(e=>{const{bnBlock:n}=Rp(e);return e.doc.resolve(n.beforePos).depth>1})}function bG(t,e){const n=typeof e=="string"?e:e.id,r=pt(t),o=Sn(n,t);if(o)return ze(o.node,r)}function vG(t,e){const n=typeof e=="string"?e:e.id,r=Sn(n,t),o=pt(t);if(!r)return;const s=t.resolve(r.posBeforeNode).nodeBefore;if(s)return ze(s,o)}function wG(t,e){const n=typeof e=="string"?e:e.id,r=Sn(n,t),o=pt(t);if(!r)return;const s=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(s)return ze(s,o)}function xG(t,e){const n=typeof e=="string"?e:e.id,r=pt(t),o=Sn(n,t);if(!o)return;const s=t.resolve(o.posBeforeNode),i=s.node(),a=s.node(-1),l=a.type.name!=="doc"?i.type.name==="blockGroup"?a:i:void 0;if(l)return ze(l,r)}function kG(t,e,n,r={updateSelection:!0}){let{from:o,to:s}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},i=!0,a=!0,l="";if(n.forEach(c=>{c.check(),i&&c.isText&&c.marks.length===0?l+=c.text:i=!1,a=a?c.isBlock:!1}),o===s&&a){const{parent:c}=t.doc.resolve(o);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(o-=1,s+=1)}return i?t.insertText(l,o,s):t.replaceWith(o,s,n),r.updateSelection&&FA(t,t.steps.length-1,-1),!0}function CG(t){const e=pt(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(Ao(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(Ao(t.doc,t.selection.to).posBeforeNode),o=(c,d)=>{const u=n.posAtIndex(c,d),h=t.doc.resolve(u).nodeAfter;if(!h)throw new Error(`Error getting selection - node not found at position ${u}`);return ze(h,e)},s=[],i=n.sharedDepth(r.pos),a=n.index(i),l=r.index(i);if(n.depth>i){s.push(ze(n.nodeAfter,e));for(let c=n.depth;c>i;c--)if(n.node(c).type.isInGroup("childContainer")){const d=n.index(c)+1,u=n.node(c).childCount;for(let h=d;h<u;h++)s.push(o(h,c))}}else s.push(o(a,i));for(let c=a+1;c<=l;c++)s.push(o(c,i));if(s.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:s}}function SG(t,e,n){const r=typeof e=="string"?e:e.id,o=typeof n=="string"?n:n.id,s=pt(t),i=Id(s);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=Sn(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=Sn(o,t.doc);if(!l)throw new Error(`Block with ID ${o} not found`);const c=Es(a),d=Es(l),u=i.blockSchema[c.blockNoteType],h=i.blockSchema[d.blockNoteType];if(!c.isBlockContainer||u.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!d.isBlockContainer||h.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let f,p;if(u.content==="table"){const g=Fe.get(c.blockContent.node);f=c.blockContent.beforePos+g.positionAt(0,0,c.blockContent.node)+1+2}else f=c.blockContent.beforePos+1;if(h.content==="table"){const g=Fe.get(d.blockContent.node),b=d.blockContent.beforePos+g.positionAt(g.height-1,g.width-1,d.blockContent.node)+1,v=t.doc.resolve(b).nodeAfter.nodeSize;p=b+v-2}else p=d.blockContent.afterPos-1;t.setSelection(U.create(t.doc,f,p))}function TG(t){const e=pt(t);let n=t.selection.$from,r=t.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=t.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=t.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=t.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=t.doc.resolve(n.pos+1);const o=DU(t.doc.slice(n.pos,r.pos,!0),e);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function EG(t){const{bnBlock:e}=Rp(t),n=pt(t.doc),r=t.doc.resolve(e.beforePos),o=r.nodeBefore,s=t.doc.resolve(e.afterPos).nodeAfter;let i;return r.depth>1&&(i=r.node(),i.type.isInGroup("bnBlock")||(i=r.node(r.depth-1))),{block:ze(e.node,n),prevBlock:o===null?void 0:ze(o,n),nextBlock:s===null?void 0:ze(s,n),parentBlock:i===void 0?void 0:ze(i,n)}}function pI(t,e,n="start"){const r=typeof e=="string"?e:e.id,o=pt(t.doc),s=Id(o),i=Sn(r,t.doc);if(!i)throw new Error(`Block with ID ${r} not found`);const a=Es(i),l=s.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const c=a.blockContent;if(l==="none"){t.setSelection(q.create(t.doc,c.beforePos));return}if(l==="inline")n==="start"?t.setSelection(U.create(t.doc,c.beforePos+1)):t.setSelection(U.create(t.doc,c.afterPos-1));else if(l==="table")n==="start"?t.setSelection(U.create(t.doc,c.beforePos+4)):t.setSelection(U.create(t.doc,c.afterPos-4));else throw new $r(l)}else{const c=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;pI(t,c.attrs.id,n)}}let ca;async function Q1(){if(ca)return ca;const t=await Promise.all([wt(()=>import("./index-rjhLG1eB.js"),__vite__mapDeps([0,1,2,3,4,5])),wt(()=>import("./index-uAn85tBp.js"),__vite__mapDeps([6,4,2,3,7])),wt(()=>import("./index-CWmy4eKR.js"),__vite__mapDeps([8,3,1,2])),wt(()=>import("./index-CfyObm-o.js"),__vite__mapDeps([9,5,4])),wt(()=>import("./index-yU9Yh-H5.js"),__vite__mapDeps([10,11,12,2,3,7])),wt(()=>import("./index-JH4Gotpn.js"),__vite__mapDeps([13,2,3])),wt(()=>import("./index-FrdabaJ1.js"),__vite__mapDeps([14,2,3])),wt(()=>import("./index-BgBG5lba.js"),__vite__mapDeps([15,2,3])),wt(()=>import("./index-BlSIl150.js"),__vite__mapDeps([16,11,2,3])),wt(()=>import("./index-BGm_t98o.js"),__vite__mapDeps([17,12,2,3,7]))]);return ca={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},ca}function MG(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const o=e.children[r];if(o.type==="element"&&(t(o),o.tagName==="u"))if(o.children.length>0){e.children.splice(r,1,...o.children);const s=o.children.length-1;n+=s,r+=s}else e.children.splice(r,1),n--,r--}};return t}function AG(){const t=ca;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const s=n.children[o],i=o+1<n.children.length?n.children[o+1]:void 0;s.type==="element"&&s.tagName==="input"&&((r=s.properties)==null?void 0:r.type)==="checkbox"&&(i==null?void 0:i.type)==="element"&&i.tagName==="p"?(i.tagName="span",i.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(s)}};return e}function ev(t){const e=ca;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(MG).use(AG).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(t).value}async function RG(t,e,n,r){await Q1();const o=Np(e,n).exportBlocks(t,r);return ev(o)}function _G(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function IG(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function NG(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=_G(e),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(s=>{s.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(s=>{if(IG(s))return;const i=document.createElement("li");i.append(s),e.insertAdjacentElement("afterend",i)}),r.childNodes.length===0&&r.remove()})}function DG(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const o=e.previousElementSibling,s=document.createElement("div");o.insertAdjacentElement("afterend",s),s.append(o);const i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),s.append(i);((n=s.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=s.nextElementSibling)==null?void 0:r.nodeName)==="OL";)i.append(s.nextElementSibling)})}let nS=null;function PG(){return nS||(nS=document.implementation.createHTMLDocument("title"))}function mI(t){if(typeof t=="string"){const e=PG().createElement("div");e.innerHTML=t,t=e}return NG(t),DG(t),t}async function gI(t,e){const n=mI(t),r=xo.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),o=[];for(let s=0;s<r.childCount;s++)o.push(ze(r.child(s),e));return o}function OG(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}async function yI(t){const e=await Q1();return e.unified.unified().use(e.remarkParse.default).use(e.remarkGfm.default).use(e.remarkRehype.default,{handlers:{...e.remarkRehype.defaultHandlers,code:OG}}).use(e.rehypeStringify.default).processSync(t).value}async function LG(t,e){const n=await yI(t);return gI(n,e)}const tv=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function jG(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function BG(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function rS(t,e,n){let r;return Array.isArray(e.content)&&e.content.length===0?r=t.updateBlock(e,n).id:r=t.insertBlocks([n],e,"after")[0].id,r}async function bI(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let o=null;for(const a of tv)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const s=r.items;if(!s)return;t.preventDefault();const i=Object.values(e.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<s.length;a++){let l="file";for(const d of i)for(const u of d.fileBlockAccept||[]){const h=u.startsWith("."),f=s[a].getAsFile();if(f&&(!h&&f.type&&BG(s[a].type,u)||h&&jG("."+f.name.split(".").pop(),u))){l=d.type;break}}const c=s[a].getAsFile();if(c){const d={type:l,props:{name:c.name}};let u;if(t.type==="paste"){const p=e.getTextCursorPosition().block;u=rS(e,p,d)}else if(t.type==="drop"){const p={left:t.clientX,top:t.clientY},g=(n=e.prosemirrorView)==null?void 0:n.posAtCoords(p);if(!g)return;u=e.transact(b=>{const v=Ao(b.doc,g.pos);return rS(e,e.getBlock(v.node.attrs.id),d)})}else return;const h=await e.uploadFile(c,u),f=typeof h=="string"?{props:{url:h}}:{...h};e.updateBlock(u,f)}}}const VG=t=>De.create({name:"dropFile",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const o of tv)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(bI(n,t),!0):!1}}}})]}}),$G=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,HG=new RegExp("(?:\\s|^)(_|__|\\*|\\*\\*|~~|==|\\+\\+)(?!\\s).{1,64}(?<!\\s)(?=\\1)"),FG=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,zG=new RegExp("(?:\\s|^)`(?!\\s)[^`]{1,48}(?<!\\s)`([^\\w]|$)"),UG=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,WG=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,GG=/\n{2} {0,3}-{2,48}\n{2}/,qG=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,KG=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,ZG=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,JG=/^\s*\|(.+\|)+\s*$/m,YG=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,XG=/^\s*\|(.+\|)+\s*$/m,QG=t=>$G.test(t)||HG.test(t)||FG.test(t)||zG.test(t)||UG.test(t)||WG.test(t)||GG.test(t)||qG.test(t)||KG.test(t)||ZG.test(t)||JG.test(t)||YG.test(t)||XG.test(t);async function eq(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const o=t.clipboardData.getData("vscode-editor-data"),s=o?JSON.parse(o):void 0,i=s==null?void 0:s.mode;return i?(e.pasteHTML(`<pre><code class="language-${i}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function tq({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(e.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(a)return e.pasteText(a),!0}let s;for(const a of tv)if(t.clipboardData.types.includes(a)){s=a;break}if(!s)return!0;if(s==="vscode-editor-data")return eq(t,e.prosemirrorView),!0;if(s==="Files")return bI(t,e),!0;const i=t.clipboardData.getData(s);if(s==="blocknote/html")return e.pasteHTML(i,!0),!0;if(s==="text/markdown")return e.pasteMarkdown(i),!0;if(n){const a=t.clipboardData.getData("text/plain");if(QG(a))return e.pasteMarkdown(a),!0}return s==="text/html"?(e.pasteHTML(i),!0):r?(e.pasteMarkdown(i),!0):(e.pasteText(i),!0)}const nq=(t,e)=>De.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:s=!0}={})=>tq({event:r,editor:t,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:s})})}}}})]}});function vI(t){const e=[];return t.descendants(n=>{var r,o;const s=pt(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(i=>{e.push(ze(i,s))}),!1):n.type.isInGroup("bnBlock")?(e.push(ze(n,s)),!1):!0}),e}function rq(t,e,n){var r;let o=!1;const s=t.state.selection instanceof Re;if(!s){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,c=[];for(let d=0;d<l.childCount;d++)c.push(l.child(d));o=c.find(d=>d.type.isInGroup("bnBlock")||d.type.name==="blockGroup"||d.type.spec.group==="blockContent")===void 0,o&&(e=l)}let i;const a=Np(t.state.schema,n);if(s){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=O_(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=_p(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=a.exportInlineContent(l,{})}else{const l=vI(e);i=a.exportBlocks(l,{})}return i}function wI(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(i=>i.setSelection(new q(i.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,o=rq(t,r,e),s=ev(o);return{clipboardHTML:n,externalHTML:o,markdown:s}}const oS=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},sS=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=wI(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",s)},oq=t=>De.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{copy(e,n){return oS()||sS(t,e,n),!0},cut(e,n){return oS()||(sS(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(i=>i.setSelection(new q(i.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=wI(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",s),!0}}}})]}}),sq=De.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:st.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):st.backgroundColor.default,renderHTML:t=>t.backgroundColor===st.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});let nv=class{constructor(){A(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(o=>o.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}},Mt=class extends nv{constructor(...e){super(),A(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}};const xI=class kI extends Mt{constructor(e){super(),A(this,"provider"),A(this,"recentlyUpdatedCursors"),A(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const s=(this.collaboration.renderCursor??kI.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(s.addEventListener("mouseenter",()=>{const i=this.recentlyUpdatedCursors.get(r);i.element.setAttribute("data-active",""),i.hideTimeout&&(clearTimeout(i.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:void 0}))}),s.addEventListener("mouseleave",()=>{const i=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:setTimeout(()=>{i.element.removeAttribute("data-active")},2e3)})})),o={element:s,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),A(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=e,this.provider=e.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",e.user),e.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(mU(this.provider.awareness,{selectionBuilder:A_,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}};A(xI,"defaultCursorRender",t=>{const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode("â "),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode("â "),null),e});let CI=xI,Mb=class extends Mt{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(Qz(e))}get priority(){return 1001}},Ab=class extends Mt{static key(){return"yUndoPlugin"}constructor(){super(),this.addProsemirrorPlugin(kU())}get priority(){return 1e3}};const SI=Et.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",kn(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});class iq extends nv{constructor(e){super(),A(this,"userCache",new Map),A(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const Eu=new Te("blocknote-comments"),aq="SET_SELECTED_THREAD_ID";function lq(t,e){const n=new Map;return t.descendants((r,o)=>{r.marks.forEach(s=>{if(s.type.name===e){const i=s.attrs.threadId;if(!i)return;const a=o,l=a+r.nodeSize,c=n.get(i)??{from:1/0,to:0};n.set(i,{from:Math.min(a,c.from),to:Math.max(l,c.to)})}})}),n}class cq extends Mt{constructor(e,n,r){if(super(),A(this,"userStore"),A(this,"pendingComment",!1),A(this,"selectedThreadId"),A(this,"threadPositions",new Map),A(this,"updateMarksFromThreads",s=>{this.editor.transact(i=>{i.doc.descendants((a,l)=>{a.marks.forEach(c=>{if(c.type.name===this.markType){const d=c.type,u=c.attrs.threadId,h=s.get(u),f=!!(!h||h.resolved||h.deletedAt);if(f!==c.attrs.orphan){const p=Math.max(l,0),g=Math.min(l+a.nodeSize,i.doc.content.size-1,i.doc.content.size-1);i.removeMark(p,g,c),i.addMark(p,g,d.create({...c.attrs,orphan:f})),f&&this.selectedThreadId===u&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=n,this.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new iq(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new me({key:Eu,state:{init(){return{decorations:be.empty}},apply(s,i){const a=s.getMeta(Eu);if(!s.docChanged&&!a)return i;const l=s.docChanged?lq(s.doc,o.markType):o.threadPositions;(l.size>0||o.threadPositions.size>0)&&(o.threadPositions=l,o.emitStateUpdate());const c=[];if(o.selectedThreadId){const d=l.get(o.selectedThreadId);d&&c.push(Ae.inline(d.from,d.to,{class:"bn-thread-mark-selected"}))}return{decorations:be.create(s.doc,c)}}},props:{decorations(s){var i;return((i=Eu.getState(s))==null?void 0:i.decorations)??be.empty},handleClick:(s,i,a)=>{if(a.button!==0)return;const l=s.state.doc.nodeAt(i);if(!l){o.selectThread(void 0);return}const c=l.marks.find(u=>u.type.name===r&&u.attrs.orphan!==!0),d=c==null?void 0:c.attrs.threadId;o.selectThread(d,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e,n=!0){var r,o;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(s=>s.setMeta(Eu,{name:aq})),e&&n)){const s=this.threadPositions.get(e);if(!s)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(s.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const n=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,s=Ee.getState(r.state),i={prosemirror:{head:o.head,anchor:o.anchor},yjs:s?wf(s.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:i})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class dq{constructor(e,n,r,o){A(this,"state"),A(this,"emitUpdate"),A(this,"mouseDownHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"dragstartHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var s;if((s=this.state)!=null&&s.show){const i=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!i)return;this.state.referencePos=i.getBoundingClientRect(),this.emitUpdate()}}),A(this,"closeMenu",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const s=this.pluginKey.getState(e.state),i=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&s!=null&&s.block&&this.editor.isEditable){const c=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${s.block.id}"]`);if(!c)return;this.state={show:!0,referencePos:c.getBoundingClientRect(),block:s.block},this.emitUpdate();return}const a=(s==null?void 0:s.block)&&!(i!=null&&i.block),l=!(s!=null&&s.block)&&(i==null?void 0:i.block);a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const vg=new Te("FilePanelPlugin");class uq extends Mt{constructor(e){super(),A(this,"view"),A(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new me({key:vg,view:n=>(this.view=new dq(e,vg,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(vg)||(!n.getMeta(Ee)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}class hq{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"preventHide",!1),A(this,"preventShow",!1),A(this,"shouldShow",({view:o,state:s,from:i,to:a})=>{const{doc:l,selection:c}=s,{empty:d}=c,u=!l.textBetween(i,a).length&&mp(s.selection);if(c.$from.parent.type.spec.code||zy(c)&&c.node.type.spec.code||d||u)return!1;const h=document.activeElement;return!(!this.isElementWithinEditorWrapper(h)&&o.editable)}),A(this,"blurHandler",o=>{var s;if(this.preventHide){this.preventHide=!1;return}const i=this.pmView.dom.parentElement;o&&o.relatedTarget&&(i===o.relatedTarget||i.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const s=this.pmView.dom.parentElement;return s?s.contains(o):!1}),A(this,"viewMousedownHandler",o=>{this.isElementWithinEditorWrapper(o.target)||(this.preventShow=!0)}),A(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),A(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),A(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o,s;const{state:i,composing:a}=e,{doc:l,selection:c}=i,d=n&&n.doc.eq(l)&&n.selection.eq(c);if(a||d)return;const{ranges:u}=c,h=Math.min(...u.map(b=>b.$from.pos)),f=Math.max(...u.map(b=>b.$to.pos)),p=this.shouldShow({view:e,state:i,from:h,to:f}),g=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(p||this.preventHide)&&!g){const b={show:!0,referencePos:this.getSelectionBoundingBox()};(b.show!==((r=this.state)==null?void 0:r.show)||b.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=b,this.emitUpdate());return}if((s=this.state)!=null&&s.show&&!this.preventHide&&(!p||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:n}=e,{ranges:r}=n,o=Math.min(...r.map(i=>i.$from.pos)),s=Math.max(...r.map(i=>i.$to.pos));if(zy(n)){const i=this.pmView.nodeDOM(o);if(i)return i.getBoundingClientRect()}return Oh(this.pmView,o,s)}}const fq=new Te("FormattingToolbarPlugin");class pq extends Mt{constructor(e){super(),A(this,"view"),A(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new me({key:fq,view:n=>(this.view=new hq(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}const mq=Kr.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",kn(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),iS=(t,e)=>{const n=t.resolve(e);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return _d(t.resolve(r))},ch=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return _d(t.resolve(o))},TI=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=_d(t.resolve(r))}return e},gq=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",yq=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=t.doc.resolve(r.childContainer.beforePos+1),s=t.doc.resolve(r.childContainer.afterPos-1),i=o.blockRange(s);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(i,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},aS=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),o=_d(r),s=ch(e.doc,o.bnBlock.beforePos);if(!s)return!1;const i=TI(e.doc,s);return gq(i,o)?yq(e,n,i,o):!1},bq=De.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:s})=>{const i=Oe(s);if(!i.isBlockContainer)return!1;const a=s.selection.from===i.blockContent.beforePos+1,l=i.blockContent.node.type.name==="paragraph";return a&&!l?o.command(Ct(i.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:s})=>{const i=Oe(s);if(!i.isBlockContainer)return!1;const{blockContent:a}=i;return s.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const i=Oe(s);if(!i.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=i,c=s.selection.from===l.beforePos+1,d=s.selection.empty,u=a.beforePos;return c&&d?r().command(aS(u)).scrollIntoView().run():!1}),()=>o.command(({state:s,dispatch:i})=>{const a=Oe(s);if(!a.isBlockContainer||s.selection.from!==a.blockContent.beforePos+1||ch(s.doc,a.bnBlock.beforePos))return!1;const l=iS(s.doc,a.bnBlock.beforePos);if((l==null?void 0:l.blockNoteType)!=="column")return!1;const c=l,d=iS(s.doc,c.bnBlock.beforePos);if((d==null?void 0:d.blockNoteType)!=="columnList")throw new Error("parent of column is not a column list");const u=c.childContainer.node.childCount===1,h=u&&d.childContainer.node.childCount===2,f=d.childContainer.node.firstChild===c.bnBlock.node;if(i){const p=s.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(h)if(f){s.tr.step(new nt(d.bnBlock.beforePos,d.bnBlock.afterPos,c.bnBlock.afterPos+1,d.bnBlock.afterPos-2,p,p.size,!1));const g=s.tr.doc.resolve(c.bnBlock.beforePos);s.tr.setSelection(U.between(g,g))}else{s.tr.step(new nt(d.bnBlock.beforePos,d.bnBlock.afterPos,d.bnBlock.beforePos+2,c.bnBlock.beforePos-1,p,0,!1));const g=s.tr.doc.resolve(s.tr.mapping.map(c.bnBlock.beforePos-1));s.tr.setSelection(U.between(g,g))}else if(u)if(f){s.tr.delete(c.bnBlock.beforePos,c.bnBlock.afterPos),s.tr.insert(d.bnBlock.beforePos,p.content);const g=s.tr.doc.resolve(d.bnBlock.beforePos);s.tr.setSelection(U.between(g,g))}else s.tr.delete(c.bnBlock.beforePos-1,c.bnBlock.beforePos+1);else{s.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),f?s.tr.insert(d.bnBlock.beforePos-1,p.content):s.tr.insert(c.bnBlock.beforePos-1,p.content);const g=s.tr.doc.resolve(c.bnBlock.beforePos-1);s.tr.setSelection(U.between(g,g))}}return!0}),()=>o.command(({state:s})=>{const i=Oe(s);if(!i.isBlockContainer)return!1;if(i.blockContent.node.childCount===0&&i.blockContent.node.type.spec.content==="inline*"){const a=ch(s.doc,i.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const c=i.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(c)}else if(a.blockContent.node.type.spec.content===""){const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(c)}else{const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(c)}return l.deleteRange({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:s})=>{const i=Oe(s);if(!i.isBlockContainer)throw new Error("todo");const a=s.selection.from===i.blockContent.beforePos+1,l=s.selection.empty,c=ch(s.doc,i.bnBlock.beforePos);if(c&&a&&l){const d=TI(s.doc,c);if(!d.isBlockContainer)throw new Error("todo");if(d.blockContent.node.type.spec.content===""||d.blockContent.node.type.spec.content==="inline*"&&d.blockContent.node.childCount===0)return r().cut({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos},d.bnBlock.afterPos).deleteRange({from:d.bnBlock.beforePos,to:d.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const s=Oe(o);if(!s.isBlockContainer)return!1;const{bnBlock:i,blockContent:a,childContainer:l}=s,{depth:c}=o.doc.resolve(i.beforePos),d=i.afterPos===o.doc.nodeSize-3,u=o.selection.from===a.afterPos-1,h=o.selection.empty;if(!d&&u&&h&&l===void 0){let f=c,p=i.afterPos+1,g=o.doc.resolve(p).depth;for(;g<f;)f=g,p+=2,g=o.doc.resolve(p).depth;return r.command(aS(p-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o})=>[()=>o.command(({state:s})=>{const i=Oe(s);if(!i.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=i,{depth:c}=s.doc.resolve(a.beforePos),d=s.selection.$anchor.parentOffset===0,u=s.selection.anchor===s.selection.head,h=l.node.childCount===0,f=c>1;return d&&u&&h&&f?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const i=Oe(s),a=this.options.editor.schema.blockSchema[i.blockNoteType].hardBreakShortcut??"shift+enter";return a==="none"?!1:a==="shift+enter"&&r||a==="enter"?o.insertContent({type:"hardBreak"}):!1}),()=>o.command(({state:s,dispatch:i})=>{const a=Oe(s);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=a,d=s.selection.$anchor.parentOffset===0,u=s.selection.anchor===s.selection.head,h=c.node.childCount===0;if(d&&u&&h){const f=l.afterPos,p=f+2;if(i){const g=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(f,g).scrollIntoView(),s.tr.setSelection(new U(s.doc.resolve(p)))}return!0}return!1}),()=>o.command(({state:s,chain:i})=>{const a=Oe(s);if(!a.isBlockContainer)return!1;const{blockContent:l}=a,c=s.selection.$anchor.parentOffset===0;return l.node.childCount===0?!1:(i().deleteSelection().command(nI(s.selection.from,c,c)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(s=this.options.editor.filePanel)!=null&&s.shown)?!1:fI(this.options.editor)},"Shift-Tab":()=>{var r,o,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(s=this.options.editor.filePanel)!=null&&s.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class vq{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"menuUpdateTimer"),A(this,"startMenuUpdateTimer"),A(this,"stopMenuUpdateTimer"),A(this,"mouseHoveredLinkMark"),A(this,"mouseHoveredLinkMarkRange"),A(this,"keyboardHoveredLinkMark"),A(this,"keyboardHoveredLinkMarkRange"),A(this,"linkMark"),A(this,"linkMarkRange"),A(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const s=o.target,i=this.pmView.posAtDOM(s,0)+1,a=this.pmView.state.doc.resolve(i),l=a.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=c,this.mouseHoveredLinkMarkRange=Rc(a,c.type,c.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),A(this,"clickHandler",o=>{var s;const i=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(i===o.target||i.contains(o.target))&&(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=Oh(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),A(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,n){var r;this.editor.transact(o=>{const s=pt(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,s.mark("link",{href:e}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,n,r=!1){var o;const{state:s}=e;if(n&&n.selection.from===s.selection.from&&n.selection.to===s.selection.to||!this.pmView.hasFocus())return;const i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const l of a)if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=Rc(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:Oh(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&i&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const wq=new Te("LinkToolbarPlugin");class xq extends Mt{constructor(e){super(),A(this,"view"),A(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),A(this,"deleteLink",()=>{this.view.deleteLink()}),A(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),A(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),A(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new me({key:wq,view:n=>(this.view=new vq(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const EI=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],MI="https",kq=new Te("node-selection-keyboard");class Cq extends Mt{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new me({key:kq,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=e.state.tr;return e.dispatch(r.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new U(r.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const Sq=new Te("blocknote-placeholder");class Tq extends Mt{static key(){return"placeholder"}constructor(e,n){super(),this.addProsemirrorPlugin(new me({key:Sq,view:r=>{var o,s;const i=`placeholder-selector-${eR()}`;r.dom.classList.add(i);const a=document.createElement("style"),l=e._tiptapEditor.options.injectNonce;l&&a.setAttribute("nonce",l),((o=e.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):(s=e.prosemirrorView)==null||s.root.head.appendChild(a);const c=a.sheet,d=(u="")=>`.${i} .bn-block-content${u} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:u,emptyDocument:h,...f}=n;for(const[b,v]of Object.entries(f)){const x=`[data-content-type="${b}"]`;c.insertRule(`${d(x)} { content: ${JSON.stringify(v)}; }`)}c.insertRule(`${d("[data-is-only-empty-block]")} { content: ${JSON.stringify(h)}; }`),c.insertRule(`${d("[data-is-empty-and-focused]")} { content: ${JSON.stringify(u)}; }`)}catch(u){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",u)}return{destroy:()=>{var u,h;((u=e.prosemirrorView)==null?void 0:u.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):(h=e.prosemirrorView)==null||h.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:s}=r;if(!e.isEditable||!s.empty||s.$from.parent.type.spec.code)return;const i=[];r.doc.content.size===6&&i.push(Ae.node(2,4,{"data-is-only-empty-block":"true"}));const a=s.$anchor,l=a.parent;if(l.content.size===0){const c=a.before();i.push(Ae.node(c,c+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return be.create(o,i)}}}))}}const lS=new Te("previous-blocks"),Eq={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class Mq extends Mt{static key(){return"previousBlockType"}constructor(){super();let e;this.addProsemirrorPlugin(new me({key:lS,view(n){return{update:async(r,o)=>{var s;((s=this.key)==null?void 0:s.getState(r.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(lS,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,s){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(s.doc))return r;const i={},a=Uk(o.doc,d=>d.attrs.id),l=new Map(a.map(d=>[d.node.attrs.id,d])),c=Uk(s.doc,d=>d.attrs.id);for(const d of c){const u=l.get(d.node.attrs.id),h=u==null?void 0:u.node.firstChild,f=d.node.firstChild;if(u&&h&&f){const p={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:s.doc.resolve(d.pos).depth};let g={index:h.attrs.index,level:h.attrs.level,type:h.type.name,depth:o.doc.resolve(u.pos).depth};i[d.node.attrs.id]=g,n.getMeta("numberedListIndexing")&&(d.node.attrs.id in r.prevTransactionOldBlockAttrs&&(g=r.prevTransactionOldBlockAttrs[d.node.attrs.id]),p.type==="numberedListItem"&&(g.index=p.index)),r.currentTransactionOldBlockAttrs[d.node.attrs.id]=g,JSON.stringify(g)!==JSON.stringify(p)&&(g["depth-change"]=g.depth-p.depth,r.updatedBlocks.add(d.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=i,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((s,i)=>{if(!s.attrs.id||!r.updatedBlocks.has(s.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[s.attrs.id],l={};for(const[d,u]of Object.entries(a))l["data-prev-"+Eq[d]]=u||"none";const c=Ae.node(i,i+s.nodeSize,{...l});o.push(c)}),be.create(n.doc,o)}}}))}}const cS=new Te("blocknote-show-selection");class Aq extends Mt{constructor(e){super(),A(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new me({key:cS,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return be.empty;const s=Ae.inline(o.from,o.to,{"data-show-selection":"true"});return be.create(r,[s])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(n=>n.setMeta(cS,{})))}getEnabled(){return this.enabled}}function AI(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}class mi extends ee{constructor(e,n){super(e,n),A(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(o,s,i)=>{if(i!==null&&i.eq(r))return this.nodes.push(o),!1})}static create(e,n,r=n){return new mi(e.resolve(n),e.resolve(r))}content(){return new j(_.from(this.nodes),0,0)}eq(e){if(!(e instanceof mi)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?ee.near(e.resolve(r.pos)):r.deleted?ee.near(e.resolve(o.pos)):new mi(e.resolve(r.pos),e.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}ee.jsonID("multiple-node",mi);let er;function Rq(t,e){let n,r;const o=e.resolve(t.from).node().type.spec.group==="blockContent",s=e.resolve(t.to).node().type.spec.group==="blockContent",i=Math.min(t.$anchor.depth,t.$head.depth);if(o&&s){const a=t.$from.start(i-1),l=t.$to.end(i-1);n=e.resolve(a-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function dS(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),o=t.domAtPos(e).node,s=(d,u)=>Array.prototype.indexOf.call(d.children,u),i=s(o,t.domAtPos(e+1).node.parentElement),a=s(o,t.domAtPos(n-1).node.parentElement);for(let d=o.childElementCount-1;d>=0;d--)(d>a||d<i)&&r.removeChild(r.children[d]);RI(t.root),er=r;const l=er.getElementsByTagName("iframe");for(let d=0;d<l.length;d++){const u=l[d],h=u.parentElement;h&&h.removeChild(u)}const c=t.dom.className.split(" ").filter(d=>d!=="ProseMirror"&&d!=="bn-root"&&d!=="bn-editor").join(" ");er.className=er.className+" bn-drag-preview "+c,t.root instanceof ShadowRoot?t.root.appendChild(er):t.root.body.appendChild(er)}function RI(t){er!==void 0&&(t instanceof ShadowRoot?t.removeChild(er):t.body.removeChild(er),er=void 0)}function _q(t,e,n){if(!t.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=Sn(e.id,r.state.doc);if(!o)throw new Error(`Block with ID ${e.id} not found`);const s=o.posBeforeNode;if(s!=null){const i=r.state.selection,a=r.state.doc,{from:l,to:c}=Rq(i,a),d=l<=s&&s<c,u=i.$anchor.node()!==i.$head.node()||i instanceof mi;d&&u?(r.dispatch(r.state.tr.setSelection(mi.create(a,l,c))),dS(r,l,c)):(r.dispatch(r.state.tr.setSelection(q.create(r.state.doc,s))),dS(r,s));const h=r.state.selection.content(),f=n.pmSchema,p=r.serializeForClipboard(h).dom.innerHTML,g=Np(f,n),b=vI(h.content),v=g.exportBlocks(b,{}),x=ev(v);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",p),t.dataTransfer.setData("text/html",v),t.dataTransfer.setData("text/plain",x),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(er,0,0)}}const El=.1;function Rb(t,e,n,r=!0){const o=t.root.elementsFromPoint(e.left+(n==="editor"?50:0),e.top);for(const s of o)if(t.dom.contains(s))return r&&s.closest("[data-node-type=columnList]")?Rb(t,{left:e.left+50,top:e.top},n,!1):AI(s,t)}function Iq(t,e,n){if(!e.dom.firstChild)return;const r=e.dom.firstChild.getBoundingClientRect(),o={left:t.x,top:t.y},s=o.left<r.left,i=o.left>r.right;n==="viewport"&&(s&&(o.left=r.left+10),i&&(o.left=r.right-10));let a=Rb(e,o,n);if(!i&&a){const l=a.node.getBoundingClientRect();o.left=l.right-10,a=Rb(e,o,"viewport",!1)}return a}class Nq{constructor(e,n,r,o){A(this,"state"),A(this,"emitUpdate"),A(this,"mousePos"),A(this,"hoveredBlock"),A(this,"menuFrozen",!1),A(this,"isDragOrigin",!1),A(this,"updateState",s=>{this.state=s,this.emitUpdate(this.state)}),A(this,"updateStateFromMousePos",()=>{var s,i,a,l;if(this.menuFrozen||!this.mousePos)return;const c=Iq(this.mousePos,this.pmView,this.sideMenuDetection);if(!c||!this.editor.isEditable){(s=this.state)!=null&&s.show&&(this.state.show=!1,this.updateState(this.state));return}if((i=this.state)!=null&&i.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===c.id)return;this.hoveredBlock=c.node;const d=c.node.firstChild;if(d&&this.editor.isEditable){const u=d.getBoundingClientRect(),h=c.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(h?h.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,u.y,u.width,u.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),A(this,"onDrop",s=>{var i,a;if(this.pmView.dragging===null)return;this.editor._tiptapEditor.commands.blur();const l=s.target instanceof Node&&((i=s.target instanceof HTMLElement?s.target:s.target.parentElement)==null?void 0:i.closest(".bn-editor"))||null;if(l&&(!this.isDragOrigin&&this.pmView.dom===l?this.pmView.dispatch(this.pmView.state.tr.setSelection(U.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.to))):this.isDragOrigin&&this.pmView.dom!==l&&setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0)),this.sideMenuDetection==="editor"||s.synthetic||!((a=s.dataTransfer)!=null&&a.types.includes("blocknote/html")))return;const c=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!c||c.inside===-1){const d=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(d)}}),A(this,"onDragEnd",()=>{this.pmView.dragging=null}),A(this,"onDragStart",s=>{var i;const a=(i=s.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!a)return;if(this.pmView.dragging)throw new Error("New drag was started while an existing drag is ongoing");const l=document.createElement("div");l.innerHTML=a;const c=xo.fromSchema(this.pmView.state.schema).parse(l,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new j(c.content,0,0),move:!0}}),A(this,"onDragOver",s=>{var i;if(this.sideMenuDetection==="editor"||s.synthetic||!((i=s.dataTransfer)!=null&&i.types.includes("blocknote/html")))return;const a=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!a||a.inside===-1&&this.pmView.dom.firstChild){const l=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(l)}}),A(this,"onKeyDown",s=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),A(this,"onMouseMove",s=>{var i;if(this.menuFrozen)return;this.mousePos={x:s.clientX,y:s.clientY};const a=this.pmView.dom.getBoundingClientRect(),l=this.mousePos.x>a.left&&this.mousePos.x<a.right&&this.mousePos.y>a.top&&this.mousePos.y<a.bottom,c=this.pmView.dom.parentElement;if(l&&s&&s.target&&!(c===s.target||c.contains(s.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),A(this,"onScroll",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state))}),this.editor=e,this.sideMenuDetection=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");o(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),Q1(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}createSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();return n.clientX=e.clientX,n.clientY=e.clientY,e.clientX<r.left&&e.clientX>r.left-r.width*El?n.clientX=r.left+r.width*El/2:e.clientX>r.right&&e.clientX<r.right+r.width*El?n.clientX=r.right-r.width*El/2:(e.clientX<r.left||e.clientX>r.right)&&(n.clientX=r.left+El*r.width*2),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,n}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const Dq=new Te("SideMenuPlugin");class Pq extends Mt{constructor(e,n){super(),A(this,"view"),A(this,"blockDragStart",(r,o)=>{this.view&&(this.view.isDragOrigin=!0),_q(r,o,this.editor)}),A(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&RI(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),A(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),A(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new me({key:Dq,view:r=>(this.view=new Nq(e,n,r,o=>{this.emit("update",o)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const Mu=new Map;function Oq(t){if(Mu.has(t))return Mu.get(t);const e=new Ma;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{Mu.delete(t)}),Mu.set(t,e),e}function Lq(t,e,n="left"){const r=Ee.getState(t._tiptapEditor.state);if(!r){const s=Oq(t),i=s.maps.length;return()=>s.slice(i).map(e,n==="left"?-1:1)}const o=Uc(e+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const s=Ee.getState(t._tiptapEditor.state),i=pi(s.doc,s.binding.type,o,s.binding.mapping);if(i===null)throw new Error("Position not found, cannot track positions");return i+(n==="right"?-1:0)}}const jq=bp(t=>t.type.name==="blockContainer");class Bq{constructor(e,n){A(this,"state"),A(this,"emitUpdate"),A(this,"rootEl"),A(this,"pluginState"),A(this,"handleScroll",()=>{var s,i;if((s=this.state)!=null&&s.show){const a=(i=this.rootEl)==null?void 0:i.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),A(this,"closeMenu",()=>{this.editor.transact(s=>s.setMeta(ka,null))}),A(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(s=>s.selection.from)}).run()});var r,o;this.editor=e,this.pluginState=void 0,this.emitUpdate=s=>{var i;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(s,{...this.state,ignoreQueryLength:(i=this.pluginState)==null?void 0:i.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const o=ka.getState(n),s=ka.getState(e.state),i=o===void 0&&s!==void 0,a=o!==void 0&&s===void 0;if(!i&&!(o!==void 0&&s!==void 0)&&!a)return;if(this.pluginState=a?o:s,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const ka=new Te("SuggestionMenuPlugin");class Vq extends Mt{constructor(e){super(),A(this,"view"),A(this,"triggerCharacters",[]),A(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),A(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),A(this,"closeMenu",()=>this.view.closeMenu()),A(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new me({key:ka,view:()=>(this.view=new Bq(e,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,s,i)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(ka);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const c=Lq(e,i.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>c()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a==null?void 0:a.ignoreQueryLength}}if(o===void 0)return o;if(i.selection.from!==i.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&i.selection.from<o.queryStartPos()||!i.selection.$from.sameParent(i.doc.resolve(o.queryStartPos())))return;const l={...o};return l.query=i.doc.textBetween(o.queryStartPos(),i.selection.from),l}},props:{handleTextInput(r,o,s,i){return n.includes(i)?(r.dispatch(r.state.tr.insertText(i)),r.dispatch(r.state.tr.setMeta(ka,{triggerCharacter:i}).scrollIntoView()),!0):!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const s=jq(r.selection);if(s)return be.create(r.doc,[Ae.node(s.pos,s.pos+s.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return be.create(r.doc,[Ae.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,n){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,n)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const $q=Et.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),Hq=Et.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),Fq=Et.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}});let nn;function uS(t){nn||(nn=document.createElement("div"),nn.innerHTML="_",nn.style.opacity="0",nn.style.height="1px",nn.style.width="1px",t instanceof Document?t.body.appendChild(nn):t.appendChild(nn))}function zq(t){nn&&(t instanceof Document?t.body.removeChild(nn):t.removeChild(nn),nn=void 0)}function Au(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function Uq(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function Wq(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class Gq{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"tableId"),A(this,"tablePos"),A(this,"tableElement"),A(this,"menuFrozen",!1),A(this,"mouseState","up"),A(this,"prevWasEditable",null),A(this,"viewMousedownHandler",()=>{this.mouseState="down"}),A(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),A(this,"mouseMoveHandler",o=>{var s,i,a,l,c,d,u;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const h=Uq(o.target);if((h==null?void 0:h.type)==="cell"&&this.mouseState==="down"&&!((s=this.state)!=null&&s.draggingState)){this.mouseState="selecting",(i=this.state)!=null&&i.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!h||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!h.tbodyNode)return;const f=h.tbodyNode.getBoundingClientRect(),p=AI(h.domNode,this.pmView);if(!p)return;this.tableElement=p.node;let g;const b=this.editor.transact(w=>Sn(p.id,w.doc));if(!b)throw new Error(`Block with ID ${p.id} not found`);const v=ze(b.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(eG("table",v,this.editor)&&(this.tablePos=b.posBeforeNode+1,g=v),!g)return;this.tableId=p.id;const x=(l=h.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if((h==null?void 0:h.type)==="wrapper"){const w=o.clientY>=f.bottom-1&&o.clientY<f.bottom+20,k=o.clientX>=f.right-1&&o.clientX<f.right+20,C=o.clientX>f.right||o.clientY>f.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:w,showAddOrRemoveColumnsButton:k,referencePosTable:f,block:g,widgetContainer:x,colIndex:C||(c=this.state)==null?void 0:c.colIndex,rowIndex:C||(d=this.state)==null?void 0:d.rowIndex,referencePosCell:C||(u=this.state)==null?void 0:u.referencePosCell}}else{const w=Au(h.domNode),k=Au(h.domNode.parentElement),C=h.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===p.id&&this.state.rowIndex===k&&this.state.colIndex===w)return;this.state={show:!0,showAddOrRemoveColumnsButton:w===g.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:k===g.content.rows.length-1,referencePosTable:f,block:g,draggingState:void 0,referencePosCell:C,colIndex:w,rowIndex:k,widgetContainer:x}}return this.emitUpdate(),!1}),A(this,"dragOverHandler",o=>{var s;if(((s=this.state)==null?void 0:s.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",Wq(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const i={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(i.left,i.top).filter(g=>g.tagName==="TD"||g.tagName==="TH");if(a.length===0)return;const l=a[0];let c=!1;const d=Au(l.parentElement),u=Au(l),h=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,f=(this.state.draggingState.draggedCellOrientation==="row"?d:u)!==h;(this.state.rowIndex!==d||this.state.colIndex!==u)&&(this.state.rowIndex=d,this.state.colIndex=u,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const p=this.state.draggingState.draggedCellOrientation==="row"?i.top:i.left;this.state.draggingState.mousePos!==p&&(this.state.draggingState.mousePos=p,c=!0),c&&this.emitUpdate(),f&&this.editor.transact(g=>g.setMeta(zl,!0))}),A(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:s,colIndex:i,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(s.draggedCellOrientation==="row"){if(!V_(this.state.block,s.originalIndex,a))return!1;const c=LU(this.state.block,s.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:c}})}else{if(!$_(this.state.block,s.originalIndex,i))return!1;const c=OU(this.state.block,s.originalIndex,i),[d]=l.splice(s.originalIndex,1);l.splice(i,0,d),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:c}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=U1(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const s=o.children[this.state.rowIndex].children[this.state.colIndex];s?this.state.referencePosCell=s.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const zl=new Te("TableHandlesPlugin");class qq extends Mt{constructor(e){super(),A(this,"view"),A(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(zl,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");uS(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(nn,0,0),n.dataTransfer.effectAllowed="move"}),A(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(zl,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");uS(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(nn,0,0),n.dataTransfer.effectAllowed="copyMove"}),A(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(zl,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");zq(this.editor.prosemirrorView.root)}),A(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),A(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),A(this,"getCellsAtRowHandle",(n,r)=>vb(n,r)),A(this,"getCellsAtColumnHandle",(n,r)=>wb(n,r)),A(this,"setCellSelection",(n,r,o=r)=>{const s=this.view;if(!s)throw new Error("Table handles view not initialized");const i=n.doc.resolve(s.tablePos+1),a=n.doc.resolve(i.posAtIndex(r.row)+1),l=n.doc.resolve(a.posAtIndex(r.col)),c=n.doc.resolve(i.posAtIndex(o.row)+1),d=n.doc.resolve(c.posAtIndex(o.col)),u=n.tr;return u.setSelection(new Re(l,d)),n.apply(u)}),A(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,s)=>{const i=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?P$(i,s):O$(i,s):r.side==="left"?R$(i,s):_$(i,s)})}),A(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,s)=>{const i=this.setCellSelection(o,{row:n,col:0});return j$(i,s)}):this.editor.exec((o,s)=>{const i=this.setCellSelection(o,{row:0,col:n});return N$(i,s)})),A(this,"mergeCells",n=>this.editor.exec((r,o)=>{const s=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return V$(s,o)})),A(this,"splitCell",n=>this.editor.exec((r,o)=>{const s=n?this.setCellSelection(r,n):r;return $$(s,o)})),A(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,s=r.$to;if(Tb(r)){const{ranges:p}=r;p.forEach(g=>{o=g.$from.min(o??g.$from),s=g.$to.max(s??g.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),s=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||s.pos===0)return;const i=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(s.pos-s.parentOffset-1),l=n.doc.resolve(i.pos-i.parentOffset-1),c=o.index(i.depth),d=i.index(l.depth),u=s.index(a.depth),h=a.index(l.depth),f=[];for(let p=d;p<=h;p++)for(let g=c;g<=u;g++)f.push({row:p,col:g});return{from:{row:d,col:c},to:{row:h,col:u},cells:f}})),A(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=Tb(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const s=this.getCellSelection();if(s)return VU(s.from,s.to,n)?"vertical":"horizontal"})),A(this,"cropEmptyRowsOrColumns",(n,r)=>jU(n,r)),A(this,"addRowsOrColumns",(n,r,o)=>BU(n,r,o)),this.editor=e,this.addProsemirrorPlugin(new me({key:zl,view:n=>(this.view=new Gq(e,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:s,draggingState:i}=this.view.state,{originalIndex:a,draggedCellOrientation:l}=i;if(r===a||!s||l==="row"&&!V_(s,a,r)||l==="col"&&!$_(s,a,r))return be.create(n.doc,o);const c=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?vb(this.view.state.block,r).forEach(({row:d,col:u})=>{const h=n.doc.resolve(c.posAtIndex(d)+1),f=n.doc.resolve(h.posAtIndex(u)+1),p=f.node(),g=f.pos+(r>a?p.nodeSize-2:0);o.push(Ae.widget(g,()=>{const b=document.createElement("div");return b.className="bn-table-drop-cursor",b.style.left="0",b.style.right="0",r>a?b.style.bottom="-2px":b.style.top="-3px",b.style.height="4px",b}))}):wb(this.view.state.block,r).forEach(({row:d,col:u})=>{const h=n.doc.resolve(c.posAtIndex(d)+1),f=n.doc.resolve(h.posAtIndex(u)+1),p=f.node(),g=f.pos+(r>a?p.nodeSize-2:0);o.push(Ae.widget(g,()=>{const b=document.createElement("div");return b.className="bn-table-drop-cursor",b.style.top="0",b.style.bottom="0",r>a?b.style.right="-2px":b.style.left="-3px",b.style.width="4px",b}))}),be.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const Kq=De.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),Zq=De.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:st.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):st.textColor.default,renderHTML:t=>t.textColor===st.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),Jq=De.create({name:"trailingNode",addProseMirrorPlugins(){const t=new Te(this.name);return[new me({key:t,appendTransaction:(e,n,r)=>{const{doc:o,tr:s,schema:i}=r,a=t.getState(r),l=o.content.size-2,c=i.nodes.blockContainer,d=i.nodes.paragraph;if(a)return s.insert(l,c.create(void 0,d.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let r=e.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),Yq={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},Xq=Kr.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(Yq))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[s,i]of Object.entries(t))s!=="class"&&n.setAttribute(s,i);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},o=document.createElement("div");o.className=je("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[s,i]of Object.entries(r))s!=="class"&&o.setAttribute(s,i);return n.appendChild(o),{dom:n,contentDOM:o}}}),Qq=Kr.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=je("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,s]of Object.entries(n))o!=="class"&&r.setAttribute(o,s);return{dom:r,contentDOM:r}}}),eK=Kr.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class tK extends Mt{constructor({editor:e,collaboration:n}){super(e),A(this,"editor"),A(this,"collaboration"),A(this,"forkedState"),this.editor=e,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,n){const r=e.doc;if(e._item===null){const o=Array.from(r.share.keys()).find(s=>r.share.get(s)===e);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,e.constructor)}else{const o=e._item,s=n.store.clients.get(o.id.client)??[],i=Gn(s,o.id.clock);return s[i].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){if(this.isForkedFromRemote)return;const e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");const n=new Ds;TC(n,EC(e.doc));const r=this.findTypeInOtherYdoc(e,n);this.forkedState={originalFragment:e,forkedFragment:r},this.editor._tiptapEditor.unregisterPlugin([Hl,Ir,Ee]),this.editor._tiptapEditor.registerPlugin(new Mb(r).plugins[0]),this.editor._tiptapEditor.registerPlugin(new Ab().plugins[0]),this.emit("forked",!0)}merge({keepChanges:e}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(Ee),this.editor._tiptapEditor.unregisterPlugin(Ir);const{originalFragment:n,forkedFragment:r}=this.forkedState;if(e){const o=EC(r.doc);TC(n.doc,o)}this.editor.extensions.ySyncPlugin=new Mb(n),this.editor.extensions.yCursorPlugin=new CI(this.collaboration),this.editor.extensions.yUndoPlugin=new Ab,this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),this.forkedState=void 0,this.emit("forked",!1)}}const nK=t=>{var e;const n={},r=rK(t);for(const s of r)n[s.name]=s;t.collaboration&&(n.ySyncPlugin=new Mb(t.collaboration.fragment),n.yUndoPlugin=new Ab,(e=t.collaboration.provider)!=null&&e.awareness&&(n.yCursorPlugin=new CI(t.collaboration)),n.forkYDocPlugin=new tK({editor:t.editor,collaboration:t.collaboration})),n.formattingToolbar=new pq(t.editor),n.linkToolbar=new xq(t.editor),n.sideMenu=new Pq(t.editor,t.sideMenuDetection),n.suggestionMenus=new Vq(t.editor),n.filePanel=new uq(t.editor),n.placeholder=new Tq(t.editor,t.placeholders),(t.animations??!0)&&(n.animations=new Mq),t.tableHandles&&(n.tableHandles=new qq(t.editor)),n.nodeSelectionKeyboard=new Cq,n.showSelection=new Aq(t.editor),t.comments&&(n.comments=new cq(t.editor,t.comments.threadStore,SI.name));const o=t.disableExtensions||[];for(const s of o)delete n[s];return n};let hS=!1;const rK=t=>{const e=[Sl.ClipboardTextSerializer,Sl.Commands,Sl.Editable,Sl.FocusEvents,Sl.Tabindex,g6,De.create({name:"dropCursor",addProseMirrorPlugins:()=>[t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})]}),Ap.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),mq,J6,$q,Hq,Fq,Z6.extend({inclusive:!1}).configure({defaultProtocol:MI,protocols:hS?[]:EI}),...Object.values(t.styleSpecs).map(n=>n.implementation.mark.configure({editor:t.editor})),Zq,sq,Kq,De.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),eK,Xq.configure({editor:t.editor,domAttributes:t.domAttributes}),bq.configure({editor:t.editor,tabBehavior:t.tabBehavior}),Qq.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:t.editor,domAttributes:t.domAttributes})),n.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),oq(t.editor),nq(t.editor,t.pasteHandler||(n=>n.defaultPasteHandler())),VG(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[Jq]:[],...t.comments?[SI]:[]];return hS=!0,t.collaboration||e.push(E6),e};function oK(t,e){const n=[];return t.forEach((r,o,s)=>{s!==e&&n.push(r)}),_.from(n)}function sK(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],s=o.copy(o.content.addToEnd(t.child(r)));n[n.length-1]=s}else{const o=e.nodes.table.createChecked(void 0,t.child(r));n.push(o)}else n.push(t.child(r));return t=_.from(n),t}function iK(t,e){let n=_.from(t.content);if(n=sK(n,e.state.schema),!aK(n,e))return new j(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const i=n.child(r+1).child(0).child(0);(i.type.name==="bulletListItem"||i.type.name==="numberedListItem"||i.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=oK(n,r+1))}const s=e.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,s)}return new j(n,t.openStart,t.openEnd)}function aK(t,e){var n,r;const o=t.childCount===1,s=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",i=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(s)return!1;if(i){const a=Oe(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const _b=class extends jV{constructor(e,n){super({...e,content:void 0}),A(this,"_state"),A(this,"mount",(a,l,c)=>{l?(this.options.element=l,this.createViewAlternative(a,c)):this.destroy()});const r=this.schema;let o;const s=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=s.apply(r.nodes.doc,a),c=JSON.parse(JSON.stringify(l.toJSON()));return c.content[0].content[0].attrs.id="initialBlockId",o=wo.fromJSON(r,c),o};let i;try{const a=e==null?void 0:e.content.map(l=>Bi(l,this.schema,n).toJSON());i=Dh({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=ei.create({doc:i,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view){this._state=this.state.apply(e),this.emit("transaction",{editor:this,transaction:e});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(e);return}const{state:n,transactions:r}=this.state.applyTransaction(e),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(s=>{s.type==="mark"&&s.config.addMarkView&&(r[s.name]=s.config.addMarkView(e))}),this.view=new vA({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};A(_b,"create",(t,e)=>{var n,r;const o=(n=globalThis==null?void 0:globalThis.window)==null?void 0:n.setTimeout;typeof((r=globalThis==null?void 0:globalThis.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new _b(t,e)}finally{o&&(globalThis.window.setTimeout=o)}});let _I=_b;_I.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const lK={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let cK=class II extends nv{constructor(e){var n,r,o,s,i,a,l,c,d,u,h,f,p,g,b;super(),A(this,"pmSchema"),A(this,"extensions",{}),A(this,"headless",!1),A(this,"_tiptapEditor"),A(this,"elementRenderer",null),A(this,"blockCache",new WeakMap),A(this,"dictionary"),A(this,"schema"),A(this,"blockImplementations"),A(this,"inlineContentImplementations"),A(this,"styleImplementations"),A(this,"formattingToolbar"),A(this,"linkToolbar"),A(this,"sideMenu"),A(this,"suggestionMenus"),A(this,"filePanel"),A(this,"tableHandles"),A(this,"comments"),A(this,"showSelectionPlugin"),A(this,"forkYDocPlugin"),A(this,"uploadFile"),A(this,"onUploadStartCallbacks",[]),A(this,"onUploadEndCallbacks",[]),A(this,"resolveFileUrl"),A(this,"resolveUsers"),A(this,"settings"),A(this,"activeTransaction",null),A(this,"mount",(T,E)=>{this._tiptapEditor.mount(this,T,E)}),this.options=e;const v=e;if(v.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(v.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(v.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(v.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||TU,this.settings={tables:{splitCells:((n=e==null?void 0:e.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e==null?void 0:e.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=e==null?void 0:e.tables)==null?void 0:o.cellTextColor)??!1,headers:((s=e==null?void 0:e.tables)==null?void 0:s.headers)??!1},codeBlock:{indentLineWithTab:((i=e==null?void 0:e.codeBlock)==null?void 0:i.indentLineWithTab)??!0,defaultLanguage:((a=e==null?void 0:e.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((l=e==null?void 0:e.codeBlock)==null?void 0:l.supportedLanguages)??{},createHighlighter:((c=e==null?void 0:e.codeBlock)==null?void 0:c.createHighlighter)??void 0}};const x={defaultStyles:!0,schema:e.schema||X1.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(x.comments&&!x.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=x.resolveUsers,this.schema=x.schema,this.blockImplementations=x.schema.blockSpecs,this.inlineContentImplementations=x.schema.inlineContentSpecs,this.styleImplementations=x.schema.styleSpecs,this.extensions=nK({editor:this,domAttributes:x.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:x.collaboration,trailingBlock:x.trailingBlock,disableExtensions:x.disableExtensions,setIdAttribute:x.setIdAttribute,animations:x.animations??!0,tableHandles:tn("table",this),dropCursor:this.options.dropCursor??CU,placeholders:x.placeholders,tabBehavior:x.tabBehavior,sideMenuDetection:x.sideMenuDetection||"viewport",comments:x.comments,pasteHandler:x.pasteHandler}),(((d=x._tiptapOptions)==null?void 0:d.extensions)||[]).forEach(T=>{this.extensions[T.name]=T});for(let T of x.extensions||[]){typeof T=="function"&&(T=T(this));const E=T.constructor.key();if(!E)throw new Error(`Extension ${T.constructor.name} does not have a key method`);if(this.extensions[E])throw new Error(`Extension ${T.constructor.name} already exists with key ${E}`);this.extensions[E]=T}if(Object.entries(x._extensions||{}).forEach(([T,E])=>{const M=typeof E=="function"?E(this):E;if(!("plugin"in M)){this.extensions[T]=M;return}this.extensions[T]=new class extends Mt{static key(){return T}constructor(){super(),this.addProsemirrorPlugin(M.plugin)}get priority(){return M.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,x.uploadFile){const T=x.uploadFile;this.uploadFile=async(E,M)=>{this.onUploadStartCallbacks.forEach(R=>R.apply(this,[M]));try{return await T(E,M)}finally{this.onUploadEndCallbacks.forEach(R=>R.apply(this,[M]))}}}this.resolveFileUrl=x.resolveFileUrl,this.headless=x._headless;const w="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;w&&x.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const k=x.initialContent||(w?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:Ap.options.generateID()}]);if(!Array.isArray(k)||k.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+k);const C=[...Object.entries(this.extensions).map(([T,E])=>{if(E instanceof De||E instanceof Kr||E instanceof Et)return E;if(!(E instanceof Mt&&!E.plugins.length))return De.create({name:T,priority:E.priority,addProseMirrorPlugins:()=>E.plugins})})].filter(T=>T!==void 0),S={...lK,...x._tiptapOptions,content:k,extensions:C,editorProps:{...(u=x._tiptapOptions)==null?void 0:u.editorProps,attributes:{tabIndex:"0",...(f=(h=x._tiptapOptions)==null?void 0:h.editorProps)==null?void 0:f.attributes,...(p=x.domAttributes)==null?void 0:p.editor,class:je("bn-editor",x.defaultStyles?"bn-default-styles":"",((b=(g=x.domAttributes)==null?void 0:g.editor)==null?void 0:b.class)||"")},transformPasted:iK}};this.headless?this.pmSchema=cV(S.extensions):(this._tiptapEditor=_I.create(S,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(e={}){return new II(e)}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(e,n=e.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>NU(e.doc,this.pmSchema))}getBlock(e){return this.transact(n=>bG(n.doc,e))}getPrevBlock(e){return this.transact(n=>vG(n.doc,e))}getNextBlock(e){return this.transact(n=>wG(n.doc,e))}getParentBlock(e){return this.transact(n=>xG(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function o(s){for(const i of s){if(e(i)===!1)return!1;const a=n?i.children.slice().reverse():i.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>EG(e))}setTextCursorPosition(e,n="start"){return this.transact(r=>pI(r,e,n))}getSelection(){return this.transact(e=>CG(e))}getSelectionCutBlocks(){return this.transact(e=>TG(e))}setSelection(e,n){return this.transact(r=>SG(r,e,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,n,r="before"){return this.transact(o=>zU(o,e,n,r))}updateBlock(e,n){return this.transact(r=>WU(r,e,n))}removeBlocks(e){return this.transact(n=>KC(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.transact(r=>KC(r,e,n))}undo(){return this.options.collaboration?this.exec(bU):this.exec(a1)}redo(){return this.options.collaboration?this.exec(vU):this.exec(l1)}insertInlineContent(e,{updateSelection:n=!1}={}){const r=fr(e,this.pmSchema);this.transact(o=>{kG(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(e=>{const n={},r=e.selection.$to.marks();for(const o of r){const s=this.schema.styleSchema[o.type.name];if(!s){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}s.propSchema==="boolean"?n[s.type]=!0:n[s.type]=o.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new $r(o.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new $r(o.propSchema)}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.pmSchema.mark("link",{href:e});this.transact(o=>{const{from:s,to:i}=o.selection;n?o.insertText(n,s,i).addMark(s,s+n.length,r):o.setSelection(U.create(o.doc,i)).addMark(s,i,r)})}canNestBlock(){return gG(this)}nestBlock(){fI(this)}canUnnestBlock(){return yG(this)}unnestBlock(){mG(this)}moveBlocksUp(){return hG(this)}moveBlocksDown(){return fG(this)}async blocksToHTMLLossy(e=this.document){return Np(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return JU(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return gI(e,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return RG(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return LG(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}onChange(e){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{e(this,{getChanges:()=>FU(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(e,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(Ee)&&!n||e(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(s=>s.$from.pos)),o=Math.max(...n.map(s=>s.$to.pos));if(zy(e)){const s=this.prosemirrorView.nodeDOM(r);if(s)return s.getBoundingClientRect()}return Oh(this.prosemirrorView,r,o)}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}openSuggestionMenu(e,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:(n==null?void 0:n.deleteTriggerCharacter)||!1,ignoreQueryLength:(n==null?void 0:n.ignoreQueryLength)||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return mI(e.trim()).innerHTML}pasteHTML(e,n=!1){var r;let o=e;n||(o=this.convertHtmlToBlockNoteHtml(e)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(e){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await yI(e))}},wg;async function dK(){return wg||(wg=(async()=>{const[t,e]=await Promise.all([wt(()=>import("./module-BvCTiNll.js"),[]),wt(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),wg)}async function uK(t,e){if(!QW("text",t))return[];const{emojiData:n,emojiMart:r}=await dK();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(o=>({id:o.skins[0].native,onItemClick:()=>t.insertInlineContent(o.skins[0].native+" ")}))}function Ib(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Va(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&j3(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function NI(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function DI(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function hK(t){return pK()?!1:!fS()&&t.width===0&&t.height===0||fS()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function PI(){return/apple/i.test(navigator.vendor)}function fS(){const t=/android/i;return t.test(NI())||t.test(DI())}function fK(){return NI().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function pK(){return DI().includes("jsdom/")}function Nb(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function mK(t){return"nativeEvent"in t}function gK(t){return t.matches("html,body")}function hs(t){return(t==null?void 0:t.ownerDocument)||document}function xg(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function ia(t){return"composedPath"in t?t.composedPath()[0]:t.target}const yK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function bK(t){return w0(t)&&t.matches(yK)}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var vK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Db=vK.join(","),OI=typeof Element>"u",Kc=OI?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Cf=!OI&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Sf=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",i=s||n&&e&&t(e.parentNode);return i},wK=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},xK=function(e,n,r){if(Sf(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(Db));return n&&Kc.call(e,Db)&&o.unshift(e),o=o.filter(r),o},kK=function t(e,n,r){for(var o=[],s=Array.from(e);s.length;){var i=s.shift();if(!Sf(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,c=t(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else{var d=Kc.call(i,Db);d&&r.filter(i)&&(n||!e.includes(i))&&o.push(i);var u=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),h=!Sf(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(u&&h){var f=t(u===!0?i.children:u.children,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:i,candidates:f})}else s.unshift.apply(s,i.children)}}return o},LI=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},jI=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||wK(e))&&!LI(e)?0:e.tabIndex},CK=function(e,n){var r=jI(e);return r<0&&n&&!LI(e)?0:r},SK=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},BI=function(e){return e.tagName==="INPUT"},TK=function(e){return BI(e)&&e.type==="hidden"},EK=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},MK=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},AK=function(e){if(!e.name)return!0;var n=e.form||Cf(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=MK(o,e.form);return!s||s===e},RK=function(e){return BI(e)&&e.type==="radio"},_K=function(e){return RK(e)&&!AK(e)},IK=function(e){var n,r=e&&Cf(e),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var i,a,l;for(s=!!((i=o)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&o;){var c,d,u;r=Cf(o),o=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=o)!==null&&d!==void 0&&(u=d.ownerDocument)!==null&&u!==void 0&&u.contains(o))}}return s},pS=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},NK=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Kc.call(e,"details>summary:first-of-type"),i=s?e.parentElement:e;if(Kc.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var l=e.parentElement,c=Cf(e);if(l&&!l.shadowRoot&&o(l)===!0)return pS(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(IK(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return pS(e);return!1},DK=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return Kc.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},PK=function(e,n){return!(n.disabled||Sf(n)||TK(n)||NK(n,e)||EK(n)||DK(n))},mS=function(e,n){return!(_K(n)||jI(n)<0||!PK(e,n))},OK=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},LK=function t(e){var n=[],r=[];return e.forEach(function(o,s){var i=!!o.scopeParent,a=i?o.scopeParent:o,l=CK(a,i),c=i?t(o.candidates):a;l===0?i?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:c})}),r.sort(SK).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},VI=function(e,n){n=n||{};var r;return n.getShadowRoot?r=kK([e],n.includeContainer,{filter:mS.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:OK}):r=xK(e,n.includeContainer,mS.bind(null,n)),LK(r)};const $I={...$3},jK=$I.useInsertionEffect,BK=jK||(t=>t());function po(t){const e=y.useRef(()=>{});return BK(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var Lt=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Pb(){return Pb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pb.apply(this,arguments)}let gS=!1,VK=0;const yS=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+VK++;function $K(){const[t,e]=y.useState(()=>gS?yS():void 0);return Lt(()=>{t==null&&e(yS())},[]),y.useEffect(()=>{gS=!0},[]),t}const HK=$I.useId,rv=HK||$K;function FK(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const zK=y.createContext(null),UK=y.createContext(null),ov=()=>{var t;return((t=y.useContext(zK))==null?void 0:t.id)||null},sv=()=>y.useContext(UK);function Pd(t){return"data-floating-ui-"+t}function si(t){const e=y.useRef(t);return Lt(()=>{e.current=t}),e}const bS=Pd("safe-polygon");function dh(t,e,n){return n&&!Nb(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function WK(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:i}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:u=0,move:h=!0}=e,f=sv(),p=ov(),g=si(c),b=si(l),v=si(n),x=y.useRef(),w=y.useRef(-1),k=y.useRef(),C=y.useRef(-1),S=y.useRef(!0),T=y.useRef(!1),E=y.useRef(()=>{}),M=y.useRef(!1),R=y.useCallback(()=>{var P;const B=(P=o.current.openEvent)==null?void 0:P.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[o]);y.useEffect(()=>{if(!a)return;function P(B){let{open:H}=B;H||(clearTimeout(w.current),clearTimeout(C.current),S.current=!0,M.current=!1)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[a,s]),y.useEffect(()=>{if(!a||!g.current||!n)return;function P(H){R()&&r(!1,H,"hover")}const B=hs(i.floating).documentElement;return B.addEventListener("mouseleave",P),()=>{B.removeEventListener("mouseleave",P)}},[i.floating,n,r,a,g,R]);const I=y.useCallback(function(P,B,H){B===void 0&&(B=!0),H===void 0&&(H="hover");const Y=dh(b.current,"close",x.current);Y&&!k.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,P,H),Y)):B&&(clearTimeout(w.current),r(!1,P,H))},[b,r]),L=po(()=>{E.current(),k.current=void 0}),$=po(()=>{if(T.current){const P=hs(i.floating).body;P.style.pointerEvents="",P.removeAttribute(bS),T.current=!1}}),F=po(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);y.useEffect(()=>{if(!a)return;function P(G){if(clearTimeout(w.current),S.current=!1,d&&!Nb(x.current)||u>0&&!dh(b.current,"open"))return;const X=dh(b.current,"open",x.current);X?w.current=window.setTimeout(()=>{v.current||r(!0,G,"hover")},X):n||r(!0,G,"hover")}function B(G){if(F())return;E.current();const X=hs(i.floating);if(clearTimeout(C.current),M.current=!1,g.current&&o.current.floatingContext){n||clearTimeout(w.current),k.current=g.current({...o.current.floatingContext,tree:f,x:G.clientX,y:G.clientY,onClose(){$(),L(),F()||I(G,!0,"safe-polygon")}});const He=k.current;X.addEventListener("mousemove",He),E.current=()=>{X.removeEventListener("mousemove",He)};return}(x.current==="touch"?!Va(i.floating,G.relatedTarget):!0)&&I(G)}function H(G){F()||o.current.floatingContext&&(g.current==null||g.current({...o.current.floatingContext,tree:f,x:G.clientX,y:G.clientY,onClose(){$(),L(),F()||I(G)}})(G))}if(zt(i.domReference)){var Y;const G=i.domReference;return n&&G.addEventListener("mouseleave",H),(Y=i.floating)==null||Y.addEventListener("mouseleave",H),h&&G.addEventListener("mousemove",P,{once:!0}),G.addEventListener("mouseenter",P),G.addEventListener("mouseleave",B),()=>{var X;n&&G.removeEventListener("mouseleave",H),(X=i.floating)==null||X.removeEventListener("mouseleave",H),h&&G.removeEventListener("mousemove",P),G.removeEventListener("mouseenter",P),G.removeEventListener("mouseleave",B)}}},[i,a,t,d,u,h,I,L,$,r,n,v,f,b,g,o,F]),Lt(()=>{var P;if(a&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&R()){T.current=!0;const H=i.floating;if(zt(i.domReference)&&H){var B;const Y=hs(i.floating).body;Y.setAttribute(bS,"");const G=i.domReference,X=f==null||(B=f.nodesRef.current.find(pe=>pe.id===p))==null||(B=B.context)==null?void 0:B.elements.floating;return X&&(X.style.pointerEvents=""),Y.style.pointerEvents="none",G.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{Y.style.pointerEvents="",G.style.pointerEvents="",H.style.pointerEvents=""}}}},[a,n,p,i,f,g,R]),Lt(()=>{n||(x.current=void 0,M.current=!1,L(),$())},[n,L,$]),y.useEffect(()=>()=>{L(),clearTimeout(w.current),clearTimeout(C.current),$()},[a,i.domReference,L,$]);const z=y.useMemo(()=>{function P(B){x.current=B.pointerType}return{onPointerDown:P,onPointerEnter:P,onMouseMove(B){const{nativeEvent:H}=B;function Y(){!S.current&&!v.current&&r(!0,H,"hover")}d&&!Nb(x.current)||n||u===0||M.current&&B.movementX**2+B.movementY**2<2||(clearTimeout(C.current),x.current==="touch"?Y():(M.current=!0,C.current=window.setTimeout(Y,u)))}}},[d,r,n,v,u]),J=y.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(P){F()||I(P.nativeEvent,!1)}}),[I,F]);return y.useMemo(()=>a?{reference:z,floating:J}:{},[a,z,J])}const Ob=()=>{},HI=y.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Ob,setState:Ob,isInstantPhase:!1}),GK=()=>y.useContext(HI);function qK(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,s]=y.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),i=y.useRef(null),a=y.useCallback(l=>{s({currentId:l})},[]);return Lt(()=>{o.currentId?i.current===null?i.current=o.currentId:o.isInstantPhase||s({isInstantPhase:!0}):(o.isInstantPhase&&s({isInstantPhase:!1}),i.current=null)},[o.currentId,o.isInstantPhase]),y.createElement(HI.Provider,{value:y.useMemo(()=>({...o,setState:s,setCurrentId:a}),[o,a])},e)}function KK(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:s,enabled:i=!0}=e,a=s??o,l=GK(),{currentId:c,setCurrentId:d,initialDelay:u,setState:h,timeoutMs:f}=l;return Lt(()=>{i&&c&&(h({delay:{open:1,close:dh(u,"close")}}),c!==a&&r(!1))},[i,a,r,h,c,u]),Lt(()=>{function p(){r(!1),h({delay:u,currentId:null})}if(i&&c&&!n&&c===a){if(f){const g=window.setTimeout(p,f);return()=>{clearTimeout(g)}}p()}},[i,n,h,c,a,r,u,f]),Lt(()=>{i&&(d===Ob||!n||d(a))},[i,n,d,a]),l}function kg(t,e){let n=t.filter(o=>{var s;return o.parentId===e&&((s=o.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(o=>{var s;return(s=r)==null?void 0:s.some(i=>{var a;return o.parentId===i.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const FI=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function zI(t,e){const n=VI(t,FI());e==="prev"&&n.reverse();const r=n.indexOf(Ib(hs(t)));return n.slice(r+1)[0]}function ZK(){return zI(document.body,"next")}function JK(){return zI(document.body,"prev")}function Cg(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Va(n,r)}function YK(t){VI(t,FI()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function vS(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const UI={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let XK;function wS(t){t.key==="Tab"&&(t.target,clearTimeout(XK))}const xS=y.forwardRef(function(e,n){const[r,o]=y.useState();Lt(()=>(PI()&&o("button"),document.addEventListener("keydown",wS),()=>{document.removeEventListener("keydown",wS)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Pd("focus-guard")]:"",style:UI};return y.createElement("span",Pb({},e,s))}),WI=y.createContext(null),kS=Pd("portal");function QK(t){t===void 0&&(t={});const{id:e,root:n}=t,r=rv(),o=tZ(),[s,i]=y.useState(null),a=y.useRef(null);return Lt(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),Lt(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(kS,""),l.appendChild(c),a.current=c,i(c)},[e,r]),Lt(()=>{if(n===null||!r||a.current)return;let l=n||(o==null?void 0:o.portalNode);l&&!zt(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const d=document.createElement("div");d.id=r,d.setAttribute(kS,""),l=c||l,l.appendChild(d),a.current=d,i(d)},[e,n,r,o]),s}function eZ(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,s=QK({id:n,root:r}),[i,a]=y.useState(null),l=y.useRef(null),c=y.useRef(null),d=y.useRef(null),u=y.useRef(null),h=i==null?void 0:i.modal,f=i==null?void 0:i.open,p=!!i&&!i.modal&&i.open&&o&&!!(r||s);return y.useEffect(()=>{if(!s||!o||h)return;function g(b){s&&Cg(b)&&(b.type==="focusin"?vS:YK)(s)}return s.addEventListener("focusin",g,!0),s.addEventListener("focusout",g,!0),()=>{s.removeEventListener("focusin",g,!0),s.removeEventListener("focusout",g,!0)}},[s,o,h]),y.useEffect(()=>{s&&(f||vS(s))},[f,s]),y.createElement(WI.Provider,{value:y.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:u,portalNode:s,setFocusManagerState:a}),[o,s])},p&&s&&y.createElement(xS,{"data-type":"outside",ref:l,onFocus:g=>{if(Cg(g,s)){var b;(b=d.current)==null||b.focus()}else{const v=JK()||(i==null?void 0:i.refs.domReference.current);v==null||v.focus()}}}),p&&s&&y.createElement("span",{"aria-owns":s.id,style:UI}),s&&kt.createPortal(e,s),p&&s&&y.createElement(xS,{"data-type":"outside",ref:c,onFocus:g=>{if(Cg(g,s)){var b;(b=u.current)==null||b.focus()}else{const v=ZK()||(i==null?void 0:i.refs.domReference.current);v==null||v.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,g.nativeEvent,"focus-out"))}}}))}const tZ=()=>y.useContext(WI),nZ="data-floating-ui-focusable",rZ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},oZ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},CS=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function GI(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=t,{enabled:i=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:u="pointerdown",ancestorScroll:h=!1,bubbles:f,capture:p}=e,g=sv(),b=po(typeof l=="function"?l:()=>!1),v=typeof l=="function"?b:l,x=y.useRef(!1),w=y.useRef(!1),{escapeKey:k,outsidePress:C}=CS(f),{escapeKey:S,outsidePress:T}=CS(p),E=y.useRef(!1),M=po(z=>{var J;if(!n||!i||!a||z.key!=="Escape"||E.current)return;const P=(J=s.current.floatingContext)==null?void 0:J.nodeId,B=g?kg(g.nodesRef.current,P):[];if(!k&&(z.stopPropagation(),B.length>0)){let H=!0;if(B.forEach(Y=>{var G;if((G=Y.context)!=null&&G.open&&!Y.context.dataRef.current.__escapeKeyBubbles){H=!1;return}}),!H)return}r(!1,mK(z)?z.nativeEvent:z,"escape-key")}),R=po(z=>{var J;const P=()=>{var B;M(z),(B=ia(z))==null||B.removeEventListener("keydown",P)};(J=ia(z))==null||J.addEventListener("keydown",P)}),I=po(z=>{var J;const P=x.current;x.current=!1;const B=w.current;if(w.current=!1,c==="click"&&B||P||typeof v=="function"&&!v(z))return;const H=ia(z),Y="["+Pd("inert")+"]",G=hs(o.floating).querySelectorAll(Y);let X=zt(H)?H:null;for(;X&&!ux(X);){const ve=F3(X);if(ux(ve)||!zt(ve))break;X=ve}if(G.length&&zt(H)&&!gK(H)&&!Va(H,o.floating)&&Array.from(G).every(ve=>!Va(X,ve)))return;if(w0(H)&&F){const ve=H.clientWidth>0&&H.scrollWidth>H.clientWidth,Pe=H.clientHeight>0&&H.scrollHeight>H.clientHeight;let Ke=Pe&&z.offsetX>H.clientWidth;if(Pe&&z3(H).direction==="rtl"&&(Ke=z.offsetX<=H.offsetWidth-H.clientWidth),Ke||ve&&z.offsetY>H.clientHeight)return}const pe=(J=s.current.floatingContext)==null?void 0:J.nodeId,He=g&&kg(g.nodesRef.current,pe).some(ve=>{var Pe;return xg(z,(Pe=ve.context)==null?void 0:Pe.elements.floating)});if(xg(z,o.floating)||xg(z,o.domReference)||He)return;const qe=g?kg(g.nodesRef.current,pe):[];if(qe.length>0){let ve=!0;if(qe.forEach(Pe=>{var Ke;if((Ke=Pe.context)!=null&&Ke.open&&!Pe.context.dataRef.current.__outsidePressBubbles){ve=!1;return}}),!ve)return}r(!1,z,"outside-press")}),L=po(z=>{var J;const P=()=>{var B;I(z),(B=ia(z))==null||B.removeEventListener(c,P)};(J=ia(z))==null||J.addEventListener(c,P)});y.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=k,s.current.__outsidePressBubbles=C;let z=-1;function J(G){r(!1,G,"ancestor-scroll")}function P(){window.clearTimeout(z),E.current=!0}function B(){z=window.setTimeout(()=>{E.current=!1},H3()?5:0)}const H=hs(o.floating);a&&(H.addEventListener("keydown",S?R:M,S),H.addEventListener("compositionstart",P),H.addEventListener("compositionend",B)),v&&H.addEventListener(c,T?L:I,T);let Y=[];return h&&(zt(o.domReference)&&(Y=Wu(o.domReference)),zt(o.floating)&&(Y=Y.concat(Wu(o.floating))),!zt(o.reference)&&o.reference&&o.reference.contextElement&&(Y=Y.concat(Wu(o.reference.contextElement)))),Y=Y.filter(G=>{var X;return G!==((X=H.defaultView)==null?void 0:X.visualViewport)}),Y.forEach(G=>{G.addEventListener("scroll",J,{passive:!0})}),()=>{a&&(H.removeEventListener("keydown",S?R:M,S),H.removeEventListener("compositionstart",P),H.removeEventListener("compositionend",B)),v&&H.removeEventListener(c,T?L:I,T),Y.forEach(G=>{G.removeEventListener("scroll",J)}),window.clearTimeout(z)}},[s,o,a,v,c,n,r,h,i,k,C,M,S,R,I,T,L]),y.useEffect(()=>{x.current=!1},[v,c]);const $=y.useMemo(()=>({onKeyDown:M,[rZ[u]]:z=>{d&&r(!1,z.nativeEvent,"reference-press")}}),[M,r,d,u]),F=y.useMemo(()=>({onKeyDown:M,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[oZ[c]]:()=>{x.current=!0}}),[M,c]);return y.useMemo(()=>i?{reference:$,floating:F}:{},[i,$,F])}function sZ(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=rv(),s=y.useRef({}),[i]=y.useState(()=>FK()),a=ov()!=null,[l,c]=y.useState(r.reference),d=po((f,p,g)=>{s.current.openEvent=f?p:void 0,i.emit("openchange",{open:f,event:p,reason:g,nested:a}),n==null||n(f,p,g)}),u=y.useMemo(()=>({setPositionReference:c}),[]),h=y.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return y.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:h,events:i,floatingId:o,refs:u}),[e,d,h,i,o,u])}function Qa(t){t===void 0&&(t={});const{nodeId:e}=t,n=sZ({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[s,i]=y.useState(null),[a,l]=y.useState(null),d=(o==null?void 0:o.domReference)||s,u=y.useRef(null),h=sv();Lt(()=>{d&&(u.current=d)},[d]);const f=B3({...t,elements:{...o,...a&&{reference:a}}}),p=y.useCallback(w=>{const k=zt(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;l(k),f.refs.setReference(k)},[f.refs]),g=y.useCallback(w=>{(zt(w)||w===null)&&(u.current=w,i(w)),(zt(f.refs.reference.current)||f.refs.reference.current===null||w!==null&&!zt(w))&&f.refs.setReference(w)},[f.refs]),b=y.useMemo(()=>({...f.refs,setReference:g,setPositionReference:p,domReference:u}),[f.refs,g,p]),v=y.useMemo(()=>({...f.elements,domReference:d}),[f.elements,d]),x=y.useMemo(()=>({...f,...r,refs:b,elements:v,nodeId:e}),[f,b,v,e,r]);return Lt(()=>{r.dataRef.current.floatingContext=x;const w=h==null?void 0:h.nodesRef.current.find(k=>k.id===e);w&&(w.context=x)}),y.useMemo(()=>({...f,context:x,refs:b,elements:v}),[f,b,v,x])}function iZ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:s,elements:i}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=y.useRef(!1),d=y.useRef(),u=y.useRef(!0);y.useEffect(()=>{if(!a)return;const f=V3(i.domReference);function p(){!n&&w0(i.domReference)&&i.domReference===Ib(hs(i.domReference))&&(c.current=!0)}function g(){u.current=!0}return f.addEventListener("blur",p),f.addEventListener("keydown",g,!0),()=>{f.removeEventListener("blur",p),f.removeEventListener("keydown",g,!0)}},[i.domReference,n,a]),y.useEffect(()=>{if(!a)return;function f(p){let{reason:g}=p;(g==="reference-press"||g==="escape-key")&&(c.current=!0)}return o.on("openchange",f),()=>{o.off("openchange",f)}},[o,a]),y.useEffect(()=>()=>{clearTimeout(d.current)},[]);const h=y.useMemo(()=>({onPointerDown(f){hK(f.nativeEvent)||(u.current=!1)},onMouseLeave(){c.current=!1},onFocus(f){if(c.current)return;const p=ia(f.nativeEvent);if(l&&zt(p))try{if(PI()&&fK())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!u.current&&!bK(p))return}r(!0,f.nativeEvent,"focus")},onBlur(f){c.current=!1;const p=f.relatedTarget,g=f.nativeEvent,b=zt(p)&&p.hasAttribute(Pd("focus-guard"))&&p.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var v;const x=Ib(i.domReference?i.domReference.ownerDocument:document);!p&&x===i.domReference||Va((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,x)||Va(i.domReference,x)||b||r(!1,g,"focus")})}}),[s,i.domReference,r,l]);return y.useMemo(()=>a?{reference:h}:{},[a,h])}const SS="active",TS="selected";function Sg(t,e,n){const r=new Map,o=n==="item";let s=t;if(o&&t){const{[SS]:i,[TS]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[nZ]:""},...s,...e.map(i=>{const a=i?i[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((i,a)=>(a&&Object.entries(a).forEach(l=>{let[c,d]=l;if(!(o&&[SS,TS].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var u;(u=r.get(c))==null||u.push(d),i[c]=function(){for(var h,f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];return(h=r.get(c))==null?void 0:h.map(b=>b(...p)).find(b=>b!==void 0)}}}else i[c]=d}),i),{})}}function qI(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),o=y.useCallback(a=>Sg(a,t,"reference"),e),s=y.useCallback(a=>Sg(a,t,"floating"),n),i=y.useCallback(a=>Sg(a,t,"item"),r);return y.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const aZ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function lZ(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:s=!0,role:i="dialog"}=e,a=(n=aZ.get(i))!=null?n:i,l=rv(),d=ov()!=null,u=y.useMemo(()=>a==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&d&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[a,o,d,r,l,i]),h=y.useMemo(()=>{const p={id:o,...a&&{role:a}};return a==="tooltip"||i==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,i]),f=y.useCallback(p=>{let{active:g,selected:b}=p;const v={role:"option",...g&&{id:o+"-option"}};switch(i){case"select":return{...v,"aria-selected":g&&b};case"combobox":return{...v,...g&&{"aria-selected":!0}}}return{}},[o,i]);return y.useMemo(()=>s?{reference:u,floating:h,item:f}:{},[s,u,h,f])}const ES=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Zi(t,e){return typeof t=="function"?t(e):t}function cZ(t,e){const[n,r]=y.useState(t);return t&&!n&&r(!0),y.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function dZ(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,i=(typeof o=="number"?o:o.close)||0,[a,l]=y.useState("unmounted"),c=cZ(n,i);return!c&&a==="close"&&l("unmounted"),Lt(()=>{if(r){if(n){l("initial");const d=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(d)}}l("close")}},[n,r]),{isMounted:c,status:a}}function iv(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:s,duration:i=250}=e,a=t.placement,l=a.split("-")[0],c=y.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof i=="number",u=(d?i:i.open)||0,h=(d?i:i.close)||0,[f,p]=y.useState(()=>({...Zi(s,c),...Zi(n,c)})),{isMounted:g,status:b}=dZ(t,{duration:i}),v=si(n),x=si(r),w=si(o),k=si(s);return Lt(()=>{const C=Zi(v.current,c),S=Zi(w.current,c),T=Zi(k.current,c),E=Zi(x.current,c)||Object.keys(C).reduce((M,R)=>(M[R]="",M),{});if(b==="initial"&&p(M=>({transitionProperty:M.transitionProperty,...T,...C})),b==="open"&&p({transitionProperty:Object.keys(E).map(ES).join(","),transitionDuration:u+"ms",...T,...E}),b==="close"){const M=S||C;p({transitionProperty:Object.keys(M).map(ES).join(","),transitionDuration:h+"ms",...T,...M})}},[h,w,v,x,k,u,b,c]),{isMounted:g,styles:f}}var KI={exports:{}},Tg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function uZ(){if(MS)return Tg;MS=1;var t=N;function e(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function a(u,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,b=p[1];return s(function(){g.value=f,g.getSnapshot=h,l(g)&&b({inst:g})},[u,f,h]),o(function(){return l(g)&&b({inst:g}),u(function(){l(g)&&b({inst:g})})},[u]),i(f),f}function l(u){var h=u.getSnapshot;u=u.value;try{var f=h();return!n(u,f)}catch{return!0}}function c(u,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Tg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,Tg}KI.exports=uZ();var ZI=KI.exports;const hZ=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},fZ=({contentComponent:t})=>{const e=ZI.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return N.createElement(N.Fragment,null,Object.values(e))};function pZ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:xE.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class mZ extends N.Component{constructor(e){var n;super(e),this.editorContentRef=N.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=pZ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return N.createElement(N.Fragment,null,N.createElement("div",{ref:hZ(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&N.createElement(fZ,{contentComponent:e.contentComponent}))}}const gZ=y.forwardRef((t,e)=>{const n=N.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return N.createElement(mZ,{key:n,innerRef:e,...t})});N.memo(gZ);var Eg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function yZ(){if(AS)return Eg;AS=1;var t=N,e=ZI;function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Eg.useSyncExternalStoreWithSelector=function(c,d,u,h,f){var p=s(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function v(S){if(!x){if(x=!0,w=S,S=h(S),f!==void 0&&g.hasValue){var T=g.value;if(f(T,S))return k=T}return k=S}if(T=k,r(w,S))return T;var E=h(S);return f!==void 0&&f(T,E)?T:(w=S,k=E)}var x=!1,w,k,C=u===void 0?null:u;return[function(){return v(d())},C===null?void 0:function(){return v(C())}]},[d,u,h,f]);var b=o(c,p[0],p[1]);return i(function(){g.hasValue=!0,g.value=b},[b]),l(b),b},Eg}yZ();const bZ=y.createContext({editor:null});bZ.Consumer;const JI=y.createContext({onDragStart:void 0}),YI=()=>y.useContext(JI),vZ=N.forwardRef((t,e)=>{const{onDragStart:n}=YI(),r=t.as||"div";return N.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function wZ(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function xZ(t){var e;return typeof t=="object"&&((e=t.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class kZ{constructor(e,{editor:n,props:r={},as:o="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?kt.flushSync(()=>{this.render()}):this.render()}render(){var e;const n=this.component,r=this.props,o=this.editor;(wZ(n)||xZ(n))&&(r.ref=s=>{this.ref=s}),this.reactElement=N.createElement(n,{...r}),(e=o==null?void 0:o.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n==null?void 0:n.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class CZ extends BV{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const c=d=>d.charAt(0).toUpperCase()+d.substring(1);this.component.displayName=c(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&c.appendChild(this.contentDOMElement)}},s=this.component,i=N.memo(c=>N.createElement(JI.Provider,{value:o},N.createElement(s,c)));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new kZ(i,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const o=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,i=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:s,oldDecorations:i,newNode:e,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,o({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=_h(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function SZ(t,e){return n=>n.editor.contentComponent?new CZ(t,n,e):{}}var Ru={},RS;function TZ(){if(RS)return Ru;RS=1;var t=U3();return Ru.createRoot=t.createRoot,Ru.hydrateRoot=t.hydrateRoot,Ru}var EZ=TZ();const XI=y.createContext(void 0);function Xr(t){return y.useContext(XI)}function te(t){const e=Xr();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function av(t,e,n){const r=Xr();e||(e=r==null?void 0:r.editor),y.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}function MZ(t,e){const n=te();e=e||n;const[r,o]=y.useState(()=>{if(t)return e.getSelectionBoundingBox()}),s=y.useCallback(()=>{if(!t)return;const i=e.getSelectionBoundingBox();o(i)},[e,t]);return av(s,e,!0),y.useEffect(()=>{o(t?e.getSelectionBoundingBox():void 0)},[t,e]),r}function AZ(t){return t.getBoundingClientRect!==void 0}function Os(t,e,n,r){const{refs:o,update:s,context:i,floatingStyles:a,isPositioned:l}=Qa({open:t,...r}),{isMounted:c,styles:d}=iv(i),u=typeof(r==null?void 0:r.canDismiss)=="object"?r.canDismiss:{enabled:r==null?void 0:r.canDismiss},h=GI(i,u),{getReferenceProps:f,getFloatingProps:p}=qI([h]);return y.useEffect(()=>{s()},[e,s]),y.useEffect(()=>{e!==null&&(e instanceof HTMLElement||AZ(e)?o.setReference(e):o.setReference({getBoundingClientRect:()=>e}))},[e,o]),y.useMemo(()=>({isMounted:c,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...d,...a,zIndex:n},getFloatingProps:p,getReferenceProps:f,isPositioned:l}),[l,a,c,o.setFloating,o.setReference,d,n,p,f])}function Oo(t){const[e,n]=y.useState();return y.useEffect(()=>t(r=>{n({...r})}),[t]),e}const QI=y.createContext(void 0);function Z(){return y.useContext(QI)}const Op=(t={},e=[])=>y.useMemo(()=>{const n=cK.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e);function ue(){return Xr().editor.dictionary}function lv(t,e){const n=Xr();e||(e=n==null?void 0:n.editor),y.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}const cv=t=>{const[e,n]=y.useState(!1),[r,o]=y.useState(t.editor.isEmpty),s=Z();lv(()=>{o(t.editor.isEmpty)},t.editor);const i=y.useCallback(()=>{n(!0)},[]),a=y.useCallback(()=>{n(!1)},[]);return y.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),m.jsxs(m.Fragment,{children:[m.jsx(s.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:i,onBlur:a,editable:t.editable}),t.actions&&m.jsx("div",{className:"bn-comment-actions-wrapper",children:m.jsx(t.actions,{isFocused:e,isEmpty:r})})]})},RZ=Po(qn(J1.paragraph.implementation.node.config),{}),{textColor:Jme,backgroundColor:Yme,..._Z}=Y1,dv=X1.create({blockSpecs:{paragraph:RZ},styleSpecs:_Z});function IZ(){const t=te();if(!t.comments)throw new Error("Comments plugin not found");const e=t.comments,n=Z(),r=ue(),o=Op({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:dv,sideMenuDetection:"editor"});return m.jsx(n.Comments.Card,{className:"bn-thread",children:m.jsx(cv,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:s})=>m.jsx(n.Generic.Toolbar.Root,{className:je("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:m.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:s,onClick:async()=>{await e.createThread({initialComment:{body:o.document}}),e.stopPendingComment()},children:"Save"})})})})}const NZ=t=>{const e=te();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=e.comments;y.useEffect(()=>{const d=n.onUpdate(u=>e.setForceSelectionVisible(u.pendingComment));return()=>d()},[n,e]);const r=Oo(n.onUpdate.bind(n)),o=MZ(r==null?void 0:r.pendingComment),{isMounted:s,ref:i,style:a,getFloatingProps:l}=Os((r==null?void 0:r.pendingComment)||!1,o||null,5e3,{placement:"bottom",middleware:[Wr(10),Pi(),ar()],onOpenChange:d=>{d||(n.stopPendingComment(),e.focus())},...t.floatingOptions});if(!s||!r)return null;const c=t.floatingComposer||IZ;return m.jsx("div",{ref:i,style:a,...l(),children:m.jsx(c,{})})};var eN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_S=N.createContext&&N.createContext(eN),DZ=["attr","size","title"];function PZ(t,e){if(t==null)return{};var n=OZ(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Tf(){return Tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tf.apply(this,arguments)}function IS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ef(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IS(Object(n),!0).forEach(function(r){LZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LZ(t,e,n){return e=jZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jZ(t){var e=BZ(t,"string");return typeof e=="symbol"?e:e+""}function BZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tN(t){return t&&t.map((e,n)=>N.createElement(e.tag,Ef({key:n},e.attr),tN(e.child)))}function ne(t){return e=>N.createElement(VZ,Tf({attr:Ef({},t.attr)},e),tN(t.child))}function VZ(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=PZ(t,DZ),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),N.createElement("svg",Tf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:Ef(Ef({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&N.createElement("title",null,s),t.children)};return _S!==void 0?N.createElement(_S.Consumer,null,n=>e(n)):e(eN)}function $Z(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function nN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function HZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function FZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function uv(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function zZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function UZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function WZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function GZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function qZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function KZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function NS(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function rN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function oN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function sN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function ZZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function JZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function DS(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function YZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function XZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function iN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function aN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function lN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function cN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function QZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function eJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function dN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function tJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function nJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function hv(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function rJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function oJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function uN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function sJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function iJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function aJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function hN(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function lJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function cJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function dJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function uJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function hJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function fJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function pJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function mJ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function PS(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}let Mg;async function gJ(){return Mg||(Mg=(async()=>{const[t,e]=await Promise.all([wt(()=>import("./module-BvCTiNll.js"),[]),wt(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),Mg)}function yJ(t){const e=y.useRef(null),n=y.useRef(null);return n.current&&n.current.update(t),y.useEffect(()=>((async()=>{const{emojiMart:r}=await gJ();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),N.createElement("div",{ref:e})}const OS=t=>{const[e,n]=y.useState(!1),r=Z(),o=Xr();return m.jsxs(r.Generic.Popover.Root,{opened:e,children:[m.jsx(r.Generic.Popover.Trigger,{children:m.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),n(!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),m.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:m.jsx(yJ,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:s=>{t.onEmojiSelect(s),n(!1)},theme:o==null?void 0:o.colorSchemePreference})})]})};function bJ(t,e){return fv(t,[e]).get(e)}function fv(t,e){const n=t.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=y.useCallback(()=>{const a=new Map;for(const l of e){const c=r.getUser(l);c&&a.set(l,c)}return a},[r,e]),s=y.useMemo(()=>({current:o()}),[o]),i=y.useCallback(a=>{const l=r.subscribe(c=>{s.current=o(),a()});return r.loadUsers(e),l},[r,o,e,s]);return y.useSyncExternalStore(i,()=>s.current)}const vJ=t=>{const e=Z(),n=ue(),r=te();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=t.comment.reactions.find(l=>l.emoji===t.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[s,i]=y.useState([]),a=fv(r,s);return m.jsx(e.Generic.Badge.Root,{className:je("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(t.comment,o.emoji),onClick:()=>t.onReactionSelect(o.emoji),onMouseEnter:()=>i(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},o.emoji)},wJ=({comment:t,thread:e,showResolveButton:n})=>{const r=ue(),o=Op({initialContent:t.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:dv,sideMenuDetection:"editor"},[t.body]),s=Z(),[i,a]=y.useState(!1),l=te();if(!l.comments)throw new Error("Comments plugin not found");const c=l.comments.threadStore,d=y.useCallback(()=>{a(!0)},[]),u=y.useCallback(()=>{o.replaceBlocks(o.document,t.body),a(!1)},[o,t.body]),h=y.useCallback(async E=>{await c.updateComment({commentId:t.id,comment:{body:o.document},threadId:e.id}),a(!1)},[t,e.id,o,c]),f=y.useCallback(async()=>{await c.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,c]),p=y.useCallback(async E=>{c.auth.canAddReaction(t,E)?await c.addReaction({threadId:e.id,commentId:t.id,emoji:E}):c.auth.canDeleteReaction(t,E)&&await c.deleteReaction({threadId:e.id,commentId:t.id,emoji:E})},[c,t,e.id]),g=y.useCallback(async()=>{await c.resolveThread({threadId:e.id})},[e.id,c]),b=y.useCallback(async()=>{await c.unresolveThread({threadId:e.id})},[e.id,c]),v=bJ(l,t.userId);if(!t.body)return null;let x;const w=c.auth.canAddReaction(t),k=c.auth.canDeleteComment(t),C=c.auth.canUpdateComment(t),S=n&&(e.resolved?c.auth.canUnresolveThread(e):c.auth.canResolveThread(e));i||(x=m.jsxs(s.Generic.Toolbar.Root,{className:je("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[w&&m.jsx(OS,{onEmojiSelect:E=>p(E.native),children:m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:m.jsx(PS,{size:16})},"add-reaction")}),S&&(e.resolved?m.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:b,children:m.jsx($Z,{size:16})},"reopen"):m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:g,children:m.jsx(cJ,{size:16})},"resolve")),(k||C)&&m.jsxs(s.Generic.Menu.Root,{position:"bottom-start",children:[m.jsx(s.Generic.Menu.Trigger,{children:m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:m.jsx(pJ,{size:16})},"more-actions")}),m.jsxs(s.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[C&&m.jsx(s.Generic.Menu.Item,{icon:m.jsx(HZ,{}),onClick:d,children:r.comments.actions.edit_comment},"edit-comment"),k&&m.jsx(s.Generic.Menu.Item,{icon:m.jsx(uJ,{}),onClick:f,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const T=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return m.jsx(s.Comments.Comment,{authorInfo:v??"loading",timeString:T,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:x,className:"bn-thread-comment",children:m.jsx(cv,{autoFocus:i,editor:o,editable:i,actions:t.reactions.length>0||i?({isEmpty:E})=>m.jsxs(m.Fragment,{children:[t.reactions.length>0&&!i&&m.jsxs(s.Generic.Badge.Group,{className:je("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(M=>m.jsx(vJ,{comment:t,emoji:M.emoji,onReactionSelect:p},M.emoji)),m.jsx(OS,{onEmojiSelect:M=>p(M.native),children:m.jsx(s.Generic.Badge.Root,{className:je("bn-badge","bn-comment-add-reaction"),text:"+",icon:m.jsx(PS,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),i&&m.jsxs(s.Generic.Toolbar.Root,{variant:"action-toolbar",className:je("bn-action-toolbar","bn-comment-actions"),children:[m.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",onClick:h,isDisabled:E,children:"Save"}),m.jsx(s.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Cancel",variant:"compact",onClick:u,children:"Cancel"})]})]}):void 0})})},xJ=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=Z(),r=ue(),o=te(),s=fv(o,t.resolvedBy?[t.resolvedBy]:[]),i=t.comments.map((a,l)=>m.jsx(wJ,{thread:t,comment:a,showResolveButton:l===0},a.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!s.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const a=t.comments.findLastIndex(l=>t.resolvedUpdatedAt.getTime()>l.createdAt.getTime())+1;i.splice(a,0,m.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&s.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:m.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&i.length>e&&i.splice(1,i.length-2,m.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),i},fN=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:s,tabIndex:i})=>{const a=Z(),l=ue(),c=te().comments;if(!c)throw new Error("Comments plugin not found");const d=Op({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:dv,sideMenuDetection:"editor"}),u=y.useCallback(async()=>{await c.threadStore.addComment({comment:{body:d.document},threadId:t.id}),d.removeBlocks(d.document)},[c,d,t.id]);return m.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:s,selected:e,tabIndex:i,children:[m.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:m.jsx(xJ,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&m.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:m.jsx(cv,{autoFocus:!1,editable:!0,editor:d,actions:({isEmpty:h})=>h?null:m.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:je("bn-action-toolbar","bn-comment-actions"),children:m.jsx(a.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",isDisabled:h,onClick:u,children:"Save"})})})})]})};function kJ(t){const e=t.comments;if(!e)throw new Error("Comments plugin not found");const n=e.threadStore,r=y.useRef();r.current||(r.current=n.getThreads());const o=y.useCallback(s=>n.subscribe(i=>{r.current=i,s()}),[n]);return y.useSyncExternalStore(o,()=>r.current)}const CJ=t=>{const e=te();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=Oo(e.comments.onUpdate.bind(e.comments)),{isMounted:r,ref:o,style:s,getFloatingProps:i,setReference:a}=Os(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[Wr(10),Pi(),ar()],onOpenChange:u=>{var h;u||((h=e.comments)==null||h.selectThread(void 0),e.focus())},...t.floatingOptions}),l=y.useCallback(()=>{var u;if(!(n!=null&&n.selectedThreadId))return;const h=(u=e.domElement)==null?void 0:u.querySelector(`[data-bn-thread-id="${n==null?void 0:n.selectedThreadId}"]`);h&&a(h)},[a,e,n==null?void 0:n.selectedThreadId]);y.useEffect(()=>{if(n!=null&&n.selectedThreadId)return e.onChange(()=>{l()})},[e,l,n==null?void 0:n.selectedThreadId]),y.useLayoutEffect(l,[l]);const c=kJ(e);if(!r||!n||!n.selectedThreadId)return null;const d=t.floatingThread||fN;return m.jsx("div",{ref:o,style:s,...i(),children:m.jsx(d,{thread:c.get(n.selectedThreadId),selected:!0})})},SJ=t=>{const e=Z(),n=ue(),{block:r}=t,o=te(),[s,i]=y.useState(""),a=y.useCallback(d=>{i(d.currentTarget.value)},[]),l=y.useCallback(d=>{d.key==="Enter"&&(d.preventDefault(),o.updateBlock(r,{props:{name:GC(s),url:s}}))},[o,r,s]),c=y.useCallback(()=>{o.updateBlock(r,{props:{name:GC(s),url:s}})},[o,r,s]);return m.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[m.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:s,onChange:a,onKeyDown:l,"data-test":"embed-input"}),m.jsx(e.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},TJ=t=>{var e;const n=Z(),r=ue(),{block:o,setLoading:s}=t,i=te(),[a,l]=y.useState(!1);y.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const c=y.useCallback(h=>{if(h===null)return;async function f(p){if(s(!0),i.uploadFile!==void 0)try{let g=await i.uploadFile(p,o.id);typeof g=="string"&&(g={props:{name:p.name,url:g}}),i.updateBlock(o,g)}catch{l(!0)}finally{s(!1)}}f(h)},[o,i,s]),d=i.schema.blockSchema[o.type],u=d.isFileBlock&&(e=d.fileBlockAccept)!=null&&e.length?d.fileBlockAccept.join(","):"*/*";return m.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[m.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:u,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),a&&m.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},pN=t=>{const e=Z(),n=ue(),r=te(),[o,s]=y.useState(!1),i=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:m.jsx(TJ,{block:t.block,setLoading:s})}]:[],{name:n.file_panel.embed.title,tabPanel:m.jsx(SJ,{block:t.block})}],[a,l]=y.useState(t.defaultOpenTab||i[0].name);return m.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:i,loading:o})},EJ=t=>{const e=te();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=Oo(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:r,ref:o,style:s,getFloatingProps:i}=Os((n==null?void 0:n.show)||!1,(n==null?void 0:n.referencePos)||null,5e3,{placement:"bottom",middleware:[Wr(10),ar()],onOpenChange:u=>{u||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...c}=n,d=t.filePanel||pN;return m.jsx("div",{ref:o,style:s,...i(),children:m.jsx(d,{...c})})};function Ls(t,e){lv(t,e),av(t,e)}function pv(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function hn(t){const e=Xr();if(t||(t=e==null?void 0:e.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=t,[r,o]=y.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]});return Ls(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},n),r}const MJ={bold:qZ,italic:YZ,underline:rJ,strike:tJ,code:FZ};function AJ(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const _u=t=>{const e=ue(),n=Z(),r=te(),o=AJ(t.basicTextStyle,r),s=hn(r),[i,a]=y.useState(t.basicTextStyle in r.getActiveStyles());Ls(()=>{o&&a(t.basicTextStyle in r.getActiveStyles())},r);const l=d=>{if(r.focus(),!!o){if(r.schema.styleSchema[d].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[d]:!0})}};if(!y.useMemo(()=>o?!!s.find(d=>d.content!==void 0):!1,[o,s])||!r.isEditable)return null;const c=MJ[t.basicTextStyle];return m.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>l(t.basicTextStyle),isSelected:i,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:On(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:m.jsx(c,{})})},Lb=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,o=y.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return m.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:o,children:"A"})},LS=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],Lp=t=>{const e=Z(),n=ue();return m.jsxs(m.Fragment,{children:[m.jsx(()=>t.text?m.jsxs(m.Fragment,{children:[m.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),LS.map(r=>m.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:m.jsx(Lb,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),m.jsx(()=>t.background?m.jsxs(m.Fragment,{children:[m.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),LS.map(r=>m.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:m.jsx(Lb,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function jS(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const RJ=()=>{const t=Z(),e=ue(),n=te(),r=jS("text",n),o=jS("background",n),s=hn(n),[i,a]=y.useState(r&&n.getActiveStyles().textColor||"default"),[l,c]=y.useState(o&&n.getActiveStyles().backgroundColor||"default");Ls(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&c(n.getActiveStyles().backgroundColor||"default")},n);const d=y.useCallback(h=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");h==="default"?n.removeStyles({textColor:h}):n.addStyles({textColor:h}),setTimeout(()=>{n.focus()})},[n,r]),u=y.useCallback(h=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");h==="default"?n.removeStyles({backgroundColor:h}):n.addStyles({backgroundColor:h}),setTimeout(()=>{n.focus()})},[o,n]);return!y.useMemo(()=>{if(!r&&!o)return!1;for(const h of s)if(h.content!==void 0)return!0;return!1},[o,s,r])||!n.isEditable?null:m.jsxs(t.Generic.Menu.Root,{children:[m.jsx(t.Generic.Menu.Trigger,{children:m.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:m.jsx(Lb,{textColor:i,backgroundColor:l,size:20})})}),m.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Lp,{text:r?{color:i,setColor:d}:void 0,background:o?{color:l,setColor:u}:void 0})})]})},BS=t=>{for(const e of EI)if(t.startsWith(e))return t;return`${MI}://${t}`},mN=t=>{const e=Z(),n=ue(),{url:r,text:o,editLink:s,showTextField:i}=t,[a,l]=y.useState(r),[c,d]=y.useState(o);y.useEffect(()=>{l(r),d(o)},[o,r]);const u=y.useCallback(g=>{g.key==="Enter"&&(g.preventDefault(),s(BS(a),c))},[s,a,c]),h=y.useCallback(g=>l(g.currentTarget.value),[]),f=y.useCallback(g=>d(g.currentTarget.value),[]),p=y.useCallback(()=>s(BS(a),c),[s,a,c]);return m.jsxs(e.Generic.Form.Root,{children:[m.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:m.jsx(iN,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:u,onChange:h,onSubmit:p}),i!==!1&&m.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:m.jsx(hv,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:u,onChange:f,onSubmit:p})]})};function _J(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const IJ=()=>{var t;const e=te(),n=Z(),r=ue(),o=_J(e),s=hn(e),[i,a]=y.useState(!1),[l,c]=y.useState(e.getSelectedLinkUrl()||""),[d,u]=y.useState(e.getSelectedText());Ls(()=>{u(e.getSelectedText()||""),c(e.getSelectedLinkUrl()||"")},e),y.useEffect(()=>{var p;const g=b=>{(b.ctrlKey||b.metaKey)&&b.key==="k"&&(a(!0),b.preventDefault())};return(p=e.prosemirrorView)==null||p.dom.addEventListener("keydown",g),()=>{var b;(b=e.prosemirrorView)==null||b.dom.removeEventListener("keydown",g)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const h=y.useCallback(p=>{e.createLink(p),e.focus()},[e]),f=e.transact(p=>Tb(p.selection));return!y.useMemo(()=>{if(!o)return!1;for(const p of s)if(p.content===void 0)return!1;return!f},[o,s,f])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:m.jsxs(n.Generic.Popover.Root,{opened:i,children:[m.jsx(n.Generic.Popover.Trigger,{children:m.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:On(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:m.jsx(iN,{}),onClick:()=>a(!0)})}),m.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(mN,{url:l,text:d,editLink:h,showTextField:!1})})]})},NJ=()=>{const t=ue(),e=Z(),n=te(),[r,o]=y.useState(),s=hn(n),i=y.useMemo(()=>{if(s.length!==1)return;const c=s[0];if(Nd(c,n))return o(c.props.caption),c},[n,s]),a=y.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{caption:r}}))},[r,n,i]),l=y.useCallback(c=>o(c.currentTarget.value),[]);return!i||Dd(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:m.jsx(DS,{}),isSelected:i.props.caption!==""})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(e.Generic.Form.Root,{children:m.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:m.jsx(DS,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},DJ=()=>{const t=ue(),e=Z(),n=te(),r=hn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(Nd(i,n))return i},[n,r]),s=y.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||Dd(o,n)||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:m.jsx(dJ,{}),onClick:s})},PJ=()=>{const t=ue(),e=Z(),n=te(),[r,o]=y.useState(),s=hn(n),i=y.useMemo(()=>{if(s.length!==1)return;const c=s[0];if(Nd(c,n))return o(c.props.name),c},[n,s]),a=y.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{name:r}}))},[r,n,i]),l=y.useCallback(c=>o(c.currentTarget.value),[]);return!i||Dd(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:m.jsx(NS,{})})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(e.Generic.Form.Root,{children:m.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:m.jsx(NS,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[i.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},OJ=()=>{const t=ue(),e=Z(),n=te(),r=hn(n),[o,s]=y.useState(!1);y.useEffect(()=>{s(!1)},[r]);const i=r.length===1?r[0]:void 0;return i===void 0||!Nd(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{opened:o,position:"bottom",children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>s(!o),isSelected:o,mainTooltip:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:m.jsx(iJ,{})})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:m.jsx(pN,{block:i})})]})},LJ=()=>{const t=ue(),e=Z(),n=te(),r=hn(n),[o,s]=y.useState(()=>n.canNestBlock());Ls(()=>{s(n.canNestBlock())},n);const i=y.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!y.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:On(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:m.jsx(JZ,{})})},jJ=()=>{const t=ue(),e=Z(),n=te(),r=hn(n),[o,s]=y.useState(()=>n.canUnnestBlock());Ls(()=>{s(n.canUnnestBlock())},n);const i=y.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!y.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:On(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:m.jsx(ZZ,{})})},BJ=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:hv,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:rN,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:oN,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:sN,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.quote.title,type:"quote",icon:dN,isSelected:e=>e.type==="quote"},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:cN,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:lN,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:aN,isSelected:e=>e.type==="checkListItem"}],VJ=t=>{const e=Z(),n=ue(),r=te(),o=hn(r),[s,i]=y.useState(r.getTextCursorPosition().block),a=y.useMemo(()=>(t.items||BJ(n)).filter(d=>d.type in r.schema.blockSchema),[r,n,t.items]),l=y.useMemo(()=>a.find(d=>d.type===s.type)!==void 0,[s.type,a]),c=y.useMemo(()=>{const d=u=>{r.focus(),r.transact(()=>{for(const h of o)r.updateBlock(h,{type:u.type,props:u.props})})};return a.map(u=>{const h=u.icon;return{text:u.name,icon:m.jsx(h,{size:16}),onClick:()=>d(u),isSelected:u.isSelected(s)}})},[s,a,r,o]);return Ls(()=>{i(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:m.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:c})},$J=()=>{const t=ue(),e=Z(),n=te(),r=y.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:m.jsx(nN,{}),onClick:r}):null},HJ=()=>{const t=ue(),e=Z(),n=te(),r=y.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:m.jsx(nN,{}),onClick:r})};function jb(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const FJ=()=>{const t=ue(),e=Z(),n=te(),r=hn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(Nd(i,n))return i},[n,r]),s=y.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(i=>window.open(jb(i,window.location.href))):window.open(jb(o.props.url,window.location.href)))},[n,o]);return!o||Dd(o,n)?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,icon:m.jsx(hJ,{}),onClick:s})},zJ=()=>{const t=ue(),e=Z(),n=te(),r=hn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(tG(i,n))return i},[n,r]),s=y.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||Dd(o,n)||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:m.jsx(sJ,{}),isSelected:o.props.showPreview,onClick:s})},UJ=()=>{const t=ue(),e=Z(),n=te(),r=hn(n),o=y.useMemo(()=>{var i;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(i=n.tableHandles)==null?void 0:i.getMergeDirection(a)},[n,r]),s=y.useCallback(()=>{var i;(i=n.tableHandles)==null||i.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?m.jsx(QZ,{}):m.jsx(eJ,{}),onClick:s})},WJ={left:WZ,center:zZ,right:GZ,justify:UZ},Ag=t=>{const e=Z(),n=ue(),r=te(),o=hn(r),s=y.useMemo(()=>{var l;const c=o[0];if(Sb("textAlignment",c,r))return c.props.textAlignment;if(c.type==="table"){const d=(l=r.tableHandles)==null?void 0:l.getCellSelection();if(!d)return;const u=d.cells.map(({row:f,col:p})=>Ss(c.content.rows[f].cells[p]).props.textAlignment),h=u[0];if(u.every(f=>f===h))return h}},[r,o]),i=y.useCallback(l=>{var c;r.focus();for(const d of o)if(la("textAlignment",d.type,r))r.updateBlock(d,{props:{textAlignment:l}});else if(d.type==="table"){const u=(c=r.tableHandles)==null?void 0:c.getCellSelection();if(!u)continue;const h=d.content.rows.map(f=>({...f,cells:f.cells.map(p=>Ss(p))}));u.cells.forEach(({row:f,col:p})=>{h[f].cells[p].props.textAlignment=l}),r.updateBlock(d,{type:"table",content:{...d.content,type:"tableContent",rows:h}}),r.setTextCursorPosition(d)}},[r,o]);if(!y.useMemo(()=>!!o.find(l=>"textAlignment"in l.props||l.type==="table"&&l.children),[o])||!r.isEditable)return null;const a=WJ[t.textAlignment];return m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>i(t.textAlignment),isSelected:s===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:m.jsx(a,{})})},gN=t=>[m.jsx(VJ,{items:t},"blockTypeSelect"),m.jsx(UJ,{},"tableCellMergeButton"),m.jsx(NJ,{},"fileCaptionButton"),m.jsx(OJ,{},"replaceFileButton"),m.jsx(PJ,{},"fileRenameButton"),m.jsx(DJ,{},"fileDeleteButton"),m.jsx(FJ,{},"fileDownloadButton"),m.jsx(zJ,{},"filePreviewButton"),m.jsx(_u,{basicTextStyle:"bold"},"boldStyleButton"),m.jsx(_u,{basicTextStyle:"italic"},"italicStyleButton"),m.jsx(_u,{basicTextStyle:"underline"},"underlineStyleButton"),m.jsx(_u,{basicTextStyle:"strike"},"strikeStyleButton"),m.jsx(Ag,{textAlignment:"left"},"textAlignLeftButton"),m.jsx(Ag,{textAlignment:"center"},"textAlignCenterButton"),m.jsx(Ag,{textAlignment:"right"},"textAlignRightButton"),m.jsx(RJ,{},"colorStyleButton"),m.jsx(LJ,{},"nestBlockButton"),m.jsx(jJ,{},"unnestBlockButton"),m.jsx(IJ,{},"createLinkButton"),m.jsx($J,{},"addCommentButton"),m.jsx(HJ,{},"addTiptapCommentButton")],yN=t=>{const e=Z();return m.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||gN(t.blockTypeSelectItems)})},VS=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},bN=t=>{const e=y.useRef(null),n=te(),[r,o]=y.useState(()=>{const h=n.getTextCursorPosition().block;return"textAlignment"in h.props?VS(h.props.textAlignment):"top-start"});Ls(()=>{const h=n.getTextCursorPosition().block;"textAlignment"in h.props?o(VS(h.props.textAlignment)):o("top-start")},n);const s=Oo(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:i,ref:a,style:l,getFloatingProps:c}=Os((s==null?void 0:s.show)||!1,(s==null?void 0:s.referencePos)||null,3e3,{placement:r,middleware:[Wr(10),Pi(),ar()],onOpenChange:(h,f)=>{h||(n.formattingToolbar.closeMenu(),n.focus())},...t.floatingOptions}),d=y.useMemo(()=>pv([e,a]),[e,a]);if(!i||!s)return null;if(!s.show&&e.current)return m.jsx("div",{ref:d,style:l,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const u=t.formattingToolbar||yN;return m.jsx("div",{ref:d,style:l,...c(),children:m.jsx(u,{})})},GJ=t=>{const e=Z(),n=ue();return m.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:m.jsx(XZ,{})})},qJ=t=>{const e=Z(),n=ue();return m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(mN,{...t})})]})},KJ=t=>{const e=Z(),n=ue();return m.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(jb(t.url,window.location.href),"_blank")},icon:m.jsx(fJ,{})})},ZJ=t=>{const e=Z();return t.children?m.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children}):m.jsxs(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:[m.jsx(qJ,{url:t.url,text:t.text,editLink:t.editLink}),m.jsx(KJ,{url:t.url}),m.jsx(GJ,{deleteLink:t.deleteLink})]})},JJ=t=>{const e=te(),n={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},r=Oo(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=Os((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,4e3,{placement:"top-start",middleware:[Wr(10),ar()],onOpenChange:h=>{h||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.linkToolbar||ZJ;return m.jsx("div",{ref:s,style:i,...a(),children:m.jsx(u,{...d,...n})})};function YJ(t){return ne({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const XJ=t=>{const e=Z(),n=ue(),r=te(),o=y.useCallback(()=>{const s=t.block.content;if(s!==void 0&&Array.isArray(s)&&s.length===0)r.setTextCursorPosition(t.block),r.openSuggestionMenu("/");else{const i=r.insertBlocks([{type:"paragraph"}],t.block,"after")[0];r.setTextCursorPosition(i),r.openSuggestionMenu("/")}},[r,t.block]);return m.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:m.jsx(YJ,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function vN(t){return ne({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function QJ(t){return ne({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const eY=t=>{const e=Z(),n=te();return!la("textColor",t.block.type,n)&&!la("backgroundColor",t.block.type,n)?null:m.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(e.Generic.Menu.Trigger,{sub:!0,children:m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),m.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Lp,{iconSize:18,text:la("textColor",t.block.type,n)&&Sb("textColor",t.block,n)?{color:t.block.props.textColor,setColor:r=>n.updateBlock(t.block,{type:t.block.type,props:{textColor:r}})}:void 0,background:la("backgroundColor",t.block.type,n)&&Sb("backgroundColor",t.block,n)?{color:t.block.props.backgroundColor,setColor:r=>n.updateBlock(t.block,{props:{backgroundColor:r}})}:void 0})})]})},tY=t=>{const e=Z(),n=te();return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([t.block]),children:t.children})},nY=t=>{const e=Z(),n=te();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerRows;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(t.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:t.children})},rY=t=>{const e=Z(),n=te();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerCols;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(t.block,{type:"table",content:{...t.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:t.children})},oY=t=>{const e=Z(),n=ue();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(tY,{...t,children:n.drag_handle.delete_menuitem}),m.jsx(eY,{...t,children:n.drag_handle.colors_menuitem}),m.jsx(nY,{...t,children:n.drag_handle.header_row_menuitem}),m.jsx(rY,{...t,children:n.drag_handle.header_column_menuitem})]})})},sY=t=>{const e=Z(),n=ue(),r=t.dragHandleMenu||oY;return m.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>t.blockDragStart(o,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:m.jsx(vN,{size:24,"data-test":"dragHandle"})})}),m.jsx(r,{block:t.block,children:t.children})]})},iY=t=>{const e=Z(),n=y.useMemo(()=>{const r={"data-block-type":t.block.type};return t.block.type==="heading"&&(r["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[t.block,t.editor.schema.blockSchema]);return m.jsx(e.SideMenu.Root,{className:"bn-side-menu",...n,children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(XJ,{...t}),m.jsx(sY,{...t})]})})},aY=t=>{const e=te(),n={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},r=Oo(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=Os((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,1e3,{placement:"left-start",...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.sideMenu||iY;return m.jsx("div",{ref:s,style:i,...a(),children:m.jsx(u,{...d,...n,editor:e})})};async function lY(t,e){return(await uK(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function cY(t){const e=Z(),n=ue(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i,columns:a}=t,l=o==="loading-initial"||o==="loading"?m.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,c=y.useMemo(()=>{const d=[];for(let u=0;u<r.length;u++){const h=r[u];d.push(m.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:h,id:`bn-grid-suggestion-menu-item-${u}`,isSelected:u===s,onClick:()=>i==null?void 0:i(h)},h.id))}return d},[e,r,i,s]);return m.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&t.loadingState==="loaded"&&m.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function wN(t,e,n,r=3){const o=y.useRef(0);y.useEffect(()=>{e!==void 0&&(t.length>0?o.current=e.length:e.length-o.current>r&&n())},[n,r,t.length,e])}function xN(t,e){const[n,r]=y.useState([]),[o,s]=y.useState(!1),i=y.useRef(),a=y.useRef();return y.useEffect(()=>{const l=t;i.current=t,s(!0),e(t).then(c=>{i.current===l&&(r(c),s(!1),a.current=l)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function dY(t,e,n,r,o){const[s,i]=y.useState(0),a=r!==void 0&&r>1;return y.useEffect(()=>{var l;const c=d=>(d.key==="ArrowLeft"&&(d.preventDefault(),n.length&&i((s-1+n.length)%n.length)),d.key==="ArrowRight"&&(d.preventDefault(),n.length&&i((s+1+n.length)%n.length)),d.key==="ArrowUp"?(d.preventDefault(),n.length&&i((s-r+n.length)%n.length),!0):d.key==="ArrowDown"?(d.preventDefault(),n.length&&i((s+r)%n.length),!0):d.key==="Enter"&&!d.isComposing?(d.stopPropagation(),d.preventDefault(),n.length&&(o==null||o(n[s])),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",c,!0)}},[t.domElement,n,s,o,r,a]),y.useEffect(()=>{i(0)},[e]),{selectedIndex:n.length===0?void 0:s}}function uY(t){const e=Xr().setContentEditableProps,n=te(),{getItems:r,gridSuggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l,columns:c}=t,d=y.useCallback(g=>{a(),i(),l==null||l(g)},[l,a,i]),{items:u,usedQuery:h,loadingState:f}=xN(s,r);wN(u,h,a);const{selectedIndex:p}=dY(n,s,u,c,d);return y.useEffect(()=>(e(g=>({...g,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(g=>({...g,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),y.useEffect(()=>(e(g=>({...g,"aria-activedescendant":p?"bn-suggestion-menu-item-"+p:void 0})),()=>{e(g=>({...g,"aria-activedescendant":void 0}))}),[e,p]),m.jsx(o,{items:u,onItemClick:d,loadingState:f,selectedIndex:p,columns:c})}function hY(t){const e=te(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:s,onItemClick:i,getItems:a,floatingOptions:l}=t,c=y.useMemo(()=>i||(x=>{x.onItemClick(e)}),[e,i]),d=y.useMemo(()=>a||(async x=>await lY(e,x)),[e,a]),u={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},h=y.useCallback(x=>e.suggestionMenus.onUpdate(n,x),[e.suggestionMenus,n]),f=Oo(h),{isMounted:p,ref:g,style:b,getFloatingProps:v}=Os((f==null?void 0:f.show)||!1,(f==null?void 0:f.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Wr(10),ar(),Jf({apply({availableHeight:x,elements:w}){Object.assign(w.floating.style,{maxHeight:`${x-10}px`})}})],onOpenChange(x){x||e.suggestionMenus.closeMenu()},...l});return!p||!f||!(f!=null&&f.ignoreQueryLength)&&s&&(f.query.startsWith(" ")||f.query.length<s)?null:m.jsx("div",{ref:g,style:b,...v(),children:m.jsx(uY,{query:f.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:d,columns:o,gridSuggestionMenuComponent:r||cY,onItemClick:c})})}function fY(t){const e=Z(),n=ue(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i}=t,a=o==="loading-initial"||o==="loading"?m.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=y.useMemo(()=>{let c;const d=[];for(let u=0;u<r.length;u++){const h=r[u];h.group!==c&&(c=h.group,d.push(m.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),d.push(m.jsx(e.SuggestionMenu.Item,{className:je("bn-suggestion-menu-item",h.size==="small"?"bn-suggestion-menu-item-small":""),item:h,id:`bn-suggestion-menu-item-${u}`,isSelected:u===s,onClick:()=>i==null?void 0:i(h)},h.title))}return d},[e,r,i,s]);return m.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&m.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function pY(t,e){const[n,r]=y.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),t.length&&r((n+1)%t.length),!0;const s=mY(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!s?(o.preventDefault(),o.stopPropagation(),t.length&&(e==null||e(t[n])),!0):!1}}}function mY(t){return t.nativeEvent!==void 0}function gY(t,e,n,r,o){const{selectedIndex:s,setSelectedIndex:i,handler:a}=pY(n,r);return y.useEffect(()=>{var l;return(l=t.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var c;(c=t.domElement)==null||c.removeEventListener("keydown",a,!0)}},[t.domElement,n,s,r,o,a]),y.useEffect(()=>{i(0)},[e,i]),{selectedIndex:n.length===0?void 0:s}}function yY(t){const e=Xr().setContentEditableProps,n=te(),{getItems:r,suggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l}=t,c=y.useCallback(p=>{a(),i(),l==null||l(p)},[l,a,i]),{items:d,usedQuery:u,loadingState:h}=xN(s,r);wN(d,u,a);const{selectedIndex:f}=gY(n,s,d,c);return y.useEffect(()=>(e(p=>({...p,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(p=>({...p,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),y.useEffect(()=>(e(p=>({...p,"aria-activedescendant":f?"bn-suggestion-menu-item-"+f:void 0})),()=>{e(p=>({...p,"aria-activedescendant":void 0}))}),[e,f]),m.jsx(o,{items:d,onItemClick:c,loadingState:h,selectedIndex:f})}const bY={heading:rN,heading_2:oN,heading_3:sN,quote:dN,numbered_list:lN,bullet_list:cN,check_list:aN,paragraph:hv,table:nJ,image:uN,video:oJ,audio:hN,file:uv,emoji:mJ,code_block:KZ};function vY(t){return rG(t).map(e=>{const n=bY[e.key];return{...e,icon:m.jsx(n,{size:18})}})}function wY(t){const e=te(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:s,getItems:i,floatingOptions:a}=t,l=y.useMemo(()=>s||(v=>{v.onItemClick(e)}),[e,s]),c=y.useMemo(()=>i||(async v=>oG(vY(e),v)),[e,i]),d={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},u=y.useCallback(v=>e.suggestionMenus.onUpdate(n,v),[e.suggestionMenus,n]),h=Oo(u),{isMounted:f,ref:p,style:g,getFloatingProps:b}=Os((h==null?void 0:h.show)||!1,(h==null?void 0:h.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Wr(10),ar({mainAxis:!0,crossAxis:!1}),Pi(),Jf({apply({availableHeight:v,elements:x}){Object.assign(x.floating.style,{maxHeight:`${v-10}px`})}})],onOpenChange(v){v||e.suggestionMenus.closeMenu()},...a});return!f||!h||!(h!=null&&h.ignoreQueryLength)&&o&&(h.query.startsWith(" ")||h.query.length<o)?null:m.jsx("div",{ref:p,style:g,...b(),children:m.jsx(yY,{query:h.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:c,suggestionMenuComponent:r||fY,onItemClick:l})})}const xY=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},kY=t=>{const e=Z(),n=y.useRef(!1),[r,o]=y.useState(),s=y.useCallback(a=>{t.onMouseDown(),o({originalContent:t.block.content,originalCroppedContent:{rows:t.editor.tableHandles.cropEmptyRowsOrColumns(t.block,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[t]),i=y.useCallback(()=>{n.current||t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns(t.block,"columns",1):t.editor.tableHandles.addRowsOrColumns(t.block,"rows",1)}})},[t.block,t.orientation,t.editor]);return y.useEffect(()=>{const a=l=>{var c,d;if(!r)throw new Error("editingState is undefined");n.current=!0;const u=(t.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,h=t.orientation==="addOrRemoveColumns"?((c=r.originalCroppedContent.rows[0])==null?void 0:c.cells.length)??0:r.originalCroppedContent.rows.length,f=t.orientation==="addOrRemoveColumns"?((d=r.originalContent.rows[0])==null?void 0:d.cells.length)??0:r.originalContent.rows.length,p=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,g=f+xY(u/(t.orientation==="addOrRemoveColumns"?Z1:VW),.3);g>=h&&g>0&&g!==p&&(t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",g-h):t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",g-h)}}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,t.block,t.editor,t.orientation]),y.useEffect(()=>{const a=t.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,t.onMouseUp]),m.jsx(e.TableHandle.ExtendButton,{className:je("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:i,onMouseDown:s,children:t.children||m.jsx(lJ,{size:18,"data-test":"extendButton"})})},$S=t=>{const e=Z(),n=ue(),r=te().tableHandles;return r?m.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(t.index,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]}):null},CY=t=>{const e=Z(),n=ue(),r=te().tableHandles;return r?m.jsx(e.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(t.index,t.orientation)},children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},SY=t=>{const e=Z(),n=ue(),r=te(),o=r.tableHandles,s=y.useMemo(()=>!o||!t.block?[]:t.orientation==="row"?o.getCellsAtRowHandle(t.block,t.index):o.getCellsAtColumnHandle(t.block,t.index),[t.block,t.index,t.orientation,o]),i=(l,c)=>{const d=t.block.content.rows.map(u=>({...u,cells:u.cells.map(h=>Ss(h))}));s.forEach(({row:u,col:h})=>{c==="text"?d[u].cells[h].props.textColor=l:d[u].cells[h].props.backgroundColor=l}),r.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),r.setTextCursorPosition(t.block)};if(!s||!s[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=Ss(s[0].cell);return m.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(e.Generic.Menu.Trigger,{sub:!0,children:m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),m.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Lp,{iconSize:18,text:r.settings.tables.cellTextColor?{color:s.every(({cell:l})=>Ts(l)&&l.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:l=>{i(l,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:s.every(({cell:l})=>Ts(l)&&l.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:l=>i(l,"background")}:void 0})})]})},TY=t=>{const e=Z(),n=ue(),r=te();if(!r.tableHandles||t.index!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerRows;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},EY=t=>{const e=Z(),n=ue(),r=te();if(!r.tableHandles||t.index!==0||t.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerCols;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},MY=t=>{const e=Z();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(CY,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx($S,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),m.jsx($S,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"}),m.jsx(TY,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(EY,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(SY,{orientation:t.orientation,block:t.block,index:t.index})]})})},AY=t=>{const e=Z(),[n,r]=y.useState(!1),o=t.tableHandleMenu||MY,s=y.useMemo(()=>{const i=t.editor.tableHandles;return!i||!t.block||t.block.type!=="table"?!1:t.orientation==="column"?i.getCellsAtColumnHandle(t.block,t.index).every(({cell:a})=>Ii(a)===1):i.getCellsAtRowHandle(t.block,t.index).every(({cell:a})=>Gc(a)===1)},[t.block,t.editor.tableHandles,t.index,t.orientation]);return m.jsxs(e.Generic.Menu.Root,{onOpenChange:i=>{i?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.TableHandle.Root,{className:je("bn-table-handle",n?"bn-table-handle-dragging":"",s?"":"bn-table-handle-not-draggable"),draggable:s,onDragStart:i=>{r(!0),t.dragStart(i)},onDragEnd:()=>{t.dragEnd(),r(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||m.jsx(vN,{size:24,"data-test":"tableHandle"})})}),kt.createPortal(m.jsx(o,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function HS(t,e,n){const{refs:r,update:o,context:s,floatingStyles:i}=Qa({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[Jf({apply({rects:c,elements:d}){Object.assign(d.floating.style,t==="addOrRemoveColumns"?{height:`${c.reference.height}px`}:{width:`${c.reference.width}px`})}})]}),{isMounted:a,styles:l}=iv(s);return y.useEffect(()=>{o()},[n,o]),y.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[t,n,r]),y.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...i}}),[i,a,r.setFloating,l])}function RY(t,e,n){const r=HS("addOrRemoveRows",e,n),o=HS("addOrRemoveColumns",t,n);return y.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function _Y(t,e,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(e.x,n.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function IY(t,e,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function NY(t){return new DOMRect(t.x,t.y,t.width,0)}function Rg(t,e,n,r,o){const{refs:s,update:i,context:a,floatingStyles:l}=Qa({open:e,placement:t==="row"?"left":t==="col"?"top":"bottom-end",middleware:[Wr(t==="row"?-10:t==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:c,styles:d}=iv(a);return y.useEffect(()=>{i()},[n,r,i]),y.useEffect(()=>{n===null||r===null||o&&t==="cell"||s.setReference({getBoundingClientRect:()=>(t==="row"?_Y:t==="col"?IY:NY)(n,r,o)})},[o,t,n,r,s]),y.useMemo(()=>({isMounted:c,ref:s.setFloating,style:{display:"flex",...d,...l}}),[l,c,s.setFloating,d])}function DY(t,e,n,r){const o=Rg("row",t,e,n,r),s=Rg("col",t,e,n,r),i=Rg("cell",t,e,n,r);return y.useMemo(()=>({rowHandle:o,colHandle:s,cellHandle:i}),[s,o,i])}const PY=t=>{var e,n;const r=Z(),o=ue(),s=te(),i=(l,c)=>{const d=t.block.content.rows.map(u=>({...u,cells:u.cells.map(h=>Ss(h))}));c==="text"?d[t.rowIndex].cells[t.colIndex].props.textColor=l:d[t.rowIndex].cells[t.colIndex].props.backgroundColor=l,s.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),s.setTextCursorPosition(t.block)},a=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!a||s.settings.tables.cellTextColor===!1&&s.settings.tables.cellBackgroundColor===!1?null:m.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(r.Generic.Menu.Trigger,{sub:!0,children:m.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||o.drag_handle.colors_menuitem})}),m.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Lp,{iconSize:18,text:s.settings.tables.cellTextColor?{color:Ts(a)?a.props.textColor:"default",setColor:l=>i(l,"text")}:void 0,background:s.settings.tables.cellBackgroundColor?{color:Ts(a)?a.props.backgroundColor:"default",setColor:l=>i(l,"background")}:void 0})})]})},OY=t=>{var e,n;const r=Z(),o=ue(),s=te(),i=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!i||!Ts(i)||Gc(i)===1&&Ii(i)===1||!s.settings.tables.splitCells?null:m.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=s.tableHandles)==null||a.splitCell({row:t.rowIndex,col:t.colIndex})},children:o.table_handle.split_cell_menuitem})},LY=t=>{const e=Z();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(OY,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),m.jsx(PY,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex})]})})},jY=t=>{const e=Z(),n=t.tableCellMenu||LY;return!t.editor.settings.tables.splitCells&&!t.editor.settings.tables.cellBackgroundColor&&!t.editor.settings.tables.cellTextColor?null:m.jsxs(e.Generic.Menu.Root,{onOpenChange:r=>{r?t.freezeHandles():(t.unfreezeHandles(),t.editor.focus())},position:"right",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||m.jsx(QJ,{size:12,"data-test":"tableCellHandle"})})}),kt.createPortal(m.jsx(n,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),t.menuContainer)]})},BY=t=>{var e,n;const r=te(),[o,s]=y.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const i={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=i,c=y.useCallback(()=>{a(),C(!0),w(!0)},[a]),d=y.useCallback(()=>{l(),C(!1),w(!1)},[l]),u=Oo(r.tableHandles.onUpdate.bind(r.tableHandles)),h=y.useMemo(()=>{var M,R;return u!=null&&u.draggingState?{draggedCellOrientation:(M=u==null?void 0:u.draggingState)==null?void 0:M.draggedCellOrientation,mousePos:(R=u==null?void 0:u.draggingState)==null?void 0:R.mousePos}:void 0},[u==null?void 0:u.draggingState,(e=u==null?void 0:u.draggingState)==null?void 0:e.draggedCellOrientation,(n=u==null?void 0:u.draggingState)==null?void 0:n.mousePos]),{rowHandle:f,colHandle:p,cellHandle:g}=DY((u==null?void 0:u.show)||!1,(u==null?void 0:u.referencePosCell)||null,(u==null?void 0:u.referencePosTable)||null,h),{addOrRemoveColumnsButton:b,addOrRemoveRowsButton:v}=RY((u==null?void 0:u.showAddOrRemoveColumnsButton)||!1,(u==null?void 0:u.showAddOrRemoveRowsButton)||!1,(u==null?void 0:u.referencePosTable)||null),[x,w]=y.useState(!1),[k,C]=y.useState(!1);if(!u)return null;const S=t.tableHandle||AY,T=t.extendButton||kY,E=t.tableCellHandle||jY;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:s}),m.jsxs(eZ,{root:u.widgetContainer,children:[!x&&o&&f.isMounted&&u.rowIndex!==void 0&&m.jsx("div",{ref:f.ref,style:f.style,children:m.jsx(S,{editor:r,orientation:"row",showOtherSide:()=>C(!1),hideOtherSide:()=>C(!0),index:u.rowIndex,block:u.block,dragStart:i.rowDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),!k&&o&&p.isMounted&&u.colIndex!==void 0&&m.jsx("div",{ref:p.ref,style:p.style,children:m.jsx(S,{editor:r,orientation:"column",showOtherSide:()=>w(!1),hideOtherSide:()=>w(!0),index:u.colIndex,block:u.block,dragStart:i.colDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),o&&g.isMounted&&u.colIndex!==void 0&&u.rowIndex!==void 0&&m.jsx("div",{ref:g.ref,style:g.style,children:m.jsx(E,{editor:r,block:u.block,rowIndex:u.rowIndex,colIndex:u.colIndex,menuContainer:o,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles})}),m.jsx("div",{ref:v.ref,style:v.style,children:m.jsx(T,{editor:r,orientation:"addOrRemoveRows",block:u.block,onMouseDown:c,onMouseUp:d})}),m.jsx("div",{ref:b.ref,style:b.style,children:m.jsx(T,{editor:r,orientation:"addOrRemoveColumns",block:u.block,onMouseDown:c,onMouseUp:d})})]})]})};function VY(t){const e=te();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return m.jsxs(m.Fragment,{children:[t.formattingToolbar!==!1&&m.jsx(bN,{}),t.linkToolbar!==!1&&m.jsx(JJ,{}),t.slashMenu!==!1&&m.jsx(wY,{triggerCharacter:"/"}),t.emojiPicker!==!1&&m.jsx(hY,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&m.jsx(aY,{}),e.filePanel&&t.filePanel!==!1&&m.jsx(EJ,{}),e.tableHandles&&t.tableHandles!==!1&&m.jsx(BY,{}),e.comments&&t.comments!==!1&&m.jsxs(m.Fragment,{children:[m.jsx(NZ,{}),m.jsx(CJ,{})]})]})}const kN=()=>{const t=y.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)")},[]),e=y.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: light)")},[]),n=t==null?void 0:t.matches,r=e==null?void 0:e.matches,[o,s]=y.useState(n?"dark":r?"light":"no-preference");return y.useEffect(()=>{s(n?"dark":r?"light":"no-preference")},[n,r]),y.useEffect(()=>{if(typeof(t==null?void 0:t.addEventListener)=="function"){const i=({matches:l})=>l&&s("dark"),a=({matches:l})=>l&&s("light");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",a),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",a)}}else{const i=()=>s(t.matches?"dark":e.matches?"light":"no-preference");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",i),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",i)}}},[t,e]),o},CN=y.createContext(void 0);function $Y(){return y.useContext(CN)}function HY(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:kt.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}const FY=({contentComponent:t})=>{const e=y.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(e)})},zY=y.forwardRef((t,e)=>{const[n,r]=y.useState();return y.useImperativeHandle(e,()=>(o,s)=>{kt.flushSync(()=>{r({node:o,container:s})}),r(void 0)},[]),m.jsx(m.Fragment,{children:n&&kt.createPortal(n.node,n.container)})}),FS=()=>{};function UY(t,e){const{editor:n,className:r,theme:o,children:s,editable:i,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:d,slashMenu:u,emojiPicker:h,sideMenu:f,filePanel:p,tableHandles:g,comments:b,autoFocus:v,renderEditor:x=!n.headless,...w}=t,[k,C]=y.useState(),S=Xr(),T=kN(),E=(S==null?void 0:S.colorSchemePreference)||T,M=o||(E==="dark"?"dark":"light");lv(l||FS,n),av(a||FS,n),y.useEffect(()=>{n.isEditable=i!==!1},[i,n]);const R=y.useCallback(F=>{n.elementRenderer=F},[n]),I=y.useMemo(()=>({...S,editor:n,setContentEditableProps:C}),[S,n]),L={formattingToolbar:c,linkToolbar:d,slashMenu:u,emojiPicker:h,sideMenu:f,filePanel:p,tableHandles:g,comments:b},$={autoFocus:v,contentEditableProps:k};return m.jsx(XI.Provider,{value:I,children:m.jsxs(CN.Provider,{value:{editorProps:$,defaultUIProps:L},children:[m.jsx(zY,{ref:R}),m.jsx(WY,{className:r,renderEditor:x,editorColorScheme:M,ref:e,...w,children:s})]})})}const WY=N.forwardRef(({className:t,renderEditor:e,editorColorScheme:n,children:r,...o},s)=>m.jsx("div",{className:je("bn-container",n,t),"data-color-scheme":n,...o,ref:s,children:e?m.jsx(qY,{children:r}):r})),GY=N.forwardRef(UY),qY=t=>{const e=$Y(),n=te(),r=y.useMemo(()=>HY(),[]),o=y.useCallback(s=>{n.mount(s,r)},[n,r]);return m.jsxs(m.Fragment,{children:[m.jsx(FY,{contentComponent:r}),m.jsx(KY,{...e.editorProps,...t,mount:o}),m.jsx(VY,{...e.defaultUIProps}),t.children]})},KY=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return m.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})};function zS(t,e){let n;const r=document.createElement("div");let o;if(e!=null&&e.elementRenderer)e.elementRenderer(t(l=>n=l||void 0),r);else{if(!(e!=null&&e.headless))throw new Error("elementRenderer not available, expected headless editor");o=EZ.createRoot(r),kt.flushSync(()=>{o.render(t(l=>n=l||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n==null||n.setAttribute("data-tmp-find","true");const s=r.cloneNode(!0),i=s.firstElementChild,a=s.querySelector("[data-tmp-find]");return a==null||a.removeAttribute("data-tmp-find"),o==null||o.unmount(),{dom:i,contentDOM:a||void 0}}function _g(t){var e;return m.jsx(vZ,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([n])=>n!=="class")),className:je("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([n,r])=>{const o=t.propSchema[n];return!B1.includes(n)&&r!==o.default}).map(([n,r])=>[kf(n),r])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function jp(t,e){const n=qn({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return Ad(t.propSchema)},parseHTML(){return D_(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Fl({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return r=>{const o=SZ(s=>{var i;const a=this.options.editor,l=__(s.getPos,a,this.editor,t.type),c=((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},d=YI().nodeViewContentRef;if(!d)throw new Error("nodeViewContentRef is not set");const u=e.render;return m.jsx(_g,{blockType:l.type,blockProps:l.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:c,children:m.jsx(u,{block:l,editor:a,contentRef:h=>{d(h),h&&(h.className=je("bn-inline-content",h.className))}})})},{className:"bn-react-node-view-renderer"})(r);return t.isSelectable===!1&&N_(o,this.editor),o}}});return V1(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render;return zS(l=>m.jsx(_g,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:i,children:m.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=je("bn-inline-content",c.className))}})}),o)},toExternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.toExternalHTML||e.render;return zS(l=>m.jsx(_g,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:i,children:m.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=je("bn-inline-content",c.className))}})}),o)}})}function mv(t){const e=te(),[n,r]=y.useState("loading"),[o,s]=y.useState();if(y.useEffect(()=>{let i=!0;return(async()=>{let a="";r("loading");try{a=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{r("error");return}i&&(r("loaded"),s(a))})(),()=>{i=!1}},[e,t]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const gv=t=>m.jsxs("figure",{children:[t.children,m.jsx("figcaption",{children:t.caption})]});function ZY(t){const e=te();y.useEffect(()=>e.onUploadEnd(t),[t,e])}function JY(t){const e=te();y.useEffect(()=>e.onUploadStart(t),[t,e])}function SN(t){const[e,n]=y.useState(!1);return JY(r=>{r===t&&n(!0)}),ZY(r=>{r===t&&n(!1)}),e}const YY=t=>{const e=ue(),n=y.useCallback(o=>{o.preventDefault()},[]),r=y.useCallback(()=>{t.editor.transact(o=>o.setMeta(t.editor.filePanel.plugins[0],{block:t.block}))},[t.block,t.editor]);return m.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[m.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||m.jsx(uv,{size:24})}),m.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},XY=t=>m.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[m.jsx("div",{className:"bn-file-icon",children:m.jsx(uv,{size:24})}),m.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),yv=t=>{const e=SN(t.block.id);return m.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?m.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?m.jsx(YY,{...t}):m.jsxs(m.Fragment,{children:[t.block.props.showPreview===!1||!t.children?m.jsx(XY,{...t}):t.children,t.block.props.caption&&m.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},Bp=t=>m.jsxs("div",{children:[t.children,m.jsx("p",{children:t.caption})]}),QY=t=>{const e=mv(t.block.props.url);return m.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},eX=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?m.jsx("audio",{src:t.block.props.url}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(gv,{caption:t.block.props.caption,children:e}):m.jsx(Bp,{caption:t.block.props.caption,children:e}):e},tX=t=>m.jsx(yv,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:m.jsx(hN,{size:24}),children:m.jsx(QY,{...t})});jp(K_,{render:tX,parse:Z_,toExternalHTML:eX});const nX=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add file"});const e=m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?m.jsx(Bp,{caption:t.block.props.caption,children:e}):e},rX=t=>m.jsx(yv,{...t});jp(J_,{render:rX,parse:Y_,toExternalHTML:nX});const TN=t=>{const[e,n]=y.useState(void 0),[r,o]=y.useState(t.block.props.previewWidth),[s,i]=y.useState(!1),a=y.useRef(null);y.useEffect(()=>{const f=g=>{var b,v;let x;t.block.props.textAlignment==="center"?e.handleUsed==="left"?x=e.initialWidth+(e.initialClientX-g.clientX)*2:x=e.initialWidth+(g.clientX-e.initialClientX)*2:e.handleUsed==="left"?x=e.initialWidth+e.initialClientX-g.clientX:x=e.initialWidth+g.clientX-e.initialClientX,o(Math.min(Math.max(x,64),((v=(b=t.editor.domElement)==null?void 0:b.firstElementChild)==null?void 0:v.clientWidth)||Number.MAX_VALUE))},p=()=>{n(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:r}})};return e&&(window.addEventListener("mousemove",f),window.addEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p)}},[t,e,r]);const l=y.useCallback(()=>{t.editor.isEditable&&i(!0)},[t.editor.isEditable]),c=y.useCallback(()=>{i(!1)},[]),d=y.useCallback(f=>{f.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:f.clientX})},[]),u=y.useCallback(f=>{f.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:f.clientX})},[]),h=SN(t.block.id);return m.jsx(yv,{...t,onMouseEnter:l,onMouseLeave:c,style:t.block.props.url&&!h&&t.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:m.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[t.children,(s||e)&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:d}),m.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:u})]})]})})},oX=t=>{const e=mv(t.block.props.url);return m.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},sX=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?m.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(gv,{caption:t.block.props.caption,children:e}):m.jsx(Bp,{caption:t.block.props.caption,children:e}):e},iX=t=>m.jsx(TN,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:m.jsx(uN,{size:24}),children:m.jsx(oX,{...t})});jp(eI,{render:iX,parse:tI,toExternalHTML:sX});const aX=t=>{const e=mv(t.block.props.url);return m.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},lX=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?m.jsx("video",{src:t.block.props.url}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(gv,{caption:t.block.props.caption,children:e}):m.jsx(Bp,{caption:t.block.props.caption,children:e}):e},cX=t=>m.jsx(TN,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:m.jsx(aJ,{size:24}),children:m.jsx(aX,{...t})});jp(sI,{render:cX,parse:iI,toExternalHTML:lX});N.memo(({thread:t,selectedThreadId:e,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const s=y.useCallback(a=>{var l;a.target.closest(".bn-action-toolbar")||(l=n.comments)==null||l.selectThread(t.id)},[n.comments,t.id]),i=y.useCallback(a=>{var l;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const c=a.target instanceof Node?a.target:null,d=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!c||!d||!d.contains(c))&&((l=n.comments)==null||l.selectThread(void 0))},[n.comments]);return m.jsx(fN,{thread:t,selected:t.id===e,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:s,onBlur:i,tabIndex:0})});function EN(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top<r.top,s=n.bottom>r.bottom;return o&&s?"both":o?"top":s?"bottom":"none"}function Dr(t){return Object.keys(t)}function Ig(t){return t&&typeof t=="object"&&!Array.isArray(t)}function bv(t,e){const n={...t},r=e;return Ig(t)&&Ig(e)&&Object.keys(e).forEach(o=>{Ig(r[o])&&o in t?n[o]=bv(n[o],r[o]):n[o]=r[o]}),n}function dX(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function uX(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function hX(t){const e=uX(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function Ng(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function MN(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?Ng(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(t))return e?Ng(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const s=`${Number(o)/16}${t}`;return e?Ng(s):s}}return r}return n}const D=MN("rem",{shouldScale:!0}),US=MN("em");function Vp(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function AN(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function Od(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==y.Fragment:!1}function $p(t){const e=y.createContext(null);return[({children:o,value:s})=>m.jsx(e.Provider,{value:s,children:o}),()=>{const o=y.useContext(e);if(o===null)throw new Error(t);return o}]}function vv(t=null){const e=y.createContext(t);return[({children:o,value:s})=>m.jsx(e.Provider,{value:s,children:o}),()=>y.useContext(e)]}function WS(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function Mf(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function fX(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function pX(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function mX(t,e,n){return Mf(t,n)===Mf(e,n)}function RN({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:s="rtl",orientation:i}){return a=>{var p;n==null||n(a);const l=Array.from(((p=Mf(a.currentTarget,t))==null?void 0:p.querySelectorAll(e))||[]).filter(g=>mX(a.currentTarget,g,t)),c=l.findIndex(g=>a.currentTarget===g),d=pX(c,l,r),u=fX(c,l,r),h=s==="rtl"?u:d,f=s==="rtl"?d:u;switch(a.key){case"ArrowRight":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),o&&l[h].click());break}case"ArrowLeft":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"ArrowUp":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[u].focus(),o&&l[u].click());break}case"ArrowDown":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),o&&l[d].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const g=l.length-1;!l[g].disabled&&l[g].focus();break}}}}const gX={app:100,modal:200,popover:300,overlay:400,max:9999};function Ld(t){return gX[t]}const yX=()=>{};function bX(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||yX:n=>{var r;n.key==="Escape"&&(t(n),(r=e.onTrigger)==null||r.call(e))}}function Le(t,e="size",n=!0){if(t!==void 0)return AN(t)?n?D(t):t:`var(--${e}-${t})`}function jd(t){return Le(t,"mantine-spacing")}function $t(t){return t===void 0?"var(--mantine-radius-default)":Le(t,"mantine-radius")}function un(t){return Le(t,"mantine-font-size")}function vX(t){return Le(t,"mantine-line-height",!1)}function _N(t){if(t)return Le(t,"mantine-shadow",!1)}function _r(t,e){return n=>{t==null||t(n),e==null||e(n)}}function wX(t,e,n){var r;return n?Array.from(((r=Mf(n,e))==null?void 0:r.querySelectorAll(t))||[]).findIndex(o=>o===n):null}function xX(){const[t,e]=y.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function kX(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const GS=["mousedown","touchstart"];function CX(t,e,n){const r=y.useRef(null);return y.useEffect(()=>{const o=s=>{const{target:i}=s??{};if(Array.isArray(n)){const a=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";n.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&t()}else r.current&&!r.current.contains(i)&&t()};return(e||GS).forEach(s=>document.addEventListener(s,o)),()=>{(e||GS).forEach(s=>document.removeEventListener(s,o))}},[r,t,n]),r}function SX(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function TX(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function EX(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=y.useState(n?e:TX(t)),s=y.useRef(null);return y.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(t),o(s.current.matches),SX(s.current,i=>o(i.matches))},[t]),r}const Hp=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Ms(t,e){const n=y.useRef(!1);y.useEffect(()=>()=>{n.current=!1},[]),y.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function MX({opened:t,shouldReturnFocus:e=!0}){const n=y.useRef(null),r=()=>{var o;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((o=n.current)==null||o.focus({preventScroll:!0}))};return Ms(()=>{let o=-1;const s=i=>{i.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",s),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",s)}},[t,e]),r}const AX=/input|select|textarea|button|object/,IN="a, input, select, textarea, button, object, [tabindex]";function RX(t){return t.style.display==="none"}function _X(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(RX(n))return!1;n=n.parentNode}return!0}function NN(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function Bb(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(NN(t));return(AX.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&_X(t)}function DN(t){const e=NN(t);return(Number.isNaN(e)||e>=0)&&Bb(t)}function IX(t){return Array.from(t.querySelectorAll(IN)).filter(DN)}function NX(t,e){const n=IX(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let s=r===o.activeElement||t===o.activeElement;const i=o.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(s=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===i.getAttribute("name")).includes(r)),!s)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function PN(t=!0){const e=y.useRef(null),n=o=>{let s=o.querySelector("[data-autofocus]");if(!s){const i=Array.from(o.querySelectorAll(IN));s=i.find(DN)||i.find(Bb)||null,!s&&Bb(o)&&(s=o)}s&&s.focus({preventScroll:!0})},r=y.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return y.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=s=>{s.key==="Tab"&&e.current&&NX(e.current,s)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const DX=N.useId||(()=>{});function PX(){const t=DX();return t?`mantine-${t.replace(/:/g,"")}`:""}function Bd(t){const e=PX(),[n,r]=y.useState(e);return Hp(()=>{r(kX())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function Af(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function Vd(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=Af(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o?o():Af(r,null)}),e.clear()}}}function Lo(...t){return y.useCallback(Vd(...t),t)}function el({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,s]=y.useState(e!==void 0?e:n),i=(a,...l)=>{s(a),r==null||r(a,...l)};return t!==void 0?[t,r,!0]:[o,i,!1]}function OX(t,e){return EX("(prefers-reduced-motion: reduce)",t,e)}function LX(){const[t,e]=y.useState(!1),n=y.useRef(null),r=y.useCallback(()=>e(!0),[]),o=y.useCallback(()=>e(!1),[]);return y.useEffect(()=>{const s=n.current;if(s)return s.addEventListener("mouseenter",r),s.addEventListener("mouseleave",o),()=>{s==null||s.removeEventListener("mouseenter",r),s==null||s.removeEventListener("mouseleave",o)}},[n.current]),{ref:n,hovered:t}}function jX(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function ON({onBlur:t,onFocus:e}={}){const n=y.useRef(null),[r,o]=y.useState(!1),s=y.useRef(!1),i=c=>{o(c),s.current=c},a=c=>{s.current||(i(!0),e==null||e(c))},l=c=>{s.current&&!jX(c)&&(i(!1),t==null||t(c))};return y.useEffect(()=>{const c=n.current;if(c)return c.addEventListener("focusin",a),c.addEventListener("focusout",l),()=>{c==null||c.removeEventListener("focusin",a),c==null||c.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function wv(t){var n;const e=N.version;return typeof N.version!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(n=t==null?void 0:t.props)==null?void 0:n.ref}function LN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=LN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function jo(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=LN(t))&&(r&&(r+=" "),r+=e);return r}const BX={};function VX(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=jo(e[r],o):e[r]=o})}),e}function Fp({theme:t,classNames:e,props:n,stylesCtx:r}){const s=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(t,n,r):i||BX);return VX(s)}function Rf({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((s,i)=>typeof i=="function"?{...s,...i(t,n,r)}:{...s,...i},{})}const jN=y.createContext(null);function js(){const t=y.useContext(jN);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function $X(){return js().cssVariablesResolver}function HX(){return js().classNamesPrefix}function xv(){return js().getStyleNonce}function FX(){return js().withStaticClasses}function zX(){return js().headless}function UX(){var t;return(t=js().stylesTransform)==null?void 0:t.sx}function WX(){var t;return(t=js().stylesTransform)==null?void 0:t.styles}function BN(){return js().env||"default"}function GX(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function qX(t){let e=t.replace("#","");if(e.length===3){const i=e.split("");e=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(e.length===8){const i=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:i}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,s=n&255;return{r,g:o,b:s,a:1}}function KX(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o||1}}function ZX(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,i=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),d=s-a/2;let u,h,f;return l>=0&&l<1?(u=a,h=c,f=0):l>=1&&l<2?(u=c,h=a,f=0):l>=2&&l<3?(u=0,h=a,f=c):l>=3&&l<4?(u=0,h=c,f=a):l>=4&&l<5?(u=c,h=0,f=a):(u=a,h=0,f=c),{r:Math.round((u+d)*255),g:Math.round((h+d)*255),b:Math.round((f+d)*255),a:i||1}}function kv(t){return GX(t)?qX(t):t.startsWith("rgb")?KX(t):t.startsWith("hsl")?ZX(t):{r:0,g:0,b:0,a:1}}function Iu(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a:s}=kv(t),i=1-e,a=l=>Math.round(l*i);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${s})`}function Zc(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function Dg(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function JX(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function YX(t){if(t.startsWith("oklch("))return(JX(t)||0)/100;const{r:e,g:n,b:r}=kv(t),o=e/255,s=n/255,i=r/255,a=Dg(o),l=Dg(s),c=Dg(i);return .2126*a+.7152*l+.0722*c}function Ml(t,e=.179){return t.startsWith("var(")?!1:YX(t)>e}function tl({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Ml(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Ml(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Ml(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),s=o?Number(o):void 0,i=r in e.colors;if(i){const a=s!==void 0?e.colors[r][s]:e.colors[r][Zc(e,n||"light")];return{color:r,value:a,shade:s,isThemeColor:i,isLight:Ml(a,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:i,isLight:Ml(t,e.luminanceThreshold),shade:s,variable:void 0}}function Fr(t,e){const n=tl({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function Vb(t,e){const n={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)??e.defaultGradient.deg??0},r=Fr(n.from,e),o=Fr(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function Mr(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const s=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${s}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=kv(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const Ji=Mr,XX=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const s=tl({color:t,theme:e}),i=typeof o=="boolean"?o:e.autoContrast;if(n==="filled"){const a=i&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${D(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${D(1)} solid transparent`}:{background:t,hover:Iu(t,.1),color:a,border:`${D(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${D(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:Mr(a,.1),hover:Mr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${D(1)} solid transparent`}}return{background:Mr(t,.1),hover:Mr(t,.12),color:t,border:`${D(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${D(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Mr(e.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${D(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Mr(t,.05),color:t,border:`${D(1)} solid ${t}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${D(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:"transparent",hover:Mr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${D(1)} solid transparent`}}return{background:"transparent",hover:Mr(t,.12),color:t,border:`${D(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${D(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${D(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${D(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:Iu(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${D(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Iu(e.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${D(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Iu(e.white,.01),color:t,border:`${D(1)} solid transparent`}:n==="gradient"?{background:Vb(r,e),hover:Vb(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${D(1)} solid var(--mantine-color-default-border)`}:{}},QX={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},qS="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Cv={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:QX,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:XX,autoContrast:!1,luminanceThreshold:.3,fontFamily:qS,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:qS,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:D(34),lineHeight:"1.3"},h2:{fontSize:D(26),lineHeight:"1.35"},h3:{fontSize:D(22),lineHeight:"1.4"},h4:{fontSize:D(18),lineHeight:"1.45"},h5:{fontSize:D(16),lineHeight:"1.5"},h6:{fontSize:D(14),lineHeight:"1.5"}}},fontSizes:{xs:D(12),sm:D(14),md:D(16),lg:D(18),xl:D(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:D(2),sm:D(4),md:D(8),lg:D(16),xl:D(32)},spacing:{xs:D(10),sm:D(12),md:D(16),lg:D(20),xl:D(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), 0 ${D(1)} ${D(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${D(10)} ${D(15)} ${D(-5)}, rgba(0, 0, 0, 0.04) 0 ${D(7)} ${D(7)} ${D(-5)}`,md:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${D(20)} ${D(25)} ${D(-5)}, rgba(0, 0, 0, 0.04) 0 ${D(10)} ${D(10)} ${D(-5)}`,lg:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${D(28)} ${D(23)} ${D(-7)}, rgba(0, 0, 0, 0.04) 0 ${D(12)} ${D(12)} ${D(-7)}`,xl:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${D(36)} ${D(28)} ${D(-7)}, rgba(0, 0, 0, 0.04) 0 ${D(17)} ${D(17)} ${D(-7)}`},other:{},components:{}};function KS(t){return t==="auto"||t==="dark"||t==="light"}function eQ({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return KS(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&KS(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const tQ="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more â€“ https://mantine.dev/theming/colors/#primary-color",ZS="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Pg(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function JS(t){if(!(t.primaryColor in t.colors))throw new Error(tQ);if(typeof t.primaryShade=="object"&&(!Pg(t.primaryShade.dark)||!Pg(t.primaryShade.light)))throw new Error(ZS);if(typeof t.primaryShade=="number"&&!Pg(t.primaryShade))throw new Error(ZS)}function nQ(t,e){var r;if(!e)return JS(t),t;const n=bv(t,e);return e.fontFamily&&!((r=e.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=e.fontFamily),JS(n),n}const Sv=y.createContext(null),rQ=()=>y.useContext(Sv)||Cv;function En(){const t=y.useContext(Sv);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function VN({theme:t,children:e,inherit:n=!0}){const r=rQ(),o=y.useMemo(()=>nQ(n?r:Cv,t),[t,r,n]);return m.jsx(Sv.Provider,{value:o,children:e})}VN.displayName="@mantine/core/MantineThemeProvider";function oQ(){const t=En(),e=xv(),n=Dr(t.breakpoints).reduce((r,o)=>{const s=t.breakpoints[o].includes("px"),i=hX(t.breakpoints[o]),a=s?`${i-.1}px`:US(i-.1),l=s?`${i}px`:US(i);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return m.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:n}})}function Og(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Al(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function sQ(t,e){const n=Og(t.variables),r=n?Al(e,n):"",o=Og(t.dark),s=Og(t.light),i=o?Al(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",a=s?Al(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,s):"";return`${r}${i}${a}`}function $N({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&tl({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function YS(t,e){return $N({color:t.colors[t.primaryColor][Zc(t,e)],theme:t,autoContrast:null})}function Nu({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const a=Zc(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Ji(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:Ji(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Ji(t.colors[e][a],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const s=Zc(t,"dark"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Ji(t.colors[e][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Ji(t.colors[e][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Ji(t.colors[e][Math.max(s-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...i}:i}function iQ(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function Yi(t,e,n){Dr(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const HN=t=>{const e=Zc(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:D(t.defaultRadius),r={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":YS(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":YS(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Yi(r.variables,t.breakpoints,"breakpoint"),Yi(r.variables,t.spacing,"spacing"),Yi(r.variables,t.fontSizes,"font-size"),Yi(r.variables,t.lineHeights,"line-height"),Yi(r.variables,t.shadows,"shadow"),Yi(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((s,i)=>{r.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${t.primaryColor}-${i})`}),Dr(t.colors).forEach(s=>{const i=t.colors[s];if(iQ(i)){Object.assign(r.light,Nu({theme:t,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Nu({theme:t,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,Nu({theme:t,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Nu({theme:t,color:s,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return Dr(o).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=o[s].fontSize,r.variables[`--mantine-${s}-line-height`]=o[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=o[s].fontWeight||t.headings.fontWeight}),r};function aQ({theme:t,generator:e}){const n=HN(t),r=e==null?void 0:e(t);return r?bv(n,r):n}const Lg=HN(Cv);function lQ(t){const e={variables:{},light:{},dark:{}};return Dr(t.variables).forEach(n=>{Lg.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Dr(t.light).forEach(n=>{Lg.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Dr(t.dark).forEach(n=>{Lg.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function cQ(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function FN({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=En(),r=xv(),o=$X(),s=aQ({theme:n,generator:o}),i=t===":root"&&e,a=i?lQ(s):s,l=sQ(a,t);return l?m.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${i?"":cQ(t)}`}}):null}FN.displayName="@mantine/CssVariables";function dQ(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function Xi(t,e){var o,s;const n=typeof window<"u"&&"matchMedia"in window&&((o=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:o.matches),r=t!=="auto"?t:n?"dark":"light";(s=e())==null||s.setAttribute("data-mantine-color-scheme",r)}function uQ({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=y.useRef(null),[s,i]=y.useState(()=>t.get(e)),a=r||s,l=y.useCallback(d=>{r||(Xi(d,n),i(d),t.set(d))},[t.set,a,r]),c=y.useCallback(()=>{i(e),Xi(e,n),t.clear()},[t.clear,e]);return y.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),Hp(()=>{Xi(t.get(e),n)},[]),y.useEffect(()=>{var u;if(r)return Xi(r,n),()=>{};r===void 0&&Xi(s,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=h=>{s==="auto"&&Xi(h.matches?"dark":"light",n)};return(u=o.current)==null||u.addEventListener("change",d),()=>{var h;return(h=o.current)==null?void 0:h.removeEventListener("change",d)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function hQ({respectReducedMotion:t,getRootElement:e}){Hp(()=>{var n;t&&((n=e())==null||n.setAttribute("data-respect-reduced-motion","true"))},[t])}dQ();function zN({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:s=!0,withCssVariables:i=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=eQ(),defaultColorScheme:d="light",getRootElement:u=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:f,stylesTransform:p,env:g}){const{colorScheme:b,setColorScheme:v,clearColorScheme:x}=uQ({defaultColorScheme:d,forceColorScheme:f,manager:c,getRootElement:u});return hQ({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:u}),m.jsx(jN.Provider,{value:{colorScheme:b,setColorScheme:v,clearColorScheme:x,getRootElement:u,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:h,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p,env:g},children:m.jsxs(VN,{theme:t,children:[i&&m.jsx(FN,{cssVariablesSelector:a,deduplicateCssVariables:s}),o&&m.jsx(oQ,{}),e]})})}zN.displayName="@mantine/core/MantineProvider";function zp({classNames:t,styles:e,props:n,stylesCtx:r}){const o=En();return{resolvedClassNames:Fp({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:Rf({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const fQ={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function pQ({theme:t,options:e,unstyled:n}){return jo((e==null?void 0:e.focusable)&&!n&&(t.focusClassName||fQ[t.focusRing]),(e==null?void 0:e.active)&&!n&&t.activeClassName)}function mQ({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return Fp({theme:o,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:e})[t]}function XS({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return Fp({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function gQ({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function yQ({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function bQ({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function vQ({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(s=>{var i,a;return(a=Fp({theme:e,classNames:(i=e.components[s])==null?void 0:i.classNames,props:r,stylesCtx:o}))==null?void 0:a[n]})}function wQ({options:t,classes:e,selector:n,unstyled:r}){return t!=null&&t.variant&&!r?e[`${n}--${t.variant}`]:void 0}function xQ({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:s,classes:i,unstyled:a,className:l,rootSelector:c,props:d,stylesCtx:u,withStaticClasses:h,headless:f,transformedStyles:p}){return jo(pQ({theme:t,options:e,unstyled:a||f}),vQ({theme:t,themeName:n,selector:r,props:d,stylesCtx:u}),wQ({options:e,classes:i,selector:r,unstyled:a}),XS({selector:r,stylesCtx:u,theme:t,classNames:s,props:d}),XS({selector:r,stylesCtx:u,theme:t,classNames:p,props:d}),mQ({selector:r,stylesCtx:u,options:e,props:d,theme:t}),gQ({rootSelector:c,selector:r,className:l}),yQ({selector:r,classes:i,unstyled:a||f}),h&&!f&&bQ({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function kQ({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(s=>{var i;return Rf({theme:t,styles:(i=t.components[s])==null?void 0:i.styles,props:n,stylesCtx:r})[o]}).reduce((s,i)=>({...s,...i}),{})}function $b({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...$b({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function CQ(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...Vp(n[r])}}),e),{})}function SQ({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:s,themeName:i,headless:a}){var l;return(l=CQ([a?{}:e==null?void 0:e(n,r,o),...i.map(c=>{var d,u,h;return(h=(u=(d=n.components)==null?void 0:d[c])==null?void 0:u.vars)==null?void 0:h.call(u,n,r,o)}),t==null?void 0:t(n,r,o)]))==null?void 0:l[s]}function TQ({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:s,rootSelector:i,styles:a,style:l,vars:c,varsResolver:d,headless:u,withStylesTransform:h}){return{...!h&&kQ({theme:t,themeName:e,props:o,stylesCtx:s,selector:n}),...!h&&Rf({theme:t,styles:a,props:o,stylesCtx:s})[n],...!h&&Rf({theme:t,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||o,stylesCtx:s})[n],...SQ({theme:t,props:o,stylesCtx:s,vars:c,varsResolver:d,selector:n,themeName:e,headless:u}),...i===n?$b({style:l,theme:t}):null,...$b({style:r==null?void 0:r.style,theme:t})}}function EQ({props:t,stylesCtx:e,themeName:n}){var i;const r=En(),o=(i=WX())==null?void 0:i();return{getTransformedStyles:a=>o?[...a.map(c=>o(c,{props:t,theme:r,ctx:e})),...n.map(c=>{var d;return o((d=r.components[c])==null?void 0:d.styles,{props:t,theme:r,ctx:e})})].filter(Boolean):[],withStylesTransform:!!o}}function ke({name:t,classes:e,props:n,stylesCtx:r,className:o,style:s,rootSelector:i="root",unstyled:a,classNames:l,styles:c,vars:d,varsResolver:u}){const h=En(),f=HX(),p=FX(),g=zX(),b=(Array.isArray(t)?t:[t]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:x}=EQ({props:n,stylesCtx:r,themeName:b});return(w,k)=>({className:xQ({theme:h,options:k,themeName:b,selector:w,classNamesPrefix:f,classNames:l,classes:e,unstyled:a,className:o,rootSelector:i,props:n,stylesCtx:r,withStaticClasses:p,headless:g,transformedStyles:x([k==null?void 0:k.styles,c])}),style:TQ({theme:h,themeName:b,selector:w,options:k,props:n,stylesCtx:r,rootSelector:i,styles:c,style:s,vars:d,varsResolver:u,headless:g,withStylesTransform:v})})}function MQ(t,e){return typeof t=="boolean"?t:e.autoContrast}function K(t,e,n){var i;const r=En(),o=(i=r.components[t])==null?void 0:i.defaultProps,s=typeof o=="function"?o(r):o;return{...e,...s,...Vp(n)}}function jg(t){return Dr(t).reduce((e,n)=>t[n]!==void 0?`${e}${dX(n)}:${t[n]};`:e,"").trim()}function AQ({selector:t,styles:e,media:n,container:r}){const o=e?jg(e):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${jg(a.styles)}}}`):[],i=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${jg(a.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${s.join("")}${i.join("")}`.trim()}function UN(t){const e=xv();return m.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:AQ(t)}})}function Up(t){const{m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:g,pr:b,pe:v,ps:x,bd:w,bg:k,c:C,opacity:S,ff:T,fz:E,fw:M,lts:R,ta:I,lh:L,fs:$,tt:F,td:z,w:J,miw:P,maw:B,h:H,mih:Y,mah:G,bgsz:X,bgp:pe,bgr:He,bga:qe,pos:ve,top:Pe,left:Ke,bottom:Be,right:ie,inset:Xt,display:At,flex:Qt,hiddenFrom:Rt,visibleFrom:Mn,lightHidden:wr,darkHidden:Fi,sx:zi,...Bo}=t;return{styleProps:Vp({m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:g,pr:b,pe:v,ps:x,bd:w,bg:k,c:C,opacity:S,ff:T,fz:E,fw:M,lts:R,ta:I,lh:L,fs:$,tt:F,td:z,w:J,miw:P,maw:B,h:H,mih:Y,mah:G,bgsz:X,bgp:pe,bgr:He,bga:qe,pos:ve,top:Pe,left:Ke,bottom:Be,right:ie,inset:Xt,display:At,flex:Qt,hiddenFrom:Rt,visibleFrom:Mn,lightHidden:wr,darkHidden:Fi,sx:zi}),rest:Bo}}const RQ={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Tv(t,e){const n=tl({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function _Q(t,e){const n=tl({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Tv(t,e)}function IQ(t,e){if(typeof t=="number")return D(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(i=>i.trim()!=="");let s=`${D(n)}`;return r&&(s+=` ${r}`),o.length>0&&(s+=` ${Tv(o.join(" "),e)}`),s.trim()}return t}const QS={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function NQ(t){return typeof t=="string"&&t in QS?QS[t]:t}const DQ=["h1","h2","h3","h4","h5","h6"];function PQ(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&DQ.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?D(t):t}function OQ(t){return t}const LQ=["h1","h2","h3","h4","h5","h6"];function jQ(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&LQ.includes(t)?`var(--mantine-${t}-line-height)`:t}function BQ(t){return typeof t=="number"?D(t):t}function VQ(t,e){if(typeof t=="number")return D(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return D(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const Bg={color:Tv,textColor:_Q,fontSize:PQ,spacing:VQ,identity:OQ,size:BQ,lineHeight:jQ,fontFamily:NQ,border:IQ};function e2(t){return t.replace("(min-width: ","").replace("em)","")}function $Q({media:t,...e}){const r=Object.keys(t).sort((o,s)=>Number(e2(o))-Number(e2(s))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function HQ(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function FQ(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function zQ(t){return typeof t=="object"&&t!==null?Dr(t).filter(e=>e!=="base"):[]}function UQ(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function WN({styleProps:t,data:e,theme:n}){return $Q(Dr(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const s=e[o],i=Array.isArray(s.property)?s.property:[s.property],a=FQ(t[o]);if(!HQ(t[o]))return i.forEach(c=>{r.inlineStyles[c]=Bg[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=zQ(t[o]);return i.forEach(c=>{a&&(r.styles[c]=Bg[s.type](a,n)),l.forEach(d=>{const u=`(min-width: ${n.breakpoints[d]})`;r.media[u]={...r.media[u],[c]:Bg[s.type](UQ(t[o],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function GN(){return`__m__-${y.useId().replace(/:/g,"")}`}function qN(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...qN(r,e)}),{}):typeof t=="function"?t(e):t??{}}function KN(t){return t.startsWith("data-")?t:`data-${t}`}function WQ(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[KN(n)]=t[n]),e},{})}function ZN(t){return t?typeof t=="string"?{[KN(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...ZN(n)}),{}):WQ(t):null}function Hb(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Hb(r,e)}),{}):typeof t=="function"?t(e):t??{}}function GQ({theme:t,style:e,vars:n,styleProps:r}){const o=Hb(e,t),s=Hb(n,t);return{...o,...s,...r}}const JN=y.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:s,size:i,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:d,renderRoot:u,__size:h,...f},p)=>{var E;const g=En(),b=t||"div",{styleProps:v,rest:x}=Up(f),w=UX(),k=(E=w==null?void 0:w())==null?void 0:E(v.sx),C=GN(),S=WN({styleProps:v,theme:g,data:RQ}),T={ref:p,style:GQ({theme:g,style:e,vars:n,styleProps:S.inlineStyles}),className:jo(r,k,{[C]:S.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":d,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":AN(i)?void 0:i||void 0,size:h,...ZN(s),...x};return m.jsxs(m.Fragment,{children:[S.hasResponsiveStyles&&m.jsx(UN,{selector:`.${C}`,styles:S.styles,media:S.media}),typeof u=="function"?u(T):m.jsx(b,{...T})]})});JN.displayName="@mantine/core/Box";const oe=JN;function YN(t){return t}function qQ(t){const e=t;return n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function Ce(t){const e=y.forwardRef(t);return e.extend=YN,e.withProps=n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function Jt(t){const e=y.forwardRef(t);return e.withProps=n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=YN,e}const KQ=y.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function $d(){return y.useContext(KQ)}var XN={root:"m_87cf2631"};const ZQ={__staticSelector:"UnstyledButton"},Vi=Jt((t,e)=>{const n=K("UnstyledButton",ZQ,t),{className:r,component:o="button",__staticSelector:s,unstyled:i,classNames:a,styles:l,style:c,...d}=n,u=ke({name:s,props:n,classes:XN,className:r,style:c,classNames:a,styles:l,unstyled:i});return m.jsx(oe,{...u("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...d})});Vi.classes=XN;Vi.displayName="@mantine/core/UnstyledButton";var QN={root:"m_515a97f8"};const JQ={},Ev=Ce((t,e)=>{const n=K("VisuallyHidden",JQ,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,...c}=n,d=ke({name:"VisuallyHidden",classes:QN,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a});return m.jsx(oe,{component:"span",ref:e,...d("root"),...c})});Ev.classes=QN;Ev.displayName="@mantine/core/VisuallyHidden";var eD={root:"m_1b7284a3"};const YQ={},XQ=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:$t(e),"--paper-shadow":_N(n)}}),Mv=Jt((t,e)=>{const n=K("Paper",YQ,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,withBorder:l,vars:c,radius:d,shadow:u,variant:h,mod:f,...p}=n,g=ke({name:"Paper",props:n,classes:eD,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:c,varsResolver:XQ});return m.jsx(oe,{ref:e,mod:[{"data-with-border":l},f],...g("root"),variant:h,...p})});Mv.classes=eD;Mv.displayName="@mantine/core/Paper";function tD(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}function t2(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function n2(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const QQ={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function eee({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:s,arrowY:i,dir:a}){const[l,c="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[QQ[l]]:r},u=-e/2;return l==="left"?{...d,...t2(c,i,n,o),right:u,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...d,...t2(c,i,n,o),left:u,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...d,...n2(c,s,n,o,a),bottom:u,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...d,...n2(c,s,n,o,a),top:u,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const Av=y.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:s,arrowX:i,arrowY:a,style:l,...c},d)=>{const{dir:u}=$d();return s?m.jsx("div",{...c,ref:d,style:{...l,...eee({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:u,arrowX:i,arrowY:a})}}):null});Av.displayName="@mantine/core/FloatingArrow";var nD={root:"m_9814e45f"};const tee={zIndex:Ld("modal")},nee=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:s,zIndex:i})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&Mr(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${D(o)})`:void 0,"--overlay-radius":s===void 0?void 0:$t(s),"--overlay-z-index":i==null?void 0:i.toString()}}),Jc=Jt((t,e)=>{const n=K("Overlay",tee,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,fixed:c,center:d,children:u,radius:h,zIndex:f,gradient:p,blur:g,color:b,backgroundOpacity:v,mod:x,...w}=n,k=ke({name:"Overlay",props:n,classes:nD,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:nee});return m.jsx(oe,{ref:e,...k("root"),mod:[{center:d,fixed:c},x],...w,children:u})});Jc.classes=nD;Jc.displayName="@mantine/core/Overlay";function Vg(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function ree({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||Vg(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=Vg(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return Vg(n)}const oee={},rD=Ce((t,e)=>{const{children:n,target:r,reuseTargetNode:o,...s}=K("Portal",oee,t),[i,a]=y.useState(!1),l=y.useRef(null);return Hp(()=>(a(!0),l.current=ree({target:r,reuseTargetNode:o,...s}),Af(e,l.current),!r&&!o&&l.current&&document.body.appendChild(l.current),()=>{!r&&!o&&l.current&&document.body.removeChild(l.current)}),[r]),!i||!l.current?null:kt.createPortal(m.jsx(m.Fragment,{children:n}),l.current)});rD.displayName="@mantine/core/Portal";const Hd=Ce(({withinPortal:t=!0,children:e,...n},r)=>BN()==="test"||!t?m.jsx(m.Fragment,{children:e}):m.jsx(rD,{ref:r,...n,children:e}));Hd.displayName="@mantine/core/OptionalPortal";const Rl=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Du={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Rl("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Rl("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Rl("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Rl("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Rl("top"),common:{transformOrigin:"top right"}}},r2={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function see({transition:t,state:e,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in Du?{transitionProperty:Du[t].transitionProperty,...o,...Du[t].common,...Du[t][r2[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[r2[e]]}}function iee({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:s,onEntered:i,onExited:a,enterDelay:l,exitDelay:c}){const d=En(),u=OX(),h=d.respectReducedMotion?u:!1,[f,p]=y.useState(h?0:t),[g,b]=y.useState(r?"entered":"exited"),v=y.useRef(-1),x=y.useRef(-1),w=y.useRef(-1),k=S=>{const T=S?o:s,E=S?i:a;window.clearTimeout(v.current);const M=h?0:S?t:e;p(M),M===0?(typeof T=="function"&&T(),typeof E=="function"&&E(),b(S?"entered":"exited")):w.current=requestAnimationFrame(()=>{xE.flushSync(()=>{b(S?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof T=="function"&&T(),b(S?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof E=="function"&&E(),b(S?"entered":"exited")},M)})})},C=S=>{if(window.clearTimeout(x.current),typeof(S?l:c)!="number"){k(S);return}x.current=window.setTimeout(()=>{k(S)},S?l:c)};return Ms(()=>{C(r)},[r]),y.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:f,transitionStatus:g,transitionTimingFunction:n||"ease"}}function $i({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:s,timingFunction:i="ease",onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h}){const f=BN(),{transitionDuration:p,transitionStatus:g,transitionTimingFunction:b}=iee({mounted:o,exitDuration:r,duration:n,timingFunction:i,onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h});return p===0||f==="test"?o?m.jsx(m.Fragment,{children:s({})}):t?s({display:"none"}):null:g==="exited"?t?s({display:"none"}):null:m.jsx(m.Fragment,{children:s(see({transition:e,duration:p,state:g,timingFunction:b}))})}$i.displayName="@mantine/core/Transition";const[aee,oD]=$p("Popover component was not found in the tree");function Rv({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=PN(e),s=Lo(o,r);return Od(t)?y.cloneElement(t,{[n]:s}):t}function sD(t){return m.jsx(Ev,{tabIndex:-1,"data-autofocus":!0,...t})}Rv.displayName="@mantine/core/FocusTrap";sD.displayName="@mantine/core/FocusTrapInitialFocus";Rv.InitialFocus=sD;var iD={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const lee={},Wp=Ce((t,e)=>{var b,v,x,w;const n=K("PopoverDropdown",lee,t),{className:r,style:o,vars:s,children:i,onKeyDownCapture:a,variant:l,classNames:c,styles:d,...u}=n,h=oD(),f=MX({opened:h.opened,shouldReturnFocus:h.returnFocus}),p=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=Lo(e,h.floating);return h.disabled?null:m.jsx(Hd,{...h.portalProps,withinPortal:h.withinPortal,children:m.jsx($i,{mounted:h.opened,...h.transitionProps,transition:((b=h.transitionProps)==null?void 0:b.transition)||"fade",duration:((v=h.transitionProps)==null?void 0:v.duration)??150,keepMounted:h.keepMounted,exitDuration:typeof((x=h.transitionProps)==null?void 0:x.exitDuration)=="number"?h.transitionProps.exitDuration:(w=h.transitionProps)==null?void 0:w.duration,children:k=>m.jsx(Rv,{active:h.trapFocus&&h.opened,innerRef:g,children:m.jsxs(oe,{...p,...u,variant:l,onKeyDownCapture:bX(()=>{var C,S;(C=h.onClose)==null||C.call(h),(S=h.onDismiss)==null||S.call(h)},{active:h.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":h.placement,"data-fixed":h.floatingStrategy==="fixed"||void 0,...h.getStyles("dropdown",{className:r,props:n,classNames:c,styles:d,style:[{...k,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:D(h.width)},h.resolvedStyles.dropdown,d==null?void 0:d.dropdown,o]}),children:[i,m.jsx(Av,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:n,classNames:c,styles:d})})]})})})})});Wp.classes=iD;Wp.displayName="@mantine/core/PopoverDropdown";const cee={refProp:"ref",popupType:"dialog"},_v=Ce((t,e)=>{const{children:n,refProp:r,popupType:o,...s}=K("PopoverTarget",cee,t);if(!Od(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=s,a=oD(),l=Lo(a.reference,wv(n),e),c=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return y.cloneElement(n,{...i,...c,...a.targetProps,className:jo(a.targetProps.className,i.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});_v.displayName="@mantine/core/PopoverTarget";function aD({opened:t,floating:e,position:n,positionDependencies:r}){const[o,s]=y.useState(0);y.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return W3(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,o,n]),Ms(()=>{e.update()},r),Ms(()=>{s(i=>i+1)},[t])}function dee(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function uee(t,e){const n=dee(t.middlewares),r=[Wr(t.offset)];return n.shift&&r.push(Pi(typeof n.shift=="boolean"?{limiter:hx(),padding:5}:{limiter:hx(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?ar():ar(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?Gl():Gl(n.inline)),r.push(kE({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&r.push(Jf({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:s,availableHeight:i,...a}){var d;const c=((d=e().refs.floating.current)==null?void 0:d.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:s,availableHeight:i,...a}):Object.assign(c,{maxWidth:`${s}px`,maxHeight:`${i}px`})),t.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),r}function hee(t){const[e,n]=el({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=y.useRef(e),o=()=>{e&&n(!1)},s=()=>n(!e),i=Qa({strategy:t.strategy,placement:t.position,middleware:uee(t,()=>i)});return aD({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:i}),Ms(()=>{var a;(a=t.onPositionChange)==null||a.call(t,i.placement)},[i.placement]),Ms(()=>{var a,l;e!==r.current&&(e?(l=t.onOpen)==null||l.call(t):(a=t.onClose)==null||a.call(t)),r.current=e},[e,t.onClose,t.onOpen]),{floating:i,controlled:typeof t.opened=="boolean",opened:e,onClose:o,onToggle:s}}const fee={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ld("popover"),__staticSelector:"Popover",width:"max-content"},pee=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:$t(e),"--popover-shadow":_N(n)}});function Bs(t){var su,iu,Qr,eo,Vo,pl;const e=K("Popover",fee,t),{children:n,position:r,offset:o,onPositionChange:s,positionDependencies:i,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:d,width:u,middlewares:h,withArrow:f,arrowSize:p,arrowOffset:g,arrowRadius:b,arrowPosition:v,unstyled:x,classNames:w,styles:k,closeOnClickOutside:C,withinPortal:S,portalProps:T,closeOnEscape:E,clickOutsideEvents:M,trapFocus:R,onClose:I,onDismiss:L,onOpen:$,onChange:F,zIndex:z,radius:J,shadow:P,id:B,defaultOpened:H,__staticSelector:Y,withRoles:G,disabled:X,returnFocus:pe,variant:He,keepMounted:qe,vars:ve,floatingStrategy:Pe,withOverlay:Ke,overlayProps:Be,...ie}=e,Xt=ke({name:Y,props:e,classes:iD,classNames:w,styles:k,unstyled:x,rootSelector:"dropdown",vars:ve,varsResolver:pee}),{resolvedStyles:At}=zp({classNames:w,styles:k,props:e}),Qt=y.useRef(null),[Rt,Mn]=y.useState(null),[wr,Fi]=y.useState(null),{dir:zi}=$d(),Bo=Bd(B),Ve=hee({middlewares:h,width:u,position:tD(zi,r),offset:typeof o=="number"?o+(f?p/2:0):o,arrowRef:Qt,arrowOffset:g,onPositionChange:s,positionDependencies:i,opened:a,defaultOpened:H,onChange:F,onOpen:$,onClose:I,onDismiss:L,strategy:Pe});CX(()=>{C&&(Ve.onClose(),L==null||L())},M,[Rt,wr]);const Ui=y.useCallback(Ze=>{Mn(Ze),Ve.floating.refs.setReference(Ze)},[Ve.floating.refs.setReference]),Wi=y.useCallback(Ze=>{Fi(Ze),Ve.floating.refs.setFloating(Ze)},[Ve.floating.refs.setFloating]),ru=y.useCallback(()=>{var Ze;(Ze=l==null?void 0:l.onExited)==null||Ze.call(l),c==null||c()},[l==null?void 0:l.onExited,c]),ou=y.useCallback(()=>{var Ze;(Ze=l==null?void 0:l.onEntered)==null||Ze.call(l),d==null||d()},[l==null?void 0:l.onEntered,d]);return m.jsxs(aee,{value:{returnFocus:pe,disabled:X,controlled:Ve.controlled,reference:Ui,floating:Wi,x:Ve.floating.x,y:Ve.floating.y,arrowX:(Qr=(iu=(su=Ve.floating)==null?void 0:su.middlewareData)==null?void 0:iu.arrow)==null?void 0:Qr.x,arrowY:(pl=(Vo=(eo=Ve.floating)==null?void 0:eo.middlewareData)==null?void 0:Vo.arrow)==null?void 0:pl.y,opened:Ve.opened,arrowRef:Qt,transitionProps:{...l,onExited:ru,onEntered:ou},width:u,withArrow:f,arrowSize:p,arrowOffset:g,arrowRadius:b,arrowPosition:v,placement:Ve.floating.placement,trapFocus:R,withinPortal:S,portalProps:T,zIndex:z,radius:J,shadow:P,closeOnEscape:E,onDismiss:L,onClose:Ve.onClose,onToggle:Ve.onToggle,getTargetId:()=>`${Bo}-target`,getDropdownId:()=>`${Bo}-dropdown`,withRoles:G,targetProps:ie,__staticSelector:Y,classNames:w,styles:k,unstyled:x,variant:He,keepMounted:qe,getStyles:Xt,resolvedStyles:At,floatingStrategy:Pe},children:[n,Ke&&m.jsx($i,{transition:"fade",mounted:Ve.opened,duration:(l==null?void 0:l.duration)||250,exitDuration:(l==null?void 0:l.exitDuration)||250,children:Ze=>m.jsx(Hd,{withinPortal:S,children:m.jsx(Jc,{...Be,...Xt("overlay",{className:Be==null?void 0:Be.className,style:[Ze,Be==null?void 0:Be.style]})})})})]})}Bs.Target=_v;Bs.Dropdown=Wp;Bs.displayName="@mantine/core/Popover";Bs.extend=t=>t;var or={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const lD=y.forwardRef(({className:t,...e},n)=>m.jsxs(oe,{component:"span",className:jo(or.barsLoader,t),...e,ref:n,children:[m.jsx("span",{className:or.bar}),m.jsx("span",{className:or.bar}),m.jsx("span",{className:or.bar})]}));lD.displayName="@mantine/core/Bars";const cD=y.forwardRef(({className:t,...e},n)=>m.jsxs(oe,{component:"span",className:jo(or.dotsLoader,t),...e,ref:n,children:[m.jsx("span",{className:or.dot}),m.jsx("span",{className:or.dot}),m.jsx("span",{className:or.dot})]}));cD.displayName="@mantine/core/Dots";const dD=y.forwardRef(({className:t,...e},n)=>m.jsx(oe,{component:"span",className:jo(or.ovalLoader,t),...e,ref:n}));dD.displayName="@mantine/core/Oval";const uD={bars:lD,oval:dD,dots:cD},mee={loaders:uD,type:"oval"},gee=(t,{size:e,color:n})=>({root:{"--loader-size":Le(e,"loader-size"),"--loader-color":n?Fr(n,t):void 0}}),Vs=Ce((t,e)=>{const n=K("Loader",mee,t),{size:r,color:o,type:s,vars:i,className:a,style:l,classNames:c,styles:d,unstyled:u,loaders:h,variant:f,children:p,...g}=n,b=ke({name:"Loader",props:n,classes:or,className:a,style:l,classNames:c,styles:d,unstyled:u,vars:i,varsResolver:gee});return p?m.jsx(oe,{...b("root"),ref:e,...g,children:p}):m.jsx(oe,{...b("root"),ref:e,component:h[s],variant:f,size:r,...g})});Vs.defaultLoaders=uD;Vs.classes=or;Vs.displayName="@mantine/core/Loader";var nl={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const o2={orientation:"horizontal"},yee=(t,{borderWidth:e})=>({group:{"--ai-border-width":D(e)}}),Iv=Ce((t,e)=>{const n=K("ActionIconGroup",o2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=K("ActionIconGroup",o2,t),p=ke({name:"ActionIconGroup",props:n,classes:nl,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:yee,rootSelector:"group"});return m.jsx(oe,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});Iv.classes=nl;Iv.displayName="@mantine/core/ActionIconGroup";const s2={},bee=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":Le(i,"section-height"),"--section-padding-x":Le(i,"section-padding-x"),"--section-fz":un(i),"--section-radius":e===void 0?void 0:$t(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},Nv=Ce((t,e)=>{const n=K("ActionIconGroupSection",s2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=K("ActionIconGroupSection",s2,t),p=ke({name:"ActionIconGroupSection",props:n,classes:nl,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:bee,rootSelector:"groupSection"});return m.jsx(oe,{...p("groupSection"),ref:e,variant:c,...f})});Nv.classes=nl;Nv.displayName="@mantine/core/ActionIconGroupSection";const vee={},wee=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i})=>{const a=t.variantColorResolver({color:s||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ai-size":Le(e,"ai-size"),"--ai-radius":n===void 0?void 0:$t(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Hi=Jt((t,e)=>{const n=K("ActionIcon",vee,t),{className:r,unstyled:o,variant:s,classNames:i,styles:a,style:l,loading:c,loaderProps:d,size:u,color:h,radius:f,__staticSelector:p,gradient:g,vars:b,children:v,disabled:x,"data-disabled":w,autoContrast:k,mod:C,...S}=n,T=ke({name:["ActionIcon",p],props:n,className:r,style:l,classes:nl,classNames:i,styles:a,unstyled:o,vars:b,varsResolver:wee});return m.jsxs(Vi,{...T("root",{active:!x&&!c&&!w}),...S,unstyled:o,variant:s,size:u,disabled:x||c,ref:e,mod:[{loading:c,disabled:x||w},C],children:[m.jsx($i,{mounted:!!c,transition:"slide-down",duration:150,children:E=>m.jsx(oe,{component:"span",...T("loader",{style:E}),"aria-hidden":!0,children:m.jsx(Vs,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),m.jsx(oe,{component:"span",mod:{loading:c},...T("icon"),children:v})]})});Hi.classes=nl;Hi.displayName="@mantine/core/ActionIcon";Hi.Group=Iv;Hi.GroupSection=Nv;const hD=y.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>m.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:m.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));hD.displayName="@mantine/core/CloseIcon";var fD={root:"m_86a44da5","root--subtle":"m_220c80f2"};const xee={variant:"subtle"},kee=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":Le(e,"cb-size"),"--cb-radius":n===void 0?void 0:$t(n),"--cb-icon-size":D(r)}}),Gp=Jt((t,e)=>{const n=K("CloseButton",xee,t),{iconSize:r,children:o,vars:s,radius:i,className:a,classNames:l,style:c,styles:d,unstyled:u,"data-disabled":h,disabled:f,variant:p,icon:g,mod:b,__staticSelector:v,...x}=n,w=ke({name:v||"CloseButton",props:n,className:a,style:c,classes:fD,classNames:l,styles:d,unstyled:u,vars:s,varsResolver:kee});return m.jsxs(Vi,{ref:e,...x,unstyled:u,variant:p,disabled:f,mod:[{disabled:f||h},b],...w("root",{variant:p,active:!f&&!h}),children:[g||m.jsx(hD,{}),o]})});Gp.classes=fD;Gp.displayName="@mantine/core/CloseButton";function Cee(t){return y.Children.toArray(t).filter(Boolean)}var pD={root:"m_4081bf90"};const See={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Tee=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:s,wrap:i},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":jd(r),"--group-align":o,"--group-justify":s,"--group-wrap":i}}),Tt=Ce((t,e)=>{const n=K("Group",See,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,children:l,gap:c,align:d,justify:u,wrap:h,grow:f,preventGrowOverflow:p,vars:g,variant:b,__size:v,mod:x,...w}=n,k=Cee(l),C=k.length,S=jd(c??"md"),E={childWidth:`calc(${100/C}% - (${S} - ${S} / ${C}))`},M=ke({name:"Group",props:n,stylesCtx:E,className:o,style:s,classes:pD,classNames:r,styles:i,unstyled:a,vars:g,varsResolver:Tee});return m.jsx(oe,{...M("root"),ref:e,variant:b,mod:[{grow:f},x],size:v,...w,children:k})});Tt.classes=pD;Tt.displayName="@mantine/core/Group";const[Eee,Mee]=vv({size:"sm"}),Aee={},mD=Ce((t,e)=>{const n=K("InputClearButton",Aee,t),{size:r,variant:o,vars:s,classNames:i,styles:a,...l}=n,c=Mee(),{resolvedClassNames:d,resolvedStyles:u}=zp({classNames:i,styles:a,props:n});return m.jsx(Gp,{variant:o||"transparent",ref:e,size:r||(c==null?void 0:c.size)||"sm",classNames:d,styles:u,__staticSelector:"InputClearButton",...l})});mD.displayName="@mantine/core/InputClearButton";const[Ree,qp]=vv({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Kn={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const i2={},_ee=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${un(e)} - ${D(2)})`}}),Kp=Ce((t,e)=>{const n=K("InputDescription",i2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=K("InputDescription",i2,n),p=qp(),g=ke({name:["InputWrapper",d],props:n,classes:Kn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"description",vars:l,varsResolver:_ee}),b=u&&(p==null?void 0:p.getStyles)||g;return m.jsx(oe,{component:"p",ref:e,variant:h,size:c,...b("description",p!=null&&p.getStyles?{className:o,style:s}:void 0),...f})});Kp.classes=Kn;Kp.displayName="@mantine/core/InputDescription";const Iee={},Nee=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${un(e)} - ${D(2)})`}}),Zp=Ce((t,e)=>{const n=K("InputError",Iee,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=n,p=ke({name:["InputWrapper",d],props:n,classes:Kn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"error",vars:l,varsResolver:Nee}),g=qp(),b=u&&(g==null?void 0:g.getStyles)||p;return m.jsx(oe,{component:"p",ref:e,variant:h,size:c,...b("error",g!=null&&g.getStyles?{className:o,style:s}:void 0),...f})});Zp.classes=Kn;Zp.displayName="@mantine/core/InputError";const a2={labelElement:"label"},Dee=(t,{size:e})=>({label:{"--input-label-size":un(e),"--input-asterisk-color":void 0}}),Jp=Ce((t,e)=>{const n=K("InputLabel",a2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,labelElement:c,size:d,required:u,htmlFor:h,onMouseDown:f,children:p,__staticSelector:g,variant:b,mod:v,...x}=K("InputLabel",a2,n),w=ke({name:["InputWrapper",g],props:n,classes:Kn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"label",vars:l,varsResolver:Dee}),k=qp(),C=(k==null?void 0:k.getStyles)||w;return m.jsxs(oe,{...C("label",k!=null&&k.getStyles?{className:o,style:s}:void 0),component:c,variant:b,size:d,ref:e,htmlFor:c==="label"?h:void 0,mod:[{required:u},v],onMouseDown:S=>{f==null||f(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...x,children:[p,u&&m.jsx("span",{...C("required"),"aria-hidden":!0,children:" *"})]})});Jp.classes=Kn;Jp.displayName="@mantine/core/InputLabel";const l2={},Dv=Ce((t,e)=>{const n=K("InputPlaceholder",l2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,__staticSelector:c,variant:d,error:u,mod:h,...f}=K("InputPlaceholder",l2,n),p=ke({name:["InputPlaceholder",c],props:n,classes:Kn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"placeholder"});return m.jsx(oe,{...p("placeholder"),mod:[{error:!!u},h],component:"span",variant:d,ref:e,...f})});Dv.classes=Kn;Dv.displayName="@mantine/core/InputPlaceholder";function Pee(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),o=t.slice(0,r),s=t.slice(r+1),i=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&s.includes("description")||n&&s.includes("error"),offsetTop:i}}const Oee={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},Lee=(t,{size:e})=>({label:{"--input-label-size":un(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${un(e)} - ${D(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${un(e)} - ${D(2)})`}}),Pv=Ce((t,e)=>{const n=K("InputWrapper",Oee,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,variant:d,__staticSelector:u,inputContainer:h,inputWrapperOrder:f,label:p,error:g,description:b,labelProps:v,descriptionProps:x,errorProps:w,labelElement:k,children:C,withAsterisk:S,id:T,required:E,__stylesApiProps:M,mod:R,...I}=n,L=ke({name:["InputWrapper",u],props:M||n,classes:Kn,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Lee}),$={size:c,variant:d,__staticSelector:u},F=Bd(T),z=typeof S=="boolean"?S:E,J=(w==null?void 0:w.id)||`${F}-error`,P=(x==null?void 0:x.id)||`${F}-description`,B=F,H=!!g&&typeof g!="boolean",Y=!!b,G=`${H?J:""} ${Y?P:""}`,X=G.trim().length>0?G.trim():void 0,pe=(v==null?void 0:v.id)||`${F}-label`,He=p&&m.jsx(Jp,{labelElement:k,id:pe,htmlFor:B,required:z,...$,...v,children:p},"label"),qe=Y&&m.jsx(Kp,{...x,...$,size:(x==null?void 0:x.size)||$.size,id:(x==null?void 0:x.id)||P,children:b},"description"),ve=m.jsx(y.Fragment,{children:h(C)},"input"),Pe=H&&y.createElement(Zp,{...w,...$,size:(w==null?void 0:w.size)||$.size,key:"error",id:(w==null?void 0:w.id)||J},g),Ke=f.map(Be=>{switch(Be){case"label":return He;case"input":return ve;case"description":return qe;case"error":return Pe;default:return null}});return m.jsx(Ree,{value:{getStyles:L,describedBy:X,inputId:B,labelId:pe,...Pee(f,{hasDescription:Y,hasError:H})},children:m.jsx(oe,{ref:e,variant:d,size:c,mod:[{error:!!g},R],...L("root"),...I,children:Ke})})});Pv.classes=Kn;Pv.displayName="@mantine/core/InputWrapper";const jee={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Bee=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Le(e.size,"input-height"),"--input-fz":un(e.size),"--input-radius":e.radius===void 0?void 0:$t(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?D(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?D(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Le(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Tn=Jt((t,e)=>{const n=K("Input",jee,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:d,size:u,wrapperProps:h,error:f,disabled:p,leftSection:g,leftSectionProps:b,leftSectionWidth:v,rightSection:x,rightSectionProps:w,rightSectionWidth:k,rightSectionPointerEvents:C,leftSectionPointerEvents:S,variant:T,vars:E,pointer:M,multiline:R,radius:I,id:L,withAria:$,withErrorStyles:F,mod:z,inputSize:J,__clearSection:P,__clearable:B,__defaultRightSection:H,...Y}=n,{styleProps:G,rest:X}=Up(Y),pe=qp(),He={offsetBottom:pe==null?void 0:pe.offsetBottom,offsetTop:pe==null?void 0:pe.offsetTop},qe=ke({name:["Input",c],props:d||n,classes:Kn,className:o,style:s,classNames:r,styles:i,unstyled:a,stylesCtx:He,rootSelector:"wrapper",vars:E,varsResolver:Bee}),ve=$?{required:l,disabled:p,"aria-invalid":!!f,"aria-describedby":pe==null?void 0:pe.describedBy,id:(pe==null?void 0:pe.inputId)||L}:{},Pe=x||B&&P||H;return m.jsx(Eee,{value:{size:u||"sm"},children:m.jsxs(oe,{...qe("wrapper"),...G,...h,mod:[{error:!!f&&F,pointer:M,disabled:p,multiline:R,"data-with-right-section":!!Pe,"data-with-left-section":!!g},z],variant:T,size:u,children:[g&&m.jsx("div",{...b,"data-position":"left",...qe("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:g}),m.jsx(oe,{component:"input",...X,...ve,ref:e,required:l,mod:{disabled:p,error:!!f&&F},variant:T,__size:J,...qe("input")}),Pe&&m.jsx("div",{...w,"data-position":"right",...qe("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:Pe})]})})});Tn.classes=Kn;Tn.Wrapper=Pv;Tn.Label=Jp;Tn.Error=Zp;Tn.Description=Kp;Tn.Placeholder=Dv;Tn.ClearButton=mD;Tn.displayName="@mantine/core/Input";function Vee(t,e,n){const r=K(t,e,n),{label:o,description:s,error:i,required:a,classNames:l,styles:c,className:d,unstyled:u,__staticSelector:h,__stylesApiProps:f,errorProps:p,labelProps:g,descriptionProps:b,wrapperProps:v,id:x,size:w,style:k,inputContainer:C,inputWrapperOrder:S,withAsterisk:T,variant:E,vars:M,mod:R,...I}=r,{styleProps:L,rest:$}=Up(I),F={label:o,description:s,error:i,required:a,classNames:l,className:d,__staticSelector:h,__stylesApiProps:f||r,errorProps:p,labelProps:g,descriptionProps:b,unstyled:u,styles:c,size:w,style:k,inputContainer:C,inputWrapperOrder:S,withAsterisk:T,variant:E,id:x,mod:R,...v};return{...$,classNames:l,styles:c,unstyled:u,wrapperProps:{...F,...L},inputProps:{required:a,classNames:l,styles:c,unstyled:u,size:w,__staticSelector:h,__stylesApiProps:f||r,error:i,variant:E,id:x}}}const $ee={__staticSelector:"InputBase",withAria:!0},rl=Jt((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=Vee("InputBase",$ee,t);return m.jsx(Tn.Wrapper,{...r,children:m.jsx(Tn,{...n,...o,ref:e})})});rl.classes={...Tn.classes,...Tn.Wrapper.classes};rl.displayName="@mantine/core/InputBase";const Hee={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var gD={root:"m_8bffd616"};const Fee={},Ov=Jt((t,e)=>{const n=K("Flex",Fee,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:g,...b}=n,v=ke({name:"Flex",classes:gD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l}),x=En(),w=GN(),k=WN({styleProps:{gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:g},theme:x,data:Hee});return m.jsxs(m.Fragment,{children:[k.hasResponsiveStyles&&m.jsx(UN,{selector:`.${w}`,styles:k.styles,media:k.media}),m.jsx(oe,{ref:e,...v("root",{className:w,style:Vp(k.inlineStyles)}),...b})]})});Ov.classes=gD;Ov.displayName="@mantine/core/Flex";var yD={root:"m_b6d8b162"};function zee(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const Uee={inherit:!1},Wee=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:s})=>({root:{"--text-fz":un(o),"--text-lh":vX(o),"--text-gradient":e==="gradient"?Vb(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Fr(s,t):void 0}}),zr=Jt((t,e)=>{const n=K("Text",Uee,t),{lineClamp:r,truncate:o,inline:s,inherit:i,gradient:a,span:l,__staticSelector:c,vars:d,className:u,style:h,classNames:f,styles:p,unstyled:g,variant:b,mod:v,size:x,...w}=n,k=ke({name:["Text",c],props:n,classes:yD,className:u,style:h,classNames:f,styles:p,unstyled:g,vars:d,varsResolver:Wee});return m.jsx(oe,{...k("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:b,mod:[{"data-truncate":zee(o),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":i},v],size:x,...w})});zr.classes=yD;zr.displayName="@mantine/core/Text";function Lv({size:t,style:e,...n}){const r=t!==void 0?{width:D(t),height:D(t),...e}:e;return m.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:m.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const bD=y.createContext(null),Gee=bD.Provider;function qee(){return{withinGroup:!!y.useContext(bD)}}var Yp={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const Kee={},Zee=(t,{spacing:e})=>({group:{"--ag-spacing":jd(e)}}),jv=Ce((t,e)=>{const n=K("AvatarGroup",Kee,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,spacing:c,...d}=n,u=ke({name:"AvatarGroup",classes:Yp,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Zee,rootSelector:"group"});return m.jsx(Gee,{value:!0,children:m.jsx(oe,{ref:e,...u("group"),...d})})});jv.classes=Yp;jv.displayName="@mantine/core/AvatarGroup";function Jee(t){return m.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Yee(t){let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}const Xee=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function Qee(t,e=Xee){const n=Yee(t),r=Math.abs(n)%e.length;return e[r]}function ete(t,e=2){const n=t.split(" ");return n.length===1?t.slice(0,e).toUpperCase():n.map(r=>r[0]).slice(0,e).join("").toUpperCase()}const tte={},nte=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i,name:a,allowedInitialsColors:l})=>{const c=s==="initials"&&typeof a=="string"?Qee(a,l):s,d=t.variantColorResolver({color:c||"gray",theme:t,gradient:o,variant:r||"light",autoContrast:i});return{root:{"--avatar-size":Le(e,"avatar-size"),"--avatar-radius":n===void 0?void 0:$t(n),"--avatar-bg":c||r?d.background:void 0,"--avatar-color":c||r?d.color:void 0,"--avatar-bd":c||r?d.border:void 0}}},Xp=Jt((t,e)=>{const n=K("Avatar",tte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,src:c,alt:d,radius:u,color:h,gradient:f,imageProps:p,children:g,autoContrast:b,mod:v,name:x,allowedInitialsColors:w,...k}=n,C=qee(),[S,T]=y.useState(!c),E=ke({name:"Avatar",props:n,classes:Yp,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:nte});return y.useEffect(()=>T(!c),[c]),m.jsx(oe,{...E("root"),mod:[{"within-group":C.withinGroup},v],ref:e,...k,children:S?m.jsx("span",{...E("placeholder"),title:d,children:g||typeof x=="string"&&ete(x)||m.jsx(Jee,{})}):m.jsx("img",{...p,...E("image"),src:c,alt:d,onError:M=>{var R;T(!0),(R=p==null?void 0:p.onError)==null||R.call(p,M)}})})});Xp.classes=Yp;Xp.displayName="@mantine/core/Avatar";Xp.Group=jv;var vD={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const rte={},ote=(t,{radius:e,color:n,gradient:r,variant:o,size:s,autoContrast:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{root:{"--badge-height":Le(s,"badge-height"),"--badge-padding-x":Le(s,"badge-padding-x"),"--badge-fz":Le(s,"badge-fz"),"--badge-radius":e===void 0?void 0:$t(e),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?Fr(n,t):void 0}}},Bv=Jt((t,e)=>{const n=K("Badge",rte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,radius:c,color:d,gradient:u,leftSection:h,rightSection:f,children:p,variant:g,fullWidth:b,autoContrast:v,circle:x,mod:w,...k}=n,C=ke({name:"Badge",props:n,classes:vD,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:ote});return m.jsxs(oe,{variant:g,mod:[{block:b,circle:x,"with-right-section":!!f,"with-left-section":!!h},w],...C("root",{variant:g}),ref:e,...k,children:[h&&m.jsx("span",{...C("section"),"data-position":"left",children:h}),m.jsx("span",{...C("label"),children:p}),f&&m.jsx("span",{...C("section"),"data-position":"right",children:f})]})});Bv.classes=vD;Bv.displayName="@mantine/core/Badge";var ol={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const c2={orientation:"horizontal"},ste=(t,{borderWidth:e})=>({group:{"--button-border-width":D(e)}}),Vv=Ce((t,e)=>{const n=K("ButtonGroup",c2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=K("ButtonGroup",c2,t),p=ke({name:"ButtonGroup",props:n,classes:ol,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:ste,rootSelector:"group"});return m.jsx(oe,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});Vv.classes=ol;Vv.displayName="@mantine/core/ButtonGroup";const d2={},ite=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":Le(i,"section-height"),"--section-padding-x":Le(i,"section-padding-x"),"--section-fz":i!=null&&i.includes("compact")?un(i.replace("compact-","")):un(i),"--section-radius":e===void 0?void 0:$t(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},$v=Ce((t,e)=>{const n=K("ButtonGroupSection",d2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=K("ButtonGroupSection",d2,t),p=ke({name:"ButtonGroupSection",props:n,classes:ol,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:ite,rootSelector:"groupSection"});return m.jsx(oe,{...p("groupSection"),ref:e,variant:c,...f})});$v.classes=ol;$v.displayName="@mantine/core/ButtonGroupSection";const ate={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${D(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},lte={},cte=(t,{radius:e,color:n,gradient:r,variant:o,size:s,justify:i,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":i,"--button-height":Le(s,"button-height"),"--button-padding-x":Le(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?un(s.replace("compact-","")):un(s),"--button-radius":e===void 0?void 0:$t(e),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},vr=Jt((t,e)=>{const n=K("Button",lte,t),{style:r,vars:o,className:s,color:i,disabled:a,children:l,leftSection:c,rightSection:d,fullWidth:u,variant:h,radius:f,loading:p,loaderProps:g,gradient:b,classNames:v,styles:x,unstyled:w,"data-disabled":k,autoContrast:C,mod:S,...T}=n,E=ke({name:"Button",props:n,classes:ol,className:s,style:r,classNames:v,styles:x,unstyled:w,vars:o,varsResolver:cte}),M=!!c,R=!!d;return m.jsxs(Vi,{ref:e,...E("root",{active:!a&&!p&&!k}),unstyled:w,variant:h,disabled:a||p,mod:[{disabled:a||k,loading:p,block:u,"with-left-section":M,"with-right-section":R},S],...T,children:[m.jsx($i,{mounted:!!p,transition:ate,duration:150,children:I=>m.jsx(oe,{component:"span",...E("loader",{style:I}),"aria-hidden":!0,children:m.jsx(Vs,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),m.jsxs("span",{...E("inner"),children:[c&&m.jsx(oe,{component:"span",...E("section"),mod:{position:"left"},children:c}),m.jsx(oe,{component:"span",mod:{loading:p},...E("label"),children:l}),d&&m.jsx(oe,{component:"span",...E("section"),mod:{position:"right"},children:d})]})]})});vr.classes=ol;vr.displayName="@mantine/core/Button";vr.Group=Vv;vr.GroupSection=$v;const[dte,ute]=$p("Card component was not found in tree");var Hv={root:"m_e615b15f",section:"m_599a2148"};const hte={},Qp=Jt((t,e)=>{const n=K("CardSection",hte,t),{classNames:r,className:o,style:s,styles:i,vars:a,withBorder:l,inheritPadding:c,mod:d,...u}=n,h=ute();return m.jsx(oe,{ref:e,mod:[{"with-border":l,"inherit-padding":c},d],...h.getStyles("section",{className:o,style:s,styles:i,classNames:r}),...u})});Qp.classes=Hv;Qp.displayName="@mantine/core/CardSection";const fte={},pte=(t,{padding:e})=>({root:{"--card-padding":jd(e)}}),Fd=Jt((t,e)=>{const n=K("Card",fte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,children:c,padding:d,...u}=n,h=ke({name:"Card",props:n,classes:Hv,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:pte}),f=y.Children.toArray(c),p=f.map((g,b)=>typeof g=="object"&&g&&"type"in g&&g.type===Qp?y.cloneElement(g,{"data-first-section":b===0||void 0,"data-last-section":b===f.length-1||void 0}):g);return m.jsx(dte,{value:{getStyles:h},children:m.jsx(Mv,{ref:e,unstyled:a,...h("root"),...u,children:p})})});Fd.classes=Hv;Fd.displayName="@mantine/core/Card";Fd.Section=Qp;const[mte,gte]=vv(),yte={};function wD(t){const{value:e,defaultValue:n,onChange:r,multiple:o,children:s}=K("ChipGroup",yte,t),[i,a]=el({value:e,defaultValue:n,finalValue:o?[]:null,onChange:r}),l=d=>Array.isArray(i)?i.includes(d):d===i,c=d=>{const u=d.currentTarget.value;Array.isArray(i)?a(i.includes(u)?i.filter(h=>h!==u):[...i,u]):a(u)};return m.jsx(mte,{value:{isChipSelected:l,onChange:c,multiple:o},children:s})}wD.displayName="@mantine/core/ChipGroup";var xD={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const bte={type:"checkbox"},vte=(t,{size:e,radius:n,variant:r,color:o,autoContrast:s})=>{const i=t.variantColorResolver({color:o||t.primaryColor,theme:t,variant:r||"filled",autoContrast:s});return{root:{"--chip-fz":un(e),"--chip-size":Le(e,"chip-size"),"--chip-radius":n===void 0?void 0:$t(n),"--chip-checked-padding":Le(e,"chip-checked-padding"),"--chip-padding":Le(e,"chip-padding"),"--chip-icon-size":Le(e,"chip-icon-size"),"--chip-bg":o||r?i.background:void 0,"--chip-hover":o||r?i.hover:void 0,"--chip-color":o||r?i.color:void 0,"--chip-bd":o||r?i.border:void 0,"--chip-spacing":Le(e,"chip-spacing")}}},em=Ce((t,e)=>{const n=K("Chip",bte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,id:c,checked:d,defaultChecked:u,onChange:h,value:f,wrapperProps:p,type:g,disabled:b,children:v,size:x,variant:w,icon:k,rootRef:C,autoContrast:S,mod:T,...E}=n,M=ke({name:"Chip",classes:xD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:vte}),R=gte(),I=Bd(c),{styleProps:L,rest:$}=Up(E),[F,z]=el({value:d,defaultValue:u,finalValue:!1,onChange:h}),J=R?{checked:R.isChipSelected(f),onChange:B=>{R.onChange(B),h==null||h(B.currentTarget.checked)},type:R.multiple?"checkbox":"radio"}:{},P=J.checked||F;return m.jsxs(oe,{size:x,variant:w,ref:C,mod:T,...M("root"),...L,...p,children:[m.jsx("input",{type:g,...M("input"),checked:P,onChange:B=>z(B.currentTarget.checked),id:I,disabled:b,ref:e,value:f,...J,...$}),m.jsxs("label",{htmlFor:I,"data-checked":P||void 0,"data-disabled":b||void 0,...M("label",{variant:w||"filled"}),children:[P&&m.jsx("span",{...M("iconWrapper"),children:k||m.jsx(Lv,{...M("checkIcon")})}),m.jsx("span",{children:v})]})]})});em.classes=xD;em.displayName="@mantine/core/Chip";em.Group=wD;var kD={root:"m_3eebeb36",label:"m_9e365f20"};const wte={orientation:"horizontal"},xte=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?Fr(e,t):void 0,"--divider-border-style":n,"--divider-size":Le(r,"divider-size")}}),Fv=Ce((t,e)=>{const n=K("Divider",wte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,color:c,orientation:d,label:u,labelPosition:h,mod:f,...p}=n,g=ke({name:"Divider",classes:kD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:xte});return m.jsx(oe,{ref:e,mod:[{orientation:d,"with-label":!!u},f],...g("root"),...p,role:"separator",children:u&&m.jsx(oe,{component:"span",mod:{position:h},...g("label"),children:u})})});Fv.classes=kD;Fv.displayName="@mantine/core/Divider";const kte={multiple:!1},CD=y.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:s,name:i,form:a,resetRef:l,disabled:c,capture:d,inputProps:u,...h}=K("FileButton",kte,t),f=y.useRef(null),p=()=>{var v;!c&&((v=f.current)==null||v.click())},g=v=>{n(o?Array.from(v.currentTarget.files):v.currentTarget.files[0]||null)};return Af(l,()=>{f.current&&(f.current.value="")}),m.jsxs(m.Fragment,{children:[r({onClick:p,...h}),m.jsx("input",{style:{display:"none"},type:"file",accept:s,multiple:o,onChange:g,ref:Lo(e,f),name:i,form:a,capture:d,...u})]})});CD.displayName="@mantine/core/FileButton";const Cte=({value:t})=>m.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t==null?void 0:t.name}),Ste={valueComponent:Cte},zv=Ce((t,e)=>{const n=K("FileInput",Ste,t),{unstyled:r,vars:o,onChange:s,value:i,defaultValue:a,multiple:l,accept:c,name:d,form:u,valueComponent:h,clearable:f,clearButtonProps:p,readOnly:g,capture:b,fileInputProps:v,rightSection:x,size:w,placeholder:k,component:C,resetRef:S,classNames:T,styles:E,...M}=n,R=y.useRef(null),{resolvedClassNames:I,resolvedStyles:L}=zp({classNames:T,styles:E,props:n}),[$,F]=el({value:i,defaultValue:a,onChange:s,finalValue:l?[]:null}),z=Array.isArray($)?$.length!==0:$!==null,J=x||(f&&z&&!g?m.jsx(Gp,{...p,variant:"subtle",onClick:()=>F(l?[]:null),size:w,unstyled:r}):null);y.useEffect(()=>{var B;(Array.isArray($)&&$.length===0||$===null)&&((B=R.current)==null||B.call(R))},[$]);const P=h;return m.jsx(CD,{onChange:F,multiple:l,accept:c,name:d,form:u,resetRef:Lo(R,S),disabled:g,capture:b,inputProps:v,children:B=>m.jsx(rl,{component:C||"button",ref:e,rightSection:J,...B,...M,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:w,classNames:T,styles:E,children:z?m.jsx(P,{value:$}):m.jsx(Tn.Placeholder,{__staticSelector:"FileInput",classNames:I,styles:L,children:k})})})});zv.classes=rl.classes;zv.displayName="@mantine/core/FileInput";const Tte=zv;function Ete({open:t,close:e,openDelay:n,closeDelay:r}){const o=y.useRef(-1),s=y.useRef(-1),i=()=>{window.clearTimeout(o.current),window.clearTimeout(s.current)},a=()=>{i(),n===0||n===void 0?t():o.current=window.setTimeout(t,n)},l=()=>{i(),r===0||r===void 0?e():s.current=window.setTimeout(e,r)};return y.useEffect(()=>i,[]),{openDropdown:a,closeDropdown:l}}function Fb(){return Fb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fb.apply(null,arguments)}function Mte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ate=y.useLayoutEffect,Rte=function(e){var n=y.useRef(e);return Ate(function(){n.current=e}),n},u2=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},_te=function(e,n){var r=y.useRef();return y.useCallback(function(o){e.current=o,r.current&&u2(r.current,null),r.current=n,n&&u2(n,o)},[n])},h2={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Ite=function(e){Object.keys(h2).forEach(function(n){e.style.setProperty(n,h2[n],"important")})},f2=Ite,Ht=null,p2=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Nte(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ht||(Ht=document.createElement("textarea"),Ht.setAttribute("tabindex","-1"),Ht.setAttribute("aria-hidden","true"),f2(Ht)),Ht.parentNode===null&&document.body.appendChild(Ht);var o=t.paddingSize,s=t.borderSize,i=t.sizingStyle,a=i.boxSizing;Object.keys(i).forEach(function(h){var f=h;Ht.style[f]=i[f]}),f2(Ht),Ht.value=e;var l=p2(Ht,t);Ht.value=e,l=p2(Ht,t),Ht.value="x";var c=Ht.scrollHeight-o,d=c*n;a==="border-box"&&(d=d+o+s),l=Math.max(d,l);var u=c*r;return a==="border-box"&&(u=u+o+s),l=Math.min(u,l),[l,c]}var m2=function(){},Dte=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},Pte=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Ote=!!document.documentElement.currentStyle,Lte=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=Dte(Pte,n),o=r.boxSizing;if(o==="")return null;Ote&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:i}},jte=Lte;function Uv(t,e,n){var r=Rte(n);y.useLayoutEffect(function(){var o=function(i){return r.current(i)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var Bte=function(e,n){Uv(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},Vte=function(e){Uv(window,"resize",e)},$te=function(e){Uv(document.fonts,"loadingdone",e)},Hte=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Fte=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,s=e.minRows,i=e.onChange,a=i===void 0?m2:i,l=e.onHeightChange,c=l===void 0?m2:l,d=Mte(e,Hte),u=d.value!==void 0,h=y.useRef(null),f=_te(h,n),p=y.useRef(0),g=y.useRef(),b=function(){var w=h.current,k=r&&g.current?g.current:jte(w);if(k){g.current=k;var C=Nte(k,w.value||w.placeholder||"x",s,o),S=C[0],T=C[1];p.current!==S&&(p.current=S,w.style.setProperty("height",S+"px","important"),c(S,{rowHeight:T}))}},v=function(w){u||b(),a(w)};return y.useLayoutEffect(b),Bte(h,function(){if(!u){var x=h.current.value;requestAnimationFrame(function(){var w=h.current;w&&x!==w.value&&b()})}}),Vte(b),$te(b),y.createElement("textarea",Fb({},d,{onChange:v,ref:f}))},zte=y.forwardRef(Fte),SD={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const g2={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Ld("overlay")},Ute=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),Wv=Ce((t,e)=>{const n=K("LoadingOverlay",g2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,transitionProps:c,loaderProps:d,overlayProps:u,visible:h,zIndex:f,...p}=n,g=En(),b=ke({name:"LoadingOverlay",classes:SD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Ute}),v={...g2.overlayProps,...u};return m.jsx($i,{transition:"fade",...c,mounted:!!h,children:x=>m.jsxs(oe,{...b("root",{style:x}),ref:e,...p,children:[m.jsx(Vs,{...b("loader"),unstyled:a,...d}),m.jsx(Jc,{...v,...b("overlay"),darkHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||g.white}),m.jsx(Jc,{...v,...b("overlay"),lightHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||g.colors.dark[5]})]})})});Wv.classes=SD;Wv.displayName="@mantine/core/LoadingOverlay";const[Wte,zd]=$p("Menu component was not found in the tree");var sl={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Gte={},Gv=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=K("MenuDivider",Gte,t),l=zd();return m.jsx(oe,{ref:e,...l.getStyles("divider",{className:r,style:o,styles:s,classNames:n}),...a})});Gv.classes=sl;Gv.displayName="@mantine/core/MenuDivider";const qte={},qv=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:d,...u}=K("MenuDropdown",qte,t),h=y.useRef(null),f=zd(),p=_r(c,v=>{var x,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(x=h.current)==null?void 0:x.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),g=_r(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),b=_r(l,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return m.jsxs(Bs.Dropdown,{...u,onMouseEnter:g,onMouseLeave:b,role:"menu","aria-orientation":"vertical",ref:Lo(e,h),...f.getStyles("dropdown",{className:r,style:o,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[f.withInitialFocusPlaceholder&&m.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),d]})});qv.classes=sl;qv.displayName="@mantine/core/MenuDropdown";const Kte={},Kv=Jt((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,color:a,closeMenuOnClick:l,leftSection:c,rightSection:d,children:u,disabled:h,"data-disabled":f,...p}=K("MenuItem",Kte,t),g=zd(),b=En(),{dir:v}=$d(),x=y.useRef(null),w=g.getItemIndex(x.current),k=p,C=_r(k.onMouseLeave,()=>g.setHovered(-1)),S=_r(k.onMouseEnter,()=>g.setHovered(g.getItemIndex(x.current))),T=_r(k.onClick,()=>{f||(typeof l=="boolean"?l&&g.closeDropdownImmediately():g.closeOnItemClick&&g.closeDropdownImmediately())}),E=_r(k.onFocus,()=>g.setHovered(g.getItemIndex(x.current))),M=a?b.variantColorResolver({color:a,theme:b,variant:"light"}):void 0,R=a?tl({color:a,theme:b}):null;return m.jsxs(Vi,{...p,unstyled:g.unstyled,tabIndex:g.menuItemTabIndex,onFocus:E,...g.getStyles("item",{className:r,style:o,styles:s,classNames:n}),ref:Lo(x,e),role:"menuitem",disabled:h,"data-menu-item":!0,"data-disabled":h||f||void 0,"data-hovered":g.hovered===w?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:S,onMouseLeave:C,onClick:T,onKeyDown:RN({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:g.loop,dir:v,orientation:"vertical",onKeyDown:k.onKeyDown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:M==null?void 0:M.color,"--menu-item-hover":M==null?void 0:M.hover},children:[c&&m.jsx("div",{...g.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:c}),u&&m.jsx("div",{...g.getStyles("itemLabel",{styles:s,classNames:n}),children:u}),d&&m.jsx("div",{...g.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:d})]})});Kv.classes=sl;Kv.displayName="@mantine/core/MenuItem";const Zte={},Zv=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=K("MenuLabel",Zte,t),l=zd();return m.jsx(oe,{ref:e,...l.getStyles("label",{className:r,style:o,styles:s,classNames:n}),...a})});Zv.classes=sl;Zv.displayName="@mantine/core/MenuLabel";const Jte={refProp:"ref"},TD=y.forwardRef((t,e)=>{const{children:n,refProp:r,...o}=K("MenuTarget",Jte,t);if(!Od(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=zd(),i=n.props,a=_r(i.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),l=_r(i.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),c=_r(i.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return m.jsx(Bs.Target,{refProp:r,popupType:"menu",ref:e,...o,children:y.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:c,"data-expanded":s.opened?!0:void 0})})});TD.displayName="@mantine/core/MenuTarget";const Yte={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Qe(t){const e=K("Menu",Yte,t),{children:n,onOpen:r,onClose:o,opened:s,defaultOpened:i,trapFocus:a,onChange:l,closeOnItemClick:c,loop:d,closeOnEscape:u,trigger:h,openDelay:f,closeDelay:p,classNames:g,styles:b,unstyled:v,variant:x,vars:w,menuItemTabIndex:k,keepMounted:C,withInitialFocusPlaceholder:S,...T}=e,E=ke({name:"Menu",classes:sl,props:e,classNames:g,styles:b,unstyled:v}),[M,{setHovered:R,resetHovered:I}]=xX(),[L,$]=el({value:s,defaultValue:i,finalValue:!1,onChange:l}),[F,z]=y.useState(!1),J=()=>{$(!1),z(!1),L&&(o==null||o())},P=()=>{$(!0),!L&&(r==null||r())},B=()=>{L?J():P()},{openDropdown:H,closeDropdown:Y}=Ete({open:P,close:J,closeDelay:p,openDelay:f}),G=He=>wX("[data-menu-item]","[data-menu-dropdown]",He),{resolvedClassNames:X,resolvedStyles:pe}=zp({classNames:g,styles:b,props:e});return Ms(()=>{I()},[L]),m.jsx(Wte,{value:{getStyles:E,opened:L,toggleDropdown:B,getItemIndex:G,hovered:M,setHovered:R,openedViaClick:F,setOpenedViaClick:z,closeOnItemClick:c,closeDropdown:h==="click"?J:Y,openDropdown:h==="click"?P:H,closeDropdownImmediately:J,loop:d,trigger:h,unstyled:v,menuItemTabIndex:k,withInitialFocusPlaceholder:S},children:m.jsx(Bs,{...T,opened:L,onChange:B,defaultOpened:i,trapFocus:C?!1:a,closeOnEscape:u,__staticSelector:"Menu",classNames:X,styles:pe,unstyled:v,variant:x,keepMounted:C,children:n})})}Qe.extend=t=>t;Qe.withProps=qQ(Qe);Qe.classes=sl;Qe.displayName="@mantine/core/Menu";Qe.Item=Kv;Qe.Label=Zv;Qe.Dropdown=qv;Qe.Target=TD;Qe.Divider=Gv;const Xte={duration:100,transition:"fade"};function Qte(t,e){return{...Xte,...e,...t}}function ene({offset:t,position:e,defaultOpened:n}){const[r,o]=y.useState(n),s=y.useRef(null),{x:i,y:a,elements:l,refs:c,update:d,placement:u}=Qa({placement:e,middleware:[Pi({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=u.includes("right")?t:e.includes("left")?t*-1:0,f=u.includes("bottom")?t:e.includes("top")?t*-1:0,p=y.useCallback(({clientX:g,clientY:b})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:g,y:b,left:g+h,top:b+f,right:g,bottom:b}}})},[l.reference]);return y.useEffect(()=>{if(c.floating.current){const g=s.current;g.addEventListener("mousemove",p);const b=Wu(c.floating.current);return b.forEach(v=>{v.addEventListener("scroll",d)}),()=>{g.removeEventListener("mousemove",p),b.forEach(v=>{v.removeEventListener("scroll",d)})}}},[l.reference,c.floating.current,d,p,r]),{handleMouseMove:p,x:i,y:a,opened:r,setOpened:o,boundaryRef:s,floating:c.setFloating}}var tm={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const tne={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Ld("popover")},nne=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:$t(e),"--tooltip-bg":n?Fr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Jv=Ce((t,e)=>{const n=K("TooltipFloating",tne,t),{children:r,refProp:o,withinPortal:s,style:i,className:a,classNames:l,styles:c,unstyled:d,radius:u,color:h,label:f,offset:p,position:g,multiline:b,zIndex:v,disabled:x,defaultOpened:w,variant:k,vars:C,portalProps:S,...T}=n,E=En(),M=ke({name:"TooltipFloating",props:n,classes:tm,className:a,style:i,classNames:l,styles:c,unstyled:d,rootSelector:"tooltip",vars:C,varsResolver:nne}),{handleMouseMove:R,x:I,y:L,opened:$,boundaryRef:F,floating:z,setOpened:J}=ene({offset:p,position:g,defaultOpened:w});if(!Od(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const P=Lo(F,wv(r),e),B=r.props,H=G=>{var X;(X=B.onMouseEnter)==null||X.call(B,G),R(G),J(!0)},Y=G=>{var X;(X=B.onMouseLeave)==null||X.call(B,G),J(!1)};return m.jsxs(m.Fragment,{children:[m.jsx(Hd,{...S,withinPortal:s,children:m.jsx(oe,{...T,...M("tooltip",{style:{...qN(i,E),zIndex:v,display:!x&&$?"block":"none",top:(L&&Math.round(L))??"",left:(I&&Math.round(I))??""}}),variant:k,ref:z,mod:{multiline:b},children:f})}),y.cloneElement(r,{...B,[o]:P,onMouseEnter:H,onMouseLeave:Y})]})});Jv.classes=tm;Jv.displayName="@mantine/core/TooltipFloating";const ED=y.createContext(!1),rne=ED.Provider,one=()=>y.useContext(ED),sne={openDelay:0,closeDelay:0};function Yv(t){const{openDelay:e,closeDelay:n,children:r}=K("TooltipGroup",sne,t);return m.jsx(rne,{value:!0,children:m.jsx(qK,{delay:{open:e,close:n},children:r})})}Yv.displayName="@mantine/core/TooltipGroup";Yv.extend=t=>t;function ine(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function ane(t){const e=ine(t.middlewares),n=[Wr(t.offset)];return e.shift&&n.push(Pi(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?ar():ar(e.flip)),n.push(kE({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?Gl():Gl(e.inline)):t.inline&&n.push(Gl()),n}function lne(t){var S,T,E;const[e,n]=y.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,s=one(),i=Bd(),a=y.useCallback(M=>{n(M),M&&x(i)},[i]),{x:l,y:c,context:d,refs:u,update:h,placement:f,middlewareData:{arrow:{x:p,y:g}={}}}=Qa({strategy:t.strategy,placement:t.position,open:o,onOpenChange:a,middleware:ane(t)}),{delay:b,currentId:v,setCurrentId:x}=KK(d,{id:i}),{getReferenceProps:w,getFloatingProps:k}=qI([WK(d,{enabled:(S=t.events)==null?void 0:S.hover,delay:s?b:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((T=t.events)!=null&&T.touch)}),iZ(d,{enabled:(E=t.events)==null?void 0:E.focus,visibleOnly:!0}),lZ(d,{role:"tooltip"}),GI(d,{enabled:typeof t.opened>"u"})]);aD({opened:o,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:u,update:h}}),Ms(()=>{var M;(M=t.onPositionChange)==null||M.call(t,f)},[f]);const C=o&&v&&v!==i;return{x:l,y:c,arrowX:p,arrowY:g,reference:u.setReference,floating:u.setFloating,getFloatingProps:k,getReferenceProps:w,isGroupPhase:C,opened:o,placement:f}}const y2={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Ld("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},cne=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:$t(e),"--tooltip-bg":n?Fr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),il=Ce((t,e)=>{const n=K("Tooltip",y2,t),{children:r,position:o,refProp:s,label:i,openDelay:a,closeDelay:l,onPositionChange:c,opened:d,defaultOpened:u,withinPortal:h,radius:f,color:p,classNames:g,styles:b,unstyled:v,style:x,className:w,withArrow:k,arrowSize:C,arrowOffset:S,arrowRadius:T,arrowPosition:E,offset:M,transitionProps:R,multiline:I,events:L,zIndex:$,disabled:F,positionDependencies:z,onClick:J,onMouseEnter:P,onMouseLeave:B,inline:H,variant:Y,keepMounted:G,vars:X,portalProps:pe,mod:He,floatingStrategy:qe,middlewares:ve,...Pe}=K("Tooltip",y2,n),{dir:Ke}=$d(),Be=y.useRef(null),ie=lne({position:tD(Ke,o),closeDelay:l,openDelay:a,onPositionChange:c,opened:d,defaultOpened:u,events:L,arrowRef:Be,arrowOffset:S,offset:typeof M=="number"?M+(k?C/2:0):M,positionDependencies:[...z,r],inline:H,strategy:qe,middlewares:ve}),Xt=ke({name:"Tooltip",props:n,classes:tm,className:w,style:x,classNames:g,styles:b,unstyled:v,rootSelector:"tooltip",vars:X,varsResolver:cne});if(!Od(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const At=Lo(ie.reference,wv(r),e),Qt=Qte(R,{duration:100,transition:"fade"}),Rt=r.props;return m.jsxs(m.Fragment,{children:[m.jsx(Hd,{...pe,withinPortal:h,children:m.jsx($i,{...Qt,keepMounted:G,mounted:!F&&!!ie.opened,duration:ie.isGroupPhase?10:Qt.duration,children:Mn=>m.jsxs(oe,{...Pe,"data-fixed":qe==="fixed"||void 0,variant:Y,mod:[{multiline:I},He],...ie.getFloatingProps({ref:ie.floating,className:Xt("tooltip").className,style:{...Xt("tooltip").style,...Mn,zIndex:$,top:ie.y??0,left:ie.x??0}}),children:[i,m.jsx(Av,{ref:Be,arrowX:ie.arrowX,arrowY:ie.arrowY,visible:k,position:ie.placement,arrowSize:C,arrowOffset:S,arrowRadius:T,arrowPosition:E,...Xt("arrow")})]})})}),y.cloneElement(r,ie.getReferenceProps({onClick:J,onMouseEnter:P,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:jo(w,Rt.className),...Rt,[s]:At}))]})});il.classes=tm;il.displayName="@mantine/core/Tooltip";il.Floating=Jv;il.Group=Yv;var MD={root:"m_18320242","skeleton-fade":"m_299c329c"};const dne={visible:!0,animate:!0},une=(t,{width:e,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":D(n),"--skeleton-width":D(o?n:e),"--skeleton-radius":o?"1000px":r===void 0?void 0:$t(r)}}),_f=Ce((t,e)=>{const n=K("Skeleton",dne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,width:c,height:d,circle:u,visible:h,radius:f,animate:p,mod:g,...b}=n,v=ke({name:"Skeleton",classes:MD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:une});return m.jsx(oe,{ref:e,...v("root"),mod:[{visible:h,animate:p},g],...b})});_f.classes=MD;_f.displayName="@mantine/core/Skeleton";var AD={root:"m_6d731127"};const hne={gap:"md",align:"stretch",justify:"flex-start"},fne=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":jd(e),"--stack-align":n,"--stack-justify":r}}),Ud=Ce((t,e)=>{const n=K("Stack",hne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,align:c,justify:d,gap:u,variant:h,...f}=n,p=ke({name:"Stack",props:n,classes:AD,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:fne});return m.jsx(oe,{ref:e,...p("root"),variant:h,...f})});Ud.classes=AD;Ud.displayName="@mantine/core/Stack";const[pne,Xv]=$p("Tabs component was not found in the tree");var Wd={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const mne={},Qv=Ce((t,e)=>{const n=K("TabsList",mne,t),{children:r,className:o,grow:s,justify:i,classNames:a,styles:l,style:c,mod:d,...u}=n,h=Xv();return m.jsx(oe,{...u,...h.getStyles("list",{className:o,style:c,classNames:a,styles:l,props:n,variant:h.variant}),ref:e,role:"tablist",variant:h.variant,mod:[{grow:s,orientation:h.orientation,placement:h.orientation==="vertical"&&h.placement,inverted:h.inverted},d],"aria-orientation":h.orientation,__vars:{"--tabs-justify":i},children:r})});Qv.classes=Wd;Qv.displayName="@mantine/core/TabsList";const gne={},ew=Ce((t,e)=>{const n=K("TabsPanel",gne,t),{children:r,className:o,value:s,classNames:i,styles:a,style:l,mod:c,keepMounted:d,...u}=n,h=Xv(),f=h.value===s,p=h.keepMounted||d||f?r:null;return m.jsx(oe,{...u,...h.getStyles("panel",{className:o,classNames:i,styles:a,style:[l,f?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:h.orientation},c],role:"tabpanel",id:h.getPanelId(s),"aria-labelledby":h.getTabId(s),children:p})});ew.classes=Wd;ew.displayName="@mantine/core/TabsPanel";const yne={},tw=Ce((t,e)=>{const n=K("TabsTab",yne,t),{className:r,children:o,rightSection:s,leftSection:i,value:a,onClick:l,onKeyDown:c,disabled:d,color:u,style:h,classNames:f,styles:p,vars:g,mod:b,tabIndex:v,...x}=n,w=En(),{dir:k}=$d(),C=Xv(),S=a===C.value,T=M=>{C.onChange(C.allowTabDeactivation&&a===C.value?null:a),l==null||l(M)},E={classNames:f,styles:p,props:n};return m.jsxs(Vi,{...x,...C.getStyles("tab",{className:r,style:h,variant:C.variant,...E}),disabled:d,unstyled:C.unstyled,variant:C.variant,mod:[{active:S,disabled:d,orientation:C.orientation,inverted:C.inverted,placement:C.orientation==="vertical"&&C.placement},b],ref:e,role:"tab",id:C.getTabId(a),"aria-selected":S,tabIndex:v!==void 0?v:S||C.value===null?0:-1,"aria-controls":C.getPanelId(a),onClick:T,__vars:{"--tabs-color":u?Fr(u,w):void 0},onKeyDown:RN({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:C.activateTabWithKeyboard,loop:C.loop,orientation:C.orientation||"horizontal",dir:k,onKeyDown:c}),children:[i&&m.jsx("span",{...C.getStyles("tabSection",E),"data-position":"left",children:i}),o&&m.jsx("span",{...C.getStyles("tabLabel",E),children:o}),s&&m.jsx("span",{...C.getStyles("tabSection",E),"data-position":"right",children:s})]})});tw.classes=Wd;tw.displayName="@mantine/core/TabsTab";const b2="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",bne={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},vne=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":$t(e),"--tabs-color":Fr(n,t),"--tabs-text-color":MQ(r,t)?$N({color:n,theme:t,autoContrast:r}):void 0}}),bo=Ce((t,e)=>{const n=K("Tabs",bne,t),{defaultValue:r,value:o,onChange:s,orientation:i,children:a,loop:l,id:c,activateTabWithKeyboard:d,allowTabDeactivation:u,variant:h,color:f,radius:p,inverted:g,placement:b,keepMounted:v,classNames:x,styles:w,unstyled:k,className:C,style:S,vars:T,autoContrast:E,mod:M,...R}=n,I=Bd(c),[L,$]=el({value:o,defaultValue:r,finalValue:null,onChange:s}),F=ke({name:"Tabs",props:n,classes:Wd,className:C,style:S,classNames:x,styles:w,unstyled:k,vars:T,varsResolver:vne});return m.jsx(pne,{value:{placement:b,value:L,orientation:i,id:I,loop:l,activateTabWithKeyboard:d,getTabId:WS(`${I}-tab`,b2),getPanelId:WS(`${I}-panel`,b2),onChange:$,allowTabDeactivation:u,variant:h,color:f,radius:p,inverted:g,keepMounted:v,unstyled:k,getStyles:F},children:m.jsx(oe,{ref:e,id:I,variant:h,mod:[{orientation:i,inverted:i==="horizontal"&&g,placement:i==="vertical"&&b},M],...F("root"),...R,children:a})})});bo.classes=Wd;bo.displayName="@mantine/core/Tabs";bo.Tab=tw;bo.Panel=ew;bo.List=Qv;const wne={},nm=Ce((t,e)=>{const n=K("TextInput",wne,t);return m.jsx(rl,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});nm.classes=rl.classes;nm.displayName="@mantine/core/TextInput";const RD=(t,e,n=!1)=>{const r=[];function o(s,i="--bn"){for(const a in s){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${i}-${l}`;typeof s[a]!="object"?(typeof s[a]=="number"&&(s[a]=`${s[a]}px`),n?e.style.removeProperty(c):e.style.setProperty(c,s[a].toString())):o(s[a],c)}}return o(t),r},v2=(t,e)=>RD(t,e),xne={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},kne=t=>RD(xne,t,!0),_D=t=>m.jsxs(Ud,{gap:0,className:"bn-tooltip",children:[m.jsx(zr,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&m.jsx(zr,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),$g=y.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:s,icon:i,isSelected:a,isDisabled:l,onClick:c,label:d,variant:u,...h}=t;he(h,!1);const[f,p]=y.useState(!1),g=r?m.jsx(vr,{"aria-label":d,className:n,onMouseDown:b=>{bb()&&b.currentTarget.focus()},onClick:b=>{p(!0),c==null||c(b)},onPointerLeave:()=>p(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:u==="compact"?"compact-xs":"xs",disabled:l||!1,ref:e,...h,children:r}):m.jsx(Hi,{className:n,"aria-label":d,onMouseDown:b=>{bb()&&b.currentTarget.focus()},onClick:b=>{p(!0),c==null||c(b)},onPointerLeave:()=>p(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:u==="compact"?20:30,disabled:l||!1,ref:e,...h,children:i});return o?m.jsx(il,{disabled:f,withinPortal:!1,label:m.jsx(_D,{mainTooltip:o,secondaryTooltip:s}),children:g}):g}),Cne=y.forwardRef((t,e)=>{const{className:n,text:r,icon:o,isSelected:s,mainTooltip:i,secondaryTooltip:a,onClick:l,onMouseEnter:c,...d}=t;he(d,!1);const[u,h]=y.useState(!1),f=m.jsxs(em,{className:n,checked:s===!0,wrapperProps:{onMouseEnter:c,onMouseLeave:()=>h(!1),onClick:p=>{h(!0),l==null||l(p)}},variant:"light",icon:null,ref:e,children:[m.jsx("span",{children:o}),m.jsx("span",{children:r})]});return!i||u?f:m.jsx(il,{refProp:"rootRef",withinPortal:!1,label:m.jsx(_D,{mainTooltip:i,secondaryTooltip:a}),children:f})}),Sne=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Tt,{className:n,ref:e,children:r})}),Tne=y.forwardRef((t,e)=>{const{className:n,children:r,headerText:o,selected:s,onFocus:i,onBlur:a,tabIndex:l,...c}=t;he(c,!1);const d=y.useRef(null);return y.useEffect(()=>{var u;s&&((u=d.current)==null||u.scrollIntoView({behavior:"smooth",block:"center"}))},[s]),m.jsxs(Fd,{className:je(n,s?"selected":""),onFocus:i,onBlur:a,tabIndex:l,ref:pv([e,d]),children:[o&&m.jsx(zr,{className:"bn-header-text",children:o}),r]})}),Ene=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(Fd.Section,{className:n,ref:e,children:r})}),Mne=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(Fv,{className:n,label:m.jsx(zr,{children:r}),ref:e})}),Ane=y.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:o,...s}=t;return he(s,!1),n==="loading"?m.jsxs(Tt,{children:[m.jsx(_f,{height:24,width:24}),m.jsx("div",{children:m.jsx(_f,{height:12,width:100})})]}):m.jsxs(Tt,{children:[m.jsx(Xp,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),m.jsxs(zr,{fz:"sm",fw:"bold",children:[n.username,m.jsxs(zr,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&"(edited)"]})]})]})}),Rne=y.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:o,timeString:s,edited:i,actions:a,children:l,...c}=t,{hovered:d,ref:u}=LX(),{focused:h,ref:f}=ON(),p=pv([e,u]);return he(c,!1),m.jsxs(Tt,{pos:"relative",ref:p,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&d||h)?m.jsx(Tt,{ref:f,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,m.jsx(Ane,{...t}),l]})}),_ne=y.forwardRef((t,e)=>{const{className:n,autoFocus:r,onFocus:o,onBlur:s,editor:i,editable:a,...l}=t;return he(l,!1),m.jsx(OD,{autoFocus:r,className:n,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:e,onFocus:o,onBlur:s,children:m.jsx(bN,{formattingToolbar:Ine})})}),Ine=()=>{const t=gN([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return m.jsx(yN,{blockTypeSelectItems:[],children:t})},Nne=y.forwardRef((t,e)=>{const{className:n,name:r,label:o,variant:s,icon:i,value:a,autoFocus:l,placeholder:c,disabled:d,onKeyDown:u,onChange:h,onSubmit:f,autoComplete:p,rightSection:g,...b}=t;return he(b),m.jsx(nm,{size:"xs",className:je(n||"",s==="large"?"bn-mt-input-large":""),ref:e,name:r,label:o,leftSection:i,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:g,placeholder:c,disabled:d,onKeyDown:u,onChange:h,onSubmit:f,autoComplete:p})});var ID={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},w2=N.createContext&&N.createContext(ID),Dne=["attr","size","title"];function Pne(t,e){if(t==null)return{};var n=One(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function One(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},If.apply(this,arguments)}function x2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Nf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x2(Object(n),!0).forEach(function(r){Lne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lne(t,e,n){return e=jne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jne(t){var e=Bne(t,"string");return typeof e=="symbol"?e:e+""}function Bne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ND(t){return t&&t.map((e,n)=>N.createElement(e.tag,Nf({key:n},e.attr),ND(e.child)))}function DD(t){return e=>N.createElement(Vne,If({attr:Nf({},t.attr)},e),ND(t.child))}function Vne(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=Pne(t,Dne),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),N.createElement("svg",If({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:Nf(Nf({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&N.createElement("title",null,s),t.children)};return w2!==void 0?N.createElement(w2.Consumer,null,n=>e(n)):e(ID)}function $ne(t){return DD({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function Hne(t){return DD({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}const PD=y.createContext(void 0),Fne=y.forwardRef((t,e)=>{const{children:n,onOpenChange:r,position:o,sub:s,...i}=t;he(i);const[a,l]=y.useState(!1),c=y.useRef(null),d=y.useRef(),u=y.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{l(!1)},250)},[]),h=y.useCallback(()=>{d.current&&clearTimeout(d.current),l(!0)},[]);return m.jsx(PD.Provider,{value:{onMenuMouseOver:h,onMenuMouseLeave:u},children:m.jsx(Qe.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:Vd(e,c),onMouseOver:h,onMouseLeave:u,children:m.jsx(Qe,{portalProps:{target:c.current?c.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})}),zne=t=>{const{children:e,onOpenChange:n,position:r,sub:o,...s}=t;return he(s),o?m.jsx(Fne,{...t}):m.jsx(Qe,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e})},Une=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,checked:s,subTrigger:i,onClick:a,...l}=t;return he(l,!1),i?m.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation()},ref:e,...l,children:[r,m.jsx(Hne,{size:15})]}):m.jsx(Qe.Item,{className:n,ref:e,leftSection:o,rightSection:s?m.jsx(Lv,{size:10}):s===!1?m.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),Wne=t=>{const{children:e,sub:n,...r}=t;return he(r),m.jsx(Qe.Target,{children:e})},Gne=y.forwardRef((t,e)=>{const{className:n,children:r,sub:o,...s}=t;he(s);const i=y.useContext(PD);return m.jsx(Qe.Dropdown,{className:n,ref:e,onMouseOver:i==null?void 0:i.onMenuMouseOver,onMouseLeave:i==null?void 0:i.onMenuMouseLeave,children:r})}),qne=y.forwardRef((t,e)=>{const{className:n,...r}=t;return he(r),m.jsx(Qe.Divider,{className:n,ref:e})}),Kne=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Qe.Label,{className:n,ref:e,children:r})}),Zne=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...d}=t;return he(d,!1),o?m.jsx(Hi,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):m.jsx(vr,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),Jne=y.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:s,setOpenTab:i,loading:a,...l}=t;return he(l),m.jsx(Tt,{className:n,ref:e,children:m.jsxs(bo,{value:s,defaultValue:o,onChange:i,children:[a&&m.jsx(Wv,{visible:a}),m.jsx(bo.List,{children:r.map(c=>m.jsx(bo.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>m.jsx(bo.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),Yne=y.forwardRef((t,e)=>{const{className:n,children:r,onClick:o,label:s,...i}=t;return he(i),m.jsx(vr,{size:"xs","aria-label":s,className:n,ref:e,onClick:o,...i,children:r})}),Xne=y.forwardRef((t,e)=>{const{className:n,accept:r,value:o,placeholder:s,onChange:i,...a}=t;return he(a),m.jsx(Tte,{size:"xs",className:n,ref:e,accept:r,value:o,placeholder:s,onChange:i,...a})}),Qne=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx("div",{className:n,ref:e,children:r})}),ere=y.forwardRef((t,e)=>{const{className:n,value:r,placeholder:o,onKeyDown:s,onChange:i,...a}=t;return he(a),m.jsx(nm,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:o,onKeyDown:s,onChange:i})}),tre=t=>{const{opened:e,position:n,children:r,...o}=t;return he(o),m.jsx(Bs,{withinPortal:!1,opened:e,position:n,children:r})},nre=t=>{const{children:e,...n}=t;return he(n),m.jsx(_v,{children:e})},rre=y.forwardRef((t,e)=>{const{className:n,children:r,variant:o,...s}=t;return he(s),m.jsx(Wp,{className:n,ref:e,children:r})}),ore=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(Tt,{align:"center",gap:0,className:n,ref:e,...o,children:r})}),sre=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...d}=t;return he(d,!1),o?m.jsx(Hi,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):m.jsx(vr,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),ire=y.forwardRef((t,e)=>{const{className:n,children:r,id:o,...s}=t;return he(s),m.jsx(Ud,{gap:0,className:n,ref:e,id:o,role:"listbox",children:r})}),are=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Tt,{className:n,ref:e,children:m.jsx(Tt,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),lre=y.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;he(a);const l=y.useRef(null);return y.useEffect(()=>{if(!l.current||!r)return;const c=EN(l.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),m.jsxs(Tt,{gap:0,className:n,ref:Vd(e,l),id:i,role:"option",onMouseDown:c=>c.preventDefault(),onClick:o,"aria-selected":r||void 0,children:[s.icon&&m.jsx(Tt,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:s.icon}),m.jsxs(Ud,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[m.jsx(zr,{className:"bn-mt-suggestion-menu-item-title",children:s.title}),m.jsx(zr,{className:"bn-mt-suggestion-menu-item-subtitle",children:s.subtext})]}),s.badge&&m.jsx(Tt,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:m.jsx(Bv,{size:"xs",children:s.badge})})]})}),cre=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Tt,{className:n,ref:e,children:r})}),dre=y.forwardRef((t,e)=>{const{className:n,...r}=t;return he(r),m.jsx(Vs,{className:n,type:"dots",size:16,ref:e})}),ure=y.forwardRef((t,e)=>{const{className:n,children:r,id:o,columns:s,...i}=t;return he(i),m.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${s}, 1fr)`},ref:e,id:o,role:"grid",children:r})}),hre=y.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return he(s),m.jsx(Tt,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:m.jsx(Tt,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),fre=y.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;he(a);const l=y.useRef(null);return y.useEffect(()=>{if(!l.current||!r)return;const c=EN(l.current,document.querySelector(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),m.jsx("div",{className:n,ref:Vd(e,l),id:i,role:"option",onClick:o,"aria-selected":r||void 0,children:s.icon})}),pre=y.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return he(s),m.jsx(Vs,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:e})}),mre=y.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:o,onClick:s,...i}=t;return he(i,!1),m.jsx(vr,{className:r,ref:e,onMouseDown:o,onClick:s,...i,children:n})}),gre=y.forwardRef((t,e)=>{const{className:n,children:r,draggable:o,onDragStart:s,onDragEnd:i,style:a,label:l,...c}=t;return he(c,!1),m.jsx(vr,{className:n,ref:e,"aria-label":l,draggable:o,onDragStart:s,onDragEnd:i,style:a,...c,children:r})}),Hg=y.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:s,variant:i,...a}=t;he(a);const{ref:l,focused:c}=ON(),d=PN(c),u=Vd(e,l,d);return m.jsx(Ov,{className:n,ref:u,role:"toolbar",onMouseEnter:o,onMouseLeave:s,gap:i==="action-toolbar"?2:void 0,children:r})}),Fg=y.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:o,...s}=t;he(s);const i=r.filter(a=>a.isSelected)[0];return i?m.jsxs(Qe,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[m.jsx(Qe.Target,{children:m.jsx(vr,{onMouseDown:a=>{bb()&&a.currentTarget.focus()},leftSection:i.icon,rightSection:m.jsx($ne,{}),size:"xs",variant:"subtle",disabled:o,children:i.text})}),m.jsx(Qe.Dropdown,{className:n,ref:e,children:r.map(a=>m.jsx(Qe.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?m.jsx(Lv,{size:10,className:"bn-tick-icon"}):m.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),yre={FormattingToolbar:{Root:Hg,Button:$g,Select:Fg},FilePanel:{Root:Jne,Button:Yne,FileInput:Xne,TabPanel:Qne,TextInput:ere},GridSuggestionMenu:{Root:ure,Item:fre,EmptyItem:hre,Loader:pre},LinkToolbar:{Root:Hg,Button:$g,Select:Fg},SideMenu:{Root:ore,Button:sre},SuggestionMenu:{Root:ire,Item:lre,EmptyItem:are,Label:cre,Loader:dre},TableHandle:{Root:gre,ExtendButton:mre},Generic:{Badge:{Root:Cne,Group:Sne},Form:{Root:t=>m.jsx("div",{children:t.children}),TextInput:Nne},Menu:{Root:zne,Trigger:Wne,Dropdown:Gne,Divider:qne,Label:Kne,Item:Une,Button:Zne},Popover:{Root:tre,Trigger:nre,Content:rre},Toolbar:{Root:Hg,Button:$g,Select:Fg}},Comments:{Comment:Rne,Editor:_ne,Card:Tne,CardSection:Ene,ExpandSectionsPrompt:Mne}},bre={activeClassName:""},OD=t=>{const{className:e,theme:n,...r}=t,o=Xr(),s=kN(),i=(o==null?void 0:o.colorSchemePreference)||s,a=y.useCallback(c=>{if(c&&(kne(c),typeof n=="object")){if("light"in n&&"dark"in n){v2(n[i==="dark"?"dark":"light"],c);return}v2(n,c);return}},[i,n]),l=typeof n=="string"?n:i!=="no-preference"?i:"light";return m.jsx(QI.Provider,{value:yre,children:m.jsx(zN,{theme:bre,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:m.jsx(GY,{"data-mantine-color-scheme":l,className:je("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})},vre="_container_1bxwl_2",wre="_editIcon_1bxwl_9",xre="_saveButton_1bxwl_16",kre="_editor_1bxwl_23",Cre="_withoutBorder_1bxwl_28",Qi={container:vre,editIcon:wre,saveButton:xre,editor:kre,withoutBorder:Cre};function Df({value:t,setValue:e,readOnly:n,classes:r,showEditIcon:o,onClickEdit:s,onClickSave:i,shouldShowSaveButton:a,withoutBorder:l}){const c=Op({domAttributes:{editor:{class:Qi.editor}},initialContent:t}),{theme:d}=np();return m.jsxs("div",{className:le(Qi.container,r==null?void 0:r.container,l&&Qi.withoutBorder),children:[n&&o&&m.jsx(Q,{onClick:s,className:Qi.editIcon,icon:"solar:pen-new-square-outline",width:24,height:24}),m.jsx(OD,{className:Qi.editor,editable:!n,theme:d===bi.Dark?"dark":"light",editor:c,onChange:()=>e(c.document)}),a&&!n&&m.jsx(St,{onClick:i,className:Qi.saveButton,children:"Save"})]})}const Sre="_input_1uklv_2",Tre="_unit_1uklv_8",Ere="_footerCenter_1uklv_13",Mre="_submitBtn_1uklv_19",Pu={input:Sre,unit:Tre,footerCenter:Ere,submitBtn:Mre},Are="checklist_record",Gd=()=>{const[t,e]=cr(Are,{});return{addChecklistRecord:s=>{s.records.length&&e(i=>({...i,[s.checklistTemplateId]:[...i[s.checklistTemplateId]||[],...s.records.map(a=>({id:rn(),...a,checklistId:s.checklistId,checklistTemplateId:s.checklistTemplateId,createdAt:s.createdAt}))]}))},getChecklistRecords:(s,{rangeDate:i,type:a="date",fieldIds:l,sortBy:c,sortDirection:d="asc"})=>{const u=t[s]||[];let h=u;if(i&&(h=u.filter(p=>{const g=new Date(p.createdAt);return g>=new Date(i.from)&&g<=new Date(i.to)})),l&&l.length&&(h=h.filter(p=>l.includes(p.fieldId))),c)switch(c){case"createdAt":{h=h.sort((p,g)=>{const b=new Date(p.createdAt),v=new Date(g.createdAt);return b.getTime()-v.getTime()});break}}return d==="desc"&&(h=h.reverse()),h.reduce((p,g)=>{const b=new Date(g.createdAt),v=a==="date"?b.toISOString().split("T")[0]:b.toISOString().split("T");return p[v]||(p[v]=[]),p[v].push(g),p},{})},updateChecklistRecord:(s,{value:i,checklistTemplateId:a})=>{e(l=>{const d=(l[a]||[]).map(u=>u.id===s?{...u,value:i}:u);return{...l,[a]:d}})},deleteChecklistRecord:(s,{checklistTemplateId:i})=>{e(a=>{const c=(a[i]||[]).filter(d=>d.id!==s);return{...a,[i]:c}})}}},Rre=({fields:t,checklistTemplate:e,checklist:n,currentDay:r,onSubmit:o})=>{const[s,i]=N.useState(t.reduce((l,{id:c})=>({...l,[c]:void 0}),{})),{addChecklistRecord:a}=Gd();return m.jsxs(m.Fragment,{children:[t.map(l=>{switch(l==null?void 0:l.type){case"metric":return m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:l.icon}),title:l.title,rightComponent:m.jsxs(m.Fragment,{children:[m.jsx(mo,{onChange:c=>{i({...s,[l.id]:Number(c.target.value)})},border:"dash",className:Pu.input,type:"number"}),m.jsx(ae.Text,{className:Pu.unit,children:l.unit})]})});case"note":return m.jsxs(m.Fragment,{children:[m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:l.icon}),title:l.title}),m.jsx(Df,{withoutBorder:!0,value:s==null?void 0:s[l.id],setValue:c=>{i({...s,[l.id]:c})}})]})}}),m.jsx("div",{className:Pu.footerCenter,children:m.jsx(St,{size:"lg",className:Pu.submitBtn,onClick:()=>{if(e){const l=new Date,c=rL(sL(iL(oL(new Date(r),l.getMilliseconds()),l.getSeconds()),l.getMinutes()),l.getHours());a({checklistId:n.id,checklistTemplateId:e.id,createdAt:c.toISOString(),records:Object.entries(s).map(([d,u])=>({fieldId:d,value:u}))}),o==null||o()}},children:"Submit"})})]})},_re="_iconEdit_1c1sv_6",Ire="_icon_1c1sv_6",Nre="_successIcon_1c1sv_14",Dre="_input_1c1sv_18",Pre="_editButton_1c1sv_24",Ore="_editIcon_1c1sv_30",Lre="_highlight_1c1sv_34",Zn={iconEdit:_re,icon:Ire,successIcon:Nre,input:Dre,editButton:Pre,editIcon:Ore,highlight:Lre},jre=({record:t,fields:e,setRecord:n})=>{const{updateChecklistRecord:r}=Gd(),o=e.find(l=>l.id===t.fieldId);if(!o)return;const[s,i]=N.useState(),a=N.useRef(null);switch(o.type){case"metric":return m.jsx(m.Fragment,{children:m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:o.icon}),title:o.title,rightComponent:(s==null?void 0:s.id)===t.id?m.jsxs(m.Fragment,{children:[m.jsx(mo,{value:s.value,ref:a,autoFocus:!0,border:"dash",className:Zn.input,onChange:l=>{i({...t,value:Number(l.target.value)})}}),m.jsx(Q,{width:24,className:Zn.icon,onClick:()=>{i(void 0)},icon:"proicons:cancel"}),m.jsx(Q,{width:24,className:Zn.icon,onClick:()=>{var l,c;r(t.id,{checklistTemplateId:t.checklistTemplateId,value:Number((l=a.current)==null?void 0:l.value)}),n({...t,value:Number((c=a.current)==null?void 0:c.value)}),i(void 0)},icon:"material-symbols:check"})]}):m.jsxs(m.Fragment,{children:[m.jsxs(ae.Text,{children:[" ",t.value]}),m.jsx(Q,{width:24,className:Zn.iconEdit,onClick:()=>{i(t),setTimeout(()=>{var l;return(l=a==null?void 0:a.current)==null?void 0:l.focus()},100)},icon:"solar:pen-2-line-duotone"})]})})});case"note":default:return m.jsxs("div",{children:[m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:o.icon}),title:o.title,rightComponent:(s==null?void 0:s.id)!==t.id?m.jsx(m.Fragment,{children:m.jsxs(St,{type:"dash",size:"sm",className:Zn.editButton,onClick:()=>{i(t)},children:[m.jsx(Q,{icon:"solar:pen-new-square-linear",className:Zn.editIcon}),"Edit"]})}):m.jsxs(m.Fragment,{children:[m.jsxs(St,{type:"dash",size:"sm",className:Zn.editButton,onClick:()=>{i(void 0)},children:[m.jsx(Q,{width:12,className:Zn.icon,icon:"proicons:cancel"}),"Cancel"]}),m.jsxs(St,{type:"dash",size:"sm",className:le(Zn.editButton,Zn.highlight),onClick:()=>{r(t.id,{checklistTemplateId:t.checklistTemplateId,value:s.value}),n({...t,value:s.value}),i(void 0)},children:[m.jsx(Q,{width:12,className:Zn.successIcon,icon:"material-symbols:check"}),"Save"]})]})}),(s==null?void 0:s.id)===t.id&&m.jsx(Df,{withoutBorder:!0,value:(s==null?void 0:s.id)!==t.id?t.value:s.value,setValue:l=>{i({...t,value:l})}}),(s==null?void 0:s.id)!==t.id&&m.jsx(Df,{value:t.value,withoutBorder:!0,readOnly:!0})]})}},Bre="_recordSection_icmxe_2",Vre="_hr_icmxe_6",$re="_hrSide_icmxe_13",Hre="_hrContainer_icmxe_18",Fre="_dateText_icmxe_28",zre="_deleteButton_icmxe_36",Ure="_deleteIcon_icmxe_43",Jn={recordSection:Bre,hr:Vre,hrSide:$re,hrContainer:Hre,dateText:Fre,deleteButton:zre,deleteIcon:Ure},Wre=({checklistTemplate:t,fields:e})=>{const{getChecklistRecords:n,deleteChecklistRecord:r}=Gd(),[o,s]=N.useState({});return N.useEffect(()=>{const i=n(t.id,{rangeDate:{from:FE(new Date).toISOString(),to:HE(new Date).toISOString()},type:"time",fieldIds:e.map(a=>a.id),sortDirection:"desc"});s(i)},[]),m.jsx("div",{className:Jn.recordSection,children:Object.entries(o).map(([i,a],l)=>m.jsxs("div",{children:[m.jsxs("div",{className:Jn.hrContainer,children:[m.jsx("div",{className:le(Jn.hrSide,l===0&&Jn.noHr)}),m.jsx(ae.Text,{className:Jn.dateText,children:new Date(i).toLocaleString()}),m.jsx("div",{className:le(Jn.hr,l===0&&Jn.noHr)}),m.jsxs(St,{type:"dash",size:"sm",className:Jn.deleteButton,onClick:()=>{a.forEach(d=>{r(d.id,{checklistTemplateId:d.checklistTemplateId})});const c={...o};delete c[i],s(c)},children:[m.jsx(Q,{icon:"solar:trash-bin-trash-outline",className:Jn.deleteIcon}),"Delete"]}),m.jsx("div",{className:le(Jn.hrSide,l===0&&Jn.noHr)})]}),a.map(c=>m.jsx(jre,{record:c,setRecord:d=>{s({...o,[i]:o[i].map(u=>u.id===d.id?d:u)})},fields:e}))]}))})},Gre="_container_1i269_2",qre="_iconSuccess_1i269_7",Kre="_emptyContainer_1i269_13",Zre="_iconEmpty_1i269_22",Ou={container:Gre,iconSuccess:qre,emptyContainer:Kre,iconEmpty:Zre},Jre=t=>t.reduce((e,n)=>e+n,0),Yre=({checklist:t,checklistTemplate:e,fields:n,currentDay:r})=>{const o=Bt(),{getChecklistRecords:s}=Gd(),[i,a]=N.useState([]),l=()=>{const c=s(e.id,{rangeDate:{from:new Date(new Date(r).setHours(0,0,0,0)).toISOString(),to:new Date(new Date(r).setHours(23,59,59,999)).toISOString()},fieldIds:n.map(d=>d.id),sortDirection:"desc"});return a(Object.values(c)),c};return N.useEffect(()=>{l()},[]),i.length===0?m.jsxs("div",{className:Ou.emptyContainer,children:[m.jsx(Q,{width:80,icon:"clarity:sad-face-line",className:Ou.iconEmpty}),m.jsx(ae.Title,{level:3,noMargin:!0,children:o.formatMessage({id:"ChecklistFieldGroupView.noRecord",defaultMessage:"No record found"})}),m.jsx(ae.Paragraph,{noMargin:!0,children:o.formatMessage({id:"ChecklistFieldGroupView.noRecordDescription",defaultMessage:"Submit your record to keep track of your progress"})})]}):m.jsxs("div",{className:Ou.container,children:[m.jsx(Q,{width:100,color:"rgba(16,154,0,0.16)",icon:"ion:checkmark-done-circle-outline",className:Ou.iconSuccess}),n.map(c=>{if(c.type==="metric"){const d=Object.values(i).flat().filter(h=>h.fieldId===c.id),u=Jre(d.map(h=>h.value));return m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:c.icon}),title:c.title,rightComponent:m.jsx(m.Fragment,{children:m.jsxs(ae.Text,{children:[u," ",c.unit]})})})}else{const d=Object.values(i).flat().find(u=>u.fieldId===c.id);return d?m.jsxs(m.Fragment,{children:[m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:c.icon}),title:c.title}),m.jsx(Df,{value:d.value,readOnly:!0,withoutBorder:!0})]}):null}})]})},Xre=t=>t.reduce((e,n)=>e+n,0),Qre=({checklistTemplateId:t,fields:e})=>{const{theme:n}=np(),{getChecklistRecords:r}=Gd(),[o,s]=N.useState({});N.useEffect(()=>{const l=r(t,{rangeDate:{from:FE(new Date).toISOString(),to:HE(new Date).toISOString()},sortBy:"createdAt",fieldIds:e.filter(h=>h.type==="metric").map(h=>h.id)}),c=Object.keys(l),d=Object.values(l),u=e.reduce((h,f,p)=>{const g=d.map(b=>{const v=b.filter(x=>x.fieldId===f.id).map(x=>x.value);return Xre(v)});return{...h,[f.id]:g}},{});s({categories:c,seriesValues:u})},[]);const i=e.map(l=>{var c;return{name:l.title,data:(c=o==null?void 0:o.seriesValues)==null?void 0:c[l.id]}}),a={...n===bi.Dark?{theme:{mode:"dark"},chart:{background:"#162033"}}:{},xaxis:{categories:o.categories}};return{series:i,options:a}};var eoe=G3();const LD=q3(eoe),toe=({checklistTemplateId:t,fields:e})=>{const{options:n,series:r}=Qre({checklistTemplateId:t,fields:e});return m.jsx(LD,{options:n,series:r,type:"bar"})},noe=({checklist:t,checklistTemplate:e,fields:n,currentDay:r})=>{const o=nL(r),{updateChecklist:s}=tp(),[i,a]=N.useState(e.fieldGroups.reduce((d,u)=>({...d,[u.id]:Ft.Home}),{})),l=d=>({[Ft.Home]:`${o?"Today":new Date(r).toLocaleDateString()}`,[Ft.History]:"Record History",[Ft.Add]:"Add Record",[Ft.Metric]:"Metric"})[i[d.id]],c=({fieldGroup:d,fieldDetails:u})=>{switch(i[d.id]){case Ft.Home:return m.jsx(Yre,{fields:u,checklistTemplate:e,checklist:t,currentDay:r});case Ft.History:return m.jsx(Wre,{fields:u,checklistTemplate:e});case Ft.Metric:return m.jsx(toe,{fields:n,checklistTemplateId:e.id});case Ft.Add:return m.jsx(Rre,{fields:u,checklistTemplate:e,checklist:t,currentDay:r,onSubmit:()=>{a({...i,[d.id]:Ft.Home}),s({id:t.id,completedAt:new Date().toISOString()})}})}};return e.fieldGroups.map(d=>{const u=d.fields.map(h=>n.find(f=>f.id===h));return m.jsxs(jr,{className:n9.cardContainer,children:[m.jsx(e9,{activeTab:i[d.id],onClickHome:()=>a({...i,[d.id]:Ft.Home}),onClickHistory:()=>a({...i,[d.id]:Ft.History}),onClickAdd:()=>a({...i,[d.id]:Ft.Add}),onClickMetric:()=>a({...i,[d.id]:Ft.Metric}),renderTitle:()=>l(d)}),c({fieldGroup:d,fieldDetails:u})]})})},roe=()=>{const{id:t}=NE(),[e,n]=p5(),{getChecklistTemplate:r}=vs(),{addChecklist:o,getChecklistDetail:s}=tp(),{getRecordFields:i}=I0(),a=e.get("checklistId"),l=e.get("currentDay"),[c,d]=N.useState(),[u,h]=N.useState(),[f,p]=N.useState([]);if(!t||!l)return;N.useEffect(()=>{var x;const b=r(t);if(d(b),!b)return;const v=i((x=b.fieldGroups)==null?void 0:x.map(w=>w.fields).flat());if(p(v),a){const w=s(a);h(w)}else{const w=o({title:b.title,checklistTemplateId:t,startedAt:new Date(l).toISOString(),endedAt:new Date(l).toISOString()});n({...Object.fromEntries(e),checklistId:w.id}),h(w)}},[a]);const g=yr();return!a||!u||!c?null:m.jsxs(m.Fragment,{children:[m.jsx(vd,{renderLeftComponent:()=>m.jsx("div",{children:c==null?void 0:c.title}),renderRightComponent:()=>m.jsx(Q,{onClick:()=>{g(`/edit-checklist/${t}`)},width:24,icon:"solar:pen-new-square-linear"}),onClickLeftButton:()=>g("/")}),m.jsx(noe,{checklist:u,checklistTemplate:c,fields:f,currentDay:l})]})},ooe="_input_1t6d7_1",soe={input:ooe},ioe=t=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},jD=({value:t,onChange:e,className:n})=>m.jsx("input",{className:le(soe.input,n),type:"date",value:t?ioe(new Date(t)):"",onChange:e}),aoe="_container_1ew1v_1",loe="_lg_1ew1v_6",k2={container:aoe,lg:loe};function nw({size:t,className:e,disabled:n,...r}){return m.jsx("input",{className:le(k2.container,t==="lg"&&k2.lg,e),type:"checkbox",disabled:n,...r})}const coe="_container_a6kby_1",doe="_label_a6kby_7",uoe="_card_a6kby_16",hoe="_datePicker_a6kby_21",foe="_datePickerContainer_a6kby_27",poe="_checklistItem_a6kby_34",moe="_checklistBody_a6kby_40",goe="_checkbox_a6kby_45",yoe="_footer_a6kby_50",Yn={container:coe,label:doe,card:uoe,datePicker:hoe,datePickerContainer:foe,checklistItem:poe,checklistBody:moe,checkbox:goe,footer:yoe},boe=()=>{var d;const[t,e]=cr("user_new",!1),n=Bt(),{baby:r,setBaby:o,calculateStartDateFromDueDate:s}=lL(),{getRecommendChecklistTemplates:i,selectedChecklistTemplates:a,updateSelectedChecklistTemplate:l}=vs(),c=()=>{e(!1),window.location.reload()};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:Yn.container,children:[m.jsx(jr,{className:Yn.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:Yn.label,children:n.formatMessage({id:"PregnantIntro.label-enter-the-due-date",defaultMessage:"When's the little one's due date?"})}),m.jsx("div",{className:Yn.datePickerContainer,children:m.jsx(jD,{value:((d=r==null?void 0:r.dueDate)==null?void 0:d.split("T")[0])||new Date(new Date().getTime()+40*7*24*60*60*1e3).toISOString().split("T")[0],onChange:u=>o({...r,dueDate:u.target.value,startDate:s(u.target.value)}),className:Yn.datePicker})})]})}),m.jsx(jr,{className:Yn.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:Yn.label,children:n.formatMessage({id:"PregnantIntro.checklists",defaultMessage:"Pick the tasks you'd love to do every day!"})}),i().map(({id:u,title:h,avatar:f})=>m.jsxs("div",{className:Yn.checklistItem,children:[m.jsx(Q,{color:f.color||"#8A8A8A",width:32,height:32,icon:f.name}),m.jsx("p",{className:Yn.checklistBody,children:h}),m.jsx(nw,{checked:a.includes(u),onChange:p=>{const g=p.target.checked;l(g?[...a,u]:a.filter(b=>b!==u))},className:Yn.checkbox})]},u))]})})]}),m.jsx("div",{className:Yn.footer,onClick:c,children:m.jsx(St,{size:"lg",children:"Submit"})})]})},voe="_input_k71ix_2",woe={input:voe},xoe=({date:t,setDate:e})=>{const n=Bt();return m.jsx("div",{children:m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"solar:calendar-date-line-duotone"}),title:n.formatMessage({defaultMessage:"Start Day",id:"label-start-day.label"}),description:n.formatMessage({defaultMessage:"Select the first day",id:"label-start-day.description"}),rightComponent:m.jsx(jD,{value:t,onChange:r=>e(r.target.value),className:woe.input})})})};function koe({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#00000075",className:le(bd.icon,t),...e,children:m.jsx("g",{id:"done_24px",children:m.jsx("path",{id:"icon/action/done_24px",d:"M8.80004 15.905L5.30004 12.405C5.11519 12.2178 4.86309 12.1125 4.60004 12.1125C4.33699 12.1125 4.0849 12.2178 3.90004 12.405C3.51004 12.795 3.51004 13.415 3.90004 13.805L8.09004 17.995C8.48004 18.385 9.11004 18.385 9.50004 17.995L20.1 7.40499C20.49 7.01499 20.49 6.39499 20.1 6.00499C19.9152 5.81784 19.6631 5.71251 19.4 5.71251C19.137 5.71251 18.8849 5.81784 18.7 6.00499L8.80004 15.905Z"})})})}const Coe="_container_jx4ao_2",Soe="_button_jx4ao_11",Toe="_icon_jx4ao_19",Eoe="_activeIcon_jx4ao_25",Moe="_activeButton_jx4ao_29",_l={container:Coe,button:Soe,icon:Toe,activeIcon:Eoe,activeButton:Moe};function Aoe({options:t,values:e=[],setValues:n=()=>{}}){return m.jsx("div",{className:_l.container,children:t.map(r=>{const o=e.includes(r.value);return m.jsxs(St,{type:"ghost",className:le(_l.button,o&&_l.activeButton),onClick:()=>{n(o?e.filter(s=>s!==r.value):[...e,r.value])},children:[m.jsx(koe,{className:le(_l.icon,o&&_l.activeIcon)}),r.label]},`${r.label}-${r.value}`)})})}var rw=Kd(),ce=t=>qd(t,rw),ow=Kd();ce.write=t=>qd(t,ow);var rm=Kd();ce.onStart=t=>qd(t,rm);var sw=Kd();ce.onFrame=t=>qd(t,sw);var iw=Kd();ce.onFinish=t=>qd(t,iw);var Ca=[];ce.setTimeout=(t,e)=>{const n=ce.now()+e,r=()=>{const s=Ca.findIndex(i=>i.cancel==r);~s&&Ca.splice(s,1),ps-=~s?1:0},o={time:n,handler:t,cancel:r};return Ca.splice(BD(n),0,o),ps+=1,VD(),o};var BD=t=>~(~Ca.findIndex(e=>e.time>t)||~Ca.length);ce.cancel=t=>{rm.delete(t),sw.delete(t),iw.delete(t),rw.delete(t),ow.delete(t)};ce.sync=t=>{zb=!0,ce.batchedUpdates(t),zb=!1};ce.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...o){e=o,ce.onStart(n)}return r.handler=t,r.cancel=()=>{rm.delete(n),e=null},r};var aw=typeof window<"u"?window.requestAnimationFrame:()=>{};ce.use=t=>aw=t;ce.now=typeof performance<"u"?()=>performance.now():Date.now;ce.batchedUpdates=t=>t();ce.catch=console.error;ce.frameLoop="always";ce.advance=()=>{ce.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):HD()};var fs=-1,ps=0,zb=!1;function qd(t,e){zb?(e.delete(t),t(0)):(e.add(t),VD())}function VD(){fs<0&&(fs=0,ce.frameLoop!=="demand"&&aw($D))}function Roe(){fs=-1}function $D(){~fs&&(aw($D),ce.batchedUpdates(HD))}function HD(){const t=fs;fs=ce.now();const e=BD(fs);if(e&&(FD(Ca.splice(0,e),n=>n.handler()),ps-=e),!ps){Roe();return}rm.flush(),rw.flush(t?Math.min(64,fs-t):16.667),sw.flush(),ow.flush(),iw.flush()}function Kd(){let t=new Set,e=t;return{add(n){ps+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ps-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ps-=e.size,FD(e,r=>r(n)&&t.add(r)),ps+=t.size,e=t)}}}function FD(t,e){t.forEach(n=>{try{e(n)}catch(r){ce.catch(r)}})}var _oe=Object.defineProperty,Ioe=(t,e)=>{for(var n in e)_oe(t,n,{get:e[n],enumerable:!0})},pr={};Ioe(pr,{assign:()=>Doe,colors:()=>bs,createStringInterpolator:()=>cw,skipAnimation:()=>UD,to:()=>zD,willAdvance:()=>dw});function Ub(){}var Noe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),V={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function fo(t,e){if(V.arr(t)){if(!V.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var xe=(t,e)=>t.forEach(e);function Ur(t,e,n){if(V.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var wn=t=>V.und(t)?[]:V.arr(t)?t:[t];function ac(t,e){if(t.size){const n=Array.from(t);t.clear(),xe(n,e)}}var Ul=(t,...e)=>ac(t,n=>n(...e)),lw=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),cw,zD,bs=null,UD=!1,dw=Ub,Doe=t=>{t.to&&(zD=t.to),t.now&&(ce.now=t.now),t.colors!==void 0&&(bs=t.colors),t.skipAnimation!=null&&(UD=t.skipAnimation),t.createStringInterpolator&&(cw=t.createStringInterpolator),t.requestAnimationFrame&&ce.use(t.requestAnimationFrame),t.batchedUpdates&&(ce.batchedUpdates=t.batchedUpdates),t.willAdvance&&(dw=t.willAdvance),t.frameLoop&&(ce.frameLoop=t.frameLoop)},lc=new Set,Fn=[],zg=[],Pf=0,om={get idle(){return!lc.size&&!Fn.length},start(t){Pf>t.priority?(lc.add(t),ce.onStart(Poe)):(WD(t),ce(Wb))},advance:Wb,sort(t){if(Pf)ce.onFrame(()=>om.sort(t));else{const e=Fn.indexOf(t);~e&&(Fn.splice(e,1),GD(t))}},clear(){Fn=[],lc.clear()}};function Poe(){lc.forEach(WD),lc.clear(),ce(Wb)}function WD(t){Fn.includes(t)||GD(t)}function GD(t){Fn.splice(Ooe(Fn,e=>e.priority>t.priority),0,t)}function Wb(t){const e=zg;for(let n=0;n<Fn.length;n++){const r=Fn[n];Pf=r.priority,r.idle||(dw(r),r.advance(t),r.idle||e.push(r))}return Pf=0,zg=Fn,zg.length=0,Fn=e,Fn.length>0}function Ooe(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Loe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},sr="[-+]?\\d*\\.?\\d+",Of=sr+"%";function sm(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var joe=new RegExp("rgb"+sm(sr,sr,sr)),Boe=new RegExp("rgba"+sm(sr,sr,sr,sr)),Voe=new RegExp("hsl"+sm(sr,Of,Of)),$oe=new RegExp("hsla"+sm(sr,Of,Of,sr)),Hoe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Foe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,zoe=/^#([0-9a-fA-F]{6})$/,Uoe=/^#([0-9a-fA-F]{8})$/;function Woe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=zoe.exec(t))?parseInt(e[1]+"ff",16)>>>0:bs&&bs[t]!==void 0?bs[t]:(e=joe.exec(t))?(ea(e[1])<<24|ea(e[2])<<16|ea(e[3])<<8|255)>>>0:(e=Boe.exec(t))?(ea(e[1])<<24|ea(e[2])<<16|ea(e[3])<<8|T2(e[4]))>>>0:(e=Hoe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Uoe.exec(t))?parseInt(e[1],16)>>>0:(e=Foe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Voe.exec(t))?(C2(S2(e[1]),Lu(e[2]),Lu(e[3]))|255)>>>0:(e=$oe.exec(t))?(C2(S2(e[1]),Lu(e[2]),Lu(e[3]))|T2(e[4]))>>>0:null}function Ug(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function C2(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,o=2*n-r,s=Ug(o,r,t+1/3),i=Ug(o,r,t),a=Ug(o,r,t-1/3);return Math.round(s*255)<<24|Math.round(i*255)<<16|Math.round(a*255)<<8}function ea(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function S2(t){return(parseFloat(t)%360+360)%360/360}function T2(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Lu(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function E2(t){let e=Woe(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,o=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${o}, ${s})`}var Yc=(t,e,n)=>{if(V.fun(t))return t;if(V.arr(t))return Yc({range:t,output:e,extrapolate:n});if(V.str(t.output[0]))return cw(t);const r=t,o=r.output,s=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const d=qoe(c,s);return Goe(c,s[d],s[d+1],o[d],o[d+1],l,i,a,r.map)}};function Goe(t,e,n,r,o,s,i,a,l){let c=l?l(t):t;if(c<e){if(i==="identity")return c;i==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===o?r:e===n?t<=e?r:o:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:o===1/0?c=c+r:c=c*(o-r)+r,c)}function qoe(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Koe={linear:t=>t},Xc=Symbol.for("FluidValue.get"),$a=Symbol.for("FluidValue.observers"),Bn=t=>!!(t&&t[Xc]),on=t=>t&&t[Xc]?t[Xc]():t,M2=t=>t[$a]||null;function Zoe(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Qc(t,e){const n=t[$a];n&&n.forEach(r=>{Zoe(r,e)})}var qD=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Joe(this,t)}},Joe=(t,e)=>KD(t,Xc,e);function al(t,e){if(t[Xc]){let n=t[$a];n||KD(t,$a,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function ed(t,e){const n=t[$a];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[$a]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var KD=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),uh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Yoe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,A2=new RegExp(`(${uh.source})(%|[a-z]+)`,"i"),Xoe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,im=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,ZD=t=>{const[e,n]=Qoe(t);if(!e||lw())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(n);return o||t}else{if(n&&im.test(n))return ZD(n);if(n)return n}return t},Qoe=t=>{const e=im.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},Wg,ese=(t,e,n,r,o)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,JD=t=>{Wg||(Wg=bs?new RegExp(`(${Object.keys(bs).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>on(s).replace(im,ZD).replace(Yoe,E2).replace(Wg,E2)),n=e.map(s=>s.match(uh).map(Number)),o=n[0].map((s,i)=>n.map(a=>{if(!(i in a))throw Error('The arity of each "output" value must be equal');return a[i]})).map(s=>Yc({...t,output:s}));return s=>{var l;const i=!A2.test(e[0])&&((l=e.find(c=>A2.test(c)))==null?void 0:l.replace(uh,""));let a=0;return e[0].replace(uh,()=>`${o[a++](s)}${i||""}`).replace(Xoe,ese)}},uw="react-spring: ",YD=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${uw}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},tse=YD(console.warn);function nse(){tse(`${uw}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var rse=YD(console.warn);function ose(){rse(`${uw}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function am(t){return V.str(t)&&(t[0]=="#"||/\d/.test(t)||!lw()&&im.test(t)||t in(bs||{}))}var hw=lw()?y.useEffect:y.useLayoutEffect,sse=()=>{const t=y.useRef(!1);return hw(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function XD(){const t=y.useState()[1],e=sse();return()=>{e.current&&t(Math.random())}}var QD=t=>y.useEffect(t,ise),ise=[];function R2(t){const e=y.useRef(void 0);return y.useEffect(()=>{e.current=t}),e.current}var td=Symbol.for("Animated:node"),ase=t=>!!t&&t[td]===t,Ar=t=>t&&t[td],fw=(t,e)=>Noe(t,td,e),lm=t=>t&&t[td]&&t[td].getPayload(),eP=class{constructor(){fw(this,this)}getPayload(){return this.payload||[]}},cm=class tP extends eP{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,V.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new tP(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return V.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,V.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Lf=class nP extends cm{constructor(e){super(0),this._string=null,this._toString=Yc({output:[e,e]})}static create(e){return new nP(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(V.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Yc({output:[this.getValue(),e]})),this._value=0,super.reset()}},jf={dependencies:null},dm=class extends eP{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Ur(this.source,(n,r)=>{ase(n)?e[r]=n.getValue(t):Bn(n)?e[r]=on(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&xe(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Ur(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){jf.dependencies&&Bn(t)&&jf.dependencies.add(t);const e=lm(t);e&&xe(e,n=>this.add(n))}},lse=class rP extends dm{constructor(e){super(e)}static create(e){return new rP(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((r,o)=>r.setValue(e[o])).some(Boolean):(super.setValue(e.map(cse)),!0)}};function cse(t){return(am(t)?Lf:cm).create(t)}function Gb(t){const e=Ar(t);return e?e.constructor:V.arr(t)?lse:am(t)?Lf:cm}var _2=(t,e)=>{const n=!V.fun(t)||t.prototype&&t.prototype.isReactComponent;return y.forwardRef((r,o)=>{const s=y.useRef(null),i=n&&y.useCallback(p=>{s.current=hse(o,p)},[o]),[a,l]=use(r,e),c=XD(),d=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},u=new dse(d,l),h=y.useRef(void 0);hw(()=>(h.current=u,xe(l,p=>al(p,u)),()=>{h.current&&(xe(h.current.deps,p=>ed(p,h.current)),ce.cancel(h.current.update))})),y.useEffect(d,[]),QD(()=>()=>{const p=h.current;xe(p.deps,g=>ed(g,p))});const f=e.getComponentProps(a.getValue());return y.createElement(t,{...f,ref:i})})},dse=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ce.write(this.update)}};function use(t,e){const n=new Set;return jf.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new dm(t),jf.dependencies=null,[t,n]}function hse(t,e){return t&&(V.fun(t)?t(e):t.current=e),e}var I2=Symbol.for("AnimatedComponent"),fse=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=o=>new dm(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=i=>{const a=N2(i)||"Anonymous";return V.str(i)?i=s[i]||(s[i]=_2(i,o)):i=i[I2]||(i[I2]=_2(i,o)),i.displayName=`Animated(${a})`,i};return Ur(t,(i,a)=>{V.arr(t)&&(a=N2(i)),s[a]=s(i)}),{animated:s}},N2=t=>V.str(t)?t:t&&V.str(t.displayName)?t.displayName:V.fun(t)&&t.name||null;function Qs(t,...e){return V.fun(t)?t(...e):t}var cc=(t,e)=>t===!0||!!(e&&t&&(V.fun(t)?t(e):wn(t).includes(e))),oP=(t,e)=>V.obj(t)?e&&t[e]:t,sP=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,pse=t=>t,pw=(t,e=pse)=>{let n=mse;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const o of n){const s=e(t[o],o);V.und(s)||(r[o]=s)}return r},mse=["config","onProps","onStart","onChange","onPause","onResume","onRest"],gse={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function yse(t){const e={};let n=0;if(Ur(t,(r,o)=>{gse[o]||(e[o]=r,n++)}),n)return e}function iP(t){const e=yse(t);if(e){const n={to:e};return Ur(t,(r,o)=>o in e||(n[o]=r)),n}return{...t}}function nd(t){return t=on(t),V.arr(t)?t.map(nd):am(t)?pr.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function bse(t){for(const e in t)return!0;return!1}function qb(t){return V.fun(t)||V.arr(t)&&V.obj(t[0])}function vse(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function wse(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var xse={default:{tension:170,friction:26}},Kb={...xse.default,mass:1,damping:1,easing:Koe.linear,clamp:!1},kse=class{constructor(){this.velocity=0,Object.assign(this,Kb)}};function Cse(t,e,n){n&&(n={...n},D2(n,e),e={...n,...e}),D2(t,e),Object.assign(t,e);for(const i in Kb)t[i]==null&&(t[i]=Kb[i]);let{frequency:r,damping:o}=t;const{mass:s}=t;return V.und(r)||(r<.01&&(r=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*o*s/r),t}function D2(t,e){if(!V.und(e.decay))t.duration=void 0;else{const n=!V.und(e.tension)||!V.und(e.friction);(n||!V.und(e.frequency)||!V.und(e.damping)||!V.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var P2=[],Sse=class{constructor(){this.changed=!1,this.values=P2,this.toValues=null,this.fromValues=P2,this.config=new kse,this.immediate=!1}};function aP(t,{key:e,props:n,defaultProps:r,state:o,actions:s}){return new Promise((i,a)=>{let l,c,d=cc(n.cancel??(r==null?void 0:r.cancel),e);if(d)f();else{V.und(n.pause)||(o.paused=cc(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=o.paused||cc(p,e)),l=Qs(n.delay||0,e),p?(o.resumeQueue.add(h),s.pause()):(s.resume(),h())}function u(){o.resumeQueue.add(h),o.timeouts.delete(c),c.cancel(),l=c.time-ce.now()}function h(){l>0&&!pr.skipAnimation?(o.delayed=!0,c=ce.setTimeout(f,l),o.pauseQueue.add(u),o.timeouts.add(c)):f()}function f(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(u),o.timeouts.delete(c),t<=(o.cancelId||0)&&(d=!0);try{s.start({...n,callId:t,cancel:d},i)}catch(p){a(p)}}})}var mw=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Sa(t.get()):e.every(n=>n.noop)?lP(t.get()):tr(t.get(),e.every(n=>n.finished)),lP=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),tr=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Sa=t=>({value:t,cancelled:!0,finished:!1});function cP(t,e,n,r){const{callId:o,parentId:s,onRest:i}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=o,n.asyncTo=t;const c=pw(e,(b,v)=>v==="onRest"?void 0:b);let d,u;const h=new Promise((b,v)=>(d=b,u=v)),f=b=>{const v=o<=(n.cancelId||0)&&Sa(r)||o!==n.asyncId&&tr(r,!1);if(v)throw b.result=v,u(b),b},p=(b,v)=>{const x=new O2,w=new L2;return(async()=>{if(pr.skipAnimation)throw rd(n),w.result=tr(r,!1),u(w),w;f(x);const k=V.obj(b)?{...b}:{...v,to:b};k.parentId=o,Ur(c,(S,T)=>{V.und(k[T])&&(k[T]=S)});const C=await r.start(k);return f(x),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),C})()};let g;if(pr.skipAnimation)return rd(n),tr(r,!1);try{let b;V.arr(t)?b=(async v=>{for(const x of v)await p(x)})(t):b=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([b.then(d),h]),g=tr(r.get(),!0,!1)}catch(b){if(b instanceof O2)g=b.result;else if(b instanceof L2)g=b.result;else throw b}finally{o==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return V.fun(i)&&ce.batchedUpdates(()=>{i(g,r,r.item)}),g})()}function rd(t,e){ac(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var O2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},L2=class extends Error{constructor(){super("SkipAnimationSignal")}},Zb=t=>t instanceof gw,Tse=1,gw=class extends qD{constructor(){super(...arguments),this.id=Tse++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ar(this);return t&&t.getValue()}to(...t){return pr.to(this,t)}interpolate(...t){return nse(),pr.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Qc(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||om.sort(this),Qc(this,{type:"priority",parent:this,priority:t})}},Di=Symbol.for("SpringPhase"),dP=1,uP=2,hP=4,Gg=t=>(t[Di]&dP)>0,Ko=t=>(t[Di]&uP)>0,Il=t=>(t[Di]&hP)>0,j2=(t,e)=>e?t[Di]|=uP|dP:t[Di]&=-3,B2=(t,e)=>e?t[Di]|=hP:t[Di]&=-5,Ese=class extends gw{constructor(t,e){if(super(),this.animation=new Sse,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!V.und(t)||!V.und(e)){const n=V.obj(t)?{...t}:{...e,from:t};V.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ko(this)||this._state.asyncTo)||Il(this)}get goal(){return on(this.animation.to)}get velocity(){const t=Ar(this);return t instanceof cm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Gg(this)}get isAnimating(){return Ko(this)}get isPaused(){return Il(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:o}=r;const{config:s}=r,i=lm(r.to);!i&&Bn(r.to)&&(o=wn(on(r.to))),r.values.forEach((c,d)=>{if(c.done)return;const u=c.constructor==Lf?1:i?i[d].lastPosition:o[d];let h=r.immediate,f=u;if(!h){if(f=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const g=r.fromValues[d],b=c.v0!=null?c.v0:c.v0=V.arr(s.velocity)?s.velocity[d]:s.velocity;let v;const x=s.precision||(g==u?.005:Math.min(1,Math.abs(u-g)*.001));if(V.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,k=Math.exp(-(1-w)*p);f=g+b/(1-w)*(1-k),h=Math.abs(c.lastPosition-f)<=x,v=b*k}else{v=c.lastVelocity==null?b:c.lastVelocity;const w=s.restVelocity||x/10,k=s.clamp?0:s.bounce,C=!V.und(k),S=g==u?c.v0>0:g<u;let T,E=!1;const M=1,R=Math.ceil(t/M);for(let I=0;I<R&&(T=Math.abs(v)>w,!(!T&&(h=Math.abs(u-f)<=x,h)));++I){C&&(E=f==u||f>u==S,E&&(v=-v*k,f=u));const L=-s.tension*1e-6*(f-u),$=-s.friction*.001*v,F=(L+$)/s.mass;v=v+F*M,f=f+v*M}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),f=g+s.easing(w)*(u-g),v=(f-c.lastPosition)/t,h=w==1}c.lastVelocity=v,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}i&&!i[d].done&&(h=!1),h?c.done=!0:e=!1,c.setValue(f,s.round)&&(n=!0)});const a=Ar(this),l=a.getValue();if(e){const c=on(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return ce.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ko(this)){const{to:t,config:e}=this.animation;ce.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return V.und(t)?(n=this.queue||[],this.queue=[]):n=[V.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>mw(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),rd(this._state,t&&this._lastCallId),ce.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=V.obj(n)?n[e]:n,(n==null||qb(n))&&(n=void 0),r=V.obj(r)?r[e]:r,r==null&&(r=void 0);const o={to:n,from:r};return Gg(this)||(t.reverse&&([n,r]=[r,n]),r=on(r),V.und(r)?Ar(this)||this._set(n):this._set(r)),o}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,pw(t,(i,a)=>/^on/.test(a)?oP(i,n):i)),$2(this,t,"onProps"),Dl(this,"onProps",t,this);const o=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return aP(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Il(this)||(B2(this,!0),Ul(s.pauseQueue),Dl(this,"onPause",tr(this,Nl(this,this.animation.to)),this))},resume:()=>{Il(this)&&(B2(this,!1),Ko(this)&&this._resume(),Ul(s.resumeQueue),Dl(this,"onResume",tr(this,Nl(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(i=>{if(t.loop&&i.finished&&!(e&&i.noop)){const a=fP(t);if(a)return this._update(a,!0)}return i})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Sa(this));const r=!V.und(t.to),o=!V.und(t.from);if(r||o)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Sa(this));const{key:s,defaultProps:i,animation:a}=this,{to:l,from:c}=a;let{to:d=l,from:u=c}=t;o&&!r&&(!e.default||V.und(d))&&(d=u),e.reverse&&([d,u]=[u,d]);const h=!fo(u,c);h&&(a.from=u),u=on(u);const f=!fo(d,l);f&&this._focus(d);const p=qb(e.to),{config:g}=a,{decay:b,velocity:v}=g;(r||o)&&(g.velocity=0),e.config&&!p&&Cse(g,Qs(e.config,s),e.config!==i.config?Qs(i.config,s):void 0);let x=Ar(this);if(!x||V.und(d))return n(tr(this,!0));const w=V.und(e.reset)?o&&!e.default:!V.und(u)&&cc(e.reset,s),k=w?u:this.get(),C=nd(d),S=V.num(C)||V.arr(C)||am(C),T=!p&&(!S||cc(i.immediate||e.immediate,s));if(f){const I=Gb(d);if(I!==x.constructor)if(T)x=this._set(C);else throw Error(`Cannot animate between ${x.constructor.name} and ${I.name}, as the "to" prop suggests`)}const E=x.constructor;let M=Bn(d),R=!1;if(!M){const I=w||!Gg(this)&&h;(f||I)&&(R=fo(nd(k),C),M=!R),(!fo(a.immediate,T)&&!T||!fo(g.decay,b)||!fo(g.velocity,v))&&(M=!0)}if(R&&Ko(this)&&(a.changed&&!w?M=!0:M||this._stop(l)),!p&&((M||Bn(l))&&(a.values=x.getPayload(),a.toValues=Bn(d)?null:E==Lf?[1]:wn(C)),a.immediate!=T&&(a.immediate=T,!T&&!w&&this._set(l)),M)){const{onRest:I}=a;xe(Ase,$=>$2(this,e,$));const L=tr(this,Nl(this,l));Ul(this._pendingCalls,L),this._pendingCalls.add(n),a.changed&&ce.batchedUpdates(()=>{var $;a.changed=!w,I==null||I(L,this),w?Qs(i.onRest,L):($=a.onStart)==null||$.call(a,L,this)})}w&&this._set(k),p?n(cP(e.to,e,this._state,this)):M?this._start():Ko(this)&&!f?this._pendingCalls.add(n):n(lP(k))}_focus(t){const e=this.animation;t!==e.to&&(M2(this)&&this._detach(),e.to=t,M2(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Bn(e)&&(al(e,this),Zb(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Bn(t)&&ed(t,this)}_set(t,e=!0){const n=on(t);if(!V.und(n)){const r=Ar(this);if(!r||!fo(n,r.getValue())){const o=Gb(n);!r||r.constructor!=o?fw(this,o.create(n)):r.setValue(n),r&&ce.batchedUpdates(()=>{this._onChange(n,e)})}}return Ar(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Dl(this,"onStart",tr(this,Nl(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Qs(this.animation.onChange,t,this)),Qs(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ar(this).reset(on(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Ko(this)||(j2(this,!0),Il(this)||this._resume())}_resume(){pr.skipAnimation?this.finish():om.start(this)}_stop(t,e){if(Ko(this)){j2(this,!1);const n=this.animation;xe(n.values,o=>{o.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Qc(this,{type:"idle",parent:this});const r=e?Sa(this.get()):tr(this.get(),Nl(this,t??n.to));Ul(this._pendingCalls,r),n.changed&&(n.changed=!1,Dl(this,"onRest",r,this))}}};function Nl(t,e){const n=nd(e),r=nd(t.get());return fo(r,n)}function fP(t,e=t.loop,n=t.to){const r=Qs(e);if(r){const o=r!==!0&&iP(r),s=(o||t).reverse,i=!o||o.reset;return od({...t,loop:e,default:!1,pause:void 0,to:!s||qb(n)?n:void 0,from:i?t.from:void 0,reset:i,...o})}}function od(t){const{to:e,from:n}=t=iP(t),r=new Set;return V.obj(e)&&V2(e,r),V.obj(n)&&V2(n,r),t.keys=r.size?Array.from(r):null,t}function Mse(t){const e=od(t);return V.und(e.default)&&(e.default=pw(e)),e}function V2(t,e){Ur(t,(n,r)=>n!=null&&e.add(r))}var Ase=["onStart","onRest","onChange","onPause","onResume"];function $2(t,e,n){t.animation[n]=e[n]!==sP(e,n)?oP(e[n],t.key):void 0}function Dl(t,e,...n){var r,o,s,i;(o=(r=t.animation)[e])==null||o.call(r,...n),(i=(s=t.defaultProps)[e])==null||i.call(s,...n)}var Rse=["onStart","onChange","onRest"],_se=1,Ise=class{constructor(t,e){this.id=_se++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];V.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(od(t)),this}start(t){let{queue:e}=this;return t?e=wn(t).map(od):this.queue=[],this._flush?this._flush(this,e):(bP(this,e),Jb(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;xe(wn(e),r=>n[r].stop(!!t))}else rd(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(V.und(t))this.start({pause:!0});else{const e=this.springs;xe(wn(t),n=>e[n].pause())}return this}resume(t){if(V.und(t))this.start({pause:!1});else{const e=this.springs;xe(wn(t),n=>e[n].resume())}return this}each(t){Ur(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,o=this._changed.size>0;(r&&!this._started||o&&!this._started)&&(this._started=!0,ac(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,i=o||s&&n.size?this.get():null;o&&e.size&&ac(e,([a,l])=>{l.value=i,a(l,this,this._item)}),s&&(this._started=!1,ac(n,([a,l])=>{l.value=i,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ce.onFrame(this._onFrame)}};function Jb(t,e){return Promise.all(e.map(n=>pP(t,n))).then(n=>mw(t,n))}async function pP(t,e,n){const{keys:r,to:o,from:s,loop:i,onRest:a,onResolve:l}=e,c=V.obj(e.default)&&e.default;i&&(e.loop=!1),o===!1&&(e.to=null),s===!1&&(e.from=null);const d=V.arr(o)||V.fun(o)?o:void 0;d?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):xe(Rse,g=>{const b=e[g];if(V.fun(b)){const v=t._events[g];e[g]=({finished:x,cancelled:w})=>{const k=v.get(b);k?(x||(k.finished=!1),w&&(k.cancelled=!0)):v.set(b,{value:null,finished:x||!1,cancelled:w||!1})},c&&(c[g]=e[g])}});const u=t._state;e.pause===!u.paused?(u.paused=e.pause,Ul(e.pause?u.pauseQueue:u.resumeQueue)):u.paused&&(e.pause=!0);const h=(r||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),f=e.cancel===!0||sP(e,"cancel")===!0;(d||f&&u.asyncId)&&h.push(aP(++t._lastAsyncId,{props:e,state:u,actions:{pause:Ub,resume:Ub,start(g,b){f?(rd(u,t._lastAsyncId),b(Sa(t))):(g.onRest=a,b(cP(d,g,u,t)))}}})),u.paused&&await new Promise(g=>{u.resumeQueue.add(g)});const p=mw(t,await Promise.all(h));if(i&&p.finished&&!(n&&p.noop)){const g=fP(e,i,o);if(g)return bP(t,[g]),pP(t,g,!0)}return l&&ce.batchedUpdates(()=>l(p,t,t.item)),p}function H2(t,e){const n={...t.springs};return e&&xe(wn(e),r=>{V.und(r.keys)&&(r=od(r)),V.obj(r.to)||(r={...r,to:void 0}),yP(n,r,o=>gP(o))}),mP(t,n),n}function mP(t,e){Ur(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,al(n,t))})}function gP(t,e){const n=new Ese;return n.key=t,e&&al(n,e),n}function yP(t,e,n){e.keys&&xe(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function bP(t,e){xe(e,n=>{yP(t.springs,n,r=>gP(r,t))})}var Nse=y.createContext({pause:!1,immediate:!1}),Dse=()=>{const t=[],e=function(r){ose();const o=[];return xe(t,(s,i)=>{if(V.und(r))o.push(s.start());else{const a=n(r,s,i);a&&o.push(s.start(a))}}),o};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const o=t.indexOf(r);~o&&t.splice(o,1)},e.pause=function(){return xe(t,r=>r.pause(...arguments)),this},e.resume=function(){return xe(t,r=>r.resume(...arguments)),this},e.set=function(r){xe(t,(o,s)=>{const i=V.fun(r)?r(s,o):r;i&&o.set(i)})},e.start=function(r){const o=[];return xe(t,(s,i)=>{if(V.und(r))o.push(s.start());else{const a=this._getProps(r,s,i);a&&o.push(s.start(a))}}),o},e.stop=function(){return xe(t,r=>r.stop(...arguments)),this},e.update=function(r){return xe(t,(o,s)=>o.update(this._getProps(r,o,s))),this};const n=function(r,o,s){return V.fun(r)?r(s,o):r};return e._getProps=n,e};function Pse(t,e,n){const r=V.fun(e)&&e;r&&!n&&(n=[]);const o=y.useMemo(()=>r||arguments.length==3?Dse():void 0,[]),s=y.useRef(0),i=XD(),a=y.useMemo(()=>({ctrls:[],queue:[],flush(v,x){const w=H2(v,x);return s.current>0&&!a.queue.length&&!Object.keys(w).some(C=>!v.springs[C])?Jb(v,x):new Promise(C=>{mP(v,w),a.queue.push(()=>{C(Jb(v,x))}),i()})}}),[]),l=y.useRef([...a.ctrls]),c=y.useRef([]);c.current??(c.current=[]);const d=R2(t)||0;y.useMemo(()=>{xe(l.current.slice(t,d),v=>{vse(v,o),v.stop(!0)}),l.current.length=t,u(d,t)},[t]),y.useMemo(()=>{u(0,Math.min(d,t))},n);function u(v,x){for(let w=v;w<x;w++){const k=l.current[w]||(l.current[w]=new Ise(null,a.flush)),C=r?r(w,k):e[w];C&&(c.current[w]=Mse(C))}}const h=l.current.map((v,x)=>H2(v,c.current[x])),f=y.useContext(Nse),p=R2(f),g=f!==p&&bse(f);hw(()=>{s.current++,a.ctrls=l.current;const{queue:v}=a;v.length&&(a.queue=[],xe(v,x=>x())),xe(l.current,(x,w)=>{o==null||o.add(x),g&&x.start({default:f});const k=c.current[w];k&&(wse(x,k.ref),x.ref?x.queue.push(k):x.start(k)),c.current[w]=null})}),QD(()=>()=>{xe(a.ctrls,v=>v.stop(!0))});const b=h.map(v=>({...v}));return o?[b,o]:b}function yw(t,e){const n=V.fun(t),[[r],o]=Pse(1,n?t:[t],n?[]:e);return n||arguments.length==2?[r,o]:r}var Ose=class extends gw{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Yc(...e);const n=this._get(),r=Gb(n);fw(this,r.create(n))}advance(t){const e=this._get(),n=this.get();fo(e,n)||(Ar(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&F2(this._active)&&qg(this)}_get(){const t=V.arr(this.source)?this.source.map(on):wn(on(this.source));return this.calc(...t)}_start(){this.idle&&!F2(this._active)&&(this.idle=!1,xe(lm(this),t=>{t.done=!1}),pr.skipAnimation?(ce.batchedUpdates(()=>this.advance()),qg(this)):om.start(this))}_attach(){let t=1;xe(wn(this.source),e=>{Bn(e)&&al(e,this),Zb(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){xe(wn(this.source),t=>{Bn(t)&&ed(t,this)}),this._active.clear(),qg(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=wn(this.source).reduce((e,n)=>Math.max(e,(Zb(n)?n.priority:0)+1),0))}};function Lse(t){return t.idle!==!1}function F2(t){return!t.size||Array.from(t).every(Lse)}function qg(t){t.idle||(t.idle=!0,xe(lm(t),e=>{e.done=!0}),Qc(t,{type:"idle",parent:t}))}pr.assign({createStringInterpolator:JD,to:(t,e)=>new Ose(t,e)});var vP=/^--/;function jse(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!vP.test(t)&&!(dc.hasOwnProperty(t)&&dc[t])?e+"px":(""+e).trim()}var z2={};function Bse(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:r,style:o,children:s,scrollTop:i,scrollLeft:a,viewBox:l,...c}=e,d=Object.values(c),u=Object.keys(c).map(h=>n||t.hasAttribute(h)?h:z2[h]||(z2[h]=h.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in o)if(o.hasOwnProperty(h)){const f=jse(h,o[h]);vP.test(h)?t.style.setProperty(h,f):t.style[h]=f}u.forEach((h,f)=>{t.setAttribute(h,d[f])}),r!==void 0&&(t.className=r),i!==void 0&&(t.scrollTop=i),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var dc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vse=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),$se=["Webkit","Ms","Moz","O"];dc=Object.keys(dc).reduce((t,e)=>($se.forEach(n=>t[Vse(n,e)]=t[e]),t),dc);var Hse=/^(matrix|translate|scale|rotate|skew)/,Fse=/^(translate)/,zse=/^(rotate|skew)/,Kg=(t,e)=>V.num(t)&&t!==0?t+e:t,hh=(t,e)=>V.arr(t)?t.every(n=>hh(n,e)):V.num(t)?t===e:parseFloat(t)===e,Use=class extends dm{constructor({x:t,y:e,z:n,...r}){const o=[],s=[];(t||e||n)&&(o.push([t||0,e||0,n||0]),s.push(i=>[`translate3d(${i.map(a=>Kg(a,"px")).join(",")})`,hh(i,0)])),Ur(r,(i,a)=>{if(a==="transform")o.push([i||""]),s.push(l=>[l,l===""]);else if(Hse.test(a)){if(delete r[a],V.und(i))return;const l=Fse.test(a)?"px":zse.test(a)?"deg":"";o.push(wn(i)),s.push(a==="rotate3d"?([c,d,u,h])=>[`rotate3d(${c},${d},${u},${Kg(h,l)})`,hh(h,0)]:c=>[`${a}(${c.map(d=>Kg(d,l)).join(",")})`,hh(c,a.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new Wse(o,s)),super(r)}},Wse=class extends qD{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return xe(this.inputs,(n,r)=>{const o=on(n[0]),[s,i]=this.transforms[r](V.arr(o)?o:n.map(on));t+=" "+s,e=e&&i}),e?"none":t}observerAdded(t){t==1&&xe(this.inputs,e=>xe(e,n=>Bn(n)&&al(n,this)))}observerRemoved(t){t==0&&xe(this.inputs,e=>xe(e,n=>Bn(n)&&ed(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Qc(this,t)}},Gse=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];pr.assign({batchedUpdates:kt.unstable_batchedUpdates,createStringInterpolator:JD,colors:Loe});var qse=fse(Gse,{applyAnimatedValues:Bse,createAnimatedStyle:t=>new Use(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Bf=qse.animated;const Kse="_container_32ncs_1",Zse="_checkedContainer_32ncs_14",Jse="_handle_32ncs_18",Zg={container:Kse,checkedContainer:Zse,handle:Jse},Yse=26;function Xse({checked:t,onChange:e}){const n=yw({translateX:t?Yse:0});return m.jsx("div",{className:le(Zg.container,t&&Zg.checkedContainer),onClick:()=>e(!t),children:m.jsx(Bf.div,{style:{transform:n.translateX.to(r=>`translateX(${r}px)`)},className:Zg.handle})})}function Qse(t){return m.jsx("svg",{width:"24",height:"24",fill:"#00000075",viewBox:"0 0 448 512",className:bd.icon,...t,children:m.jsx("path",{d:"M224 232C237.3 232 248 242.7 248 256V304H296C309.3 304 320 314.7 320 328C320 341.3 309.3 352 296 352H248V400C248 413.3 237.3 424 224 424C210.7 424 200 413.3 200 400V352H152C138.7 352 128 341.3 128 328C128 314.7 138.7 304 152 304H200V256C200 242.7 210.7 232 224 232zM152 64H296V24C296 10.75 306.7 0 320 0C333.3 0 344 10.75 344 24V64H384C419.3 64 448 92.65 448 128V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V128C0 92.65 28.65 64 64 64H104V24C104 10.75 114.7 0 128 0C141.3 0 152 10.75 152 24V64zM48 448C48 456.8 55.16 464 64 464H384C392.8 464 400 456.8 400 448V192H48V448z"})})}const eie="_container_16drl_1",tie={container:eie};var se=(t=>(t.Mon="mon",t.Tue="tue",t.Thu="thu",t.Wed="wed",t.Fri="fri",t.Sat="sat",t.Sun="sun",t))(se||{});N.createContext({createTask:()=>{},changeTaskStatus:()=>{},deleteTask:()=>{},updateTask:()=>{},currentTaskIds:[],setCurrentTaskIds:()=>{},getTaskDetail:()=>{},cancelProcessingTask:()=>{},createTaskFromWeeklyHobby:()=>{},getRecommendedTasks:()=>[],filter:{showDoneTask:!1,disableAddProgressTaskAtTop:!1,showAllTask:!1},setFilter:()=>{}});se.Mon,se.Tue,se.Thu,se.Wed,se.Fri,se.Sat,se.Sun;const nie=({className:t,values:e,setValues:n})=>{const r=Bt(),o=yw({maxHeight:!e||e.length===0?0:80});return m.jsxs(m.Fragment,{children:[m.jsx(dt.ItemMeta,{className:t,logo:m.jsx(Qse,{}),title:r.formatMessage({defaultMessage:"Build Hobby",id:"label-build-Hobby"}),description:r.formatMessage({defaultMessage:"Select days to achieve a good hobby",id:"build-weekly-hobby-subtitle"}),rightComponent:m.jsx(Xse,{checked:e?e.length!==0:!1,onChange:s=>{n(s?[se.Mon]:[])}})}),m.jsx(Bf.div,{className:tie.container,style:{maxHeight:o.maxHeight},children:m.jsx(Aoe,{values:e,setValues:n,options:[{label:"Mon",value:se.Mon},{label:"Tue",value:se.Tue},{label:"Thu",value:se.Thu},{label:"Wed",value:se.Wed},{label:"Fri",value:se.Fri},{label:"Sat",value:se.Sat},{label:"Sun",value:se.Sun}]})})]})},rie="_color_11daa_2",oie="_selected_11daa_8",sie="_container_11daa_14",uc={color:rie,selected:oie,container:sie},iie=({value:t,onClick:e,className:n})=>m.jsx("div",{onClick:e,className:le(uc.color,uc.selected,n),style:{backgroundColor:t}}),aie=({value:t,setValue:e,className:n})=>{const r=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"];return m.jsx("div",{className:le(uc.container,n),children:r.map((o,s)=>m.jsx("div",{className:le(uc.color,t===o&&uc.selected),style:{backgroundColor:o},onClick:()=>e(o)},s))})},lie="_iconSearchInput_ov9nt_2",cie="_inputContainer_ov9nt_9",die="_container_ov9nt_14",uie="_rightContainer_ov9nt_25",hie="_colorView_ov9nt_31",fie="_colorPicker_ov9nt_51",ta={iconSearchInput:lie,inputContainer:cie,container:die,rightContainer:uie,colorView:hie,colorPicker:fie},wP=({selectedIcon:t,setSelectedIcon:e,className:n,selectedColor:r,setSelectedColor:o})=>{const[s,i]=y.useState(""),[a,l]=y.useState([]),[c,d]=y.useState(2),u=Bt(),h=async p=>{var v;const b=await(await fetch(`https://api.iconify.design/search?query=${p}`)).json();((v=b==null?void 0:b.icons)==null?void 0:v.length)>0&&l(b.icons)},f=p=>{e(p),d(2)};return m.jsxs("div",{className:le(n,ta.container),children:[m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"tdesign:icon"}),title:u.formatMessage({defaultMessage:"Icons",id:"icon-picker.title"}),rightComponent:m.jsx("div",{className:ta.rightContainer,children:m.jsx(Q,{width:24,icon:t,color:r})})}),m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:ta.inputContainer,children:[m.jsx(mo,{placeholder:"Search icons",border:"dash",value:s,onChange:p=>{i(p.target.value),h(p.target.value),c!==1&&d(1)},className:ta.iconSearchInput}),m.jsx(iie,{value:r,className:ta.colorView,onClick:()=>{d(0)}})]}),c===1&&m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",maxHeight:"300px",overflowY:"scroll"},children:a.map(p=>m.jsx("div",{onClick:()=>f(p),style:{padding:"10px",border:"2px solid transparent",cursor:"pointer"},children:m.jsx(Q,{icon:p,width:"24",height:"24",color:r})},p))}),c===0&&m.jsx(aie,{value:r,setValue:p=>{o(p),d(2)},className:ta.colorPicker})]})]})},pie="_selectWrapper_63tzz_1",mie="_selectLabel_63tzz_5",gie="_selectElement_63tzz_9",yie="_open_63tzz_22",bie="_selectedValue_63tzz_26",vie="_optionsList_63tzz_34",wie="_option_63tzz_34",zs={selectWrapper:pie,selectLabel:mie,selectElement:gie,open:yie,selectedValue:bie,optionsList:vie,option:wie},xie=({options:t,onChange:e,disabled:n=!1,label:r,renderOption:o,renderLabel:s,renderInput:i,renderOptionFooter:a,classes:l={}})=>{const[c,d]=y.useState(!1),u=y.useRef(null),h=()=>d(!1);return y.useEffect(()=>{const f=p=>{u.current&&!u.current.contains(p.target)&&h()};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),m.jsxs("div",{className:le(zs.selectWrapper,l.container),ref:u,children:[s?s():r&&m.jsx("label",{className:zs.selectLabel,children:r}),m.jsxs("div",{className:`${zs.selectElement} ${c?zs.open:""}`,role:"button",tabIndex:0,children:[m.jsx("div",{className:zs.selectedValue,onClick:()=>!n&&d(!0),children:i?i():"Select..."}),c&&m.jsxs("div",{className:zs.optionsList,children:[t.map(f=>m.jsx("div",{className:zs.option,onClick:()=>{e(f,{close:h})},children:o?o(f,{close:h}):f.label},f.value)),a&&a({close:h})]})]})]})};function kie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>r=>{e.forEach(o=>o(r))},e)}const um=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ll(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function bw(t){return"nodeType"in t}function Yt(t){var e,n;return t?ll(t)?t:bw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function vw(t){const{Document:e}=Yt(t);return t instanceof e}function Zd(t){return ll(t)?!1:t instanceof Yt(t).HTMLElement}function xP(t){return t instanceof Yt(t).SVGElement}function cl(t){return t?ll(t)?t.document:bw(t)?vw(t)?t:Zd(t)||xP(t)?t.ownerDocument:document:document:document}const mr=um?y.useLayoutEffect:y.useEffect;function hm(t){const e=y.useRef(t);return mr(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function Cie(){const t=y.useRef(null),e=y.useCallback((r,o)=>{t.current=setInterval(r,o)},[]),n=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function sd(t,e){e===void 0&&(e=[t]);const n=y.useRef(t);return mr(()=>{n.current!==t&&(n.current=t)},e),n}function Jd(t,e){const n=y.useRef();return y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Vf(t){const e=hm(t),n=y.useRef(null),r=y.useCallback(o=>{o!==n.current&&(e==null||e(o,n.current)),n.current=o},[]);return[n,r]}function $f(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let Jg={};function Yd(t,e){return y.useMemo(()=>{if(e)return e;const n=Jg[t]==null?0:Jg[t]+1;return Jg[t]=n,t+"-"+n},[t,e])}function kP(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[l,c]of a){const d=s[l];d!=null&&(s[l]=d+t*c)}return s},{...e})}}const Ta=kP(1),id=kP(-1);function Sie(t){return"clientX"in t&&"clientY"in t}function fm(t){if(!t)return!1;const{KeyboardEvent:e}=Yt(t.target);return e&&t instanceof e}function Tie(t){if(!t)return!1;const{TouchEvent:e}=Yt(t.target);return e&&t instanceof e}function Hf(t){if(Tie(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Sie(t)?{x:t.clientX,y:t.clientY}:null}const As=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[As.Translate.toString(t),As.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),U2="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Eie(t){return t.matches(U2)?t:t.querySelector(U2)}const Mie={display:"none"};function Aie(t){let{id:e,value:n}=t;return N.createElement("div",{id:e,style:Mie},n)}function Rie(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return N.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function _ie(){const[t,e]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const CP=y.createContext(null);function Iie(t){const e=y.useContext(CP);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Nie(){const[t]=y.useState(()=>new Set),e=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:o,event:s}=r;t.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[t]),e]}const Die={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Pie={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Oie(t){let{announcements:e=Pie,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Die}=t;const{announce:s,announcement:i}=_ie(),a=Yd("DndLiveRegion"),[l,c]=y.useState(!1);if(y.useEffect(()=>{c(!0)},[]),Iie(y.useMemo(()=>({onDragStart(u){let{active:h}=u;s(e.onDragStart({active:h}))},onDragMove(u){let{active:h,over:f}=u;e.onDragMove&&s(e.onDragMove({active:h,over:f}))},onDragOver(u){let{active:h,over:f}=u;s(e.onDragOver({active:h,over:f}))},onDragEnd(u){let{active:h,over:f}=u;s(e.onDragEnd({active:h,over:f}))},onDragCancel(u){let{active:h,over:f}=u;s(e.onDragCancel({active:h,over:f}))}}),[s,e])),!l)return null;const d=N.createElement(N.Fragment,null,N.createElement(Aie,{id:r,value:o.draggable}),N.createElement(Rie,{id:a,announcement:i}));return n?kt.createPortal(d,n):d}var at;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(at||(at={}));function Ff(){}function W2(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Lie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const gr=Object.freeze({x:0,y:0});function SP(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function jie(t,e){const n=Hf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function TP(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function Bie(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function G2(t){let{left:e,top:n,height:r,width:o}=t;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+r},{x:e+o,y:n+r}]}function EP(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function q2(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Vie=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=q2(e,e.left,e.top),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=SP(q2(l),o);s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(TP)},$ie=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=G2(e),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=G2(l),d=o.reduce((h,f,p)=>h+SP(c[p],f),0),u=Number((d/4).toFixed(4));s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(TP)};function Hie(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),i=o-r,a=s-n;if(r<o&&n<s){const l=e.width*e.height,c=t.width*t.height,d=i*a,u=d/(l+c-d);return Number(u.toFixed(4))}return 0}const Fie=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const l=Hie(a,e);l>0&&o.push({id:i,data:{droppableContainer:s,value:l}})}}return o.sort(Bie)};function zie(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function MP(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:gr}function Uie(t){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+t*a.y,bottom:i.bottom+t*a.y,left:i.left+t*a.x,right:i.right+t*a.x}),{...n})}}const Wie=Uie(1);function AP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Gie(t,e,n){const r=AP(e);if(!r)return t;const{scaleX:o,scaleY:s,x:i,y:a}=r,l=t.left-i-(1-o)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?t.width/o:t.width,u=s?t.height/s:t.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}const qie={ignoreTransform:!1};function dl(t,e){e===void 0&&(e=qie);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=Yt(t).getComputedStyle(t);c&&(n=Gie(n,c,d))}const{top:r,left:o,width:s,height:i,bottom:a,right:l}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:l}}function K2(t){return dl(t,{ignoreTransform:!0})}function Kie(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Zie(t,e){return e===void 0&&(e=Yt(t).getComputedStyle(t)),e.position==="fixed"}function Jie(t,e){e===void 0&&(e=Yt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=e[o];return typeof s=="string"?n.test(s):!1})}function pm(t,e){const n=[];function r(o){if(e!=null&&n.length>=e||!o)return n;if(vw(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Zd(o)||xP(o)||n.includes(o))return n;const s=Yt(t).getComputedStyle(o);return o!==t&&Jie(o,s)&&n.push(o),Zie(o,s)?n:r(o.parentNode)}return t?r(t):n}function RP(t){const[e]=pm(t,1);return e??null}function Yg(t){return!um||!t?null:ll(t)?t:bw(t)?vw(t)||t===cl(t).scrollingElement?window:Zd(t)?t:null:null}function _P(t){return ll(t)?t.scrollX:t.scrollLeft}function IP(t){return ll(t)?t.scrollY:t.scrollTop}function Yb(t){return{x:_P(t),y:IP(t)}}var ct;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ct||(ct={}));function NP(t){return!um||!t?!1:t===document.scrollingElement}function DP(t){const e={x:0,y:0},n=NP(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},o=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,i=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:e}}const Yie={x:.2,y:.2};function Xie(t,e,n,r,o){let{top:s,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=Yie);const{isTop:c,isBottom:d,isLeft:u,isRight:h}=DP(t),f={x:0,y:0},p={x:0,y:0},g={height:e.height*o.y,width:e.width*o.x};return!c&&s<=e.top+g.height?(f.y=ct.Backward,p.y=r*Math.abs((e.top+g.height-s)/g.height)):!d&&l>=e.bottom-g.height&&(f.y=ct.Forward,p.y=r*Math.abs((e.bottom-g.height-l)/g.height)),!h&&a>=e.right-g.width?(f.x=ct.Forward,p.x=r*Math.abs((e.right-g.width-a)/g.width)):!u&&i<=e.left+g.width&&(f.x=ct.Backward,p.x=r*Math.abs((e.left+g.width-i)/g.width)),{direction:f,speed:p}}function Qie(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:e,left:n,right:r,bottom:o}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:o,width:t.clientWidth,height:t.clientHeight}}function PP(t){return t.reduce((e,n)=>Ta(e,Yb(n)),gr)}function eae(t){return t.reduce((e,n)=>e+_P(n),0)}function tae(t){return t.reduce((e,n)=>e+IP(n),0)}function OP(t,e){if(e===void 0&&(e=dl),!t)return;const{top:n,left:r,bottom:o,right:s}=e(t);RP(t)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const nae=[["x",["left","right"],eae],["y",["top","bottom"],tae]];class ww{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=pm(n),o=PP(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,i,a]of nae)for(const l of i)Object.defineProperty(this,l,{get:()=>{const c=a(r),d=o[s]-c;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class hc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var o;(o=this.target)==null||o.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function rae(t){const{EventTarget:e}=Yt(t);return t instanceof e?t:cl(t)}function Xg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var jn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(jn||(jn={}));function Z2(t){t.preventDefault()}function oae(t){t.stopPropagation()}var we;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(we||(we={}));const LP={start:[we.Space,we.Enter],cancel:[we.Esc],end:[we.Space,we.Enter,we.Tab]},sae=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case we.Right:return{...n,x:n.x+25};case we.Left:return{...n,x:n.x-25};case we.Down:return{...n,y:n.y+25};case we.Up:return{...n,y:n.y-25}}};class xw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new hc(cl(n)),this.windowListeners=new hc(Yt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(jn.Resize,this.handleCancel),this.windowListeners.add(jn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(jn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&OP(r),n(gr)}handleKeyDown(e){if(fm(e)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=LP,coordinateGetter:i=sae,scrollBehavior:a="smooth"}=o,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:gr;this.referenceCoordinates||(this.referenceCoordinates=d);const u=i(e,{active:n,context:r.current,currentCoordinates:d});if(u){const h=id(u,d),f={x:0,y:0},{scrollableAncestors:p}=r.current;for(const g of p){const b=e.code,{isTop:v,isRight:x,isLeft:w,isBottom:k,maxScroll:C,minScroll:S}=DP(g),T=Qie(g),E={x:Math.min(b===we.Right?T.right-T.width/2:T.right,Math.max(b===we.Right?T.left:T.left+T.width/2,u.x)),y:Math.min(b===we.Down?T.bottom-T.height/2:T.bottom,Math.max(b===we.Down?T.top:T.top+T.height/2,u.y))},M=b===we.Right&&!x||b===we.Left&&!w,R=b===we.Down&&!k||b===we.Up&&!v;if(M&&E.x!==u.x){const I=g.scrollLeft+h.x,L=b===we.Right&&I<=C.x||b===we.Left&&I>=S.x;if(L&&!h.y){g.scrollTo({left:I,behavior:a});return}L?f.x=g.scrollLeft-I:f.x=b===we.Right?g.scrollLeft-C.x:g.scrollLeft-S.x,f.x&&g.scrollBy({left:-f.x,behavior:a});break}else if(R&&E.y!==u.y){const I=g.scrollTop+h.y,L=b===we.Down&&I<=C.y||b===we.Up&&I>=S.y;if(L&&!h.x){g.scrollTo({top:I,behavior:a});return}L?f.y=g.scrollTop-I:f.y=b===we.Down?g.scrollTop-C.y:g.scrollTop-S.y,f.y&&g.scrollBy({top:-f.y,behavior:a});break}}this.handleMove(e,Ta(id(u,this.referenceCoordinates),f))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}xw.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=LP,onActivation:o}=e,{active:s}=n;const{code:i}=t.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),o==null||o({event:t.nativeEvent}),!0)}return!1}}];function J2(t){return!!(t&&"distance"in t)}function Y2(t){return!!(t&&"delay"in t)}class kw{constructor(e,n,r){var o;r===void 0&&(r=rae(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:i}=s;this.props=e,this.events=n,this.document=cl(i),this.documentListeners=new hc(this.document),this.listeners=new hc(r),this.windowListeners=new hc(Yt(i)),this.initialCoordinates=(o=Hf(s))!=null?o:gr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(jn.Resize,this.handleCancel),this.windowListeners.add(jn.DragStart,Z2),this.windowListeners.add(jn.VisibilityChange,this.handleCancel),this.windowListeners.add(jn.ContextMenu,Z2),this.documentListeners.add(jn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Y2(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(J2(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(jn.Click,oae,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(jn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const l=(n=Hf(e))!=null?n:gr,c=id(o,l);if(!r&&a){if(J2(a)){if(a.tolerance!=null&&Xg(c,a.tolerance))return this.handleCancel();if(Xg(c,a.distance))return this.handleStart()}if(Y2(a)&&Xg(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===we.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const iae={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Cw extends kw{constructor(e){const{event:n}=e,r=cl(n.target);super(e,iae,r)}}Cw.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const aae={move:{name:"mousemove"},end:{name:"mouseup"}};var Xb;(function(t){t[t.RightClick=2]="RightClick"})(Xb||(Xb={}));class lae extends kw{constructor(e){super(e,aae,cl(e.event.target))}}lae.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Xb.RightClick?!1:(r==null||r({event:n}),!0)}}];const Qg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class cae extends kw{constructor(e){super(e,Qg)}static setup(){return window.addEventListener(Qg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Qg.move.name,e)};function e(){}}}cae.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var fc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(fc||(fc={}));var zf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(zf||(zf={}));function dae(t){let{acceleration:e,activator:n=fc.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=zf.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:u,threshold:h}=t;const f=hae({delta:u,disabled:!s}),[p,g]=Cie(),b=y.useRef({x:0,y:0}),v=y.useRef({x:0,y:0}),x=y.useMemo(()=>{switch(n){case fc.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case fc.DraggableRect:return o}},[n,o,l]),w=y.useRef(null),k=y.useCallback(()=>{const S=w.current;if(!S)return;const T=b.current.x*v.current.x,E=b.current.y*v.current.y;S.scrollBy(T,E)},[]),C=y.useMemo(()=>a===zf.TreeOrder?[...c].reverse():c,[a,c]);y.useEffect(()=>{if(!s||!c.length||!x){g();return}for(const S of C){if((r==null?void 0:r(S))===!1)continue;const T=c.indexOf(S),E=d[T];if(!E)continue;const{direction:M,speed:R}=Xie(S,E,x,e,h);for(const I of["x","y"])f[I][M[I]]||(R[I]=0,M[I]=0);if(R.x>0||R.y>0){g(),w.current=S,p(k,i),b.current=R,v.current=M;return}}b.current={x:0,y:0},v.current={x:0,y:0},g()},[e,k,r,g,s,i,JSON.stringify(x),JSON.stringify(f),p,c,C,d,JSON.stringify(h)])}const uae={x:{[ct.Backward]:!1,[ct.Forward]:!1},y:{[ct.Backward]:!1,[ct.Forward]:!1}};function hae(t){let{delta:e,disabled:n}=t;const r=$f(e);return Jd(o=>{if(n||!r||!o)return uae;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[ct.Backward]:o.x[ct.Backward]||s.x===-1,[ct.Forward]:o.x[ct.Forward]||s.x===1},y:{[ct.Backward]:o.y[ct.Backward]||s.y===-1,[ct.Forward]:o.y[ct.Forward]||s.y===1}}},[n,e,r])}function fae(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Jd(o=>{var s;return e==null?null:(s=r??o)!=null?s:null},[r,e])}function pae(t,e){return y.useMemo(()=>t.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:e(i.handler,r)}));return[...n,...s]},[]),[t,e])}var ad;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ad||(ad={}));var Qb;(function(t){t.Optimized="optimized"})(Qb||(Qb={}));const X2=new Map;function mae(t,e){let{dragging:n,dependencies:r,config:o}=e;const[s,i]=y.useState(null),{frequency:a,measure:l,strategy:c}=o,d=y.useRef(t),u=b(),h=sd(u),f=y.useCallback(function(v){v===void 0&&(v=[]),!h.current&&i(x=>x===null?v:x.concat(v.filter(w=>!x.includes(w))))},[h]),p=y.useRef(null),g=Jd(v=>{if(u&&!n)return X2;if(!v||v===X2||d.current!==t||s!=null){const x=new Map;for(let w of t){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const k=w.node.current,C=k?new ww(l(k),k):null;w.rect.current=C,C&&x.set(w.id,C)}return x}return v},[t,s,n,u,l]);return y.useEffect(()=>{d.current=t},[t]),y.useEffect(()=>{u||f()},[n,u]),y.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),y.useEffect(()=>{u||typeof a!="number"||p.current!==null||(p.current=setTimeout(()=>{f(),p.current=null},a))},[a,u,f,...r]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:s!=null};function b(){switch(c){case ad.Always:return!1;case ad.BeforeDragging:return n;default:return!n}}}function Sw(t,e){return Jd(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function gae(t,e){return Sw(t,e)}function yae(t){let{callback:e,disabled:n}=t;const r=hm(e),o=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return y.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function mm(t){let{callback:e,disabled:n}=t;const r=hm(e),o=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return y.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function bae(t){return new ww(dl(t),t)}function Q2(t,e,n){e===void 0&&(e=bae);const[r,o]=y.useState(null);function s(){o(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const i=yae({callback(l){if(t)for(const c of l){const{type:d,target:u}=c;if(d==="childList"&&u instanceof HTMLElement&&u.contains(t)){s();break}}}}),a=mm({callback:s});return mr(()=>{s(),t?(a==null||a.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[t]),r}function vae(t){const e=Sw(t);return MP(t,e)}const eT=[];function wae(t){const e=y.useRef(t),n=Jd(r=>t?r&&r!==eT&&t&&e.current&&t.parentNode===e.current.parentNode?r:pm(t):eT,[t]);return y.useEffect(()=>{e.current=t},[t]),n}function xae(t){const[e,n]=y.useState(null),r=y.useRef(t),o=y.useCallback(s=>{const i=Yg(s.target);i&&n(a=>a?(a.set(i,Yb(i)),new Map(a)):null)},[]);return y.useEffect(()=>{const s=r.current;if(t!==s){i(s);const a=t.map(l=>{const c=Yg(l);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,Yb(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{i(t),i(s)};function i(a){a.forEach(l=>{const c=Yg(l);c==null||c.removeEventListener("scroll",o)})}},[o,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,i)=>Ta(s,i),gr):PP(t):gr,[t,e])}function tT(t,e){e===void 0&&(e=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},e),y.useEffect(()=>{const r=t!==gr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?id(t,n.current):gr}function kae(t){y.useEffect(()=>{if(!um)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Cae(t,e){return y.useMemo(()=>t.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,e)},n},{}),[t,e])}function jP(t){return y.useMemo(()=>t?Kie(t):null,[t])}const nT=[];function Sae(t,e){e===void 0&&(e=dl);const[n]=t,r=jP(n?Yt(n):null),[o,s]=y.useState(nT);function i(){s(()=>t.length?t.map(l=>NP(l)?r:new ww(e(l),l)):nT)}const a=mm({callback:i});return mr(()=>{a==null||a.disconnect(),i(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),o}function BP(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Zd(e)?e:t}function Tae(t){let{measure:e}=t;const[n,r]=y.useState(null),o=y.useCallback(c=>{for(const{target:d}of c)if(Zd(d)){r(u=>{const h=e(d);return u?{...u,width:h.width,height:h.height}:h});break}},[e]),s=mm({callback:o}),i=y.useCallback(c=>{const d=BP(c);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?e(d):null)},[e,s]),[a,l]=Vf(i);return y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Eae=[{sensor:Cw,options:{}},{sensor:xw,options:{}}],Mae={current:{}},fh={draggable:{measure:K2},droppable:{measure:K2,strategy:ad.WhileDragging,frequency:Qb.Optimized},dragOverlay:{measure:dl}};class pc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Aae={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new pc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ff},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:fh,measureDroppableContainers:Ff,windowRect:null,measuringScheduled:!1},VP={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ff,draggableNodes:new Map,over:null,measureDroppableContainers:Ff},Xd=y.createContext(VP),$P=y.createContext(Aae);function Rae(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new pc}}}function _ae(t,e){switch(e.type){case at.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case at.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case at.DragEnd:case at.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case at.RegisterDroppable:{const{element:n}=e,{id:r}=n,o=new pc(t.droppable.containers);return o.set(r,n),{...t,droppable:{...t.droppable,containers:o}}}case at.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new pc(t.droppable.containers);return i.set(n,{...s,disabled:o}),{...t,droppable:{...t.droppable,containers:i}}}case at.UnregisterDroppable:{const{id:n,key:r}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const s=new pc(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function Iae(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:o}=y.useContext(Xd),s=$f(r),i=$f(n==null?void 0:n.id);return y.useEffect(()=>{if(!e&&!r&&s&&i!=null){if(!fm(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[l.current,c.current]){if(!d)continue;const u=Eie(d);if(u){u.focus();break}}})}},[r,e,o,i,s]),null}function HP(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((o,s)=>s({transform:o,...r}),n):n}function Nae(t){return y.useMemo(()=>({draggable:{...fh.draggable,...t==null?void 0:t.draggable},droppable:{...fh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...fh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Dae(t){let{activeNode:e,measure:n,initialRect:r,config:o=!0}=t;const s=y.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;mr(()=>{if(!i&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const d=n(c),u=MP(d,r);if(i||(u.x=0),a||(u.y=0),s.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const h=RP(c);h&&h.scrollBy({top:u.y,left:u.x})}},[e,i,a,r,n])}const gm=y.createContext({...gr,scaleX:1,scaleY:1});var es;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(es||(es={}));const Pae=y.memo(function(e){var n,r,o,s;let{id:i,accessibility:a,autoScroll:l=!0,children:c,sensors:d=Eae,collisionDetection:u=Fie,measuring:h,modifiers:f,...p}=e;const g=y.useReducer(_ae,void 0,Rae),[b,v]=g,[x,w]=Nie(),[k,C]=y.useState(es.Uninitialized),S=k===es.Initialized,{draggable:{active:T,nodes:E,translate:M},droppable:{containers:R}}=b,I=T!=null?E.get(T):null,L=y.useRef({initial:null,translated:null}),$=y.useMemo(()=>{var _t;return T!=null?{id:T,data:(_t=I==null?void 0:I.data)!=null?_t:Mae,rect:L}:null},[T,I]),F=y.useRef(null),[z,J]=y.useState(null),[P,B]=y.useState(null),H=sd(p,Object.values(p)),Y=Yd("DndDescribedBy",i),G=y.useMemo(()=>R.getEnabled(),[R]),X=Nae(h),{droppableRects:pe,measureDroppableContainers:He,measuringScheduled:qe}=mae(G,{dragging:S,dependencies:[M.x,M.y],config:X.droppable}),ve=fae(E,T),Pe=y.useMemo(()=>P?Hf(P):null,[P]),Ke=P3(),Be=gae(ve,X.draggable.measure);Dae({activeNode:T!=null?E.get(T):null,config:Ke.layoutShiftCompensation,initialRect:Be,measure:X.draggable.measure});const ie=Q2(ve,X.draggable.measure,Be),Xt=Q2(ve?ve.parentElement:null),At=y.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Qt=R.getNodeFor((n=At.current.over)==null?void 0:n.id),Rt=Tae({measure:X.dragOverlay.measure}),Mn=(r=Rt.nodeRef.current)!=null?r:ve,wr=S?(o=Rt.rect)!=null?o:ie:null,Fi=!!(Rt.nodeRef.current&&Rt.rect),zi=vae(Fi?null:ie),Bo=jP(Mn?Yt(Mn):null),Ve=wae(S?Qt??ve:null),Ui=Sae(Ve),Wi=HP(f,{transform:{x:M.x-zi.x,y:M.y-zi.y,scaleX:1,scaleY:1},activatorEvent:P,active:$,activeNodeRect:ie,containerNodeRect:Xt,draggingNodeRect:wr,over:At.current.over,overlayNodeRect:Rt.rect,scrollableAncestors:Ve,scrollableAncestorRects:Ui,windowRect:Bo}),ru=Pe?Ta(Pe,M):null,ou=xae(Ve),su=tT(ou),iu=tT(ou,[ie]),Qr=Ta(Wi,su),eo=wr?Wie(wr,Wi):null,Vo=$&&eo?u({active:$,collisionRect:eo,droppableRects:pe,droppableContainers:G,pointerCoordinates:ru}):null,pl=EP(Vo,"id"),[Ze,lx]=y.useState(null),R3=Fi?Wi:Ta(Wi,iu),_3=zie(R3,(s=Ze==null?void 0:Ze.rect)!=null?s:null,ie),xm=y.useRef(null),cx=y.useCallback((_t,fn)=>{let{sensor:pn,options:$o}=fn;if(F.current==null)return;const An=E.get(F.current);if(!An)return;const mn=_t.nativeEvent,xr=new pn({active:F.current,activeNode:An,event:mn,options:$o,context:At,onAbort(mt){if(!E.get(mt))return;const{onDragAbort:kr}=H.current,to={id:mt};kr==null||kr(to),x({type:"onDragAbort",event:to})},onPending(mt,Ho,kr,to){if(!E.get(mt))return;const{onDragPending:gl}=H.current,Fo={id:mt,constraint:Ho,initialCoordinates:kr,offset:to};gl==null||gl(Fo),x({type:"onDragPending",event:Fo})},onStart(mt){const Ho=F.current;if(Ho==null)return;const kr=E.get(Ho);if(!kr)return;const{onDragStart:to}=H.current,ml={activatorEvent:mn,active:{id:Ho,data:kr.data,rect:L}};kt.unstable_batchedUpdates(()=>{to==null||to(ml),C(es.Initializing),v({type:at.DragStart,initialCoordinates:mt,active:Ho}),x({type:"onDragStart",event:ml}),J(xm.current),B(mn)})},onMove(mt){v({type:at.DragMove,coordinates:mt})},onEnd:Gi(at.DragEnd),onCancel:Gi(at.DragCancel)});xm.current=xr;function Gi(mt){return async function(){const{active:kr,collisions:to,over:ml,scrollAdjustedTranslate:gl}=At.current;let Fo=null;if(kr&&gl){const{cancelDrop:yl}=H.current;Fo={activatorEvent:mn,active:kr,collisions:to,delta:gl,over:ml},mt===at.DragEnd&&typeof yl=="function"&&await Promise.resolve(yl(Fo))&&(mt=at.DragCancel)}F.current=null,kt.unstable_batchedUpdates(()=>{v({type:mt}),C(es.Uninitialized),lx(null),J(null),B(null),xm.current=null;const yl=mt===at.DragEnd?"onDragEnd":"onDragCancel";if(Fo){const km=H.current[yl];km==null||km(Fo),x({type:yl,event:Fo})}})}}},[E]),I3=y.useCallback((_t,fn)=>(pn,$o)=>{const An=pn.nativeEvent,mn=E.get($o);if(F.current!==null||!mn||An.dndKit||An.defaultPrevented)return;const xr={active:mn};_t(pn,fn.options,xr)===!0&&(An.dndKit={capturedBy:fn.sensor},F.current=$o,cx(pn,fn))},[E,cx]),dx=pae(d,I3);kae(d),mr(()=>{ie&&k===es.Initializing&&C(es.Initialized)},[ie,k]),y.useEffect(()=>{const{onDragMove:_t}=H.current,{active:fn,activatorEvent:pn,collisions:$o,over:An}=At.current;if(!fn||!pn)return;const mn={active:fn,activatorEvent:pn,collisions:$o,delta:{x:Qr.x,y:Qr.y},over:An};kt.unstable_batchedUpdates(()=>{_t==null||_t(mn),x({type:"onDragMove",event:mn})})},[Qr.x,Qr.y]),y.useEffect(()=>{const{active:_t,activatorEvent:fn,collisions:pn,droppableContainers:$o,scrollAdjustedTranslate:An}=At.current;if(!_t||F.current==null||!fn||!An)return;const{onDragOver:mn}=H.current,xr=$o.get(pl),Gi=xr&&xr.rect.current?{id:xr.id,rect:xr.rect.current,data:xr.data,disabled:xr.disabled}:null,mt={active:_t,activatorEvent:fn,collisions:pn,delta:{x:An.x,y:An.y},over:Gi};kt.unstable_batchedUpdates(()=>{lx(Gi),mn==null||mn(mt),x({type:"onDragOver",event:mt})})},[pl]),mr(()=>{At.current={activatorEvent:P,active:$,activeNode:ve,collisionRect:eo,collisions:Vo,droppableRects:pe,draggableNodes:E,draggingNode:Mn,draggingNodeRect:wr,droppableContainers:R,over:Ze,scrollableAncestors:Ve,scrollAdjustedTranslate:Qr},L.current={initial:wr,translated:eo}},[$,ve,Vo,eo,E,Mn,wr,pe,R,Ze,Ve,Qr]),dae({...Ke,delta:M,draggingRect:eo,pointerCoordinates:ru,scrollableAncestors:Ve,scrollableAncestorRects:Ui});const N3=y.useMemo(()=>({active:$,activeNode:ve,activeNodeRect:ie,activatorEvent:P,collisions:Vo,containerNodeRect:Xt,dragOverlay:Rt,draggableNodes:E,droppableContainers:R,droppableRects:pe,over:Ze,measureDroppableContainers:He,scrollableAncestors:Ve,scrollableAncestorRects:Ui,measuringConfiguration:X,measuringScheduled:qe,windowRect:Bo}),[$,ve,ie,P,Vo,Xt,Rt,E,R,pe,Ze,He,Ve,Ui,X,qe,Bo]),D3=y.useMemo(()=>({activatorEvent:P,activators:dx,active:$,activeNodeRect:ie,ariaDescribedById:{draggable:Y},dispatch:v,draggableNodes:E,over:Ze,measureDroppableContainers:He}),[P,dx,$,ie,v,Y,E,Ze,He]);return N.createElement(CP.Provider,{value:w},N.createElement(Xd.Provider,{value:D3},N.createElement($P.Provider,{value:N3},N.createElement(gm.Provider,{value:_3},c)),N.createElement(Iae,{disabled:(a==null?void 0:a.restoreFocus)===!1})),N.createElement(Oie,{...a,hiddenTextDescribedById:Y}));function P3(){const _t=(z==null?void 0:z.autoScrollEnabled)===!1,fn=typeof l=="object"?l.enabled===!1:l===!1,pn=S&&!_t&&!fn;return typeof l=="object"?{...l,enabled:pn}:{enabled:pn}}}),Oae=y.createContext(null),rT="button",Lae="Draggable";function jae(t){let{id:e,data:n,disabled:r=!1,attributes:o}=t;const s=Yd(Lae),{activators:i,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=y.useContext(Xd),{role:f=rT,roleDescription:p="draggable",tabIndex:g=0}=o??{},b=(l==null?void 0:l.id)===e,v=y.useContext(b?gm:Oae),[x,w]=Vf(),[k,C]=Vf(),S=Cae(i,e),T=sd(n);mr(()=>(u.set(e,{id:e,key:s,node:x,activatorNode:k,data:T}),()=>{const M=u.get(e);M&&M.key===s&&u.delete(e)}),[u,e]);const E=y.useMemo(()=>({role:f,tabIndex:g,"aria-disabled":r,"aria-pressed":b&&f===rT?!0:void 0,"aria-roledescription":p,"aria-describedby":d.draggable}),[r,f,g,b,p,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:E,isDragging:b,listeners:r?void 0:S,node:x,over:h,setNodeRef:w,setActivatorNodeRef:C,transform:v}}function FP(){return y.useContext($P)}const Bae="Droppable",Vae={timeout:25};function zP(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:o}=t;const s=Yd(Bae),{active:i,dispatch:a,over:l,measureDroppableContainers:c}=y.useContext(Xd),d=y.useRef({disabled:n}),u=y.useRef(!1),h=y.useRef(null),f=y.useRef(null),{disabled:p,updateMeasurementsFor:g,timeout:b}={...Vae,...o},v=sd(g??r),x=y.useCallback(()=>{if(!u.current){u.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),f.current=null},b)},[b]),w=mm({callback:x,disabled:p||!i}),k=y.useCallback((E,M)=>{w&&(M&&(w.unobserve(M),u.current=!1),E&&w.observe(E))},[w]),[C,S]=Vf(k),T=sd(e);return y.useEffect(()=>{!w||!C.current||(w.disconnect(),u.current=!1,w.observe(C.current))},[C,w]),y.useEffect(()=>(a({type:at.RegisterDroppable,element:{id:r,key:s,disabled:n,node:C,rect:h,data:T}}),()=>a({type:at.UnregisterDroppable,key:s,id:r})),[r]),y.useEffect(()=>{n!==d.current.disabled&&(a({type:at.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,a]),{active:i,rect:h,isOver:(l==null?void 0:l.id)===r,node:C,over:l,setNodeRef:S}}function $ae(t){let{animation:e,children:n}=t;const[r,o]=y.useState(null),[s,i]=y.useState(null),a=$f(n);return!n&&!r&&a&&o(a),mr(()=>{if(!s)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){o(null);return}Promise.resolve(e(c,s)).then(()=>{o(null)})},[e,r,s]),N.createElement(N.Fragment,null,n,r?y.cloneElement(r,{ref:i}):null)}const Hae={x:0,y:0,scaleX:1,scaleY:1};function Fae(t){let{children:e}=t;return N.createElement(Xd.Provider,{value:VP},N.createElement(gm.Provider,{value:Hae},e))}const zae={position:"fixed",touchAction:"none"},Uae=t=>fm(t)?"transform 250ms ease":void 0,Wae=y.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:i,rect:a,style:l,transform:c,transition:d=Uae}=t;if(!a)return null;const u=o?c:{...c,scaleX:1,scaleY:1},h={...zae,width:a.width,height:a.height,top:a.top,left:a.left,transform:As.Transform.toString(u),transformOrigin:o&&r?jie(r,a):void 0,transition:typeof d=="function"?d(r):d,...l};return N.createElement(n,{className:i,style:h,ref:e},s)}),Gae=t=>e=>{let{active:n,dragOverlay:r}=e;const o={},{styles:s,className:i}=t;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,c]of Object.entries(o))n.node.style.setProperty(l,c);i!=null&&i.active&&n.node.classList.remove(i.active)}},qae=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:As.Transform.toString(e)},{transform:As.Transform.toString(n)}]},Kae={duration:250,easing:"ease",keyframes:qae,sideEffects:Gae({styles:{active:{opacity:"0"}}})};function Zae(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=t;return hm((s,i)=>{if(e===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const c=BP(i);if(!c)return;const{transform:d}=Yt(i).getComputedStyle(i),u=AP(d);if(!u)return;const h=typeof e=="function"?e:Jae(e);return OP(l,o.draggable.measure),h({active:{id:s,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:o,transform:u})})}function Jae(t){const{duration:e,easing:n,sideEffects:r,keyframes:o}={...Kae,...t};return s=>{let{active:i,dragOverlay:a,transform:l,...c}=s;if(!e)return;const d={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},u={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/a.rect.height:1},h={x:l.x-d.x,y:l.y-d.y,...u},f=o({...c,active:i,dragOverlay:a,transform:{initial:l,final:h}}),[p]=f,g=f[f.length-1];if(JSON.stringify(p)===JSON.stringify(g))return;const b=r==null?void 0:r({active:i,dragOverlay:a,...c}),v=a.node.animate(f,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{v.onfinish=()=>{b==null||b(),x()}})}}let oT=0;function Yae(t){return y.useMemo(()=>{if(t!=null)return oT++,oT},[t])}const Xae=N.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:i,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:d,active:u,activeNodeRect:h,containerNodeRect:f,draggableNodes:p,droppableContainers:g,dragOverlay:b,over:v,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:k,windowRect:C}=FP(),S=y.useContext(gm),T=Yae(u==null?void 0:u.id),E=HP(i,{activatorEvent:d,active:u,activeNodeRect:h,containerNodeRect:f,draggingNodeRect:b.rect,over:v,overlayNodeRect:b.rect,scrollableAncestors:w,scrollableAncestorRects:k,transform:S,windowRect:C}),M=Sw(h),R=Zae({config:r,draggableNodes:p,droppableContainers:g,measuringConfiguration:x}),I=M?b.setRef:void 0;return N.createElement(Fae,null,N.createElement($ae,{animation:R},u&&T?N.createElement(Wae,{key:T,id:u.id,ref:I,as:a,activatorEvent:d,adjustScale:e,className:l,transition:s,rect:M,style:{zIndex:c,...o},transform:E},n):null))});function Tw(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function Qae(t,e){return t.reduce((n,r,o)=>{const s=e.get(r);return s&&(n[o]=s),n},Array(t.length))}function ju(t){return t!==null&&t>=0}function ele(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function tle(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const UP=t=>{let{rects:e,activeIndex:n,overIndex:r,index:o}=t;const s=Tw(e,r,n),i=e[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},Bu={scaleX:1,scaleY:1},nle=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(o===n){const c=s[i];return c?{x:0,y:n<i?c.top+c.height-(a.top+a.height):c.top-a.top,...Bu}:null}const l=rle(s,o,n);return o>n&&o<=i?{x:0,y:-a.height-l,...Bu}:o<n&&o>=i?{x:0,y:a.height+l,...Bu}:{x:0,y:0,...Bu}};function rle(t,e,n){const r=t[e],o=t[e-1],s=t[e+1];return r?n<e?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const WP="Sortable",GP=N.createContext({activeIndex:-1,containerId:WP,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:UP,disabled:{draggable:!1,droppable:!1}});function ole(t){let{children:e,id:n,items:r,strategy:o=UP,disabled:s=!1}=t;const{active:i,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:d}=FP(),u=Yd(WP,n),h=a.rect!==null,f=y.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),p=i!=null,g=i?f.indexOf(i.id):-1,b=c?f.indexOf(c.id):-1,v=y.useRef(f),x=!ele(f,v.current),w=b!==-1&&g===-1||x,k=tle(s);mr(()=>{x&&p&&d(f)},[x,f,p,d]),y.useEffect(()=>{v.current=f},[f]);const C=y.useMemo(()=>({activeIndex:g,containerId:u,disabled:k,disableTransforms:w,items:f,overIndex:b,useDragOverlay:h,sortedRects:Qae(f,l),strategy:o}),[g,u,k.draggable,k.droppable,w,f,b,l,h,o]);return N.createElement(GP.Provider,{value:C},e)}const sle=t=>{let{id:e,items:n,activeIndex:r,overIndex:o}=t;return Tw(n,r,o).indexOf(e)},ile=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==s&&o===i?!1:n?!0:i!==o&&e===l},ale={duration:200,easing:"ease"},qP="transform",lle=As.Transition.toString({property:qP,duration:0,easing:"linear"}),cle={roleDescription:"sortable"};function dle(t){let{disabled:e,index:n,node:r,rect:o}=t;const[s,i]=y.useState(null),a=y.useRef(n);return mr(()=>{if(!e&&n!==a.current&&r.current){const l=o.current;if(l){const c=dl(r.current,{ignoreTransform:!0}),d={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(d.x||d.y)&&i(d)}}n!==a.current&&(a.current=n)},[e,n,r,o]),y.useEffect(()=>{s&&i(null)},[s]),s}function ule(t){let{animateLayoutChanges:e=ile,attributes:n,disabled:r,data:o,getNewIndex:s=sle,id:i,strategy:a,resizeObserverConfig:l,transition:c=ale}=t;const{items:d,containerId:u,activeIndex:h,disabled:f,disableTransforms:p,sortedRects:g,overIndex:b,useDragOverlay:v,strategy:x}=y.useContext(GP),w=hle(r,f),k=d.indexOf(i),C=y.useMemo(()=>({sortable:{containerId:u,index:k,items:d},...o}),[u,o,k,d]),S=y.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:T,node:E,isOver:M,setNodeRef:R}=zP({id:i,data:C,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:I,activatorEvent:L,activeNodeRect:$,attributes:F,setNodeRef:z,listeners:J,isDragging:P,over:B,setActivatorNodeRef:H,transform:Y}=jae({id:i,data:C,attributes:{...cle,...n},disabled:w.draggable}),G=kie(R,z),X=!!I,pe=X&&!p&&ju(h)&&ju(b),He=!v&&P,qe=He&&pe?Y:null,Pe=pe?qe??(a??x)({rects:g,activeNodeRect:$,activeIndex:h,overIndex:b,index:k}):null,Ke=ju(h)&&ju(b)?s({id:i,items:d,activeIndex:h,overIndex:b}):k,Be=I==null?void 0:I.id,ie=y.useRef({activeId:Be,items:d,newIndex:Ke,containerId:u}),Xt=d!==ie.current.items,At=e({active:I,containerId:u,isDragging:P,isSorting:X,id:i,index:k,items:d,newIndex:ie.current.newIndex,previousItems:ie.current.items,previousContainerId:ie.current.containerId,transition:c,wasDragging:ie.current.activeId!=null}),Qt=dle({disabled:!At,index:k,node:E,rect:T});return y.useEffect(()=>{X&&ie.current.newIndex!==Ke&&(ie.current.newIndex=Ke),u!==ie.current.containerId&&(ie.current.containerId=u),d!==ie.current.items&&(ie.current.items=d)},[X,Ke,u,d]),y.useEffect(()=>{if(Be===ie.current.activeId)return;if(Be!=null&&ie.current.activeId==null){ie.current.activeId=Be;return}const Mn=setTimeout(()=>{ie.current.activeId=Be},50);return()=>clearTimeout(Mn)},[Be]),{active:I,activeIndex:h,attributes:F,data:C,rect:T,index:k,newIndex:Ke,items:d,isOver:M,isSorting:X,isDragging:P,listeners:J,node:E,overIndex:b,over:B,setNodeRef:G,setActivatorNodeRef:H,setDroppableNodeRef:R,setDraggableNodeRef:z,transform:Qt??Pe,transition:Rt()};function Rt(){if(Qt||Xt&&ie.current.newIndex===k)return lle;if(!(He&&!fm(L)||!c)&&(X||At))return As.Transition.toString({...c,property:qP})}}function hle(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Uf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const fle=[we.Down,we.Right,we.Up,we.Left],ple=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:a}}=e;if(fle.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const h=o.get(u.id);if(h)switch(t.code){case we.Down:r.top<h.top&&l.push(u);break;case we.Up:r.top>h.top&&l.push(u);break;case we.Left:r.left>h.left&&l.push(u);break;case we.Right:r.left<h.left&&l.push(u);break}});const c=$ie({collisionRect:r,droppableRects:o,droppableContainers:l});let d=EP(c,"id");if(d===(i==null?void 0:i.id)&&c.length>1&&(d=c[1].id),d!=null){const u=s.get(n.id),h=s.get(d),f=h?o.get(h.id):null,p=h==null?void 0:h.node.current;if(p&&f&&u&&h){const b=pm(p).some((S,T)=>a[T]!==S),v=KP(u,h),x=mle(u,h),w=b||!v?{x:0,y:0}:{x:x?r.width-f.width:0,y:x?r.height-f.height:0},k={x:f.left,y:f.top};return w.x&&w.y?k:id(k,w)}}}};function KP(t,e){return!Uf(t)||!Uf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function mle(t,e){return!Uf(t)||!Uf(e)||!KP(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const gle="_selectorCard_1ju1l_2",yle="_selected_1ju1l_6",ble="_closeIcon_1ju1l_16",vle="_resultInput_1ju1l_20",wle="_addCustomField_1ju1l_24",xle="_selector_1ju1l_2",kle="_listItemMeta_1ju1l_35",Cle="_item_1ju1l_42",io={selectorCard:gle,selected:yle,closeIcon:ble,resultInput:vle,addCustomField:wle,selector:xle,listItemMeta:kle,item:Cle},Sle="_blurContainer_dfxrr_2",Tle="_visible_dfxrr_18",Ele="_container_dfxrr_22",ey={blurContainer:Sle,visible:Tle,container:Ele};function ZP({children:t,visible:e,className:n,onBlur:r}){const[o,s]=y.useState(e);y.useEffect(()=>{e&&s(!0)},[e]);const i=yw({translateX:e?-100:0,opacity:e?1:0,onRest:()=>{e||s(!1)}});return!e&&!o?null:kt.createPortal(m.jsx(Bf.div,{className:le(ey.blurContainer,e&&ey.visible),onClick:r,style:{visibility:o?"visible":"hidden",opacity:i.opacity},children:m.jsx(Bf.div,{className:le(ey.container,n),onClick:a=>a.stopPropagation(),style:{transform:i.translateX.to(a=>`translateY(${a}%)`),opacity:i.opacity},children:t})}),document.getElementById("drawer-global-root"))}const Mle="_customeFieldInput_x2u4g_2",Ale="_addFieldButtonContainer_x2u4g_12",ty={customeFieldInput:Mle,addFieldButtonContainer:Ale},Rle=({className:t,onSubmit:e})=>{const n=Bt(),[r,o]=N.useState({icon:"octicon:goal-24",selectedIconColor:"#607d8b",type:"metric",title:"",unit:"",description:""}),{addRecordField:s}=I0();return m.jsxs("div",{className:le(t),children:[m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Field Name",id:"label-record-custom.name.label"}),description:n.formatMessage({defaultMessage:"Ex: Push-ups, Squats",id:"label-record-custom.name.description"}),rightComponent:m.jsx(mo,{value:r.title,onChange:i=>o({...r,title:i.target.value}),border:"dash",className:ty.customeFieldInput})}),m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{value:r.unit,width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Field Unit",id:"label-record-custom.unit.label"}),description:n.formatMessage({defaultMessage:"Ex: minutes, hours, reps, kg",id:"label-record-custom.unit.description"}),rightComponent:m.jsx(mo,{border:"dash",onChange:i=>o({...r,unit:i.target.value}),className:ty.customeFieldInput})}),m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Type",id:"label-record-custom.type.label"}),rightComponent:m.jsx(vy,{isButton:!0,value:r.type,onChangeValue:i=>o({...r,type:i}),options:[{label:"Metric",value:"metric"},{label:"Note",value:"note"}]})}),m.jsx(wP,{selectedIcon:r.icon,setSelectedIcon:i=>o({...r,icon:i}),selectedColor:r.selectedIconColor,setSelectedColor:i=>o({...r,selectedIconColor:i})}),m.jsx("div",{className:ty.addFieldButtonContainer,children:m.jsx(St,{block:!0,size:"lg",type:"primary",onClick:()=>{s(r),e==null||e()},children:n.formatMessage({defaultMessage:"Save",id:"label-record-custom.save"})})})]})},_le="_container_1bkp1_2",Ile="_drawer_1bkp1_6",Nle="_header_1bkp1_14",ny={container:_le,drawer:Ile,header:Nle},Dle=({visible:t,onClose:e})=>{const n=Bt();return m.jsxs(ZP,{className:ny.drawer,visible:t,onBlur:e,children:[m.jsxs("div",{className:ny.header,children:[m.jsx(ae.Title,{noMargin:!0,level:3,children:n.formatMessage({defaultMessage:"Add more field to record",id:"label-record-custom.title"})}),m.jsx(Q,{width:32,icon:"material-symbols:close-rounded",onClick:e})]}),m.jsx(Rle,{className:ny.container,onSubmit:e})]})},Ple="_groupContainer_1700i_2",Ole="_groupOver_1700i_12",Lle="_groupTitle_1700i_17",ry={groupContainer:Ple,groupOver:Ole,groupTitle:Lle},jle=({id:t,title:e,items:n,children:r})=>{const{setNodeRef:o,isOver:s}=zP({id:t,data:{type:"Group",items:n}});return m.jsxs("div",{ref:o,className:le(ry.groupContainer,s&&ry.groupOver),children:[m.jsx(ae.Title,{noMargin:!0,level:4,className:ry.groupTitle,children:e}),m.jsx(ole,{items:n,strategy:nle,children:r})]})},Ble=({id:t,children:e,isDragging:n})=>{const{attributes:r,listeners:o,setNodeRef:s,transform:i,transition:a}=ule({id:t}),l={transform:As.Transform.toString(i),transition:a,opacity:n?0:1};return m.jsx("div",{ref:s,style:l,...r,...o,children:e})},Vle=({selectedRecords:t=[],setSelectedRecords:e,fieldGroups:n,setFieldGroups:r})=>{const{getAllRecordFields:o}=I0(),s=Bt(),[i,a]=N.useState(!1),[l,c]=N.useState(o()),[d,u]=N.useState(null);N.useEffect(()=>{c(o())},[]);const h=Lie(W2(Cw),W2(xw,{coordinateGetter:ple})),f=k=>{if(k in n)return k;for(const C of n)if(C.fields.includes(k))return C.id;return null},p=k=>l.find(C=>C.id===k),g=k=>{u(k.active.id)},b=k=>{var M,R;const{active:C,over:S}=k;if(u(null),!S)return;const T=f(C.id),E=f(S.id);if(T&&E&&T===E){const I=[...n],L=I.findIndex($=>$.id===T);if(L!==-1){const $=I[L].fields.indexOf(C.id),F=I[L].fields.indexOf(S.id);I[L].fields=Tw(I[L].fields,$,F)}r(I)}else if(T&&E&&T!==E){const I=[...n],L=I.findIndex(F=>F.id===T),$=I.findIndex(F=>F.id===E);if(L!==-1&&$!==-1){const[F]=I[L].fields.splice(I[L].fields.indexOf(C.id),1),z=I[$].fields.indexOf(S.id);z!==-1?I[$].fields.splice(z,0,F):I[$].fields.push(F)}r(I)}else if(T&&((R=(M=S.data)==null?void 0:M.current)==null?void 0:R.type)==="Group"&&T!==S.id){const I=[...n],L=I.findIndex(F=>F.id===T),$=I.findIndex(F=>F.id===S.id);if(L!==-1&&$!==-1){const[F]=I[L].fields.splice(I[L].fields.indexOf(C.id),1);I[$].fields.push(F)}r(I)}},v=({id:k})=>{const C=new Set([...t,k]);e([...C]);const S=[...n];S.some(E=>E.fields.includes(k))||r([...S,{id:rn(),title:s.formatMessage({id:"label-group",defaultMessage:"Group"})+` ${S.length+1}`,fields:[k]}])},x=k=>{e(t.filter(S=>S!==k));const C=n.map(S=>({...S,fields:S.fields.filter(T=>T!==k)})).filter(S=>S.fields.length>0);r(C)},w=d?p(d):null;return m.jsxs("div",{children:[m.jsx(Dle,{visible:i,onClose:()=>a(!1)}),m.jsx(xie,{options:l.map(k=>({...k,label:k.title,value:k.id})),classes:{container:io.selector},renderInput:()=>t.length===0?m.jsx(ae.Text,{children:"Record & Metric"}):m.jsx("div",{className:io.resultInput,children:t.map(k=>{const C=l.find(S=>S.id===k);return m.jsxs("div",{className:io.selected,children:[m.jsx(ae.Text,{children:C==null?void 0:C.title}),m.jsx(Q,{icon:"material-symbols:close-rounded",width:16,height:16,className:io.closeIcon,onClick:()=>x(k)})]},k)})}),renderOptionFooter:({close:k})=>m.jsx("div",{onClick:()=>{a(!0),k()},className:io.addCustomField,children:m.jsx(ae.Text,{children:s.formatMessage({id:"label-add-custom-field",defaultMessage:"Add custom field"})})}),onChange:({id:k},{close:C})=>{C(),v({id:k})},renderOption:k=>m.jsx(dt.ItemMeta,{className:io.selectorCard,logo:m.jsx(Q,{width:24,icon:k.icon}),title:k.title,description:k.description})}),m.jsxs(Pae,{sensors:h,collisionDetection:Vie,onDragStart:g,onDragEnd:b,children:[m.jsx("div",{className:io.groupsContainer,children:n.map(k=>m.jsx(jle,{id:k.id,title:k.title,items:k.fields,children:k.fields.map(C=>{const S=p(C);return S?m.jsx(Ble,{id:C,children:m.jsx(dt.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"ci:drag-vertical"}),className:io.item,title:S.title,description:S.description})},C):null})},k.id))}),m.jsx(Xae,{children:d&&w?m.jsx(dt.ItemMeta,{className:io.listItemMeta,logo:m.jsx(Q,{width:24,icon:"ci:drag-vertical"}),title:w.title,description:w.description,style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.15)",padding:"15px",width:"300px"}}):null})]})]})},$le="_menu_7b4nn_2",Hle="_input_7b4nn_7",Fle="_container_7b4nn_27",zle="_submitButton_7b4nn_31",Ule="_footer_7b4nn_48",Wle="_footerCenter_7b4nn_60",Us={menu:$le,input:Hle,container:Fle,submitButton:zle,footer:Ule,footerCenter:Wle},JP=({initialValues:t,onSubmit:e})=>{const[n,r]=N.useState(t),{selectedRecords:o,checklistText:s,weeklyHobbies:i,startedAt:a,selectedIcon:l,selectedColor:c,fieldGroups:d}=n,u=w=>{r(k=>({...k,selectedRecords:w}))},h=w=>{r(k=>({...k,checklistText:w}))},f=w=>{r(k=>({...k,weeklyHobbies:w}))},p=w=>{r(k=>({...k,startedAt:w}))},g=w=>{r(k=>({...k,selectedIcon:w}))},b=w=>{r(k=>({...k,selectedColor:w}))},v=w=>{r(k=>({...k,fieldGroups:w}))},x=Bt();return m.jsxs("div",{className:Us.container,children:[m.jsxs(jr,{className:Us.container,children:[m.jsx("div",{className:Us.menu}),m.jsx(zte,{placeholder:x.formatMessage({id:"CreateChecklist.label-create-checklist-input-placeholder",defaultMessage:"Write your task here"}),className:Us.input,maxRows:3,autoFocus:!0,onChange:w=>{h(w.currentTarget.value)},value:s}),m.jsx(nie,{values:i,setValues:f}),m.jsx(Kl,{}),m.jsx(wP,{selectedIcon:l,setSelectedIcon:g,selectedColor:c,setSelectedColor:b}),m.jsx(Kl,{}),m.jsx(xoe,{date:a,setDate:p}),m.jsx(Kl,{}),m.jsx(Vle,{selectedRecords:o,setSelectedRecords:u,fieldGroups:d,setFieldGroups:v})]}),m.jsx("div",{className:Us.footer,children:m.jsx("div",{className:Us.footerCenter,children:m.jsx(St,{type:"primary",className:Us.submitButton,onClick:()=>{const w=d.filter(k=>k.fields.length>0);e({...n,fieldGroups:w})},children:x.formatMessage({id:"CreateChecklist.label-submit",defaultMessage:"SUBMIT"})})})})]})},YP=({weeklyHobbies:t})=>{if(!(!t||t.length===0))return t.length===7?{startedAt:new Date().toISOString(),dayOfWeek:"*",minute:"0",hour:"8",dayOfMonth:"*",month:"*"}:{startedAt:new Date().toISOString(),minute:"0",hour:"8",dayOfMonth:"*",month:"*",dayOfWeek:t.map(e=>{switch(e){case se.Mon:return"1";case se.Tue:return"2";case se.Wed:return"3";case se.Thu:return"4";case se.Fri:return"5";case se.Sat:return"6";case se.Sun:return"0"}}).join(",")}},Gle=()=>{const t=new Date;return[se.Sun,se.Mon,se.Tue,se.Wed,se.Thu,se.Fri,se.Sat][t.getDay()]},qle=()=>{const{addChecklistTemplate:t}=vs(),{addChecklist:e}=tp(),n=yr(),r=({startedAt:o,selectedRecords:s,selectedColor:i,selectedIcon:a,checklistText:l,weeklyHobbies:c,fieldGroups:d})=>{const u=YP({weeklyHobbies:c}),{id:h}=t({title:l,repeat:u,avatar:{type:"icon",name:a,color:i},records:s,fieldGroups:d});u||e({title:l,checklistTemplateId:h,startedAt:o,endedAt:new Date(new Date(o).setHours(23,59,59,999)).toISOString()}),n("/")};return m.jsxs(m.Fragment,{children:[m.jsx(vd,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Create Task"}),onClickLeftButton:()=>n("/")}),m.jsx(JP,{onSubmit:r,initialValues:{selectedRecords:[],checklistText:"",weeklyHobbies:[Gle()],startedAt:new Date().toISOString().split("T")[0],selectedIcon:"material-symbols:checklist",selectedColor:"#607d8b",fieldGroups:[]}})]})},Kle=t=>t!=null&&t.dayOfWeek?t.dayOfWeek==="*"?[se.Sun,se.Mon,se.Tue,se.Wed,se.Thu,se.Fri,se.Sat]:t.dayOfWeek.split(",").map(e=>{switch(e){case"0":return se.Sun;case"1":return se.Mon;case"2":return se.Tue;case"3":return se.Wed;case"4":return se.Thu;case"5":return se.Fri;case"6":return se.Sat;default:return se.Sun}}):[new Date().getDay()],Zle=()=>{var i,a,l;const{checklistTemplate:t}=vs(),{id:e}=NE(),n=t[e||""],{updateChecklistTemplate:r}=vs(),o=yr(),s=({startedAt:c,selectedRecords:d,selectedColor:u,selectedIcon:h,checklistText:f,weeklyHobbies:p,fieldGroups:g})=>{const b=YP({weeklyHobbies:p});r({id:n.id,records:d,title:f,repeat:b,avatar:{type:"icon",name:h,color:u},fieldGroups:g}),o("/")};return m.jsxs(m.Fragment,{children:[m.jsx(vd,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Edit Task"}),onClickLeftButton:()=>o("/")}),m.jsx(JP,{onSubmit:s,initialValues:{selectedRecords:n.records,checklistText:n.title,weeklyHobbies:Kle(n.repeat),startedAt:(i=n==null?void 0:n.repeat)!=null&&i.startedAt?new Date(n.repeat.startedAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],selectedIcon:(a=n==null?void 0:n.avatar)==null?void 0:a.name,selectedColor:((l=n==null?void 0:n.avatar)==null?void 0:l.color)||"#607d8b",fieldGroups:n.fieldGroups}})]})},Jle="_container_1czko_1",Yle={container:Jle},Xle=()=>{const{chartData:t,updateChartDate:e}=E0();N.useEffect(()=>{e()},[]);const n={stroke:{curve:"smooth"},fill:{type:"gradient"},xaxis:{categories:t==null?void 0:t.categories}},r=[{name:"weight",data:t==null?void 0:t.weights},{name:"belly's size",data:t==null?void 0:t.bellySizes}];return!t||!t.categories||(t==null?void 0:t.categories.length)===0||(t==null?void 0:t.weights.length)===0||(t==null?void 0:t.bellySizes.length)===0?null:m.jsxs(jr,{className:Yle.container,children:[m.jsx(ae.Title,{level:3,noMargin:!0,children:"Timeline"}),m.jsx(LD,{options:n,series:r,type:"line"})]})},Qle="_header_1oykc_1",ece="_iconSuccess_1oykc_7",tce="_numberInput_1oykc_13",nce="_kgText_1oykc_21",rce="_titleAnswer_1oykc_27",oce="_iconAnswerContainer_1oykc_33",sce="_inputContainer_1oykc_37",ice="_questionTitle_1oykc_44",ace="_divider_1oykc_48",lce="_editFooter_1oykc_54",_e={header:Qle,iconSuccess:ece,numberInput:tce,kgText:nce,titleAnswer:rce,iconAnswerContainer:oce,inputContainer:sce,questionTitle:ice,divider:ace,editFooter:lce},cce="_player_109l2_14",dce="_currentContainer_109l2_19",uce="_icon_109l2_33",Vu={player:cce,currentContainer:dce,icon:uce},hce=t=>new Date(t.getTime()-24*60*60*1e3),fce=t=>new Date(t.getTime()+24*60*60*1e3),pce=({date:t,onDateChange:e,getText:n})=>{const r=new Date(t).toLocaleDateString()===new Date().toLocaleDateString();return m.jsxs("div",{className:Vu.player,children:[m.jsx(Q,{onClick:()=>e(hce(t)),width:30,icon:"basil:skip-prev-outline",className:Vu.icon}),m.jsx("div",{className:Vu.currentContainer,onClick:()=>e(new Date),children:n({isToday:r})}),m.jsx(Q,{onClick:()=>e(fce(t)),width:30,icon:"basil:skip-next-outline",className:Vu.icon})]})},mce="_container_fgz2s_1",gce={container:mce},sT=()=>{const[t,e]=N.useState(new Date),{updateCurrentBodyMetric:n}=E0(),r=o=>{e(o),n({date:o})};return m.jsx("div",{className:gce.container,children:m.jsx(pce,{date:t,onDateChange:r,getText:({isToday:o})=>o?"Today":new Date(t).toLocaleDateString()})})},yce=()=>{const[t,e]=N.useState(40),[n,r]=N.useState(50),{addBodyMetric:o,currentBodyMetric:s,currentDay:i}=E0(),[a,l]=N.useState(!!s);N.useEffect(()=>{l(!!s)},[s]),N.useEffect(()=>{s&&(e(s.weight),r(s.bellySize))},[s]);const c=Bt();return a&&s?m.jsxs(jr,{children:[m.jsx(sT,{}),m.jsxs("div",{className:_e.header,children:[m.jsx(Q,{width:100,color:"rgba(16,154,0,0.16)",icon:"ion:checkmark-done-circle-outline",className:_e.iconSuccess}),m.jsx(ae.Title,{level:3,className:_e.questionTitle,children:c.formatMessage({id:"pregnant-weight-record.label-recorded",defaultMessage:"You've already recorded your weight and belly's size."})})]}),m.jsx("div",{className:_e.divider}),m.jsxs("div",{className:_e.inputContainer,children:[m.jsxs("div",{className:_e.iconAnswerContainer,children:[m.jsx(Q,{width:24,icon:"icon-park-outline:industrial-scales"}),m.jsx(ae.Text,{className:_e.titleAnswer,children:"Weight"})]}),m.jsx(mo,{type:"number",readOnly:!0,className:_e.numberInput,value:s.weight,step:"0.01",min:20,max:120}),m.jsx(ae.Text,{className:_e.kgText,children:"Kg"})]}),m.jsxs("div",{className:_e.inputContainer,children:[m.jsxs("div",{className:_e.iconAnswerContainer,children:[m.jsx(Q,{width:24,icon:"twemoji:straight-ruler"}),m.jsx(ae.Text,{className:_e.titleAnswer,children:"Belly's Size"})]}),m.jsx(mo,{type:"number",readOnly:!0,className:_e.numberInput,value:s.bellySize,step:"0.01",min:20,max:120}),m.jsx(ae.Text,{className:_e.kgText,children:"Cm"})]}),m.jsx("div",{className:_e.editFooter,children:m.jsx(St,{onClick:()=>{l(!1)},children:"EDIT"})})]}):m.jsxs(jr,{children:[m.jsx(sT,{}),m.jsx("div",{children:m.jsx(ae.Title,{level:3,className:_e.questionTitle,children:c.formatMessage({id:"pregnant-weight-record.label-pregnant-weight",defaultMessage:"What's your weight {{day}}? And how's your belly growing, mama?"},{day:new Date(i).toLocaleDateString()===new Date().toLocaleDateString()?"today":new Date(i).toLocaleDateString()})})}),m.jsx("div",{className:_e.divider}),m.jsxs("div",{className:_e.inputContainer,children:[m.jsxs("div",{className:_e.iconAnswerContainer,children:[m.jsx(Q,{width:24,icon:"icon-park-outline:industrial-scales"}),m.jsx(ae.Text,{className:_e.titleAnswer,children:"Weight"})]}),m.jsx(mo,{type:"number",border:"dash",className:_e.numberInput,onChange:d=>e(Number(d.target.value)),value:t,step:"0.01",min:20,max:120}),m.jsx(ae.Text,{className:_e.kgText,children:"Kg"})]}),m.jsxs("div",{className:_e.inputContainer,children:[m.jsxs("div",{className:_e.iconAnswerContainer,children:[m.jsx(Q,{width:24,icon:"twemoji:straight-ruler"}),m.jsx(ae.Text,{className:_e.titleAnswer,children:"Belly's Size"})]}),m.jsx(mo,{type:"number",border:"dash",className:_e.numberInput,value:n,onChange:d=>r(Number(d.target.value)),step:"0.01",min:20,max:120}),m.jsx(ae.Text,{className:_e.kgText,children:"Cm"})]}),m.jsx(St,{onClick:()=>{o({weight:t,bellySize:n,createdAt:i.toISOString()}),l(!0)},children:"SUBMIT"})]})},bce=()=>m.jsxs("div",{children:[m.jsx(yce,{}),m.jsx(Xle,{})]});function vce(t){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...t,children:m.jsx("g",{id:"warning_amber_24px",children:m.jsx("path",{id:"icon/alert/warning_amber_24px",fillRule:"evenodd",clipRule:"evenodd",d:"M4.46999 20.5037C2.93001 20.5037 1.96999 18.8337 2.74001 17.5037L10.27 4.49374C11.04 3.16375 12.96 3.16375 13.73 4.49374L21.26 17.5037C22.03 18.8337 21.07 20.5037 19.53 20.5037H4.46999ZM19.53 18.5037L12 5.49374L4.46999 18.5037H19.53ZM11 10.5037V12.5037C11 13.0537 11.45 13.5037 12 13.5037C12.55 13.5037 13 13.0537 13 12.5037V10.5037C13 9.95376 12.55 9.50375 12 9.50375C11.45 9.50375 11 9.95376 11 10.5037ZM13 17.5037V15.5037H11V17.5037H13Z"})})})}const wce="_container_1avzj_1",xce={container:wce};function kce(){return m.jsx("hr",{className:xce.container})}const Cce="_overlay_1ach8_2",Sce="_container_1ach8_17",Tce="_content_1ach8_29",Ece="_footer_1ach8_34",Mce="_header_1ach8_44",Ace="_logo_1ach8_49",Rce="_icon_1ach8_64",_ce="_title_1ach8_70",Ice="_primaryButton_1ach8_74",Nce="_secondaryButton_1ach8_81",Sr={overlay:Cce,container:Sce,content:Tce,footer:Ece,header:Mce,logo:Ace,icon:Rce,title:_ce,primaryButton:Ice,secondaryButton:Nce};function Dce({visible:t,primaryButtonText:e,secondaryButtonText:n,primaryButtonOnClick:r,secondaryButtonClick:o,content:s,title:i}){return t?m.jsx("div",{className:Sr.overlay,children:m.jsxs("div",{className:Sr.container,children:[m.jsxs("div",{className:Sr.header,children:[m.jsx("div",{className:Sr.logo,children:m.jsx(vce,{className:Sr.icon})}),m.jsx(ae.Title,{className:Sr.title,level:3,noMargin:!0,children:i})]}),m.jsx(kce,{}),m.jsx("div",{className:Sr.content,children:s}),m.jsxs("div",{className:Sr.footer,children:[m.jsx(St,{size:"lg",type:"ghost",className:Sr.secondaryButton,onClick:o,children:n}),m.jsx(St,{onClick:r,size:"lg",className:Sr.primaryButton,children:e})]})]})}):null}const Pce="_card_1reeb_1",Oce="_checklistItem_1reeb_6",Lce="_checklistTemplateContainer_1reeb_11",jce="_checklistBody_1reeb_16",Bce="_text_1reeb_21",Vce="_checkbox_1reeb_26",$ce="_label_1reeb_31",Hce="_enabled_1reeb_40",Fce="_footer_1reeb_45",zce="_editIcon_1reeb_49",Uce="_deleteIcon_1reeb_60",_n={card:Pce,checklistItem:Oce,checklistTemplateContainer:Lce,checklistBody:jce,text:Bce,checkbox:Vce,label:$ce,enabled:Hce,footer:Fce,editIcon:zce,deleteIcon:Uce},Wce=()=>{const{getRecommendChecklistTemplates:t,selectedChecklistTemplates:e,updateSelectedChecklistTemplate:n,deleteChecklistTemplate:r}=vs(),o=Bt(),s=yr(),[i,a]=N.useState(!1),[l,c]=N.useState(null),d=p=>{var v;const g=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],b=((v=p==null?void 0:p.dayOfWeek)==null?void 0:v.split(","))||[];return b.includes("*")?[{enabled:!0,text:o.formatMessage({id:"PregnantIntro.repeat.everyday",defaultMessage:"Every day"})}]:[0,1,2,3,4,5,6].map(x=>({day:x,enabled:b.includes(x.toString())||b.includes("*"),text:o.formatMessage({id:`PregnantIntro.repeat.${x}`,defaultMessage:g[x]})}))},u=p=>{c(p),a(!0)},h=()=>{l&&(r(l),a(!1),c(null))},f=()=>{a(!1),c(null)};return m.jsxs(m.Fragment,{children:[m.jsx(vd,{renderLeftComponent:()=>o.formatMessage({id:"ChecklistTemplatePageInfo.back",defaultMessage:"Back"})}),m.jsx(jr,{className:_n.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:_n.label,children:o.formatMessage({id:"PregnantIntro.checklists-management",defaultMessage:"Checklist Template Management"})}),t().map(({id:p,title:g,avatar:b,repeat:v})=>m.jsxs("div",{className:_n.checklistTemplateContainer,children:[m.jsxs("div",{className:_n.checklistItem,children:[m.jsx(Q,{color:b.color||"#8A8A8A",width:32,height:32,icon:b.name}),m.jsx("div",{className:_n.checklistBody,children:m.jsx(ae.Text,{className:_n.text,children:g})}),m.jsx(Q,{className:_n.editIcon,width:24,height:24,icon:"material-symbols:edit-outline",onClick:()=>s(`/edit-checklist/${p}`)}),m.jsx(Q,{className:_n.deleteIcon,width:24,height:24,icon:"material-symbols:delete-outline",onClick:()=>u(p)}),m.jsx(nw,{checked:e.includes(p),onChange:x=>{const w=x.target.checked;n(w?[...e,p]:e.filter(k=>k!==p))},className:_n.checkbox})]}),m.jsx("div",{className:_n.footer,children:d(v).map(({enabled:x,text:w})=>m.jsx(ae.Text,{className:le(_n.text,{[_n.enabled]:x}),children:w},w))})]},p))]})}),m.jsx(Dce,{visible:i,title:o.formatMessage({id:"ChecklistTemplate.delete-confirm-title",defaultMessage:"Delete Checklist Template"}),primaryButtonText:o.formatMessage({id:"ChecklistTemplate.delete-confirm-ok",defaultMessage:"Delete"}),primaryButtonOnClick:h,secondaryButtonText:o.formatMessage({id:"ChecklistTemplate.delete-confirm-cancel",defaultMessage:"Cancel"}),secondaryButtonClick:f,content:m.jsx(ae.Text,{children:o.formatMessage({id:"ChecklistTemplate.delete-confirm-message",defaultMessage:"Are you sure you want to delete this checklist template? This action cannot be undone."})})})]})},Gce=JSON.parse(`[{"identify_key":"the_golden_heart","name":"The Golden Heart","detail":"In a small village nestled between rolling hills and a dense forest, there lived a young girl named Lily. Unlike other children who spent their days playing games, Lily spent her time helping others. She would carry water for the elderly, gather firewood for widows, and share her lunch with those who had none.\\n\\nOne particularly harsh winter, when food was scarce and the cold was unbearable, Lily noticed that many villagers were suffering. Despite having little herself, she decided to venture into the forest to find food and supplies for everyone. The forest was known to be dangerous, especially in winter, but Lily's heart was set on helping others.\\n\\nAs she wandered deeper into the forest, she came across an injured fox caught in a hunter's trap. While others might have passed by, Lily stopped to help. She carefully freed the fox, bandaged its wound, and shared her last piece of bread with it. To her surprise, the fox spoke to her in a gentle voice.\\n\\n'I am the Guardian of the Forest,' the fox said. 'Your kindness has touched my heart. I will help you find what you seek.' The fox led Lily to a hidden grove where magical plants grew year-round. There, she found enough food and medicinal herbs to help the entire village.\\n\\nBut the fox had one more gift. It touched Lily's chest with its paw, and her heart began to glow with a golden light. 'This is the mark of true kindness,' the fox explained. 'As long as you continue to help others, this light will guide you and protect you.'\\n\\nLily returned to the village with the supplies, and her golden heart became a beacon of hope. The villagers, inspired by her selflessness, began to help each other more. The village flourished, and Lily's story spread far and wide, teaching everyone that true wealth lies not in gold or possessions, but in the kindness we show to others.\\n\\nYears passed, and Lily grew into a wise woman. Her golden heart continued to glow, becoming brighter with each act of kindness she performed. The village became known as the Village of the Golden Heart, a place where people lived in harmony and helped one another without hesitation.","lesson":"True wealth and happiness come from helping others. Kindness is a gift that grows stronger the more you share it, and it has the power to transform not just individuals, but entire communities. When we put others before ourselves, we create a world where everyone can thrive."},{"identify_key":"the_patient_gardener","name":"The Patient Gardener","detail":"In a bustling city, there lived an old gardener named Mr. Chen. His small garden was the most beautiful in the neighborhood, filled with flowers that bloomed in perfect harmony. People often asked him his secret, but he would just smile and say, 'Patience and care.'\\n\\nOne spring, a young boy named Tom moved next door. He was eager to grow his own garden and asked Mr. Chen for help. The old gardener gave him some seeds and basic instructions, but Tom wanted results immediately. He watered the seeds too much, dug them up to check their progress, and became frustrated when nothing grew.\\n\\nMr. Chen watched quietly, then invited Tom to help in his garden. Day by day, he taught the boy about the importance of patience. 'Plants, like people, need time to grow,' he explained. 'You cannot rush nature.'\\n\\nAs the weeks passed, Tom learned to observe the subtle changes in his plants. He discovered that growth happens slowly, often when we're not looking. His garden began to flourish, and he found joy in the process of nurturing life.\\n\\nYears later, Tom became a successful botanist, known for his innovative methods. But he always credited Mr. Chen for teaching him the most important lesson: that true growth comes from patience and consistent care.","lesson":"Patience is a virtue that leads to lasting success. Growth takes time, and rushing the process often leads to failure. By learning to wait and nurture things properly, we can achieve beautiful results that last."},{"identify_key":"the_honest_merchant","name":"The Honest Merchant","detail":"In a busy marketplace, there was a merchant named Sarah who ran a small shop selling handmade crafts. While other merchants would sometimes exaggerate the quality of their goods to make sales, Sarah always told the truth about her products.\\n\\nOne day, a wealthy customer came to her shop looking for a special gift. Sarah showed her a beautiful vase, but honestly pointed out a small flaw that others might have hidden. The customer was surprised by her honesty and bought the vase anyway.\\n\\nWord of Sarah's integrity spread, and soon her shop became the most trusted in the market. People knew they could rely on her to tell the truth, even if it meant losing a sale. Her business grew steadily, while other merchants who had been dishonest found their customers leaving.\\n\\nYears later, when the market faced tough times, Sarah's shop remained strong. Her loyal customers supported her because they knew they could trust her completely. She became known as the merchant who proved that honesty is not just the best policy, but the most profitable one too.","lesson":"Honesty builds trust and lasting relationships. While it might seem easier to tell small lies for immediate gain, the truth always leads to better long-term success. Integrity is the foundation of any lasting business or relationship."},{"identify_key":"the_brave_little_turtle","name":"The Brave Little Turtle","detail":"In a peaceful pond, there lived a small turtle named Timmy. Unlike other turtles who spent their days basking in the sun, Timmy dreamed of exploring the world beyond the pond. The other turtles warned him about the dangers outside, but Timmy's curiosity grew stronger each day.\\n\\nOne morning, Timmy decided to venture beyond the pond's edge. The journey was difficult - he had to climb steep banks, cross a busy road, and face many challenges. But Timmy's determination never wavered.\\n\\nAlong the way, he met a lost baby bird who had fallen from its nest. Despite being small and slow, Timmy helped the bird find its way home. This act of kindness earned him the respect of the forest animals, who helped him on his journey.\\n\\nWhen Timmy finally reached the ocean, he discovered a whole new world of possibilities. He learned that being brave doesn't mean being fearless, but rather facing your fears and moving forward despite them. Timmy's adventures taught him that the world is full of wonder for those who dare to explore it.","lesson":"Courage is not the absence of fear, but the willingness to face it. By stepping out of our comfort zones, we discover new possibilities and grow stronger. Every challenge we overcome makes us more capable of handling future obstacles."},{"identify_key":"the_sharing_tree","name":"The Sharing Tree","detail":"In a magical forest, there stood an ancient tree that bore the most delicious fruits. The tree had a special rule: it would only give fruit to those who shared with others. Many animals came to the tree, but only those who understood the value of sharing received its gifts.\\n\\nOne summer, a young squirrel named Sammy discovered the tree. He was hungry and wanted to keep all the fruit for himself. But the tree remained silent, its branches empty. Sammy tried everything to get the fruit, but nothing worked.\\n\\nOne day, Sammy noticed a hungry bird nearby. Remembering his own hunger, he shared his last acorn with the bird. To his surprise, the tree suddenly bore fruit, and Sammy received more than he could have imagined.\\n\\nAs time passed, Sammy became known as the most generous squirrel in the forest. He learned that the more he shared, the more the tree gave him. The forest became a happier place as animals learned from Sammy's example, understanding that sharing brings abundance to everyone.","lesson":"Sharing creates abundance for everyone. When we give freely to others, we often receive more in return. Generosity creates a cycle of giving and receiving that benefits the entire community."},{"identify_key":"the_persistent_ant","name":"The Persistent Ant","detail":"In a vast garden, there lived a tiny ant named Andy. While other ants worked together in large groups, Andy preferred to work alone. He was determined to build the biggest anthill in the garden, despite being told it was impossible for one ant.\\n\\nDay after day, Andy carried grains of sand and small pebbles, building his hill one piece at a time. Other ants laughed at his efforts, but Andy never gave up. When storms came and destroyed his work, he simply started again.\\n\\nOne particularly bad storm left many ants homeless. Andy, who had built his hill strong and tall, opened his home to those in need. The other ants were amazed by his achievement and his kindness.\\n\\nThrough his persistence, Andy proved that even the smallest creature can achieve great things. His story taught the other ants that determination and hard work can overcome any obstacle, and that helping others makes success even sweeter.","lesson":"Persistence and determination can overcome any obstacle. Even the smallest efforts, when continued consistently, can lead to great achievements. Never underestimate the power of steady, focused work."},{"identify_key":"the_wise_owl","name":"The Wise Owl","detail":"In a tall oak tree, there lived an old owl named Oliver. He was known throughout the forest for his wisdom and ability to solve problems. Animals would come to him with their troubles, and he would listen carefully before offering advice.\\n\\nOne day, a group of young animals came to Oliver with a problem: they couldn't agree on how to share the forest's resources. Each wanted what was best for their own kind, leading to constant arguments.\\n\\nInstead of telling them what to do, Oliver asked them to look at the forest from his high perch. From there, they could see how everything was connected - how the trees provided homes for birds, how the streams watered the plants, and how each creature played a vital role.\\n\\nThe young animals realized that working together would benefit everyone. They learned that true wisdom comes from understanding how all parts of a system work together, and that cooperation leads to better solutions than competition.","lesson":"Wisdom comes from seeing the bigger picture and understanding how everything is connected. By working together and considering different perspectives, we can find solutions that benefit everyone."},{"identify_key":"the_grateful_rabbit","name":"The Grateful Rabbit","detail":"In a beautiful meadow, there lived a rabbit named Rosie who always found something to be grateful for, even on the darkest days. When it rained, she was thankful for the water that helped the flowers grow. When it was cold, she appreciated her warm burrow.\\n\\nOne winter, a terrible storm destroyed many animals' homes. While others complained about their losses, Rosie focused on what she still had - her family, her health, and her ability to help others.\\n\\nRosie organized the animals to help each other rebuild. She showed them how to find joy in small things, like a warm ray of sunshine or a shared meal. Her positive attitude inspired others to look for the good in every situation.\\n\\nAs the meadow recovered, the animals realized that Rosie's gratitude had helped them all survive the hard times. They learned that being thankful for what we have makes us stronger and helps us face life's challenges with hope.","lesson":"Gratitude transforms our perspective and helps us find joy in every situation. By focusing on what we have rather than what we lack, we can maintain hope and strength even in difficult times."},{"identify_key":"the_creative_caterpillar","name":"The Creative Caterpillar","detail":"In a colorful garden, there lived a caterpillar named Clara who saw the world differently from others. While other caterpillars followed the same paths and ate the same leaves, Clara explored new places and tried different foods.\\n\\nSome caterpillars thought Clara was strange, but she didn't mind. She believed that being different was a gift. She used her unique perspective to solve problems in new ways, like finding alternative food sources when the usual leaves were scarce.\\n\\nWhen it was time to build her cocoon, Clara chose a special spot that others had never considered. Her transformation was different too - she emerged as a butterfly with the most beautiful and unique pattern in the garden.\\n\\nClara's story taught the other creatures that being different is not a weakness but a strength. Her creativity and willingness to try new things led to discoveries that benefited the entire garden.","lesson":"Creativity and being different are strengths, not weaknesses. By embracing our uniqueness and thinking outside the box, we can find new solutions and create beautiful things that others might never imagine."},{"identify_key":"the_friendly_dragon","name":"The Friendly Dragon","detail":"In a kingdom surrounded by mountains, there lived a dragon named Drake. Unlike other dragons who hoarded gold and scared villagers, Drake was kind and helpful. He used his fire breath to light the town's lamps and his wings to create gentle breezes for the crops.\\n\\nAt first, the villagers were afraid of Drake, but he patiently showed them that he meant no harm. He helped build bridges, cleared paths through the mountains, and even babysat the children when their parents were busy.\\n\\nOne day, a group of knights came to slay the dragon, believing all dragons were dangerous. The villagers stood up for Drake, explaining how he had helped them. The knights were amazed to see a dragon who used his powers for good.\\n\\nDrake's story spread throughout the kingdom, teaching everyone that we shouldn't judge others by their appearance or what we've heard about them. True character is shown through actions, not stereotypes.","lesson":"Don't judge others by their appearance or what you've heard about them. Everyone deserves a chance to show their true character through their actions. Kindness and understanding can break down even the strongest prejudices."},{"identify_key":"the_determined_seed","name":"The Determined Seed","detail":"In a dry, rocky field, there was a tiny seed that dreamed of growing into a great tree. The other seeds told it that the soil was too poor and the conditions too harsh, but this seed refused to give up.\\n\\nDay after day, the seed pushed its roots deeper into the ground, searching for water and nutrients. It faced many challenges - scorching sun, strong winds, and hungry animals. But each obstacle made it stronger.\\n\\nYears passed, and the seed grew into a magnificent tree. Its roots had broken through the rocks, creating paths for water to flow. Its shade provided shelter for animals, and its leaves enriched the soil. The once-barren field became a thriving ecosystem.\\n\\nThe tree's story inspired other seeds to try growing in difficult places. They learned that challenges can be opportunities for growth, and that determination can transform even the harshest conditions into something beautiful.","lesson":"Challenges can be opportunities for growth. With determination and perseverance, we can overcome even the most difficult circumstances and create something beautiful that benefits others."},{"identify_key":"the_musical_stream","name":"The Musical Stream","detail":"In a quiet valley, there flowed a stream that had lost its song. Once, it had been known for its beautiful melodies as it danced over rocks and through meadows. But over time, it had become silent and still.\\n\\nOne day, a young girl named Melody came to the stream. She noticed its silence and decided to help it find its music again. She started by clearing away the fallen leaves and branches that had blocked its path. Then, she carefully placed small stones in patterns that would create gentle ripples.\\n\\nAs the water began to flow freely again, it started to make soft sounds. Melody added more stones, each placed with care to create different notes. Soon, the stream was singing a beautiful melody that echoed through the valley.\\n\\nThe stream's music attracted birds and animals, who added their own voices to the symphony. The valley became alive with sound, and people came from far and wide to hear the stream's song. Melody had shown that sometimes, all it takes is a little care and attention to bring back the music in our lives.","lesson":"Beauty and joy can be found in the simplest things. By taking care of our surroundings and adding our own creative touch, we can bring harmony and music to the world around us."},{"identify_key":"the_colorful_chameleon","name":"The Colorful Chameleon","detail":"In a vibrant jungle, there lived a chameleon named Charlie who was different from other chameleons. While his friends changed colors to blend in with their surroundings, Charlie loved to stand out with bright, bold colors.\\n\\nAt first, the other chameleons thought Charlie was strange. They believed that blending in was the only way to be safe. But Charlie showed them that being different could be beautiful and useful too.\\n\\nOne day, a group of lost butterflies flew into the jungle. They were tired and couldn't find their way home. Charlie used his bright colors to create a path of light through the dark jungle, guiding the butterflies to safety.\\n\\nThe other chameleons learned that sometimes, standing out and being different can help others. They began to appreciate their ability to change colors not just for hiding, but for creating beauty and helping those in need.","lesson":"Being different is a gift that can be used to help others. Sometimes, standing out and being unique is more valuable than blending in with the crowd."},{"identify_key":"the_dreaming_star","name":"The Dreaming Star","detail":"High in the night sky, there was a small star named Stella who had big dreams. While other stars were content to simply shine, Stella wanted to learn about the world below. She watched the Earth with wonder, curious about everything she saw.\\n\\nOne night, Stella noticed a little girl named Luna looking up at the stars. Luna was feeling sad and alone. Stella decided to shine extra bright, creating a special pattern of light just for Luna.\\n\\nLuna saw the star's special message and smiled. She started to write stories about the stars, imagining their adventures and dreams. Her stories brought joy to many children, and soon, people all over the world were looking up at the stars with wonder.\\n\\nStella learned that even though she couldn't visit Earth, she could still touch people's lives through her light. Her dreams of connecting with the world below came true in a way she never expected.","lesson":"Dreams can come true in unexpected ways. Even when we can't achieve our goals exactly as we planned, we can still make a difference and touch others' lives in meaningful ways."},{"identify_key":"the_helping_hands","name":"The Helping Hands","detail":"In a busy city, there was a small community garden where people from different backgrounds came together. Each person had their own plot, but they all shared tools and knowledge. The garden was a place of peace and cooperation.\\n\\nOne summer, a terrible storm damaged many of the garden plots. Some people lost their entire crops, while others had minor damage. Instead of focusing on their own losses, everyone came together to help each other rebuild.\\n\\nThey shared seeds, tools, and time. Those with undamaged plots offered space to those who had lost everything. They worked together to make the garden stronger than before, adding better drainage and wind protection.\\n\\nThe garden became a symbol of community strength. People learned that by helping others, they created a stronger, more resilient community. The garden flourished, and so did the friendships that grew there.","lesson":"Community strength comes from helping each other. When we work together and support one another, we can overcome any challenge and create something beautiful that benefits everyone."},{"identify_key":"the_wise_mountain","name":"The Wise Mountain","detail":"In a distant land, there stood an ancient mountain that had watched over the valley for thousands of years. The mountain had seen many changes - seasons coming and going, rivers changing course, and civilizations rising and falling.\\n\\nPeople would come to the mountain seeking wisdom, but the mountain never spoke. Instead, it taught through its presence. It showed that true strength comes from standing firm in the face of change, that beauty can be found in every season, and that perspective changes everything.\\n\\nOne day, a young shepherd named Kira came to the mountain, troubled by the changes in her village. She sat quietly, watching the mountain's shadow move across the valley. As she observed, she began to understand that change is natural and necessary.\\n\\nThe mountain taught Kira that wisdom comes from observation and patience. She returned to her village with a new understanding of how to face change with grace and strength.","lesson":"True wisdom comes from observation and patience. By learning to see the bigger picture and understanding that change is natural, we can face life's challenges with grace and strength."},{"identify_key":"the_dancing_clouds","name":"The Dancing Clouds","detail":"In the vast sky, there lived a group of clouds who loved to dance. They would swirl and twirl, creating beautiful patterns that delighted everyone who looked up. But one cloud, named Cirrus, was different. She preferred to stay still and watch the others dance.\\n\\nThe other clouds tried to convince Cirrus to join them, but she was afraid of making mistakes. She thought her movements wouldn't be as graceful as the others. One day, a strong wind came and forced all the clouds to move.\\n\\nTo her surprise, Cirrus discovered that she could dance too. Her movements were unique and beautiful in their own way. The other clouds were amazed by her style and began to incorporate her moves into their dances.\\n\\nThe sky became more beautiful than ever, with each cloud adding its own special touch to the dance. Cirrus learned that everyone has their own unique way of moving and that the beauty of dance comes from the combination of different styles.","lesson":"Everyone has their own unique talents and ways of expression. By embracing our individuality and sharing it with others, we can create something more beautiful than we could ever achieve alone."},{"identify_key":"the_healing_garden","name":"The Healing Garden","detail":"In a hospital courtyard, there was a neglected garden that had once been beautiful. The plants were wilted, the paths were overgrown, and no one visited anymore. But a young patient named Maya saw its potential.\\n\\nDespite being in a wheelchair, Maya started to care for the garden. She planted flowers that could grow in shade, added herbs with healing properties, and created paths that were accessible to everyone. Other patients began to help, each adding their own touch to the garden.\\n\\nAs the garden grew, it became a place of healing and hope. Patients would come to sit among the flowers, finding peace and strength in nature's beauty. Doctors noticed that patients who spent time in the garden recovered faster.\\n\\nThe garden taught everyone that healing comes in many forms. Sometimes, the act of creating something beautiful can be the best medicine of all.","lesson":"Healing can come from unexpected places. By creating beauty and nurturing life, we can bring hope and strength to ourselves and others."},{"identify_key":"the_singing_stones","name":"The Singing Stones","detail":"On a remote beach, there were special stones that could sing when the waves touched them. Each stone had its own unique sound, creating a beautiful symphony when the tide came in. But the stones were scattered and disorganized, their music chaotic.\\n\\nA young musician named Rio discovered the stones and decided to organize them. He spent days listening to each stone's sound, then arranged them in a pattern that created harmonious melodies. The stones' music became more beautiful than ever.\\n\\nPeople came from far and wide to hear the stones' song. They would sit on the beach, letting the music wash over them like the waves. The stones taught them that even the most ordinary things can create extraordinary beauty when they work together in harmony.","lesson":"Harmony comes from working together. When we organize our talents and work in concert with others, we can create something more beautiful than we could ever achieve alone."},{"identify_key":"the_light_bearer","name":"The Light Bearer","detail":"In a village that had lost its way, there lived a young girl named Lucia who carried a special lantern. The lantern's light was different from ordinary light - it could show people their true paths when they were lost.\\n\\nAt first, the villagers were afraid of the light. They had grown comfortable in their darkness and didn't want to see the truth. But Lucia was patient. She would sit with people, sharing her light gently until they were ready to see.\\n\\nOne by one, the villagers began to accept the light. They discovered new paths and possibilities they had never imagined. The village transformed, becoming a place of hope and growth.\\n\\nLucia's lantern taught everyone that sometimes, we need someone to show us the way, but we must be ready to see the light for ourselves.","lesson":"True guidance comes from within, but sometimes we need help to find our way. By being patient and gentle, we can help others discover their own path to light and truth."},{"identify_key":"the_whispering_wind","name":"The Whispering Wind","detail":"In a quiet valley, there was a special wind that could carry messages between people. It would whisper secrets, share stories, and bring comfort to those who were lonely. But the wind was shy and would only speak to those who truly listened.\\n\\nA young boy named Echo learned to listen to the wind. He would sit still for hours, hearing its stories and messages. The wind taught him about the valley's history, about the people who lived there, and about the importance of listening.\\n\\nEcho began to share the wind's messages with others. He helped people connect with each other, carrying their words and feelings through the valley. The community grew stronger as people learned to listen and understand each other better.\\n\\nThe wind's whispers taught everyone that true communication requires both speaking and listening, and that sometimes the most important messages are the ones we hear in the silence.","lesson":"True communication requires both speaking and listening. By learning to listen carefully, we can understand others better and create stronger connections in our community."}]`),qce="_container_fe1o7_1",Kce="_header_fe1o7_7",iT={container:qce,header:Kce},Zce=()=>{const[t,e]=cr("story_key",{story:{},seen:[]}),n=i=>{t.seen.includes(i)||e({...t,seen:[...t.seen,i]})},[r,o]=N.useState(""),s=i=>{o(r===i?"":i),n(i)};return m.jsx("div",{children:Gce.map(({name:i,detail:a,identify_key:l,lesson:c})=>{var d;return m.jsxs(jr,{onClick:()=>{s(l)},className:iT.container,children:[m.jsxs("div",{className:iT.header,children:[m.jsx(ae.Title,{level:3,noMargin:!0,children:i}),m.jsx(ae.Text,{children:((d=t.seen)==null?void 0:d.includes(l))&&"Seen"})]}),r===l&&m.jsxs("div",{children:[m.jsx(ae.Title,{level:4,noMargin:!0,children:"Detail"}),m.jsx(ae.Paragraph,{children:a}),m.jsx(ae.Title,{level:4,noMargin:!0,children:"Lesson"}),m.jsx(ae.Paragraph,{children:c})]})]},l)})})},Jce=()=>null,Ew=y.createContext({});function Mw(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Aw=typeof window<"u",XP=Aw?y.useLayoutEffect:y.useEffect,ym=y.createContext(null),Rw=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function QP(t){return typeof t=="object"&&t!==null}function _w(t){return QP(t)&&"offsetHeight"in t}class Yce extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=_w(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=o-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Xce({children:t,isPresent:e,anchorX:n}){const r=y.useId(),o=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=y.useContext(Rw);return y.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:d,right:u}=s.current;if(e||!o.current||!a||!l)return;const h=n==="left"?`left: ${d}`:`right: ${u}`;o.current.dataset.motionPopId=r;const f=document.createElement("style");return i&&(f.nonce=i),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[e]),m.jsx(Yce,{isPresent:e,childRef:o,sizeRef:s,children:y.cloneElement(t,{ref:o})})}const Qce=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:s,mode:i,anchorX:a})=>{const l=Mw(ede),c=y.useId();let d=!0,u=y.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:o,onExitComplete:h=>{l.set(h,!0);for(const f of l.values())if(!f)return;r&&r()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[n,l,r]);return s&&d&&(u={...u}),y.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[n]),y.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),i==="popLayout"&&(t=m.jsx(Xce,{isPresent:n,anchorX:a,children:t})),m.jsx(ym.Provider,{value:u,children:t})};function ede(){return new Map}function e4(t=!0){const e=y.useContext(ym);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=e,s=y.useId();y.useEffect(()=>{if(t)return o(s)},[t]);const i=y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,i]:[!0]}const $u=t=>t.key||"";function aT(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const tde=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:s="sync",propagate:i=!1,anchorX:a="left"})=>{const[l,c]=e4(i),d=y.useMemo(()=>aT(t),[t]),u=i&&!l?[]:d.map($u),h=y.useRef(!0),f=y.useRef(d),p=Mw(()=>new Map),[g,b]=y.useState(d),[v,x]=y.useState(d);XP(()=>{h.current=!1,f.current=d;for(let C=0;C<v.length;C++){const S=$u(v[C]);u.includes(S)?p.delete(S):p.get(S)!==!0&&p.set(S,!1)}},[v,u.length,u.join("-")]);const w=[];if(d!==g){let C=[...d];for(let S=0;S<v.length;S++){const T=v[S],E=$u(T);u.includes(E)||(C.splice(S,0,T),w.push(T))}return s==="wait"&&w.length&&(C=w),x(aT(C)),b(d),null}const{forceRender:k}=y.useContext(Ew);return m.jsx(m.Fragment,{children:v.map(C=>{const S=$u(C),T=i&&!l?!1:d===v||u.includes(S),E=()=>{if(p.has(S))p.set(S,!0);else return;let M=!0;p.forEach(R=>{R||(M=!1)}),M&&(k==null||k(),x(f.current),i&&(c==null||c()),r&&r())};return m.jsx(Qce,{isPresent:T,initial:!h.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:s,onExitComplete:T?void 0:E,anchorX:a,children:C},S)})})},Hu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],lT={value:null};function nde(t,e){let n=new Set,r=new Set,o=!1,s=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(u){i.has(u)&&(d.schedule(u),t()),l++,u(a)}const d={schedule:(u,h=!1,f=!1)=>{const g=f&&o?n:r;return h&&i.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),i.delete(u)},process:u=>{if(a=u,o){s=!0;return}o=!0,[n,r]=[r,n],n.forEach(c),e&&lT.value&&lT.value.frameloop[e].push(l),l=0,n.clear(),o=!1,s&&(s=!1,d.process(u))}};return d}const Ro={},rde=40;function t4(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=Hu.reduce((w,k)=>(w[k]=nde(s,e?k:void 0),w),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:f,postRender:p}=i,g=()=>{const w=Ro.useManualTiming?o.timestamp:performance.now();n=!1,Ro.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,rde),1)),o.timestamp=w,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),d.process(o),u.process(o),h.process(o),f.process(o),p.process(o),o.isProcessing=!1,n&&e&&(r=!1,t(g))},b=()=>{n=!0,r=!0,o.isProcessing||t(g)};return{schedule:Hu.reduce((w,k)=>{const C=i[k];return w[k]=(S,T=!1,E=!1)=>(n||b(),C.schedule(S,T,E)),w},{}),cancel:w=>{for(let k=0;k<Hu.length;k++)i[Hu[k]].cancel(w)},state:o,steps:i}}const Wn=t=>t,{schedule:Ge,cancel:Rs,state:vt,steps:oy}=t4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wn,!0),n4=y.createContext({strict:!1}),cT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ha={};for(const t in cT)Ha[t]={isEnabled:e=>cT[t].some(n=>!!e[n])};function ode(t){for(const e in t)Ha[e]={...Ha[e],...t[e]}}const sde=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||sde.has(t)}let r4=t=>!Wf(t);function ide(t){t&&(r4=e=>e.startsWith("on")?!Wf(e):t(e))}try{ide(require("@emotion/is-prop-valid").default)}catch{}function ade(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(r4(o)||n===!0&&Wf(o)||!e&&!Wf(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}function lde(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}const bm=y.createContext({});function vm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ld(t){return typeof t=="string"||Array.isArray(t)}const Iw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nw=["initial",...Iw];function wm(t){return vm(t.animate)||Nw.some(e=>ld(t[e]))}function o4(t){return!!(wm(t)||t.variants)}function cde(t,e){if(wm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ld(n)?n:void 0,animate:ld(r)?r:void 0}}return t.inherit!==!1?e:{}}function dde(t){const{initial:e,animate:n}=cde(t,y.useContext(bm));return y.useMemo(()=>({initial:e,animate:n}),[dT(e),dT(n)])}function dT(t){return Array.isArray(t)?t.join(" "):t}const ude=Symbol.for("motionComponentSymbol");function da(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function hde(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):da(n)&&(n.current=r))},[e])}const Dw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fde="framerAppearId",s4="data-"+Dw(fde),i4=y.createContext({}),{schedule:Pw}=t4(queueMicrotask,!1);function pde(t,e,n,r,o){var g,b;const{visualElement:s}=y.useContext(bm),i=y.useContext(n4),a=y.useContext(ym),l=y.useContext(Rw).reducedMotion,c=y.useRef(null);r=r||i.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,u=y.useContext(i4);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&mde(c.current,n,o,u);const h=y.useRef(!1);y.useInsertionEffect(()=>{d&&h.current&&d.update(n,a)});const f=n[s4],p=y.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return XP(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Pw.render(d.render),p.current&&d.animationState&&d.animationState.animateChanges())}),y.useEffect(()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),p.current=!1))}),d}function mde(t,e,n,r){const{layoutId:o,layout:s,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:a4(t.parent)),t.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!i||a&&da(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function a4(t){if(t)return t.options.allowProjection!==!1?t.projection:a4(t.parent)}let Ow=()=>{};function gde({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:o}){t&&ode(t);function s(a,l){let c;const d={...y.useContext(Rw),...a,layoutId:yde(a)},{isStatic:u}=d,h=dde(a),f=r(a,u);if(!u&&Aw){bde();const p=vde(d);c=p.MeasureLayout,h.visualElement=pde(o,f,d,e,p.ProjectionNode)}return m.jsxs(bm.Provider,{value:h,children:[c&&h.visualElement?m.jsx(c,{visualElement:h.visualElement,...d}):null,n(o,a,hde(f,h.visualElement,l),f,u,h.visualElement)]})}s.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const i=y.forwardRef(s);return i[ude]=o,i}function yde({layoutId:t}){const e=y.useContext(Ew).id;return e&&t!==void 0?e+"-"+t:t}function bde(t,e){y.useContext(n4).strict}function vde(t){const{drag:e,layout:n}=Ha;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const l4=t=>e=>typeof e=="string"&&e.startsWith(t),Lw=l4("--"),wde=l4("var(--"),jw=t=>wde(t)?xde.test(t.split("/*")[0].trim()):!1,xde=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,cd={};function kde(t){for(const e in t)cd[e]=t[e],Lw(e)&&(cd[e].isCSSVariable=!0)}const ul=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hl=new Set(ul);function c4(t,{layout:e,layoutId:n}){return hl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!cd[t]||t==="opacity")}const d4=(t,e)=>e&&typeof t=="number"?e.transform(t):t,_o=(t,e,n)=>n>e?e:n<t?t:n,fl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},dd={...fl,transform:t=>_o(0,1,t)},Fu={...fl,default:1},uT={...fl,transform:Math.round},Qd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Jo=Qd("deg"),Pr=Qd("%"),re=Qd("px"),Cde=Qd("vh"),Sde=Qd("vw"),hT={...Pr,parse:t=>Pr.parse(t)/100,transform:t=>Pr.transform(t*100)},Tde={rotate:Jo,rotateX:Jo,rotateY:Jo,rotateZ:Jo,scale:Fu,scaleX:Fu,scaleY:Fu,scaleZ:Fu,skew:Jo,skewX:Jo,skewY:Jo,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:dd,originX:hT,originY:hT,originZ:re},Bw={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re,...Tde,zIndex:uT,fillOpacity:dd,strokeOpacity:dd,numOctaves:uT},Ede={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Mde=ul.length;function Ade(t,e,n){let r="",o=!0;for(let s=0;s<Mde;s++){const i=ul[s],a=t[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=d4(a,Bw[i]);if(!l){o=!1;const d=Ede[i]||i;r+=`${d}(${c}) `}n&&(e[i]=c)}}return r=r.trim(),n?r=n(e,o?"":r):o&&(r="none"),r}function Vw(t,e,n){const{style:r,vars:o,transformOrigin:s}=t;let i=!1,a=!1;for(const l in e){const c=e[l];if(hl.has(l)){i=!0;continue}else if(Lw(l)){o[l]=c;continue}else{const d=d4(c,Bw[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(i||n?r.transform=Ade(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const $w=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Pt=t=>!!(t&&t.getVelocity);function u4(t,e,n){for(const r in e)!Pt(e[r])&&!c4(r,n)&&(t[r]=e[r])}function Rde({transformTemplate:t},e){return y.useMemo(()=>{const n=$w();return Vw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function _de(t,e){const n=t.style||{},r={};return u4(r,n,t),Object.assign(r,Rde(t,e)),r}function Ide(t,e){const n={},r=_de(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Nde={offset:"stroke-dashoffset",array:"stroke-dasharray"},Dde={offset:"strokeDashoffset",array:"strokeDasharray"};function Pde(t,e,n=1,r=0,o=!0){t.pathLength=1;const s=o?Nde:Dde;t[s.offset]=re.transform(-r);const i=re.transform(e),a=re.transform(n);t[s.array]=`${i} ${a}`}function h4(t,{attrX:e,attrY:n,attrScale:r,pathLength:o,pathSpacing:s=1,pathOffset:i=0,...a},l,c,d){if(Vw(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:u,style:h}=t;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete u.transformBox),e!==void 0&&(u.x=e),n!==void 0&&(u.y=n),r!==void 0&&(u.scale=r),o!==void 0&&Pde(u,o,s,i,!1)}const f4=()=>({...$w(),attrs:{}}),p4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Ode(t,e,n,r){const o=y.useMemo(()=>{const s=f4();return h4(s,e,p4(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};u4(s,t.style,t),o.style={...s,...o.style}}return o}const Lde=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hw(t){return typeof t!="string"||t.includes("-")?!1:!!(Lde.indexOf(t)>-1||/[A-Z]/u.test(t))}function jde(t=!1){return(n,r,o,{latestValues:s},i)=>{const l=(Hw(n)?Ode:Ide)(r,s,i,n),c=ade(r,typeof n=="string",t),d=n!==y.Fragment?{...c,...l,ref:o}:{},{children:u}=r,h=y.useMemo(()=>Pt(u)?u.get():u,[u]);return y.createElement(n,{...d,children:h})}}function fT(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Fw(t,e,n,r){if(typeof e=="function"){const[o,s]=fT(r);e=e(n!==void 0?n:t.custom,o,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,s]=fT(r);e=e(n!==void 0?n:t.custom,o,s)}return e}function ph(t){return Pt(t)?t.get():t}function Bde({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,o){return{latestValues:Vde(n,r,o,t),renderState:e()}}const m4=t=>(e,n)=>{const r=y.useContext(bm),o=y.useContext(ym),s=()=>Bde(t,e,r,o);return n?s():Mw(s)};function Vde(t,e,n,r){const o={},s=r(t,{});for(const h in s)o[h]=ph(s[h]);let{initial:i,animate:a}=t;const l=wm(t),c=o4(t);e&&c&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const u=d?a:i;if(u&&typeof u!="boolean"&&!vm(u)){const h=Array.isArray(u)?u:[u];for(let f=0;f<h.length;f++){const p=Fw(t,h[f]);if(p){const{transitionEnd:g,transition:b,...v}=p;for(const x in v){let w=v[x];if(Array.isArray(w)){const k=d?w.length-1:0;w=w[k]}w!==null&&(o[x]=w)}for(const x in g)o[x]=g[x]}}}return o}function zw(t,e,n){var s;const{style:r}=t,o={};for(const i in r)(Pt(r[i])||e.style&&Pt(e.style[i])||c4(i,t)||((s=n==null?void 0:n.getValue(i))==null?void 0:s.liveStyle)!==void 0)&&(o[i]=r[i]);return o}const $de={useVisualState:m4({scrapeMotionValuesFromProps:zw,createRenderState:$w})};function g4(t,e,n){const r=zw(t,e,n);for(const o in t)if(Pt(t[o])||Pt(e[o])){const s=ul.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[s]=t[o]}return r}const Hde={useVisualState:m4({scrapeMotionValuesFromProps:g4,createRenderState:f4})};function Fde(t,e){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const i={...Hw(r)?Hde:$de,preloadedFeatures:t,useRender:jde(o),createVisualElement:e,Component:r};return gde(i)}}function ud(t,e,n){const r=t.getProps();return Fw(r,e,n!==void 0?n:r.custom,t)}const e0=t=>Array.isArray(t);let mh;function zde(){mh=void 0}const ln={now:()=>(mh===void 0&&ln.set(vt.isProcessing||Ro.useManualTiming?vt.timestamp:performance.now()),mh),set:t=>{mh=t,queueMicrotask(zde)}};function Uw(t,e){t.indexOf(e)===-1&&t.push(e)}function Ww(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Gw{constructor(){this.subscriptions=[]}add(e){return Uw(this.subscriptions,e),()=>Ww(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let s=0;s<o;s++){const i=this.subscriptions[s];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function y4(t,e){return e?t*(1e3/e):0}const pT=30,Ude=t=>!isNaN(parseFloat(t));class Wde{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{var i,a;const s=ln.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();o&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ln.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ude(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Gw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>pT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pT);return y4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fa(t,e){return new Wde(t,e)}function Gde(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Fa(n))}function qde(t){return e0(t)?t[t.length-1]||0:t}function Kde(t,e){const n=ud(t,e);let{transitionEnd:r={},transition:o={},...s}=n||{};s={...s,...r};for(const i in s){const a=qde(s[i]);Gde(t,i,a)}}function Zde(t){return!!(Pt(t)&&t.add)}function t0(t,e){const n=t.getValue("willChange");if(Zde(n))return n.add(e);if(!n&&Ro.WillChange){const r=new Ro.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function b4(t){return t.props[s4]}const Jde=t=>t!==null;function Yde(t,{repeat:e,repeatType:n="loop"},r){const o=t.filter(Jde),s=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[s]}const Xde={type:"spring",stiffness:500,damping:25,restSpeed:10},Qde=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),eue={type:"keyframes",duration:.8},tue={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nue=(t,{keyframes:e})=>e.length>2?eue:hl.has(t)?t.startsWith("scale")?Qde(e[1]):Xde:tue;function rue({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:i,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function qw(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Or=t=>t*1e3,Lr=t=>t/1e3,mc=t=>Math.round(t*1e5)/1e5,Kw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oue(t){return t==null}const sue=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zw=(t,e)=>n=>!!(typeof n=="string"&&sue.test(n)&&n.startsWith(t)||e&&!oue(n)&&Object.prototype.hasOwnProperty.call(n,e)),v4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[o,s,i,a]=r.match(Kw);return{[t]:parseFloat(o),[e]:parseFloat(s),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},iue=t=>_o(0,255,t),sy={...fl,transform:t=>Math.round(iue(t))},ii={test:Zw("rgb","red"),parse:v4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+sy.transform(t)+", "+sy.transform(e)+", "+sy.transform(n)+", "+mc(dd.transform(r))+")"};function aue(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const n0={test:Zw("#"),parse:aue,transform:ii.transform},ua={test:Zw("hsl","hue"),parse:v4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pr.transform(mc(e))+", "+Pr.transform(mc(n))+", "+mc(dd.transform(r))+")"},Nt={test:t=>ii.test(t)||n0.test(t)||ua.test(t),parse:t=>ii.test(t)?ii.parse(t):ua.test(t)?ua.parse(t):n0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ii.transform(t):ua.transform(t)},lue=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function cue(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Kw))==null?void 0:e.length)||0)+(((n=t.match(lue))==null?void 0:n.length)||0)>0}const w4="number",x4="color",due="var",uue="var(",mT="${}",hue=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},o=[];let s=0;const a=e.replace(hue,l=>(Nt.test(l)?(r.color.push(s),o.push(x4),n.push(Nt.parse(l))):l.startsWith(uue)?(r.var.push(s),o.push(due),n.push(l)):(r.number.push(s),o.push(w4),n.push(parseFloat(l))),++s,mT)).split(mT);return{values:n,split:a,indexes:r,types:o}}function k4(t){return hd(t).values}function C4(t){const{split:e,types:n}=hd(t),r=e.length;return o=>{let s="";for(let i=0;i<r;i++)if(s+=e[i],o[i]!==void 0){const a=n[i];a===w4?s+=mc(o[i]):a===x4?s+=Nt.transform(o[i]):s+=o[i]}return s}}const fue=t=>typeof t=="number"?0:t;function pue(t){const e=k4(t);return C4(t)(e.map(fue))}const _s={test:cue,parse:k4,createTransformer:C4,getAnimatableNone:pue};function iy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mue({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,s=0,i=0;if(!e)o=s=i=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;o=iy(l,a,t+1/3),s=iy(l,a,t),i=iy(l,a,t-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:r}}function Gf(t,e){return n=>n>0?e:t}const Ue=(t,e,n)=>t+(e-t)*n,ay=(t,e,n)=>{const r=t*t,o=n*(e*e-r)+r;return o<0?0:Math.sqrt(o)},gue=[n0,ii,ua],yue=t=>gue.find(e=>e.test(t));function gT(t){const e=yue(t);if(!e)return!1;let n=e.parse(t);return e===ua&&(n=mue(n)),n}const yT=(t,e)=>{const n=gT(t),r=gT(e);if(!n||!r)return Gf(t,e);const o={...n};return s=>(o.red=ay(n.red,r.red,s),o.green=ay(n.green,r.green,s),o.blue=ay(n.blue,r.blue,s),o.alpha=Ue(n.alpha,r.alpha,s),ii.transform(o))},r0=new Set(["none","hidden"]);function bue(t,e){return r0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}const vue=(t,e)=>n=>e(t(n)),eu=(...t)=>t.reduce(vue);function wue(t,e){return n=>Ue(t,e,n)}function Jw(t){return typeof t=="number"?wue:typeof t=="string"?jw(t)?Gf:Nt.test(t)?yT:Cue:Array.isArray(t)?S4:typeof t=="object"?Nt.test(t)?yT:xue:Gf}function S4(t,e){const n=[...t],r=n.length,o=t.map((s,i)=>Jw(s)(s,e[i]));return s=>{for(let i=0;i<r;i++)n[i]=o[i](s);return n}}function xue(t,e){const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=Jw(t[o])(t[o],e[o]));return o=>{for(const s in r)n[s]=r[s](o);return n}}function kue(t,e){const n=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const s=e.types[o],i=t.indexes[s][r[s]],a=t.values[i]??0;n[o]=a,r[s]++}return n}const Cue=(t,e)=>{const n=_s.createTransformer(e),r=hd(t),o=hd(e);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?r0.has(t)&&!o.values.length||r0.has(e)&&!r.values.length?bue(t,e):eu(S4(kue(r,o),o.values),n):Gf(t,e)};function T4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ue(t,e,n):Jw(t)(t,e)}const Sue=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ge.update(e,n),stop:()=>Rs(e),now:()=>vt.isProcessing?vt.timestamp:ln.now()}},E4=(t,e,n=10)=>{let r="";const o=Math.max(Math.round(e/n),2);for(let s=0;s<o;s++)r+=t(s/(o-1))+", ";return`linear(${r.substring(0,r.length-2)})`},qf=2e4;function Yw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<qf;)e+=n,r=t.next(e);return e>=qf?1/0:e}function Tue(t,e=100,n){const r=n({...t,keyframes:[0,e]}),o=Math.min(Yw(r),qf);return{type:"keyframes",ease:s=>r.next(o*s).value/e,duration:Lr(o)}}const Eue=5;function M4(t,e,n){const r=Math.max(e-Eue,0);return y4(n-t(r),e-r)}const Ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bT=.001;function Mue({duration:t=Ye.duration,bounce:e=Ye.bounce,velocity:n=Ye.velocity,mass:r=Ye.mass}){let o,s,i=1-e;i=_o(Ye.minDamping,Ye.maxDamping,i),t=_o(Ye.minDuration,Ye.maxDuration,Lr(t)),i<1?(o=c=>{const d=c*i,u=d*t,h=d-n,f=o0(c,i),p=Math.exp(-u);return bT-h/f*p},s=c=>{const u=c*i*t,h=u*n+n,f=Math.pow(i,2)*Math.pow(c,2)*t,p=Math.exp(-u),g=o0(Math.pow(c,2),i);return(-o(c)+bT>0?-1:1)*((h-f)*p)/g}):(o=c=>{const d=Math.exp(-c*t),u=(c-n)*t+1;return-.001+d*u},s=c=>{const d=Math.exp(-c*t),u=(n-c)*(t*t);return d*u});const a=5/t,l=Rue(o,s,a);if(t=Or(t),isNaN(l))return{stiffness:Ye.stiffness,damping:Ye.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:t}}}const Aue=12;function Rue(t,e,n){let r=n;for(let o=1;o<Aue;o++)r=r-t(r)/e(r);return r}function o0(t,e){return t*Math.sqrt(1-e*e)}const _ue=["duration","bounce"],Iue=["stiffness","damping","mass"];function vT(t,e){return e.some(n=>t[n]!==void 0)}function Nue(t){let e={velocity:Ye.velocity,stiffness:Ye.stiffness,damping:Ye.damping,mass:Ye.mass,isResolvedFromDuration:!1,...t};if(!vT(t,Iue)&&vT(t,_ue))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,s=2*_o(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:Ye.mass,stiffness:o,damping:s}}else{const n=Mue(t);e={...e,...n,mass:Ye.mass},e.isResolvedFromDuration=!0}return e}function Kf(t=Ye.visualDuration,e=Ye.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:o}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:f}=Nue({...n,velocity:-Lr(n.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*d)),b=i-s,v=Lr(Math.sqrt(l/d)),x=Math.abs(b)<5;r||(r=x?Ye.restSpeed.granular:Ye.restSpeed.default),o||(o=x?Ye.restDelta.granular:Ye.restDelta.default);let w;if(g<1){const C=o0(v,g);w=S=>{const T=Math.exp(-g*v*S);return i-T*((p+g*v*b)/C*Math.sin(C*S)+b*Math.cos(C*S))}}else if(g===1)w=C=>i-Math.exp(-v*C)*(b+(p+v*b)*C);else{const C=v*Math.sqrt(g*g-1);w=S=>{const T=Math.exp(-g*v*S),E=Math.min(C*S,300);return i-T*((p+g*v*b)*Math.sinh(E)+C*b*Math.cosh(E))/C}}const k={calculatedDuration:f&&u||null,next:C=>{const S=w(C);if(f)a.done=C>=u;else{let T=C===0?p:0;g<1&&(T=C===0?Or(p):M4(w,C,S));const E=Math.abs(T)<=r,M=Math.abs(i-S)<=o;a.done=E&&M}return a.value=a.done?i:S,a},toString:()=>{const C=Math.min(Yw(k),qf),S=E4(T=>k.next(C*T).value,C,30);return C+"ms "+S},toTransition:()=>{}};return k}Kf.applyToOptions=t=>{const e=Tue(t,100,Kf);return t.ease=e.ease,t.duration=Or(e.duration),t.type="keyframes",t};function s0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=t[0],h={done:!1,value:u},f=E=>a!==void 0&&E<a||l!==void 0&&E>l,p=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let g=n*e;const b=u+g,v=i===void 0?b:i(b);v!==b&&(g=v-u);const x=E=>-g*Math.exp(-E/r),w=E=>v+x(E),k=E=>{const M=x(E),R=w(E);h.done=Math.abs(M)<=c,h.value=h.done?v:R};let C,S;const T=E=>{f(h.value)&&(C=E,S=Kf({keyframes:[h.value,p(h.value)],velocity:M4(w,E,h.value),damping:o,stiffness:s,restDelta:c,restSpeed:d}))};return T(0),{calculatedDuration:null,next:E=>{let M=!1;return!S&&C===void 0&&(M=!0,k(E),T(E)),C!==void 0&&E>=C?S.next(E-C):(!M&&k(E),h)}}}const fd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};function Due(t,e,n){const r=[],o=n||Ro.mix||T4,s=t.length-1;for(let i=0;i<s;i++){let a=o(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||Wn:e;a=eu(l,a)}r.push(a)}return r}function Pue(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const s=t.length;if(Ow(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Due(e,r,o),l=a.length,c=d=>{if(i&&d<t[0])return e[0];let u=0;if(l>1)for(;u<t.length-2&&!(d<t[u+1]);u++);const h=fd(t[u],t[u+1],d);return a[u](h)};return n?d=>c(_o(t[0],t[s-1],d)):c}function Oue(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=fd(0,e,r);t.push(Ue(n,1,o))}}function Lue(t){const e=[0];return Oue(e,t.length-1),e}function jue(t,e){return t.map(n=>n*e)}const A4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Bue=1e-7,Vue=12;function $ue(t,e,n,r,o){let s,i,a=0;do i=e+(n-e)/2,s=A4(i,r,o)-t,s>0?n=i:e=i;while(Math.abs(s)>Bue&&++a<Vue);return i}function tu(t,e,n,r){if(t===e&&n===r)return Wn;const o=s=>$ue(s,0,1,t,n);return s=>s===0||s===1?s:A4(o(s),e,r)}const Hue=tu(.42,0,1,1),Fue=tu(0,0,.58,1),R4=tu(.42,0,.58,1),zue=t=>Array.isArray(t)&&typeof t[0]!="number",_4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,I4=t=>e=>1-t(1-e),N4=tu(.33,1.53,.69,.99),Xw=I4(N4),D4=_4(Xw),P4=t=>(t*=2)<1?.5*Xw(t):.5*(2-Math.pow(2,-10*(t-1))),Qw=t=>1-Math.sin(Math.acos(t)),O4=I4(Qw),L4=_4(Qw),j4=t=>Array.isArray(t)&&typeof t[0]=="number",Uue={linear:Wn,easeIn:Hue,easeInOut:R4,easeOut:Fue,circIn:Qw,circInOut:L4,circOut:O4,backIn:Xw,backInOut:D4,backOut:N4,anticipate:P4},Wue=t=>typeof t=="string",wT=t=>{if(j4(t)){Ow(t.length===4);const[e,n,r,o]=t;return tu(e,n,r,o)}else if(Wue(t))return Uue[t];return t};function Gue(t,e){return t.map(()=>e||R4).splice(0,t.length-1)}function gc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=zue(r)?r.map(wT):wT(r),s={done:!1,value:e[0]},i=jue(n&&n.length===e.length?n:Lue(e),t),a=Pue(i,e,{ease:Array.isArray(o)?o:Gue(e,o)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const que=t=>t!==null;function ex(t,{repeat:e,repeatType:n="loop"},r,o=1){const s=t.filter(que),a=o<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Kue={decay:s0,inertia:s0,tween:gc,keyframes:gc,spring:Kf};function B4(t){typeof t.type=="string"&&(t.type=Kue[t.type])}class tx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Zue=t=>t/100;class nx extends tx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(n=!0)=>{var r,o;if(n){const{motionValue:s}=this.options;s&&s.updatedAt!==ln.now()&&this.tick(ln.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;B4(e);const{type:n=gc,repeat:r=0,repeatDelay:o=0,repeatType:s,velocity:i=0}=e;let{keyframes:a}=e;const l=n||gc;l!==gc&&typeof a[0]!="number"&&(this.mixKeyframes=eu(Zue,T4(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-i})),c.calculatedDuration===null&&(c.calculatedDuration=Yw(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:o,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:u,repeatType:h,repeatDelay:f,type:p,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>o;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let w=this.currentTime,k=r;if(u){const E=Math.min(this.currentTime,o)/a;let M=Math.floor(E),R=E%1;!R&&E>=1&&(R=1),R===1&&M--,M=Math.min(M,u+1),!!(M%2)&&(h==="reverse"?(R=1-R,f&&(R-=f/a)):h==="mirror"&&(k=i)),w=_o(0,1,R)*a}const C=x?{done:!1,value:d[0]}:k.next(w);s&&(C.value=s(C.value));let{done:S}=C;!x&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&p!==s0&&(C.value=ex(d,this.options,b,this.speed)),g&&g(C.value),T&&this.finish(),C}then(e,n){return this.finished.then(e,n)}get duration(){return Lr(this.calculatedDuration)}get time(){return Lr(this.currentTime)}set time(e){var n;e=Or(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ln.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Lr(this.currentTime))}play(){var o,s;if(this.isStopped)return;const{driver:e=Sue,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),(s=(o=this.options).onPlay)==null||s.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ln.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Jue(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ai=t=>t*180/Math.PI,i0=t=>{const e=ai(Math.atan2(t[1],t[0]));return a0(e)},Yue={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:i0,rotateZ:i0,skewX:t=>ai(Math.atan(t[1])),skewY:t=>ai(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},a0=t=>(t=t%360,t<0&&(t+=360),t),xT=i0,kT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),CT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Xue={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:kT,scaleY:CT,scale:t=>(kT(t)+CT(t))/2,rotateX:t=>a0(ai(Math.atan2(t[6],t[5]))),rotateY:t=>a0(ai(Math.atan2(-t[2],t[0]))),rotateZ:xT,rotate:xT,skewX:t=>ai(Math.atan(t[4])),skewY:t=>ai(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function l0(t){return t.includes("scale")?1:0}function c0(t,e){if(!t||t==="none")return l0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=Xue,o=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Yue,o=a}if(!o)return l0(e);const s=r[e],i=o[1].split(",").map(ehe);return typeof s=="function"?s(i):i[s]}const Que=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return c0(n,e)};function ehe(t){return parseFloat(t.trim())}const ST=t=>t===fl||t===re,the=new Set(["x","y","z"]),nhe=ul.filter(t=>!the.has(t));function rhe(t){const e=[];return nhe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const gi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>c0(e,"x"),y:(t,{transform:e})=>c0(e,"y")};gi.translateX=gi.x;gi.translateY=gi.y;const yi=new Set;let d0=!1,u0=!1,h0=!1;function V4(){if(u0){const t=Array.from(yi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const o=rhe(r);o.length&&(n.set(r,o),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([s,i])=>{var a;(a=r.getValue(s))==null||a.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}u0=!1,d0=!1,yi.forEach(t=>t.complete(h0)),yi.clear()}function $4(){yi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(u0=!0)})}function ohe(){h0=!0,$4(),V4(),h0=!1}class rx{constructor(e,n,r,o,s,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=o,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(yi.add(this),d0||(d0=!0,Ge.read($4),Ge.resolveKeyframes(V4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:o}=this;if(e[0]===null){const s=o==null?void 0:o.get(),i=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,i);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=i),o&&s===void 0&&o.set(e[0])}Jue(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yi.delete(this)}cancel(){this.state==="scheduled"&&(yi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const she=t=>t.startsWith("--");function ihe(t,e,n){she(e)?t.style.setProperty(e,n):t.style[e]=n}function ox(t){let e;return()=>(e===void 0&&(e=t()),e)}const ahe=ox(()=>window.ScrollTimeline!==void 0),lhe={};function che(t,e){const n=ox(t);return()=>lhe[e]??n()}const H4=che(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,TT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wl([0,.65,.55,1]),circOut:Wl([.55,0,1,.45]),backIn:Wl([.31,.01,.66,-.59]),backOut:Wl([.33,1.53,.69,.99])};function F4(t,e){if(t)return typeof t=="function"?H4()?E4(t,e):"ease-out":j4(t)?Wl(t):Array.isArray(t)?t.map(n=>F4(n,e)||TT.easeOut):TT[t]}function dhe(t,e,n,{delay:r=0,duration:o=300,repeat:s=0,repeatType:i="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const u=F4(a,o);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:i==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(d,h)}function z4(t){return typeof t=="function"&&"applyToOptions"in t}function uhe({type:t,...e}){return z4(t)&&H4()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class hhe extends tx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:o,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=i,this.options=e,Ow(typeof e.type!="string");const c=uhe(e);this.animation=dhe(n,r,o,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=ex(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):ihe(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Lr(Number(e))}get time(){return Lr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Or(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&ahe()?(this.animation.timeline=e,Wn):n(this)}}const U4={anticipate:P4,backInOut:D4,circInOut:L4};function fhe(t){return t in U4}function phe(t){typeof t.ease=="string"&&fhe(t.ease)&&(t.ease=U4[t.ease])}const ET=10;class mhe extends hhe{constructor(e){phe(e),B4(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:o,element:s,...i}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new nx({...i,autoplay:!1}),l=Or(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-ET).value,a.sample(l).value,ET),a.stop()}}const MT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(_s.test(t)||t==="0")&&!t.startsWith("url("));function ghe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yhe(t,e,n,r){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],i=MT(o,e),a=MT(s,e);return!i||!a?!1:ghe(t)||(n==="spring"||z4(n))&&r}const bhe=new Set(["opacity","clipPath","filter","transform"]),vhe=ox(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function whe(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:o,damping:s,type:i}=t;if(!_w((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return vhe()&&n&&bhe.has(n)&&(n!=="transform"||!l)&&!a&&!r&&o!=="mirror"&&s!==0&&i!=="inertia"}const xhe=40;class khe extends tx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:i="loop",keyframes:a,name:l,motionValue:c,element:d,...u}){var p;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=ln.now();const h={autoplay:e,delay:n,type:r,repeat:o,repeatDelay:s,repeatType:i,name:l,motionValue:c,element:d,...u},f=(d==null?void 0:d.KeyframeResolver)||rx;this.keyframeResolver=new f(a,(g,b,v)=>this.onKeyframesResolved(g,b,h,!v),l,c,d),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,o){this.keyframeResolver=void 0;const{name:s,type:i,velocity:a,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=ln.now(),yhe(e,s,i,a)||((Ro.instantAnimations||!l)&&(d==null||d(ex(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const h={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>xhe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},f=!c&&whe(h)?new mhe({...h,element:h.motionValue.owner.current}):new nx(h);f.finished.then(()=>this.notifyFinished()).catch(Wn),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),ohe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const sx=(t,e,n,r={},o,s)=>i=>{const a=qw(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Or(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:o};rue(a)||Object.assign(d,nue(t,d)),d.duration&&(d.duration=Or(d.duration)),d.repeatDelay&&(d.repeatDelay=Or(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let u=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(u=!0)),(Ro.instantAnimations||Ro.skipAnimations)&&(u=!0,d.duration=0,d.delay=0),d.allowFlatten=!a.type&&!a.ease,u&&!s&&e.get()!==void 0){const h=Yde(d.keyframes,a);if(h!==void 0){Ge.update(()=>{d.onUpdate(h),d.onComplete()});return}}return a.isSync?new nx(d):new khe(d)},W4=new Set(["width","height","top","left","right","bottom",...ul]);function Che({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function G4(t,e,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:i,...a}=e;r&&(s=r);const l=[],c=o&&t.animationState&&t.animationState.getState()[o];for(const d in a){const u=t.getValue(d,t.latestValues[d]??null),h=a[d];if(h===void 0||c&&Che(c,d))continue;const f={delay:n,...qw(s||{},d)},p=u.get();if(p!==void 0&&!u.isAnimating&&!Array.isArray(h)&&h===p&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const v=b4(t);if(v){const x=window.MotionHandoffAnimation(v,d,Ge);x!==null&&(f.startTime=x,g=!0)}}t0(t,d),u.start(sx(d,u,h,t.shouldReduceMotion&&W4.has(d)?{type:!1}:f,t,g));const b=u.animation;b&&l.push(b)}return i&&Promise.all(l).then(()=>{Ge.update(()=>{i&&Kde(t,i)})}),l}function f0(t,e,n={}){var l;const r=ud(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const s=r?()=>Promise.all(G4(t,r,n)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=o;return She(t,e,d+c,u,h,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[c,d]=a==="beforeChildren"?[s,i]:[i,s];return c().then(()=>d())}else return Promise.all([s(),i(n.delay)])}function She(t,e,n=0,r=0,o=1,s){const i=[],a=(t.variantChildren.size-1)*r,l=o===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(The).forEach((c,d)=>{c.notify("AnimationStart",e),i.push(f0(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(i)}function The(t,e){return t.sortNodePosition(e)}function Ehe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(s=>f0(t,s,n));r=Promise.all(o)}else if(typeof e=="string")r=f0(t,e,n);else{const o=typeof e=="function"?ud(t,e,n.custom):e;r=Promise.all(G4(t,o,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function q4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Mhe=Nw.length;function K4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?K4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Mhe;n++){const r=Nw[n],o=t.props[r];(ld(o)||o===!1)&&(e[r]=o)}return e}const Ahe=[...Iw].reverse(),Rhe=Iw.length;function _he(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Ehe(t,n,r)))}function Ihe(t){let e=_he(t),n=AT(),r=!0;const o=l=>(c,d)=>{var h;const u=ud(t,d,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(u){const{transition:f,transitionEnd:p,...g}=u;c={...c,...g,...p}}return c};function s(l){e=l(t)}function i(l){const{props:c}=t,d=K4(t.parent)||{},u=[],h=new Set;let f={},p=1/0;for(let b=0;b<Rhe;b++){const v=Ahe[b],x=n[v],w=c[v]!==void 0?c[v]:d[v],k=ld(w),C=v===l?x.isActive:null;C===!1&&(p=b);let S=w===d[v]&&w!==c[v]&&k;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...f},!x.isActive&&C===null||!w&&!x.prevProp||vm(w)||typeof w=="boolean")continue;const T=Nhe(x.prevProp,w);let E=T||v===l&&x.isActive&&!S&&k||b>p&&k,M=!1;const R=Array.isArray(w)?w:[w];let I=R.reduce(o(v),{});C===!1&&(I={});const{prevResolvedValues:L={}}=x,$={...L,...I},F=P=>{E=!0,h.has(P)&&(M=!0,h.delete(P)),x.needsAnimating[P]=!0;const B=t.getValue(P);B&&(B.liveStyle=!1)};for(const P in $){const B=I[P],H=L[P];if(f.hasOwnProperty(P))continue;let Y=!1;e0(B)&&e0(H)?Y=!q4(B,H):Y=B!==H,Y?B!=null?F(P):h.add(P):B!==void 0&&h.has(P)?F(P):x.protectedKeys[P]=!0}x.prevProp=w,x.prevResolvedValues=I,x.isActive&&(f={...f,...I}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(S&&T)||M)&&u.push(...R.map(P=>({animation:P,options:{type:v}})))}if(h.size){const b={};if(typeof c.initial!="boolean"){const v=ud(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(b.transition=v.transition)}h.forEach(v=>{const x=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),b[v]=x??null}),u.push({animation:b})}let g=!!u.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(u):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)==null||u.forEach(h=>{var f;return(f=h.animationState)==null?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=i(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:i,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=AT(),r=!0}}}function Nhe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!q4(e,t):!1}function Ws(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function AT(){return{animate:Ws(!0),whileInView:Ws(),whileHover:Ws(),whileTap:Ws(),whileDrag:Ws(),whileFocus:Ws(),exit:Ws()}}class $s{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Dhe extends $s{constructor(e){super(e),e.animationState||(e.animationState=Ihe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();vm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Phe=0;class Ohe extends $s{constructor(){super(...arguments),this.id=Phe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Lhe={animation:{Feature:Dhe},exit:{Feature:Ohe}};function pd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const ix=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function nu(t){return{point:{x:t.pageX,y:t.pageY}}}const jhe=t=>e=>ix(e)&&t(e,nu(e));function yc(t,e,n,r){return pd(t,e,jhe(n),r)}function Z4({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Bhe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Vhe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const J4=1e-4,$he=1-J4,Hhe=1+J4,Y4=.01,Fhe=0-Y4,zhe=0+Y4;function Wt(t){return t.max-t.min}function Uhe(t,e,n){return Math.abs(t-e)<=n}function RT(t,e,n,r=.5){t.origin=r,t.originPoint=Ue(e.min,e.max,t.origin),t.scale=Wt(n)/Wt(e),t.translate=Ue(n.min,n.max,t.origin)-t.originPoint,(t.scale>=$he&&t.scale<=Hhe||isNaN(t.scale))&&(t.scale=1),(t.translate>=Fhe&&t.translate<=zhe||isNaN(t.translate))&&(t.translate=0)}function bc(t,e,n,r){RT(t.x,e.x,n.x,r?r.originX:void 0),RT(t.y,e.y,n.y,r?r.originY:void 0)}function _T(t,e,n){t.min=n.min+e.min,t.max=t.min+Wt(e)}function Whe(t,e,n){_T(t.x,e.x,n.x),_T(t.y,e.y,n.y)}function IT(t,e,n){t.min=e.min-n.min,t.max=t.min+Wt(e)}function vc(t,e,n){IT(t.x,e.x,n.x),IT(t.y,e.y,n.y)}const NT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ha=()=>({x:NT(),y:NT()}),DT=()=>({min:0,max:0}),et=()=>({x:DT(),y:DT()});function Pn(t){return[t("x"),t("y")]}function ly(t){return t===void 0||t===1}function p0({scale:t,scaleX:e,scaleY:n}){return!ly(t)||!ly(e)||!ly(n)}function Ks(t){return p0(t)||X4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function X4(t){return PT(t.x)||PT(t.y)}function PT(t){return t&&t!=="0%"}function Zf(t,e,n){const r=t-n,o=e*r;return n+o}function OT(t,e,n,r,o){return o!==void 0&&(t=Zf(t,o,r)),Zf(t,n,r)+e}function m0(t,e=0,n=1,r,o){t.min=OT(t.min,e,n,r,o),t.max=OT(t.max,e,n,r,o)}function Q4(t,{x:e,y:n}){m0(t.x,e.translate,e.scale,e.originPoint),m0(t.y,n.translate,n.scale,n.originPoint)}const LT=.999999999999,jT=1.0000000000001;function Ghe(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let s,i;for(let a=0;a<o;a++){s=n[a],i=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&pa(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,Q4(t,i)),r&&Ks(s.latestValues)&&pa(t,s.latestValues))}e.x<jT&&e.x>LT&&(e.x=1),e.y<jT&&e.y>LT&&(e.y=1)}function fa(t,e){t.min=t.min+e,t.max=t.max+e}function BT(t,e,n,r,o=.5){const s=Ue(t.min,t.max,o);m0(t,e,n,s,r)}function pa(t,e){BT(t.x,e.x,e.scaleX,e.scale,e.originX),BT(t.y,e.y,e.scaleY,e.scale,e.originY)}function e3(t,e){return Z4(Vhe(t.getBoundingClientRect(),e))}function qhe(t,e,n){const r=e3(t,n),{scroll:o}=e;return o&&(fa(r.x,o.offset.x),fa(r.y,o.offset.y)),r}const t3=({current:t})=>t?t.ownerDocument.defaultView:null,VT=(t,e)=>Math.abs(t-e);function Khe(t,e){const n=VT(t.x,e.x),r=VT(t.y,e.y);return Math.sqrt(n**2+r**2)}class n3{constructor(e,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=dy(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=Khe(u.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=u,{timestamp:g}=vt;this.history.push({...p,timestamp:g});const{onStart:b,onMove:v}=this.handlers;h||(b&&b(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=cy(h,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=dy(u.type==="pointercancel"?this.lastMoveEventInfo:cy(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,b),p&&p(u,b)},!ix(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const i=nu(e),a=cy(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=vt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,dy(a,this.history)),this.removeListeners=eu(yc(this.contextWindow,"pointermove",this.handlePointerMove),yc(this.contextWindow,"pointerup",this.handlePointerUp),yc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Rs(this.updatePoint)}}function cy(t,e){return e?{point:e(t.point)}:t}function $T(t,e){return{x:t.x-e.x,y:t.y-e.y}}function dy({point:t},e){return{point:t,delta:$T(t,r3(e)),offset:$T(t,Zhe(e)),velocity:Jhe(e,.1)}}function Zhe(t){return t[0]}function r3(t){return t[t.length-1]}function Jhe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=r3(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>Or(e)));)n--;if(!r)return{x:0,y:0};const s=Lr(o.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const i={x:(o.x-r.x)/s,y:(o.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Yhe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ue(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ue(n,t,r.max):Math.min(t,n)),t}function HT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Xhe(t,{top:e,left:n,bottom:r,right:o}){return{x:HT(t.x,n,o),y:HT(t.y,e,r)}}function FT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Qhe(t,e){return{x:FT(t.x,e.x),y:FT(t.y,e.y)}}function efe(t,e){let n=.5;const r=Wt(t),o=Wt(e);return o>r?n=fd(e.min,e.max-r,t.min):r>o&&(n=fd(t.min,t.max-o,e.min)),_o(0,1,n)}function tfe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const g0=.35;function nfe(t=g0){return t===!1?t=0:t===!0&&(t=g0),{x:zT(t,"left","right"),y:zT(t,"top","bottom")}}function zT(t,e,n){return{min:UT(t,e),max:UT(t,n)}}function UT(t,e){return typeof t=="number"?t:t[e]||0}const Qn={x:!1,y:!1};function o3(){return Qn.x||Qn.y}function rfe(t){return t==="x"||t==="y"?Qn[t]?null:(Qn[t]=!0,()=>{Qn[t]=!1}):Qn.x||Qn.y?null:(Qn.x=Qn.y=!0,()=>{Qn.x=Qn.y=!1})}const ofe=new WeakMap;class sfe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=et(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nu(d).point)},s=(d,u)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rfe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pn(b=>{let v=this.getAxisMotionValue(b).get()||0;if(Pr.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[b];w&&(v=Wt(w)*(parseFloat(v)/100))}}this.originPoint[b]=v}),p&&Ge.postRender(()=>p(d,u)),t0(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(d,u)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=u;if(f&&this.currentDirection===null){this.currentDirection=ife(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,b),this.updateAxis("y",u.point,b),this.visualElement.render(),g&&g(d,u)},a=(d,u)=>this.stop(d,u),l=()=>Pn(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)==null?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new n3(e,{onSessionStart:o,onStart:s,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:t3(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&Ge.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!zu(e,o,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=Yhe(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,o=this.constraints;e&&da(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Xhe(r.layoutBox,e):this.constraints=!1,this.elastic=nfe(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pn(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=tfe(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!da(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=qhe(r,o.root,this.visualElement.getTransformPagePoint());let i=Qhe(o.layout.layoutBox,s);if(n){const a=n(Bhe(i));this.hasMutatedConstraints=!!a,a&&(i=Z4(a))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Pn(d=>{if(!zu(d,n,this.currentDirection))return;let u=l&&l[d]||{};i&&(u={min:0,max:0});const h=o?200:1e6,f=o?40:1e7,p={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return t0(this.visualElement,e),r.start(sx(e,r,0,n,this.visualElement,!1))}stopAnimation(){Pn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pn(n=>{const{drag:r}=this.getProps();if(!zu(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:a}=o.layout.layoutBox[n];s.set(e[n]-Ue(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!da(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Pn(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();o[i]=efe({min:l,max:l},this.constraints[i])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pn(i=>{if(!zu(i,e,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set(Ue(l,c,o[i]))})}addListeners(){if(!this.visualElement.current)return;ofe.set(this.visualElement,this);const e=this.visualElement.current,n=yc(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();da(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Ge.read(r);const i=pd(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Pn(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=l[d].translate,u.set(u.get()+l[d].translate))}),this.visualElement.render())});return()=>{i(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:i=g0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function zu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function ife(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class afe extends $s{constructor(e){super(e),this.removeGroupControls=Wn,this.removeListeners=Wn,this.controls=new sfe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const WT=t=>(e,n)=>{t&&Ge.postRender(()=>t(e,n))};class lfe extends $s{constructor(){super(...arguments),this.removePointerDownListener=Wn}onPointerDown(e){this.session=new n3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:t3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:WT(e),onStart:WT(n),onMove:r,onEnd:(s,i)=>{delete this.session,o&&Ge.postRender(()=>o(s,i))}}}mount(){this.removePointerDownListener=yc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=GT(t,e.target.x),r=GT(t,e.target.y);return`${n}% ${r}%`}},cfe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=_s.parse(t);if(o.length>5)return r;const s=_s.createTransformer(t),i=typeof o[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;o[0+i]/=a,o[1+i]/=l;const c=Ue(a,l,.5);return typeof o[2+i]=="number"&&(o[2+i]/=c),typeof o[3+i]=="number"&&(o[3+i]/=c),s(o)}};class dfe extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:s}=e;kde(ufe),s&&(n.group&&n.group.add(s),r&&r.register&&o&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),gh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:s}=this.props,{projection:i}=r;return i&&(i.isPresent=s,o||e.layoutDependency!==n||n===void 0||e.isPresent!==s?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||Ge.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Pw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function s3(t){const[e,n]=e4(),r=y.useContext(Ew);return m.jsx(dfe,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(i4),isPresent:e,safeToRemove:n})}const ufe={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:cfe};function hfe(t,e,n){const r=Pt(t)?t:Fa(t);return r.start(sx("",r,e,n)),r.animation}const ffe=(t,e)=>t.depth-e.depth;class pfe{constructor(){this.children=[],this.isDirty=!1}add(e){Uw(this.children,e),this.isDirty=!0}remove(e){Ww(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ffe),this.isDirty=!1,this.children.forEach(e)}}function mfe(t,e){const n=ln.now(),r=({timestamp:o})=>{const s=o-n;s>=e&&(Rs(r),t(s-e))};return Ge.setup(r,!0),()=>Rs(r)}const i3=["TopLeft","TopRight","BottomLeft","BottomRight"],gfe=i3.length,qT=t=>typeof t=="string"?parseFloat(t):t,KT=t=>typeof t=="number"||re.test(t);function yfe(t,e,n,r,o,s){o?(t.opacity=Ue(0,n.opacity??1,bfe(r)),t.opacityExit=Ue(e.opacity??1,0,vfe(r))):s&&(t.opacity=Ue(e.opacity??1,n.opacity??1,r));for(let i=0;i<gfe;i++){const a=`border${i3[i]}Radius`;let l=ZT(e,a),c=ZT(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||KT(l)===KT(c)?(t[a]=Math.max(Ue(qT(l),qT(c),r),0),(Pr.test(c)||Pr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ue(e.rotate||0,n.rotate||0,r))}function ZT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bfe=a3(0,.5,O4),vfe=a3(.5,.95,Wn);function a3(t,e,n){return r=>r<t?0:r>e?1:n(fd(t,e,r))}function JT(t,e){t.min=e.min,t.max=e.max}function In(t,e){JT(t.x,e.x),JT(t.y,e.y)}function YT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function XT(t,e,n,r,o){return t-=e,t=Zf(t,1/n,r),o!==void 0&&(t=Zf(t,1/o,r)),t}function wfe(t,e=0,n=1,r=.5,o,s=t,i=t){if(Pr.test(e)&&(e=parseFloat(e),e=Ue(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=Ue(s.min,s.max,r);t===s&&(a-=e),t.min=XT(t.min,e,n,a,o),t.max=XT(t.max,e,n,a,o)}function QT(t,e,[n,r,o],s,i){wfe(t,e[n],e[r],e[o],e.scale,s,i)}const xfe=["x","scaleX","originX"],kfe=["y","scaleY","originY"];function eE(t,e,n,r){QT(t.x,e,xfe,n?n.x:void 0,r?r.x:void 0),QT(t.y,e,kfe,n?n.y:void 0,r?r.y:void 0)}function tE(t){return t.translate===0&&t.scale===1}function l3(t){return tE(t.x)&&tE(t.y)}function nE(t,e){return t.min===e.min&&t.max===e.max}function Cfe(t,e){return nE(t.x,e.x)&&nE(t.y,e.y)}function rE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function c3(t,e){return rE(t.x,e.x)&&rE(t.y,e.y)}function oE(t){return Wt(t.x)/Wt(t.y)}function sE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Sfe{constructor(){this.members=[]}add(e){Uw(this.members,e),e.scheduleRender()}remove(e){if(Ww(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Tfe(t,e,n){let r="";const o=t.x.translate/e.x,s=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((o||s||i)&&(r=`translate3d(${o}px, ${s}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:u,rotateY:h,skewX:f,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}function d3(t){return QP(t)&&"ownerSVGElement"in t}function Efe(t){return d3(t)&&t.tagName==="svg"}const uy=["","X","Y","Z"],Mfe={visibility:"hidden"},Afe=1e3;let Rfe=0;function hy(t,e,n,r){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),r&&(r[t]=0))}function u3(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=b4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ge,!(o||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&u3(r)}function h3({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},a=e==null?void 0:e()){this.id=Rfe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Nfe),this.nodes.forEach(jfe),this.nodes.forEach(Bfe),this.nodes.forEach(Dfe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new pfe)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Gw),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=d3(i)&&!Efe(i),this.instance=i;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d;const u=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=mfe(u,250),gh.hasAnimatedSinceResize&&(gh.hasAnimatedSinceResize=!1,this.nodes.forEach(aE))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||zfe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=c.getProps(),v=!this.targetLayout||!c3(this.targetLayout,f),x=!u&&h;if(this.options.layoutRoot||this.resumeFrom||x||u&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const w={...qw(p,"layout"),onPlay:g,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else u||aE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Rs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vfe),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&u3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iE);return}this.isUpdating||this.nodes.forEach(Ofe),this.isUpdating=!1,this.nodes.forEach(Lfe),this.nodes.forEach(_fe),this.nodes.forEach(Ife),this.clearAllSnapshots();const a=ln.now();vt.delta=_o(0,1e3/60,a-vt.timestamp),vt.timestamp=a,vt.isProcessing=!0,oy.update.process(vt),oy.preRender.process(vt),oy.render.process(vt),vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pfe),this.sharedNodes.forEach($fe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Wt(this.snapshot.measuredBox.x)&&!Wt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!l3(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;i&&this.instance&&(a||Ks(this.latestValues)||d)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),Ufe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:i}=this.options;if(!i)return et();const a=i.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Wfe))){const{scroll:d}=this.root;d&&(fa(a.x,d.offset.x),fa(a.y,d.offset.y))}return a}removeElementScroll(i){var l;const a=et();if(In(a,i),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;d!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&In(a,i),fa(a.x,u.offset.x),fa(a.y,u.offset.y))}return a}applyTransform(i,a=!1){const l=et();In(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&pa(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ks(d.latestValues)&&pa(l,d.latestValues)}return Ks(this.latestValues)&&pa(l,this.latestValues),l}removeTransform(i){const a=et();In(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ks(c.latestValues))continue;p0(c.latestValues)&&c.updateSnapshot();const d=et(),u=c.measurePageBox();In(d,u),eE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Ks(this.latestValues)&&eE(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:u}=this.options;if(!(!this.layout||!(d||u))){if(this.resolvedRelativeTargetAt=vt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=et(),this.relativeTargetOrigin=et(),vc(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=et(),this.targetWithTransforms=et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Whe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):In(this.target,this.layout.layoutBox),Q4(this.target,this.targetDelta)):In(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=et(),this.relativeTargetOrigin=et(),vc(this.relativeTargetOrigin,this.target,f.target),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||p0(this.parent.latestValues)||X4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const i=this.getLead(),a=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===vt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;In(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,h=this.treeScale.y;Ghe(this.layoutCorrected,this.treeScale,this.path,a),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=et());const{target:f}=i;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YT(this.prevProjectionDelta.x,this.projectionDelta.x),YT(this.prevProjectionDelta.y,this.projectionDelta.y)),bc(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==h||!sE(this.projectionDelta.x,this.prevProjectionDelta.x)||!sE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ha(),this.projectionDelta=ha(),this.projectionDeltaWithTransform=ha()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},u=ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=et(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,b=this.getStack(),v=!b||b.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(Ffe));this.animationProgress=0;let w;this.mixTargetDelta=k=>{const C=k/1e3;lE(u.x,i.x,C),lE(u.y,i.y,C),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vc(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hfe(this.relativeTarget,this.relativeTargetOrigin,h,C),w&&Cfe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=et()),In(w,this.relativeTarget)),g&&(this.animationValues=d,yfe(d,c,this.latestValues,C,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(!1),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(!1),this.pendingAnimation&&(Rs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{gh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Fa(0)),this.currentAnimation=hfe(this.motionValue,[0,1e3],{...i,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),i.onUpdate&&i.onUpdate(d)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Afe),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&f3(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||et();const u=Wt(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+u;const h=Wt(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}In(a,l),pa(a,d),bc(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Sfe),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var a;const{layoutId:i}=this.options;return i?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:i}=this.options;return i?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&hy("z",i,c,this.animationValues);for(let d=0;d<uy.length;d++)hy(`rotate${uy[d]}`,i,c,this.animationValues),hy(`skew${uy[d]}`,i,c,this.animationValues);i.render();for(const d in c)i.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);i.scheduleRender()}getProjectionStyles(i){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Mfe;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=ph(i==null?void 0:i.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=ph(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Ks(this.latestValues)&&(f.transform=l?l({},""):"none",this.hasProjected=!1),f}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=Tfe(this.projectionDeltaWithTransform,this.treeScale,d),l&&(a.transform=l(d,a.transform));const{x:u,y:h}=this.projectionDelta;a.transformOrigin=`${u.origin*100}% ${h.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const f in cd){if(d[f]===void 0)continue;const{correct:p,applyTo:g,isCSSVariable:b}=cd[f],v=a.transform==="none"?d[f]:p(d[f],c);if(g){const x=g.length;for(let w=0;w<x;w++)a[g[w]]=v}else b?this.options.visualElement.renderState.vars[f]=v:a[f]=v}return this.options.layoutId&&(a.pointerEvents=c===this?ph(i==null?void 0:i.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)==null?void 0:a.stop(!1)}),this.root.nodes.forEach(iE),this.root.sharedNodes.clear()}}}function _fe(t){t.updateLayout()}function Ife(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:s}=t.options,i=e.source!==t.layout.source;s==="size"?Pn(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],f=Wt(h);h.min=r[u].min,h.max=h.min+f}):f3(s,e.layoutBox,r)&&Pn(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],f=Wt(r[u]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+f)});const a=ha();bc(a,r,e.layoutBox);const l=ha();i?bc(l,t.applyTransform(o,!0),e.measuredBox):bc(l,r,e.layoutBox);const c=!l3(a);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:f}=u;if(h&&f){const p=et();vc(p,e.layoutBox,h.layoutBox);const g=et();vc(g,r,f.layoutBox),c3(p,g)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Nfe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Dfe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Pfe(t){t.clearSnapshot()}function iE(t){t.clearMeasurements()}function Ofe(t){t.isLayoutDirty=!1}function Lfe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function aE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jfe(t){t.resolveTargetDelta()}function Bfe(t){t.calcProjection()}function Vfe(t){t.resetSkewAndRotation()}function $fe(t){t.removeLeadSnapshot()}function lE(t,e,n){t.translate=Ue(e.translate,0,n),t.scale=Ue(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function cE(t,e,n,r){t.min=Ue(e.min,n.min,r),t.max=Ue(e.max,n.max,r)}function Hfe(t,e,n,r){cE(t.x,e.x,n.x,r),cE(t.y,e.y,n.y,r)}function Ffe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zfe={duration:.45,ease:[.4,0,.1,1]},dE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),uE=dE("applewebkit/")&&!dE("chrome/")?Math.round:Wn;function hE(t){t.min=uE(t.min),t.max=uE(t.max)}function Ufe(t){hE(t.x),hE(t.y)}function f3(t,e,n){return t==="position"||t==="preserve-aspect"&&!Uhe(oE(e),oE(n),.2)}function Wfe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Gfe=h3({attachResizeListener:(t,e)=>pd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fy={current:void 0},p3=h3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!fy.current){const t=new Gfe({});t.mount(window),t.setOptions({layoutScroll:!0}),fy.current=t}return fy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),qfe={pan:{Feature:lfe},drag:{Feature:afe,ProjectionNode:p3,MeasureLayout:s3}};function Kfe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const o=(n==null?void 0:n[t])??r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function m3(t,e){const n=Kfe(t),r=new AbortController,o={passive:!0,...e,signal:r.signal};return[n,o,()=>r.abort()]}function fE(t){return!(t.pointerType==="touch"||o3())}function Zfe(t,e,n={}){const[r,o,s]=m3(t,n),i=a=>{if(!fE(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const d=u=>{fE(u)&&(c(u),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,o)};return r.forEach(a=>{a.addEventListener("pointerenter",i,o)}),s}function pE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,s=r[o];s&&Ge.postRender(()=>s(e,nu(e)))}class Jfe extends $s{mount(){const{current:e}=this.node;e&&(this.unmount=Zfe(e,(n,r)=>(pE(this.node,r,"Start"),o=>pE(this.node,o,"End"))))}unmount(){}}class Yfe extends $s{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=eu(pd(this.node.current,"focus",()=>this.onFocus()),pd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const g3=(t,e)=>e?t===e?!0:g3(t,e.parentElement):!1,Xfe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Qfe(t){return Xfe.has(t.tagName)||t.tabIndex!==-1}const yh=new WeakSet;function mE(t){return e=>{e.key==="Enter"&&t(e)}}function py(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const epe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=mE(()=>{if(yh.has(n))return;py(n,"down");const o=mE(()=>{py(n,"up")}),s=()=>py(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function gE(t){return ix(t)&&!o3()}function tpe(t,e,n={}){const[r,o,s]=m3(t,n),i=a=>{const l=a.currentTarget;if(!gE(a))return;yh.add(l);const c=e(l,a),d=(f,p)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",h),yh.has(l)&&yh.delete(l),gE(f)&&typeof c=="function"&&c(f,{success:p})},u=f=>{d(f,l===window||l===document||n.useGlobalTarget||g3(l,f.target))},h=f=>{d(f,!1)};window.addEventListener("pointerup",u,o),window.addEventListener("pointercancel",h,o)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",i,o),_w(a)&&(a.addEventListener("focus",c=>epe(c,o)),!Qfe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function yE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),s=r[o];s&&Ge.postRender(()=>s(e,nu(e)))}class npe extends $s{mount(){const{current:e}=this.node;e&&(this.unmount=tpe(e,(n,r)=>(yE(this.node,r,"Start"),(o,{success:s})=>yE(this.node,o,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const y0=new WeakMap,my=new WeakMap,rpe=t=>{const e=y0.get(t.target);e&&e(t)},ope=t=>{t.forEach(rpe)};function spe({root:t,...e}){const n=t||document;my.has(n)||my.set(n,{});const r=my.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(ope,{root:t,...e})),r[o]}function ipe(t,e,n){const r=spe(e);return y0.set(t,n),r.observe(t),()=>{y0.delete(t),r.unobserve(t)}}const ape={some:0,all:1};class lpe extends $s{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:s}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:ape[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),h=c?d:u;h&&h(l)};return ipe(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(cpe(e,n))&&this.startObserver()}unmount(){}}function cpe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const dpe={inView:{Feature:lpe},tap:{Feature:npe},focus:{Feature:Yfe},hover:{Feature:Jfe}},upe={layout:{ProjectionNode:p3,MeasureLayout:s3}},b0={current:null},y3={current:!1};function hpe(){if(y3.current=!0,!!Aw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>b0.current=t.matches;t.addListener(e),e()}else b0.current=!1}const fpe=new WeakMap;function ppe(t,e,n){for(const r in e){const o=e[r],s=n[r];if(Pt(o))t.addValue(r,o);else if(Pt(s))t.addValue(r,Fa(o,{owner:t}));else if(s!==o)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=t.getStaticValue(r);t.addValue(r,Fa(i!==void 0?i:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const b3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),v3=t=>/^0[^.\s]+$/u.test(t),mpe={test:t=>t==="auto",parse:t=>t},w3=t=>e=>e.test(t),x3=[fl,re,Pr,Jo,Sde,Cde,mpe],bE=t=>x3.find(w3(t)),gpe=[...x3,Nt,_s],ype=t=>gpe.find(w3(t)),bpe=new Set(["brightness","contrast","saturate","opacity"]);function vpe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Kw)||[];if(!r)return t;const o=n.replace(r,"");let s=bpe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+o+")"}const wpe=/\b([a-z-]*)\(.*?\)/gu,v0={..._s,getAnimatableNone:t=>{const e=t.match(wpe);return e?e.map(vpe).join(" "):t}},xpe={...Bw,color:Nt,backgroundColor:Nt,outlineColor:Nt,fill:Nt,stroke:Nt,borderColor:Nt,borderTopColor:Nt,borderRightColor:Nt,borderBottomColor:Nt,borderLeftColor:Nt,filter:v0,WebkitFilter:v0},k3=t=>xpe[t];function C3(t,e){let n=k3(t);return n!==v0&&(n=_s),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const vE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kpe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ln.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ge.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=wm(n),this.isVariantNode=o4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in u){const f=u[h];l[h]!==void 0&&Pt(f)&&f.set(l[h],!1)}}mount(e){this.current=e,fpe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),y3.current||hpe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:b0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Rs(this.notifyUpdate),Rs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=hl.has(e);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ge.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ha){const n=Ha[e];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[e]&&o&&r(this.props)&&(this.features[e]=new o(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vE.length;r++){const o=vE[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,i=e[s];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=ppe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Fa(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(b3(r)||v3(r))?r=parseFloat(r):!ype(r)&&_s.test(n)&&(r=C3(e,n)),this.setBaseTarget(e,Pt(r)?r.get():r)),Pt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=Fw(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);i&&(r=i[e])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Pt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Gw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}const Cpe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Spe(t){const e=Cpe.exec(t);if(!e)return[,];const[,n,r,o]=e;return[`--${n??r}`,o]}function S3(t,e,n=1){const[r,o]=Spe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const i=s.trim();return b3(i)?parseFloat(i):i}return jw(o)?S3(o,e,n+1):o}function Tpe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||v3(t):!0}const Epe=new Set(["auto","none","0"]);function Mpe(t,e,n){let r=0,o;for(;r<t.length&&!o;){const s=t[r];typeof s=="string"&&!Epe.has(s)&&hd(s).values.length&&(o=t[r]),r++}if(o&&n)for(const s of e)t[s]=C3(n,o)}class Ape extends rx{constructor(e,n,r,o,s){super(e,n,r,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),jw(c))){const d=S3(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!W4.has(r)||e.length!==2)return;const[o,s]=e,i=bE(o),a=bE(s);if(i!==a)if(ST(i)&&ST(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else gi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let o=0;o<e.length;o++)(e[o]===null||Tpe(e[o]))&&r.push(o);r.length&&Mpe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(r,o).jump(o,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const s=r.length-1,i=r[s];r[s]=gi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class T3 extends kpe{constructor(){super(...arguments),this.KeyframeResolver=Ape}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function E3(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function Rpe(t){return window.getComputedStyle(t)}class _pe extends T3{constructor(){super(...arguments),this.type="html",this.renderInstance=E3}readValueFromInstance(e,n){var r;if(hl.has(n))return(r=this.projection)!=null&&r.isProjecting?l0(n):Que(e,n);{const o=Rpe(e),s=(Lw(n)?o.getPropertyValue(n):o[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return e3(e,n)}build(e,n,r){Vw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return zw(e,n,r)}}const M3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ipe(t,e,n,r){E3(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(M3.has(o)?o:Dw(o),e.attrs[o])}class Npe extends T3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=et}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hl.has(n)){const r=k3(n);return r&&r.default||0}return n=M3.has(n)?n:Dw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return g4(e,n,r)}build(e,n,r){h4(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,o){Ipe(e,n,r,o)}mount(e){this.isSVGTag=p4(e.tagName),super.mount(e)}}const Dpe=(t,e)=>Hw(t)?new Npe(e):new _pe(e,{allowProjection:t!==y.Fragment}),Ppe=Fde({...Lhe,...dpe,...qfe,...upe},Dpe),Ope=lde(Ppe),Lpe="_container_jw0vg_2",jpe="_title_jw0vg_8",Bpe="_player_jw0vg_12",Vpe="_currentContainer_jw0vg_17",$pe="_icon_jw0vg_30",na={container:Lpe,title:jpe,player:Bpe,currentContainer:Vpe,icon:$pe},Hpe=t=>new Date(t.getTime()-24*60*60*1e3),Fpe=t=>new Date(t.getTime()+24*60*60*1e3),zpe=({date:t,onDateChange:e})=>{const n=Bt(),o=new Date(t).toLocaleDateString()===new Date().toLocaleDateString()?n.formatMessage({id:"checklist-calendar.today",defaultMessage:"Today"}):new Date(t).toLocaleDateString();return m.jsxs("div",{className:na.container,children:[m.jsx(ae.Title,{level:4,noMargin:!0,className:na.title,children:n.formatMessage({id:"checklist-calendar.title",defaultMessage:"Tasks"})}),m.jsxs("div",{className:na.player,children:[m.jsx(Q,{onClick:()=>e(Hpe(t)),width:30,icon:"basil:skip-prev-outline",className:na.icon}),m.jsx(ae.Text,{className:na.currentContainer,onClick:()=>e(new Date),children:o}),m.jsx(Q,{onClick:()=>e(Fpe(t)),width:30,icon:"basil:skip-next-outline",className:na.icon})]})]})},Upe="_checklistItem_1ge4q_2",Wpe="_lastChecklistItem_1ge4q_17",Gpe="_checkbox_1ge4q_21",qpe="_title_1ge4q_26",Ol={checklistItem:Upe,lastChecklistItem:Wpe,checkbox:Gpe,title:qpe},Kpe=({date:t})=>{const{checklistByGivingDateIds:e,allChecklist:n,getChecklistByGivingDate:r,updateChecklist:o}=tp(),{checklistTemplate:s}=vs(),i=yr();return N.useEffect(()=>{r({date:t})},[t]),m.jsx("div",{className:Ol.container,children:e.map((a,l)=>{const c=n[a],d=s[c.checklistTemplateId];return m.jsxs("div",{className:le(Ol.checklistItem,l===e.length-1&&Ol.lastChecklistItem),children:[m.jsx(Q,{color:(d==null?void 0:d.avatar.color)||"#8A8A8A",width:32,height:32,icon:d==null?void 0:d.avatar.name}),m.jsx(ae.Text,{onClick:()=>i(`/task/${c.checklistTemplateId}?currentDay=${t.toISOString()}${c.clientOnly?"":`&checklistId=${c.id}`}`),className:Ol.title,children:d==null?void 0:d.title}),m.jsx(nw,{checked:!!(c!=null&&c.completedAt),className:Ol.checkbox,onChange:u=>{u.stopPropagation(),o({...c,completedAt:u.target.checked?new Date().toISOString():void 0})}})]},a)})})},Zpe="_addChecklist_2trfx_1",Jpe={addChecklist:Zpe},Ype=()=>{const t=Bt(),e=yr();return m.jsx("div",{className:Jpe.addChecklist,children:m.jsx(St,{onClick:()=>{e("/create-checklist")},type:"dash",size:"md",block:!0,children:t.formatMessage({id:"checklist-create.label-create-checklist",defaultMessage:"Create Task"})})})};function Xpe(t){return m.jsx("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",...t,children:m.jsx("g",{id:"pause_circle_outline_24px",children:m.jsx("path",{id:"icon/av/pause_circle_outline_24px","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 24C4 12.96 12.96 4 24 4C35.04 4 44 12.96 44 24C44 35.04 35.04 44 24 44C12.96 44 4 35.04 4 24ZM22 30C22 31.1 21.1 32 20 32C18.9 32 18 31.1 18 30V18C18 16.9 18.9 16 20 16C21.1 16 22 16.9 22 18V30ZM24 40C15.18 40 8 32.82 8 24C8 15.18 15.18 8 24 8C32.82 8 40 15.18 40 24C40 32.82 32.82 40 24 40ZM30 30C30 31.1 29.1 32 28 32C26.9 32 26 31.1 26 30V18C26 16.9 26.9 16 28 16C29.1 16 30 16.9 30 18V30Z",fill:"white"})})})}function Qpe(t){return m.jsx("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",...t,children:m.jsx("g",{id:"play_circle_filled_24px",children:m.jsx("path",{id:"icon/av/play_circle_filled_24px","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 24C4 12.96 12.96 4 24 4C35.04 4 44 12.96 44 24C44 35.04 35.04 44 24 44C12.96 44 4 35.04 4 24ZM21.6 16.2C20.94 15.7 20 16.18 20 17V31C20 31.82 20.94 32.3 21.6 31.8L30.94 24.8C31.48 24.4 31.48 23.6 30.94 23.2L21.6 16.2Z",fill:"white"})})})}const eme="_container_n2rya_2",tme="_body_n2rya_6",nme="_icon_n2rya_18",rme="_progressContainer_n2rya_22",ome="_progress_n2rya_22",sme="_pomodoroPhase_n2rya_31",ime="_pomodoroPhaseText_n2rya_39",ame="_loadStatus_n2rya_52",ao={container:eme,body:tme,icon:nme,progressContainer:rme,progress:ome,pomodoroPhase:sme,pomodoroPhaseText:ime,loadStatus:ame},lme={"date-a-live-season-1-ost.mp3":{name:"date a live",id:"date-a-live-season-1-ost.mp3"},"rockabye-baby-twinkle-twinkle.mp3":{name:"rockabye baby twinkle twinkle",id:"rockabye-baby-twinkle-twinkle.mp3"},"twinkle-twinkle-little-star-acoustic-guitar.mp3":{name:"twinkle twinkle little star acoustic guitar",id:"twinkle-twinkle-little-star-acoustic-guitar.mp3"},"einstein-baby-lullaby-academy-brahms.mp3":{name:"Baby Lullaby Music - Einstein Baby Lullaby Academy",id:"einstein-baby-lullaby-academy-brahms.mp3"},"einstein-baby-lullaby.mp3":{name:"Einstein Baby Lullaby",id:"einstein-baby-lullaby.mp3"},"a-whole-new-world.mp3":{id:"a-whole-new-world.mp3",name:"A Whole New World"},"reflection.mp3":{id:"reflection.mp3",name:"Reflection"},"arabesque-piano-relaxation.mp3":{id:"arabesque-piano-relaxation.mp3",name:"Arabesque Piano Relaxation"},"canon-in-d.mp3":{id:"canon-in-d.mp3",name:"Canon in D"},"music-therapy-serenity.mp3":{id:"music-therapy-serenity.mp3",name:"Music Therapy - Serenity"},"prelude-in-c-major.mp3":{id:"prelude-in-c-major.mp3",name:"Prelude in C Major"}},cme=Qf(t=>({isPlaying:!1,setIsPlaying:e=>t({isPlaying:e}),currentSongIndex:0,setCurrentSongIndex:e=>t({currentSongIndex:e}),songList:[],setSongList:e=>t({songList:e}),currentTime:0,setCurrentTime:e=>t({currentTime:e}),duration:0,setDuration:e=>t({duration:e})})),Gs=[];let lo=null;const A3=({autoPlayDefault:t=!1}={})=>{const{isPlaying:e,songList:n,setSongList:r,setIsPlaying:o,currentSongIndex:s,setCurrentSongIndex:i,currentTime:a,setCurrentTime:l,duration:c,setDuration:d}=cme(),[u,h]=N.useState(t),f=w=>{console.log("currentSingIndex",s,n.length),lo&&lo.pause();let k=(s+1)%n.length;w&&!isNaN(w)&&(k=w),console.log("nextIndex",k),i(k),g(k)},p=()=>{lo&&lo.pause();const w=(s-1+n.length)%n.length;g(w),i(w)},g=w=>{if(w<0||w>=n.length)return;const k=n[w];let C;console.log("AUTO PLAY",u,Gs[w]),Gs[w]?(C=Gs[w],C.currentTime=0):C=new Audio(k),lo=C,C.onended=()=>{console.log("AUDIO END!!!",u),u&&f(w+1)},C.ontimeupdate=()=>{l(C.currentTime),d(C.duration)},C.play().then(()=>{o(!0),l(0)}).catch(console.error)};return{loadSong:g,play:async()=>{if(!lo)g(s),o(!0);else{const w=Gs[s];w&&!e&&w.play().then(()=>o(!0)).catch(console.error)}},pause:()=>{lo&&e&&(lo.pause(),o(!1))},isPlaying:e,autoPlay:u,setAutoPlay:w=>h(w),next:f,prev:p,audio:lo,currentTime:a,duration:c,currentSongIndex:s,loadAllSongs:async({songs:w,callback:k})=>{const C=w.filter(T=>!n.includes(T)),S=[...n,...C];C.length&&r(S);for(let T=0;T<S.length;T++){const E=S[T];if(Gs[T]){k(E,T);continue}const M=new Audio(E);Gs.push(M),await new Promise((R,I)=>{M.addEventListener("loadedmetadata",()=>{k(E,T),R()}),M.addEventListener("error",L=>{console.error(`Error loading song: ${E}`,L),I(L)})})}return Gs},songList:n}},dme=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},ax=dme(Object.values(lme)),ume=ax.map(({id:t})=>kL(t)),hme="_container_fu073_2",fme="_header_fu073_10",pme="_body_fu073_23",mme="_card_fu073_28",gme="_cardActive_fu073_40",yme="_titleActive_fu073_44",bme="_successIcon_fu073_49",qs={container:hme,header:fme,body:pme,card:mme,cardActive:gme,titleActive:yme,successIcon:bme},vme=({visible:t,onClose:e})=>{const{currentSongIndex:n,next:r}=A3(),o=Bt();return m.jsxs(ZP,{className:qs.container,visible:t,onBlur:e,children:[m.jsxs("div",{className:qs.header,children:[m.jsx(ae.Title,{noMargin:!0,level:4,children:o.formatMessage({id:"audio-song-list-drawer.title",defaultMessage:"Song List"})}),m.jsx(Q,{width:32,icon:"material-symbols:close-rounded",onClick:e})]}),m.jsx("div",{className:qs.body,children:ax.map(({name:s},i)=>m.jsxs("div",{onClick:()=>r(i),className:le(qs.card,n===i&&qs.cardActive),children:[m.jsx(ae.Paragraph,{noMargin:!0,className:le(n===i&&qs.titleActive),children:s}),n===i&&m.jsx(Q,{className:qs.successIcon,icon:"material-symbols:check-circle-rounded"})]},i))})]})},wme=({className:t})=>{const[e,n]=N.useState(0),{play:r,pause:o,isPlaying:s,next:i,prev:a,currentTime:l,currentSongIndex:c,loadAllSongs:d,duration:u,songList:h}=A3({autoPlayDefault:!0}),[f,p]=y.useState(!1),g=async()=>{await d({songs:ume,callback:()=>{n(v=>v+1)}})};N.useEffect(()=>{g()},[]);const b=()=>{s?o():r()};return m.jsxs("div",{className:le(ao.container,t),children:[m.jsx(vme,{visible:f,onClose:()=>p(!1)}),e!==h.length&&m.jsxs(ae.Text,{className:ao.loadStatus,children:["load song",e,"/",h.length]}),l>0&&m.jsx("div",{className:ao.progressContainer,children:m.jsx("div",{className:ao.progress,style:{width:`${l/u*100}%`}})}),m.jsxs("div",{className:ao.body,children:[m.jsx(Q,{icon:"material-symbols:skip-previous-rounded",height:24,color:"white",onClick:()=>a()}),s?m.jsx(Xpe,{className:ao.icon,width:42,onClick:b}):m.jsx(Qpe,{className:ao.icon,onClick:b}),m.jsx(Q,{icon:"material-symbols:skip-next-rounded",height:32,width:32,color:"white",onClick:()=>i()}),m.jsxs("span",{className:ao.pomodoroPhase,children:[m.jsx(ae.Text,{onClick:()=>p(!0),className:ao.pomodoroPhaseText,children:`${c+1}. ${ax[c].name}`}),m.jsx(Q,{color:"white",onClick:()=>p(!0),icon:"material-symbols:library-music-rounded",width:24})]})]})]})},xme="_container_5cdu6_2",kme="_player_5cdu6_17",Cme="_hr_5cdu6_24",Sme="_card_5cdu6_30",Uu={container:xme,player:kme,hr:Cme,card:Sme},Tme=()=>{const[t,e]=N.useState(new Date);return m.jsxs("div",{className:Uu.container,children:[m.jsx(jj,{}),m.jsxs(jr,{className:Uu.card,children:[m.jsx(zpe,{date:t,onDateChange:e}),m.jsx(Kl,{classes:{hr:Uu.hr}}),m.jsx(Kpe,{date:t}),m.jsx(Ype,{})]}),m.jsx(wme,{className:Uu.player})]})};function Eme(t,e){const[n,r]=y.useState(()=>{try{const s=window.localStorage.getItem(t);return s||e}catch(s){return console.error("Error reading localStorage:",s),e}});return{storedValue:n,setStoredValue:r,save:()=>{window.localStorage.setItem(t,n)}}}function Mme(){const{storedValue:t,setStoredValue:e,save:n}=Eme("checklist_template",""),r=o=>{e(o.target.value)};return m.jsxs("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[m.jsx("h2",{children:"LocalStorage Editor"}),m.jsx("textarea",{value:t,onChange:r,placeholder:"Start typing here...",style:{width:"100%",height:"300px",padding:"10px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px",resize:"vertical"}}),m.jsx("button",{onClick:n,children:"Save"})]})}const Xn=({children:t})=>m.jsx(Ope.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:t}),Ame=()=>{const t=Io();return m.jsx(tde,{mode:"wait",children:m.jsxs(BO,{location:t,children:[m.jsx(Nn,{path:"/",element:m.jsx(Xn,{children:m.jsx(Tme,{})})}),m.jsx(Nn,{path:"/task/:id",element:m.jsx(Xn,{children:m.jsx(roe,{})})}),m.jsx(Nn,{path:"/create-checklist",element:m.jsx(Xn,{children:m.jsx(qle,{})})}),m.jsx(Nn,{path:"/edit-checklist/:id",element:m.jsx(Xn,{children:m.jsx(Zle,{})})}),m.jsx(Nn,{path:"/weight-record",element:m.jsx(Xn,{children:m.jsx(bce,{})})}),m.jsx(Nn,{path:"/intro",element:m.jsx(Xn,{children:m.jsx(boe,{})})}),m.jsx(Nn,{path:"/checklist-template",element:m.jsx(Xn,{children:m.jsx(Wce,{})})}),m.jsx(Nn,{path:"/setting",element:m.jsx(Xn,{children:m.jsx(Vj,{})})}),m.jsx(Nn,{path:"/story",element:m.jsx(Xn,{children:m.jsx(Zce,{})})}),m.jsx(Nn,{path:"/audio",element:m.jsx(Xn,{children:m.jsx(Jce,{})})}),m.jsx(Nn,{path:"/setting/local-storage-editor",element:m.jsx(Xn,{children:m.jsx(Mme,{})})})]},t.pathname)})},Rme=()=>m.jsx(c5,{children:m.jsx(Ame,{})}),_me="_container_1qdlo_1",Ime="_toast_1qdlo_8",Nme="_toastMessage_1qdlo_22",Dme="_toastButton_1qdlo_26",Ll={container:_me,toast:Ime,toastMessage:Nme,toastButton:Dme};function Pme(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t;let a,l;const c=async(u=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await wt(async()=>{const{Workbox:u}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:u}},[]).then(({Workbox:u})=>new u("/sw.js",{scope:"/",type:"classic"})).catch(u=>{i==null||i(u)}),!a)return;a.addEventListener("activated",u=>{(u.isUpdate||u.isExternal)&&window.location.reload()}),a.addEventListener("installed",u=>{u.isUpdate||r==null||r()}),a.register({immediate:e}).then(u=>{s?s("/sw.js",u):o==null||o(u)}).catch(u=>{i==null||i(u)})}}return l=d(),c}function Ome(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t,[a,l]=y.useState(!1),[c,d]=y.useState(!1),[u]=y.useState(()=>Pme({immediate:e,onOfflineReady(){d(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:o,onRegisteredSW:s,onRegisterError:i}));return{needRefresh:[a,l],offlineReady:[c,d],updateServiceWorker:u}}function Lme(){const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:o}=Ome({onRegistered(i){console.log("SW Registered: "+i)},onRegisterError(i){console.log("SW registration error",i)}}),s=()=>{e(!1),r(!1)};return N.useEffect(()=>{n&&o(!0)},[n]),m.jsx("div",{className:Ll.container,children:(t||n)&&m.jsxs("div",{className:Ll.toast,children:[m.jsx("div",{className:Ll.toastMessage,children:t?m.jsx("span",{children:"App ready to work offline"}):m.jsx("span",{children:"New content available, click on reload button to update."})}),n&&m.jsx("button",{className:Ll.toastButton,onClick:()=>o(!0),children:"Reload"}),m.jsx("button",{className:Ll.toastButton,onClick:()=>s(),children:"Close"})]})})}const jme="_container_1jm49_164",Bme="_body_1jm49_172",wE={container:jme,body:Bme};function Vme(){const{theme:t}=np();return m.jsxs("div",{className:wE.container,"data-theme":t,children:[m.jsxs("div",{className:wE.body,children:[m.jsx(Rme,{}),m.jsx(Lme,{})]}),m.jsx("div",{id:"drawer-global-root"})]})}const $me=SL(xL(Vme));kt.render(m.jsx($me,{}),document.getElementById("app"));
