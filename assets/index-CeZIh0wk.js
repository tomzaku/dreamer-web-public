const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-rjhLG1eB.js","assets/index-D57cUaFw.js","assets/mdxeditor-Cxvfqdhz.js","assets/apexcharts-BnXoAgVT.js","assets/index-DdbShWyY.js","assets/index-nOtcpH01.js","assets/index-uAn85tBp.js","assets/index-D4Wp6AEg.js","assets/index-CWmy4eKR.js","assets/index-CfyObm-o.js","assets/index-yU9Yh-H5.js","assets/index-BdmKeUBW.js","assets/index-DQ-8l3PE.js","assets/index-JH4Gotpn.js","assets/index-FrdabaJ1.js","assets/index-BgBG5lba.js","assets/index-BlSIl150.js","assets/index-BGm_t98o.js"])))=>i.map(i=>d[i]);
import{r as b,j as m,c as pe,R,_ as lt,k as MN,b as AN,i as _N,a as eb,u as PN,d as Pt,g as $d,e as RN,f as IN,h as NN,l as zv,m as DN,n as ON,o as Fn,p as F2,q as LN,s as Cr,t as ni,v as zn,w as jh,x as jN,y as Uv,z as il,A as z2}from"./mdxeditor-Cxvfqdhz.js";import{a as BN,g as VN}from"./apexcharts-BnXoAgVT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Ia={},Wv;function $N(){if(Wv)return Ia;Wv=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.parse=i,Ia.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,s=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function i(h,f){const p=new s,g=h.length;if(g<2)return p;const y=(f==null?void 0:f.decode)||d;let v=0;do{const x=h.indexOf("=",v);if(x===-1)break;const w=h.indexOf(";",v),C=w===-1?g:w;if(x>C){v=h.lastIndexOf(";",x-1)+1;continue}const k=a(h,v,x),S=l(h,x,k),T=h.slice(k,S);if(p[T]===void 0){let E=a(h,x+1,C),M=l(h,C,E);const P=y(h.slice(E,M));p[T]=P}v=C+1}while(v<g);return p}function a(h,f,p){do{const g=h.charCodeAt(f);if(g!==32&&g!==9)return f}while(++f<p);return p}function l(h,f,p){for(;f>p;){const g=h.charCodeAt(--f);if(g!==32&&g!==9)return f+1}return p}function c(h,f,p){const g=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(h))throw new TypeError(`argument name is invalid: ${h}`);const y=g(f);if(!e.test(y))throw new TypeError(`argument val is invalid: ${f}`);let v=h+"="+y;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!u(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function d(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function u(h){return o.call(h)==="[object Date]"}return Ia}$N();var Gv="popstate";function HN(t={}){function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return Qm("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Pl(o)}return zN(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Un(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FN(){return Math.random().toString(36).substring(2,10)}function qv(t,e){return{usr:t.state,key:t.key,idx:e}}function Qm(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?la(e):e,state:n,key:e&&e.key||r||FN()}}function Pl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function la(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function zN(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a="POP",l=null,c=d();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function d(){return(i.state||{idx:null}).idx}function u(){a="POP";let y=d(),v=y==null?null:y-c;c=y,l&&l({action:a,location:g.location,delta:v})}function h(y,v){a="PUSH";let x=Qm(g.location,y,v);c=d()+1;let w=qv(x,c),C=g.createHref(x);try{i.pushState(w,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;o.location.assign(C)}s&&l&&l({action:a,location:g.location,delta:1})}function f(y,v){a="REPLACE";let x=Qm(g.location,y,v);c=d();let w=qv(x,c),C=g.createHref(x);i.replaceState(w,"",C),s&&l&&l({action:a,location:g.location,delta:0})}function p(y){return UN(y)}let g={get action(){return a},get location(){return t(o,i)},listen(y){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(Gv,u),l=y,()=>{o.removeEventListener(Gv,u),l=null}},createHref(y){return e(o,y)},createURL:p,encodeLocation(y){let v=p(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(y){return i.go(y)}};return g}function UN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Be(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Pl(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function U2(t,e,n="/"){return WN(t,e,n,!1)}function WN(t,e,n,r){let o=typeof e=="string"?la(e):e,s=Xr(o.pathname||"/",n);if(s==null)return null;let i=W2(t);GN(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=r3(s);a=t3(i[l],c,r)}return a}function W2(t,e=[],n=[],r=""){let o=(s,i,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(Be(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Wr([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Be(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),W2(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:QN(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let l of G2(s.path))o(s,i,l)}),e}function G2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=G2(r.join("/")),a=[];return a.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function GN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:e3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var qN=/^:[\w-]+$/,KN=3,ZN=2,JN=1,YN=10,XN=-2,Kv=t=>t==="*";function QN(t,e){let n=t.split("/"),r=n.length;return n.some(Kv)&&(r+=XN),e&&(r+=ZN),n.filter(o=>!Kv(o)).reduce((o,s)=>o+(qN.test(s)?KN:s===""?JN:YN),r)}function e3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function t3(t,e,n=!1){let{routesMeta:r}=t,o={},s="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",u=fu({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=fu({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(o,u.params),i.push({params:o,pathname:Wr([s,u.pathname]),pathnameBase:a3(Wr([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=Wr([s,u.pathnameBase]))}return i}function fu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=n3(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:u},h)=>{if(d==="*"){let p=a[h]||"";i=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return u&&!f?c[d]=void 0:c[d]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function n3(t,e=!1,n=!0){Un(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function r3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Un(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Xr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function o3(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?la(t):t;return{pathname:n?n.startsWith("/")?n:s3(n,e):e,search:l3(r),hash:c3(o)}}function s3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ap(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function i3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function q2(t){let e=i3(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function K2(t,e,n,r=!1){let o;typeof t=="string"?o=la(t):(o={...t},Be(!o.pathname||!o.pathname.includes("?"),ap("?","pathname","search",o)),Be(!o.pathname||!o.pathname.includes("#"),ap("#","pathname","hash",o)),Be(!o.search||!o.search.includes("#"),ap("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let u=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),u-=1;o.pathname=h.join("/")}a=u>=0?e[u]:"/"}let l=o3(o,a),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Wr=t=>t.join("/").replace(/\/\/+/g,"/"),a3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),l3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,c3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function d3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Z2=["POST","PUT","PATCH","DELETE"];new Set(Z2);var u3=["GET",...Z2];new Set(u3);var ca=b.createContext(null);ca.displayName="DataRouter";var Bh=b.createContext(null);Bh.displayName="DataRouterState";var J2=b.createContext({isTransitioning:!1});J2.displayName="ViewTransition";var h3=b.createContext(new Map);h3.displayName="Fetchers";var f3=b.createContext(null);f3.displayName="Await";var Sr=b.createContext(null);Sr.displayName="Navigation";var Cc=b.createContext(null);Cc.displayName="Location";var Tr=b.createContext({outlet:null,matches:[],isDataRoute:!1});Tr.displayName="Route";var tb=b.createContext(null);tb.displayName="RouteError";function p3(t,{relative:e}={}){Be(Sc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(Sr),{hash:o,pathname:s,search:i}=Tc(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Wr([n,s])),r.createHref({pathname:a,search:i,hash:o})}function Sc(){return b.useContext(Cc)!=null}function oo(){return Be(Sc(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Cc).location}var Y2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X2(t){b.useContext(Sr).static||b.useLayoutEffect(t)}function Yn(){let{isDataRoute:t}=b.useContext(Tr);return t?M3():m3()}function m3(){Be(Sc(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(ca),{basename:e,navigator:n}=b.useContext(Sr),{matches:r}=b.useContext(Tr),{pathname:o}=oo(),s=JSON.stringify(q2(r)),i=b.useRef(!1);return X2(()=>{i.current=!0}),b.useCallback((l,c={})=>{if(Un(i.current,Y2),!i.current)return;if(typeof l=="number"){n.go(l);return}let d=K2(l,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Wr([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,o,t])}b.createContext(null);function Q2(){let{matches:t}=b.useContext(Tr),e=t[t.length-1];return e?e.params:{}}function Tc(t,{relative:e}={}){let{matches:n}=b.useContext(Tr),{pathname:r}=oo(),o=JSON.stringify(q2(n));return b.useMemo(()=>K2(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function g3(t,e){return eT(t,e)}function eT(t,e,n,r){var x;Be(Sc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:s}=b.useContext(Sr),{matches:i}=b.useContext(Tr),a=i[i.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",u=a&&a.route;{let w=u&&u.path||"";tT(c,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=oo(),f;if(e){let w=typeof e=="string"?la(e):e;Be(d==="/"||((x=w.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=h;let p=f.pathname||"/",g=p;if(d!=="/"){let w=d.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=!s&&n&&n.matches&&n.matches.length>0?n.matches:U2(t,{pathname:g});Un(u||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Un(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=x3(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Wr([d,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Wr([d,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&v?b.createElement(Cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},v):v}function y3(){let t=E3(),e=d3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=b.createElement(b.Fragment,null,b.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:s},"ErrorBoundary")," or"," ",b.createElement("code",{style:s},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:o},n):null,i)}var b3=b.createElement(y3,null),v3=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?b.createElement(Tr.Provider,{value:this.props.routeContext},b.createElement(tb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function w3({routeContext:t,match:e,children:n}){let r=b.useContext(ca);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Tr.Provider,{value:t},n)}function x3(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let l=o.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Be(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<o.length;l++){let c=o[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:d,errors:u}=n,h=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!u||u[c.route.id]===void 0);if(c.route.lazy||h){i=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((l,c,d)=>{let u,h=!1,f=null,p=null;n&&(u=s&&c.route.id?s[c.route.id]:void 0,f=c.route.errorElement||b3,i&&(a<0&&d===0?(tT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):a===d&&(h=!0,p=c.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),y=()=>{let v;return u?v=f:h?v=p:c.route.Component?v=b.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=l,b.createElement(w3,{match:c,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?b.createElement(v3,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}function nb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k3(t){let e=b.useContext(ca);return Be(e,nb(t)),e}function C3(t){let e=b.useContext(Bh);return Be(e,nb(t)),e}function S3(t){let e=b.useContext(Tr);return Be(e,nb(t)),e}function rb(t){let e=S3(t),n=e.matches[e.matches.length-1];return Be(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function T3(){return rb("useRouteId")}function E3(){var r;let t=b.useContext(tb),e=C3("useRouteError"),n=rb("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function M3(){let{router:t}=k3("useNavigate"),e=rb("useNavigate"),n=b.useRef(!1);return X2(()=>{n.current=!0}),b.useCallback(async(o,s={})=>{Un(n.current,Y2),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...s}))},[t,e])}var Zv={};function tT(t,e,n){!e&&!Zv[t]&&(Zv[t]=!0,Un(!1,n))}b.memo(A3);function A3({routes:t,future:e,state:n}){return eT(t,void 0,n,e)}function Nn(t){Be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _3({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:s=!1}){Be(!Sc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),a=b.useMemo(()=>({basename:i,navigator:o,static:s,future:{}}),[i,o,s]);typeof n=="string"&&(n=la(n));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=n,f=b.useMemo(()=>{let p=Xr(l,i);return p==null?null:{location:{pathname:p,search:c,hash:d,state:u,key:h},navigationType:r}},[i,l,c,d,u,h,r]);return Un(f!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:b.createElement(Sr.Provider,{value:a},b.createElement(Cc.Provider,{children:e,value:f}))}function P3({children:t,location:e}){return g3(eg(t),e)}function eg(t,e=[]){let n=[];return b.Children.forEach(t,(r,o)=>{if(!b.isValidElement(r))return;let s=[...e,o];if(r.type===b.Fragment){n.push.apply(n,eg(r.props.children,s));return}Be(r.type===Nn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=eg(r.props.children,s)),n.push(i)}),n}var Hd="get",Fd="application/x-www-form-urlencoded";function Vh(t){return t!=null&&typeof t.tagName=="string"}function R3(t){return Vh(t)&&t.tagName.toLowerCase()==="button"}function I3(t){return Vh(t)&&t.tagName.toLowerCase()==="form"}function N3(t){return Vh(t)&&t.tagName.toLowerCase()==="input"}function D3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function O3(t,e){return t.button===0&&(!e||e==="_self")&&!D3(t)}function tg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function L3(t,e){let n=tg(t);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(s=>{n.append(o,s)})}),n}var sd=null;function j3(){if(sd===null)try{new FormData(document.createElement("form"),0),sd=!1}catch{sd=!0}return sd}var B3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lp(t){return t!=null&&!B3.has(t)?(Un(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fd}"`),null):t}function V3(t,e){let n,r,o,s,i;if(I3(t)){let a=t.getAttribute("action");r=a?Xr(a,e):null,n=t.getAttribute("method")||Hd,o=lp(t.getAttribute("enctype"))||Fd,s=new FormData(t)}else if(R3(t)||N3(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Xr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Hd,o=lp(t.getAttribute("formenctype"))||lp(a.getAttribute("enctype"))||Fd,s=new FormData(a,t),!j3()){let{name:c,type:d,value:u}=t;if(d==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,u)}}else{if(Vh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Hd,r=null,o=Fd,i=t}return s&&o==="text/plain"&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:s,body:i}}function ob(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function $3(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function H3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function F3(t,e,n){let r=await Promise.all(t.map(async o=>{let s=e.routes[o.route.id];if(s){let i=await $3(s,n);return i.links?i.links():[]}return[]}));return G3(r.flat(1).filter(H3).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Jv(t,e,n,r,o,s){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>i(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var u;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(i(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((u=n[0])==null?void 0:u.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function z3(t,e,{includeHydrateFallback:n}={}){return U3(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let s=[o.module];return o.clientActionModule&&(s=s.concat(o.clientActionModule)),o.clientLoaderModule&&(s=s.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(s=s.concat(o.hydrateFallbackModule)),o.imports&&(s=s.concat(o.imports)),s}).flat(1))}function U3(t){return[...new Set(t)]}function W3(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function G3(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let s=JSON.stringify(W3(o));return n.has(s)||(n.add(s),r.push({key:s,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var q3=new Set([100,101,204,205]);function K3(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Xr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function nT(){let t=b.useContext(ca);return ob(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Z3(){let t=b.useContext(Bh);return ob(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var sb=b.createContext(void 0);sb.displayName="FrameworkContext";function rT(){let t=b.useContext(sb);return ob(t,"You must render this element inside a <HydratedRouter> element"),t}function J3(t,e){let n=b.useContext(sb),[r,o]=b.useState(!1),[s,i]=b.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=e,h=b.useRef(null);b.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let g=v=>{v.forEach(x=>{i(x.isIntersecting)})},y=new IntersectionObserver(g,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[t]),b.useEffect(()=>{if(r){let g=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(g)}}},[r]);let f=()=>{o(!0)},p=()=>{o(!1),i(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Na(a,f),onBlur:Na(l,p),onMouseEnter:Na(c,f),onMouseLeave:Na(d,p),onTouchStart:Na(u,f)}]:[!1,h,{}]}function Na(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Y3({page:t,...e}){let{router:n}=nT(),r=b.useMemo(()=>U2(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?b.createElement(Q3,{page:t,matches:r,...e}):null}function X3(t){let{manifest:e,routeModules:n}=rT(),[r,o]=b.useState([]);return b.useEffect(()=>{let s=!1;return F3(t,e,n).then(i=>{s||o(i)}),()=>{s=!0}},[t,e,n]),r}function Q3({page:t,matches:e,...n}){let r=oo(),{manifest:o,routeModules:s}=rT(),{basename:i}=nT(),{loaderData:a,matches:l}=Z3(),c=b.useMemo(()=>Jv(t,e,l,o,r,"data"),[t,e,l,o,r]),d=b.useMemo(()=>Jv(t,e,l,o,r,"assets"),[t,e,l,o,r]),u=b.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(e.forEach(v=>{var w;let x=o.routes[v.route.id];!x||!x.hasLoader||(!c.some(C=>C.route.id===v.route.id)&&v.route.id in a&&((w=s[v.route.id])!=null&&w.shouldRevalidate)||x.hasClientLoader?g=!0:p.add(v.route.id))}),p.size===0)return[];let y=K3(t,i);return g&&p.size>0&&y.searchParams.set("_routes",e.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[y.pathname+y.search]},[i,a,r,o,c,e,t,s]),h=b.useMemo(()=>z3(d,o),[d,o]),f=X3(d);return b.createElement(b.Fragment,null,u.map(p=>b.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>b.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:g})=>b.createElement("link",{key:p,...g})))}function eD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var oT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oT&&(window.__reactRouterVersion="7.6.0")}catch{}function tD({basename:t,children:e,window:n}){let r=b.useRef();r.current==null&&(r.current=HN({window:n,v5Compat:!0}));let o=r.current,[s,i]=b.useState({action:o.action,location:o.location}),a=b.useCallback(l=>{b.startTransition(()=>i(l))},[i]);return b.useLayoutEffect(()=>o.listen(a),[o,a]),b.createElement(_3,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o})}var sT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iT=b.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:s,replace:i,state:a,target:l,to:c,preventScrollReset:d,viewTransition:u,...h},f){let{basename:p}=b.useContext(Sr),g=typeof c=="string"&&sT.test(c),y,v=!1;if(typeof c=="string"&&g&&(y=c,oT))try{let M=new URL(window.location.href),P=c.startsWith("//")?new URL(M.protocol+c):new URL(c),B=Xr(P.pathname,p);P.origin===M.origin&&B!=null?c=B+P.search+P.hash:v=!0}catch{Un(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=p3(c,{relative:o}),[w,C,k]=J3(r,h),S=sD(c,{replace:i,state:a,target:l,preventScrollReset:d,relative:o,viewTransition:u});function T(M){e&&e(M),M.defaultPrevented||S(M)}let E=b.createElement("a",{...h,...k,href:y||x,onClick:v||s?e:T,ref:eD(f,C),target:l,"data-discover":!g&&n==="render"?"true":void 0});return w&&!g?b.createElement(b.Fragment,null,E,b.createElement(Y3,{page:x})):E});iT.displayName="Link";var nD=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:s,to:i,viewTransition:a,children:l,...c},d){let u=Tc(i,{relative:c.relative}),h=oo(),f=b.useContext(Bh),{navigator:p,basename:g}=b.useContext(Sr),y=f!=null&&uD(u)&&a===!0,v=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,x=h.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(x=x.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&g&&(w=Xr(w,g)||w);const C=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let k=x===v||!o&&x.startsWith(v)&&x.charAt(C)==="/",S=w!=null&&(w===v||!o&&w.startsWith(v)&&w.charAt(v.length)==="/"),T={isActive:k,isPending:S,isTransitioning:y},E=k?e:void 0,M;typeof r=="function"?M=r(T):M=[r,k?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(T):s;return b.createElement(iT,{...c,"aria-current":E,className:M,ref:d,style:P,to:i,viewTransition:a},typeof l=="function"?l(T):l)});nD.displayName="NavLink";var rD=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:s,method:i=Hd,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:u,...h},f)=>{let p=cD(),g=dD(a,{relative:c}),y=i.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&sT.test(a),x=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let C=w.nativeEvent.submitter,k=(C==null?void 0:C.getAttribute("formmethod"))||i;p(C||w.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:o,state:s,relative:c,preventScrollReset:d,viewTransition:u})};return b.createElement("form",{ref:f,method:y,action:g,onSubmit:r?l:x,...h,"data-discover":!v&&t==="render"?"true":void 0})});rD.displayName="Form";function oD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aT(t){let e=b.useContext(ca);return Be(e,oD(t)),e}function sD(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:i}={}){let a=Yn(),l=oo(),c=Tc(t,{relative:s});return b.useCallback(d=>{if(O3(d,e)){d.preventDefault();let u=n!==void 0?n:Pl(l)===Pl(c);a(t,{replace:u,state:r,preventScrollReset:o,relative:s,viewTransition:i})}},[l,a,c,n,r,e,t,o,s,i])}function iD(t){Un(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=b.useRef(tg(t)),n=b.useRef(!1),r=oo(),o=b.useMemo(()=>L3(r.search,n.current?null:e.current),[r.search]),s=Yn(),i=b.useCallback((a,l)=>{const c=tg(typeof a=="function"?a(o):a);n.current=!0,s("?"+c,l)},[s,o]);return[o,i]}var aD=0,lD=()=>`__${String(++aD)}__`;function cD(){let{router:t}=aT("useSubmit"),{basename:e}=b.useContext(Sr),n=T3();return b.useCallback(async(r,o={})=>{let{action:s,method:i,encType:a,formData:l,body:c}=V3(r,e);if(o.navigate===!1){let d=o.fetcherKey||lD();await t.fetch(d,n,o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function dD(t,{relative:e}={}){let{basename:n}=b.useContext(Sr),r=b.useContext(Tr);Be(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s={...Tc(t||".",{relative:e})},i=oo();if(t==null){s.search=i.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(u=>u).forEach(u=>a.append("index",u));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Wr([n,s.pathname])),Pl(s)}function uD(t,e={}){let n=b.useContext(J2);Be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=aT("useViewTransitionState"),o=Tc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Xr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Xr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return fu(o.pathname,i)!=null||fu(o.pathname,s)!=null}[...q3];const hD="_icon_1p83v_1",$h={icon:hD};function fD({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:pe($h.icon,t),...e,children:m.jsx("g",{children:m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.855 15.67C12.995 15.31 12.9049 14.9 12.625 14.62L10.5349 12.56L10.5649 12.53C12.3049 10.59 13.5449 8.35999 14.2749 6H16.215C16.755 6 17.205 5.54999 17.205 5.01001V4.98999C17.205 4.45001 16.755 4 16.215 4H10.205V3C10.205 2.45001 9.755 2 9.20496 2C8.65491 2 8.20496 2.45001 8.20496 3V4H2.19495C1.65491 4 1.20496 4.45001 1.20496 4.98999C1.20496 5.53998 1.65491 5.97998 2.19495 5.97998H12.375C11.705 7.91998 10.6449 9.75 9.20496 11.35C8.3949 10.46 7.71497 9.48999 7.1449 8.46997C6.98499 8.17999 6.69495 8 6.36499 8C5.67493 8 5.23499 8.75 5.57495 9.34998C6.20496 10.48 6.97498 11.56 7.875 12.56L3.505 16.87C3.10498 17.26 3.10498 17.9 3.505 18.29C3.8949 18.68 4.5249 18.68 4.92493 18.29L9.20496 14L11.225 16.02C11.735 16.53 12.605 16.34 12.855 15.67ZM17.705 10C17.105 10 16.5649 10.37 16.355 10.94L12.6849 20.74C12.4449 21.35 12.9049 22 13.5549 22C13.9449 22 14.2949 21.76 14.4349 21.39L15.325 19H20.075L20.975 21.39C21.1149 21.75 21.465 22 21.855 22C22.5049 22 22.965 21.35 22.7349 20.74L19.0649 10.94C18.845 10.37 18.3049 10 17.705 10ZM17.705 12.67L16.085 17H19.325L17.705 12.67Z",fillOpacity:"0.54"})})})}const pD="_primary_pdmgw_6",mD="_noMargin_pdmgw_10",cp={default:"_default_pdmgw_1",primary:pD,noMargin:mD};function gD({level:t,children:e,primary:n,noMargin:r,className:o,onClick:s}){const i=[cp.default,n&&cp.primary,r&&cp.noMargin,o];switch(t){case 1:return m.jsx("h1",{onClick:s,className:pe(...i),children:e});case 2:return m.jsx("h2",{onClick:s,className:pe(...i),children:e});case 3:return m.jsx("h3",{onClick:s,className:pe(...i),children:e});case 4:return m.jsx("h4",{onClick:s,className:pe(...i),children:e});default:return m.jsx("h5",{onClick:s,className:pe(...i),children:e})}}const yD="_description_11sgl_6",bD="_noMargin_11sgl_12",vD="_underline_11sgl_16",wD="_bold_11sgl_20",So={default:"_default_11sgl_1",description:yD,noMargin:bD,underline:vD,bold:wD};function xD({children:t,isDescription:e,underline:n,className:r,...o}){return m.jsx("span",{className:pe(So.default,e&&So.description,n&&So.underline,r),...o,children:t})}function kD({children:t,isDescription:e,noMargin:n,underline:r,bold:o,className:s}){return m.jsx("p",{className:pe(So.default,e&&So.description,n&&So.noMargin,r&&So.underline,o&&So.bold,s),children:t})}const le={Title:gD,Paragraph:kD,Text:xD},CD="_container_1p3r9_2",SD="_body_1p3r9_14",Yv={container:CD,body:SD};function TD({className:t,title:e,logo:n,description:r,rightComponent:o}){return m.jsxs("div",{className:pe(Yv.container,t),children:[n,m.jsxs("div",{className:Yv.body,children:[m.jsx(le.Paragraph,{bold:!0,noMargin:!0,children:e}),m.jsx(le.Paragraph,{noMargin:!0,isDescription:!0,children:r})]}),o]})}const vt={ItemMeta:TD},ED="_ghost_p15d2_12",MD="_sm_p15d2_20",AD="_lg_p15d2_25",_D="_md_p15d2_30",PD="_dash_p15d2_35",RD="_block_p15d2_41",ID="_disabled_p15d2_46",fo={default:"_default_p15d2_1",ghost:ED,sm:MD,lg:AD,md:_D,dash:PD,block:RD,disabled:ID};function Dt({onClick:t,disabled:e,children:n,type:r,className:o,block:s,size:i,...a}){return m.jsx("button",{onClick:t,className:pe(fo.default,r==="ghost"&&fo.ghost,r==="dash"&&fo.dash,s&&fo.block,i==="sm"&&fo.sm,i==="lg"&&fo.lg,i==="md"&&fo.md,e&&fo.disabled,o),disabled:e,...a,children:n})}const ND="_button_aap0f_1",DD="_firstButton_aap0f_5",OD="_lastButton_aap0f_10",LD="_middleButton_aap0f_14",jD="_active_aap0f_18",BD="_leftActiveBorder_aap0f_24",VD="_rightActiveBorder_aap0f_28",$D="_rightActiveAndLastBorder_aap0f_32",po={button:ND,firstButton:DD,lastButton:OD,middleButton:LD,active:jD,leftActiveBorder:BD,rightActiveBorder:VD,rightActiveAndLastBorder:$D};function ng({isButton:t,options:e,value:n,onChangeValue:r,classNameOption:o,getClassNameActiveOption:s=()=>""}){return t?m.jsx(m.Fragment,{children:e.map(({label:i,value:a},l)=>{const c=l>e.length-1&&e[l+1].value===n,d=l>0&&e[l-1].value===n;return m.jsx(Dt,{type:"ghost",size:"md",onClick:()=>r&&r(a),className:pe(po.button,l===0&&po.firstButton,l===e.length-1&&po.lastButton,l!==e.length-1&&l!==0&&po.middleButton,a===n&&po.active,a===n&&c&&po.leftActiveBorder,d&&po.rightActiveBorder,d&&l===e.length-1&&po.rightActiveAndLastBorder,o,a===n&&s({label:i,value:a})),children:i},`${n}-${l}`)})}):null}const HD="_container_9iq5o_1",FD="_dash_9iq5o_12",zD="_solid_9iq5o_16",dp={container:HD,dash:FD,solid:zD},Sn=R.forwardRef(({className:t,border:e,...n},r)=>m.jsx("input",{ref:r,className:pe(dp.container,e==="dash"&&dp.dash,e==="solid"&&dp.solid,t),...n}));function up(t){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...t,children:m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM16.24 7.76C15.07 6.59 13.54 6 12 6V12L7.76 16.24C10.1 18.58 13.9 18.58 16.25 16.24C18.59 13.9 18.59 10.1 16.24 7.76ZM4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4C7.58 4 4 7.58 4 12Z"})})}function UD({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:pe($h.icon,t),...e,children:m.jsx("g",{id:"color_lens_24px",children:m.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 3C7.03003 3 3 7.03 3 12C3 16.97 7.03003 21 12 21C12.83 21 13.5 20.33 13.5 19.5C13.5 19.11 13.35 18.76 13.11 18.49C12.88 18.23 12.73 17.88 12.73 17.5C12.73 16.67 13.4 16 14.23 16H16C18.76 16 21 13.76 21 11C21 6.57999 16.97 3 12 3ZM6.5 12C5.66998 12 5 11.33 5 10.5C5 9.67001 5.66998 9 6.5 9C7.33002 9 8 9.67001 8 10.5C8 11.33 7.33002 12 6.5 12ZM8 6.5C8 7.32999 8.66998 8 9.5 8C10.33 8 11 7.32999 11 6.5C11 5.67001 10.33 5 9.5 5C8.66998 5 8 5.67001 8 6.5ZM14.5 8C13.67 8 13 7.32999 13 6.5C13 5.67001 13.67 5 14.5 5C15.33 5 16 5.67001 16 6.5C16 7.32999 15.33 8 14.5 8ZM16 10.5C16 11.33 16.67 12 17.5 12C18.33 12 19 11.33 19 10.5C19 9.67001 18.33 9 17.5 9C16.67 9 16 9.67001 16 10.5Z","fill-opacity":"0.54"})})})}var Rl=(t=>(t.Vi="vi",t.En="en",t))(Rl||{});const Xv=t=>{let e;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(e):c;if(!Object.is(u,e)){const h=e;e=d??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(f=>f(e,h))}},o=()=>e,a={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,o,a);return a},WD=t=>t?Xv(t):Xv,GD=t=>t;function qD(t,e=GD){const n=R.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return R.useDebugValue(n),n}const Qv=t=>{const e=WD(t),n=r=>qD(e,r);return Object.assign(n,e),n},Hh=t=>t?Qv(t):Qv,hp=new Map;function mr(t,e,{storeOnMount:n}={}){if(!hp.has(t)){const i=Hh(a=>({storedValue:(()=>{if(typeof window>"u")return e;try{const l=window.localStorage.getItem(t);return n&&!l&&e&&window.localStorage.setItem(t,JSON.stringify(e)),l?JSON.parse(l):e}catch(l){return console.log(l),e}})(),setValue:l=>{a(c=>{const d=l instanceof Function?l(c.storedValue):l;try{window.localStorage.setItem(t,JSON.stringify(d))}catch(u){console.log(u)}return{storedValue:d}})}}));hp.set(t,i)}const r=hp.get(t),{storedValue:o,setValue:s}=r();return[o,s]}var ew,tw;(function(t){t.CANCELED_BY_MOVEMENT="canceled-by-movement",t.CANCELED_BY_TIMEOUT="canceled-by-timeout"})(ew||(ew={})),function(t){t.BOTH="both",t.MOUSE="mouse",t.TOUCH="touch"}(tw||(tw={}));const nw=Symbol.for("constructDateFrom");function Fh(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&nw in t?t[nw](e):t instanceof Date?new t.constructor(e):new Date(e)}function ib(t,e){return Fh(t,t)}function KD(t,...e){const n=Fh.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function rw(t,e){const n=ib(t);return n.setHours(0,0,0,0),n}function ZD(t){return Fh(t,Date.now())}function JD(t,e,n){const[r,o]=KD(n==null?void 0:n.in,t,e);return+rw(r)==+rw(o)}function ab(t,e){const n=ib(t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function lb(t,e){const n=ib(t);return n.setDate(1),n.setHours(0,0,0,0),n}function YD(t,e){return JD(Fh(t,t),ZD(t))}const XD="baby",QD=()=>{const[t,e]=mr(XD,{});return{baby:t,setBaby:e,calculateStartDateFromDueDate:r=>new Date(new Date(r).getTime()-24192e6).toISOString()}};var ot=[];for(var fp=0;fp<256;++fp)ot.push((fp+256).toString(16).slice(1));function e5(t,e=0){return(ot[t[e+0]]+ot[t[e+1]]+ot[t[e+2]]+ot[t[e+3]]+"-"+ot[t[e+4]]+ot[t[e+5]]+"-"+ot[t[e+6]]+ot[t[e+7]]+"-"+ot[t[e+8]]+ot[t[e+9]]+"-"+ot[t[e+10]]+ot[t[e+11]]+ot[t[e+12]]+ot[t[e+13]]+ot[t[e+14]]+ot[t[e+15]]).toLowerCase()}var id,t5=new Uint8Array(16);function n5(){if(!id&&(id=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!id))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return id(t5)}var r5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ow={randomUUID:r5};function tn(t,e,n){if(ow.randomUUID&&!t)return ow.randomUUID();t=t||{};var r=t.random||(t.rng||n5)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,e5(r)}const o5="checklist_template",s5="selected_checklist_templates",cs={repeat:{minute:"0",hour:"8",dayOfMonth:"*",month:"*",dayOfWeek:"*",startedAt:new Date().toISOString()},createdAt:new Date().toISOString(),records:[]},i5=[{id:tn(),title:"Drink water",...cs,avatar:{type:"icon",name:"mdi:water",color:"#00aaff"}},{id:tn(),title:"Drink Orange juice",...cs,avatar:{type:"icon",name:"noto-v1:tropical-drink",color:"#ff9900"}},{id:tn(),title:"Take vitamin supplement",...cs,avatar:{type:"icon",name:"game-icons:medicines",color:"#00ff00"}},{id:tn(),title:"Eat fruits(banana, seeds) and vegetables",...cs,avatar:{type:"icon",name:"twemoji:pot-of-food",color:"#00aaff"}},{id:tn(),title:"Exercise",...cs,avatar:{type:"icon",name:"healthicons:exercise-yoga-outline"}},{id:tn(),title:"Sleep early",...cs,avatar:{type:"icon",name:"fxemoji:sleeping"}},{id:tn(),title:"Drink milk",...cs,avatar:{type:"icon",name:"icon-park-outline:milk",color:"#ff9900"}}],a5=i5.reduce((t,e)=>({...t,[e.id]:e}),{}),Qr=()=>{const[t,e]=mr(o5,a5,{storeOnMount:!0}),[n,r]=mr(s5,[]),o=u=>{const h=tn();return e({...t,[h]:{...u,id:h,createdAt:new Date().toISOString()}}),a([...n,h]),{id:h}},s=u=>{var h;e({...t,[u.id]:{...u,createdAt:((h=t[u.id])==null?void 0:h.createdAt)||new Date().toISOString()}})},i=u=>{const h={...t};delete h[u],e(h),n.includes(u)&&a(n.filter(f=>f!==u))},a=(u=[])=>{r(u)};return{checklistTemplate:t,getChecklistTemplate:u=>t[u],addChecklistTemplate:o,updateChecklistTemplate:s,deleteChecklistTemplate:i,selectedChecklistTemplates:n,updateSelectedChecklistTemplate:a,getRecommendChecklistTemplates:()=>Object.values(t),getChecklistTemplateIdsByGivingDate:({date:u}={date:new Date})=>n.filter(h=>{var p,g;const f=t[h];return((p=f==null?void 0:f.repeat)==null?void 0:p.dayOfWeek.split(",").includes(u.getDay().toString()))||((g=f==null?void 0:f.repeat)==null?void 0:g.dayOfWeek)==="*"})}},l5="checklist",zh=()=>{const[t,e]=mr(l5,{}),{getChecklistTemplateIdsByGivingDate:n,checklistTemplate:r}=Qr(),[o,s]=R.useState([]),[i,a]=R.useState({}),l=({date:p}={date:new Date})=>{const g=Object.values(t).filter(x=>new Date(x.startedAt).toLocaleDateString()===p.toLocaleDateString()),v=n({date:p}).map(x=>{const w=g.find(C=>C.checklistTemplateId===x);return w||{id:tn(),clientOnly:!0,title:r[x].title,checklistTemplateId:x,startedAt:new Date(p).toISOString(),endedAt:new Date(new Date().setHours(23,59,59,999)).toISOString()}});return{checklistIds:v.map(x=>x.id),checklist:v.reduce((x,w)=>({...x,[w.id]:w}),{})}},c=p=>{e({...t,[p.id]:{...t[p.id],...p}})},d=p=>{const g=tn(),y={...p,id:g};return e({...t,[g]:y}),y},u=({date:p})=>{const{checklistIds:g,checklist:y}=l({date:p});s(g),a(y)},h=p=>Object.values(t).filter(g=>g.checklistTemplateId===p).sort((g,y)=>new Date(g.startedAt)-new Date(y.startedAt)),f=p=>t[p];return{updateChecklist:c,getChecklistByGivingDate:u,getAllChecklistWithTemplate:h,allChecklist:{...i,...t},addChecklist:d,checklistByGivingDateIds:o,getChecklistDetail:f}},c5="body_metric",d5=Hh(t=>({chartData:{},setChartData:e=>t({chartData:e})})),u5=Hh(t=>({currentDay:new Date,setCurrentDay:e=>t({currentDay:e}),currentBodyMetric:void 0,setCurrentBodyMetric:e=>t({currentBodyMetric:e})})),cb=()=>{const[t,e]=mr(c5,{}),{chartData:n,setChartData:r}=d5(),{currentBodyMetric:o,setCurrentBodyMetric:s,currentDay:i,setCurrentDay:a}=u5(),l=(h=t)=>{const f=Object.values(h).sort((v,x)=>new Date(v.createdAt).getTime()-new Date(x.createdAt).getTime()),p=f.map(v=>new Date(v.createdAt).toLocaleDateString()),g=f.map(v=>v.weight),y=f.map(v=>v.bellySize);return{categories:p,weights:g,bellySizes:y}},c=h=>{const f=l(h);r(f)},d=h=>{const f=Object.values(t).find(y=>new Date(y.createdAt).toLocaleDateString()===new Date(h.createdAt).toLocaleDateString());let p,g=(f==null?void 0:f.id)||"";f?p={...t,[f.id]:{...f,...h}}:(g=tn(),p={...t,[g]:{...h,id:g}}),e(p),c(p),s(p[g])},u=({date:h})=>{const f=Object.values(t).find(p=>new Date(p.createdAt).toLocaleDateString()===h.toLocaleDateString());return s(f),a(h),f};return R.useEffect(()=>{u({date:new Date})},[]),{addBodyMetric:d,getChartData:l,chartData:n,updateChartDate:c,setChartData:r,currentBodyMetric:o,updateCurrentBodyMetric:u,currentDay:i}};var Il=(t=>(t.Light="light",t.Dark="dark",t))(Il||{});const lT=R.createContext({pomodoro:0,setPomodoro:()=>{},shortBreak:0,setShortBreak:()=>{},longBreak:0,setLongBreak:()=>{},theme:Il.Light,setTheme:()=>{}});var cT=(t=>(t[t.Pomodoro=0]="Pomodoro",t[t.ShortBreak=1]="ShortBreak",t[t.LongBreak=2]="LongBreak",t))(cT||{});const pp={time:0,isPlaying:!1,pause:()=>{},start:()=>{},stop:()=>{}};R.createContext({pomodoroTimer:pp,shortBreakTimer:pp,longBreakTimer:pp,pomodoroPhase:cT.Pomodoro,setPomodoroPhase:()=>{},autoStartTimerWhenChangePomodoroPhase:()=>{}});const dT=()=>R.useContext(lT),mp=60*1e3,h5=t=>function(e){const[n,r]=mr("pomodoro",{pomodoro:25*mp,shortBreak:5*mp,longBreak:10*mp,theme:Il.Light});return m.jsx(lT.Provider,{value:{...n,setPomodoro:o=>r({...n,pomodoro:o}),setShortBreak:o=>r({...n,shortBreak:o}),setLongBreak:o=>r({...n,longBreak:o}),setTheme:o=>r({...n,theme:o})},children:m.jsx(t,{...e})})},f5=t=>`https://raw.githubusercontent.com/zTwist201/audio/main/${t}`;var rg=(t=>(t.MusicBox="mb",t.Chime="ch",t))(rg||{});rg.MusicBox+"",rg.Chime+"";const p5=(t,e,n)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},uT=R.createContext({messages:{},changeLanguage:()=>{},language:Rl.En,formatMessage:()=>""}),m5=t=>function(n){const[r,o]=R.useState(Rl.En),[s,i]=R.useState({}),a=async c=>{const{default:d}=await p5(Object.assign({"./language/en.json":()=>lt(()=>import("./en-DRadR5dF.js"),[]),"./language/vi.json":()=>lt(()=>import("./vi-BzMdpxdF.js"),[])}),`./language/${c}.json`,3);i(d)};R.useEffect(()=>{a(r)},[]);const l=(c,d)=>{const{id:u,defaultMessage:h}=c,f=s[u]||h;return d?Object.entries(d).reduce((p,[g,y])=>p.replace(new RegExp(`{{${g}}}`,"gm"),y),f):f};return m.jsx(uT.Provider,{value:{messages:s,language:r,changeLanguage:async c=>{o(c),a(c)},formatMessage:l},children:m.jsx(t,{...n})})},Bt=()=>R.useContext(uT),g5="_container_1r8pv_2",y5="_body_1r8pv_9",b5="_footer_1r8pv_13",v5="_version_1r8pv_19",w5="_link_1r8pv_24",x5="_durationInput_1r8pv_29",k5="_icon_1r8pv_40",Rn={container:g5,body:y5,footer:b5,version:v5,link:w5,durationInput:x5,icon:k5},C5="1.0.1",di=60*1e3;function S5(){const{shortBreak:t,setShortBreak:e,pomodoro:n,setPomodoro:r,longBreak:o,setLongBreak:s,theme:i,setTheme:a}=dT(),{language:l,changeLanguage:c}=Bt();return m.jsxs("div",{className:Rn.container,children:[m.jsxs("div",{className:Rn.body,children:[m.jsx(vt.ItemMeta,{logo:m.jsx(UD,{}),title:"Theme",description:"Config theme for whole page",rightComponent:m.jsx(ng,{isButton:!0,value:i,onChangeValue:d=>a(d),options:[{label:"Light",value:Il.Light},{label:"Dark",value:Il.Dark}]})}),m.jsx(vt.ItemMeta,{logo:m.jsx(fD,{}),title:"Language",description:"Config language for whole page",rightComponent:m.jsx(ng,{isButton:!0,value:l,onChangeValue:d=>c(d),options:[{label:"VN",value:Rl.Vi},{label:"EN",value:Rl.En}]})}),m.jsx(vt.ItemMeta,{logo:m.jsx(up,{className:Rn.icon}),title:"Pomodoro Time",description:"Set Pomodoro time in Focus mode",rightComponent:m.jsxs(m.Fragment,{children:[m.jsx(Sn,{type:"number",border:"dash",className:Rn.durationInput,value:n/di,onChange:d=>Number(d.target.value)&&r(Number(d.target.value)*di)}),m.jsx(le.Text,{isDescription:!0,children:" minutes"})]})}),m.jsx(vt.ItemMeta,{logo:m.jsx(up,{className:Rn.icon}),title:"Short Break",description:"Set Short Break time in Focus mode",rightComponent:m.jsxs(m.Fragment,{children:[m.jsx(Sn,{border:"dash",type:"number",className:Rn.durationInput,value:t/di,onChange:d=>Number(d.target.value)&&e(Number(d.target.value)*di)}),m.jsx(le.Text,{isDescription:!0,children:" minutes"})]})}),m.jsx(vt.ItemMeta,{logo:m.jsx(up,{className:Rn.icon}),title:"Long Break",description:"Set Long Break time in Focus mode",rightComponent:m.jsxs(m.Fragment,{children:[m.jsx(Sn,{border:"dash",type:"number",className:Rn.durationInput,value:o/di,onChange:d=>Number(d.target.value)&&s(Number(d.target.value)*di)}),m.jsx(le.Text,{isDescription:!0,children:" minutes"})]})})]}),m.jsxs("a",{href:"https://github.com/tomzaku/dreamer-web-public/issues",className:Rn.footer,children:[m.jsxs(le.Text,{className:Rn.version,children:["Version: ",C5]}),m.jsx(le.Text,{className:Rn.link,children:"| Feature Request | Bug Report"})]})]})}const T5="checklist_record",Jo=()=>{const[t,e]=mr(T5,{});return{addChecklistRecord:s=>{s.records.length&&e(i=>({...i,[s.checklistTemplateId]:[...i[s.checklistTemplateId]||[],...s.records.map(a=>({id:tn(),...a,checklistId:s.checklistId,checklistTemplateId:s.checklistTemplateId,createdAt:s.createdAt}))]}))},getChecklistRecords:(s,{rangeDate:i,type:a="date",fieldIds:l,sortBy:c})=>{const d=t[s]||[];let u=d;if(i&&(u=d.filter(f=>{const p=new Date(f.createdAt);return p>=new Date(i.from)&&p<=new Date(i.to)})),l&&l.length&&(u=u.filter(f=>l.includes(f.fieldId))),c)switch(c){case"createdAt":{u=u.sort((f,p)=>{const g=new Date(f.createdAt),y=new Date(p.createdAt);return g.getTime()-y.getTime()});break}}return u.reduce((f,p)=>{const g=new Date(p.createdAt),y=a==="date"?g.toISOString().split("T")[0]:g.toISOString().split("T");return f[y]||(f[y]=[]),f[y].push(p),f},{})},updateChecklistRecord:(s,{value:i,checklistTemplateId:a})=>{e(l=>{const d=(l[a]||[]).map(u=>u.id===s?{...u,value:i}:u);return{...l,[a]:d}})}}},E5="_container_cj2x8_1",M5={container:E5};function Wn({children:t,className:e,onClick:n}){return m.jsx("div",{onClick:n,className:pe(M5.container,e),children:t})}const hT=Object.freeze({left:0,top:0,width:16,height:16}),pu=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),db=Object.freeze({...hT,...pu}),og=Object.freeze({...db,body:"",hidden:!1});function A5(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}function sw(t,e){const n=A5(t,e);for(const r in og)r in pu?r in t&&!(r in n)&&(n[r]=pu[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function _5(t,e){const n=t.icons,r=t.aliases||Object.create(null),o=Object.create(null);function s(i){if(n[i])return o[i]=[];if(!(i in o)){o[i]=null;const a=r[i]&&r[i].parent,l=a&&s(a);l&&(o[i]=[a].concat(l))}return o[i]}return Object.keys(n).concat(Object.keys(r)).forEach(s),o}function P5(t,e,n){const r=t.icons,o=t.aliases||Object.create(null);let s={};function i(a){s=sw(r[a]||o[a],s)}return i(e),n.forEach(i),sw(t,s)}function fT(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(o=>{e(o,null),n.push(o)});const r=_5(t);for(const o in r){const s=r[o];s&&(e(o,P5(t,o,s)),n.push(o))}return n}const R5={provider:"",aliases:{},not_found:{},...hT};function gp(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function pT(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!gp(t,R5))return null;const n=e.icons;for(const o in n){const s=n[o];if(!o||typeof s.body!="string"||!gp(s,og))return null}const r=e.aliases||Object.create(null);for(const o in r){const s=r[o],i=s.parent;if(!o||typeof i!="string"||!n[i]&&!r[i]||!gp(s,og))return null}return e}const mT=/^[a-z0-9]+(-[a-z0-9]+)*$/,Uh=(t,e,n,r="")=>{const o=t.split(":");if(t.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;r=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){const a=o.pop(),l=o.pop(),c={provider:o.length>0?o[0]:r,prefix:l,name:a};return e&&!zd(c)?null:c}const s=o[0],i=s.split("-");if(i.length>1){const a={provider:r,prefix:i.shift(),name:i.join("-")};return e&&!zd(a)?null:a}if(n&&r===""){const a={provider:r,prefix:"",name:s};return e&&!zd(a,n)?null:a}return null},zd=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1,iw=Object.create(null);function I5(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Wi(t,e){const n=iw[t]||(iw[t]=Object.create(null));return n[e]||(n[e]=I5(t,e))}function gT(t,e){return pT(e)?fT(e,(n,r)=>{r?t.icons[n]=r:t.missing.add(n)}):[]}function N5(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let Nl=!1;function yT(t){return typeof t=="boolean"&&(Nl=t),Nl}function aw(t){const e=typeof t=="string"?Uh(t,!0,Nl):t;if(e){const n=Wi(e.provider,e.prefix),r=e.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function D5(t,e){const n=Uh(t,!0,Nl);if(!n)return!1;const r=Wi(n.provider,n.prefix);return e?N5(r,n.name,e):(r.missing.add(n.name),!0)}function O5(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),Nl&&!e&&!t.prefix){let o=!1;return pT(t)&&(t.prefix="",fT(t,(s,i)=>{D5(s,i)&&(o=!0)})),o}const n=t.prefix;if(!zd({prefix:n,name:"a"}))return!1;const r=Wi(e,n);return!!gT(r,t)}const bT=Object.freeze({width:null,height:null}),vT=Object.freeze({...bT,...pu}),L5=/(-?[0-9.]*[0-9]+[0-9.]*)/g,j5=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function lw(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const r=t.split(L5);if(r===null||!r.length)return t;const o=[];let s=r.shift(),i=j5.test(s);for(;;){if(i){const a=parseFloat(s);isNaN(a)?o.push(s):o.push(Math.ceil(a*e*n)/n)}else o.push(s);if(s=r.shift(),s===void 0)return o.join("");i=!i}}function B5(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const o=t.indexOf(">",r),s=t.indexOf("</"+e);if(o===-1||s===-1)break;const i=t.indexOf(">",s);if(i===-1)break;n+=t.slice(o+1,s).trim(),t=t.slice(0,r).trim()+t.slice(i+1)}return{defs:n,content:t}}function V5(t,e){return t?"<defs>"+t+"</defs>"+e:e}function $5(t,e,n){const r=B5(t);return V5(r.defs,e+r.content+n)}const H5=t=>t==="unset"||t==="undefined"||t==="none";function F5(t,e){const n={...db,...t},r={...vT,...e},o={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(g=>{const y=[],v=g.hFlip,x=g.vFlip;let w=g.rotate;v?x?w+=2:(y.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),y.push("scale(-1 1)"),o.top=o.left=0):x&&(y.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),y.push("scale(1 -1)"),o.top=o.left=0);let C;switch(w<0&&(w-=Math.floor(w/4)*4),w=w%4,w){case 1:C=o.height/2+o.top,y.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:y.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:C=o.width/2+o.left,y.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}w%2===1&&(o.left!==o.top&&(C=o.left,o.left=o.top,o.top=C),o.width!==o.height&&(C=o.width,o.width=o.height,o.height=C)),y.length&&(s=$5(s,'<g transform="'+y.join(" ")+'">',"</g>"))});const i=r.width,a=r.height,l=o.width,c=o.height;let d,u;i===null?(u=a===null?"1em":a==="auto"?c:a,d=lw(u,l/c)):(d=i==="auto"?l:i,u=a===null?lw(d,c/l):a==="auto"?c:a);const h={},f=(g,y)=>{H5(y)||(h[g]=y.toString())};f("width",d),f("height",u);const p=[o.left,o.top,l,c];return h.viewBox=p.join(" "),{attributes:h,viewBox:p,body:s}}const z5=/\sid="(\S+)"/g,U5="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let W5=0;function G5(t,e=U5){const n=[];let r;for(;r=z5.exec(t);)n.push(r[1]);if(!n.length)return t;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const i=typeof e=="function"?e(s):e+(W5++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+i+o+"$3")}),t=t.replace(new RegExp(o,"g"),""),t}const sg=Object.create(null);function q5(t,e){sg[t]=e}function ig(t){return sg[t]||sg[""]}function ub(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const hb=Object.create(null),Da=["https://api.simplesvg.com","https://api.unisvg.com"],Ud=[];for(;Da.length>0;)Da.length===1||Math.random()>.5?Ud.push(Da.shift()):Ud.push(Da.pop());hb[""]=ub({resources:["https://api.iconify.design"].concat(Ud)});function K5(t,e){const n=ub(e);return n===null?!1:(hb[t]=n,!0)}function fb(t){return hb[t]}const Z5=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let cw=Z5();function J5(t,e){const n=fb(t);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let o=0;n.resources.forEach(i=>{o=Math.max(o,i.length)});const s=e+".json?icons=";r=n.maxURL-o-n.path.length-s.length}return r}function Y5(t){return t===404}const X5=(t,e,n)=>{const r=[],o=J5(t,e),s="icons";let i={type:s,provider:t,prefix:e,icons:[]},a=0;return n.forEach((l,c)=>{a+=l.length+1,a>=o&&c>0&&(r.push(i),i={type:s,provider:t,prefix:e,icons:[]},a=l.length),i.icons.push(l)}),r.push(i),r};function Q5(t){if(typeof t=="string"){const e=fb(t);if(e)return e.path}return"/"}const eO=(t,e,n)=>{if(!cw){n("abort",424);return}let r=Q5(e.provider);switch(e.type){case"icons":{const s=e.prefix,a=e.icons.join(","),l=new URLSearchParams({icons:a});r+=s+".json?"+l.toString();break}case"custom":{const s=e.uri;r+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let o=503;cw(t+r).then(s=>{const i=s.status;if(i!==200){setTimeout(()=>{n(Y5(i)?"abort":"next",i)});return}return o=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?n("abort",s):n("next",o)});return}setTimeout(()=>{n("success",s)})}).catch(()=>{n("next",o)})},tO={prepare:X5,send:eO};function nO(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((o,s)=>o.provider!==s.provider?o.provider.localeCompare(s.provider):o.prefix!==s.prefix?o.prefix.localeCompare(s.prefix):o.name.localeCompare(s.name));let r={provider:"",prefix:"",name:""};return t.forEach(o=>{if(r.name===o.name&&r.prefix===o.prefix&&r.provider===o.provider)return;r=o;const s=o.provider,i=o.prefix,a=o.name,l=n[s]||(n[s]=Object.create(null)),c=l[i]||(l[i]=Wi(s,i));let d;a in c.icons?d=e.loaded:i===""||c.missing.has(a)?d=e.missing:d=e.pending;const u={provider:s,prefix:i,name:a};d.push(u)}),e}function wT(t,e){t.forEach(n=>{const r=n.loaderCallbacks;r&&(n.loaderCallbacks=r.filter(o=>o.id!==e))})}function rO(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const r=t.provider,o=t.prefix;e.forEach(s=>{const i=s.icons,a=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==o)return!0;const c=l.name;if(t.icons[c])i.loaded.push({provider:r,prefix:o,name:c});else if(t.missing.has(c))i.missing.push({provider:r,prefix:o,name:c});else return n=!0,!0;return!1}),i.pending.length!==a&&(n||wT([t],s.id),s.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),s.abort))})}))}let oO=0;function sO(t,e,n){const r=oO++,o=wT.bind(null,n,r);if(!e.pending.length)return o;const s={id:r,icons:e,callback:t,abort:o};return n.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(s)}),o}function iO(t,e=!0,n=!1){const r=[];return t.forEach(o=>{const s=typeof o=="string"?Uh(o,e,n):o;s&&r.push(s)}),r}var aO={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function lO(t,e,n,r){const o=t.resources.length,s=t.random?Math.floor(Math.random()*o):t.index;let i;if(t.random){let S=t.resources.slice(0);for(i=[];S.length>1;){const T=Math.floor(Math.random()*S.length);i.push(S[T]),S=S.slice(0,T).concat(S.slice(T+1))}i=i.concat(S)}else i=t.resources.slice(s).concat(t.resources.slice(0,s));const a=Date.now();let l="pending",c=0,d,u=null,h=[],f=[];typeof r=="function"&&f.push(r);function p(){u&&(clearTimeout(u),u=null)}function g(){l==="pending"&&(l="aborted"),p(),h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function y(S,T){T&&(f=[]),typeof S=="function"&&f.push(S)}function v(){return{startTime:a,payload:e,status:l,queriesSent:c,queriesPending:h.length,subscribe:y,abort:g}}function x(){l="failed",f.forEach(S=>{S(void 0,d)})}function w(){h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function C(S,T,E){const M=T!=="success";switch(h=h.filter(P=>P!==S),l){case"pending":break;case"failed":if(M||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){d=E,x();return}if(M){d=E,h.length||(i.length?k():x());return}if(p(),w(),!t.random){const P=t.resources.indexOf(S.resource);P!==-1&&P!==t.index&&(t.index=P)}l="completed",f.forEach(P=>{P(E)})}function k(){if(l!=="pending")return;p();const S=i.shift();if(S===void 0){if(h.length){u=setTimeout(()=>{p(),l==="pending"&&(w(),x())},t.timeout);return}x();return}const T={status:"pending",resource:S,callback:(E,M)=>{C(T,E,M)}};h.push(T),c++,u=setTimeout(k,t.rotate),n(S,e,T.callback)}return setTimeout(k),v}function xT(t){const e={...aO,...t};let n=[];function r(){n=n.filter(a=>a().status==="pending")}function o(a,l,c){const d=lO(e,a,l,(u,h)=>{r(),c&&c(u,h)});return n.push(d),d}function s(a){return n.find(l=>a(l))||null}return{query:o,find:s,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:r}}function dw(){}const yp=Object.create(null);function cO(t){if(!yp[t]){const e=fb(t);if(!e)return;const n=xT(e),r={config:e,redundancy:n};yp[t]=r}return yp[t]}function dO(t,e,n){let r,o;if(typeof t=="string"){const s=ig(t);if(!s)return n(void 0,424),dw;o=s.send;const i=cO(t);i&&(r=i.redundancy)}else{const s=ub(t);if(s){r=xT(s);const i=t.resources?t.resources[0]:"",a=ig(i);a&&(o=a.send)}}return!r||!o?(n(void 0,424),dw):r.query(e,o,n)().abort}function uw(){}function uO(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,rO(t)}))}function hO(t){const e=[],n=[];return t.forEach(r=>{(r.match(mT)?e:n).push(r)}),{valid:e,invalid:n}}function Oa(t,e,n){function r(){const o=t.pendingIcons;e.forEach(s=>{o&&o.delete(s),t.icons[s]||t.missing.add(s)})}if(n&&typeof n=="object")try{if(!gT(t,n).length){r();return}}catch(o){console.error(o)}r(),uO(t)}function hw(t,e){t instanceof Promise?t.then(n=>{e(n)}).catch(()=>{e(null)}):e(t)}function fO(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:r}=t,o=t.iconsToLoad;if(delete t.iconsToLoad,!o||!o.length)return;const s=t.loadIcon;if(t.loadIcons&&(o.length>1||!s)){hw(t.loadIcons(o,r,n),d=>{Oa(t,o,d)});return}if(s){o.forEach(d=>{const u=s(d,r,n);hw(u,h=>{const f=h?{prefix:r,icons:{[d]:h}}:null;Oa(t,[d],f)})});return}const{valid:i,invalid:a}=hO(o);if(a.length&&Oa(t,a,null),!i.length)return;const l=r.match(mT)?ig(n):null;if(!l){Oa(t,i,null);return}l.prepare(n,r,i).forEach(d=>{dO(n,d,u=>{Oa(t,d.icons,u)})})}))}const pO=(t,e)=>{const n=iO(t,!0,yT()),r=nO(n);if(!r.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(r.loaded,r.missing,r.pending,uw)}),()=>{l=!1}}const o=Object.create(null),s=[];let i,a;return r.pending.forEach(l=>{const{provider:c,prefix:d}=l;if(d===a&&c===i)return;i=c,a=d,s.push(Wi(c,d));const u=o[c]||(o[c]=Object.create(null));u[d]||(u[d]=[])}),r.pending.forEach(l=>{const{provider:c,prefix:d,name:u}=l,h=Wi(c,d),f=h.pendingIcons||(h.pendingIcons=new Set);f.has(u)||(f.add(u),o[c][d].push(u))}),s.forEach(l=>{const c=o[l.provider][l.prefix];c.length&&fO(l,c)}),e?sO(e,r,s):uw};function mO(t,e){const n={...t};for(const r in e){const o=e[r],s=typeof o;r in bT?(o===null||o&&(s==="string"||s==="number"))&&(n[r]=o):s===typeof n[r]&&(n[r]=r==="rotate"?o%4:o)}return n}const gO=/[\s,]+/;function yO(t,e){e.split(gO).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function bO(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function r(o){for(;o<0;)o+=4;return o%4}if(n===""){const o=parseInt(t);return isNaN(o)?0:r(o)}else if(n!==t){let o=0;switch(n){case"%":o=25;break;case"deg":o=90}if(o){let s=parseFloat(t.slice(0,t.length-n.length));return isNaN(s)?0:(s=s/o,s%1===0?r(s):0)}}return e}function vO(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function wO(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function xO(t){return"data:image/svg+xml,"+wO(t)}function kO(t){return'url("'+xO(t)+'")'}let al;function CO(){try{al=window.trustedTypes.createPolicy("iconify",{createHTML:t=>t})}catch{al=null}}function SO(t){return al===void 0&&CO(),al?al.createHTML(t):t}const kT={...vT,inline:!1},TO={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},EO={display:"inline-block"},ag={backgroundColor:"currentColor"},CT={backgroundColor:"transparent"},fw={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},pw={WebkitMask:ag,mask:ag,background:CT};for(const t in pw){const e=pw[t];for(const n in fw)e[t+n]=fw[n]}const MO={...kT,inline:!0};function mw(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const AO=(t,e,n)=>{const r=e.inline?MO:kT,o=mO(r,e),s=e.mode||"svg",i={},a=e.style||{},l={...s==="svg"?TO:{}};if(n){const y=Uh(n,!1,!0);if(y){const v=["iconify"],x=["provider","prefix"];for(const w of x)y[w]&&v.push("iconify--"+y[w]);l.className=v.join(" ")}}for(let y in e){const v=e[y];if(v!==void 0)switch(y){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":break;case"_ref":l.ref=v;break;case"className":l[y]=(l[y]?l[y]+" ":"")+v;break;case"inline":case"hFlip":case"vFlip":o[y]=v===!0||v==="true"||v===1;break;case"flip":typeof v=="string"&&yO(o,v);break;case"color":i.color=v;break;case"rotate":typeof v=="string"?o[y]=bO(v):typeof v=="number"&&(o[y]=v);break;case"ariaHidden":case"aria-hidden":v!==!0&&v!=="true"&&delete l["aria-hidden"];break;default:r[y]===void 0&&(l[y]=v)}}const c=F5(t,o),d=c.attributes;if(o.inline&&(i.verticalAlign="-0.125em"),s==="svg"){l.style={...i,...a},Object.assign(l,d);let y=0,v=e.id;return typeof v=="string"&&(v=v.replace(/-/g,"_")),l.dangerouslySetInnerHTML={__html:SO(G5(c.body,v?()=>v+"ID"+y++:"iconifyReact"))},b.createElement("svg",l)}const{body:u,width:h,height:f}=t,p=s==="mask"||(s==="bg"?!1:u.indexOf("currentColor")!==-1),g=vO(u,{...d,width:h+"",height:f+""});return l.style={...i,"--svg":kO(g),width:mw(d.width),height:mw(d.height),...EO,...p?ag:CT,...a},b.createElement("span",l)};yT(!0);q5("",tO);if(typeof document<"u"&&typeof window<"u"){const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!O5(r))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const r="IconifyProviders["+n+"] is invalid.";try{const o=e[n];if(typeof o!="object"||!o||o.resources===void 0)continue;K5(n,o)||console.error(r)}catch{console.error(r)}}}}function ST(t){const[e,n]=b.useState(!!t.ssr),[r,o]=b.useState({});function s(f){if(f){const p=t.icon;if(typeof p=="object")return{name:"",data:p};const g=aw(p);if(g)return{name:p,data:g}}return{name:""}}const[i,a]=b.useState(s(!!t.ssr));function l(){const f=r.callback;f&&(f(),o({}))}function c(f){if(JSON.stringify(i)!==JSON.stringify(f))return l(),a(f),!0}function d(){var f;const p=t.icon;if(typeof p=="object"){c({name:"",data:p});return}const g=aw(p);if(c({name:p,data:g}))if(g===void 0){const y=pO([p],d);o({callback:y})}else g&&((f=t.onLoad)===null||f===void 0||f.call(t,p))}b.useEffect(()=>(n(!0),l),[]),b.useEffect(()=>{e&&d()},[t.icon,e]);const{name:u,data:h}=i;return h?AO({...db,...h},t,u):t.children?t.children:t.fallback?t.fallback:b.createElement("span",{})}const ie=b.forwardRef((t,e)=>ST({...t,_ref:e}));b.forwardRef((t,e)=>ST({inline:!0,...t,_ref:e}));const _O="_container_j1zqo_1",PO="_iconSuccess_j1zqo_6",gw={container:_O,iconSuccess:PO},RO=t=>t.reduce((e,n)=>e+n,0),IO=({checklistTemplateId:t,fields:e,currentDay:n})=>{const{getChecklistRecords:r}=Jo(),[o,s]=R.useState([]),i=()=>{const a=r(t,{rangeDate:{from:new Date(new Date(n).setHours(0,0,0,0)).toISOString(),to:new Date(new Date(n).setHours(23,59,59,999)).toISOString()},fieldIds:e.map(l=>l.id)});return s(Object.values(a)),a};return R.useEffect(()=>{i()},[t]),m.jsxs("div",{className:gw.container,children:[m.jsx(ie,{width:100,color:"rgba(16,154,0,0.16)",icon:"ion:checkmark-done-circle-outline",className:gw.iconSuccess}),e.map(a=>{const l=Object.values(o).flat().filter(d=>d.fieldId===a.id),c=RO(l.map(d=>d.value));return m.jsx(vt.ItemMeta,{logo:m.jsx(ie,{width:24,icon:a.icon}),title:a.title,rightComponent:m.jsx(m.Fragment,{children:m.jsxs(le.Text,{children:[c," ",a.unit]})})})})]})},NO="_input_1a2iv_6",DO="_footerCenter_1a2iv_12",OO="_submitBtn_1a2iv_18",LO="_unit_1a2iv_34",ad={input:NO,footerCenter:DO,submitBtn:OO,unit:LO},jO=({checklistTemplateId:t,currentDay:e,onSubmit:n,fields:r})=>{const{getChecklistTemplate:o}=Qr(),[s,i]=R.useState(),{addChecklistRecord:a}=Jo(),[l,c]=R.useState(r.reduce((d,{id:u})=>({...d,[u]:void 0}),{}));return R.useEffect(()=>{const d=o(t);i(d)},[t]),m.jsxs(m.Fragment,{children:[r.map(d=>m.jsx(vt.ItemMeta,{logo:m.jsx(ie,{width:24,icon:d.icon}),title:d.title,rightComponent:m.jsxs(m.Fragment,{children:[m.jsx(Sn,{onChange:u=>{c({...l,[d.id]:Number(u.target.value)})},border:"dash",className:ad.input,type:"number"}),m.jsx(le.Text,{className:ad.unit,children:d.unit})]})})),m.jsx("div",{className:ad.footerCenter,children:m.jsx(Dt,{size:"lg",className:ad.submitBtn,onClick:()=>{s&&(a({checklistId:t,checklistTemplateId:s.id,createdAt:e,records:Object.entries(l).map(([d,u])=>({fieldId:d,value:u}))}),n==null||n())},children:"Submit"})})]})},BO="_container_5u0cb_3",VO="_hr_5u0cb_21",yw={container:BO,hr:VO};var $O=BN();const TT=VN($O),HO=t=>t.reduce((e,n)=>e+n,0),FO=({checklistTemplateId:t,fields:e})=>{const{getChecklistRecords:n}=Jo(),[r,o]=R.useState({});R.useEffect(()=>{const a=n(t,{rangeDate:{from:lb(new Date).toISOString(),to:ab(new Date).toISOString()},sortBy:"createdAt"});console.log("RECORDS from metric",a);const l=Object.keys(a),c=Object.values(a),d=e.reduce((u,h,f)=>{const p=c.map(g=>{const y=g.filter(v=>v.fieldId===h.id).map(v=>v.value);return HO(y)});return{...u,[h.id]:p}},{});o({categories:l,seriesValues:d})},[]);const s=e.map(a=>{var l;return{name:a.title,data:(l=r==null?void 0:r.seriesValues)==null?void 0:l[a.id]}}),i={xaxis:{categories:r.categories}};return{series:s,options:i}},zO=({checklistTemplateId:t,fields:e})=>{const{options:n,series:r}=FO({checklistTemplateId:t,fields:e});return m.jsx(TT,{options:n,series:r,type:"bar"})},UO="_container_1hnb3_2",WO="_title_1hnb3_8",GO="_button_1hnb3_12",qO="_buttonActive_1hnb3_19",KO="_addIcon_1hnb3_23",ZO="_icon_1hnb3_27",JO="_iconActive_1hnb3_31",ds={container:UO,title:WO,button:GO,buttonActive:qO,addIcon:KO,icon:ZO,iconActive:JO},YO=({onClickHome:t,onClickHistory:e,onClickMetric:n,onClickAdd:r,activeTab:o,renderTitle:s=()=>null})=>{const i=[{icon:"solar:home-2-line-duotone",iconActive:"solar:home-2-bold",onClick:t,isActive:o===Ja.Home},{icon:"solar:clock-square-broken",iconActive:"solar:clock-square-bold",onClick:e,isActive:o===Ja.History},{icon:"solar:chart-square-linear",iconActive:"solar:chart-square-bold",onClick:n,isActive:o===Ja.Metric}],a=Bt();return m.jsxs("div",{className:ds.container,children:[m.jsx(le.Title,{level:4,noMargin:!0,className:ds.title,children:s()}),i.map(({icon:l,iconActive:c,onClick:d,isActive:u},h)=>m.jsx(ie,{onClick:d,className:pe(ds.icon,u&&ds.iconActive),width:24,icon:o===h?c:l},h)),m.jsxs(Dt,{className:pe(ds.button,o===Ja.Add&&ds.buttonActive),type:"dash",onClick:r,children:[m.jsx(ie,{icon:"material-symbols:add",className:ds.addIcon}),a.formatMessage({id:"record-header.add-record",defaultMessage:"Add"})]})]})},XO="_dateSection_oi10s_2",QO="_iconEdit_oi10s_6",eL="_input_oi10s_10",bp={dateSection:XO,iconEdit:QO,input:eL},tL=({checklistTemplateId:t,fields:e})=>{const{getChecklistRecords:n,updateChecklistRecord:r}=Jo(),[o,s]=R.useState({}),i=e.reduce((d,u)=>({...d,[u.id]:u}),{});R.useEffect(()=>{const d=n(t,{rangeDate:{from:lb(new Date).toISOString(),to:ab(new Date).toISOString()},type:"time",fieldIds:Object.keys(i)});s(d)},[t]);const[a,l]=R.useState(""),c=R.useRef(null);return m.jsx("div",{children:Object.entries(o).map(([d,u])=>m.jsxs("div",{className:bp.dateSection,children:[new Date(d).toLocaleString(),u.map(h=>{const f=i[h.fieldId];return m.jsx(vt.ItemMeta,{logo:m.jsx(ie,{width:24,icon:f.icon}),title:f.title,rightComponent:m.jsxs(m.Fragment,{children:[a===h.id?m.jsx(Sn,{value:h.value,ref:c,autoFocus:!0,border:"dash",className:bp.input,onBlur:()=>{var p;console.log(">>>ON BLUR???"),r(h.id,{checklistTemplateId:h.checklistTemplateId,value:Number((p=c.current)==null?void 0:p.value)}),s(g=>({...g,[d]:g[d].map(y=>{var v;return y.id===h.id?{...y,value:Number((v=c.current)==null?void 0:v.value)}:y})})),l("")}}):m.jsx(le.Text,{children:h.value}),m.jsxs(le.Text,{children:["Â ",f.unit]}),m.jsx(ie,{width:24,className:bp.iconEdit,onClick:()=>{l(h.id),setTimeout(()=>{var p;return(p=c==null?void 0:c.current)==null?void 0:p.focus()},100)},icon:"solar:pen-2-line-duotone"})]})})})]}))})},nL="_container_ngn4e_1",rL="_hr_ngn4e_11",bw={container:nL,hr:rL},Di=({classes:t}={})=>m.jsx("div",{className:pe(bw.container,t==null?void 0:t.container),children:m.jsx("div",{className:pe(bw.hr,t==null?void 0:t.hr)})});var Ja=(t=>(t[t.Home=0]="Home",t[t.History=1]="History",t[t.Metric=2]="Metric",t[t.Add=3]="Add",t))(Ja||{});const oL=({checklistId:t,currentDay:e,fields:n,checklistTemplateId:r})=>{const{getChecklistRecords:o}=Jo(),[s,i]=R.useState({}),{updateChecklist:a}=zh(),l=()=>{const g=o(r,{rangeDate:{from:new Date(new Date(e).setHours(0,0,0,0)).toISOString(),to:new Date(new Date(e).setHours(23,59,59,999)).toISOString()},fieldIds:n.map(y=>y.id)});return i(Object.values(g)),g};R.useEffect(()=>{const g=l();u(Object.values(g).length?0:3)},[r]);const c=Object.values(s).length,[d,u]=R.useState(c?0:3),h=YD(e),f=()=>{switch(d){case 0:return m.jsx(IO,{checklistTemplateId:r,fields:n,currentDay:e});case 2:return m.jsx(zO,{checklistTemplateId:r,fields:n});case 3:return m.jsx(jO,{checklistTemplateId:r,currentDay:e,onSubmit:()=>{u(0),a({id:t,completedAt:new Date().toISOString()})},fields:n});case 1:return m.jsx(tL,{checklistTemplateId:r,fields:n});default:return null}},p=()=>({0:`${h?"Today":new Date(e).toLocaleDateString()}`,1:"History",2:"Metric",3:`Record ${h?"Today":`${new Date(e).toLocaleDateString()}`}`})[d];return m.jsxs(Wn,{className:yw.container,children:[m.jsx(YO,{onClickHome:()=>u(0),onClickHistory:()=>u(1),onClickMetric:()=>u(2),onClickAdd:()=>u(3),activeTab:d,renderTitle:p}),m.jsx(Di,{classes:{hr:yw.hr}}),f()]})},sL="_container_1ox8i_2",iL="_hr_1ox8i_11",vw={container:sL,hr:iL},aL="_container_1hnb3_2",lL="_title_1hnb3_8",cL="_button_1hnb3_12",dL="_buttonActive_1hnb3_19",uL="_addIcon_1hnb3_23",hL="_icon_1hnb3_27",fL="_iconActive_1hnb3_31",us={container:aL,title:lL,button:cL,buttonActive:dL,addIcon:uL,icon:hL,iconActive:fL},pL=({onClickHome:t,onClickHistory:e,onClickAdd:n,activeTab:r,renderTitle:o=()=>null})=>{const s=[{icon:"solar:home-2-line-duotone",iconActive:"solar:home-2-bold",onClick:t,isActive:r===iu.Home},{icon:"solar:clock-square-broken",iconActive:"solar:clock-square-bold",onClick:e,isActive:r===iu.History}],i=Bt();return m.jsxs("div",{className:us.container,children:[m.jsx(le.Title,{level:4,noMargin:!0,className:us.title,children:o()}),s.map(({icon:a,iconActive:l,onClick:c,isActive:d},u)=>m.jsx(ie,{onClick:c,className:pe(us.icon,d&&us.iconActive),width:24,icon:d?l:a},u)),m.jsxs(Dt,{className:pe(us.button,r===iu.Add&&us.buttonActive),size:"sm",type:"dash",onClick:n,children:[m.jsx(ie,{icon:"material-symbols:add",className:us.addIcon}),i.formatMessage({id:"record-header.add-record",defaultMessage:"Add"})]})]})};function it(t){this.content=t}it.prototype={constructor:it,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new it(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new it(n)},addToStart:function(t,e){return new it([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new it(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new it(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=it.from(t),t.size?new it(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=it.from(t),t.size?new it(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=it.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};it.from=function(t){if(t instanceof it)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new it(e)};function ET(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=ET(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function MT(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,d=Math.min(i.text.length,a.text.length);for(;c<d&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=MT(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class _{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,o+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new _(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new _(r,o)}cutByIndex(e,n){return e==n?_.empty:e==0&&n==this.content.length?this:new _(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new _(o,s)}addToStart(e){return new _([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return ET(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return MT(this,e,n,r)}findIndex(e,n=-1){if(e==0)return ld(0,e);if(e==this.size)return ld(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?ld(r+1,i):ld(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return _.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new _(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new _(n||e,r)}static from(e){if(!e)return _.empty;if(e instanceof _)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_.empty=new _([],0);const vp={index:0,offset:0};function ld(t,e){return vp.index=t,vp.offset=e,vp}function mu(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!mu(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!mu(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let _e=class lg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&mu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return lg.none;if(e instanceof lg)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};_e.none=[];class gu extends Error{}class D{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=_T(this.content,e+this.openStart,n);return r&&new D(r,this.openStart,this.openEnd)}removeBetween(e,n){return new D(AT(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return D.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new D(_.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new D(e,r,o)}}D.empty=new D(_.empty,0,0);function AT(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(AT(s.content,e-o-1,n-o-1)))}function _T(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=_T(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function mL(t,e,n){if(n.openStart>t.depth)throw new gu("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new gu("Inconsistent open depths");return PT(t,e,n,0)}function PT(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=PT(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return Is(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=gL(n,t);return Is(s,IT(t,i,a,e,r))}else return Is(s,yu(t,e,r))}function RT(t,e){if(!e.type.compatibleContent(t.type))throw new gu("Cannot join "+e.type.name+" onto "+t.type.name)}function cg(t,e,n){let r=t.node(n);return RT(r,e.node(n)),r}function Rs(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ll(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Rs(t.nodeAfter,r),s++));for(let a=s;a<i;a++)Rs(o.child(a),r);e&&e.depth==n&&e.textOffset&&Rs(e.nodeBefore,r)}function Is(t,e){return t.type.checkContent(e),t.copy(e)}function IT(t,e,n,r,o){let s=t.depth>o&&cg(t,e,o+1),i=r.depth>o&&cg(n,r,o+1),a=[];return ll(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(RT(s,i),Rs(Is(s,IT(t,e,n,r,o+1)),a)):(s&&Rs(Is(s,yu(t,e,o+1)),a),ll(e,n,o,a),i&&Rs(Is(i,yu(n,r,o+1)),a)),ll(r,null,o,a),new _(a)}function yu(t,e,n){let r=[];if(ll(null,t,n,r),t.depth>n){let o=cg(t,e,n+1);Rs(Is(o,yu(t,e,n+1)),r)}return ll(e,null,n,r),new _(r)}function gL(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(_.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class Dl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return _e.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new bu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new Dl(n,r,s)}static resolveCached(e,n){let r=ww.get(e);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else ww.set(e,r=new yL);let o=r.elts[r.i]=Dl.resolve(e,n);return r.i=(r.i+1)%bL,o}}class yL{constructor(){this.elts=[],this.i=0}}const bL=12,ww=new WeakMap;class bu{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const vL=Object.create(null);let Gr=class dg{constructor(e,n,r,o=_e.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||_.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&mu(this.attrs,n||e.defaultAttrs||vL)&&_e.sameSet(this.marks,r||_e.none)}copy(e=null){return e==this.content?this:new dg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new dg(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return D.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new D(c,o.depth-i,s.depth-i)}replace(e,n,r){return mL(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return Dl.resolveCached(this,e)}resolveNoCache(e){return Dl.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),NT(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=_.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=_e.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!_e.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=_.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};Gr.prototype.text=void 0;class vu extends Gr{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):NT(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new vu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new vu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function NT(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Hs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new wL(e,n);if(r.next==null)return Hs.empty;let o=DT(r);r.next&&r.err("Unexpected trailing text");let s=ML(EL(o));return AL(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return _.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:d,next:u}=i.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(u)==-1){o.push(u);let h=s(u,a.concat(d));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}Hs.empty=new Hs(!0);class wL{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function DT(t){let e=[];do e.push(xL(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function xL(t){let e=[];do e.push(kL(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function kL(t){let e=TL(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=CL(t,e);else break;return e}function xw(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function CL(t,e){let n=xw(t),r=n;return t.eat(",")&&(t.next!="}"?r=xw(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function SL(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(e)&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function TL(t){if(t.eat("(")){let e=DT(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=SL(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function EL(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let d=n();o(s(i.expr,l),d),l=d}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let d=n();r(l,d),o(s(i.expr,l),d),l=d}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function OT(t,e){return e-t}function kw(t,e){let n=[];return r(e),n.sort(OT);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function ML(t){let e=Object.create(null);return n(kw(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<o.length;d++)o[d][0]==a&&(c=o[d][1]);kw(t,l).forEach(d=>{c||o.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[r.join(",")]=new Hs(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(OT);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function AL(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function LT(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function jT(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function BT(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function VT(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new PL(t,r,e[r]);return n}let Cw=class $T{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=VT(e,r.attrs),this.defaultAttrs=LT(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Hs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:jT(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Gr(this,this.computeAttrs(e),_.from(n),_e.setFrom(r))}createChecked(e=null,n,r){return n=_.from(n),this.checkContent(n),new Gr(this,this.computeAttrs(e),n,_e.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=_.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(_.empty,!0);return s?new Gr(this,e,n.append(s),_e.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){BT(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:_e.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new $T(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function _L(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class PL{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?_L(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Wh{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=VT(e,o.attrs),this.excluded=null;let s=LT(this.attrs);this.instance=s?new _e(this,s):null}create(e=null){return!e&&this.instance?this.instance:new _e(this,jT(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new Wh(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){BT(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class HT{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=it.from(e.nodes),n.marks=it.from(e.marks||{}),this.nodes=Cw.compile(this.spec.nodes,this),this.marks=Wh.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=Hs.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Sw(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:Sw(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Cw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new vu(r,r.defaultAttrs,e,_e.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Gr.fromJSON(this,e)}markFromJSON(e){return _e.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Sw(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function RL(t){return t.tag!=null}function IL(t){return t.style!=null}let qr=class ug{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(RL(o))this.tags.push(o);else if(IL(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new Ew(this,n,!1);return r.addAll(e,_e.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Ew(this,n,!0);return r.addAll(e,_e.none,n.from,n.to),D.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(OL(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=Mw(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=Mw(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ug(e,ug.schemaRules(e)))}};const FT={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},NL={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},zT={ol:!0,ul:!0},Ol=1,hg=2,Wd=4;function Tw(t,e,n){return e!=null?(e?Ol:0)|(e==="full"?hg:0):t&&t.whitespace=="pre"?Ol|hg:n&-5}class cd{constructor(e,n,r,o,s,i){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=_e.none,this.match=s||(i&Wd?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(_.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ol)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=_.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(_.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!FT.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ew{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=Tw(null,n.preserveWhitespace,0)|(r?Wd:0);o?s=new cd(o.type,o.attrs,_e.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new cd(null,null,_e.none,!0,null,i):s=new cd(e.schema.topNodeType,null,_e.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&hg?"full":this.localPreserveWS||(o.options&Ol)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;zT.hasOwnProperty(i)&&this.parser.normalizeLists&&DL(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:NL.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(FT.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let u=l&&l.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,n);this.findAtPoint(e,s)}findPlace(e,n,r){let o,s;for(let i=this.open,a=0;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(s);for(let i=0;i<o.length;i++)n=this.enterInner(o[i],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=_e.none;for(let a of o.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):Aw(a.type,e.type))&&(i=a.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=Tw(e,s,i.options);i.options&Wd&&i.content.length==0&&(a|=Wd);let l=_e.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):Aw(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new cd(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ol)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let d=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function DL(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&zT.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function OL(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Mw(t){let e={};for(let n in t)e[n]=t[n];return e}function Aw(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&i(d))return!0}};if(i(o.contentMatch))return!0}}class so{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=wp(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],d=this.serializeMark(c,i.isInline,n);d&&(s.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=Gd(wp(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&Gd(wp(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return Gd(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new so(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=_w(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return _w(e.marks)}}function _w(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function wp(t){return t.document||window.document}const Pw=new WeakMap;function LL(t){let e=Pw.get(t);return e===void 0&&Pw.set(t,e=jL(t)),e}function jL(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function Gd(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=LL(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let u in c)if(c[u]!=null){let h=u.indexOf(" ");h>0?l.setAttributeNS(u.slice(0,h),u.slice(h+1),c[u]):l.setAttribute(u,c[u])}}for(let u=d;u<e.length;u++){let h=e[u];if(h===0){if(u<e.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=Gd(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const UT=65535,WT=Math.pow(2,16);function BL(t,e){return t+e*WT}function Rw(t){return t&UT}function VL(t){return(t-(t&UT))/WT}const GT=1,qT=2,qd=4,KT=8;class fg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&KT)>0}get deletedBefore(){return(this.delInfo&(GT|qd))>0}get deletedAfter(){return(this.delInfo&(qT|qd))>0}get deletedAcross(){return(this.delInfo&qd)>0}}class nn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&nn.empty)return nn.empty}recover(e){let n=0,r=Rw(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+VL(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+i],u=l+c;if(e<=u){let h=c?e==l?-1:e==u?1:n:n,f=l+o+(h<0?0:d);if(r)return f;let p=e==(n<0?l:u)?null:BL(a/3,e-l),g=e==l?qT:e==u?GT:qd;return(n<0?e!=l:e!=u)&&(g|=KT),new fg(f,g,p)}o+=d-c}return r?e+o:new fg(e+o,0,null)}touches(e,n){let r=0,o=Rw(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],d=this.ranges[o+r];e(a,a+c,l,l+d),s+=d-c}}invert(){return new nn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?nn.empty:new nn(e<0?[0,-e,0]:[0,0,e])}}nn.empty=new nn([]);class Gi{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Gi(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Gi;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this._maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new fg(e,o,null)}}const xp=Object.create(null);class Tt{getMap(){return nn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=xp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xp)throw new RangeError("Duplicate use of step JSON ID "+e);return xp[e]=n,n.prototype.jsonID=e,n}}class Je{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Je(e,null)}static fail(e){return new Je(null,e)}static fromReplace(e,n,r,o){try{return Je.ok(e.replace(n,r,o))}catch(s){if(s instanceof gu)return Je.fail(s.message);throw s}}}function pb(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(pb(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return _.fromArray(r)}class _o extends Tt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new D(pb(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return Je.fromReplace(e,this.from,this.to,s)}invert(){return new ar(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new _o(n.pos,r.pos,this.mark)}merge(e){return e instanceof _o&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _o(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _o(n.from,n.to,e.markFromJSON(n.mark))}}Tt.jsonID("addMark",_o);class ar extends Tt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new D(pb(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return Je.fromReplace(e,this.from,this.to,r)}invert(){return new _o(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ar(n.pos,r.pos,this.mark)}merge(e){return e instanceof ar&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ar(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ar(n.from,n.to,e.markFromJSON(n.mark))}}Tt.jsonID("removeMark",ar);class Po extends Tt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Je.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Je.fromReplace(e,this.pos,this.pos+1,new D(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Po(this.pos,n.marks[o]);return new Po(this.pos,this.mark)}}return new Fs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Po(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Po(n.pos,e.markFromJSON(n.mark))}}Tt.jsonID("addNodeMark",Po);class Fs extends Tt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Je.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Je.fromReplace(e,this.pos,this.pos+1,new D(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Po(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Fs(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fs(n.pos,e.markFromJSON(n.mark))}}Tt.jsonID("removeNodeMark",Fs);class Ze extends Tt{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&pg(e,this.from,this.to)?Je.fail("Structure replace would overwrite content"):Je.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new nn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ze(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ze(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ze)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?D.empty:new D(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ze(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?D.empty:new D(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ze(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ze(n.from,n.to,D.fromJSON(e,n.slice),!!n.structure)}}Tt.jsonID("replace",Ze);class Ke extends Tt{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(pg(e,this.from,this.gapFrom)||pg(e,this.gapTo,this.to)))return Je.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Je.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Je.fromReplace(e,this.from,this.to,r):Je.fail("Content does not fit in gap")}getMap(){return new nn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ke(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new Ke(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ke(n.from,n.to,n.gapFrom,n.gapTo,D.fromJSON(e,n.slice),n.insert,!!n.structure)}}Tt.jsonID("replaceAround",Ke);function pg(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function $L(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let u=l.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(u);for(let g=0;g<u.length;g++)u[g].isInSet(p)||(i&&i.to==h&&i.mark.eq(u[g])?i.to=f:o.push(i=new ar(h,f,u[g])));a&&a.to==h?a.to=f:s.push(a=new _o(h,f,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function HL(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof Wh){let c=i.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let d=0;d<l.length;d++){let u=l[d],h;for(let f=0;f<o.length;f++){let p=o[f];p.step==s-1&&u.eq(o[f].style)&&(h=p)}h?(h.to=c,h.step=s):o.push({style:u,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new ar(i.from,i.to,i.style)))}function mb(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,u=r.matchType(c.type);if(!u)i.push(new Ze(a,d,D.empty));else{r=u;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new ar(a,d,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new D(_.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new Ze(a+h.index,a+h.index+h[0].length,p))}}a=d}if(!r.validEnd){let l=r.fillBefore(_.empty,!0);t.replace(a,a,new D(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function FL(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function da(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!FL(o,s,i))break}return null}function zL(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,d=_.empty,u=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,d=_.from(r.node(p).copy(d)),u++):l--;let h=_.empty,f=0;for(let p=s,g=!1;p>n;p--)g||o.after(p+1)<o.end(p)?(g=!0,h=_.from(o.node(p).copy(h)),f++):c++;t.step(new Ke(l,c,i,a,new D(d.append(h),u,f),d.size-u,!0))}function ZT(t,e,n=null,r=t){let o=UL(t,e),s=o&&WL(r,e);return s?o.map(Iw).concat({type:e,attrs:n}).concat(s.map(Iw)):null}function Iw(t){return{type:t,attrs:null}}function UL(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function WL(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function GL(t,e,n){let r=_.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new Ke(o,s,o,s,new D(r,0,0),n.length,!0))}function qL(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&KL(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&YT(t,i,a,s),mb(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let d=t.mapping.slice(s),u=d.map(a,1),h=d.map(a+i.nodeSize,1);return t.step(new Ke(u,h,u+1,h-1,new D(_.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&JT(t,i,a,s),!1}})}function JT(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+s+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function YT(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+s);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function KL(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function ZL(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ke(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new D(_.from(i),0,0),1,!0))}function Kr(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=n-2;c>s;c--,d--){let u=o.node(c),h=o.index(c);if(u.type.spec.isolating)return!1;let f=u.content.cutByIndex(h,u.childCount),p=r&&r[d+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[d]||u;if(!u.canReplace(h+1,u.childCount)||!g.type.validContent(f))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function JL(t,e,n=1,r){let o=t.doc.resolve(e),s=_.empty,i=_.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=_.from(o.node(a).copy(s));let d=r&&r[c];i=_.from(d?d.type.create(d.attrs,i):o.node(a).copy(i))}t.step(new Ze(e,e,new D(s.append(i),n,n),!0))}function ri(t,e){let n=t.resolve(e),r=n.index();return XT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function YL(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),i=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function XT(t,e){return!!(t&&e&&!t.isLeaf&&YL(t,e))}function Gh(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&XT(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function XL(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),i=s.node().type;if(o&&i.inlineContent){let d=i.whitespace=="pre",u=!!i.contentMatch.matchType(o);d&&!u?r=!1:!d&&u&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);YT(t,d.node(),d.before(),a)}i.inlineContent&&mb(t,e+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Ze(c,l.map(e+n,-1),D.empty,!0)),r===!0){let d=t.doc.resolve(c);JT(t,d.node(),d.before(),t.steps.length)}return t}function QL(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function QT(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),d=!1;if(s==1)d=c.canReplace(l,l,o);else{let u=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=u&&c.canReplaceWith(l,l,u[0])}if(d)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function qh(t,e,n=e,r=D.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return eE(o,s,r)?new Ze(e,n,r):new ej(o,s,r).fit()}function eE(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class ej{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=_.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=_.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new D(s,i,a);return e>-1?new Ke(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ze(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=kp(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,u=null;if(n==1&&(i?c.matchType(i.type)||(u=c.fillBefore(_.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:u};if(n==2&&i&&(d=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=kp(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new D(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=kp(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new D(Ya(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new D(Ya(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,d=[],{match:u,type:h}=this.frontier[n];if(o){for(let g=0;g<o.childCount;g++)d.push(o.child(g));u=u.matchFragment(o)}let f=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let g=a.child(c),y=u.matchType(g.type);if(!y)break;c++,(c>1||l==0||g.content.size)&&(u=y,d.push(tE(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Xa(this.placed,n,_.from(d)),this.frontier[n].match=u,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<f;g++){let v=y.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),y=v.content}this.unplaced=p?e==0?D.empty:new D(Ya(i.content,e-1,1),e-1,f<0?i.openEnd:e-1):new D(Ya(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Cp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=Cp(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=Cp(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Xa(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Xa(this.placed,this.depth,_.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(_.empty,!0);n.childCount&&(this.placed=Xa(this.placed,this.frontier.length,n))}}function Ya(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ya(t.firstChild.content,e-1,n)))}function Xa(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Xa(t.lastChild.content,e-1,n)))}function kp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function tE(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,tE(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(_.empty,!0)))),t.copy(r)}function Cp(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!tj(n,s.content,i)?a:null}function tj(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function nj(t){return t.spec.defining||t.spec.definingForContent}function rj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(eE(o,s,r))return t.step(new Ze(e,n,r));let i=rE(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let h=o.depth,f=o.pos-1;h>0;h--,f--){let p=o.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;i.indexOf(h)>-1?a=h:o.before(h)==f&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],d=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=d-1;h>=0;h--){let f=c[h],p=nj(f.type);if(p&&!f.sameMarkup(o.node(Math.abs(a)-1)))d=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+d+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<i.length;g++){let y=i[(g+l)%i.length],v=!0;y<0&&(v=!1,y=-y);let x=o.node(y-1),w=o.index(y-1);if(x.canReplaceWith(w,w,p.type,p.marks))return t.replace(o.before(y),v?s.after(y):n,new D(nE(r.content,0,r.openStart,f),f,r.openEnd))}}let u=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>u));h--){let f=i[h];f<0||(e=o.before(f),n=s.after(f))}}function nE(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(nE(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(_.empty,!0))}return t}function oj(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=QL(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new D(_.from(r),0,0))}function sj(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=rE(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function rE(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class Oi extends Tt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Je.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return Je.fromReplace(e,this.pos,this.pos+1,new D(_.from(o),0,n.isLeaf?0:1))}getMap(){return nn.empty}invert(e){return new Oi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Oi(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Oi(n.pos,n.attr,n.value)}}Tt.jsonID("attr",Oi);class Ll extends Tt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Je.ok(r)}getMap(){return nn.empty}invert(e){return new Ll(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ll(n.attr,n.value)}}Tt.jsonID("docAttr",Ll);let qi=class extends Error{};qi=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};qi.prototype=Object.create(Error.prototype);qi.prototype.constructor=qi;qi.prototype.name="TransformError";class gb{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Gi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new qi(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=D.empty){let o=qh(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new D(_.from(r),0,0))}delete(e,n){return this.replace(e,n,D.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return rj(this,e,n,r),this}replaceRangeWith(e,n,r){return oj(this,e,n,r),this}deleteRange(e,n){return sj(this,e,n),this}lift(e,n){return zL(this,e,n),this}join(e,n=1){return XL(this,e,n),this}wrap(e,n){return GL(this,e,n),this}setBlockType(e,n=e,r,o=null){return qL(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return ZL(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Oi(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ll(e,n)),this}addNodeMark(e,n){return this.step(new Po(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof _e)n.isInSet(r.marks)&&this.step(new Fs(e,n));else{let o=r.marks,s,i=[];for(;s=n.isInSet(o);)i.push(new Fs(e,s)),o=s.removeFromSet(o);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(e,n=1,r){return JL(this,e,n,r),this}addMark(e,n,r){return $L(this,e,n,r),this}removeMark(e,n,r){return HL(this,e,n,r),this}clearIncompatible(e,n,r){return mb(this,e,n,r),this}}const Sp=Object.create(null);class Z{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new oE(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=D.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?D.empty:n),a==0&&Ow(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),Ow(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new H(e):xi(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?xi(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):xi(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new qt(e.node(0))}static atStart(e){return xi(e,e,0,0,1)||new qt(e)}static atEnd(e){return xi(e,e,e.content.size,e.childCount,-1)||new qt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Sp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Sp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Sp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return H.between(this.$anchor,this.$head).getBookmark()}}Z.prototype.visible=!0;class oE{constructor(e,n){this.$from=e,this.$to=n}}let Nw=!1;function Dw(t){!Nw&&!t.parent.inlineContent&&(Nw=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class H extends Z{constructor(e,n=e){Dw(e),Dw(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Z.near(r);let o=e.resolve(n.map(this.anchor));return new H(o.parent.inlineContent?o:r,r)}replace(e,n=D.empty){if(super.replace(e,n),n==D.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof H&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Kh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new H(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Z.findFrom(n,r,!0)||Z.findFrom(n,-r,!0);if(s)n=s.$head;else return Z.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Z.findFrom(e,-r,!0)||Z.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new H(e,n)}}Z.jsonID("text",H);class Kh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Kh(e.map(this.anchor),e.map(this.head))}resolve(e){return H.between(e.resolve(this.anchor),e.resolve(this.head))}}class z extends Z{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?Z.near(s):new z(s)}content(){return new D(_.from(this.node),0,0)}eq(e){return e instanceof z&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new yb(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new z(e.resolve(n.anchor))}static create(e,n){return new z(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}z.prototype.visible=!1;Z.jsonID("node",z);class yb{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Kh(r,r):new yb(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&z.isSelectable(r)?new z(n):Z.near(n)}}class qt extends Z{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=D.empty){if(n==D.empty){e.delete(0,e.doc.content.size);let r=Z.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new qt(e)}map(e){return new qt(e)}eq(e){return e instanceof qt}getBookmark(){return ij}}Z.jsonID("all",qt);const ij={map(){return this},resolve(t){return new qt(t)}};function xi(t,e,n,r,o,s=!1){if(e.inlineContent)return H.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&z.isSelectable(a))return z.create(t,n-(o<0?a.nodeSize:0))}else{let l=xi(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function Ow(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof Ze||o instanceof Ke))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,d)=>{i==null&&(i=d)}),t.setSelection(Z.near(t.doc.resolve(i),n))}const Lw=1,jw=2,Bw=4;let aj=class extends gb{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Lw)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Lw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=jw,this}ensureMarks(e){return _e.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&jw)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||_e.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(Z.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Bw,this}get scrolledIntoView(){return(this.updated&Bw)>0}};function Vw(t,e){return!e||!t?t:t.bind(e)}class Qa{constructor(e,n,r){this.name=e,this.init=Vw(n.init,r),this.apply=Vw(n.apply,r)}}const lj=[new Qa("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Qa("selection",{init(t,e){return t.selection||Z.atStart(e.doc)},apply(t){return t.selection}}),new Qa("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Qa("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Tp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=lj.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Qa(r.key,r.spec.state,r))})}}class Cs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,i)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let u=0;u<this.config.plugins.length;u++)o.push(u<i?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Cs(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new aj(this)}static create(e){let n=new Tp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Cs(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Tp(this.schema,e.plugins),r=n.fields,o=new Cs(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Tp(e.schema,e.plugins),s=new Cs(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=Gr.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=Z.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function sE(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=sE(o,e,{})),n[r]=o}return n}class ue{constructor(e){this.spec=e,this.props={},e.props&&sE(e.props,this,this.props),this.key=e.key?e.key.key:iE("plugin")}getState(e){return e[this.key]}}const Ep=Object.create(null);function iE(t){return t in Ep?t+"$"+ ++Ep[t]:(Ep[t]=0,t+"$")}class xe{constructor(e="key"){this.key=iE(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ct=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ki=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let mg=null;const Vr=function(t,e,n){let r=mg||(mg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},cj=function(){mg=null},zs=function(t,e,n,r){return n&&($w(t,e,n,r,-1)||$w(t,e,n,r,1))},dj=/^(img|br|input|textarea|hr)$/i;function $w(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:wn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Ec(t)||dj.test(t.nodeName)||t.contentEditable=="false")return!1;e=ct(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?wn(t):0}else return!1}}function wn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function uj(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=wn(t)}else if(t.parentNode&&!Ec(t))e=ct(t),t=t.parentNode;else return null}}function hj(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ec(t))e=ct(t)+1,t=t.parentNode;else return null}}function fj(t,e,n){for(let r=e==0,o=e==wn(t);r||o;){if(t==n)return!0;let s=ct(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==wn(t)}}function Ec(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Zh=function(t){return t.focusNode&&zs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function bs(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function pj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function mj(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(wn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(wn(r.startContainer),r.startOffset)}}}const gr=typeof navigator<"u"?navigator:null,Hw=typeof document<"u"?document:null,Yo=gr&&gr.userAgent||"",gg=/Edge\/(\d+)/.exec(Yo),aE=/MSIE \d/.exec(Yo),yg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yo),Kt=!!(aE||yg||gg),Lo=aE?document.documentMode:yg?+yg[1]:gg?+gg[1]:0,Gn=!Kt&&/gecko\/(\d+)/i.test(Yo);Gn&&+(/Firefox\/(\d+)/.exec(Yo)||[0,0])[1];const bg=!Kt&&/Chrome\/(\d+)/.exec(Yo),wt=!!bg,lE=bg?+bg[1]:0,Ot=!Kt&&!!gr&&/Apple Computer/.test(gr.vendor),Zi=Ot&&(/Mobile\/\w+/.test(Yo)||!!gr&&gr.maxTouchPoints>2),bn=Zi||(gr?/Mac/.test(gr.platform):!1),gj=gr?/Win/.test(gr.platform):!1,Fr=/Android \d/.test(Yo),Mc=!!Hw&&"webkitFontSmoothing"in Hw.documentElement.style,yj=Mc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function bj(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Rr(t,e){return typeof t=="number"?t:t[e]}function vj(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Fw(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;){if(i.nodeType!=1){i=Ki(i);continue}let a=i,l=a==s.body,c=l?bj(s):vj(a),d=0,u=0;if(e.top<c.top+Rr(r,"top")?u=-(c.top-e.top+Rr(o,"top")):e.bottom>c.bottom-Rr(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+Rr(o,"top")-c.top:e.bottom-c.bottom+Rr(o,"bottom")),e.left<c.left+Rr(r,"left")?d=-(c.left-e.left+Rr(o,"left")):e.right>c.right-Rr(r,"right")&&(d=e.right-c.right+Rr(o,"right")),d||u)if(l)s.defaultView.scrollBy(d,u);else{let f=a.scrollLeft,p=a.scrollTop;u&&(a.scrollTop+=u),d&&(a.scrollLeft+=d);let g=a.scrollLeft-f,y=a.scrollTop-p;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let h=l?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(h))break;i=h=="absolute"?i.offsetParent:Ki(i)}}function wj(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:cE(t.dom)}}function cE(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ki(r));return e}function xj({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;dE(n,r==0?0:r-e)}function dE(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ui=null;function kj(t){if(t.setActive)return t.setActive();if(ui)return t.focus(ui);let e=cE(t);t.focus(ui==null?{get preventScroll(){return ui={preventScroll:!0},!0}}:void 0),ui||(ui=!1,dE(e,0))}function uE(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let d=t.firstChild,u=0;d;d=d.nextSibling,u++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=Vr(d).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=i&&p.bottom>=a){i=Math.max(p.bottom,i),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=d,r=g,o=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,d.nodeType==1&&g&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=d,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?Cj(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:uE(n,o)}function Cj(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=vo(r,1);if(s.top!=s.bottom&&bb(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function bb(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Sj(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Tj(t,e,n){let{node:r,offset:o}=uE(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function Ej(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function hE(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(bb(e,c))return hE(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function Mj(t,e){let n=t.dom.ownerDocument,r,o=0,s=mj(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!bb(e,c)||(i=hE(t.dom,e,c),!i))return null}if(Ot)for(let c=i;r&&c;c=Ki(c))c.draggable&&(r=void 0);if(i=Sj(i,e),r){if(Gn&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}let c;Mc&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=Ej(t,r,o,e))}a==null&&(a=Tj(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function zw(t){return t.top<t.bottom||t.left<t.right}function vo(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(zw(r))return r}return Array.prototype.find.call(n,zw)||t.getBoundingClientRect()}const Aj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function fE(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=Mc||Gn;if(r.nodeType==3)if(i&&(Aj.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=vo(Vr(r,o,o),n);if(Gn&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=vo(Vr(r,o-1,o-1),-1);if(c.top==l.top){let d=vo(Vr(r,o,o+1),-1);if(d.top!=l.top)return La(d,d.left<c.left)}}return l}else{let l=o,c=o,d=n<0?1:-1;return n<0&&!o?(c++,d=-1):n>=0&&o==r.nodeValue.length?(l--,d=1):n<0?l--:c++,La(vo(Vr(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==wn(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return Mp(l.getBoundingClientRect(),!1)}if(s==null&&o<wn(r)){let l=r.childNodes[o];if(l.nodeType==1)return Mp(l.getBoundingClientRect(),!0)}return Mp(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==wn(r))){let l=r.childNodes[o-1],c=l.nodeType==3?Vr(l,wn(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return La(vo(c,1),!1)}if(s==null&&o<wn(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Vr(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return La(vo(c,-1),!0)}return La(vo(r.nodeType==3?Vr(r):r,-n),n>=0)}function La(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Mp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function pE(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function _j(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return pE(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=fE(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Vr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?i.top-d.top>(d.bottom-i.top)*2:d.bottom-i.bottom>(i.bottom-d.top)*2))return!1}}return!0})}const Pj=/[\u0590-\u08ac]/;function Rj(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return a?!Pj.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:pE(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:u}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),y=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(d,u),l&&(l!=d||c!=u)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),y}):r.pos==r.start()||r.pos==r.end()}let Uw=null,Ww=null,Gw=!1;function Ij(t,e,n){return Uw==e&&Ww==n?Gw:(Uw=e,Ww=n,Gw=n=="up"||n=="down"?_j(t,e,n):Rj(t,e,n))}const Tn=0,qw=1,Ss=2,yr=3;class Ac{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Tn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>ct(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof gE){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof mE&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?ct(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?ct(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let d=i+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=i;for(let u=a;u>0;u--){let h=this.children[u-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=ct(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=ct(u.dom);break}n+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],y=p+g.size;if(s>p&&i<y)return g.setSelection(e-p-g.border,n-p-g.border,r,o);p=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),u=!1;if((Gn||Ot)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(u=!!(p&&f.nodeValue[p-1]==`
`),u&&p==f.nodeValue.length)for(let g=f,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:ct(y)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=f.childNodes[p-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Gn&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let f=d.focusNode.childNodes[d.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||u&&Ot)&&zs(a.node,a.offset,d.anchorNode,d.anchorOffset)&&zs(l.node,l.offset,d.focusNode,d.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?Ss:qw,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=yr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ss:yr}r=i}this.dirty=Ss}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ss:qw;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class mE extends Ac{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Tn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Nj extends Ac{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Us extends Ac{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=so.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Us(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&yr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=yr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Tn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Tn}}slice(e,n,r){let o=Us.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=wg(s,n,i,r)),e>0&&(s=wg(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class jo extends Ac{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),d=c&&c.dom,u=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=so.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!u&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=vE(d,r,n),c?l=new Dj(e,n,r,o,d,u||null,h,c,s,i+1):n.isText?new Jh(e,n,r,o,d,h,s):new jo(e,n,r,o,d,u||null,h,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_.empty)}return e}matchesNode(e,n,r){return this.dirty==Tn&&e.eq(this.node)&&wu(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Lj(this,i&&i.node,e);Vj(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&l.syncToMarks(d==this.node.childCount?_e.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,o)},(c,d,u,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,d,u,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,u,f,e)||l.updateNextNode(c,d,u,e,h,o)||l.addNode(c,d,u,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ss)&&(i&&this.protectLocalComposition(e,i),yE(this.contentDOM,this.children,e),Zi&&$j(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof H)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=Hj(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new Nj(this,s,n,o);e.input.compositionNodes.push(i),this.children=wg(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==yr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Tn}updateOuterDeco(e){if(wu(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=bE(this.dom,this.nodeDOM,vg(this.outerDeco,this.node,n),vg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Kw(t,e,n,r,o){vE(r,e,t);let s=new jo(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class Jh extends jo{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==yr||this.dirty!=Tn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Tn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Tn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new Jh(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=yr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class gE extends Ac{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Tn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Dj extends jo{constructor(e,n,r,o,s,i,a,l,c,d){super(e,n,r,o,s,i,a,c,d),this.spec=l}update(e,n,r,o){if(this.dirty==yr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function yE(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=Zw(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof Us){let l=r?r.previousSibling:t.lastChild;yE(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Zw(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const cl=function(t){t&&(this.nodeName=t)};cl.prototype=Object.create(null);const Ts=[new cl];function vg(t,e,n){if(t.length==0)return Ts;let r=n?Ts[0]:new cl,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new cl(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new cl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function bE(t,e,n,r){if(n==Ts&&r==Ts)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Ts[0]),o=l}Oj(o,a||Ts[0],i)}return o}function Oj(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function vE(t,e,n){return bE(t,t,Ts,vg(e,n,t.nodeType!=1))}function wu(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Zw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Lj{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=jj(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Tn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Us.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==yr&&i.dom==i.contentDOM&&(i.dirty=Ss),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof jo){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,u,h=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=yr&&wu(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(u=this.recreateWrapper(l,e,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=Ss,u.updateChildren(o,i+1),u.dirty=Tn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!wu(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=jo.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=jo.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new mE(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Us;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Jh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ot||wt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new gE(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function jj(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Us)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function Bj(t,e){return t.type.side-e.type.side}function Vj(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,o,e.forChild(s,d),c),s+=d.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let d,u;for(;i<o.length&&o[i].to==s;){let y=o[i++];y.widget&&(d?(u||(u=[d])).push(y):d=y)}if(d)if(u){u.sort(Bj);for(let y=0;y<u.length;y++)n(u[y],c,!!l)}else n(d,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let p=s+h.nodeSize;if(h.isText){let y=p;i<o.length&&o[i].from<y&&(y=o[i].from);for(let v=0;v<a.length;v++)a[v].to<y&&(y=a[v].to);y<p&&(l=h.cut(y-s),h=h.cut(0,y-s),p=y,f=-1)}else for(;i<o.length&&o[i].to<p;)i++;let g=h.isInline&&!h.isLeaf?a.filter(y=>!y.inline):a.slice();r(h,g,e.forChild(s,h),f),s=p}}function $j(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Hj(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function wg(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,d=a+=l.size;c>=n||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),d>n&&s.push(l.slice(n-c,l.size,r)))}return s}function vb(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(Zh(n)){for(l=i;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&z.isSelectable(u)&&o.parent&&!(u.isInline&&fj(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new z(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let u=i,h=i;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);u=Math.min(u,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[l,i]=h==t.state.selection.anchor?[h,u]:[u,h],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=wb(t,d,a,u)}return c}function wE(t){return t.editable?t.hasFocus():kE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Zr(t,e=!1){let n=t.state.selection;if(xE(t,n),!!wE(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&wt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&zs(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)zj(t);else{let{anchor:r,head:o}=n,s,i;Jw&&!(n instanceof H)&&(n.$from.parent.inlineContent||(s=Yw(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=Yw(t,n.to))),t.docView.setSelection(r,o,t,e),Jw&&(s&&Xw(s),i&&Xw(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Fj(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Jw=Ot||wt&&lE<63;function Yw(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ot&&o&&o.contentEditable=="false")return Ap(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return Ap(o);if(s)return Ap(s)}}function Ap(t){return t.contentEditable="true",Ot&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Xw(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Fj(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!wE(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function zj(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,ct(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&Kt&&Lo<=11&&(r.disabled=!0,r.disabled=!1)}function xE(t,e){if(e instanceof z){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Qw(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Qw(t)}function Qw(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function wb(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||H.between(e,n,r)}function ex(t){return t.editable&&!t.hasFocus()?!1:kE(t)}function kE(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Uj(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return zs(e.node,e.offset,n.anchorNode,n.anchorOffset)}function xg(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Z.findFrom(s,e)}function xo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function tx(t,e,n){let r=t.state.selection;if(r instanceof H)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return xo(t,new H(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=xg(t.state,e);return o&&o instanceof z?xo(t,o):!1}else if(!(bn&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?z.isSelectable(s)?xo(t,new z(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Mc?xo(t,new H(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof z&&r.node.isInline)return xo(t,new H(e>0?r.$to:r.$from));{let o=xg(t.state,e);return o?xo(t,o):!1}}}function xu(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function dl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function hi(t,e){return e<0?Wj(t):Gj(t)}function Wj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(Gn&&n.nodeType==1&&r<xu(n)&&dl(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(dl(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(CE(n))break;{let a=n.previousSibling;for(;a&&dl(a,-1);)o=n.parentNode,s=ct(a),a=a.previousSibling;if(a)n=a,r=xu(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?kg(t,n,r):o&&kg(t,o,s)}function Gj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=xu(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(dl(a,1))s=n,i=++r;else break}else{if(CE(n))break;{let a=n.nextSibling;for(;a&&dl(a,1);)s=a.parentNode,i=ct(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=xu(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&kg(t,s,i)}function CE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function qj(t,e){for(;t&&e==t.childNodes.length&&!Ec(t);)e=ct(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Kj(t,e){for(;t&&!e&&!Ec(t);)e=ct(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function kg(t,e,n){if(e.nodeType!=3){let s,i;(i=qj(e,n))?(e=i,n=0):(s=Kj(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Zh(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Zr(t)},50)}function nx(t,e){let n=t.state.doc.resolve(e);if(!(wt||gj)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function rx(t,e,n){let r=t.state.selection;if(r instanceof H&&!r.empty||n.indexOf("s")>-1||bn&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=xg(t.state,e);if(i&&i instanceof z)return xo(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof qt?Z.near(i,e):Z.findFrom(i,e);return a?xo(t,a):!1}return!1}function ox(t,e){if(!(t.state.selection instanceof H))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function sx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Zj(t){if(!Ot||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;sx(t,r,"true"),setTimeout(()=>sx(t,r,"false"),20)}return!1}function Jj(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Yj(t,e){let n=e.keyCode,r=Jj(e);if(n==8||bn&&n==72&&r=="c")return ox(t,-1)||hi(t,-1);if(n==46&&!e.shiftKey||bn&&n==68&&r=="c")return ox(t,1)||hi(t,1);if(n==13||n==27)return!0;if(n==37||bn&&n==66&&r=="c"){let o=n==37?nx(t,t.state.selection.from)=="ltr"?-1:1:-1;return tx(t,o,r)||hi(t,o)}else if(n==39||bn&&n==70&&r=="c"){let o=n==39?nx(t,t.state.selection.from)=="ltr"?1:-1:1;return tx(t,o,r)||hi(t,o)}else{if(n==38||bn&&n==80&&r=="c")return rx(t,-1,r)||hi(t,-1);if(n==40||bn&&n==78&&r=="c")return Zj(t)||rx(t,1,r)||hi(t,1);if(r==(bn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function xb(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let i=t.someProp("clipboardSerializer")||so.fromSchema(t.state.schema),a=_E(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=AE[c.nodeName.toLowerCase()]);){for(let f=d.length-1;f>=0;f--){let p=a.createElement(d[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${u?` -${u}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function SE(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new D(_.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):D.empty;let u=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(u)a=u;else{let h=o.marks(),{schema:f}=t.state,p=so.fromSchema(f);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=i.appendChild(document.createElement("p"));g&&y.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",u=>{n=u(n,t)}),i=t9(n),Mc&&n9(i);let c=i&&i.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||qr.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||d),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!Xj.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)a=r9(ix(a,+d[1],+d[2]),d[4]);else if(a=D.maxOpen(Qj(a.content,o),!0),a.openStart||a.openEnd){let u=0,h=0;for(let f=a.content.firstChild;u<a.openStart&&!f.type.spec.isolating;u++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=ix(a,u,h)}return t.someProp("transformPasted",u=>{a=u(a,t)}),a}const Xj=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Qj(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&EE(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=ME(i[i.length-1],s.length));let d=TE(a,l);i.push(d),o=o.matchType(d.type),s=l}}),i)return _.from(i)}return t}function TE(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,_.from(t));return t}function EE(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=EE(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(_.from(TE(n,t,o+1))))}}function ME(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,ME(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(_.empty,!0);return t.copy(n.append(r))}function Cg(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=Cg(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(_.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function ix(t,e,n){return e<t.openStart&&(t=new D(Cg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new D(Cg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const AE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ax=null;function _E(){return ax||(ax=document.implementation.createHTMLDocument("title"))}let _p=null;function e9(t){let e=window.trustedTypes;return e?(_p||(_p=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_p.createHTML(t)):t}function t9(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=_E().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&AE[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=e9(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function n9(t){let e=t.querySelectorAll(wt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent=="Â "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function r9(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=_.from(l.create(r[a+1],o)),s++,i++}return new D(o,s,i)}const Lt={},jt={},o9={touchstart:!0,touchmove:!0};class s9{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function i9(t){for(let e in Lt){let n=Lt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{l9(t,r)&&!kb(t,r)&&(t.editable||!(r.type in jt))&&n(t,r)},o9[e]?{passive:!0}:void 0)}Ot&&t.dom.addEventListener("input",()=>null),Sg(t)}function Ro(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function a9(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Sg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>kb(t,r))})}function kb(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function l9(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function c9(t,e){!kb(t,e)&&Lt[e.type]&&(t.editable||!(e.type in jt))&&Lt[e.type](t,e)}jt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!RE(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Fr&&wt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Zi&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,bs(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Yj(t,n)?n.preventDefault():Ro(t,"key")};jt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};jt.keypress=(t,e)=>{let n=e;if(RE(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||bn&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof H)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function Yh(t){return{left:t.clientX,top:t.clientY}}function d9(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Cb(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function Li(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function u9(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&z.isSelectable(r)?(Li(t,new z(n)),!0):!1}function h9(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof z&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(z.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(Li(t,z.create(t.state.doc,o)),!0):!1}function f9(t,e,n,r,o){return Cb(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?h9(t,n):u9(t,n))}function p9(t,e,n,r){return Cb(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function m9(t,e,n,r){return Cb(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||g9(t,n,r)}function g9(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Li(t,H.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)Li(t,H.create(r,a+1,a+1+i.content.size));else if(z.isSelectable(i))Li(t,z.create(r,a));else continue;return!0}}function Sb(t){return ku(t)}const PE=bn?"metaKey":"ctrlKey";Lt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Sb(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&d9(n,t.input.lastClick)&&!n[PE]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s,button:n.button};let i=t.posAtCoords(Yh(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new y9(t,i,n,!!r)):(s=="doubleClick"?p9:m9)(t,i.pos,i.inside,n)?n.preventDefault():Ro(t,"pointer"))};class y9{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[PE],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,i=d.depth?d.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof z&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ro(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Zr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Yh(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ro(this.view,"pointer"):f9(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ot&&this.mightDrag&&!this.mightDrag.node.isAtom||wt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Li(this.view,Z.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Ro(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ro(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Lt.touchstart=t=>{t.input.lastTouch=Date.now(),Sb(t),Ro(t,"pointer")};Lt.touchmove=t=>{t.input.lastTouch=Date.now(),Ro(t,"pointer")};Lt.contextmenu=t=>Sb(t);function RE(t,e){return t.composing?!0:Ot&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const b9=Fr?5e3:-1;jt.compositionstart=jt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof H&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),ku(t,!0),t.markCursor=null;else if(ku(t,!e.selection.empty),Gn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}IE(t,b9)};jt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,IE(t,20))};function IE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ku(t),e))}function NE(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=w9());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function v9(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=uj(e.focusNode,e.focusOffset),r=hj(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function w9(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ku(t,e=!1){if(!(Fr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),NE(t),e||t.docView&&t.docView.dirty){let n=vb(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function x9(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const jl=Kt&&Lo<15||Zi&&yj<604;Lt.copy=jt.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=jl?null:n.clipboardData,i=r.content(),{dom:a,text:l}=xb(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):x9(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function k9(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function C9(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Bl(t,r.value,null,o,e):Bl(t,r.textContent,r.innerHTML,o,e)},50)}function Bl(t,e,n,r,o){let s=SE(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||D.empty)))return!0;if(!s)return!1;let i=k9(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function DE(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}jt.paste=(t,e)=>{let n=e;if(t.composing&&!Fr)return;let r=jl?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Bl(t,DE(r),r.getData("text/html"),o,n)?n.preventDefault():C9(t,n)};class OE{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const S9=bn?"altKey":"ctrlKey";function LE(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[S9]}Lt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(Yh(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof z?o.to-1:o.to))){if(r&&r.mightDrag)i=z.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(i=z.create(t.state.doc,u.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:d}=xb(t,a);(!n.dataTransfer.files.length||!wt||lE>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(jl?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",jl||n.dataTransfer.setData("text/plain",c),t.dragging=new OE(d,LE(t,n),i)};Lt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};jt.dragover=jt.dragenter=(t,e)=>e.preventDefault();jt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Yh(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t)}):i=SE(t,DE(n.dataTransfer),jl?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&LE(t,n));if(t.someProp("handleDrop",p=>p(t,n,i||D.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?QT(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(u?c.replaceRangeWith(d,d,i.content.firstChild):c.replaceRange(d,d,i),c.doc.eq(h))return;let f=c.doc.resolve(d);if(u&&z.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new z(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,y,v,x)=>p=x),c.setSelection(wb(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Lt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Zr(t)},20))};Lt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Lt.beforeinput=(t,e)=>{if(wt&&Fr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,bs(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in jt)Lt[t]=jt[t];function Vl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Cu{constructor(e,n){this.toDOM=e,this.spec=n||Ns,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new Te(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Cu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Vl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Bo{constructor(e,n){this.attrs=e,this.spec=n||Ns}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new Te(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Bo&&Vl(this.attrs,e.attrs)&&Vl(this.spec,e.spec)}static is(e){return e.type instanceof Bo}destroy(){}}class Tb{constructor(e,n){this.attrs=e,this.spec=n||Ns}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new Te(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof Tb&&Vl(this.attrs,e.attrs)&&Vl(this.spec,e.spec)}destroy(){}}class Te{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Te(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Te(e,e,new Cu(n,r))}static inline(e,n,r,o){return new Te(e,n,new Bo(r,o))}static node(e,n,r,o){return new Te(e,n,new Tb(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Bo}get widget(){return this.type instanceof Cu}}const ki=[],Ns={};class ge{constructor(e,n){this.local=e.length?e:ki,this.children=n.length?n:ki}static create(e,n){return n.length?Su(n,e,0,Ns):yt}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==yt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ns)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?T9(this.children,i||[],e,n,r,o,s):i?new ge(i.sort(Ds),ki):yt}add(e,n){return n.length?this==yt?ge.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,d;if(d=BE(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,d,c+1):o.splice(s,0,l,l+a.nodeSize,Su(d,a,c+1,Ns)),s+=3}});let i=jE(s?VE(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new ge(i.length?this.local.concat(i).sort(Ds):this.local,o||this.children)}remove(e){return e.length==0||this==yt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>a&&u.to<l&&(e[d]=null,(i||(i=[])).push(u));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=yt?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new ge(o,r):yt}forChild(e,n){if(this==yt)return this;if(n.isLeaf)return ge.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof Bo){let c=Math.max(s,l.from)-s,d=Math.min(i,l.to)-s;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){let a=new ge(o.sort(Ds),ki);return r?new To([a,r]):a}return r||yt}eq(e){if(this==e)return!0;if(!(e instanceof ge)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Eb(this.localsInner(e))}localsInner(e){if(this==yt)return ki;if(e.inlineContent||!this.local.some(Bo.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Bo||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ge.empty=new ge([],[]);ge.removeOverlap=Eb;const yt=ge.empty;class To{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Ns));return To.from(r)}forChild(e,n){if(n.isLeaf)return ge.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=yt&&(s instanceof To?r=r.concat(s.members):r.push(s))}return To.from(r)}eq(e){if(!(e instanceof To)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?Eb(r?n:n.sort(Ds)):ki}static from(e){switch(e.length){case 0:return yt;case 1:return e[0];default:return new To(e.every(n=>n instanceof ge)?e:e.reduce((n,r)=>n.concat(r instanceof ge?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function T9(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,d=s;c<n.maps.length;c++){let u=0;n.maps[c].forEach((h,f,p,g)=>{let y=g-p-(f-h);for(let v=0;v<a.length;v+=3){let x=a[v+1];if(x<0||h>x+d-u)continue;let w=a[v]+d-u;f>=w?a[v+1]=h<=w?-2:-1:h>=d&&y&&(a[v]+=y,a[v+1]+=y)}u+=y}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+s),u=d-o;if(u<0||u>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),f=h-o,{index:p,offset:g}=r.content.findIndex(u),y=r.maybeChild(p);if(y&&g==u&&g+y.nodeSize==f){let v=a[c+2].mapInner(n,y,d+1,t[c]+s+1,i);v!=yt?(a[c]=u,a[c+1]=f,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=E9(a,t,e,n,o,s,i),d=Su(c,r,0,i);e=d.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,h=0;u<d.children.length;u+=3){let f=d.children[u];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,d.children[u],d.children[u+1],d.children[u+2])}}return new ge(e.sort(Ds),a)}function jE(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Te(o.from+e,o.to+e,o.type))}return n}function E9(t,e,n,r,o,s,i){function a(l,c){for(let d=0;d<l.local.length;d++){let u=l.local[d].map(r,o,c);u?n.push(u):i.onRemove&&i.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function BE(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function VE(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Su(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=BE(t,a,l+n);if(c){s=!0;let d=Su(c,a,n+l+1,r);d!=yt&&o.push(l,l+a.nodeSize,d)}});let i=jE(s?VE(t):t,-n).sort(Ds);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new ge(i,o):yt}function Ds(t,e){return t.from-e.from||t.to-e.to}function Eb(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),lx(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),lx(e,o,r.copy(s.from,r.to)));break}}}return e}function lx(t,e,n){for(;e<t.length&&Ds(n,t[e])>0;)e++;t.splice(e,0,n)}function Pp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=yt&&e.push(r)}),t.cursorWrapper&&e.push(ge.create(t.state.doc,[t.cursorWrapper.deco])),To.from(e)}const M9={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},A9=Kt&&Lo<=11;class _9{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class P9{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new _9,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Kt&&Lo<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),A9&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,M9)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ex(this.view)){if(this.suppressingSelectionUpdates)return Zr(this.view);if(Kt&&Lo<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&zs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Ki(s))n.add(s);for(let s=e.anchorNode;s;s=Ki(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ex(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let u=this.registerMutation(n[d],l);u&&(s=s<0?u.from:Math.min(u.from,s),i=i<0?u.to:Math.max(u.to,i),u.typeOver&&(a=!0))}if(Gn&&l.length){let d=l.filter(u=>u.nodeName=="BR");if(d.length==2){let[u,h]=d;u.parentNode&&u.parentNode.parentNode==h.parentNode?h.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let h of d){let f=h.parentNode;f&&f.nodeName=="LI"&&(!u||N9(e,u)!=f)&&h.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Zh(r)&&(c=vb(e))&&c.eq(Z.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Zr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),R9(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Zr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let u=e.addedNodes[d];n.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(Kt&&Lo<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:h}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let i=o&&o.parentNode==e.target?ct(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?ct(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cx=new WeakMap,dx=!1;function R9(t){if(!cx.has(t)&&(cx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Gn,dx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),dx=!0}}function ux(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return zs(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function I9(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return ux(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ux(t,n):null}function N9(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function D9(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],Zh(l)||c.push({node:l.focusNode,offset:l.focusOffset})),wt&&t.input.lastKeyCode===8)for(let y=s;y>o;y--){let v=r.childNodes[y-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){s=y;break}if(!x||x.size)break}let u=t.state.doc,h=t.someProp("domParser")||qr.fromSchema(t.state.schema),f=u.resolve(i),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:o,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:O9,context:f});if(c&&c[0].pos!=null){let y=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=y),p={anchor:y+i,head:v+i}}return{doc:g,sel:p,from:i,to:a}}function O9(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ot&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ot&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const L9=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function j9(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let M=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,P=vb(t,M);if(P&&!t.state.selection.eq(P)){if(wt&&Fr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",$=>$(t,bs(13,"Enter"))))return;let B=t.state.tr.setSelection(P);M=="pointer"?B.setMeta("pointer",!0):M=="key"&&B.scrollIntoView(),s&&B.setMeta("composition",s),t.dispatch(B)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=D9(t,e,n),d=t.state.doc,u=d.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=$9(u.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(Zi&&t.input.lastIOSEnter>Date.now()-225||Fr)&&o.some(M=>M.nodeType==1&&!L9.test(M.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",M=>M(t,bs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof H&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let M=hx(t,t.state.doc,c.sel);if(M&&!M.eq(t.state.selection)){let P=t.state.tr.setSelection(M);s&&P.setMeta("composition",s),t.dispatch(P)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof H&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Kt&&Lo<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" Â "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),y=c.doc.resolveNoCache(p.endB-c.from),v=d.resolve(p.start),x=g.sameParent(y)&&g.parent.inlineContent&&v.end()>=p.endA,w;if((Zi&&t.input.lastIOSEnter>Date.now()-225&&(!x||o.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(g.pos,y.pos,"",""))&&(w=Z.findFrom(c.doc.resolve(g.pos+1),1,!0))&&w.head>g.pos)&&t.someProp("handleKeyDown",M=>M(t,bs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&V9(d,p.start,p.endA,g,y)&&t.someProp("handleKeyDown",M=>M(t,bs(8,"Backspace")))){Fr&&wt&&t.domObserver.suppressSelectionUpdates();return}wt&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Fr&&!x&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,y=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(M){return M(t,bs(13,"Enter"))})},20));let C=p.start,k=p.endA,S,T,E;if(x){if(g.pos==y.pos)Kt&&Lo<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Zr(t),20)),S=t.state.tr.delete(C,k),T=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(E=B9(g.parent.content.cut(g.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start()))))S=t.state.tr,E.type=="add"?S.addMark(C,k,E.mark):S.removeMark(C,k,E.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let M=g.parent.textBetween(g.parentOffset,y.parentOffset);if(t.someProp("handleTextInput",P=>P(t,C,k,M)))return;S=t.state.tr.insertText(M,C,k)}}if(S||(S=t.state.tr.replace(C,k,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let M=hx(t,S.doc,c.sel);M&&!(wt&&t.composing&&M.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==C||M.head==S.mapping.map(k)-1)||Kt&&M.empty&&M.head==C)&&S.setSelection(M)}T&&S.ensureMarks(T),s&&S.setMeta("composition",s),t.dispatch(S.scrollIntoView())}function hx(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:wb(t,e.resolve(n.anchor),e.resolve(n.head))}function B9(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=d=>d.mark(a.addToSet(d.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(_.from(c).eq(t))return{mark:a,type:i}}function V9(t,e,n,r,o){if(n-e<=o.pos-r.pos||Rp(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(Rp(s,!0,!0));return!i.parent.isTextblock||i.pos>n||Rp(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function Rp(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function $9(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<e.size&&fx(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&fx(t.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function fx(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class $E{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new s9,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(bx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=gx(this),mx(this),this.nodeViews=yx(this),this.docView=Kw(this.state.doc,px(this),Pp(this),this.dom,this),this.domObserver=new P9(this,(r,o,s,i)=>j9(this,r,o,s,i)),this.domObserver.start(),i9(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Sg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(bx),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(NE(this),i=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=yx(this);F9(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Sg(this),this.editable=gx(this),mx(this);let l=Pp(this),c=px(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(o.selection))&&(i=!0);let h=d=="preserve"&&i&&this.dom.style.overflowAnchor==null&&wj(this);if(i){this.domObserver.stop();let f=u&&(Kt||wt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&H9(o.selection,e.selection);if(u){let p=wt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=v9(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Kw(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Uj(this))?Zr(this,f):(xE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&xj(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof z){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Fw(this,n.getBoundingClientRect(),e)}else Fw(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new OE(e.slice,e.move,o<0?void 0:z.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(Kt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&kj(this.dom),Zr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Mj(this,e)}coordsAtPos(e,n=1){return fE(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return Ij(this,n||this.state,e)}pasteHTML(e,n){return Bl(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Bl(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return xb(this,e)}destroy(){this.docView&&(a9(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Pp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,cj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return c9(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Ot&&this.root.nodeType===11&&pj(this.dom.ownerDocument)==this.dom&&I9(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function px(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Te.node(0,t.state.doc.content.size,e)]}function mx(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Te.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function gx(t){return!t.someProp("editable",e=>e(t.state)===!1)}function H9(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function yx(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function F9(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function bx(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const z9=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),U9=typeof navigator<"u"&&/Win/.test(navigator.platform);function W9(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))z9?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function G9(t){let e=Object.create(null);for(let n in t)e[W9(n)]=t[n];return e}function Ip(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function q9(t){return new ue({props:{handleKeyDown:Mb(t)}})}function Mb(t){let e=G9(t);return function(n,r){let o=MN(r),s,i=e[Ip(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[Ip(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(U9&&r.ctrlKey&&r.altKey)&&(s=AN[r.keyCode])&&s!=o){let a=e[Ip(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const Ab=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function HE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const FE=(t,e,n)=>{let r=HE(t,n);if(!r)return!1;let o=_b(r);if(!o){let i=r.blockRange(),a=i&&da(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(YE(t,o,e,-1))return!0;if(r.parent.content.size==0&&(Ji(s,"end")||z.isSelectable(s)))for(let i=r.depth;;i--){let a=qh(t.doc,r.before(i),r.after(i),D.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ji(s,"end")?Z.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):z.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},K9=(t,e,n)=>{let r=HE(t,n);if(!r)return!1;let o=_b(r);return o?zE(t,o,e):!1},Z9=(t,e,n)=>{let r=WE(t,n);if(!r)return!1;let o=Pb(r);return o?zE(t,o,e):!1};function zE(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=qh(t.doc,s,l,D.empty);if(!c||c.from!=s||c instanceof Ze&&c.slice.size>=l-s)return!1;if(n){let d=t.tr.step(c);d.setSelection(H.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Ji(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const UE=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=_b(r)}let i=s&&s.nodeBefore;return!i||!z.isSelectable(i)?!1:(e&&e(t.tr.setSelection(z.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function _b(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function WE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const GE=(t,e,n)=>{let r=WE(t,n);if(!r)return!1;let o=Pb(r);if(!o)return!1;let s=o.nodeAfter;if(YE(t,o,e,1))return!0;if(r.parent.content.size==0&&(Ji(s,"start")||z.isSelectable(s))){let i=qh(t.doc,r.before(),r.after(),D.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(Ji(s,"start")?Z.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):z.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},qE=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Pb(r)}let i=s&&s.nodeAfter;return!i||!z.isSelectable(i)?!1:(e&&e(t.tr.setSelection(z.create(t.doc,s.pos)).scrollIntoView()),!0)};function Pb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const J9=(t,e)=>{let n=t.selection,r=n instanceof z,o;if(r){if(n.node.isTextblock||!ri(t.doc,n.from))return!1;o=n.from}else if(o=Gh(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(z.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Y9=(t,e)=>{let n=t.selection,r;if(n instanceof z){if(n.node.isTextblock||!ri(t.doc,n.to))return!1;r=n.to}else if(r=Gh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},X9=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&da(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},KE=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Rb(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Q9=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=Rb(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Z.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},ZE=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof qt||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=Rb(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(H.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},JE=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Kr(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&da(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function eB(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof z&&e.selection.node.isBlock)return!r.parentOffset||!Kr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],i,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=Rb(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(l&&a?{type:a}:null),i=f;break}else{if(f==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof H||e.selection instanceof qt)&&d.deleteSelection();let u=d.mapping.map(r.pos),h=Kr(d.doc,u,s.length,s);if(h||(s[0]=a?{type:a}:null,h=Kr(d.doc,u,s.length,s)),!h)return!1;if(d.split(u,s.length,s),!l&&c&&r.node(i).type!=a){let f=d.mapping.map(r.before(i)),p=d.doc.resolve(f);a&&r.node(i-1).canReplaceWith(p.index(),p.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(i)),a)}return n&&n(d.scrollIntoView()),!0}}const tB=eB(),nB=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(z.create(t.doc,o))),!0)};function rB(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||ri(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function YE(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&rB(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=_.empty;for(let v=i.length-1;v>=0;v--)p=_.from(i[v].create(null,p));p=_.from(o.copy(p));let g=t.tr.step(new Ke(e.pos-1,f,e.pos,f,new D(p,1,0),i.length,!0)),y=g.doc.resolve(f+2*i.length);y.nodeAfter&&y.nodeAfter.type==o.type&&ri(g.doc,y.pos)&&g.join(y.pos),n(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&l?null:Z.findFrom(e,1),u=d&&d.$from.blockRange(d.$to),h=u&&da(u);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(u,h).scrollIntoView()),!0;if(c&&Ji(s,"start",!0)&&Ji(o,"end")){let f=o,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let v=_.empty;for(let w=p.length-1;w>=0;w--)v=_.from(p[w].copy(v));let x=t.tr.step(new Ke(e.pos-p.length,e.pos+s.nodeSize,e.pos+y,e.pos+s.nodeSize-y,new D(v,p.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function XE(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(H.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const oB=XE(-1),sB=XE(1);function iB(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&ZT(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function vx(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let d=n.doc.resolve(c),u=d.index();o=d.parent.canReplaceWith(u,u+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function Ib(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}Ib(Ab,FE,UE);Ib(Ab,GE,qE);Ib(KE,ZE,JE,tB);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function aB(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return lB(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function lB(t,e,n,r=null){let o=!1,s=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);s=new bu(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new bu(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=ZT(s,n,r,e);return a?(t&&cB(t,e,a,o,n),!0):!1}function cB(t,e,n,r,o){let s=_.empty;for(let d=n.length-1;d>=0;d--)s=_.from(n[d].type.create(n[d].attrs,s));t.step(new Ke(e.start-(r?2:0),e.end,e.start,e.end,new D(s,0,0),n.length,!0));let i=0;for(let d=0;d<n.length;d++)n[d].type==o&&(i=d+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,h=!0;d<u;d++,h=!1)!h&&Kr(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function dB(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?uB(e,n,t,s):hB(e,n,s):!0:!1}}function uB(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new Ke(s-1,i,s,i,new D(_.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new bu(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=da(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(s,-1)-1);return ri(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function hB(t,e,n){let r=t.tr,o=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=o.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,i.content.append(l?_.empty:_.from(o))))return!1;let u=s.pos,h=u+i.nodeSize;return r.step(new Ke(u-(a?1:0),h+(l?1:0),u+1,h-1,new D((a?_.empty:_.from(o.copy(_.empty))).append(l?_.empty:_.from(o.copy(_.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function fB(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=_.from(c?t.create():null),u=new D(_.from(t.create(null,_.from(a.type.create(null,d)))),c?3:1,0),h=s.start,f=s.end;n(e.tr.step(new Ke(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}function Xh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class Qh{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...d)=>{const u=l(...d)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),u={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...g)=>{const y=this.buildProps(c,n),v=f(...g)(y);return a.push(v),u}])),run:d};return u}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a={tr:e,editor:o,view:i,state:Xh({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}}class pB{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function F(t,e,n){return t.config[e]===void 0&&t.parent?F(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?F(t.parent,e,n):null}):t.config[e]}function ef(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function QE(t){const e=[],{nodeExtensions:n,markExtensions:r}=ef(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=F(i,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([h,f])=>{e.push({type:u,name:h,attribute:{...s,...f}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=F(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const h={...s,...u};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:d,attribute:h})})}),e}function nt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function an(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),a.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=s}),r},{})}function Tu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>an(n,r),{})}function eM(t){return typeof t=="function"}function me(t,e=void 0,...n){return eM(t)?e?t.bind(e)(...n):t(...n):t}function mB(t={}){return Object.keys(t).length===0&&t.constructor===Object}function gB(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function wx(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):gB(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function xx(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&mB(n)?!1:n!=null))}function tM(t,e){var n;const r=QE(t),{nodeExtensions:o,markExtensions:s}=ef(t),i=(n=o.find(c=>F(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const d=r.filter(v=>v.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,x)=>{const w=F(x,"extendNodeSchema",u);return{...v,...w?w(c):{}}},{}),f=xx({...h,content:me(F(c,"content",u)),marks:me(F(c,"marks",u)),group:me(F(c,"group",u)),inline:me(F(c,"inline",u)),atom:me(F(c,"atom",u)),selectable:me(F(c,"selectable",u)),draggable:me(F(c,"draggable",u)),code:me(F(c,"code",u)),whitespace:me(F(c,"whitespace",u)),linebreakReplacement:me(F(c,"linebreakReplacement",u)),defining:me(F(c,"defining",u)),isolating:me(F(c,"isolating",u)),attrs:Object.fromEntries(d.map(v=>{var x;return[v.name,{default:(x=v==null?void 0:v.attribute)===null||x===void 0?void 0:x.default}]}))}),p=me(F(c,"parseHTML",u));p&&(f.parseDOM=p.map(v=>wx(v,d)));const g=F(c,"renderHTML",u);g&&(f.toDOM=v=>g({node:v,HTMLAttributes:Tu(v,d)}));const y=F(c,"renderText",u);return y&&(f.toText=y),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const d=r.filter(y=>y.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,v)=>{const x=F(v,"extendMarkSchema",u);return{...y,...x?x(c):{}}},{}),f=xx({...h,inclusive:me(F(c,"inclusive",u)),excludes:me(F(c,"excludes",u)),group:me(F(c,"group",u)),spanning:me(F(c,"spanning",u)),code:me(F(c,"code",u)),attrs:Object.fromEntries(d.map(y=>{var v;return[y.name,{default:(v=y==null?void 0:y.attribute)===null||v===void 0?void 0:v.default}]}))}),p=me(F(c,"parseHTML",u));p&&(f.parseDOM=p.map(y=>wx(y,d)));const g=F(c,"renderHTML",u);return g&&(f.toDOM=y=>g({mark:y,HTMLAttributes:Tu(y,d)})),[c.name,f]}));return new HT({topNode:i,nodes:a,marks:l})}function Np(t,e){return e.nodes[t]||e.marks[t]||null}function kx(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Nb(t,e){const n=so.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const yB=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const d=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-s))}),n};function Db(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class $o{constructor(e){this.find=e.find,this.handler=e.handler}}const bB=(t,e)=>{if(Db(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function dd(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let d=!1;const u=yB(c)+s;return i.forEach(h=>{if(d)return;const f=bB(u,h.find);if(!f)return;const p=l.state.tr,g=Xh({state:l.state,transaction:p}),y={from:r-(f[0].length-s.length),to:o},{commands:v,chain:x,can:w}=new Qh({editor:n,state:g});h.handler({state:g,range:y,match:f,commands:v,chain:x,can:w})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:o,text:s}),l.dispatch(p),d=!0)}),d}function vB(t){const{editor:e,rules:n}=t,r=new ue({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=Nb(_.from(d),i.schema);const{from:u}=l,h=u+d.length;dd({editor:e,from:u,to:h,text:d,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return dd({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&dd({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?dd({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function wB(t){return Object.prototype.toString.call(t).slice(8,-1)}function ud(t){return wB(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function tf(t,e){const n={...t};return ud(t)&&ud(e)&&Object.keys(e).forEach(r=>{ud(e[r])&&ud(t[r])?n[r]=tf(t[r],e[r]):n[r]=e[r]}),n}class ht{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(F(this,"addOptions",{name:this.name}))),this.storage=me(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ht(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>tf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new ht(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=me(F(n,"addOptions",{name:n.name})),n.storage=me(F(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function xB(t){return typeof t=="number"}class kB{constructor(e){this.find=e.find,this.handler=e.handler}}const CB=(t,e,n)=>{if(Db(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function SB(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:d}=new Qh({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,o,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const g=Math.max(r,p),y=Math.min(o,p+f.content.size),v=f.textBetween(g-p,y-p,void 0,"ï¿¼");CB(v,s.find,i).forEach(w=>{if(w.index===void 0)return;const C=g+w.index+1,k=C+w[0].length,S={from:n.tr.mapping.map(C),to:n.tr.mapping.map(k)},T=s.handler({state:n,range:S,match:w,commands:l,chain:c,can:d,pasteEvent:i,dropEvent:a});u.push(T)})}),u.every(f=>f!==null)}let hd=null;const TB=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function EB(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:u,to:h,rule:f,pasteEvt:p})=>{const g=d.tr,y=Xh({state:d,transaction:g});if(!(!SB({editor:e,state:y,from:Math.max(u-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new ue({view(u){const h=p=>{var g;r=!((g=u.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?u.dom.parentElement:null,r&&(hd=e)},f=()=>{hd&&(hd=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(u,h)=>{if(s=r===u.dom.parentElement,a=h,!s){const f=hd;f&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(u,h)=>{var f;const p=(f=h.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return i=h,o=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(u,h,f)=>{const p=u[0],g=p.getMeta("uiEvent")==="paste"&&!o,y=p.getMeta("uiEvent")==="drop"&&!s,v=p.getMeta("applyPasteRules"),x=!!v;if(!g&&!y&&!x)return;if(x){let{text:k}=v;typeof k=="string"?k=k:k=Nb(_.from(k),f.schema);const{from:S}=v,T=S+k.length,E=TB(k);return l({rule:d,state:f,from:S,to:{b:T},pasteEvt:E})}const w=h.doc.content.findDiffStart(f.doc.content),C=h.doc.content.findDiffEnd(f.doc.content);if(!(!xB(w)||!C||w===C.b))return l({rule:d,state:f,from:w,to:C,pasteEvt:i})}}))}function MB(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Es{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Es.resolve(e),this.schema=tM(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Es.sort(Es.flatten(e)),r=MB(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=F(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=F(r,"priority")||100,i=F(o,"priority")||100;return s>i?-1:s<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Np(n.name,this.schema)},o=F(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=Es.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:Np(i.name,this.schema)},l=[],c=F(i,"addKeyboardShortcuts",a);let d={};if(i.type==="mark"&&F(i,"exitable",a)&&(d.ArrowRight=()=>ht.handleExit({editor:e,mark:i})),c){const g=Object.fromEntries(Object.entries(c()).map(([y,v])=>[y,()=>v({editor:e})]));d={...d,...g}}const u=q9(d);l.push(u);const h=F(i,"addInputRules",a);kx(i,e.options.enableInputRules)&&h&&r.push(...h());const f=F(i,"addPasteRules",a);kx(i,e.options.enablePasteRules)&&f&&o.push(...f());const p=F(i,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[vB({editor:e,rules:r}),...EB({editor:e,rules:o}),...s]}get attributes(){return QE(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=ef(this.extensions);return Object.fromEntries(n.filter(r=>!!F(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:nt(r.name,this.schema)},i=F(r,"addNodeView",s);if(!i)return[];const a=(l,c,d,u,h)=>{const f=Tu(l,o);return i()({node:l,view:c,getPos:d,decorations:u,innerDecorations:h,editor:e,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Np(e.name,this.schema)};e.type==="mark"&&(!((n=me(F(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=F(e,"onBeforeCreate",r),s=F(e,"onCreate",r),i=F(e,"onUpdate",r),a=F(e,"onSelectionUpdate",r),l=F(e,"onTransaction",r),c=F(e,"onFocus",r),d=F(e,"onBlur",r),u=F(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}}class Pe{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(F(this,"addOptions",{name:this.name}))),this.storage=me(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Pe(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>tf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Pe({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=me(F(n,"addOptions",{name:n.name})),n.storage=me(F(n,"addStorage",{name:n.name,options:n.options})),n}}function nM(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,d,u)=>{var h;l.isBlock&&c>r&&(a+=s);const f=i==null?void 0:i[l.type.name];if(f)return d&&(a+=f({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function rM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const oM=Pe.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ue({key:new xe("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=rM(n);return nM(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),AB=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),_B=(t=!1)=>({commands:e})=>e.setContent("",t),PB=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),h=c.resolve(d.map(l+a.nodeSize)),f=u.blockRange(h);if(!f)return;const p=da(f);if(a.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},RB=t=>e=>t(e),IB=()=>({state:t,dispatch:e})=>ZE(t,e),NB=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,s.content),r.setSelection(new H(r.doc.resolve(i-1))),!0},DB=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const a=o.before(s),l=o.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},OB=t=>({tr:e,state:n,dispatch:r})=>{const o=nt(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},LB=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},jB=()=>({state:t,dispatch:e})=>Ab(t,e),BB=()=>({commands:t})=>t.keyboardShortcut("Enter"),VB=()=>({state:t,dispatch:e})=>Q9(t,e);function Eu(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:Db(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function sM(t,e,n={}){return t.find(r=>r.type===e&&Eu(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function Cx(t,e,n={}){return!!sM(t,e,n)}function $l(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!sM([...o.node.marks],e,n)))return;let i=o.index,a=t.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&Cx([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&Cx([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Xo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const $B=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=Xo(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:d}=a;if(o){const u=$l(l,s,e);if(u&&u.from<=c&&u.to>=d){const h=H.create(i,u.from,u.to);n.setSelection(h)}}return!0},HB=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function nf(t){return t instanceof H}function zr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function iM(t,e=null){if(!e)return null;const n=Z.atStart(t),r=Z.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?H.create(t,zr(0,o,s),zr(t.content.size,o,s)):H.create(t,zr(e,o,s),zr(e,o,s))}function aM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function rf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const FB=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{(rf()||aM())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!nf(n.state.selection))return i(),!0;const a=iM(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},zB=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),UB=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),lM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&lM(r)}return t};function fd(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return lM(n)}function Mu(t,e,n){if(t instanceof Gr||t instanceof _)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return _.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Mu("",e,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new HT({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?qr.fromSchema(l).parseSlice(fd(t),n.parseOptions):qr.fromSchema(l).parse(fd(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=qr.fromSchema(e);return n.slice?s.parseSlice(fd(t),n.parseOptions).content:s.parse(fd(t),n.parseOptions)}return Mu("",e,n)}function cM(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof Ze||o instanceof Ke))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,d)=>{i===0&&(i=d)}),t.setSelection(Z.near(t.doc.resolve(i),n))}const WB=t=>!("type"in t),GB=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Mu(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:s.options.enableContentCheck})}catch(p){return s.emit("contentError",{editor:s,error:p,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},d=!0,u=!0;if((WB(a)?a:[a]).forEach(p=>{p.check(),d=d?p.isText&&p.marks.length===0:!1,u=u?p.isBlock:!1}),l===c&&u){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let f;if(d){if(Array.isArray(e))f=e.map(p=>p.text||"").join("");else if(e instanceof _){let p="";e.forEach(g=>{g.text&&(p+=g.text)}),f=p}else typeof e=="object"&&e&&e.text?f=e.text:f=e;r.insertText(f,l,c)}else f=a,r.replaceWith(l,c,f);n.updateSelection&&cM(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:f}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:f})}return!0},qB=()=>({state:t,dispatch:e})=>J9(t,e),KB=()=>({state:t,dispatch:e})=>Y9(t,e),ZB=()=>({state:t,dispatch:e})=>FE(t,e),JB=()=>({state:t,dispatch:e})=>GE(t,e),YB=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Gh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},XB=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Gh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},QB=()=>({state:t,dispatch:e})=>K9(t,e),e7=()=>({state:t,dispatch:e})=>Z9(t,e);function dM(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function t7(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))rf()||dM()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const n7=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=t7(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0};function Hl(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?nt(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(u,h)=>{if(u.isText)return;const f=Math.max(r,h),p=Math.min(o,h+u.nodeSize);a.push({node:u,from:f,to:p})});const l=o-r,c=a.filter(u=>i?i.name===u.node.type.name:!0).filter(u=>Eu(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,h)=>u+h.to-h.from,0)>=l}const r7=(t,e={})=>({state:n,dispatch:r})=>{const o=nt(t,n.schema);return Hl(n,o,e)?X9(n,r):!1},o7=()=>({state:t,dispatch:e})=>JE(t,e),s7=t=>({state:e,dispatch:n})=>{const r=nt(t,e.schema);return dB(r)(e,n)},i7=()=>({state:t,dispatch:e})=>KE(t,e);function of(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Sx(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const a7=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=of(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=nt(t,r.schema)),a==="mark"&&(i=Xo(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{s&&s===c.type&&n.setNodeMarkup(d,void 0,Sx(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(u=>{i===u.type&&n.addMark(d,d+c.nodeSize,i.create(Sx(u.attrs,e)))})})}),!0):!1},l7=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),c7=()=>({tr:t,dispatch:e})=>{if(e){const n=new qt(t.doc);t.setSelection(n)}return!0},d7=()=>({state:t,dispatch:e})=>UE(t,e),u7=()=>({state:t,dispatch:e})=>qE(t,e),h7=()=>({state:t,dispatch:e})=>nB(t,e),f7=()=>({state:t,dispatch:e})=>sB(t,e),p7=()=>({state:t,dispatch:e})=>oB(t,e);function Au(t,e,n={},r={}){return Mu(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const m7=(t,e=!1,n={},r={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{var l,c;const{doc:d}=s;if(n.preserveWhitespace!=="full"){const u=Au(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return i&&s.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!e),!0}return i&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function uM(t,e){const n=Xo(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Ob(t,e){const n=new gb(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function g7(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Tx(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function _u(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function y7(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function sf(t){return e=>y7(e.$from,t)}function b7(t,e){const n=Es.resolve(t);return tM(n,e)}function v7(t,e){const n={from:0,to:t.content.size};return nM(t,n,e)}function w7(t,e){const n=nt(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function hM(t,e){const n=of(typeof e=="string"?e:e.name,t.schema);return n==="node"?w7(t,e):n==="mark"?uM(t,e):{}}function x7(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function k7(t){const e=x7(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,i)=>i!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function Lb(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,s)=>{const i=[];if(o.ranges.length)o.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),u=e.invert().map(c,-1),h=e.invert().map(d);r.push({oldRange:{from:u,to:h},newRange:{from:c,to:d}})})}),k7(r)}function jb(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),i=$l(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function Kd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function Tg(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?Xo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Eu(u.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:u,$to:h})=>{const f=u.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,y)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(f,y),x=Math.min(p,y+g.nodeSize),w=x-v;i+=w,a.push(...g.marks.map(C=>({mark:C,from:v,to:x})))})}),i===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Eu(u.mark.attrs,n,{strict:!1})).reduce((u,h)=>u+h.to-h.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,h)=>u+h.to-h.from,0);return(l>0?l+c:l)>=i}function C7(t,e,n={}){if(!e)return Hl(t,null,n)||Tg(t,null,n);const r=of(e,t.schema);return r==="node"?Hl(t,e,n):r==="mark"?Tg(t,e,n):!1}function Ex(t,e){const{nodeExtensions:n}=ef(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=me(F(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function Bb(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(Bb(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function Eg(t){return t instanceof z}function Pu(t,e,n){const o=t.state.doc.content.size,s=zr(e,0,o),i=zr(n,0,o),a=t.coordsAtPos(s),l=t.coordsAtPos(i,-1),c=Math.min(a.top,l.top),d=Math.max(a.bottom,l.bottom),u=Math.min(a.left,l.left),h=Math.max(a.right,l.right),f=h-u,p=d-c,v={top:c,bottom:d,left:u,right:h,width:f,height:p,x:u,y:c};return{...v,toJSON:()=>v}}function S7(t,e,n){var r;const{selection:o}=e;let s=null;if(nf(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,u,h)=>{if(c)return!1;if(d.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=f&&p}return!c}),c})}const T7=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=Xo(t,r.schema);if(o)if(i){const c=uM(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(h,f)=>{const p=Math.max(f,d),g=Math.min(f+h.nodeSize,u);h.marks.find(v=>v.type===l)?h.marks.forEach(v=>{l===v.type&&n.addMark(p,g,l.create({...v.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return S7(r,n,l)},E7=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),M7=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=nt(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>vx(s,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>vx(s,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},A7=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=zr(t,0,r.content.size),s=z.create(r,o);e.setSelection(s)}return!0},_7=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=H.atStart(r).from,a=H.atEnd(r).to,l=zr(o,i,a),c=zr(s,i,a),d=H.create(r,l,c);e.setSelection(d)}return!0},P7=t=>({state:e,dispatch:n})=>{const r=nt(t,e.schema);return fB(r)(e,n)};function Mx(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const R7=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,d=Kd(c,a.node().type.name,a.node().attrs);if(s instanceof z&&s.node.isBlock)return!a.parentOffset||!Kr(i,a.pos)?!1:(r&&(t&&Mx(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:g7(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&h?[{type:h,attrs:d}]:void 0,p=Kr(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&Kr(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:d}]:void 0),r){if(p&&(s instanceof H&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!u&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),y=e.doc.resolve(g);a.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&Mx(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return p},I7=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=nt(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let v=_.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-x;E>=l.depth-3;E-=1)v=_.from(l.node(E).copy(v));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C={...Kd(h,l.node().type.name,l.node().attrs),...e},k=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(C))||void 0;v=v.append(_.from(a.createAndFill(null,k)||void 0));const S=l.before(l.depth-(x-1));n.replace(S,l.after(-w),new D(v,4-x,0));let T=-1;n.doc.nodesBetween(S,n.doc.content.size,(E,M)=>{if(T>-1)return!1;E.isTextblock&&E.content.size===0&&(T=M+1)}),T>-1&&n.setSelection(H.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,p={...Kd(h,u.type.name,u.attrs),...e},g={...Kd(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const y=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!Kr(n.doc,l.pos,2))return!1;if(o){const{selection:v,storedMarks:x}=r,{splittableMarks:w}=s.extensionManager,C=x||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!C||!o)return!0;const k=C.filter(S=>w.includes(S.type.name));n.ensureMarks(k)}return!0},Dp=(t,e)=>{const n=sf(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&ri(t.doc,n.pos)&&t.join(n.pos),!0},Op=(t,e)=>{const n=sf(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&ri(t.doc,r)&&t.join(r),!0},N7=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:h}=o.extensionManager,f=nt(t,i.schema),p=nt(e,i.schema),{selection:g,storedMarks:y}=i,{$from:v,$to:x}=g,w=v.blockRange(x),C=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const k=sf(S=>Ex(S.type.name,u))(g);if(w.depth>=1&&k&&w.depth-k.depth<=1){if(k.node.type===f)return c.liftListItem(p);if(Ex(k.node.type.name,u)&&f.validContent(k.node.content)&&a)return l().command(()=>(s.setNodeMarkup(k.pos,f),!0)).command(()=>Dp(s,f)).command(()=>Op(s,f)).run()}return!n||!C||!a?l().command(()=>d().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Dp(s,f)).command(()=>Op(s,f)).run():l().command(()=>{const S=d().wrapInList(f,r),T=C.filter(E=>h.includes(E.type.name));return s.ensureMarks(T),S?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Dp(s,f)).command(()=>Op(s,f)).run()},D7=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=Xo(t,r.schema);return Tg(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},O7=(t,e,n={})=>({state:r,commands:o})=>{const s=nt(t,r.schema),i=nt(e,r.schema),a=Hl(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},L7=(t,e={})=>({state:n,commands:r})=>{const o=nt(t,n.schema);return Hl(n,o,e)?r.lift(o):r.wrapIn(o,e)},j7=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},B7=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},V7=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=Xo(t,r.schema),{$from:c,empty:d,ranges:u}=a;if(!o)return!0;if(d&&i){let{from:h,to:f}=a;const p=(s=c.marks().find(y=>y.type===l))===null||s===void 0?void 0:s.attrs,g=$l(c,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else u.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},$7=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=of(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=nt(t,r.schema)),a==="mark"&&(i=Xo(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let u,h,f,p;n.selection.empty?r.doc.nodesBetween(c,d,(g,y)=>{s&&s===g.type&&(f=Math.max(y,c),p=Math.min(y+g.nodeSize,d),u=y,h=g)}):r.doc.nodesBetween(c,d,(g,y)=>{y<c&&s&&s===g.type&&(f=Math.max(y,c),p=Math.min(y+g.nodeSize,d),u=y,h=g),y>=c&&y<=d&&(s&&s===g.type&&n.setNodeMarkup(y,void 0,{...g.attrs,...e}),i&&g.marks.length&&g.marks.forEach(v=>{if(i===v.type){const x=Math.max(y,c),w=Math.min(y+g.nodeSize,d);n.addMark(x,w,i.create({...v.attrs,...e}))}}))}),h&&(u!==void 0&&n.setNodeMarkup(u,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(g=>{i===g.type&&n.addMark(f,p,i.create({...g.attrs,...e}))}))}),!0):!1},H7=(t,e={})=>({state:n,dispatch:r})=>{const o=nt(t,n.schema);return iB(o,e)(n,r)},F7=(t,e={})=>({state:n,dispatch:r})=>{const o=nt(t,n.schema);return aB(o,e)(n,r)};var z7=Object.freeze({__proto__:null,blur:AB,clearContent:_B,clearNodes:PB,command:RB,createParagraphNear:IB,cut:NB,deleteCurrentNode:DB,deleteNode:OB,deleteRange:LB,deleteSelection:jB,enter:BB,exitCode:VB,extendMarkRange:$B,first:HB,focus:FB,forEach:zB,insertContent:UB,insertContentAt:GB,joinBackward:ZB,joinDown:KB,joinForward:JB,joinItemBackward:YB,joinItemForward:XB,joinTextblockBackward:QB,joinTextblockForward:e7,joinUp:qB,keyboardShortcut:n7,lift:r7,liftEmptyBlock:o7,liftListItem:s7,newlineInCode:i7,resetAttributes:a7,scrollIntoView:l7,selectAll:c7,selectNodeBackward:d7,selectNodeForward:u7,selectParentNode:h7,selectTextblockEnd:f7,selectTextblockStart:p7,setContent:m7,setMark:T7,setMeta:E7,setNode:M7,setNodeSelection:A7,setTextSelection:_7,sinkListItem:P7,splitBlock:R7,splitListItem:I7,toggleList:N7,toggleMark:D7,toggleNode:O7,toggleWrap:L7,undoInputRule:j7,unsetAllMarks:B7,unsetMark:V7,updateAttributes:$7,wrapIn:H7,wrapInList:F7});const fM=Pe.create({name:"commands",addCommands(){return{...z7}}}),pM=Pe.create({name:"drop",addProseMirrorPlugins(){return[new ue({key:new xe("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),mM=Pe.create({name:"editable",addProseMirrorPlugins(){return[new ue({key:new xe("editable"),props:{editable:()=>this.editor.options.editable}})]}}),gM=new xe("focusEvents"),yM=Pe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ue({key:gM,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),bM=Pe.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:h,parent:f}=u,p=u.parent.isTextblock&&h>0?a.doc.resolve(h-1):u,g=p.parent.type.spec.isolating,y=u.pos-u.parentOffset,v=g&&p.parent.childCount===1?y===u.pos:Z.atStart(c).from===h;return!d||!f.type.isTextblock||f.textContent.length||!v||v&&u.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return rf()||dM()?s:o},addProseMirrorPlugins(){return[new ue({key:new xe("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),o=t.some(g=>g.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=e.selection,l=Z.atStart(e.doc).from,c=Z.atEnd(e.doc).to;if(s||!(i===l&&a===c)||!Bb(n.doc))return;const h=n.tr,f=Xh({state:n,transaction:h}),{commands:p}=new Qh({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),vM=Pe.create({name:"paste",addProseMirrorPlugins(){return[new ue({key:new xe("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),wM=Pe.create({name:"tabindex",addProseMirrorPlugins(){return[new ue({key:new xe("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var ja=Object.freeze({__proto__:null,ClipboardTextSerializer:oM,Commands:fM,Drop:pM,Editable:mM,FocusEvents:yM,Keymap:bM,Paste:vM,Tabindex:wM,focusEventsPluginKey:gM});class vs{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You canâ€™t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new vs(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new vs(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new vs(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new vs(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new vs(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===e&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const U7=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function W7(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}class G7 extends pB{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=W7(U7,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=eM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=r.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[mM,oM.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),fM,yM,bM,wM,pM,vM].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Es(o,this)}createCommandManager(){this.commandManager=new Qh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Au(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=Au(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=iM(n,this.options.autofocus);this.view=new $E(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Cs.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return hM(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return C7(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Nb(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return v7(this.state.doc,{blockSeparator:n,textSerializers:{...rM(this.schema),...r}})}get isEmpty(){return Bb(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new vs(n,this)}get $doc(){return this.$pos(0)}}function Yi(t){return new $o({find:t.find,handler:({state:e,range:n,match:r})=>{const o=me(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),d=c+i.length;if(jb(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;d<n.to&&s.delete(d,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+i.length;s.addMark(n.from+l,h,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}let Er=class Mg{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(F(this,"addOptions",{name:this.name}))),this.storage=me(F(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mg(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>tf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Mg(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=me(F(n,"addOptions",{name:n.name})),n.storage=me(F(n,"addStorage",{name:n.name,options:n.options})),n}};class q7{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,s,i,a,l;const{view:c}=this.editor,d=e.target,u=d.nodeType===3?(n=d.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):d.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(d)||!u)return;let h=0,f=0;if(this.dom!==u){const x=this.dom.getBoundingClientRect(),w=u.getBoundingClientRect(),C=(o=e.offsetX)!==null&&o!==void 0?o:(s=e.nativeEvent)===null||s===void 0?void 0:s.offsetX,k=(i=e.offsetY)!==null&&i!==void 0?i:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;h=w.x-x.x+C,f=w.y-x.y+k}const p=this.dom.cloneNode(!0);(l=e.dataTransfer)===null||l===void 0||l.setDragImage(p,h,f);const g=this.getPos();if(typeof g!="number")return;const y=z.create(c.state.doc,g),v=c.state.tr.setSelection(y);c.dispatch(v)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const s=e.type.startsWith("drag"),i=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!s)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,d=!!this.node.type.spec.draggable,u=z.isSelectable(this.node),h=e.type==="copy",f=e.type==="paste",p=e.type==="cut",g=e.type==="mousedown";if(!d&&u&&s&&e.target===this.dom&&e.preventDefault(),d&&s&&!c&&e.target===this.dom)return e.preventDefault(),!1;if(d&&l&&!c&&g){const y=r.closest("[data-drag-handle]");y&&(this.dom===y||this.dom.contains(y))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||i||h||f||p||g&&u)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(rf()||aM())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Ws(t){return new kB({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=me(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),u=n.from+l.indexOf(a),h=u+a.length;if(jb(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>u).length)return null;h<n.to&&i.delete(h,n.to),u>n.from&&i.delete(n.from+d,u),c=n.from+d+a.length,i.addMark(n.from+d,c,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}var pd,K7=new Uint8Array(16);function Z7(){if(!pd&&(pd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pd(K7)}const J7=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y7(t){return typeof t=="string"&&J7.test(t)}var st=[];for(var Lp=0;Lp<256;++Lp)st.push((Lp+256).toString(16).substr(1));function X7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(st[t[e+0]]+st[t[e+1]]+st[t[e+2]]+st[t[e+3]]+"-"+st[t[e+4]]+st[t[e+5]]+"-"+st[t[e+6]]+st[t[e+7]]+"-"+st[t[e+8]]+st[t[e+9]]+"-"+st[t[e+10]]+st[t[e+11]]+st[t[e+12]]+st[t[e+13]]+st[t[e+14]]+st[t[e+15]]).toLowerCase();if(!Y7(n))throw TypeError("Stringified UUID is invalid");return n}function xM(t,e,n){t=t||{};var r=t.random||(t.rng||Z7)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,X7(r)}var Q7=class kM{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,o){this.remove(e),this.set(n,r,o)}remove(e){this.cache.delete(e)}invalidate(e){const n=new kM(this.cache),r=e.mapping;return this.cache.forEach(([o,s],i)=>{if(i<0)return;const a=r.mapResult(i),l=e.doc.nodeAt(a.pos);if(a.deleted||!(l!=null&&l.eq(o)))n.remove(i);else if(i!==a.pos){const c=s.map(d=>d.map(r,0,0)).filter(d=>d!=null);n.replace(i,a.pos,l,c)}}),n}};function e8({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new xe("prosemirror-highlight");return new ue({key:r,state:{init(o,s){const i=new Q7,[a,l]=Ax(s.doc,t,e,n,i);return{cache:i,decorations:a,promises:l}},apply:(o,s)=>{const i=s.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const d=s.decorations.map(o.mapping,o.doc),u=s.promises;return{cache:i,decorations:d,promises:u}}const[l,c]=Ax(o.doc,t,e,n,i);return{cache:i,decorations:l,promises:c}}},view:o=>{const s=new Set,i=()=>{if(s.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const c=r.getState(o.state);for(const d of(l=c==null?void 0:c.promises)!=null?l:[])s.add(d),d.then(()=>{s.delete(d),i()}).catch(()=>{s.delete(d)})};return a(),{update:()=>{a()}}},props:{decorations(o){var s;return(s=this.getState(o))==null?void 0:s.decorations}}})}function Ax(t,e,n,r,o){const s=[],i=[];return t.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),d=o.get(l);if(d){const[u,h]=d;s.push(...h)}else{const u=e({content:a.textContent,language:c||void 0,pos:l,size:a.nodeSize});u&&Array.isArray(u)?(o.set(l,a,u),s.push(...u)):u instanceof Promise&&(o.remove(l),i.push(u))}}return!1}),[ge.create(t,s),i]}function t8(t,e){return function({content:r,language:o,pos:s,size:i}){var a;const l=[],{tokens:c,fg:d,bg:u,rootStyle:h}=t.codeToTokens(r,{lang:o,theme:t.getLoadedThemes()[0]}),f=h||(d&&u?`--prosemirror-highlight:${d};--prosemirror-highlight-bg:${u}`:"");if(f){const g=Te.node(s,s+i,{style:f});l.push(g)}let p=s+1;for(const g of c){for(const y of g){const v=p+y.content.length,x=Te.inline(p,v,{style:n8((a=y.htmlStyle)!=null?a:`color: ${y.color}`),class:"shiki"});l.push(x),p=v}p+=1}return l}}function n8(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const r8=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,o8=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,s8=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,i8=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,a8=ht.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",an(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Yi({find:r8,type:this.type}),Yi({find:s8,type:this.type})]},addPasteRules(){return[Ws({find:o8,type:this.type}),Ws({find:i8,type:this.type})]}}),l8=/(^|[^`])`([^`]+)`(?!`)/,c8=/(^|[^`])`([^`]+)`(?!`)/g,d8=ht.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",an(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Yi({find:l8,type:this.type})]},addPasteRules(){return[Ws({find:c8,type:this.type})]}}),u8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,h8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,f8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,p8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,m8=ht.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",an(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Yi({find:u8,type:this.type}),Yi({find:f8,type:this.type})]},addPasteRules(){return[Ws({find:h8,type:this.type}),Ws({find:p8,type:this.type})]}}),g8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,y8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,b8=ht.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",an(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Yi({find:g8,type:this.type})]},addPasteRules(){return[Ws({find:y8,type:this.type})]}}),v8=ht.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",an(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),w8=Er.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",an(this.options.HTMLAttributes,t),0]}}),x8=Er.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",an(this.options.HTMLAttributes,t),0]}});var Ag,_g;if(typeof WeakMap<"u"){let t=new WeakMap;Ag=e=>t.get(e),_g=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;Ag=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},_g=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var Oe=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let s=r+1,i=o+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;i<this.height&&this.map[e+this.width*a]==n;a++)i++;return{left:r,top:o,right:s,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:i==this.height)?null:this.map[r+this.width*(n<0?s-1:i)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:s}=this.findCell(t),{left:i,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,i),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const s=r*this.width+o,i=this.map[s];n[i]||(n[i]=!0,!(o==t.left&&o&&this.map[s-1]==i||r==t.top&&r&&this.map[s-this.width]==i)&&e.push(i))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==t){let i=e+t*this.width;const a=(t+1)*this.width;for(;i<a&&this.map[i]<o;)i++;return i==a?s-1:this.map[i]}o=s}}static get(t){return Ag(t)||_g(t,k8(t))}};function k8(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=C8(t),n=t.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,d=e*n;c<d;c++)r[c]=0;for(let c=0,d=0;c<n;c++){const u=t.child(c);d++;for(let p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==u.childCount)break;const g=u.child(p),{colspan:y,rowspan:v,colwidth:x}=g.attrs;for(let w=0;w<v;w++){if(w+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:v-w});break}const C=o+w*e;for(let k=0;k<y;k++){r[C+k]==0?r[C+k]=d:(s||(s=[])).push({type:"collision",row:c,pos:d,n:y-k});const S=x&&x[k];if(S){const T=(C+k)%e*2,E=i[T];E==null||E!=S&&i[T+1]==1?(i[T]=S,i[T+1]=1):E==S&&i[T+1]++}}}o+=y,d+=g.nodeSize}const h=(c+1)*e;let f=0;for(;o<h;)r[o++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),d++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Oe(e,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&S8(a,i,t),a}function C8(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=t.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function S8(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const d=(o+c)%t.width,u=e[d*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=T8(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function T8(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function St(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var Eo=new xe("selectingCells");function ua(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function E8(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Mr(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function Vb(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=ua(e.$head)||M8(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function M8(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function Pg(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function A8(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function $b(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function CM(t,e,n){const r=t.node(-1),o=Oe.get(r),s=t.start(-1),i=o.nextCell(t.pos-s,e,n);return i==null?null:t.node(0).resolve(s+i)}function Gs(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function SM(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function _8(t,e,n){const r=St(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var Ee=class jr extends Z{constructor(e,n=e){const r=e.node(-1),o=Oe.get(r),s=e.start(-1),i=o.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=o.cellsInRect(i).filter(d=>d!=n.pos-s);l.unshift(n.pos-s);const c=l.map(d=>{const u=r.nodeAt(d);if(!u)throw RangeError(`No cell with offset ${d} found`);const h=s+d+1;return new oE(a.resolve(h),a.resolve(h+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(Pg(r)&&Pg(o)&&$b(r,o)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?jr.rowSelection(r,o):s&&this.isColSelection()?jr.colSelection(r,o):new jr(r,o)}return H.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=Oe.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},i=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let d=l*n.width+o.left,u=o.left;u<o.right;u++,d++){const h=n.map[d];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const g=o.left-f.left,y=f.right-o.right;if(g>0||y>0){let v=p.attrs;if(g>0&&(v=Gs(v,0,g)),y>0&&(v=Gs(v,v.colspan-y,y)),f.left<o.left){if(p=p.type.createAndFill(v),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else p=p.type.create(v,p.content)}if(f.top<o.top||f.bottom>o.bottom){const v={...p.attrs,rowspan:Math.min(f.bottom,o.bottom)-Math.max(f.top,o.top)};f.top<o.top?p=p.type.createAndFill(v):p=p.type.create(v,p.content)}c.push(p)}i.push(e.child(l).copy(_.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:i;return new D(_.from(a),1,1)}replace(e,n=D.empty){const r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){const{$from:a,$to:l}=o[i],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),i?D.empty:n)}const s=Z.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new D(_.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Oe.get(n),o=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let i=0;i<s.length;i++)e(n.nodeAt(s[i]),o+s[i])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=Oe.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.top<=a.top?(i.top>0&&(e=l.resolve(s+o.map[i.left])),a.bottom<o.height&&(n=l.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+o.map[a.left])),i.bottom<o.height&&(e=l.resolve(s+o.map[o.width*(o.height-1)+i.right-1]))),new jr(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Oe.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(o,s)>0)return!1;const i=o+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(e){return e instanceof jr&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=Oe.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.left<=a.left?(i.left>0&&(e=l.resolve(s+o.map[i.top*o.width])),a.right<o.width&&(n=l.resolve(s+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+o.map[a.top*o.width])),i.right<o.width&&(e=l.resolve(s+o.map[o.width*(i.top+1)-1]))),new jr(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new jr(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new jr(e.resolve(n),e.resolve(r))}getBookmark(){return new P8(this.$anchorCell.pos,this.$headCell.pos)}};Ee.prototype.visible=!1;Z.jsonID("cell",Ee);var P8=class TM{constructor(e,n){this.anchor=e,this.head=n}map(e){return new TM(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&$b(n,r)?new Ee(n,r):Z.near(r,1)}};function R8(t){if(!(t.selection instanceof Ee))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Te.node(r,r+n.nodeSize,{class:"selectedCell"}))}),ge.create(t.doc,e)}function I8({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function N8({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function D8(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,i;if(r instanceof z&&(i=r.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")s=Ee.create(o,r.from);else if(i=="row"){const a=o.resolve(r.from+1);s=Ee.rowSelection(a,a)}else if(!n){const a=Oe.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=Ee.create(o,l+1,c)}}else r instanceof H&&I8(r)?s=H.create(o,r.from):r instanceof H&&N8(r)&&(s=H.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var O8=new xe("fix-tables");function EM(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let i=0,a=0;i<s;i++){const l=e.child(i);for(let c=a,d=Math.min(o,i+3);c<d;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?EM(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function L8(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=j8(t,o,s,n))};return e?e.doc!=t.doc&&EM(e.doc,t.doc,0,r):t.doc.descendants(r),n}function j8(t,e,n,r){const o=Oe.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const d=e.nodeAt(c.pos);if(!d)continue;const u=d.attrs;for(let h=0;h<u.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Gs(u,u.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let i,a;for(let l=0;l<s.length;l++)s[l]&&(i==null&&(i=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const d=e.child(l),u=c+d.nodeSize,h=s[l];if(h>0){let f="cell";d.firstChild&&(f=d.firstChild.type.spec.tableRole);const p=[];for(let y=0;y<h;y++){const v=St(t.schema)[f].createAndFill();v&&p.push(v)}const g=(l==0||i==l-1)&&a==l?c+1:u-1;r.insert(r.mapping.map(g),p)}c=u}return r.setMeta(O8,{fixTables:!0})}function Ar(t){const e=t.selection,n=Vb(t),r=n.node(-1),o=n.start(-1),s=Oe.get(r);return{...e instanceof Ee?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function MM(t,{map:e,tableStart:n,table:r},o){let s=o>0?-1:0;_8(e,r,o+s)&&(s=o==0||o==e.width?null:0);for(let i=0;i<e.height;i++){const a=i*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,SM(c.attrs,o-e.colCount(l))),i+=c.attrs.rowspan-1}else{const l=s==null?St(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(i,o,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function B8(t,e){if(!Mr(t))return!1;if(e){const n=Ar(t);e(MM(t.tr,n,n.left))}return!0}function V8(t,e){if(!Mr(t))return!1;if(e){const n=Ar(t);e(MM(t.tr,n,n.right))}return!0}function $8(t,{map:e,table:n,tableStart:r},o){const s=t.mapping.maps.length;for(let i=0;i<e.height;){const a=i*e.width+o,l=e.map[a],c=n.nodeAt(l),d=c.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,Gs(d,o-e.colCount(l)));else{const u=t.mapping.slice(s).map(r+l);t.delete(u,u+c.nodeSize)}i+=d.rowspan}}function H8(t,e){if(!Mr(t))return!1;if(e){const n=Ar(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;$8(r,n,o),o!=n.left;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Oe.get(s)}e(r)}return!0}function F8(t,e,n){var r;const o=St(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function AM(t,{map:e,tableStart:n,table:r},o){var s;let i=n;for(let c=0;c<o;c++)i+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;F8(e,r,o+l)&&(l=o==0||o==e.height?null:0);for(let c=0,d=e.width*o;c<e.width;c++,d++)if(o>0&&o<e.height&&e.map[d]==e.map[d-e.width]){const u=e.map[d],h=r.nodeAt(u).attrs;t.setNodeMarkup(n+u,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const u=l==null?St(r.type.schema).cell:(s=r.nodeAt(e.map[d+l*e.width]))==null?void 0:s.type,h=u==null?void 0:u.createAndFill();h&&a.push(h)}return t.insert(i,St(r.type.schema).row.create(null,a)),t}function z8(t,e){if(!Mr(t))return!1;if(e){const n=Ar(t);e(AM(t.tr,n,n.top))}return!0}function U8(t,e){if(!Mr(t))return!1;if(e){const n=Ar(t);e(AM(t.tr,n,n.bottom))}return!0}function W8(t,{map:e,table:n,tableStart:r},o){let s=0;for(let c=0;c<o;c++)s+=n.child(c).nodeSize;const i=s+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(s+r,i+r);const l=new Set;for(let c=0,d=o*e.width;c<e.width;c++,d++){const u=e.map[d];if(!l.has(u)){if(l.add(u),o>0&&u==e.map[d-e.width]){const h=n.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(o<e.height&&u==e.map[d+e.width]){const h=n.nodeAt(u),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),g=e.positionAt(o+1,c,n);t.insert(t.mapping.slice(a).map(r+g),p),c+=f.colspan-1}}}}function G8(t,e){if(!Mr(t))return!1;if(e){const n=Ar(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;W8(r,n,o),o!=n.top;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Oe.get(n.table)}e(r)}return!0}function _x(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function q8({width:t,height:e,map:n},r){let o=r.top*t+r.left,s=o,i=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[i]==n[i+t])return!0;o++,i++}return!1}function K8(t,e){const n=t.selection;if(!(n instanceof Ee)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Ar(t),{map:o}=r;if(q8(o,r))return!1;if(e){const s=t.tr,i={};let a=_.empty,l,c;for(let d=r.top;d<r.bottom;d++)for(let u=r.left;u<r.right;u++){const h=o.map[d*o.width+u],f=r.table.nodeAt(h);if(!(i[h]||!f))if(i[h]=!0,l==null)l=h,c=f;else{_x(f)||(a=a.append(f.content));const p=s.mapping.map(h+r.tableStart);s.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...SM(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const d=l+1+c.content.size,u=_x(c)?l+1:d;s.replaceWith(u+r.tableStart,d+r.tableStart,a)}s.setSelection(new Ee(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function Z8(t,e){const n=St(t.schema);return J8(({node:r})=>n[r.type.spec.tableRole])(t,e)}function J8(t){return(e,n)=>{var r;const o=e.selection;let s,i;if(o instanceof Ee){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;s=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(s=E8(o.$from),!s)return!1;i=(r=ua(o.$from))==null?void 0:r.pos}if(s==null||i==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const d=Ar(e),u=e.tr;for(let f=0;f<d.right-d.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=d.top;f<d.bottom;f++){let p=d.map.positionAt(f,d.left,d.table);f==d.top&&(p+=s.nodeSize);for(let g=d.left,y=0;g<d.right;g++,y++)g==d.left&&f==d.top||u.insert(h=u.mapping.map(p+d.tableStart,1),t({node:s,row:f,col:g}).createAndFill(l[y]))}u.setNodeMarkup(i,t({node:s,row:d.top,col:d.left}),l[0]),o instanceof Ee&&u.setSelection(new Ee(u.doc.resolve(o.$anchorCell.pos),h?u.doc.resolve(h):void 0)),n(u)}return!0}}function Y8(t){return function(e,n){if(!Mr(e))return!1;if(n){const r=St(e.schema),o=Ar(e),s=e.tr,i=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function Px(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function Hb(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Y8(t):function(n,r){if(!Mr(n))return!1;if(r){const o=St(n.schema),s=Ar(n),i=n.tr,a=Px("row",s,o),l=Px("column",s,o),d=(t==="column"?a:t==="row"?l:!1)?1:0,u=t=="column"?{left:0,top:d,right:1,bottom:s.map.height}:t=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(u).forEach(f=>{const p=f+s.tableStart,g=i.doc.nodeAt(p);g&&i.setNodeMarkup(p,h,g.attrs)}),r(i)}return!0}}Hb("row",{useDeprecatedLogic:!0});Hb("column",{useDeprecatedLogic:!0});Hb("cell",{useDeprecatedLogic:!0});function X8(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),i=s.lastChild;if(i)return o-1-i.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function Rx(t){return function(e,n){if(!Mr(e))return!1;const r=X8(Vb(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(H.between(o,A8(o))).scrollIntoView())}return!0}}function md(t,e){const n=t.selection;if(!(n instanceof Ee))return!1;if(e){const r=t.tr,o=St(t.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new D(o,0,0))}),r.docChanged&&e(r)}return!0}function Q8(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,i=o.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const d=l?0:Math.max(0,n-1),u=l<e.childCount-1?0:Math.max(0,r-1);(d||u)&&(c=Rg(St(i).row,new D(c,d,u)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?Rg(St(i).row,new D(e,n,r)).content:e);else return null;return eV(i,a)}function eV(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let i=s.childCount-1;i>=0;i--){const{rowspan:a,colspan:l}=s.child(i).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(_.empty),n[o]<r){const s=St(t).cell.createAndFill(),i=[];for(let a=n[o];a<r;a++)i.push(s);e[o]=e[o].append(_.from(i))}return{height:e.length,width:r,rows:e}}function Rg(t,e){const n=t.createAndFill();return new gb(n).replace(0,n.content.size,e).doc}function tV({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],i=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let d=s[a]||0,u=0;d<r;u++){let h=l.child(u%l.childCount);d+h.attrs.colspan>r&&(h=h.type.createChecked(Gs(h.attrs,h.attrs.colspan,d+h.attrs.colspan-r),h.content)),c.push(h),d+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}i.push(_.from(c))}n=i,t=r}if(e!=o){const s=[];for(let i=0,a=0;i<o;i++,a++){const l=[],c=n[a%e];for(let d=0;d<c.childCount;d++){let u=c.child(d);i+u.attrs.rowspan>o&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,o-u.attrs.rowspan)},u.content)),l.push(u)}s.push(_.from(l))}n=s,e=o}return{width:t,height:e,rows:n}}function nV(t,e,n,r,o,s,i){const a=t.doc.type.schema,l=St(a);let c,d;if(o>e.width)for(let u=0,h=0;u<e.height;u++){const f=n.child(u);h+=f.nodeSize;const p=[];let g;f.lastChild==null||f.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=d||(d=l.header_cell.createAndFill());for(let y=e.width;y<o;y++)p.push(g);t.insert(t.mapping.slice(i).map(h-1+r),p)}if(s>e.height){const u=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,o);p++){const y=p>=e.width?!1:n.nodeAt(e.map[g+p]).type==l.header_cell;u.push(y?d||(d=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,_.from(u)),f=[];for(let p=e.height;p<s;p++)f.push(h);t.insert(t.mapping.slice(i).map(r+n.nodeSize-2),f)}return!!(c||d)}function Ix(t,e,n,r,o,s,i,a){if(i==0||i==e.height)return!1;let l=!1;for(let c=o;c<s;c++){const d=i*e.width+c,u=e.map[d];if(e.map[d-e.width]==u){l=!0;const h=n.nodeAt(u),{top:f,left:p}=e.findCell(u);t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h.attrs,rowspan:i-f}),t.insert(t.mapping.slice(a).map(e.positionAt(i,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-i})),c+=h.attrs.colspan-1}}return l}function Nx(t,e,n,r,o,s,i,a){if(i==0||i==e.width)return!1;let l=!1;for(let c=o;c<s;c++){const d=c*e.width+i,u=e.map[d];if(e.map[d-1]==u){l=!0;const h=n.nodeAt(u),f=e.colCount(u),p=t.mapping.slice(a).map(u+r);t.setNodeMarkup(p,null,Gs(h.attrs,i-f,h.attrs.colspan-(i-f))),t.insert(p+h.nodeSize,h.type.createAndFill(Gs(h.attrs,0,i-f))),c+=h.attrs.rowspan-1}}return l}function Dx(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=Oe.get(s);const{top:a,left:l}=r,c=l+o.width,d=a+o.height,u=t.tr;let h=0;function f(){if(s=n?u.doc.nodeAt(n-1):u.doc,!s)throw new Error("No table found");i=Oe.get(s),h=u.mapping.maps.length}nV(u,i,s,n,c,d,h)&&f(),Ix(u,i,s,n,l,c,a,h)&&f(),Ix(u,i,s,n,l,c,d,h)&&f(),Nx(u,i,s,n,a,d,l,h)&&f(),Nx(u,i,s,n,a,d,c,h)&&f();for(let p=a;p<d;p++){const g=i.positionAt(p,l,s),y=i.positionAt(p,c,s);u.replace(u.mapping.slice(h).map(g+n),u.mapping.slice(h).map(y+n),new D(o.rows[p-a],0,0))}f(),u.setSelection(new Ee(u.doc.resolve(n+i.positionAt(a,l,s)),u.doc.resolve(n+i.positionAt(d-1,c-1,s)))),e(u)}var rV=Mb({ArrowLeft:gd("horiz",-1),ArrowRight:gd("horiz",1),ArrowUp:gd("vert",-1),ArrowDown:gd("vert",1),"Shift-ArrowLeft":yd("horiz",-1),"Shift-ArrowRight":yd("horiz",1),"Shift-ArrowUp":yd("vert",-1),"Shift-ArrowDown":yd("vert",1),Backspace:md,"Mod-Backspace":md,Delete:md,"Mod-Delete":md});function Zd(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function gd(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof Ee)return Zd(n,r,Z.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const i=_M(o,t,e);if(i==null)return!1;if(t=="horiz")return Zd(n,r,Z.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(i),l=CM(a,t,e);let c;return l?c=Z.near(l,1):e<0?c=Z.near(n.doc.resolve(a.before(-1)),-1):c=Z.near(n.doc.resolve(a.after(-1)),1),Zd(n,r,c)}}}function yd(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof Ee)i=s;else{const l=_M(o,t,e);if(l==null)return!1;i=new Ee(n.doc.resolve(l))}const a=CM(i.$headCell,t,e);return a?Zd(n,r,new Ee(i.$anchorCell,a)):!1}}function oV(t,e){const n=t.state.doc,r=ua(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Ee(r))),!0):!1}function sV(t,e,n){if(!Mr(t.state))return!1;let r=Q8(n);const o=t.state.selection;if(o instanceof Ee){r||(r={width:1,height:1,rows:[_.from(Rg(St(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=Oe.get(s).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=tV(r,a.right-a.left,a.bottom-a.top),Dx(t.state,t.dispatch,i,a,r),!0}else if(r){const s=Vb(t.state),i=s.start(-1);return Dx(t.state,t.dispatch,i,Oe.get(s.node(-1)).findCell(s.pos-i),r),!0}else return!1}function iV(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=Ox(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof Ee)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=ua(t.state.selection.$anchor))!=null&&((n=jp(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(l,c){let d=jp(t,c);const u=Eo.getState(t.state)==null;if(!d||!$b(l,d))if(u)d=l;else return;const h=new Ee(l,d);if(u||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);u&&f.setMeta(Eo,l.pos),t.dispatch(f)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),Eo.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Eo,-1))}function a(l){const c=l,d=Eo.getState(t.state);let u;if(d!=null)u=t.state.doc.resolve(d);else if(Ox(t,c.target)!=r&&(u=jp(t,e),!u))return i();u&&s(u,c)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function _M(t,e,n){if(!(t.state.selection instanceof H))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function Ox(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function jp(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?ua(t.state.doc.resolve(n.pos)):null}var PM=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ig(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,Ig(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function Ig(t,e,n,r,o,s){var i;let a=0,l=!0,c=e.firstChild;const d=t.firstChild;if(d){for(let u=0,h=0;u<d.childCount;u++){const{colspan:f,colwidth:p}=d.child(u).attrs;for(let g=0;g<f;g++,h++){const y=o==h?s:p&&p[g],v=y?y+"px":"";if(a+=y||r,y||(l=!1),c)c.style.width!=v&&(c.style.width=v),c=c.nextSibling;else{const x=document.createElement("col");x.style.width=v,e.appendChild(x)}}}for(;c;){const u=c.nextSibling;(i=c.parentNode)==null||i.removeChild(c),c=u}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var rn=new xe("tableColumnResizing");function aV({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=PM,lastColumnResizable:o=!0}={}){const s=new ue({key:rn,state:{init(i,a){var l,c;const d=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,u=St(a.schema).table.name;return r&&d&&(d[u]=(h,f)=>new r(h,n,f)),new lV(-1,!1)},apply(i,a){return a.apply(i)}},props:{attributes:i=>{const a=rn.getState(i);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(i,a)=>{cV(i,a,t,o)},mouseleave:i=>{dV(i)},mousedown:(i,a)=>{uV(i,a,e,n)}},decorations:i=>{const a=rn.getState(i);if(a&&a.activeHandle>-1)return gV(i,a.activeHandle)},nodeViews:{}}});return s}var lV=class Jd{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(rn);if(r&&r.setHandle!=null)return new Jd(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Jd(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return Pg(e.doc.resolve(o))||(o=-1),new Jd(o,n.dragging)}return n}};function cV(t,e,n,r){if(!t.editable)return;const o=rn.getState(t.state);if(o&&!o.dragging){const s=fV(e.target);let i=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?i=Lx(t,e,"left",n):l-e.clientX<=n&&(i=Lx(t,e,"right",n))}if(i!=o.activeHandle){if(!r&&i!==-1){const a=t.state.doc.resolve(i),l=a.node(-1),c=Oe.get(l),d=a.start(-1);if(c.colCount(a.pos-d)+a.nodeAfter.attrs.colspan-1==c.width-1)return}RM(t,i)}}}function dV(t){if(!t.editable)return;const e=rn.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&RM(t,-1)}function uV(t,e,n,r){var o;if(!t.editable)return!1;const s=(o=t.dom.ownerDocument.defaultView)!=null?o:window,i=rn.getState(t.state);if(!i||i.activeHandle==-1||i.dragging)return!1;const a=t.state.doc.nodeAt(i.activeHandle),l=hV(t,i.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(rn,{setDragging:{startX:e.clientX,startWidth:l}}));function c(u){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",d);const h=rn.getState(t.state);h!=null&&h.dragging&&(pV(t,h.activeHandle,jx(h.dragging,u,n)),t.dispatch(t.state.tr.setMeta(rn,{setDragging:null})))}function d(u){if(!u.which)return c(u);const h=rn.getState(t.state);if(h&&h.dragging){const f=jx(h.dragging,u,n);Bx(t,h.activeHandle,f,r)}}return Bx(t,i.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",d),e.preventDefault(),!0}function hV(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function fV(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Lx(t,e,n,r){const o=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!s)return-1;const{pos:i}=s,a=ua(t.state.doc.resolve(i));if(!a)return-1;if(n=="right")return a.pos;const l=Oe.get(a.node(-1)),c=a.start(-1),d=l.map.indexOf(a.pos-c);return d%l.width==0?-1:c+l.map[d-1]}function jx(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function RM(t,e){t.dispatch(t.state.tr.setMeta(rn,{setHandle:e}))}function pV(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),s=Oe.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const d=c*s.width+a;if(c&&s.map[d]==s.map[d-s.width])continue;const u=s.map[d],h=o.nodeAt(u).attrs,f=h.colspan==1?0:a-s.colCount(u);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():mV(h.colspan);p[f]=n,l.setNodeMarkup(i+u,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function Bx(t,e,n,r){const o=t.state.doc.resolve(e),s=o.node(-1),i=o.start(-1),a=Oe.get(s).colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&Ig(s,l.firstChild,l,r,a,n)}function mV(t){return Array(t).fill(0)}function gV(t,e){var n;const r=[],o=t.doc.resolve(e),s=o.node(-1);if(!s)return ge.empty;const i=Oe.get(s),a=o.start(-1),l=i.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<i.height;c++){const d=l+c*i.width;if((l==i.width-1||i.map[d]!=i.map[d+1])&&(c==0||i.map[d]!=i.map[d-i.width])){const u=i.map[d],h=a+u+s.nodeAt(u).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=rn.getState(t))!=null&&n.dragging&&r.push(Te.node(a+u,a+u+s.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),r.push(Te.widget(h,f))}}return ge.create(t.doc,r)}function yV({allowTableNodeSelection:t=!1}={}){return new ue({key:Eo,state:{init(){return null},apply(e,n){const r=e.getMeta(Eo);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:R8,handleDOMEvents:{mousedown:iV},createSelectionBetween(e){return Eo.getState(e.state)!=null?e.state.selection:null},handleTripleClick:oV,handleKeyDown:rV,handlePaste:sV},appendTransaction(e,n,r){return D8(r,L8(r,n),t)}})}class ze extends Z{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ze.valid(r)?new ze(r):Z.near(r)}content(){return D.empty}eq(e){return e instanceof ze&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ze(e.resolve(n.pos))}getBookmark(){return new Fb(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!bV(e)||!vV(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ze.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(ze.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!z.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(ze.valid(a))return a}return null}}}ze.prototype.visible=!1;ze.findFrom=ze.findGapCursorFrom;Z.jsonID("gapcursor",ze);class Fb{constructor(e){this.pos=e}map(e){return new Fb(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ze.valid(n)?new ze(n):Z.near(n)}}function bV(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function vV(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function wV(){return new ue({props:{decorations:SV,createSelectionBetween(t,e,n){return e.pos==n.pos&&ze.valid(n)?new ze(n):null},handleClick:kV,handleKeyDown:xV,handleDOMEvents:{beforeinput:CV}}})}const xV=Mb({ArrowLeft:bd("horiz",-1),ArrowRight:bd("horiz",1),ArrowUp:bd("vert",-1),ArrowDown:bd("vert",1)});function bd(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof H){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=ze.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new ze(c))),!0):!1}}function kV(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ze.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&z.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ze(r))),!0)}function CV(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ze))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=_.empty;for(let i=r.length-1;i>=0;i--)o=_.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new D(o,0,0));return s.setSelection(H.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function SV(t){if(!(t.selection instanceof ze))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ge.create(t.doc,[Te.widget(t.selection.head,e,{key:"gapcursor"})])}const TV=Pe.create({name:"gapCursor",addProseMirrorPlugins(){return[wV()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=me(F(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var Ru=200,et=function(){};et.prototype.append=function(e){return e.length?(e=et.from(e),!this.length&&e||e.length<Ru&&this.leafAppend(e)||this.length<Ru&&e.leafPrepend(this)||this.appendInner(e)):this};et.prototype.prepend=function(e){return e.length?et.from(e).append(this):this};et.prototype.appendInner=function(e){return new EV(this,e)};et.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?et.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};et.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};et.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};et.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};et.from=function(e){return e instanceof et?e:e&&e.length?new IM(e):et.empty};var IM=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Ru)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Ru)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(et);et.empty=new IM([]);var EV=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(et);const MV=500;class jn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],d=[];return this.items.forEach((u,h)=>{if(!u.step){o||(o=this.remapping(r,h+1),s=o.maps.length),s--,d.push(u);return}if(o){d.push(new mo(u.map));let f=u.step.map(o.slice(s)),p;f&&i.maybeStep(f).doc&&(p=i.mapping.maps[i.mapping.maps.length-1],c.push(new mo(p,void 0,void 0,c.length+d.length))),s--,p&&o.appendMap(p,s)}else i.maybeStep(u.step);if(u.selection)return a=o?u.selection.map(o.slice(s)):u.selection,l=new jn(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),h=new mo(e.mapping.maps[d],u,n),f;(f=l&&l.merge(h))&&(h=f,d?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(i++,n=void 0),o||(l=h)}let c=i-r.depth;return c>_V&&(a=AV(a,c),i-=c),new jn(a.append(s),i)}remapping(e,n){let r=new Gi;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new jn(this.items.append(e.map(n=>new mo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;i=Math.min(i,f);let p=s.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),y=h.selection&&h.selection.map(s.slice(l+1,f));y&&a++,r.push(new mo(p,g,y))}else r.push(new mo(p))},o);let c=[];for(let h=n;h<i;h++)c.push(new mo(s.maps[h]));let d=this.items.slice(0,o).append(c).append(r),u=new jn(d,a);return u.emptyItemCount()>MV&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=i.selection&&i.selection.map(n.slice(r));d&&s++;let u=new mo(c.invert(),l,d),h,f=o.length-1;(h=o.length&&o[f].merge(u))?o[f]=h:o.push(u)}}else i.map&&r--},this.items.length,0),new jn(et.from(o.reverse()),s)}}jn.empty=new jn(et.empty,0);function AV(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let mo=class NM{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new NM(n.getMap().invert(),n,this.selection)}}};class ko{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const _V=20;function PV(t,e,n,r){let o=n.getMeta(Os),s;if(o)return o.historyState;n.getMeta(NV)&&(t=new ko(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(Os))return i.getMeta(Os).redo?new ko(t.done.addTransform(n,void 0,r,Yd(e)),t.undone,Vx(n.mapping.maps),t.prevTime,t.prevComposition):new ko(t.done,t.undone.addTransform(n,void 0,r,Yd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!RV(n,t.prevRanges)),c=i?Bp(t.prevRanges,n.mapping):Vx(n.mapping.maps);return new ko(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Yd(e)),jn.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new ko(t.done.rebased(n,s),t.undone.rebased(n,s),Bp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ko(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Bp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function RV(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function Vx(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,i)=>e.push(s,i));return e}function Bp(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function IV(t,e,n){let r=Yd(e),o=Os.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),l=new ko(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(Os,{redo:n,historyState:l})}let Vp=!1,$x=null;function Yd(t){let e=t.plugins;if($x!=e){Vp=!1,$x=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Vp=!0;break}}return Vp}const Os=new xe("history"),NV=new xe("closeHistory");function DV(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ue({key:Os,state:{init(){return new ko(jn.empty,jn.empty,null,0,-1)},apply(e,n,r){return PV(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?zb:r=="historyRedo"?Ub:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function DM(t,e){return(n,r)=>{let o=Os.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=IV(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const zb=DM(!1,!0),Ub=DM(!0,!0),OV=Pe.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>zb(t,e),redo:()=>({state:t,dispatch:e})=>Ub(t,e)}},addProseMirrorPlugins(){return[DV(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Ñ":()=>this.editor.commands.undo(),"Shift-Mod-Ñ":()=>this.editor.commands.redo()}}}),LV="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mÃ¶gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",jV="ÎµÎ»1Ï…2Ð±Ð³1ÐµÐ»3Ð´ÐµÑ‚Ð¸4ÐµÑŽ2ÐºÐ°Ñ‚Ð¾Ð»Ð¸Ðº6Ð¾Ð¼3Ð¼ÐºÐ´2Ð¾Ð½1ÑÐºÐ²Ð°6Ð¾Ð½Ð»Ð°Ð¹Ð½5Ñ€Ð³3Ñ€ÑƒÑ2Ñ„2ÑÐ°Ð¹Ñ‚3Ñ€Ð±3ÑƒÐºÑ€3Ò›Ð°Ð·3Õ°Õ¡Õµ3×™×©×¨××œ5×§×•×3Ø§Ø¨ÙˆØ¸Ø¨ÙŠ5Ø±Ø§Ù…ÙƒÙˆ5Ù„Ø§Ø±Ø¯Ù†4Ø¨Ø­Ø±ÙŠÙ†5Ø¬Ø²Ø§Ø¦Ø±5Ø³Ø¹ÙˆØ¯ÙŠØ©6Ø¹Ù„ÙŠØ§Ù†5Ù…ØºØ±Ø¨5Ù…Ø§Ø±Ø§Øª5ÛŒØ±Ø§Ù†5Ø¨Ø§Ø±Øª2Ø²Ø§Ø±4ÙŠØªÙƒ3Ú¾Ø§Ø±Øª5ØªÙˆÙ†Ø³4Ø³ÙˆØ¯Ø§Ù†3Ø±ÙŠØ©5Ø´Ø¨ÙƒØ©4Ø¹Ø±Ø§Ù‚2Ø¨2Ù…Ø§Ù†4ÙÙ„Ø³Ø·ÙŠÙ†6Ù‚Ø·Ø±3ÙƒØ§Ø«ÙˆÙ„ÙŠÙƒ6ÙˆÙ…3Ù…ØµØ±2Ù„ÙŠØ³ÙŠØ§5ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§7Ù‚Ø¹4Ù‡Ù…Ø±Ø§Ù‡5Ù¾Ø§Ú©Ø³ØªØ§Ù†7Ú€Ø§Ø±Øª4à¤•à¥‰à¤®3à¤¨à¥‡à¤Ÿ3à¤­à¤¾à¤°à¤¤0à¤®à¥3à¥‹à¤¤5à¤¸à¤‚à¤—à¤ à¤¨5à¦¬à¦¾à¦‚à¦²à¦¾5à¦­à¦¾à¦°à¦¤2à§°à¦¤4à¨­à¨¾à¨°à¨¤4àª­àª¾àª°àª¤4à¬­à¬¾à¬°à¬¤4à®‡à®¨à¯à®¤à®¿à®¯à®¾6à®²à®™à¯à®•à¯ˆ6à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯11à°­à°¾à°°à°¤à±5à²­à²¾à²°à²¤4à´­à´¾à´°à´¤à´‚5à¶½à¶‚à¶šà·4à¸„à¸­à¸¡3à¹„à¸—à¸¢3àº¥àº²àº§3áƒ’áƒ”2ã¿ã‚“ãª3ã‚¢ãƒžã‚¾ãƒ³4ã‚¯ãƒ©ã‚¦ãƒ‰4ã‚°ãƒ¼ã‚°ãƒ«4ã‚³ãƒ 2ã‚¹ãƒˆã‚¢3ã‚»ãƒ¼ãƒ«3ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³6ãƒã‚¤ãƒ³ãƒˆ4ä¸–ç•Œ2ä¸­ä¿¡1å›½1åœ‹1æ–‡ç½‘3äºšé©¬é€Š3ä¼ä¸š2ä½›å±±2ä¿¡æ¯2å¥åº·2å…«å¦2å…¬å¸1ç›Š2å°æ¹¾1ç£2å•†åŸŽ1åº—1æ ‡2å˜‰é‡Œ0å¤§é…’åº—5åœ¨çº¿2å¤§æ‹¿2å¤©ä¸»æ•™3å¨±ä¹2å®¶é›»2å¹¿ä¸œ2å¾®åš2æ…ˆå–„2æˆ‘çˆ±ä½ 3æ‰‹æœº2æ‹›è˜2æ”¿åŠ¡1åºœ2æ–°åŠ å¡2é—»2æ—¶å°š2æ›¸ç±2æœºæž„2æ·¡é©¬é”¡3æ¸¸æˆ2æ¾³é–€2ç‚¹çœ‹2ç§»åŠ¨2ç»„ç»‡æœºæž„4ç½‘å€1åº—1ç«™1ç»œ2è”é€š2è°·æ­Œ2è´­ç‰©2é€šè²©2é›†å›¢2é›»è¨Šç›ˆç§‘4é£žåˆ©æµ¦3é£Ÿå“2é¤åŽ…2é¦™æ ¼é‡Œæ‹‰3æ¸¯2ë‹·ë„·1ì»´2ì‚¼ì„±2í•œêµ­2",Xi=(t,e)=>{for(const n in e)t[n]=e[n];return t},Ng="numeric",Dg="ascii",Og="alpha",ul="asciinumeric",el="alphanumeric",Lg="domain",OM="emoji",BV="scheme",VV="slashscheme",$p="whitespace";function $V(t,e){return t in e||(e[t]=[]),e[t]}function Ms(t,e,n){e[Ng]&&(e[ul]=!0,e[el]=!0),e[Dg]&&(e[ul]=!0,e[Og]=!0),e[ul]&&(e[el]=!0),e[Og]&&(e[el]=!0),e[el]&&(e[Lg]=!0),e[OM]&&(e[Lg]=!0);for(const r in e){const o=$V(r,n);o.indexOf(t)<0&&o.push(t)}}function HV(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Ut(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ut.groups={};Ut.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||Ut.groups;let o;return e&&e.j?o=e:(o=new Ut(e),n&&r&&Ms(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const s=t.length;if(!s)return o;for(let i=0;i<s-1;i++)o=o.tt(t[i]);return o.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Ut.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const s=e;let i,a=o.go(t);if(a?(i=new Ut,Xi(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new Ut,s){if(r)if(i.t&&typeof i.t=="string"){const l=Xi(HV(i.t,r),n);Ms(s,l,r)}else n&&Ms(s,n,r);i.t=s}return o.j[t]=i,i}};const de=(t,e,n,r,o)=>t.ta(e,n,r,o),He=(t,e,n,r,o)=>t.tr(e,n,r,o),Hx=(t,e,n,r,o)=>t.ts(e,n,r,o),N=(t,e,n,r,o)=>t.tt(e,n,r,o),Br="WORD",jg="UWORD",LM="ASCIINUMERICAL",jM="ALPHANUMERICAL",Fl="LOCALHOST",Bg="TLD",Vg="UTLD",Xd="SCHEME",Ci="SLASH_SCHEME",Wb="NUM",$g="WS",Gb="NL",hl="OPENBRACE",fl="CLOSEBRACE",Iu="OPENBRACKET",Nu="CLOSEBRACKET",Du="OPENPAREN",Ou="CLOSEPAREN",Lu="OPENANGLEBRACKET",ju="CLOSEANGLEBRACKET",Bu="FULLWIDTHLEFTPAREN",Vu="FULLWIDTHRIGHTPAREN",$u="LEFTCORNERBRACKET",Hu="RIGHTCORNERBRACKET",Fu="LEFTWHITECORNERBRACKET",zu="RIGHTWHITECORNERBRACKET",Uu="FULLWIDTHLESSTHAN",Wu="FULLWIDTHGREATERTHAN",Gu="AMPERSAND",qu="APOSTROPHE",Ku="ASTERISK",Co="AT",Zu="BACKSLASH",Ju="BACKTICK",Yu="CARET",Mo="COLON",qb="COMMA",Xu="DOLLAR",rr="DOT",Qu="EQUALS",Kb="EXCLAMATION",mn="HYPHEN",pl="PERCENT",eh="PIPE",th="PLUS",nh="POUND",ml="QUERY",Zb="QUOTE",BM="FULLWIDTHMIDDLEDOT",Jb="SEMI",or="SLASH",gl="TILDE",rh="UNDERSCORE",VM="EMOJI",oh="SYM";var $M=Object.freeze({__proto__:null,ALPHANUMERICAL:jM,AMPERSAND:Gu,APOSTROPHE:qu,ASCIINUMERICAL:LM,ASTERISK:Ku,AT:Co,BACKSLASH:Zu,BACKTICK:Ju,CARET:Yu,CLOSEANGLEBRACKET:ju,CLOSEBRACE:fl,CLOSEBRACKET:Nu,CLOSEPAREN:Ou,COLON:Mo,COMMA:qb,DOLLAR:Xu,DOT:rr,EMOJI:VM,EQUALS:Qu,EXCLAMATION:Kb,FULLWIDTHGREATERTHAN:Wu,FULLWIDTHLEFTPAREN:Bu,FULLWIDTHLESSTHAN:Uu,FULLWIDTHMIDDLEDOT:BM,FULLWIDTHRIGHTPAREN:Vu,HYPHEN:mn,LEFTCORNERBRACKET:$u,LEFTWHITECORNERBRACKET:Fu,LOCALHOST:Fl,NL:Gb,NUM:Wb,OPENANGLEBRACKET:Lu,OPENBRACE:hl,OPENBRACKET:Iu,OPENPAREN:Du,PERCENT:pl,PIPE:eh,PLUS:th,POUND:nh,QUERY:ml,QUOTE:Zb,RIGHTCORNERBRACKET:Hu,RIGHTWHITECORNERBRACKET:zu,SCHEME:Xd,SEMI:Jb,SLASH:or,SLASH_SCHEME:Ci,SYM:oh,TILDE:gl,TLD:Bg,UNDERSCORE:rh,UTLD:Vg,UWORD:jg,WORD:Br,WS:$g});const Ir=/[a-z]/,Ba=new RegExp("\\p{L}","u"),Hp=new RegExp("\\p{Emoji}","u"),Nr=/\d/,Fp=/\s/,Fx="\r",zp=`
`,FV="ï¸",zV="â€",Up="ï¿¼";let vd=null,wd=null;function UV(t=[]){const e={};Ut.groups=e;const n=new Ut;vd==null&&(vd=zx(LV)),wd==null&&(wd=zx(jV)),N(n,"'",qu),N(n,"{",hl),N(n,"}",fl),N(n,"[",Iu),N(n,"]",Nu),N(n,"(",Du),N(n,")",Ou),N(n,"<",Lu),N(n,">",ju),N(n,"ï¼ˆ",Bu),N(n,"ï¼‰",Vu),N(n,"ã€Œ",$u),N(n,"ã€",Hu),N(n,"ã€Ž",Fu),N(n,"ã€",zu),N(n,"ï¼œ",Uu),N(n,"ï¼ž",Wu),N(n,"&",Gu),N(n,"*",Ku),N(n,"@",Co),N(n,"`",Ju),N(n,"^",Yu),N(n,":",Mo),N(n,",",qb),N(n,"$",Xu),N(n,".",rr),N(n,"=",Qu),N(n,"!",Kb),N(n,"-",mn),N(n,"%",pl),N(n,"|",eh),N(n,"+",th),N(n,"#",nh),N(n,"?",ml),N(n,'"',Zb),N(n,"/",or),N(n,";",Jb),N(n,"~",gl),N(n,"_",rh),N(n,"\\",Zu),N(n,"ãƒ»",BM);const r=He(n,Nr,Wb,{[Ng]:!0});He(r,Nr,r);const o=He(r,Ir,LM,{[ul]:!0}),s=He(r,Ba,jM,{[el]:!0}),i=He(n,Ir,Br,{[Dg]:!0});He(i,Nr,o),He(i,Ir,i),He(o,Nr,o),He(o,Ir,o);const a=He(n,Ba,jg,{[Og]:!0});He(a,Ir),He(a,Nr,s),He(a,Ba,a),He(s,Nr,s),He(s,Ir),He(s,Ba,s);const l=N(n,zp,Gb,{[$p]:!0}),c=N(n,Fx,$g,{[$p]:!0}),d=He(n,Fp,$g,{[$p]:!0});N(n,Up,d),N(c,zp,l),N(c,Up,d),He(c,Fp,d),N(d,Fx),N(d,zp),He(d,Fp,d),N(d,Up,d);const u=He(n,Hp,VM,{[OM]:!0});N(u,"#"),He(u,Hp,u),N(u,FV,u);const h=N(u,zV);N(h,"#"),He(h,Hp,u);const f=[[Ir,i],[Nr,o]],p=[[Ir,null],[Ba,a],[Nr,s]];for(let g=0;g<vd.length;g++)go(n,vd[g],Bg,Br,f);for(let g=0;g<wd.length;g++)go(n,wd[g],Vg,jg,p);Ms(Bg,{tld:!0,ascii:!0},e),Ms(Vg,{utld:!0,alpha:!0},e),go(n,"file",Xd,Br,f),go(n,"mailto",Xd,Br,f),go(n,"http",Ci,Br,f),go(n,"https",Ci,Br,f),go(n,"ftp",Ci,Br,f),go(n,"ftps",Ci,Br,f),Ms(Xd,{scheme:!0,ascii:!0},e),Ms(Ci,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],x=t[g][1]?{[BV]:!0}:{[VV]:!0};y.indexOf("-")>=0?x[Lg]=!0:Ir.test(y)?Nr.test(y)?x[ul]=!0:x[Dg]=!0:x[Ng]=!0,Hx(n,y,y,x)}return Hx(n,"localhost",Fl,{ascii:!0}),n.jd=new Ut(oh),{start:n,tokens:Xi({groups:e},$M)}}function HM(t,e){const n=WV(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let s=0,i=0;for(;i<r;){let a=t,l=null,c=0,d=null,u=-1,h=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(u=0,h=0,d=a):u>=0&&(u+=n[i].length,h++),c+=n[i].length,s+=n[i].length,i++;s-=u,i-=h,c-=u,o.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return o}function WV(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),s,i=o<55296||o>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function go(t,e,n,r,o){let s;const i=e.length;for(let a=0;a<i-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Ut(r),s.jr=o.slice(),t.j[l]=s),t=s}return s=new Ut(n),s.jr=o.slice(),t.j[e[i-1]]=s,s}function zx(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let s=0;for(;o.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+s),10);i>0;i--)n.pop();r+=s}else n.push(t[r]),r++}return e}const zl={defaultProtocol:"http",events:null,format:Ux,formatHref:Ux,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Yb(t,e=null){let n=Xi({},zl);t&&(n=Xi(n,t instanceof Yb?t.o:t));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}Yb.prototype={o:zl,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:zl[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Ux(t){return t}function FM(t,e){this.t="token",this.v=t,this.tk=e}FM.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"â€¦":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=zl.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),s=this.toFormattedString(t),i={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),u=t.getObj("events",n,e);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),d&&Xi(i,d),{tagName:o,attributes:i,content:s,eventListeners:u}}};function af(t,e){class n extends FM{constructor(o,s){super(o,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Wx=af("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Gx=af("text"),GV=af("nl"),xd=af("url",{isLink:!0,toHref(t=zl.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Fl&&t[1].t===Mo}}),hn=t=>new Ut(t);function qV({groups:t}){const e=t.domain.concat([Gu,Ku,Co,Zu,Ju,Yu,Xu,Qu,mn,Wb,pl,eh,th,nh,or,oh,gl,rh]),n=[qu,Mo,qb,rr,Kb,pl,ml,Zb,Jb,Lu,ju,hl,fl,Nu,Iu,Du,Ou,Bu,Vu,$u,Hu,Fu,zu,Uu,Wu],r=[Gu,qu,Ku,Zu,Ju,Yu,Xu,Qu,mn,hl,fl,pl,eh,th,nh,ml,or,oh,gl,rh],o=hn(),s=N(o,gl);de(s,r,s),de(s,t.domain,s);const i=hn(),a=hn(),l=hn();de(o,t.domain,i),de(o,t.scheme,a),de(o,t.slashscheme,l),de(i,r,s),de(i,t.domain,i);const c=N(i,Co);N(s,Co,c),N(a,Co,c),N(l,Co,c);const d=N(s,rr);de(d,r,s),de(d,t.domain,s);const u=hn();de(c,t.domain,u),de(u,t.domain,u);const h=N(u,rr);de(h,t.domain,u);const f=hn(Wx);de(h,t.tld,f),de(h,t.utld,f),N(c,Fl,f);const p=N(u,mn);N(p,mn,p),de(p,t.domain,u),de(f,t.domain,u),N(f,rr,h),N(f,mn,p);const g=N(f,Mo);de(g,t.numeric,Wx);const y=N(i,mn),v=N(i,rr);N(y,mn,y),de(y,t.domain,i),de(v,r,s),de(v,t.domain,i);const x=hn(xd);de(v,t.tld,x),de(v,t.utld,x),de(x,t.domain,i),de(x,r,s),N(x,rr,v),N(x,mn,y),N(x,Co,c);const w=N(x,Mo),C=hn(xd);de(w,t.numeric,C);const k=hn(xd),S=hn();de(k,e,k),de(k,n,S),de(S,e,k),de(S,n,S),N(x,or,k),N(C,or,k);const T=N(a,Mo),E=N(l,Mo),M=N(E,or),P=N(M,or);de(a,t.domain,i),N(a,rr,v),N(a,mn,y),de(l,t.domain,i),N(l,rr,v),N(l,mn,y),de(T,t.domain,k),N(T,or,k),N(T,ml,k),de(P,t.domain,k),de(P,e,k),N(P,or,k);const B=[[hl,fl],[Iu,Nu],[Du,Ou],[Lu,ju],[Bu,Vu],[$u,Hu],[Fu,zu],[Uu,Wu]];for(let $=0;$<B.length;$++){const[W,Y]=B[$],G=N(k,W);N(S,W,G),N(G,Y,k);const X=hn(xd);de(G,e,X);const L=hn();de(G,n),de(X,e,X),de(X,n,L),de(L,e,X),de(L,n,L),N(X,Y,k),N(L,Y,k)}return N(o,Fl,x),N(o,Gb,GV),{start:o,tokens:$M}}function KV(t,e,n){let r=n.length,o=0,s=[],i=[];for(;o<r;){let a=t,l=null,c=null,d=0,u=null,h=-1;for(;o<r&&!(l=a.go(n[o].t));)i.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(h=0,u=a):h>=0&&h++,o++,d++;if(h<0)o-=d,o<r&&(i.push(n[o]),o++);else{i.length>0&&(s.push(Wp(Gx,e,i)),i=[]),o-=h,d-=h;const f=u.t,p=n.slice(o-d,o);s.push(Wp(f,e,p))}}return i.length>0&&s.push(Wp(Gx,e,i)),s}function Wp(t,e,n){const r=n[0].s,o=n[n.length-1].e,s=e.slice(r,o);return new t(s,n)}const ZV=typeof console<"u"&&console&&console.warn||(()=>{}),JV="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",De={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function YV(){return Ut.groups={},De.scanner=null,De.parser=null,De.tokenQueue=[],De.pluginQueue=[],De.customSchemes=[],De.initialized=!1,De}function qx(t,e=!1){if(De.initialized&&ZV(`linkifyjs: already initialized - will not register custom scheme "${t}" ${JV}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);De.customSchemes.push([t,e])}function XV(){De.scanner=UV(De.customSchemes);for(let t=0;t<De.tokenQueue.length;t++)De.tokenQueue[t][1]({scanner:De.scanner});De.parser=qV(De.scanner.tokens);for(let t=0;t<De.pluginQueue.length;t++)De.pluginQueue[t][1]({scanner:De.scanner,parser:De.parser});return De.initialized=!0,De}function Xb(t){return De.initialized||XV(),KV(De.parser.start,t,HM(De.scanner.start,t))}Xb.scan=HM;function zM(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Yb(n),o=Xb(t),s=[];for(let i=0;i<o.length;i++){const a=o[i];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}function QV(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function e$(t){return new ue({key:new xe("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!o||s)return;const{tr:i}=r,a=Ob(n.doc,[...e]);if(Lb(a).forEach(({newRange:c})=>{const d=_u(r.doc,c,f=>f.isTextblock);let u,h;if(d.length>1?(u=d[0],h=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ")):d.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(u=d[0],h=r.doc.textBetween(u.pos,c.to,void 0," ")),u&&h){const f=h.split(" ").filter(v=>v!=="");if(f.length<=0)return!1;const p=f[f.length-1],g=u.pos+h.lastIndexOf(p);if(!p)return!1;const y=Xb(p).map(v=>v.toObject(t.defaultProtocol));if(!QV(y))return!1;y.filter(v=>v.isLink).map(v=>({...v,from:g+v.start+1,to:g+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{jb(v.from,v.to,r.doc).some(x=>x.mark.type===t.type)||i.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!i.steps.length)return i}})}function t$(t){return new ue({key:new xe("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let i=r.target;const a=[];for(;i.nodeName!=="DIV";)a.push(i),i=i.parentNode;if(!a.find(h=>h.nodeName==="A"))return!1;const l=hM(e.state,t.type.name),c=r.target,d=(o=c==null?void 0:c.href)!==null&&o!==void 0?o:l.href,u=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&d?(window.open(d,u),!0):!1}}})}function n$(t){return new ue({key:new xe("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:s}=o,{empty:i}=s;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=zM(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}const r$=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function hs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(r$,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const o$=ht.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){qx(t);return}qx(t.scheme,t.optionalSlashes)})},onDestroy(){YV()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!hs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!hs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!hs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",an(this.options.HTMLAttributes,t),0]:["a",an(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!hs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!hs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ws({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=zM(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:i=>!!hs(i,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(e$({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!hs(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(t$({type:this.type})),this.options.linkOnPaste&&t.push(n$({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),s$=Er.create({name:"text",group:"inline"}),En=()=>new Map,Hg=t=>{const e=En();return t.forEach((n,r)=>{e.set(r,n)}),e},_r=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},i$=(t,e)=>{const n=[];for(const[r,o]of t)n.push(e(o,r));return n},a$=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},qs=()=>new Set,Gp=t=>t[t.length-1],l$=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Ks=Array.from,c$=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},Fg=Array.isArray;class UM{constructor(){this._observers=En()}on(e,n){return _r(this._observers,e,qs).add(n),n}once(e,n){const r=(...o)=>{this.off(e,r),n(...o)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Ks((this._observers.get(e)||En()).values()).forEach(r=>r(...n))}destroy(){this._observers=En()}}const eo=Math.floor,Qd=Math.abs,Jr=(t,e)=>t<e?t:e,qn=(t,e)=>t>e?t:e,WM=t=>t!==0?t<0:1/t<0,Kx=1,Zx=2,qp=4,Kp=8,Ul=32,Yr=64,Nt=128,d$=1<<29,lf=31,zg=63,Ls=127,u$=2147483647,GM=Number.MAX_SAFE_INTEGER,h$=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&eo(t)===t),f$=String.fromCharCode,p$=t=>t.toLowerCase(),m$=/^\s*/g,g$=t=>t.replace(m$,""),y$=/([A-Z])/g,Jx=(t,e)=>g$(t.replace(y$,n=>`${e}${p$(n)}`)),b$=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.codePointAt(o);return r},Wl=typeof TextEncoder<"u"?new TextEncoder:null,v$=t=>Wl.encode(t),w$=Wl?v$:b$;let yl=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});yl&&yl.decode(new Uint8Array).length===1&&(yl=null);class _c{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Pc=()=>new _c,x$=t=>{const e=Pc();return t(e),Bn(e)},k$=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Bn=t=>{const e=new Uint8Array(k$(t));let n=0;for(let r=0;r<t.bufs.length;r++){const o=t.bufs[r];e.set(o,n),n+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},C$=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(qn(n,e)*2),t.cpos=0)},Qe=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},Ug=Qe,we=(t,e)=>{for(;e>Ls;)Qe(t,Nt|Ls&e),e=eo(e/128);Qe(t,Ls&e)},Qb=(t,e)=>{const n=WM(e);for(n&&(e=-e),Qe(t,(e>zg?Nt:0)|(n?Yr:0)|zg&e),e=eo(e/64);e>0;)Qe(t,(e>Ls?Nt:0)|Ls&e),e=eo(e/128)},Wg=new Uint8Array(3e4),S$=Wg.length/3,T$=(t,e)=>{if(e.length<S$){const n=Wl.encodeInto(e,Wg).written||0;we(t,n);for(let r=0;r<n;r++)Qe(t,Wg[r])}else Qt(t,w$(e))},E$=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;we(t,r);for(let o=0;o<r;o++)Qe(t,n.codePointAt(o))},ji=Wl&&Wl.encodeInto?T$:E$,cf=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=Jr(n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(qn(n*2,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},Qt=(t,e)=>{we(t,e.byteLength),cf(t,e)},e0=(t,e)=>{C$(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},M$=(t,e)=>e0(t,4).setFloat32(0,e,!1),A$=(t,e)=>e0(t,8).setFloat64(0,e,!1),_$=(t,e)=>e0(t,8).setBigInt64(0,e,!1),Yx=new DataView(new ArrayBuffer(4)),P$=t=>(Yx.setFloat32(0,t),Yx.getFloat32(0)===t),Qi=(t,e)=>{switch(typeof e){case"string":Qe(t,119),ji(t,e);break;case"number":h$(e)&&Qd(e)<=u$?(Qe(t,125),Qb(t,e)):P$(e)?(Qe(t,124),M$(t,e)):(Qe(t,123),A$(t,e));break;case"bigint":Qe(t,122),_$(t,e);break;case"object":if(e===null)Qe(t,126);else if(Fg(e)){Qe(t,117),we(t,e.length);for(let n=0;n<e.length;n++)Qi(t,e[n])}else if(e instanceof Uint8Array)Qe(t,116),Qt(t,e);else{Qe(t,118);const n=Object.keys(e);we(t,n.length);for(let r=0;r<n.length;r++){const o=n[r];ji(t,o),Qi(t,e[o])}}break;case"boolean":Qe(t,e?120:121);break;default:Qe(t,127)}};class Xx extends _c{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&we(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Qx=t=>{t.count>0&&(Qb(t.encoder,t.count===1?t.s:-t.s),t.count>1&&we(t.encoder,t.count-2))};class eu{constructor(){this.encoder=new _c,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Qx(this),this.count=1,this.s=e)}toUint8Array(){return Qx(this),Bn(this.encoder)}}const ek=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);Qb(t.encoder,e),t.count>1&&we(t.encoder,t.count-2)}};class Zp{constructor(){this.encoder=new _c,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(ek(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return ek(this),Bn(this.encoder)}}class R${constructor(){this.sarr=[],this.s="",this.lensE=new eu}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new _c;return this.sarr.push(this.s),this.s="",ji(e,this.sarr.join("")),cf(e,this.lensE.toUint8Array()),Bn(e)}}const Ho=t=>new Error(t),Hn=()=>{throw Ho("Method unimplemented")},ln=()=>{throw Ho("Unexpected case")},qM=Ho("Unexpected end of array"),KM=Ho("Integer out of Range");class df{constructor(e){this.arr=e,this.pos=0}}const ha=t=>new df(t),I$=t=>t.pos!==t.arr.length,N$=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},en=t=>N$(t,fe(t)),ea=t=>t.arr[t.pos++],fe=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const o=t.arr[t.pos++];if(e=e+(o&Ls)*n,n*=128,o<Nt)return e;if(e>GM)throw KM}throw qM},t0=t=>{let e=t.arr[t.pos++],n=e&zg,r=64;const o=(e&Yr)>0?-1:1;if((e&Nt)===0)return o*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&Ls)*r,r*=128,e<Nt)return o*n;if(n>GM)throw KM}throw qM},D$=t=>{let e=fe(t);if(e===0)return"";{let n=String.fromCodePoint(ea(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(ea(t));else for(;e>0;){const r=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,o),e-=r}return decodeURIComponent(escape(n))}},O$=t=>yl.decode(en(t)),Bi=yl?O$:D$,n0=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},L$=t=>n0(t,4).getFloat32(0,!1),j$=t=>n0(t,8).getFloat64(0,!1),B$=t=>n0(t,8).getBigInt64(0,!1),V$=[t=>{},t=>null,t0,L$,j$,B$,t=>!1,t=>!0,Bi,t=>{const e=fe(t),n={};for(let r=0;r<e;r++){const o=Bi(t);n[o]=Gl(t)}return n},t=>{const e=fe(t),n=[];for(let r=0;r<e;r++)n.push(Gl(t));return n},en],Gl=t=>V$[127-ea(t)](t);class tk extends df{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),I$(this)?this.count=fe(this)+1:this.count=-1),this.count--,this.s}}class tu extends df{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=t0(this);const e=WM(this.s);this.count=1,e&&(this.s=-this.s,this.count=fe(this)+2)}return this.count--,this.s}}class Jp extends df{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=t0(this),n=e&1;this.diff=eo(e/2),this.count=1,n&&(this.count=fe(this)+2)}return this.s+=this.diff,this.count--,this.s}}class $${constructor(e){this.decoder=new tu(e),this.str=Bi(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const H$=crypto.getRandomValues.bind(crypto),F$=Math.random,ZM=()=>H$(new Uint32Array(1))[0],z$=t=>t[eo(F$()*t.length)],U$="10000000-1000-4000-8000"+-1e11,W$=()=>U$.replace(/[018]/g,t=>(t^ZM()&15>>t/4).toString(16)),G$=Date.now,nk=t=>new Promise(t);Promise.all.bind(Promise);const rk=t=>t===void 0?null:t;class q${constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let JM=new q$,K$=!0;try{typeof localStorage<"u"&&localStorage&&(JM=localStorage,K$=!1)}catch{}const Z$=JM,J$=Object.assign,YM=Object.keys,Y$=(t,e)=>{for(const n in t)e(t[n],n)},ok=t=>YM(t).length,X$=t=>{for(const e in t)return!1;return!0},XM=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},Q$=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e6=(t,e)=>t===e||ok(t)===ok(e)&&XM(t,(n,r)=>(n!==void 0||Q$(e,r))&&e[r]===n),t6=Object.freeze,QM=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&QM(t[e])}return t6(t)},r0=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&r0(t,e,n+1)}},n6=t=>t,r6=(t,e)=>e.includes(t);var eA={};const ta=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",tA=typeof window<"u"&&typeof document<"u"&&!ta;let er;const o6=()=>{if(er===void 0)if(ta){er=En();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&er.set(e,""),e=r):e!==null&&(er.set(e,r),e=null)}e!==null&&er.set(e,"")}else typeof location=="object"?(er=En(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");er.set(`--${Jx(e,"-")}`,n),er.set(`-${Jx(e,"-")}`,n)}})):er=En();return er},Gg=t=>o6().has(t),sh=t=>rk(ta?eA[t.toUpperCase().replaceAll("-","_")]:Z$.getItem(t)),nA=t=>Gg("--"+t)||sh(t)!==null;nA("production");const s6=ta&&r6(eA.FORCE_COLOR,["true","1","2"]),i6=s6||!Gg("--no-colors")&&!nA("no-color")&&(!ta||process.stdout.isTTY)&&(!ta||Gg("--color")||sh("COLORTERM")!==null||(sh("TERM")||"").includes("color")),a6=t=>new Uint8Array(t),l6=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=f$(t[n]);return btoa(e)},c6=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),d6=tA?l6:c6,u6=t=>{const e=a6(t.byteLength);return e.set(t),e},h6=t=>x$(e=>Qi(e,t));class f6{constructor(e,n){this.left=e,this.right=n}}const Dr=(t,e)=>new f6(t,e),p6=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const m6=t=>i$(t,(e,n)=>`${n}:${e};`).join(""),g6=t=>class{constructor(n){this._=n}destroy(){t(this._)}},y6=g6(clearTimeout),o0=(t,e)=>new y6(setTimeout(e,t)),io=Symbol,rA=io(),oA=io(),b6=io(),v6=io(),w6=io(),sA=io(),x6=io(),s0=io(),k6=io(),C6=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},S6={[rA]:Dr("font-weight","bold"),[oA]:Dr("font-weight","normal"),[b6]:Dr("color","blue"),[w6]:Dr("color","green"),[v6]:Dr("color","grey"),[sA]:Dr("color","red"),[x6]:Dr("color","purple"),[s0]:Dr("color","orange"),[k6]:Dr("color","black")},T6=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[],r=En();let o=[],s=0;for(;s<t.length;s++){const a=t[s],l=S6[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=m6(r);s>0||c.length>0?(e.push("%c"+a),n.push(c)):e.push(a)}else break}}for(s>0&&(o=n,o.unshift(e.join("")));s<t.length;s++){const a=t[s];a instanceof Symbol||o.push(a)}return o},iA=i6?T6:C6,E6=(...t)=>{console.log(...iA(t)),lA.forEach(e=>e.print(t))},aA=(...t)=>{console.warn(...iA(t)),t.unshift(s0),lA.forEach(e=>e.print(t))},lA=qs(),cA=t=>({[Symbol.iterator](){return this},next:t}),M6=(t,e)=>cA(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),Yp=(t,e)=>cA(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class i0{constructor(e,n){this.clock=e,this.len=n}}class fa{constructor(){this.clients=new Map}}const Fo=(t,e,n)=>e.clients.forEach((r,o)=>{const s=t.doc.store.clients.get(o);if(s!=null){const i=s[s.length-1],a=i.id.clock+i.length;for(let l=0,c=r[l];l<r.length&&c.clock<a;c=r[++l])wA(t,s,c.clock,c.len,n)}}),A6=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const o=eo((n+r)/2),s=t[o],i=s.clock;if(i<=e){if(e<i+s.len)return o;n=o+1}else r=o-1}return null},pa=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&A6(n,e.clock)!==null},a0=t=>{t.clients.forEach(e=>{e.sort((o,s)=>o.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const o=e[r-1],s=e[n];o.clock+o.len>=s.clock?o.len=qn(o.len,s.clock+s.len-o.clock):(r<n&&(e[r]=s),r++)}e.length=r})},qg=t=>{const e=new fa;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let i=n+1;i<t.length;i++)l$(s,t[i].clients.get(o)||[]);e.clients.set(o,s)}});return a0(e),e},ql=(t,e,n,r)=>{_r(t.clients,e,()=>[]).push(new i0(n,r))},dA=()=>new fa,uA=t=>{const e=dA();return t.clients.forEach((n,r)=>{const o=[];for(let s=0;s<n.length;s++){const i=n[s];if(i.deleted){const a=i.id.clock;let l=i.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])l+=c.length;o.push(new i0(a,l))}}o.length>0&&e.clients.set(r,o)}),e},ma=(t,e)=>{we(t.restEncoder,e.clients.size),Ks(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),we(t.restEncoder,n);const o=r.length;we(t.restEncoder,o);for(let s=0;s<o;s++){const i=r[s];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},l0=t=>{const e=new fa,n=fe(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const o=fe(t.restDecoder),s=fe(t.restDecoder);if(s>0){const i=_r(e.clients,o,()=>[]);for(let a=0;a<s;a++)i.push(new i0(t.readDsClock(),t.readDsLen()))}}return e},sk=(t,e,n)=>{const r=new fa,o=fe(t.restDecoder);for(let s=0;s<o;s++){t.resetDsCurVal();const i=fe(t.restDecoder),a=fe(t.restDecoder),l=n.clients.get(i)||[],c=qe(n,i);for(let d=0;d<a;d++){const u=t.readDsClock(),h=u+t.readDsLen();if(u<c){c<h&&ql(r,i,c,h-c);let f=An(l,u),p=l[f];for(!p.deleted&&p.id.clock<u&&(l.splice(f+1,0,hh(e,p,u-p.id.clock)),f++);f<l.length&&(p=l[f++],p.id.clock<h);)p.deleted||(h<p.id.clock+p.length&&l.splice(f,0,hh(e,p,h-p.id.clock)),p.delete(e))}else ql(r,i,u,h-u)}}if(r.clients.size>0){const s=new Zs;return we(s.restEncoder,0),ma(s,r),s.toUint8Array()}return null},hA=ZM;class Qo extends UM{constructor({guid:e=W$(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:s=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=hA(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new bA,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=nk(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>nk(c=>{const d=u=>{(u===void 0||u===!0)&&(this.off("sync",d),c())};this.on("sync",d)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ae(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ks(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Ae(this,e,n)}get(e,n=tt){const r=_r(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),o=r.constructor;if(n!==tt&&o!==n)if(o===tt){const s=new n;s._map=r._map,r._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=s}),s._start=r._start;for(let i=s._start;i!==null;i=i.right)i.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Hi)}getText(e=""){return this.get(e,zo)}getMap(e=""){return this.get(e,ra)}getXmlElement(e=""){return this.get(e,Rt)}getXmlFragment(e=""){return this.get(e,Js)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Ks(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Qo({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Ae(e.parent.doc,r=>{const o=n.doc;e.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class fA{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return fe(this.restDecoder)}readDsLen(){return fe(this.restDecoder)}}class pA extends fA{readLeftID(){return se(fe(this.restDecoder),fe(this.restDecoder))}readRightID(){return se(fe(this.restDecoder),fe(this.restDecoder))}readClient(){return fe(this.restDecoder)}readInfo(){return ea(this.restDecoder)}readString(){return Bi(this.restDecoder)}readParentInfo(){return fe(this.restDecoder)===1}readTypeRef(){return fe(this.restDecoder)}readLen(){return fe(this.restDecoder)}readAny(){return Gl(this.restDecoder)}readBuf(){return u6(en(this.restDecoder))}readJSON(){return JSON.parse(Bi(this.restDecoder))}readKey(){return Bi(this.restDecoder)}}class _6{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=fe(this.restDecoder),this.dsCurrVal}readDsLen(){const e=fe(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class na extends _6{constructor(e){super(e),this.keys=[],fe(e),this.keyClockDecoder=new Jp(en(e)),this.clientDecoder=new tu(en(e)),this.leftClockDecoder=new Jp(en(e)),this.rightClockDecoder=new Jp(en(e)),this.infoDecoder=new tk(en(e),ea),this.stringDecoder=new $$(en(e)),this.parentInfoDecoder=new tk(en(e),ea),this.typeRefDecoder=new tu(en(e)),this.lenDecoder=new tu(en(e))}readLeftID(){return new Vi(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Vi(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Gl(this.restDecoder)}readBuf(){return en(this.restDecoder)}readJSON(){return Gl(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class P6{constructor(){this.restEncoder=Pc()}toUint8Array(){return Bn(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){we(this.restEncoder,e)}writeDsLen(e){we(this.restEncoder,e)}}class Rc extends P6{writeLeftID(e){we(this.restEncoder,e.client),we(this.restEncoder,e.clock)}writeRightID(e){we(this.restEncoder,e.client),we(this.restEncoder,e.clock)}writeClient(e){we(this.restEncoder,e)}writeInfo(e){Ug(this.restEncoder,e)}writeString(e){ji(this.restEncoder,e)}writeParentInfo(e){we(this.restEncoder,e?1:0)}writeTypeRef(e){we(this.restEncoder,e)}writeLen(e){we(this.restEncoder,e)}writeAny(e){Qi(this.restEncoder,e)}writeBuf(e){Qt(this.restEncoder,e)}writeJSON(e){ji(this.restEncoder,JSON.stringify(e))}writeKey(e){ji(this.restEncoder,e)}}class R6{constructor(){this.restEncoder=Pc(),this.dsCurrVal=0}toUint8Array(){return Bn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,we(this.restEncoder,n)}writeDsLen(e){e===0&&ln(),we(this.restEncoder,e-1),this.dsCurrVal+=e}}class Zs extends R6{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Zp,this.clientEncoder=new eu,this.leftClockEncoder=new Zp,this.rightClockEncoder=new Zp,this.infoEncoder=new Xx(Ug),this.stringEncoder=new R$,this.parentInfoEncoder=new Xx(Ug),this.typeRefEncoder=new eu,this.lenEncoder=new eu}toUint8Array(){const e=Pc();return we(e,0),Qt(e,this.keyClockEncoder.toUint8Array()),Qt(e,this.clientEncoder.toUint8Array()),Qt(e,this.leftClockEncoder.toUint8Array()),Qt(e,this.rightClockEncoder.toUint8Array()),Qt(e,Bn(this.infoEncoder)),Qt(e,this.stringEncoder.toUint8Array()),Qt(e,Bn(this.parentInfoEncoder)),Qt(e,this.typeRefEncoder.toUint8Array()),Qt(e,this.lenEncoder.toUint8Array()),cf(e,Bn(this.restEncoder)),Bn(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Qi(this.restEncoder,e)}writeBuf(e){Qt(this.restEncoder,e)}writeJSON(e){Qi(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const I6=(t,e,n,r)=>{r=qn(r,e[0].id.clock);const o=An(e,r);we(t.restEncoder,e.length-o),t.writeClient(n),we(t.restEncoder,r);const s=e[o];s.write(t,r-s.id.clock);for(let i=o+1;i<e.length;i++)e[i].write(t,0)},c0=(t,e,n)=>{const r=new Map;n.forEach((o,s)=>{qe(e,s)>o&&r.set(s,o)}),uf(e).forEach((o,s)=>{n.has(s)||r.set(s,0)}),we(t.restEncoder,r.size),Ks(r.entries()).sort((o,s)=>s[0]-o[0]).forEach(([o,s])=>{I6(t,e.clients.get(o),o,s)})},N6=(t,e)=>{const n=En(),r=fe(t.restDecoder);for(let o=0;o<r;o++){const s=fe(t.restDecoder),i=new Array(s),a=t.readClient();let l=fe(t.restDecoder);n.set(a,{i:0,refs:i});for(let c=0;c<s;c++){const d=t.readInfo();switch(lf&d){case 0:{const u=t.readLen();i[c]=new xn(se(a,l),u),l+=u;break}case 10:{const u=fe(t.restDecoder);i[c]=new kn(se(a,l),u),l+=u;break}default:{const u=(d&(Yr|Nt))===0,h=new Se(se(a,l),null,(d&Nt)===Nt?t.readLeftID():null,null,(d&Yr)===Yr?t.readRightID():null,u?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,u&&(d&Ul)===Ul?t.readString():null,FA(t,d));i[c]=h,l+=h.length}}}}return n},D6=(t,e,n)=>{const r=[];let o=Ks(n.keys()).sort((f,p)=>f-p);if(o.length===0)return null;const s=()=>{if(o.length===0)return null;let f=n.get(o[o.length-1]);for(;f.refs.length===f.i;)if(o.pop(),o.length>0)f=n.get(o[o.length-1]);else return null;return f};let i=s();if(i===null)return null;const a=new bA,l=new Map,c=(f,p)=>{const g=l.get(f);(g==null||g>p)&&l.set(f,p)};let d=i.refs[i.i++];const u=new Map,h=()=>{for(const f of r){const p=f.id.client,g=n.get(p);g?(g.i--,a.clients.set(p,g.refs.slice(g.i)),n.delete(p),g.i=0,g.refs=[]):a.clients.set(p,[f]),o=o.filter(y=>y!==p)}r.length=0};for(;;){if(d.constructor!==kn){const p=_r(u,d.id.client,()=>qe(e,d.id.client))-d.id.clock;if(p<0)r.push(d),c(d.id.client,d.id.clock-1),h();else{const g=d.getMissing(t,e);if(g!==null){r.push(d);const y=n.get(g)||{refs:[],i:0};if(y.refs.length===y.i)c(g,qe(e,g)),h();else{d=y.refs[y.i++];continue}}else(p===0||p<d.length)&&(d.integrate(t,p),u.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(i!==null&&i.i<i.refs.length)d=i.refs[i.i++];else{if(i=s(),i===null)break;d=i.refs[i.i++]}}if(a.clients.size>0){const f=new Zs;return c0(f,a,new Map),we(f.restEncoder,0),{missing:l,update:f.toUint8Array()}}return null},O6=(t,e)=>c0(t,e.doc.store,e.beforeState),L6=(t,e,n,r=new na(t))=>Ae(e,o=>{o.local=!1;let s=!1;const i=o.doc,a=i.store,l=N6(r,i),c=D6(o,a,l),d=a.pendingStructs;if(d){for(const[h,f]of d.missing)if(f<qe(a,h)){s=!0;break}if(c){for(const[h,f]of c.missing){const p=d.missing.get(h);(p==null||p>f)&&d.missing.set(h,f)}d.update=ah([d.update,c.update])}}else a.pendingStructs=c;const u=sk(r,o,a);if(a.pendingDs){const h=new na(ha(a.pendingDs));fe(h.restDecoder);const f=sk(h,o,a);u&&f?a.pendingDs=ah([u,f]):a.pendingDs=u||f}else a.pendingDs=u;if(s){const h=a.pendingStructs.update;a.pendingStructs=null,ih(o.doc,h)}},n,!1),ih=(t,e,n,r=na)=>{const o=ha(e);L6(o,t,n,new r(o))},ik=(t,e,n)=>ih(t,e,n,pA),j6=(t,e,n=new Map)=>{c0(t,e.store,n),ma(t,uA(e.store))},B6=(t,e=new Uint8Array([0]),n=new Zs)=>{const r=mA(e);j6(n,t,r);const o=[n.toUint8Array()];if(t.store.pendingDs&&o.push(t.store.pendingDs),t.store.pendingStructs&&o.push(eH(t.store.pendingStructs.update,e)),o.length>1){if(n.constructor===Rc)return X6(o.map((s,i)=>i===0?s:nH(s)));if(n.constructor===Zs)return ah(o)}return o[0]},ak=(t,e)=>B6(t,e,new Rc),V6=t=>{const e=new Map,n=fe(t.restDecoder);for(let r=0;r<n;r++){const o=fe(t.restDecoder),s=fe(t.restDecoder);e.set(o,s)}return e},mA=t=>V6(new fA(ha(t)));class $6{constructor(){this.l=[]}}const lk=()=>new $6,ck=(t,e)=>t.l.push(e),dk=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(o=>e!==o),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},gA=(t,e,n)=>r0(t.l,[e,n]);class Vi{constructor(e,n){this.client=e,this.clock=n}}const Ti=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,se=(t,e)=>new Vi(t,e),Kl=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw ln()},Zl=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Jl{constructor(e,n,r,o=0){this.type=e,this.tname=n,this.item=r,this.assoc=o}}const bl=t=>new Jl(t.type==null?null:se(t.type.client,t.type.clock),t.tname??null,t.item==null?null:se(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class H6{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const F6=(t,e,n=0)=>new H6(t,e,n),kd=(t,e,n)=>{let r=null,o=null;return t._item===null?o=Kl(t):r=se(t._item.id.client,t._item.id.clock),new Jl(r,o,e,n)},Xp=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return kd(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return kd(t,se(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return kd(t,r.lastId,n);r=r.right}return kd(t,null,n)},z6=(t,e)=>{const n=$i(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},U6=(t,e,n=!0)=>{const r=e.store,o=t.item,s=t.type,i=t.tname,a=t.assoc;let l=null,c=0;if(o!==null){if(qe(r,o.client)<=o.clock)return null;const d=n?Yg(r,o):z6(r,o),u=d.item;if(!(u instanceof Se))return null;if(l=u.parent,l._item===null||!l._item.deleted){c=u.deleted||!u.countable?0:d.diff+(a>=0?0:1);let h=u.left;for(;h!==null;)!h.deleted&&h.countable&&(c+=h.length),h=h.left}}else{if(i!==null)l=e.get(i);else if(s!==null){if(qe(r,s.client)<=s.clock)return null;const{item:d}=n?Yg(r,s):{item:$i(r,s)};if(d instanceof Se&&d.content instanceof Xn)l=d.content.type;else return null}else throw ln();a>=0?c=l._length:c=0}return F6(l,c,t.assoc)},uk=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&Ti(t.item,e.item)&&Ti(t.type,e.type)&&t.assoc===e.assoc;class d0{constructor(e,n){this.ds=e,this.sv=n}}const yA=(t,e)=>new d0(t,e),Qp=t=>yA(uA(t.store),uf(t.store)),ws=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!pa(e.ds,t.id),Kg=(t,e)=>{const n=_r(t.meta,Kg,qs),r=t.doc.store;n.has(e)||(e.sv.forEach((o,s)=>{o<qe(r,s)&&Wt(t,se(s,o))}),Fo(t,e.ds,o=>{}),n.add(e))};class bA{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const uf=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const o=n[n.length-1];e.set(r,o.id.clock+o.length)}),e},qe=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},vA=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw ln()}n.push(e)},An=(t,e)=>{let n=0,r=t.length-1,o=t[r],s=o.id.clock;if(s===e)return r;let i=eo(e/(s+o.length-1)*r);for(;n<=r;){if(o=t[i],s=o.id.clock,s<=e){if(e<s+o.length)return i;n=i+1}else r=i-1;i=eo((n+r)/2)}throw ln()},W6=(t,e)=>{const n=t.clients.get(e.client);return n[An(n,e.clock)]},$i=W6,Zg=(t,e,n)=>{const r=An(e,n),o=e[r];return o.id.clock<n&&o instanceof Se?(e.splice(r+1,0,hh(t,o,n-o.id.clock)),r+1):r},Wt=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Zg(t,n,e.clock)]},hk=(t,e,n)=>{const r=e.clients.get(n.client),o=An(r,n.clock),s=r[o];return n.clock!==s.id.clock+s.length-1&&s.constructor!==xn&&r.splice(o+1,0,hh(t,s,n.clock-s.id.clock+1)),s},G6=(t,e,n)=>{const r=t.clients.get(e.id.client);r[An(r,e.id.clock)]=n},wA=(t,e,n,r,o)=>{if(r===0)return;const s=n+r;let i=Zg(t,e,n),a;do a=e[i++],s<a.id.clock+a.length&&Zg(t,e,s),o(a);while(i<e.length&&e[i].id.clock<s)};class q6{constructor(e,n,r){this.doc=e,this.deleteSet=new fa,this.beforeState=uf(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const fk=(t,e)=>e.deleteSet.clients.size===0&&!a$(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(a0(e.deleteSet),O6(t,e),ma(t,e.deleteSet),!0),pk=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&_r(t.changed,e,qs).add(n)},nu=(t,e)=>{let n=t[e],r=t[e-1],o=e;for(;o>0;n=r,r=t[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Se&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-o;return s&&t.splice(e+1-s,s),s},K6=(t,e,n)=>{for(const[r,o]of t.clients.entries()){const s=e.clients.get(r);for(let i=o.length-1;i>=0;i--){const a=o[i],l=a.clock+a.len;for(let c=An(s,a.clock),d=s[c];c<s.length&&d.id.clock<l;d=s[++c]){const u=s[c];if(a.clock+a.len<=u.id.clock)break;u instanceof Se&&u.deleted&&!u.keep&&n(u)&&u.gc(e,!1)}}}},Z6=(t,e)=>{t.clients.forEach((n,r)=>{const o=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const i=n[s],a=Jr(o.length-1,1+An(o,i.clock+i.len-1));for(let l=a,c=o[l];l>0&&c.id.clock>=i.clock;c=o[l])l-=1+nu(o,l)}})},xA=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,o=r.store,s=n.deleteSet,i=n._mergeStructs;try{a0(s),n.afterState=uf(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=c,d._path=null}),l.sort((d,u)=>d.path.length-u.path.length),gA(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),r0(a,[]),n._needFormattingCleanup&&gH(n)}finally{r.gc&&K6(s,o,r.gcFilter),Z6(s,o),n.afterState.forEach((d,u)=>{const h=n.beforeState.get(u)||0;if(h!==d){const f=o.clients.get(u),p=qn(An(f,h),1);for(let g=f.length-1;g>=p;)g-=1+nu(f,g)}});for(let d=i.length-1;d>=0;d--){const{client:u,clock:h}=i[d].id,f=o.clients.get(u),p=An(f,h);p+1<f.length&&nu(f,p+1)>1||p>0&&nu(f,p)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(E6(s0,rA,"[yjs] ",oA,sA,"Changed the client-id because another client seems to be using it."),r.clientID=hA()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new Rc;fk(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new Zs;fk(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),c.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):xA(t,e+1)}}},Ae=(t,e,n=null,r=!0)=>{const o=t._transactionCleanups;let s=!1,i=null;t._transaction===null&&(s=!0,t._transaction=new q6(t,n,r),o.push(t._transaction),o.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(s){const a=t._transaction===o[0];t._transaction=null,a&&xA(o,0)}}return i};class J6{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const mk=(t,e,n)=>{Fo(t,n.deletions,r=>{r instanceof Se&&e.scope.some(o=>o===t.doc||Zl(o,r))&&b0(r,!1)})},gk=(t,e,n)=>{let r=null;const o=t.doc,s=t.scope;Ae(o,a=>{for(;e.length>0&&t.currStackItem===null;){const l=o.store,c=e.pop(),d=new Set,u=[];let h=!1;Fo(a,c.insertions,f=>{if(f instanceof Se){if(f.redone!==null){let{item:p,diff:g}=Yg(l,f.id);g>0&&(p=Wt(a,se(p.id.client,p.id.clock+g))),f=p}!f.deleted&&s.some(p=>p===a.doc||Zl(p,f))&&u.push(f)}}),Fo(a,c.deletions,f=>{f instanceof Se&&s.some(p=>p===a.doc||Zl(p,f))&&!pa(c.insertions,f.id)&&d.add(f)}),d.forEach(f=>{h=HA(a,f,d,c.insertions,t.ignoreRemoteMapChanges,t)!==null||h});for(let f=u.length-1;f>=0;f--){const p=u[f];t.deleteFilter(p)&&(p.delete(a),h=!0)}t.currStackItem=h?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},t);const i=t.currStackItem;if(i!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:i,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return i};class kA extends UM{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=Fg(e)?e[0].doc:e instanceof Qo?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=o,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(y=>l.changedParentTypes.has(y)||y===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,d=this.redoing,u=c?this.redoStack:this.undoStack;c?this.stopCapturing():d||this.clear(!1,!0);const h=new fa;l.afterState.forEach((y,v)=>{const x=l.beforeState.get(v)||0,w=y-x;w>0&&ql(h,v,x,w)});const f=G$();let p=!1;if(this.lastChange>0&&f-this.lastChange<this.captureTimeout&&u.length>0&&!c&&!d){const y=u[u.length-1];y.deletions=qg([y.deletions,l.deleteSet]),y.insertions=qg([y.insertions,h])}else u.push(new J6(l.deleteSet,h)),p=!0;!c&&!d&&(this.lastChange=f),Fo(l,l.deleteSet,y=>{y instanceof Se&&this.scope.some(v=>v===l.doc||Zl(v,y))&&b0(y,!0)});const g=[{stackItem:u[u.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];p?this.emit("stack-item-added",g):this.emit("stack-item-updated",g)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=Fg(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof tt?r.doc!==this.doc:r!==this.doc)&&aA("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(o=>mk(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>mk(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=gk(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=gk(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*Y6(t){const e=fe(t.restDecoder);for(let n=0;n<e;n++){const r=fe(t.restDecoder),o=t.readClient();let s=fe(t.restDecoder);for(let i=0;i<r;i++){const a=t.readInfo();if(a===10){const l=fe(t.restDecoder);yield new kn(se(o,s),l),s+=l}else if((lf&a)!==0){const l=(a&(Yr|Nt))===0,c=new Se(se(o,s),null,(a&Nt)===Nt?t.readLeftID():null,null,(a&Yr)===Yr?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&Ul)===Ul?t.readString():null,FA(t,a));yield c,s+=c.length}else{const l=t.readLen();yield new xn(se(o,s),l),s+=l}}}}class u0{constructor(e,n){this.gen=Y6(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===kn);return this.curr}}class h0{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const X6=t=>ah(t,pA,Rc),Q6=(t,e)=>{if(t.constructor===xn){const{client:n,clock:r}=t.id;return new xn(se(n,r+e),t.length-e)}else if(t.constructor===kn){const{client:n,clock:r}=t.id;return new kn(se(n,r+e),t.length-e)}else{const n=t,{client:r,clock:o}=n.id;return new Se(se(r,o+e),null,se(r,o+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},ah=(t,e=na,n=Zs)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(ha(d)));let o=r.map(d=>new u0(d,!0)),s=null;const i=new n,a=new h0(i);for(;o=o.filter(h=>h.curr!==null),o.sort((h,f)=>{if(h.curr.id.client===f.curr.id.client){const p=h.curr.id.clock-f.curr.id.clock;return p===0?h.curr.constructor===f.curr.constructor?0:h.curr.constructor===kn?1:-1:p}else return f.curr.id.client-h.curr.id.client}),o.length!==0;){const d=o[0],u=d.curr.id.client;if(s!==null){let h=d.curr,f=!1;for(;h!==null&&h.id.clock+h.length<=s.struct.id.clock+s.struct.length&&h.id.client>=s.struct.id.client;)h=d.next(),f=!0;if(h===null||h.id.client!==u||f&&h.id.clock>s.struct.id.clock+s.struct.length)continue;if(u!==s.struct.id.client)Ao(a,s.struct,s.offset),s={struct:h,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<h.id.clock)if(s.struct.constructor===kn)s.struct.length=h.id.clock+h.length-s.struct.id.clock;else{Ao(a,s.struct,s.offset);const p=h.id.clock-s.struct.id.clock-s.struct.length;s={struct:new kn(se(u,s.struct.id.clock+s.struct.length),p),offset:0}}else{const p=s.struct.id.clock+s.struct.length-h.id.clock;p>0&&(s.struct.constructor===kn?s.struct.length-=p:h=Q6(h,p)),s.struct.mergeWith(h)||(Ao(a,s.struct,s.offset),s={struct:h,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let h=d.curr;h!==null&&h.id.client===u&&h.id.clock===s.struct.id.clock+s.struct.length&&h.constructor!==kn;h=d.next())Ao(a,s.struct,s.offset),s={struct:h,offset:0}}s!==null&&(Ao(a,s.struct,s.offset),s=null),f0(a);const l=r.map(d=>l0(d)),c=qg(l);return ma(i,c),i.toUint8Array()},eH=(t,e,n=na,r=Zs)=>{const o=mA(e),s=new r,i=new h0(s),a=new n(ha(t)),l=new u0(a,!1);for(;l.curr;){const d=l.curr,u=d.id.client,h=o.get(u)||0;if(l.curr.constructor===kn){l.next();continue}if(d.id.clock+d.length>h)for(Ao(i,d,qn(h-d.id.clock,0)),l.next();l.curr&&l.curr.id.client===u;)Ao(i,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===u&&l.curr.id.clock+l.curr.length<=h;)l.next()}f0(i);const c=l0(a);return ma(s,c),s.toUint8Array()},CA=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Bn(t.encoder.restEncoder)}),t.encoder.restEncoder=Pc(),t.written=0)},Ao=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&CA(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),we(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},f0=t=>{CA(t);const e=t.encoder.restEncoder;we(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];we(e,r.written),cf(e,r.restEncoder)}},tH=(t,e,n,r)=>{const o=new n(ha(t)),s=new u0(o,!1),i=new r,a=new h0(i);for(let c=s.curr;c!==null;c=s.next())Ao(a,e(c),0);f0(a);const l=l0(o);return ma(i,l),i.toUint8Array()},nH=t=>tH(t,n6,na,Rc),yk="You must not compute changes after the event-handler fired.";class hf{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=rH(this.currentTarget,this.target))}deletes(e){return pa(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ho(yk);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const s=n._map.get(o);let i,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))i="delete",a=Gp(l.content.getContent());else return;else l!==null&&this.deletes(l)?(i="update",a=Gp(l.content.getContent())):(i="add",a=void 0)}else if(this.deletes(s))i="delete",a=Gp(s.content.getContent());else return;e.set(o,{action:i,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ho(yk);const n=this.target,r=qs(),o=qs(),s=[];if(e={added:r,deleted:o,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,o.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const rH=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,o=e._item.parent._start;for(;o!==e._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}e=e._item.parent}return n},kt=()=>{aA("Invalid access: Add Yjs type to a document before reading data.")},SA=80;let p0=0;class oH{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=p0++}}const sH=t=>{t.timestamp=p0++},TA=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=p0++},iH=(t,e,n)=>{if(t.length>=SA){const r=t.reduce((o,s)=>o.timestamp<s.timestamp?o:s);return TA(r,e,n),r}else{const r=new oH(e,n);return t.push(r),r}},ff=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,i)=>Qd(e-s.index)<Qd(e-i.index)?s:i);let r=t._start,o=0;for(n!==null&&(r=n.p,o=n.index,sH(n));r.right!==null&&o<e;){if(!r.deleted&&r.countable){if(e<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>e;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&Qd(n.index-o)<r.parent.length/SA?(TA(n,r,o),n):iH(t._searchMarker,r,o)},Yl=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const o=t[r];if(n>0){let s=o.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(o.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}o.p=s,s.marker=!0}(e<o.index||n>0&&e===o.index)&&(o.index=qn(e,o.index+n))}},pf=(t,e,n)=>{const r=t,o=e.changedParentTypes;for(;_r(o,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;gA(r._eH,n,e)};class tt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=lk(),this._dEH=lk(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Hn()}clone(){throw Hn()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){ck(this._eH,e)}observeDeep(e){ck(this._dEH,e)}unobserve(e){dk(this._eH,e)}unobserveDeep(e){dk(this._dEH,e)}toJSON(){}}const EA=(t,e,n)=>{t.doc??kt(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const o=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const i=s.content.getContent();if(i.length<=e)e-=i.length;else{for(let a=e;a<i.length&&r>0;a++)o.push(i[a]),r--;e=0}}s=s.right}return o},MA=t=>{t.doc??kt();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)e.push(r[o])}n=n.right}return e},AA=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&ws(r,e)){const o=r.content.getContent();for(let s=0;s<o.length;s++)n.push(o[s])}r=r.right}return n},Xl=(t,e)=>{let n=0,r=t._start;for(t.doc??kt();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let s=0;s<o.length;s++)e(o[s],n++,t)}r=r.right}},_A=(t,e)=>{const n=[];return Xl(t,(r,o)=>{n.push(e(r,o,t))}),n},aH=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},PA=(t,e)=>{t.doc??kt();const n=ff(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},lh=(t,e,n,r)=>{let o=n;const s=t.doc,i=s.clientID,a=s.store,l=n===null?e._start:n.right;let c=[];const d=()=>{c.length>0&&(o=new Se(se(i,qe(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Ys(c)),o.integrate(t,0),c=[])};r.forEach(u=>{if(u===null)c.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(u);break;default:switch(d(),u.constructor){case Uint8Array:case ArrayBuffer:o=new Se(se(i,qe(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Ic(new Uint8Array(u))),o.integrate(t,0);break;case Qo:o=new Se(se(i,qe(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Nc(u)),o.integrate(t,0);break;default:if(u instanceof tt)o=new Se(se(i,qe(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Xn(u)),o.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},RA=()=>Ho("Length exceeded!"),IA=(t,e,n,r)=>{if(n>e._length)throw RA();if(n===0)return e._searchMarker&&Yl(e._searchMarker,n,r.length),lh(t,e,null,r);const o=n,s=ff(e,n);let i=e._start;for(s!==null&&(i=s.p,n-=s.index,n===0&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&Wt(t,se(i.id.client,i.id.clock+n));break}n-=i.length}return e._searchMarker&&Yl(e._searchMarker,o,r.length),lh(t,e,i,r)},lH=(t,e,n)=>{let o=(e._searchMarker||[]).reduce((s,i)=>i.index>s.index?i:s,{index:0,p:e._start}).p;if(o)for(;o.right;)o=o.right;return lh(t,e,o,n)},NA=(t,e,n,r)=>{if(r===0)return;const o=n,s=r,i=ff(e,n);let a=e._start;for(i!==null&&(a=i.p,n-=i.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Wt(t,se(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&Wt(t,se(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw RA();e._searchMarker&&Yl(e._searchMarker,o,-s+r)},ch=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},m0=(t,e,n,r)=>{const o=e._map.get(n)||null,s=t.doc,i=s.clientID;let a;if(r==null)a=new Ys([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Ys([r]);break;case Uint8Array:a=new Ic(r);break;case Qo:a=new Nc(r);break;default:if(r instanceof tt)a=new Xn(r);else throw new Error("Unexpected content type")}new Se(se(i,qe(s.store,i)),o,o&&o.lastId,null,null,e,n,a).integrate(t,0)},g0=(t,e)=>{t.doc??kt();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},DA=t=>{const e={};return t.doc??kt(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},OA=(t,e)=>{t.doc??kt();const n=t._map.get(e);return n!==void 0&&!n.deleted},cH=(t,e)=>{const n={};return t._map.forEach((r,o)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&ws(s,e)&&(n[o]=s.content.getContent()[s.length-1])}),n},Cd=t=>(t.doc??kt(),M6(t._map.entries(),e=>!e[1].deleted));class dH extends hf{}class Hi extends tt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Hi;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Hi}clone(){const e=new Hi;return e.insert(0,this.toArray().map(n=>n instanceof tt?n.clone():n)),e}get length(){return this.doc??kt(),this._length}_callObserver(e,n){super._callObserver(e,n),pf(this,e,new dH(this,e))}insert(e,n){this.doc!==null?Ae(this.doc,r=>{IA(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Ae(this.doc,n=>{lH(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Ae(this.doc,r=>{NA(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return PA(this,e)}toArray(){return MA(this)}slice(e=0,n=this.length){return EA(this,e,n)}toJSON(){return this.map(e=>e instanceof tt?e.toJSON():e)}map(e){return _A(this,e)}forEach(e){Xl(this,e)}[Symbol.iterator](){return aH(this)}_write(e){e.writeTypeRef(OH)}}const uH=t=>new Hi;class hH extends hf{constructor(e,n,r){super(e,n),this.keysChanged=r}}class ra extends tt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new ra}clone(){const e=new ra;return this.forEach((n,r)=>{e.set(r,n instanceof tt?n.clone():n)}),e}_callObserver(e,n){pf(this,e,new hH(this,e,n))}toJSON(){this.doc??kt();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];e[r]=o instanceof tt?o.toJSON():o}}),e}get size(){return[...Cd(this)].length}keys(){return Yp(Cd(this),e=>e[0])}values(){return Yp(Cd(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Yp(Cd(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??kt(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ae(this.doc,n=>{ch(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Ae(this.doc,r=>{m0(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return g0(this,e)}has(e){return OA(this,e)}clear(){this.doc!==null?Ae(this.doc,e=>{this.forEach(function(n,r,o){ch(e,o,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(LH)}}const fH=t=>new ra,Io=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&e6(t,e);class Jg{constructor(e,n,r,o){this.left=e,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&ln(),this.right.content.constructor){case Xe:this.right.deleted||ga(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const bk=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Xe:e.right.deleted||ga(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Wt(t,se(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Sd=(t,e,n,r)=>{const o=new Map,s=r?ff(e,n):null;if(s){const i=new Jg(s.p.left,s.p,s.index,o);return bk(t,i,n-s.index)}else{const i=new Jg(null,e._start,0,o);return bk(t,i,n)}},LA=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Xe&&Io(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=t.doc,s=o.clientID;r.forEach((i,a)=>{const l=n.left,c=n.right,d=new Se(se(s,qe(o.store,s)),l,l&&l.lastId,c,c&&c.id,e,null,new Xe(a,i));d.integrate(t,0),n.right=d,n.forward()})},ga=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},jA=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Xe&&Io(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},BA=(t,e,n,r)=>{const o=t.doc,s=o.clientID,i=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!Io(c,l)){i.set(a,c);const{left:d,right:u}=n;n.right=new Se(se(s,qe(o.store,s)),d,d&&d.lastId,u,u&&u.id,e,null,new Xe(a,l)),n.right.integrate(t,0),n.forward()}}return i},em=(t,e,n,r,o)=>{n.currentAttributes.forEach((h,f)=>{o[f]===void 0&&(o[f]=null)});const s=t.doc,i=s.clientID;jA(n,o);const a=BA(t,e,n,o),l=r.constructor===String?new Kn(r):r instanceof tt?new Xn(r):new oi(r);let{left:c,right:d,index:u}=n;e._searchMarker&&Yl(e._searchMarker,n.index,l.getLength()),d=new Se(se(i,qe(s.store,i)),c,c&&c.lastId,d,d&&d.id,e,null,l),d.integrate(t,0),n.right=d,n.index=u,n.forward(),LA(t,e,n,a)},vk=(t,e,n,r,o)=>{const s=t.doc,i=s.clientID;jA(n,o);const a=BA(t,e,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Xe));){if(!n.right.deleted)switch(n.right.content.constructor){case Xe:{const{key:l,value:c}=n.right.content,d=o[l];if(d!==void 0){if(Io(d,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&Wt(t,se(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Se(se(i,qe(s.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Kn(l)),n.right.integrate(t,0),n.forward()}LA(t,e,n,a)},VA=(t,e,n,r,o)=>{let s=e;const i=En();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===Xe){const c=s.content;i.set(c.key,c)}s=s.right}let a=0,l=!1;for(;e!==s;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case Xe:{const{key:d,value:u}=c,h=r.get(d)??null;(i.get(d)!==c||h===u)&&(e.delete(t),a++,!l&&(o.get(d)??null)===u&&h!==u&&(h===null?o.delete(d):o.set(d,h))),!l&&!e.deleted&&ga(o,c);break}}}e=e.right}return a},pH=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Xe){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},mH=t=>{let e=0;return Ae(t.doc,n=>{let r=t._start,o=t._start,s=En();const i=Hg(s);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case Xe:ga(i,o.content);break;default:e+=VA(n,r,o,s,i),s=Hg(i),r=o;break}o=o.right}}),e},gH=t=>{const e=new Set,n=t.doc;for(const[r,o]of t.afterState.entries()){const s=t.beforeState.get(r)||0;o!==s&&wA(t,n.store.clients.get(r),s,o,i=>{!i.deleted&&i.content.constructor===Xe&&i.constructor!==xn&&e.add(i.parent)})}Ae(n,r=>{Fo(t,t.deleteSet,o=>{if(o instanceof xn||!o.parent._hasFormatting||e.has(o.parent))return;const s=o.parent;o.content.constructor===Xe?e.add(s):pH(r,o)});for(const o of e)mH(o)})},wk=(t,e,n)=>{const r=n,o=Hg(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Xn:case oi:case Kn:n<e.right.length&&Wt(t,se(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&VA(t,s,e.right,o,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&Yl(i._searchMarker,e.index,-r+n),e};class yH extends hf{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Ae(e,r=>{const o=new Map,s=new Map;let i=this.target._start,a=null;const l={};let c="",d=0,u=0;const h=()=>{if(a!==null){let f=null;switch(a){case"delete":u>0&&(f={delete:u}),u=0;break;case"insert":(typeof c=="object"||c.length>0)&&(f={insert:c},o.size>0&&(f.attributes={},o.forEach((p,g)=>{p!==null&&(f.attributes[g]=p)}))),c="";break;case"retain":d>0&&(f={retain:d},X$(l)||(f.attributes=J$({},l))),d=0;break}f&&n.push(f),a=null}};for(;i!==null;){switch(i.content.constructor){case Xn:case oi:this.adds(i)?this.deletes(i)||(h(),a="insert",c=i.content.getContent()[0],h()):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),u+=1):i.deleted||(a!=="retain"&&(h(),a="retain"),d+=1);break;case Kn:this.adds(i)?this.deletes(i)||(a!=="insert"&&(h(),a="insert"),c+=i.content.str):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),u+=i.length):i.deleted||(a!=="retain"&&(h(),a="retain"),d+=i.length);break;case Xe:{const{key:f,value:p}=i.content;if(this.adds(i)){if(!this.deletes(i)){const g=o.get(f)??null;Io(g,p)?p!==null&&i.delete(r):(a==="retain"&&h(),Io(p,s.get(f)??null)?delete l[f]:l[f]=p)}}else if(this.deletes(i)){s.set(f,p);const g=o.get(f)??null;Io(g,p)||(a==="retain"&&h(),l[f]=g)}else if(!i.deleted){s.set(f,p);const g=l[f];g!==void 0&&(Io(g,p)?g!==null&&i.delete(r):(a==="retain"&&h(),p===null?delete l[f]:l[f]=p))}i.deleted||(a==="insert"&&h(),ga(o,i.content));break}}i=i.right}for(h();n.length>0;){const f=n[n.length-1];if(f.retain!==void 0&&f.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class zo extends tt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??kt(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new zo}clone(){const e=new zo;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new yH(this,e,n);pf(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??kt();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Kn&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Ae(this.doc,r=>{const o=new Jg(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const i=e[s];if(i.insert!==void 0){const a=!n&&typeof i.insert=="string"&&s===e.length-1&&o.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof a!="string"||a.length>0)&&em(r,this,o,a,i.attributes||{})}else i.retain!==void 0?vk(r,this,o,i.retain,i.attributes||{}):i.delete!==void 0&&wk(r,o,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??kt();const o=[],s=new Map,i=this.doc;let a="",l=this._start;function c(){if(a.length>0){const u={};let h=!1;s.forEach((p,g)=>{h=!0,u[g]=p});const f={insert:a};h&&(f.attributes=u),o.push(f),a=""}}const d=()=>{for(;l!==null;){if(ws(l,e)||n!==void 0&&ws(l,n))switch(l.content.constructor){case Kn:{const u=s.get("ychange");e!==void 0&&!ws(l,e)?(u===void 0||u.user!==l.id.client||u.type!=="removed")&&(c(),s.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!ws(l,n)?(u===void 0||u.user!==l.id.client||u.type!=="added")&&(c(),s.set("ychange",r?r("added",l.id):{type:"added"})):u!==void 0&&(c(),s.delete("ychange")),a+=l.content.str;break}case Xn:case oi:{c();const u={insert:l.content.getContent()[0]};if(s.size>0){const h={};u.attributes=h,s.forEach((f,p)=>{h[p]=f})}o.push(u);break}case Xe:ws(l,e)&&(c(),ga(s,l.content));break}l=l.right}c()};return e||n?Ae(i,u=>{e&&Kg(u,e),n&&Kg(u,n),d()},"cleanup"):d(),o}insert(e,n,r){if(n.length<=0)return;const o=this.doc;o!==null?Ae(o,s=>{const i=Sd(s,this,e,!r);r||(r={},i.currentAttributes.forEach((a,l)=>{r[l]=a})),em(s,this,i,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const o=this.doc;o!==null?Ae(o,s=>{const i=Sd(s,this,e,!r);em(s,this,i,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Ae(r,o=>{wk(o,Sd(o,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const o=this.doc;o!==null?Ae(o,s=>{const i=Sd(s,this,e,!1);i.right!==null&&vk(s,this,i,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Ae(this.doc,n=>{ch(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Ae(this.doc,r=>{m0(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return g0(this,e)}getAttributes(){return DA(this)}_write(e){e.writeTypeRef(jH)}}const bH=t=>new zo;class tm{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??kt()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Rt||n.constructor===Js)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Js extends tt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Js}clone(){const e=new Js;return e.insert(0,this.toArray().map(n=>n instanceof tt?n.clone():n)),e}get length(){return this.doc??kt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new tm(this,e)}querySelector(e){e=e.toUpperCase();const r=new tm(this,o=>o.nodeName&&o.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Ks(new tm(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){pf(this,e,new xH(this,n,e))}toString(){return _A(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const o=e.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),Xl(this,s=>{o.insertBefore(s.toDOM(e,n,r),null)}),o}insert(e,n){this.doc!==null?Ae(this.doc,r=>{IA(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Ae(this.doc,r=>{const o=e&&e instanceof tt?e._item:e;lh(r,this,o,n)});else{const r=this._prelimContent,o=e===null?0:r.findIndex(s=>s===e)+1;if(o===0&&e!==null)throw Ho("Reference item not found");r.splice(o,0,...n)}}delete(e,n=1){this.doc!==null?Ae(this.doc,r=>{NA(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return MA(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return PA(this,e)}slice(e=0,n=this.length){return EA(this,e,n)}forEach(e){Xl(this,e)}_write(e){e.writeTypeRef(VH)}}const vH=t=>new Js;class Rt extends Js{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new Rt(this.nodeName)}clone(){const e=new Rt(this.nodeName),n=this.getAttributes();return Y$(n,(r,o)=>{typeof r=="string"&&e.setAttribute(o,r)}),e.insert(0,this.toArray().map(r=>r instanceof tt?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),i=n.length>0?" "+n.join(" "):"";return`<${s}${i}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?Ae(this.doc,n=>{ch(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Ae(this.doc,r=>{m0(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return g0(this,e)}hasAttribute(e){return OA(this,e)}getAttributes(e){return e?cH(this,e):DA(this)}toDOM(e=document,n={},r){const o=e.createElement(this.nodeName),s=this.getAttributes();for(const i in s){const a=s[i];typeof a=="string"&&o.setAttribute(i,a)}return Xl(this,i=>{o.appendChild(i.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(BH),e.writeKey(this.nodeName)}}const wH=t=>new Rt(t.readKey());class xH extends hf{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class dh extends ra{constructor(e){super(),this.hookName=e}_copy(){return new dh(this.hookName)}clone(){const e=new dh(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const o=n[this.hookName];let s;return o!==void 0?s=o.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef($H),e.writeKey(this.hookName)}}const kH=t=>new dh(t.readKey());class sn extends zo{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new sn}clone(){const e=new sn;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const o=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(e=>{const n=[];for(const o in e.attributes){const s=[];for(const i in e.attributes[o])s.push({key:i,value:e.attributes[o][i]});s.sort((i,a)=>i.key<a.key?-1:1),n.push({nodeName:o,attrs:s})}n.sort((o,s)=>o.nodeName<s.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const s=n[o];r+=`<${s.nodeName}`;for(let i=0;i<s.attrs.length;i++){const a=s.attrs[i];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(HH)}}const CH=t=>new sn;class y0{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Hn()}mergeWith(e){return!1}write(e,n,r){throw Hn()}integrate(e,n){throw Hn()}}const SH=0;class xn extends y0{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),vA(e.doc.store,this)}write(e,n){e.writeInfo(SH),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Ic{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ic(this.content)}splice(e){throw Hn()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const TH=t=>new Ic(t.readBuf());class Ql{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Ql(this.len)}splice(e){const n=new Ql(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){ql(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const EH=t=>new Ql(t.readLen()),$A=(t,e)=>new Qo({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Nc{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Nc($A(this.doc.guid,this.opts))}splice(e){throw Hn()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const MH=t=>new Nc($A(t.readString(),t.readAny()));class oi{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new oi(this.embed)}splice(e){throw Hn()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const AH=t=>new oi(t.readJSON());class Xe{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Xe(this.key,this.value)}splice(e){throw Hn()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const _H=t=>new Xe(t.readKey(),t.readJSON());class uh{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new uh(this.arr)}splice(e){const n=new uh(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const PH=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const o=t.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new uh(n)},RH=sh("node_env")==="development";class Ys{constructor(e){this.arr=e,RH&&QM(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ys(this.arr)}splice(e){const n=new Ys(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeAny(s)}}getRef(){return 8}}const IH=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Ys(n)};class Kn{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Kn(this.str)}splice(e){const n=new Kn(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"ï¿½",n.str="ï¿½"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const NH=t=>new Kn(t.readString()),DH=[uH,fH,bH,wH,vH,kH,CH],OH=0,LH=1,jH=2,BH=3,VH=4,$H=5,HH=6;class Xn{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Xn(this.type._copy())}splice(e){throw Hn()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const FH=t=>new Xn(DH[t.readTypeRef()](t)),Yg=(t,e)=>{let n=e,r=0,o;do r>0&&(n=se(n.client,n.clock+r)),o=$i(t,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof Se);return{item:o,diff:r}},b0=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},hh=(t,e,n)=>{const{client:r,clock:o}=e.id,s=new Se(se(r,o+n),e,se(r,o+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=se(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},xk=(t,e)=>c$(t,n=>pa(n.deletions,e)),HA=(t,e,n,r,o,s)=>{const i=t.doc,a=i.store,l=i.clientID,c=e.redone;if(c!==null)return Wt(t,c);let d=e.parent._item,u=null,h;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||HA(t,d,n,r,o,s)===null))return null;for(;d.redone!==null;)d=Wt(t,d.redone)}const f=d===null?e.parent:d.content.type;if(e.parentSub===null){for(u=e.left,h=e;u!==null;){let v=u;for(;v!==null&&v.parent._item!==d;)v=v.redone===null?null:Wt(t,v.redone);if(v!==null&&v.parent._item===d){u=v;break}u=u.left}for(;h!==null;){let v=h;for(;v!==null&&v.parent._item!==d;)v=v.redone===null?null:Wt(t,v.redone);if(v!==null&&v.parent._item===d){h=v;break}h=h.right}}else if(h=null,e.right&&!o){for(u=e;u!==null&&u.right!==null&&(u.right.redone||pa(r,u.right.id)||xk(s.undoStack,u.right.id)||xk(s.redoStack,u.right.id));)for(u=u.right;u.redone;)u=Wt(t,u.redone);if(u&&u.right!==null)return null}else u=f._map.get(e.parentSub)||null;const p=qe(a,l),g=se(l,p),y=new Se(g,u,u&&u.lastId,h,h&&h.id,f,e.parentSub,e.content.copy());return e.redone=g,b0(y,!0),y.integrate(t,0),y};class Se extends y0{constructor(e,n,r,o,s,i,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=s,this.parent=i,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?Zx:0}set marker(e){(this.info&Kp)>0!==e&&(this.info^=Kp)}get marker(){return(this.info&Kp)>0}get keep(){return(this.info&Kx)>0}set keep(e){this.keep!==e&&(this.info^=Kx)}get countable(){return(this.info&Zx)>0}get deleted(){return(this.info&qp)>0}set deleted(e){this.deleted!==e&&(this.info^=qp)}markDeleted(){this.info|=qp}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=qe(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=qe(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Vi&&this.id.client!==this.parent.client&&this.parent.clock>=qe(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=hk(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Wt(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===xn||this.right&&this.right.constructor===xn)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Se?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Se&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Vi){const r=$i(n,this.parent);r.constructor===xn?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=hk(e,e.doc.store,se(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const s=new Set,i=new Set;for(;o!==null&&o!==this.right;){if(i.add(o),s.add(o),Ti(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,s.clear();else if(Ti(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&i.has($i(e.doc.store,o.origin)))s.has($i(e.doc.store,o.origin))||(r=o,s.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),vA(e.doc.store,this),this.content.integrate(e,this),pk(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new xn(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:se(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Ti(e.origin,this.lastId)&&this.right===e&&Ti(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),ql(e.deleteSet,this.id.client,this.id.clock,this.length),pk(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw ln();this.content.gc(e),n?G6(e,this,new xn(this.id,this.length)):this.content=new Ql(this.length)}write(e,n){const r=n>0?se(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,s=this.parentSub,i=this.content.getRef()&lf|(r===null?0:Nt)|(o===null?0:Yr)|(s===null?0:Ul);if(e.writeInfo(i),r!==null&&e.writeLeftID(r),o!==null&&e.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=Kl(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Vi?(e.writeParentInfo(!1),e.writeLeftID(a)):ln();s!==null&&e.writeString(s)}this.content.write(e,n)}}const FA=(t,e)=>zH[e&lf](t),zH=[()=>{ln()},EH,PH,TH,NH,AH,_H,FH,IH,MH,()=>{ln()}],UH=10;class kn extends y0{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){ln()}write(e,n){e.writeInfo(UH),we(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const zA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},UA="__ $YJS$ __";zA[UA]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");zA[UA]=!0;const WH=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},GH=/[\uD800-\uDBFF]/,qH=/[\uDC00-\uDFFF]/,KH=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&GH.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&qH.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},ZH=KH,ke=new xe("y-sync"),cr=new xe("y-undo"),tl=new xe("yjs-cursor"),dr=(t,e)=>t>>>e|t<<32-e,JH=t=>dr(t,2)^dr(t,13)^dr(t,22),YH=t=>dr(t,6)^dr(t,11)^dr(t,25),XH=t=>dr(t,7)^dr(t,18)^t>>>3,QH=t=>dr(t,17)^dr(t,19)^t>>>10,eF=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tF=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class nF{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(tF),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let u=16;u<64;u++)n[u]=QH(n[u-2])+n[u-7]+XH(n[u-15])+n[u-16];let r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],l=e[5],c=e[6],d=e[7];for(let u=0,h,f;u<64;u++)h=d+YH(a)+(a&l^~a&c)+eF[u]+n[u]>>>0,f=JH(r)+(r&o^r&s^o&s)>>>0,d=c,c=l,l=a,a=i+h>>>0,i=s,s=o,o=r,r=h+f>>>0;e[0]+=r,e[1]+=o,e[2]+=s,e[3]+=i,e[4]+=a,e[5]+=l,e[6]+=c,e[7]+=d}digest(e){let n=0;for(;n+56<=e.length;){let i=0;for(;i<16&&n+3<e.length;i++)this._W[i]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,i,16);n<e.length;)this._W[i]|=e[n]<<(3-n%4)*8,n++;this._W[i]|=Nt<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<e.length;o++)for(let i=3;i>=0&&n<e.length;i--)this._W[o]|=e[n++]<<i*8;r||(this._W[o-(n%4===0?0:1)]|=Nt<<(3-n%4)*8),this._W[14]=e.byteLength/d$,this._W[15]=e.byteLength*8,this._updateHash();const s=new Uint8Array(32);for(let i=0;i<this._H.length;i++)for(let a=0;a<4;a++)s[i*4+a]=this._H[i]>>>(3-a)*8;return s}}const rF=t=>new nF().digest(t),oF=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},sF=t=>d6(oF(rF(h6(t)))),fh=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!pa(e.ds,t.id),iF=[{light:"#ecd44433",dark:"#ecd444"}],aF=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=qs();t.forEach(o=>r.add(o)),e=e.filter(o=>!r.has(o))}t.set(n,z$(e))}return t.get(n)},lF=(t,{colors:e=iF,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:s}={})=>{let i=!1;const a=new dF(t,s),l=new ue({props:{editable:c=>{const d=ke.getState(c);return d.snapshot==null&&d.prevSnapshot==null}},key:ke,state:{init:(c,d)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,d)=>{const u=c.getMeta(ke);if(u!==void 0){d=Object.assign({},d);for(const h in u)d[h]=u[h]}return d.addToHistory=c.getMeta("addToHistory")!==!1,d.isChangeOrigin=u!==void 0&&!!u.isChangeOrigin,d.isUndoRedoOperation=u!==void 0&&!!u.isChangeOrigin&&!!u.isUndoRedoOperation,a.prosemirrorView!==null&&u!==void 0&&(u.snapshot!=null||u.prevSnapshot!=null)&&o0(0,()=>{a.prosemirrorView!=null&&(u.restore==null?a._renderSnapshot(u.snapshot,u.prevSnapshot,d):(a._renderSnapshot(u.snapshot,u.snapshot,d),delete d.restore,delete d.snapshot,delete d.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),d}},view:c=>(a.initView(c),s==null&&a._forceRerender(),o(),{update:()=>{const d=l.getState(c.state);if(d.snapshot==null&&d.prevSnapshot==null&&(i||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(i=!0,d.addToHistory===!1&&!d.isChangeOrigin){const u=cr.getState(c.state),h=u&&u.undoManager;h&&h.stopCapturing()}a.mux(()=>{d.doc.transact(u=>{u.meta.set("addToHistory",d.addToHistory),a._prosemirrorChanged(c.state.doc)},ke)})}},destroy:()=>{a.destroy()}})});return l},cF=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new qt(t.doc));else if(e.type==="node"){const r=js(n.doc,n.type,e.anchor,n.mapping);t.setSelection(z.create(t.doc,r))}else{const r=js(n.doc,n.type,e.anchor,n.mapping),o=js(n.doc,n.type,e.head,n.mapping);r!==null&&o!==null&&t.setSelection(H.between(t.doc.resolve(r),t.doc.resolve(o)))}},ph=(t,e)=>({type:e.selection.jsonID,anchor:tc(e.selection.anchor,t.type,t.mapping),head:tc(e.selection.head,t.type,t.mapping)});class dF{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=WH(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=ph(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(tA&&this._domSelectionInView===null&&(o0(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),s=p6.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||s.clientWidth||0)&&o.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,n){n||(n=yA(dA(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(ke,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>ru(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new D(_.from(e),0,0));n.setMeta(ke,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>ru(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new D(_.from(n),0,0));if(e){const o=Jr(qn(e.anchor,0),r.doc.content.size),s=Jr(qn(e.head,0),r.doc.content.size);r.setSelection(H.create(r.doc,o,s))}this.prosemirrorView.dispatch(r.setMeta(ke,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let o=this.doc,s=this.type;if(e||(e=Qp(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&ln(),o=new Qo({gc:!1}),ih(o,n),n=Qp(o),ih(o,e),e=Qp(o),s._item===null){const i=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);s=o.getXmlFragment(i)}else{const i=o.store.clients.get(s._item.id.client)??[],a=An(i,s._item.id.clock);s=i[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(i=>{const a=r.permanentUserData;a&&a.dss.forEach(u=>{Fo(i,u,h=>{})});const l=(u,h)=>{const f=u==="added"?a.getUserByClientId(h.client):a.getUserByDeletedId(h);return{user:f,type:u,color:aF(r.colorMapping,r.colors,f)}},c=AA(s,new d0(n.ds,e.sv)).map(u=>!u._item.deleted||fh(u._item,e)||fh(u._item,n)?ru(u,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(u=>u!==null),d=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new D(_.from(c),0,0));this.prosemirrorView.dispatch(d.setMeta(ke,{isChangeOrigin:!0}))},ke)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=ke.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);Fo(n,n.deleteSet,a=>{if(a.constructor===Se){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const s=this.type.toArray().map(a=>WA(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let i=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new D(_.from(s),0,0));cF(i,this.beforeTransactionSelection,this),i=i.setMeta(ke,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof kA}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&i.scrollIntoView(),this.prosemirrorView.dispatch(i)})}_prosemirrorChanged(e){this.doc.transact(()=>{Qg(this.doc,this.type,e,this),this.beforeTransactionSelection=ph(this,this.prosemirrorView.state)},ke)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const WA=(t,e,n,r,o,s)=>{const i=n.mapping.get(t);if(i===void 0){if(t instanceof Rt)return ru(t,e,n,r,o,s);throw Hn()}return i},ru=(t,e,n,r,o,s)=>{const i=[],a=l=>{var c,d;if(l instanceof Rt){const u=WA(l,e,n,r,o,s);u!==null&&i.push(u)}else{const u=(d=(c=l._item.right)==null?void 0:c.content)==null?void 0:d.type;u instanceof zo&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(l.applyDelta([{retain:l.length},...u.toDelta()]),u.doc.transact(f=>{u._item.delete(f)}));const h=uF(l,e,n,r,o,s);h!==null&&h.forEach(f=>{f!==null&&i.push(f)})}};r===void 0||o===void 0?t.toArray().forEach(a):AA(t,new d0(o.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(fh(t._item,r)?fh(t._item,o)||(l.ychange=s?s("added",t._item.id):{type:"added"}):l.ychange=s?s("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,l,i);return n.mapping.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},ke),n.mapping.delete(t),null}},uF=(t,e,n,r,o,s)=>{const i=[],a=t.toDelta(r,o,s);try{for(let l=0;l<a.length;l++){const c=a[l];i.push(e.text(c.insert,yF(c.attributes,e)))}}catch{return t.doc.transact(c=>{t._item.delete(c)},ke),null}return i},hF=(t,e)=>{const n=new sn,r=t.map(o=>({insert:o.text,attributes:KA(o.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},fF=(t,e)=>{const n=new Rt(t.type.name);for(const r in t.attrs){const o=t.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,mf(t).map(r=>Xg(r,e))),e.mapping.set(n,t),n},Xg=(t,e)=>t instanceof Array?hF(t,e):fF(t,e),kk=t=>typeof t=="object"&&t!==null,v0=(t,e)=>{const n=Object.keys(t).filter(o=>t[o]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(o=>e[o]!==null).length);for(let o=0;o<n.length&&r;o++){const s=n[o],i=t[s],a=e[s];r=s==="ychange"||i===a||kk(i)&&kk(a)&&v0(i,a)}return r},mf=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.isText){const s=[];for(let i=e[r];r<e.length&&i.isText;i=e[++r])s.push(i);r--,n.push(s)}else n.push(o)}return n},GA=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,o)=>r.insert===e[o].text&&YM(r.attributes||{}).length===e[o].marks.length&&XM(r.attributes,(s,i)=>{var c;const a=qA(i),l=e[o].marks;return v0(s,(c=l.find(d=>d.type.name===a))==null?void 0:c.attrs)}))},ec=(t,e)=>{if(t instanceof Rt&&!(e instanceof Array)&&ey(t,e)){const n=mf(e);return t._length===n.length&&v0(t.getAttributes(),e.attrs)&&t.toArray().every((r,o)=>ec(r,n[o]))}return t instanceof sn&&e instanceof Array&&GA(t,e)},mh=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),Ck=(t,e,n)=>{const r=t.toArray(),o=mf(e),s=o.length,i=r.length,a=Jr(i,s);let l=0,c=0,d=!1;for(;l<a;l++){const u=r[l],h=o[l];if(mh(n.mapping.get(u),h))d=!0;else if(!ec(u,h))break}for(;l+c<a;c++){const u=r[i-c-1],h=o[s-c-1];if(mh(n.mapping.get(u),h))d=!0;else if(!ec(u,h))break}return{equalityFactor:l+c,foundMappedChild:d}},pF=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Kn?e+=n.content.str:n.content instanceof Xe&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},mF=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:o}=pF(t),s=e.map(c=>({insert:c.text,attributes:Object.assign({},r,KA(c.marks,n))})),{insert:i,remove:a,index:l}=ZH(o,s.map(c=>c.insert).join(""));t.delete(l,a),t.insert(l,i),t.applyDelta(s.map(c=>({retain:c.insert.length,attributes:c.attributes})))},gF=/(.*)(--[a-zA-Z0-9+/=]{8})$/,qA=t=>{var e;return((e=gF.exec(t))==null?void 0:e[1])??t},yF=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(qA(r),t[r]));return n},KA=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const o=_r(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${sF(r.toJSON())}`:r.type.name]=r.attrs}}),n},Qg=(t,e,n,r)=>{if(e instanceof Rt&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Rt){const u=e.getAttributes(),h=n.attrs;for(const f in h)h[f]!==null?u[f]!==h[f]&&f!=="ychange"&&e.setAttribute(f,h[f]):e.removeAttribute(f);for(const f in u)h[f]===void 0&&e.removeAttribute(f)}const o=mf(n),s=o.length,i=e.toArray(),a=i.length,l=Jr(s,a);let c=0,d=0;for(;c<l;c++){const u=i[c],h=o[c];if(!mh(r.mapping.get(u),h))if(ec(u,h))r.mapping.set(u,h);else break}for(;d+c+1<l;d++){const u=i[a-d-1],h=o[s-d-1];if(!mh(r.mapping.get(u),h))if(ec(u,h))r.mapping.set(u,h);else break}t.transact(()=>{for(;a-c-d>0&&s-c-d>0;){const h=i[c],f=o[c],p=i[a-d-1],g=o[s-d-1];if(h instanceof sn&&f instanceof Array)GA(h,f)||mF(h,f,r),c+=1;else{let y=h instanceof Rt&&ey(h,f),v=p instanceof Rt&&ey(p,g);if(y&&v){const x=Ck(h,f,r),w=Ck(p,g,r);x.foundMappedChild&&!w.foundMappedChild?v=!1:!x.foundMappedChild&&w.foundMappedChild||x.equalityFactor<w.equalityFactor?y=!1:v=!1}y?(Qg(t,h,f,r),c+=1):v?(Qg(t,p,g,r),d+=1):(r.mapping.delete(e.get(c)),e.delete(c,1),e.insert(c,[Xg(f,r)]),c+=1)}}const u=a-c-d;if(a===1&&s===0&&i[0]instanceof sn?(r.mapping.delete(i[0]),i[0].delete(0,i[0].length)):u>0&&(e.slice(c,c+u).forEach(h=>r.mapping.delete(h)),e.delete(c,u)),c+d<s){const h=[];for(let f=c;f<s-d;f++)h.push(Xg(o[f],r));e.insert(c,h)}},ke)},ey=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let vl=null;const bF=()=>{const t=vl;vl=null,t.forEach((e,n)=>{const r=n.state.tr,o=ke.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((s,i)=>{r.setMeta(i,s)}),n.dispatch(r))})},vF=(t,e,n)=>{vl||(vl=new Map,o0(0,bF)),_r(vl,t,En).set(e,n)},tc=(t,e,n)=>{if(t===0)return Xp(e,0,-1);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof sn){if(r._length>=t)return Xp(r,t,-1);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<o)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&o>1)return new Jl(r._item===null?null:r._item.id,r._item===null?Kl(r):null,null);if(t-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Jl(r._item===null?null:r._item.id,r._item===null?Kl(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw ln();if(t===0&&r.constructor!==sn&&r!==e)return wF(r._item.parent,r._item)}return Xp(e,e._length,-1)},wF=(t,e)=>{let n=null,r=null;return t._item===null?r=Kl(t):n=se(t._item.id.client,t._item.id.clock),new Jl(n,r,e.id)},js=(t,e,n,r)=>{const o=U6(n,t);if(o===null||o.type!==e&&!Zl(e,o.type._item))return null;let s=o.type,i=0;if(s.constructor===sn)i=o.index;else if(s._item===null||!s._item.deleted){let a=s._first,l=0;for(;l<s._length&&l<o.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof sn?i+=c._length:i+=r.get(c).nodeSize}a=a.right}i+=1}for(;s!==e&&s._item!==null;){const a=s._item.parent;if(a._item===null||!a._item.deleted){i+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===s)break;l.deleted||(c instanceof sn?i+=c._length:i+=r.get(c).nodeSize),l=l.right}}s=a}return i-1},xF=(t,e,n)=>t!==e,kF=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("â "),o=document.createTextNode("â ");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(o,null),e},ZA=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),CF=/^#[0-9a-fA-F]{6}$/,Sk=(t,e,n,r,o)=>{const s=ke.getState(t),i=s.doc,a=[];return s.snapshot!=null||s.prevSnapshot!=null||s.binding.mapping.size===0?ge.create(t.doc,[]):(e.getStates().forEach((l,c)=>{if(n(i.clientID,c,l)&&l.cursor!=null){const d=l.user||{};d.color==null?d.color="#ffa500":CF.test(d.color)||console.warn("A user uses an unsupported color format",d),d.name==null&&(d.name=`User: ${c}`);let u=js(i,s.type,bl(l.cursor.anchor),s.binding.mapping),h=js(i,s.type,bl(l.cursor.head),s.binding.mapping);if(u!==null&&h!==null){const f=qn(t.doc.content.size-1,0);u=Jr(u,f),h=Jr(h,f),a.push(Te.widget(h,()=>r(d,c),{key:c+"",side:10}));const p=Jr(u,h),g=qn(u,h);a.push(Te.inline(p,g,o(d,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),ge.create(t.doc,a))},SF=(t,{awarenessStateFilter:e=xF,cursorBuilder:n=kF,selectionBuilder:r=ZA,getSelection:o=i=>i.selection}={},s="cursor")=>new ue({key:tl,state:{init(i,a){return Sk(a,t,e,n,r)},apply(i,a,l,c){const d=ke.getState(c),u=i.getMeta(tl);return d&&d.isChangeOrigin||u&&u.awarenessUpdated?Sk(c,t,e,n,r):a.map(i.mapping,i.doc)}},props:{decorations:i=>tl.getState(i)},view:i=>{const a=()=>{i.docView&&vF(i,tl,{awarenessUpdated:!0})},l=()=>{const c=ke.getState(i.state),d=t.getLocalState()||{};if(i.hasFocus()){const u=o(i.state),h=tc(u.anchor,c.type,c.binding.mapping),f=tc(u.head,c.type,c.binding.mapping);(d.cursor==null||!uk(bl(d.cursor.anchor),h)||!uk(bl(d.cursor.head),f))&&t.setLocalStateField(s,{anchor:h,head:f})}else d.cursor!=null&&js(c.doc,c.type,bl(d.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(s,null)};return t.on("change",a),i.dom.addEventListener("focusin",l),i.dom.addEventListener("focusout",l),{update:l,destroy:()=>{i.dom.removeEventListener("focusin",l),i.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(s,null)}}}}),TF=t=>{var e,n;return((n=(e=cr.getState(t))==null?void 0:e.undoManager)==null?void 0:n.undo())!=null},EF=t=>{var e,n;return((n=(e=cr.getState(t))==null?void 0:e.undoManager)==null?void 0:n.redo())!=null},MF=(t,e)=>{var n,r;return e==null?(r=(n=cr.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canUndo():TF(t)},AF=(t,e)=>{var n,r;return e==null?(r=(n=cr.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canRedo():EF(t)},_F=new Set(["paragraph"]),PF=(t,e)=>!(t instanceof Se)||!(t.content instanceof Xn)||!(t.content.type instanceof zo||t.content.type instanceof Rt&&e.has(t.content.type.nodeName))||t.content.type._length===0,RF=({protectedNodes:t=_F,trackedOrigins:e=[],undoManager:n=null}={})=>new ue({key:cr,state:{init:(r,o)=>{const s=ke.getState(o),i=n||new kA(s.type,{trackedOrigins:new Set([ke].concat(e)),deleteFilter:a=>PF(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:(r,o,s,i)=>{const a=ke.getState(i).binding,l=o.undoManager,c=l.undoStack.length>0,d=l.redoStack.length>0;return a?{undoManager:l,prevSel:ph(a,s),hasUndoOps:c,hasRedoOps:d}:c!==o.hasUndoOps||d!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=ke.getState(r.state),s=cr.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:i})=>{const a=o.binding;a&&i.meta.set(a,cr.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:i})=>{const a=o.binding;a&&(a.beforeTransactionSelection=i.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}});function IF(t={}){return new ue({view(e){return new NF(e,t)}})}class NF{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,s=o.getBoundingClientRect(),i=s.width/o.offsetWidth,a=s.height/o.offsetHeight;if(n){let u=e.nodeBefore,h=e.nodeAfter;if(u||h){let f=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=u?p.bottom:p.top;u&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:p.left,right:p.right,top:g-y,bottom:g+y}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*i;r={left:u.left-h,right:u.left+h,top:u.top,bottom:u.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let u=l.getBoundingClientRect(),h=u.width/l.offsetWidth,f=u.height/l.offsetHeight;c=u.left-l.scrollLeft*h,d=u.top-l.scrollTop*f}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=QT(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const DF={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var OF=Object.defineProperty,LF=(t,e,n)=>e in t?OF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A=(t,e,n)=>LF(t,typeof e!="symbol"?e+"":e,n);function jF(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function BF(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return jF(e)}const gf=Pe.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return xM()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new ue({key:new xe("uniqueID"),appendTransaction:(n,r,o)=>{const s=n.some(f=>f.docChanged)&&!r.doc.eq(o.doc),i=this.options.filterTransaction&&n.some(f=>{let p,g;return!(!((g=(p=this.options).filterTransaction)===null||g===void 0)&&g.call(p,f))});if(!s||i)return;const{tr:a}=o,{types:l,attributeName:c,generateID:d}=this.options,u=Ob(r.doc,n),{mapping:h}=u;if(Lb(u).forEach(({newRange:f})=>{const p=_u(o.doc,f,v=>l.includes(v.type.name)),g=p.map(({node:v})=>v.attrs[c]).filter(v=>v!==null),y=BF(g);p.forEach(({node:v,pos:x})=>{let w;const C=(w=a.doc.nodeAt(x))===null||w===void 0?void 0:w.attrs[c];if(C===null){const S=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(S)===null){const T=JSON.parse(JSON.stringify(o.doc.toJSON()));if(T.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(T.content)===JSON.stringify(S.toJSON())){a.setNodeMarkup(x,void 0,{...v.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(x,void 0,{...v.attrs,[c]:d()});return}const{deleted:k}=h.invert().mapResult(x);k&&y.includes(C)&&a.setNodeMarkup(x,void 0,{...v.attrs,[c]:d()})})}),!!a.steps.length)return a},view(n){const r=o=>{let s;t=!((s=n.dom.parentElement)===null||s===void 0)&&s.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return t!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:o}=this.options,s=i=>{const a=[];return i.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(s(l.content)));return}const c=l.type.create({...l.attrs,[o]:null},s(l.content),l.marks);a.push(c)}),_.from(a)};return e=!1,new D(s(n.content),n.openStart,n.openEnd)}}})]}});function Tk(t){return t.type==="link"}function JA(t){return typeof t!="string"&&t.type==="link"}function Xs(t){return typeof t!="string"&&t.type==="text"}function Uo(t){var e,n,r,o,s;return Wo(t)?{...t}:nc(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((o=t.props)==null?void 0:o.colspan)??1,rowspan:((s=t.props)==null?void 0:s.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function nc(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function Wo(t){return nc(t)&&t.props!==void 0&&t.content!==void 0}function Qs(t){return Wo(t)?t.props.colspan??1:1}function rc(t){return Wo(t)?t.props.rowspan??1:1}class br extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function ce(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}const VF=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function yn(t,e="Ctrl"){return VF()?t.replace("Mod","âŒ˜"):t.replace("Mod",e)}function Ne(...t){return t.filter(e=>e).join(" ")}const ty=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function vr(t,e,n,r){const o=document.createElement("div");o.className=Ne("bn-block-content",n.class),o.setAttribute("data-content-type",t);for(const[i,a]of Object.entries(n))i!=="class"&&o.setAttribute(i,a);const s=document.createElement(e);s.className=Ne("bn-inline-content",r.class);for(const[i,a]of Object.entries(r))i!=="class"&&s.setAttribute(i,a);return o.appendChild(s),{dom:o,contentDOM:s}}const Ek=(t,e)=>{let n=si(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},Ye={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},w0=["backgroundColor","textColor"];function gh(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Mk(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function Dc(t){const e={};return Object.entries(t).filter(([n,r])=>!w0.includes(n)).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const s=o.getAttribute(gh(n));if(s===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return s==="true"?!0:s==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const i=parseFloat(s);return!Number.isNaN(i)&&Number.isFinite(i)?i:null}return s},renderHTML:o=>o[n]!==r.default?{[gh(n)]:o[n]}:{}}}),e}function YA(t,e,n,r){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=t(),s=n.state.doc.resolve(o).node().attrs.id;if(!s)throw new Error("Block doesn't have id");const i=e.getBlock(s);if(i.type!==r)throw new Error("Block type does not match");return i}function nl(t,e,n,r,o=!1,s){const i=document.createElement("div");if(s!==void 0)for(const[a,l]of Object.entries(s))a!=="class"&&i.setAttribute(a,l);i.className=Ne("bn-block-content",(s==null?void 0:s.class)||""),i.setAttribute("data-content-type",e);for(const[a,l]of Object.entries(n)){const c=r[a].default;!w0.includes(a)&&l!==c&&i.setAttribute(gh(a),l)}return o&&i.setAttribute("data-file-block",""),i.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=Ne("bn-inline-content",t.contentDOM.className)),{...t,dom:i}}function _n(t){return Er.create(t)}function x0(t,e){return{config:t,implementation:e}}function ao(t,e,n){return x0({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:n,toInternalHTML:Ek,toExternalHTML:Ek})}function XA(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function QA(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function e_(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=e==null?void 0:e(r);return o===void 0?!1:o}}),n}function Oc(t,e){const n=_n({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return Dc(t.propSchema)},parseHTML(){return e_(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return nl({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const s=this.options.editor,i=YA(r,s,this.editor,t.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=e.render(i,s),c=nl(l,i.type,i.props,t.propSchema,a);return t.isSelectable===!1&&QA(c,this.editor),c}}});if(n.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return x0(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render(r,o);return nl(a,r.type,r.props,t.propSchema,t.isFileBlock,i)},toExternalHTML:(r,o)=>{var s,i;const a=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{};let l=(i=e.toExternalHTML)==null?void 0:i.call(e,r,o);return l===void 0&&(l=e.render(r,o)),nl(l,r.type,r.props,t.propSchema,a)}})}function to(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const s=[];t.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&s.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const i=t.resolve(s.find(a=>a>=e)||s[s.length-1]);return{posBeforeNode:i.pos,node:i.nodeAfter}}function k0(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,o=r+n.nodeSize,s={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let i,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const d=l,u=r+c+1,h=u+l.nodeSize;i={node:d,beforePos:u,afterPos:h}}else if(l.type.name==="blockGroup"){const d=l,u=r+c+1,h=u+l.nodeSize;a={node:d,beforePos:u,afterPos:h}}}),!i)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:s,blockContent:i,childContainer:a,blockNoteType:i.node.type.name}}else{if(!s.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${s.node}`);return{isBlockContainer:!1,bnBlock:s,childContainer:s,blockNoteType:s.node.type.name}}}function Go(t){return k0(t.node,t.posBeforeNode)}function Lc(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return k0(t.nodeAfter,t.pos)}function Re(t){const e=to(t.doc,t.selection.anchor);return Go(e)}function yf(t){const e=to(t.doc,t.selection.anchor);return Go(e)}function rt(t){return"doc"in t?t.doc.type.schema:t.type.schema}function t_(t){return t.cached.blockNoteEditor}function jc(t){return t_(t).schema}function C0(t){return jc(t).blockSchema}function S0(t){return jc(t).inlineContentSchema}function ya(t){return jc(t).styleSchema}function T0(t){return t_(t).blockCache}function n_(t,e,n){var r,o;const s={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},i=[];t.content.forEach((a,l,c)=>{const d={cells:[]};c===0&&a.content.forEach(u=>{let h=u.attrs.colwidth;h==null&&(h=new Array(u.attrs.colspan??1).fill(void 0)),s.columnWidths.push(...h)}),d.cells=a.content.content.map((u,h)=>(i[c]||(i[c]=[]),i[c][h]=u.type.name==="tableHeader",{type:"tableCell",content:u.content.content.map(f=>bf(f,e,n)).reduce((f,p)=>{if(!f.length)return p;const g=f[f.length-1],y=p[0];return y&&Xs(g)&&Xs(y)&&JSON.stringify(g.styles)===JSON.stringify(y.styles)?(g.text+=`
`+y.text,f.push(...p.slice(1)),f):(f.push(...p),f)},[]),props:{colspan:u.attrs.colspan,rowspan:u.attrs.rowspan,backgroundColor:u.attrs.backgroundColor,textColor:u.attrs.textColor,textAlignment:u.attrs.textAlignment}})),s.rows.push(d)});for(let a=0;a<i.length;a++)(r=i[a])!=null&&r.every(l=>l)&&(s.headerRows=(s.headerRows??0)+1);for(let a=0;a<((o=i[0])==null?void 0:o.length);a++)i!=null&&i.every(l=>l[a])&&(s.headerCols=(s.headerCols??0)+1);return s}function bf(t,e,n){const r=[];let o;return t.content.forEach(s=>{if(s.type.name==="hardBreak"){if(o)if(Xs(o))o.text+=`
`;else if(Tk(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(s.type.name!=="link"&&s.type.name!=="text"){if(!e[s.type.name]){console.warn("unrecognized inline content type",s.type.name);return}o&&(r.push(o),o=void 0),r.push($F(s,e,n));return}const i={};let a;for(const l of s.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(c.propSchema==="boolean")i[c.type]=!0;else if(c.propSchema==="string")i[c.type]=l.attrs.stringValue;else throw new br(c.propSchema)}o?Xs(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):JSON.stringify(o.styles)===JSON.stringify(i)?o.text+=s.textContent:(r.push(o),o={type:"text",text:s.textContent,styles:i}):Tk(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(i)?o.content[o.content.length-1].text+=s.textContent:o.content.push({type:"text",text:s.textContent,styles:i}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):(r.push(o),o={type:"text",text:s.textContent,styles:i})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}:o={type:"text",text:s.textContent,styles:i}}),o&&r.push(o),r}function $F(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},o=e[t.type.name];for(const[i,a]of Object.entries(t.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=o.propSchema;i in l&&(r[i]=a)}let s;return o.content==="styled"?s=bf(t,e,n):s=void 0,{type:t.type.name,props:r,content:s}}function Le(t,e,n=C0(e),r=S0(e),o=ya(e),s=T0(e)){var i;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const a=s==null?void 0:s.get(t);if(a)return a;const l=k0(t,0);let c=l.bnBlock.node.attrs.id;c===null&&(c=gf.options.generateID());const d=n[l.blockNoteType];if(!d)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const u={};for(const[y,v]of Object.entries({...t.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const x=d.propSchema;y in x&&!(x[y].default===void 0&&v===void 0)&&(u[y]=v)}const h=n[l.blockNoteType],f=[];(i=l.childContainer)==null||i.node.forEach(y=>{f.push(Le(y,e,n,r,o,s))});let p;if(h.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");p=bf(l.blockContent.node,r,o)}else if(h.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");p=n_(l.blockContent.node,r,o)}else if(h.content==="none")p=void 0;else throw new br(h.content);const g={id:c,type:h.type,props:u,content:p,children:f};return s==null||s.set(t,g),g}function HF(t,e,n=C0(e),r=S0(e),o=ya(e),s=T0(e)){const i=[];return t.firstChild.descendants(a=>(i.push(Le(a,e,n,r,o,s)),!1)),i}function FF(t,e,n=C0(e),r=S0(e),o=ya(e),s=T0(e)){function i(a,l,c){if(a.type.name!=="blockGroup")throw new Error("unexpected");const d=[];let u,h;return a.forEach((f,p,g)=>{if(f.type.name!=="blockContainer")throw new Error("unexpected");if(f.childCount===0)return;if(f.childCount===0||f.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+f.childCount);const y=g===0,v=g===a.childCount-1;if(f.firstChild.type.name==="blockGroup"){if(!y)throw new Error("unexpected");const k=i(f.firstChild,Math.max(0,l-1),v?Math.max(0,c-1):0);u=k.blockCutAtStart,v&&(h=k.blockCutAtEnd),d.push(...k.blocks);return}const x=Le(f,e,n,r,o,s),w=f.childCount>1?f.child(1):void 0;let C=[];if(w){const k=i(w,0,v?Math.max(0,c-1):0);C=k.blocks,v&&(h=k.blockCutAtEnd)}v&&!w&&c>1&&(h=x.id),y&&l>1&&(u=x.id),d.push({...x,children:C})}),{blocks:d,blockCutAtStart:u,blockCutAtEnd:h}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return i(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function r_(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function zF(t,e){return{config:t,implementation:e}}function xs(t,e){return zF({type:t.name,propSchema:e},{mark:t})}function o_(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function es(t){const{height:e,width:n}=E0(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),o=(s,i)=>{for(let a=s;a<e;a++)for(let l=i;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let s=0;s<t.content.rows.length;s++)for(let i=0;i<t.content.rows[s].cells.length;i++){const a=Uo(t.content.rows[s].cells[i]),l=rc(a),c=Qs(a),{row:d,col:u}=o(s,i);for(let h=d;h<d+l;h++)for(let f=u;f<u+c;f++){if(r[h][f])throw new Error(`Unable to create occupancy grid for table, cell at ${h},${f} is already occupied`);r[h][f]={row:s,col:i,rowspan:l,colspan:c,cell:a}}}return r}function oc(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function ei(t,e,n=es(e)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const s=n[r][o];if(s.row===t.row&&s.col===t.col)return{row:r,col:o,cell:s.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function E0(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let o=0;r.cells.forEach(s=>{o+=Qs(s)}),n=Math.max(n,o)}),{height:e,width:n}}function s_(t,e,n=es(e)){var r;const o=(r=n[t.row])==null?void 0:r[t.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function ny(t,e){var n;const r=es(t);if(e<0||e>=r.length)return[];let o=0;for(let i=0;i<e;i++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const s=new Array(r[0].length).fill(!1).map((i,a)=>s_({row:o,col:a},t,r)).filter(i=>i!==void 0);return s.filter((i,a)=>s.findIndex(l=>l.row===i.row&&l.col===i.col)===a)}function ry(t,e){var n;const r=es(t);if(e<0||e>=r[0].length)return[];let o=0;for(let i=0;i<e;i++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const s=new Array(r.length).fill(!1).map((i,a)=>s_({row:a,col:o},t,r)).filter(i=>i!==void 0);return s.filter((i,a)=>s.findIndex(l=>l.row===i.row&&l.col===i.col)===a)}function UF(t,e,n,r=es(t)){const{col:o}=ei({row:0,col:e},t,r),{col:s}=ei({row:0,col:n},t,r);return r.forEach(i=>{const[a]=i.splice(o,1);i.splice(s,0,a)}),oc(r)}function WF(t,e,n,r=es(t)){const{row:o}=ei({row:e,col:0},t,r),{row:s}=ei({row:n,col:0},t,r),[i]=r.splice(o,1);return r.splice(s,0,i),oc(r)}function oy(t){return t?nc(t)?oy(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:Xs(e)?e.text.length===0:JA(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function GF(t,e,n=es(t)){if(e==="columns"){let s=0;for(let i=n[0].length-1;i>=0&&n.every(a=>oy(a[i].cell)&&a[i].colspan===1);i--)s++;for(let i=n.length-1;i>=0;i--){const a=Math.max(n[i].length-s,1);n[i]=n[i].slice(0,a)}return oc(n)}let r=0;for(let s=n.length-1;s>=0&&n[s].every(i=>oy(i.cell)&&i.rowspan===1);s--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),oc(n)}function qF(t,e,n,r=es(t)){const{width:o,height:s}=E0(t);if(e==="columns")r.forEach((i,a)=>{if(n>=0)for(let l=0;l<n;l++)i.push({row:a,col:Math.max(...i.map(c=>c.col))+1,rowspan:1,colspan:1,cell:Uo("")});else i.splice(o+n,-1*n)});else if(n>0)for(let i=0;i<n;i++){const a=new Array(o).fill(null).map((l,c)=>({row:s+i,col:c,rowspan:1,colspan:1,cell:Uo("")}));r.push(a)}else n<0&&r.splice(s+n,-1*n);return oc(r)}function i_(t,e,n){const r=ny(t,n);if(!r.some(i=>rc(i.cell)>1))return!0;let o=n,s=n;return r.forEach(i=>{const a=rc(i.cell);o=Math.max(o,i.row+a-1),s=Math.min(s,i.row)}),e<n?n===o:n===s}function a_(t,e,n){const r=ry(t,n);if(!r.some(i=>Qs(i.cell)>1))return!0;let o=n,s=n;return r.forEach(i=>{const a=Qs(i.cell);o=Math.max(o,i.col+a-1),s=Math.min(s,i.col)}),e<n?n===o:n===s}function KF(t,e,n){const r=ei(t,n),o=ei(e,n);return r.col===o.col}function Ak(t,e,n,r){const o=[];for(const[s,i]of Object.entries(t.styles||{})){const a=n[s];if(!a)throw new Error(`style ${s} not found in styleSchema`);if(a.propSchema==="boolean")o.push(e.mark(s));else if(a.propSchema==="string")o.push(e.mark(s,{stringValue:i}));else throw new br(a.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(s=>s.length>0).map(s=>s===`
`?e.nodes.hardBreak.createChecked():e.text(s,o)):t.text.length>0?[e.text(t.text,o)]:[]}function ZF(t,e,n){const r=e.marks.link.create({href:t.href});return sy(t.content,e,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function sy(t,e,n,r){const o=[];if(typeof t=="string")return o.push(...Ak({text:t,styles:{}},e,n,r)),o;for(const s of t)o.push(...Ak(s,e,n,r));return o}function Zn(t,e,n,r=ya(e)){const o=[];for(const s of t)typeof s=="string"?o.push(...sy(s,e,r,n)):JA(s)?o.push(...ZF(s,e,r)):Xs(s)?o.push(...sy([s],e,r,n)):o.push(l_(s,e,r));return o}function vf(t,e,n=ya(e)){const r=[],o=new Array(t.headerRows??0).fill(!0),s=new Array(t.headerCols??0).fill(!0),i=t.columnWidths??[];for(let a=0;a<t.rows.length;a++){const l=t.rows[a],c=[],d=o[a];for(let h=0;h<l.cells.length;h++){const f=l.cells[h],p=s[h],g=void 0;let y=null;const v=ei({row:a,col:h},{content:t});let x=i[v.col]?[i[v.col]]:null;if(f)if(typeof f=="string")y=e.text(f);else if(nc(f)){f.content&&(y=Zn(f.content,e,"tableParagraph",n));const C=Qs(f);C>1&&(x=new Array(C).fill(!1).map((k,S)=>i[v.col+S]??void 0))}else y=Zn(f,e,"tableParagraph",n);const w=e.nodes[p||d?"tableHeader":"tableCell"].createChecked({...nc(f)?f.props:{},colwidth:x},e.nodes.tableParagraph.createChecked(g,y));c.push(w)}const u=e.nodes.tableRow.createChecked({},c);r.push(u)}return r}function l_(t,e,n){let r,o=t.type;if(o===void 0&&(o="paragraph"),!e.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!t.content)r=e.nodes[o].createChecked(t.props);else if(typeof t.content=="string"){const s=Zn([t.content],e,o,n);r=e.nodes[o].createChecked(t.props,s)}else if(Array.isArray(t.content)){const s=Zn(t.content,e,o,n);r=e.nodes[o].createChecked(t.props,s)}else if(t.content.type==="tableContent"){const s=vf(t.content,e,n);r=e.nodes[o].createChecked(t.props,s)}else throw new br(t.content.type);return r}function si(t,e,n=ya(e)){let r=t.id;r===void 0&&(r=gf.options.generateID());const o=[];if(t.children)for(const s of t.children)o.push(si(s,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const s=l_(t,e,n),i=o.length>0?e.nodes.blockGroup.createChecked({},o):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},i?[s,i]:s)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},o);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function cn(t,e){let n,r;if(e.firstChild.descendants((o,s)=>n?!1:!iy(o)||o.attrs.id!==t?!0:(n=o,r=s+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function iy(t){return t.type.isInGroup("bnBlock")}function JF(t,e){return t.id!==e.id||t.type!==e.type||JSON.stringify(t.props)!==JSON.stringify(e.props)||JSON.stringify(t.content)!==JSON.stringify(e.content)}function YF(t,e=[]){let n={type:"local"};t.getMeta("paste")?n={type:"paste"}:t.getMeta("uiEvent")==="drop"?n={type:"drop"}:t.getMeta("history$")?n={type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")&&(t.getMeta("y-sync$").isUndoRedoOperation?n={type:"undo-redo"}:n={type:"yjs-remote"});const r=rt(t),o=Ob(t.before,[t,...e]),s=Lb(o),i=s.flatMap(u=>_u(o.before,u.oldRange,iy)).map(({node:u})=>Le(u,r)),a=s.flatMap(u=>_u(o.doc,u.newRange,iy)).map(({node:u})=>Le(u,r)),l=new Map(a.map(u=>[u.id,u])),c=new Map(i.map(u=>[u.id,u])),d=[];for(const[u,h]of l)c.has(u)||d.push({type:"insert",block:h,source:n,prevBlock:void 0});for(const[u,h]of c)l.has(u)||d.push({type:"delete",block:h,source:n,prevBlock:void 0});for(const[u,h]of l)if(c.has(u)){const f=c.get(u);JF(f,h)&&d.push({type:"update",block:h,prevBlock:f,source:n})}return d}function XF(t,e,n,r="before"){const o=typeof n=="string"?n:n.id,s=rt(t),i=e.map(c=>si(c,s)),a=cn(o,t.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),t.step(new Ze(l,l,new D(_.from(i),0,0))),i.map(c=>Le(c,s))}function _k(t,e,n){const r=rt(t),o=n.map(c=>si(c,r)),s=new Set(e.map(c=>typeof c=="string"?c:c.id)),i=[],a=typeof e[0]=="string"?e[0]:e[0].id;let l=0;if(t.doc.descendants((c,d)=>{if(s.size===0)return!1;if(!c.type.isInGroup("bnBlock")||!s.has(c.attrs.id))return!0;if(i.push(Le(c,r)),s.delete(c.attrs.id),n.length>0&&c.attrs.id===a){const p=t.doc.nodeSize;t.insert(d,o);const g=t.doc.nodeSize;l+=p-g}const u=t.doc.nodeSize,h=t.doc.resolve(d-l);h.node().type.name==="blockGroup"&&h.node(h.depth-1).type.name!=="doc"&&h.node().childCount===1?t.delete(h.before(),h.after()):t.delete(d-l,d-l+c.nodeSize);const f=t.doc.nodeSize;return l+=u-f,!1}),s.size>0){const c=[...s].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+c)}return{insertedBlocks:o.map(c=>Le(c,r)),removedBlocks:i}}const dt=(t,e)=>({tr:n,dispatch:r})=>(r&&c_(n,t,e),!0);function c_(t,e,n,r,o){const s=Lc(t.doc.resolve(e)),i=rt(t),a=i.nodes[s.blockNoteType],l=i.nodes[n.type||s.blockNoteType],c=l.isInGroup("bnBlock")?l:i.nodes.blockContainer;if(s.isBlockContainer&&l.isInGroup("blockContent"))Pk(n,t,s),QF(n,t,a,l,s);else if(!s.isBlockContainer&&l.isInGroup("bnBlock"))Pk(n,t,s);else{const d=Le(s.bnBlock.node,i);t.replaceWith(s.bnBlock.beforePos,s.bnBlock.afterPos,si({children:d.children,...n},i));return}t.setNodeMarkup(s.bnBlock.beforePos,c,{...s.bnBlock.node.attrs,...n.props})}function QF(t,e,n,r,o,s,i){const a=rt(e);let l="keep";if(t.content)if(typeof t.content=="string")l=Zn([t.content],a,r.name);else if(Array.isArray(t.content))l=Zn(t.content,a,r.name);else if(t.content.type==="tableContent")l=vf(t.content,a);else throw new br(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);l==="keep"?e.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...t.props}):e.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...t.props},l))}function Pk(t,e,n){const r=rt(e);if(t.children!==void 0&&t.children.length>0){const o=t.children.map(s=>si(s,r));if(n.childContainer)e.step(new Ze(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new D(_.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function ez(t,e,n,r,o){const s=typeof e=="string"?e:e.id,i=cn(s,t.doc);if(!i)throw new Error(`Block with ID ${s} not found`);c_(t,i.posBeforeNode,n);const a=t.doc.resolve(i.posBeforeNode+1).node(),l=rt(t);return Le(a,l)}function d_(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function u_(t,e,n,r){let o;if(e)if(typeof e=="string")o=Zn([e],t.pmSchema);else if(Array.isArray(e))o=Zn(e,t.pmSchema);else if(e.type==="tableContent")o=vf(e,t.pmSchema);else throw new br(e.type);else throw new Error("blockContent is required");const s=n.serializeFragment(_.from(o),r);return s.nodeType===1&&d_(s),s}function tz(t,e,n,r,o,s,i){var a,l,c,d,u,h,f,p;const g=(i==null?void 0:i.document)??document,y=e.pmSchema.nodes.blockContainer;let v=n.props;if(!n.props){v={};for(const[T,E]of Object.entries(e.schema.blockSchema[n.type].propSchema))E.default!==void 0&&(v[T]=E.default)}const x=(l=(a=y.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,y.create({id:n.id,...v})),w=Array.from(x.dom.attributes),C=e.blockImplementations[n.type].implementation.toExternalHTML({...n,props:v},e),k=g.createDocumentFragment();if(C.dom.classList.contains("bn-block-content")){const T=[...w,...Array.from(C.dom.attributes)].filter(E=>E.name.startsWith("data")&&E.name!=="data-content-type"&&E.name!=="data-file-block"&&E.name!=="data-node-view-wrapper"&&E.name!=="data-node-type"&&E.name!=="data-id"&&E.name!=="data-index"&&E.name!=="data-editable");for(const E of T)C.dom.firstChild.setAttribute(E.name,E.value);d_(C.dom.firstChild),k.append(...Array.from(C.dom.childNodes))}else k.append(C.dom);if(C.contentDOM&&n.content){const T=u_(e,n.content,r,i);C.contentDOM.appendChild(T)}let S;if(o.has(n.type)?S="OL":s.has(n.type)&&(S="UL"),S){if(((c=t.lastChild)==null?void 0:c.nodeName)!==S){const E=g.createElement(S);S==="OL"&&v!=null&&v.start&&(v==null?void 0:v.start)!==1&&E.setAttribute("start",v.start+""),t.append(E)}const T=g.createElement("li");T.append(k),t.lastChild.appendChild(T)}else t.append(k);if(n.children&&n.children.length>0){const T=g.createDocumentFragment();if(h_(T,e,n.children,r,o,s,i),((d=t.lastChild)==null?void 0:d.nodeName)==="UL"||((u=t.lastChild)==null?void 0:u.nodeName)==="OL")for(;((h=T.firstChild)==null?void 0:h.nodeName)==="UL"||((f=T.firstChild)==null?void 0:f.nodeName)==="OL";)t.lastChild.lastChild.appendChild(T.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(T):(p=C.contentDOM)==null||p.append(T)}}const h_=(t,e,n,r,o,s,i)=>{for(const a of n)tz(t,e,a,r,o,s,i)},nz=(t,e,n,r,o,s)=>{const i=((s==null?void 0:s.document)??document).createDocumentFragment();return h_(i,t,e,n,r,o,s),i},wf=(t,e)=>{const n=so.fromSchema(t);return{exportBlocks:(r,o)=>{const s=nz(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),i=document.createElement("div");return i.append(s),i.innerHTML},exportInlineContent:(r,o)=>{const s=u_(e,r,n,o),i=document.createElement("div");return i.append(s.cloneNode(!0)),i.innerHTML}}};function rz(t,e,n,r,o){let s;if(e)if(typeof e=="string")s=Zn([e],t.pmSchema,r);else if(Array.isArray(e))s=Zn(e,t.pmSchema,r);else if(e.type==="tableContent")s=vf(e,t.pmSchema);else throw new br(e.type);else throw new Error("blockContent is required");return n.serializeFragment(_.from(s),o)}function oz(t,e,n,r,o){var s,i,a,l,c;const d=t.pmSchema.nodes.blockContainer;let u=e.props;if(!e.props){u={};for(const[p,g]of Object.entries(t.schema.blockSchema[e.type].propSchema))g.default!==void 0&&(u[p]=g.default)}const h=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:u},t);if(e.type==="numberedListItem"&&h.dom.setAttribute("data-index",r.toString()),h.contentDOM&&e.content){const p=rz(t,e.content,n,e.type,o);h.contentDOM.appendChild(p)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const p=f_(t,e.children,n,o);(s=h.contentDOM)==null||s.append(p)}return h.dom}const f=(a=(i=d.spec)==null?void 0:i.toDOM)==null?void 0:a.call(i,d.create({id:e.id,...u}));return(l=f.contentDOM)==null||l.appendChild(h.dom),e.children&&e.children.length>0&&((c=f.contentDOM)==null||c.appendChild(p_(t,e.children,n,o))),f.dom}function f_(t,e,n,r){const o=((r==null?void 0:r.document)??document).createDocumentFragment();let s=0;for(const i of e){i.type==="numberedListItem"?s++:s=0;const a=oz(t,i,n,s,r);o.appendChild(a)}return o}const p_=(t,e,n,r)=>{var o;const s=t.pmSchema.nodes.blockGroup,i=s.spec.toDOM(s.create({})),a=f_(t,e,n,r);return(o=i.contentDOM)==null||o.appendChild(a),i.dom},sz=(t,e)=>{const n=so.fromSchema(t);return{serializeBlocks:(r,o)=>p_(e,r,n,o).outerHTML}},xf=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),o=(r==null?void 0:r.textContent)??void 0;return{targetElement:n,caption:o}},iz=(t,e,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const s=document.createElement("div");s.className="bn-add-file-button-icon",r?s.appendChild(r):s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(s);const i=document.createElement("p");i.className="bn-add-file-button-text",i.innerHTML=n||e.dictionary.file_blocks.file.add_button_text,o.appendChild(i);const a=c=>{c.preventDefault()},l=()=>{e.transact(c=>c.setMeta(e.filePanel.plugins[0],{block:t}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},az='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',lz=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=az,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},M0=(t,e,n,r,o)=>{const s=document.createElement("div");if(s.className="bn-file-block-content-wrapper",t.props.url===""){const a=iz(t,e,r,o);s.appendChild(a.dom);const l=e.onUploadStart(c=>{if(c===t.id){s.removeChild(a.dom);const d=document.createElement("div");d.className="bn-file-loading-preview",d.textContent="Loading...",s.appendChild(d)}});return{dom:s,destroy:()=>{l(),a.destroy()}}}const i={dom:s};if(t.props.showPreview===!1||!n){const a=lz(t);s.appendChild(a.dom),i.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else s.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,s.appendChild(a)}return i},A0=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},kf=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},Rk=t=>({url:t.src||void 0}),cz='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',dz={backgroundColor:Ye.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},m_={type:"audio",propSchema:dz,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},uz=(t,e)=>{const n=document.createElement("div");n.innerHTML=cz;const r=document.createElement("audio");return r.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(o=>{r.src=o}):r.src=t.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,M0(t,e,{dom:r},e.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},g_=t=>{if(t.tagName==="AUDIO")return t.closest("figure")?void 0:Rk(t);if(t.tagName==="FIGURE"){const e=xf(t,"audio");if(!e)return;const{targetElement:n,caption:r}=e;return{...Rk(n),caption:r}}},hz=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?A0(e,t.props.caption):kf(e,t.props.caption):{dom:e}},fz=Oc(m_,{render:uz,parse:g_,toExternalHTML:hz}),Ik=Symbol.for("blocknote.shikiParser"),nm=Symbol.for("blocknote.shikiHighlighterPromise"),pz={language:{default:"text"}},mz=_n({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const t=this.options;return{language:{default:t.editor.settings.codeBlock.defaultLanguage,parseHTML:e=>{let n=e,r=null;(n==null?void 0:n.tagName)==="DIV"&&(n==null?void 0:n.dataset.contentType)==="codeBlock"&&(n=n.children[0]),(n==null?void 0:n.tagName)==="PRE"&&(n=n==null?void 0:n.children[0]);const o=n==null?void 0:n.getAttribute("data-language");if(o)r=o.toLowerCase();else{const s=[...(n==null?void 0:n.className.split(" "))||[]].filter(i=>i.startsWith("language-")).map(i=>i.replace("language-",""));s.length>0&&(r=s[0].toLowerCase())}return r?rm(t.editor.settings.codeBlock,r)??r:null},renderHTML:e=>e.language?{class:`language-${e.language}`,"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,n;const r=document.createElement("pre"),{dom:o,contentDOM:s}=vr(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...t});return o.removeChild(s),o.appendChild(r),r.appendChild(s),{dom:o,contentDOM:s}},addNodeView(){const t=this.options;return({editor:e,node:n,getPos:r,HTMLAttributes:o})=>{var s,i;const a=document.createElement("pre"),l=document.createElement("select"),c=document.createElement("div"),{dom:d,contentDOM:u}=vr(this.name,"code",{...((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},...o},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{}),h=f=>{const p=f.target.value;e.commands.command(({tr:g})=>(g.setNodeAttribute(r(),"language",p),!0))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach(([f,{name:p}])=>{const g=document.createElement("option");g.value=f,g.text=p,l.appendChild(g)}),c.contentEditable="false",l.value=n.attrs.language||t.editor.settings.codeBlock.defaultLanguage,d.removeChild(u),d.appendChild(c),d.appendChild(a),a.appendChild(u),c.appendChild(l),l.addEventListener("change",h),{dom:d,contentDOM:u,update:f=>f.type===this.type,destroy:()=>{l.removeEventListener("change",h)}}}},addProseMirrorPlugins(){const t=this.options,e=globalThis;let n,r;return[e8({parser:o=>{if(!t.editor.settings.codeBlock.createHighlighter)return[];if(!n)return e[nm]=e[nm]||t.editor.settings.codeBlock.createHighlighter(),e[nm].then(i=>{n=i});const s=rm(t.editor.settings.codeBlock,o.language);return!s||s==="text"||s==="none"||s==="plaintext"||s==="txt"?[]:n.getLoadedLanguages().includes(s)?(r||(r=e[Ik]||t8(n),e[Ik]=r),r(o)):n.loadLanguage(s)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options;return[new $o({find:/^```(.*?)\s$/,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=r[1].trim(),i={language:rm(t.editor.settings.codeBlock,s)??s};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,i).setSelection(H.create(e.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:n}=e;if(t.isActive(this.name)&&!n.parent.textContent&&nf(e)){const r=n.pos-n.parentOffset-2;return t.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const n=e.parentOffset===e.parent.nodeSize-2,r=e.parent.textContent.endsWith(`

`);return!n||!r?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:o})=>(o.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),gz=ao(mz,pz);function rm(t,e){var n;return(n=Object.entries(t.supportedLanguages).find(([r,{aliases:o}])=>(o==null?void 0:o.includes(e))||r===e))==null?void 0:n[0]}const yz=ht.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),bz=xs(yz,"string"),vz=ht.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),wz=xs(vz,"string"),Nk=t=>({url:t.src||void 0}),xz={backgroundColor:Ye.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},y_={type:"file",propSchema:xz,content:"none",isFileBlock:!0},kz=(t,e)=>M0(t,e),b_=t=>{if(t.tagName==="EMBED")return t.closest("figure")?void 0:Nk(t);if(t.tagName==="FIGURE"){const e=xf(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e;return{...Nk(n),caption:r}}},Cz=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?kf(e,t.props.caption):{dom:e}},Sz=Oc(y_,{render:kz,parse:b_,toExternalHTML:Cz}),v_={...Ye,level:{default:1,values:[1,2,3]}},Tz=_n({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return Dc(v_)},addInputRules(){return[...[1,2,3].map(t=>new $o({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:n,range:r})=>{const o=Re(e);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(dt(o.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){return{"Mod-Alt-1":()=>{const t=Re(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(dt(t.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":()=>{const t=Re(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(dt(t.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":()=>{const t=Re(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(dt(t.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;return vr(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),Ez=ao(Tz,v_),w_=(t,e,n,r,o,s)=>{const{dom:i,destroy:a}=M0(t,e,n,o,s),l=i;t.props.url&&t.props.showPreview&&(t.props.previewWidth?l.style.width=`${t.props.previewWidth}px`:l.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const d=document.createElement("div");d.className="bn-resize-handle",d.style.right="4px";let u,h=t.props.previewWidth;const f=w=>{var C,k;if(!u){!e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d));return}let S;t.props.textAlignment==="center"?u.handleUsed==="left"?S=u.initialWidth+(u.initialClientX-w.clientX)*2:S=u.initialWidth+(w.clientX-u.initialClientX)*2:u.handleUsed==="left"?S=u.initialWidth+u.initialClientX-w.clientX:S=u.initialWidth+w.clientX-u.initialClientX,h=Math.min(Math.max(S,64),((k=(C=e.domElement)==null?void 0:C.firstElementChild)==null?void 0:k.clientWidth)||Number.MAX_VALUE),l.style.width=`${h}px`},p=w=>{(!w.target||!l.contains(w.target)||!e.isEditable)&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d)),u&&(u=void 0,e.updateBlock(t,{props:{previewWidth:h}}))},g=()=>{e.isEditable&&(r.appendChild(c),r.appendChild(d))},y=w=>{w.relatedTarget===c||w.relatedTarget===d||u||e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},v=w=>{w.preventDefault(),u={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:w.clientX}},x=w=>{w.preventDefault(),u={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:w.clientX}};return window.addEventListener("mousemove",f),window.addEventListener("mouseup",p),l.addEventListener("mouseenter",g),l.addEventListener("mouseleave",y),c.addEventListener("mousedown",v),d.addEventListener("mousedown",x),{dom:l,destroy:()=>{a==null||a(),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p),l.removeEventListener("mouseenter",g),l.removeEventListener("mouseleave",y),c.removeEventListener("mousedown",v),d.removeEventListener("mousedown",x)}}},Dk=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},Mz='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',Az={textAlignment:Ye.textAlignment,backgroundColor:Ye.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},x_={type:"image",propSchema:Az,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},_z=(t,e)=>{const n=document.createElement("div");n.innerHTML=Mz;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),w_(t,e,{dom:r},r,e.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},k_=t=>{if(t.tagName==="IMG")return t.closest("figure")?void 0:Dk(t);if(t.tagName==="FIGURE"){const e=xf(t,"img");if(!e)return;const{targetElement:n,caption:r}=e;return{...Dk(n),caption:r}}},Pz=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?A0(e,t.props.caption):kf(e,t.props.caption):{dom:e}},Rz=Oc(x_,{render:_z,parse:k_,toExternalHTML:Pz});function _0(t,e,n){var r,o,s;const i=qr.fromSchema(e),a=t,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const f of Array.from(a.childNodes))l.appendChild(f.cloneNode(!0));let c=i.parse(l,{topNode:e.nodes.blockGroup.create()});((o=(r=c.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const d=(s=c.firstChild)==null?void 0:s.firstChild;if(!(d!=null&&d.isTextblock))return _.from(c);const u=e.nodes[n].create({},d.content),h=c.content.cut(d.nodeSize+2);if(h.size>0){const f=c.copy(h);return u.content.addToEnd(f)}return u.content}const C_=(t,e,n)=>({state:r,dispatch:o})=>{const s=to(r.doc,t),i=Go(s);if(!i.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const a=[{type:i.bnBlock.node.type,attrs:n?{...i.bnBlock.node.attrs,id:void 0}:{}},{type:e?i.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...i.blockContent.node.attrs}:{}}];return o&&r.tr.split(t,2,a),!0},P0=t=>{const{blockInfo:e,selectionEmpty:n}=t.transact(s=>({blockInfo:yf(s),selectionEmpty:s.selection.anchor===s.selection.head}));if(!e.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=e;return!(o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:t._tiptapEditor.commands.first(({state:s,chain:i,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(dt(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(i().deleteSelection().command(C_(s.selection.from,!0)).run(),!0):!1)])},Iz={...Ye},Nz=_n({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new $o({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Re(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(dt(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>P0(this.options.editor),"Mod-Shift-8":()=>{const t=Re(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(dt(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"?{}:!1},getContent:(t,e)=>_0(t,e,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return vr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Dz=ao(Nz,Iz),S_={...Ye,checked:{default:!1}},Oz=_n({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return Dc(S_)},addInputRules(){return[new $o({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Re(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(dt(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new $o({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Re(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(dt(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>P0(this.options.editor),"Mod-Shift-9":()=>{const t=Re(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(dt(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:t=>typeof t=="string"||t.closest("[data-content-type]")||t.closest("li")?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"){const r=t.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(t,e)=>_0(t,e,this.name),node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=t.attrs.checked,t.attrs.checked&&o.setAttribute("checked","");const{dom:s,contentDOM:i}=vr(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return s.insertBefore(o,i),{dom:s,contentDOM:i}},addNodeView(){return({node:t,getPos:e,editor:n,HTMLAttributes:r})=>{var o,s;const i=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=t.attrs.checked,t.attrs.checked&&l.setAttribute("checked","");const c=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof e!="boolean"){const h=to(n.state.doc,e());if(h.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${h.node.type.name}`);this.editor.commands.command(dt(h.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",c);const{dom:d,contentDOM:u}=vr(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{});if(typeof e!="boolean"){const h="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;l.setAttribute("aria-labelledby",h),u.id=h}return d.removeChild(u),d.appendChild(i),i.appendChild(a),i.appendChild(u),a.appendChild(l),{dom:d,contentDOM:u,destroy:()=>{l.removeEventListener("change",c)}}}}}),Lz=ao(Oz,S_),jz=new xe("numbered-list-indexing"),Bz=()=>new ue({key:jz,appendTransaction:(t,e,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((s,i)=>{var a;if(s.type.name==="blockContainer"&&s.firstChild.type.name==="numberedListItem"){let l=`${s.firstChild.attrs.start||1}`;const c=Go({posBeforeNode:i,node:s});if(!c.isBlockContainer)throw new Error("impossible");const d=r.doc.resolve(c.bnBlock.beforePos).nodeBefore;if(d){const p=Go({posBeforeNode:c.bnBlock.beforePos-d.nodeSize,node:d});if(p.blockNoteType==="numberedListItem"){if(!p.isBlockContainer)throw new Error("impossible");const g=p.blockContent.node.attrs.index;l=(parseInt(g)+1).toString()}}const u=c.blockContent.node,h=u.attrs.index,f=((a=d==null?void 0:d.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(h!==l||u.attrs.start&&!f){o=!0;const{start:p,...g}=u.attrs;r.setNodeMarkup(c.blockContent.beforePos,void 0,{...g,index:l,...typeof p=="number"&&f&&{start:p}})}}}),o?r:null}}),T_={...Ye,start:{default:void 0,type:"number"}},Vz=_n({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...Dc(T_),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new $o({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:n,match:r})=>{const o=Re(t);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem")return;const s=parseInt(r[1]);e().command(dt(o.bnBlock.beforePos,{type:"numberedListItem",props:s===1&&{}||{start:s}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>P0(this.options.editor),"Mod-Shift-7":()=>{const t=Re(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(dt(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[Bz()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return t.previousSibling||r===1?{}:{start:r}}return!1},getContent:(t,e)=>_0(t,e,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return vr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),$z=ao(Vz,T_),Hz={...Ye},Fz=_n({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=Re(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(dt(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,n;return vr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),zz=ao(Fz,Hz),Uz={...Ye},Wz=_n({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new $o({find:new RegExp("^>\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Re(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(dt(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const t=Re(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(dt(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML({HTMLAttributes:t}){var e,n;return vr(this.name,"blockquote",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),Gz=ao(Wz,Uz),qz=35,R0=120,Kz=31,Zz=Pe.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[aV({cellMinWidth:qz,defaultCellMinWidth:R0,View:null}),yV()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>Rx(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>Rx(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:me(F(t,"tableRole",e))}}}),Jz={textColor:Ye.textColor},Yz=_n({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){var e,n;return vr(this.name,"table",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends PM{constructor(s,i,a){super(s,i),this.node=s,this.cellMinWidth=i,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=Ne("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[h,f]of Object.entries(a))h!=="class"&&l.setAttribute(h,f);const c=this.dom,d=document.createElement("div");d.className="tableWrapper-inner",d.appendChild(c.firstChild),c.appendChild(d),l.appendChild(c);const u=document.createElement("div");u.className="table-widgets-container",u.style.position="relative",c.appendChild(u),this.dom=l}ignoreMutation(s){return!s.target.closest(".tableWrapper-inner")||super.ignoreMutation(s)}}return new r(t,R0,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),Xz=_n({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),Qz=Er.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",an(this.options.HTMLAttributes,t),0]}});function Ok(t,e){const n=qr.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),_.fromArray(r)}const eU=ao(Yz,Jz,[Zz,Xz,x8.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(t,e)=>Ok(t,e)}]}}),w8.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(t,e)=>Ok(t,e)}]}}),Qz]),Lk=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},tU='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',nU={textAlignment:Ye.textAlignment,backgroundColor:Ye.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},E_={type:"video",propSchema:nU,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},rU=(t,e)=>{const n=document.createElement("div");n.innerHTML=tU;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,r.appendChild(o),w_(t,e,{dom:r},r,e.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},M_=t=>{if(t.tagName==="VIDEO")return t.closest("figure")?void 0:Lk(t);if(t.tagName==="FIGURE"){const e=xf(t,"video");if(!e)return;const{targetElement:n,caption:r}=e;return{...Lk(n),caption:r}}},oU=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?A0(e,t.props.caption):kf(e,t.props.caption):{dom:e}},sU=Oc(E_,{render:rU,parse:M_,toExternalHTML:oU}),I0={paragraph:zz,heading:Ez,quote:Gz,codeBlock:gz,bulletListItem:Dz,numberedListItem:$z,checkListItem:Lz,table:eU,file:Sz,image:Rz,video:sU,audio:fz},iU=XA(I0),N0={bold:xs(a8,"boolean"),italic:xs(m8,"boolean"),underline:xs(v8,"boolean"),strike:xs(b8,"boolean"),code:xs(d8,"boolean"),textColor:wz,backgroundColor:bz};o_(N0);const A_={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},aU=r_(A_);function Ht(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===iU[t]}function lU(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===aU[t]}function cU(t,e,n){return e.type===t&&e.type in n.schema.blockSchema&&Ht(e.type,n)}function Bc(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function dU(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function Vc(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function Ei(t,e,n){return e in n.schema.blockSchema&&t in n.schema.blockSchema[e].propSchema&&n.schema.blockSchema[e].propSchema[t]===Ye[t]}function ay(t,e,n){return Ei(t,e.type,n)}function ly(t){return t instanceof Ee}function uU(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function $t(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&Xs(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),uU(t),r}function hU(t){const e=[];return Ht("heading",t)&&e.push({onItemClick:()=>{$t(t,{type:"heading",props:{level:1}})},badge:yn("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{$t(t,{type:"heading",props:{level:2}})},badge:yn("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{$t(t,{type:"heading",props:{level:3}})},badge:yn("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),Ht("quote",t)&&e.push({onItemClick:()=>{$t(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),Ht("numberedListItem",t)&&e.push({onItemClick:()=>{$t(t,{type:"numberedListItem"})},badge:yn("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),Ht("bulletListItem",t)&&e.push({onItemClick:()=>{$t(t,{type:"bulletListItem"})},badge:yn("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),Ht("checkListItem",t)&&e.push({onItemClick:()=>{$t(t,{type:"checkListItem"})},badge:yn("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),Ht("paragraph",t)&&e.push({onItemClick:()=>{$t(t,{type:"paragraph"})},badge:yn("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),Ht("codeBlock",t)&&e.push({onItemClick:()=>{$t(t,{type:"codeBlock"})},badge:yn("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),Ht("table",t)&&e.push({onItemClick:()=>{$t(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),Ht("image",t)&&e.push({onItemClick:()=>{const n=$t(t,{type:"image"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"image",...t.dictionary.slash_menu.image}),Ht("video",t)&&e.push({onItemClick:()=>{const n=$t(t,{type:"video"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"video",...t.dictionary.slash_menu.video}),Ht("audio",t)&&e.push({onItemClick:()=>{const n=$t(t,{type:"audio"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"audio",...t.dictionary.slash_menu.audio}),Ht("file",t)&&e.push({onItemClick:()=>{const n=$t(t,{type:"file"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"file",...t.dictionary.slash_menu.file}),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function fU(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(e.toLowerCase())).length!==0)}function om(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let D0=class __{constructor(e){A(this,"blockSpecs"),A(this,"inlineContentSpecs"),A(this,"styleSpecs"),A(this,"blockSchema"),A(this,"inlineContentSchema"),A(this,"styleSchema"),A(this,"BlockNoteEditor","only for types"),A(this,"Block","only for types"),A(this,"PartialBlock","only for types"),this.blockSpecs=om(e==null?void 0:e.blockSpecs)||I0,this.inlineContentSpecs=om(e==null?void 0:e.inlineContentSpecs)||A_,this.styleSpecs=om(e==null?void 0:e.styleSpecs)||N0,this.blockSchema=XA(this.blockSpecs),this.inlineContentSchema=r_(this.inlineContentSpecs),this.styleSchema=o_(this.styleSpecs)}static create(e){return new __(e)}};const pU={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},mU=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},gU=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},yU=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},bU=Oc(pU,{render:mU,parse:gU,toExternalHTML:yU});D0.create({blockSpecs:{pageBreak:bU}});function vU(t){return t.transact(e=>{const n=to(e.doc,e.selection.anchor);if(e.selection instanceof Ee)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof z)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=to(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function wU(t,e){var n,r;const o=(n=cn(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let s;if(e.type==="cell")s=Ee.create(t.doc,o+e.anchorCellOffset,o+e.headCellOffset);else if(e.type==="node")s=z.create(t.doc,o+1);else{const i=(r=cn(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(i===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);s=H.create(t.doc,o+e.anchorOffset,i+e.headOffset)}t.setSelection(s)}function cy(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>cy(n.children)).flat():{...e,children:cy(e.children)}).flat()}function P_(t,e,n){t.transact(r=>{var o;const s=((o=t.getSelection())==null?void 0:o.blocks)||[t.getTextCursorPosition().block],i=vU(t);t.removeBlocks(s),t.insertBlocks(cy(s),e,n),wU(r,i)})}function R_(t){return!t||t.type!=="columnList"}function I_(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[e.children.length-1],o="after"):(r=e,o="before"):n&&(r=n,o="before"),!r||!o)return;const s=t.getParentBlock(r);return R_(s)?{referenceBlock:r,placement:o}:I_(t,o==="after"?r:t.getPrevBlock(r),s)}function N_(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[0],o="before"):(r=e,o="after"):n&&(r=n,o="after"),!r||!o)return;const s=t.getParentBlock(r);return R_(s)?{referenceBlock:r,placement:o}:N_(t,o==="before"?r:t.getNextBlock(r),s)}function xU(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[0])||t.getTextCursorPosition().block,r=I_(t,t.getPrevBlock(n),t.getParentBlock(n));r&&P_(t,r.referenceBlock,r.placement)})}function kU(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[(e==null?void 0:e.blocks.length)-1])||t.getTextCursorPosition().block,r=N_(t,t.getNextBlock(n),t.getParentBlock(n));r&&P_(t,r.referenceBlock,r.placement)})}function CU(t,e){return function(n,r){const{$from:o,$to:s}=n.selection,i=o.blockRange(s,c=>c.childCount>0&&(c.type.name==="blockGroup"||c.type.name==="column"));if(!i)return!1;const a=i.startIndex;if(a===0)return!1;const l=i.parent.child(a-1);if(l.type!==t)return!1;if(r){const c=l.lastChild&&l.lastChild.type===e,d=_.from(c?t.create():null),u=new D(_.from(t.create(null,_.from(e.create(null,d)))),c?3:1,0),h=i.start,f=i.end;r(n.tr.step(new Ke(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}function D_(t){return t.exec((e,n)=>CU(e.schema.nodes.blockContainer,e.schema.nodes.blockGroup)(e,n))}function SU(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function TU(t){return t.transact(e=>{const{bnBlock:n}=yf(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function EU(t){return t.transact(e=>{const{bnBlock:n}=yf(e);return e.doc.resolve(n.beforePos).depth>1})}function MU(t,e){const n=typeof e=="string"?e:e.id,r=rt(t),o=cn(n,t);if(o)return Le(o.node,r)}function AU(t,e){const n=typeof e=="string"?e:e.id,r=cn(n,t),o=rt(t);if(!r)return;const s=t.resolve(r.posBeforeNode).nodeBefore;if(s)return Le(s,o)}function _U(t,e){const n=typeof e=="string"?e:e.id,r=cn(n,t),o=rt(t);if(!r)return;const s=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(s)return Le(s,o)}function PU(t,e){const n=typeof e=="string"?e:e.id,r=rt(t),o=cn(n,t);if(!o)return;const s=t.resolve(o.posBeforeNode),i=s.node(),a=s.node(-1),l=a.type.name!=="doc"?i.type.name==="blockGroup"?a:i:void 0;if(l)return Le(l,r)}function RU(t,e,n,r={updateSelection:!0}){let{from:o,to:s}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},i=!0,a=!0,l="";if(n.forEach(c=>{c.check(),i&&c.isText&&c.marks.length===0?l+=c.text:i=!1,a=a?c.isBlock:!1}),o===s&&a){const{parent:c}=t.doc.resolve(o);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(o-=1,s+=1)}return i?t.insertText(l,o,s):t.replaceWith(o,s,n),r.updateSelection&&cM(t,t.steps.length-1,-1),!0}function IU(t){const e=rt(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(to(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(to(t.doc,t.selection.to).posBeforeNode),o=(c,d)=>{const u=n.posAtIndex(c,d),h=t.doc.resolve(u).nodeAfter;if(!h)throw new Error(`Error getting selection - node not found at position ${u}`);return Le(h,e)},s=[],i=n.sharedDepth(r.pos),a=n.index(i),l=r.index(i);if(n.depth>i){s.push(Le(n.nodeAfter,e));for(let c=n.depth;c>i;c--)if(n.node(c).type.isInGroup("childContainer")){const d=n.index(c)+1,u=n.node(c).childCount;for(let h=d;h<u;h++)s.push(o(h,c))}}else s.push(o(a,i));for(let c=a+1;c<=l;c++)s.push(o(c,i));if(s.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:s}}function NU(t,e,n){const r=typeof e=="string"?e:e.id,o=typeof n=="string"?n:n.id,s=rt(t),i=jc(s);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=cn(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=cn(o,t.doc);if(!l)throw new Error(`Block with ID ${o} not found`);const c=Go(a),d=Go(l),u=i.blockSchema[c.blockNoteType],h=i.blockSchema[d.blockNoteType];if(!c.isBlockContainer||u.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!d.isBlockContainer||h.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let f,p;if(u.content==="table"){const g=Oe.get(c.blockContent.node);f=c.blockContent.beforePos+g.positionAt(0,0,c.blockContent.node)+1+2}else f=c.blockContent.beforePos+1;if(h.content==="table"){const g=Oe.get(d.blockContent.node),y=d.blockContent.beforePos+g.positionAt(g.height-1,g.width-1,d.blockContent.node)+1,v=t.doc.resolve(y).nodeAfter.nodeSize;p=y+v-2}else p=d.blockContent.afterPos-1;t.setSelection(H.create(t.doc,f,p))}function DU(t){const e=rt(t);let n=t.selection.$from,r=t.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=t.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=t.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=t.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=t.doc.resolve(n.pos+1);const o=FF(t.doc.slice(n.pos,r.pos,!0),e);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function OU(t){const{bnBlock:e}=yf(t),n=rt(t.doc),r=t.doc.resolve(e.beforePos),o=r.nodeBefore,s=t.doc.resolve(e.afterPos).nodeAfter;let i;return r.depth>1&&(i=r.node(),i.type.isInGroup("bnBlock")||(i=r.node(r.depth-1))),{block:Le(e.node,n),prevBlock:o===null?void 0:Le(o,n),nextBlock:s===null?void 0:Le(s,n),parentBlock:i===void 0?void 0:Le(i,n)}}function O_(t,e,n="start"){const r=typeof e=="string"?e:e.id,o=rt(t.doc),s=jc(o),i=cn(r,t.doc);if(!i)throw new Error(`Block with ID ${r} not found`);const a=Go(i),l=s.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const c=a.blockContent;if(l==="none"){t.setSelection(z.create(t.doc,c.beforePos));return}if(l==="inline")n==="start"?t.setSelection(H.create(t.doc,c.beforePos+1)):t.setSelection(H.create(t.doc,c.afterPos-1));else if(l==="table")n==="start"?t.setSelection(H.create(t.doc,c.beforePos+4)):t.setSelection(H.create(t.doc,c.afterPos-4));else throw new br(l)}else{const c=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;O_(t,c.attrs.id,n)}}let Mi;async function O0(){if(Mi)return Mi;const t=await Promise.all([lt(()=>import("./index-rjhLG1eB.js"),__vite__mapDeps([0,1,2,3,4,5])),lt(()=>import("./index-uAn85tBp.js"),__vite__mapDeps([6,4,2,3,7])),lt(()=>import("./index-CWmy4eKR.js"),__vite__mapDeps([8,3,1,2])),lt(()=>import("./index-CfyObm-o.js"),__vite__mapDeps([9,5,4])),lt(()=>import("./index-yU9Yh-H5.js"),__vite__mapDeps([10,11,12,2,3,7])),lt(()=>import("./index-JH4Gotpn.js"),__vite__mapDeps([13,2,3])),lt(()=>import("./index-FrdabaJ1.js"),__vite__mapDeps([14,2,3])),lt(()=>import("./index-BgBG5lba.js"),__vite__mapDeps([15,2,3])),lt(()=>import("./index-BlSIl150.js"),__vite__mapDeps([16,11,2,3])),lt(()=>import("./index-BGm_t98o.js"),__vite__mapDeps([17,12,2,3,7]))]);return Mi={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},Mi}function LU(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const o=e.children[r];if(o.type==="element"&&(t(o),o.tagName==="u"))if(o.children.length>0){e.children.splice(r,1,...o.children);const s=o.children.length-1;n+=s,r+=s}else e.children.splice(r,1),n--,r--}};return t}function jU(){const t=Mi;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const s=n.children[o],i=o+1<n.children.length?n.children[o+1]:void 0;s.type==="element"&&s.tagName==="input"&&((r=s.properties)==null?void 0:r.type)==="checkbox"&&(i==null?void 0:i.type)==="element"&&i.tagName==="p"?(i.tagName="span",i.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(s)}};return e}function L0(t){const e=Mi;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(LU).use(jU).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(t).value}async function BU(t,e,n,r){await O0();const o=wf(e,n).exportBlocks(t,r);return L0(o)}function VU(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function $U(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function HU(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=VU(e),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(s=>{s.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(s=>{if($U(s))return;const i=document.createElement("li");i.append(s),e.insertAdjacentElement("afterend",i)}),r.childNodes.length===0&&r.remove()})}function FU(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const o=e.previousElementSibling,s=document.createElement("div");o.insertAdjacentElement("afterend",s),s.append(o);const i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),s.append(i);((n=s.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=s.nextElementSibling)==null?void 0:r.nodeName)==="OL";)i.append(s.nextElementSibling)})}let jk=null;function zU(){return jk||(jk=document.implementation.createHTMLDocument("title"))}function L_(t){if(typeof t=="string"){const e=zU().createElement("div");e.innerHTML=t,t=e}return HU(t),FU(t),t}async function j_(t,e){const n=L_(t),r=qr.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),o=[];for(let s=0;s<r.childCount;s++)o.push(Le(r.child(s),e));return o}function UU(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}async function B_(t){const e=await O0();return e.unified.unified().use(e.remarkParse.default).use(e.remarkGfm.default).use(e.remarkRehype.default,{handlers:{...e.remarkRehype.defaultHandlers,code:UU}}).use(e.rehypeStringify.default).processSync(t).value}async function WU(t,e){const n=await B_(t);return j_(n,e)}const j0=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function GU(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function qU(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function Bk(t,e,n){let r;return Array.isArray(e.content)&&e.content.length===0?r=t.updateBlock(e,n).id:r=t.insertBlocks([n],e,"after")[0].id,r}async function V_(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let o=null;for(const a of j0)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const s=r.items;if(!s)return;t.preventDefault();const i=Object.values(e.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<s.length;a++){let l="file";for(const d of i)for(const u of d.fileBlockAccept||[]){const h=u.startsWith("."),f=s[a].getAsFile();if(f&&(!h&&f.type&&qU(s[a].type,u)||h&&GU("."+f.name.split(".").pop(),u))){l=d.type;break}}const c=s[a].getAsFile();if(c){const d={type:l,props:{name:c.name}};let u;if(t.type==="paste"){const p=e.getTextCursorPosition().block;u=Bk(e,p,d)}else if(t.type==="drop"){const p={left:t.clientX,top:t.clientY},g=(n=e.prosemirrorView)==null?void 0:n.posAtCoords(p);if(!g)return;u=e.transact(y=>{const v=to(y.doc,g.pos);return Bk(e,e.getBlock(v.node.attrs.id),d)})}else return;const h=await e.uploadFile(c,u),f=typeof h=="string"?{props:{url:h}}:{...h};e.updateBlock(u,f)}}}const KU=t=>Pe.create({name:"dropFile",addProseMirrorPlugins(){return[new ue({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const o of j0)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(V_(n,t),!0):!1}}}})]}}),ZU=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,JU=new RegExp("(?:\\s|^)(_|__|\\*|\\*\\*|~~|==|\\+\\+)(?!\\s).{1,64}(?<!\\s)(?=\\1)"),YU=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,XU=new RegExp("(?:\\s|^)`(?!\\s)[^`]{1,48}(?<!\\s)`([^\\w]|$)"),QU=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,eW=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,tW=/\n{2} {0,3}-{2,48}\n{2}/,nW=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,rW=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,oW=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,sW=/^\s*\|(.+\|)+\s*$/m,iW=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,aW=/^\s*\|(.+\|)+\s*$/m,lW=t=>ZU.test(t)||JU.test(t)||YU.test(t)||XU.test(t)||QU.test(t)||eW.test(t)||tW.test(t)||nW.test(t)||rW.test(t)||oW.test(t)||sW.test(t)||iW.test(t)||aW.test(t);async function cW(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const o=t.clipboardData.getData("vscode-editor-data"),s=o?JSON.parse(o):void 0,i=s==null?void 0:s.mode;return i?(e.pasteHTML(`<pre><code class="language-${i}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function dW({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(e.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(a)return e.pasteText(a),!0}let s;for(const a of j0)if(t.clipboardData.types.includes(a)){s=a;break}if(!s)return!0;if(s==="vscode-editor-data")return cW(t,e.prosemirrorView),!0;if(s==="Files")return V_(t,e),!0;const i=t.clipboardData.getData(s);if(s==="blocknote/html")return e.pasteHTML(i,!0),!0;if(s==="text/markdown")return e.pasteMarkdown(i),!0;if(n){const a=t.clipboardData.getData("text/plain");if(lW(a))return e.pasteMarkdown(a),!0}return s==="text/html"?(e.pasteHTML(i),!0):r?(e.pasteMarkdown(i),!0):(e.pasteText(i),!0)}const uW=(t,e)=>Pe.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new ue({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:s=!0}={})=>dW({event:r,editor:t,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:s})})}}}})]}});function $_(t){const e=[];return t.descendants(n=>{var r,o;const s=rt(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(i=>{e.push(Le(i,s))}),!1):n.type.isInGroup("bnBlock")?(e.push(Le(n,s)),!1):!0}),e}function hW(t,e,n){var r;let o=!1;const s=t.state.selection instanceof Ee;if(!s){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,c=[];for(let d=0;d<l.childCount;d++)c.push(l.child(d));o=c.find(d=>d.type.isInGroup("bnBlock")||d.type.name==="blockGroup"||d.type.spec.group==="blockContent")===void 0,o&&(e=l)}let i;const a=wf(t.state.schema,n);if(s){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=n_(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=bf(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=a.exportInlineContent(l,{})}else{const l=$_(e);i=a.exportBlocks(l,{})}return i}function H_(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(i=>i.setSelection(new z(i.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,o=hW(t,r,e),s=L0(o);return{clipboardHTML:n,externalHTML:o,markdown:s}}const Vk=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},$k=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=H_(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",s)},fW=t=>Pe.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new ue({props:{handleDOMEvents:{copy(e,n){return Vk()||$k(t,e,n),!0},cut(e,n){return Vk()||($k(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(i=>i.setSelection(new z(i.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=H_(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",s),!0}}}})]}}),pW=Pe.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:Ye.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):Ye.backgroundColor.default,renderHTML:t=>t.backgroundColor===Ye.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});let B0=class{constructor(){A(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(o=>o.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}},ft=class extends B0{constructor(...e){super(),A(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}};const F_=class z_ extends ft{constructor(e){super(),A(this,"provider"),A(this,"recentlyUpdatedCursors"),A(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const s=(this.collaboration.renderCursor??z_.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(s.addEventListener("mouseenter",()=>{const i=this.recentlyUpdatedCursors.get(r);i.element.setAttribute("data-active",""),i.hideTimeout&&(clearTimeout(i.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:void 0}))}),s.addEventListener("mouseleave",()=>{const i=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:setTimeout(()=>{i.element.removeAttribute("data-active")},2e3)})})),o={element:s,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),A(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=e,this.provider=e.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",e.user),e.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(SF(this.provider.awareness,{selectionBuilder:ZA,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}};A(F_,"defaultCursorRender",t=>{const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode("â "),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode("â "),null),e});let U_=F_,dy=class extends ft{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(lF(e))}get priority(){return 1001}},uy=class extends ft{static key(){return"yUndoPlugin"}constructor(){super(),this.addProsemirrorPlugin(RF())}get priority(){return 1e3}};const W_=ht.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",an(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});class mW extends B0{constructor(e){super(),A(this,"userCache",new Map),A(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const Td=new xe("blocknote-comments"),gW="SET_SELECTED_THREAD_ID";function yW(t,e){const n=new Map;return t.descendants((r,o)=>{r.marks.forEach(s=>{if(s.type.name===e){const i=s.attrs.threadId;if(!i)return;const a=o,l=a+r.nodeSize,c=n.get(i)??{from:1/0,to:0};n.set(i,{from:Math.min(a,c.from),to:Math.max(l,c.to)})}})}),n}class bW extends ft{constructor(e,n,r){if(super(),A(this,"userStore"),A(this,"pendingComment",!1),A(this,"selectedThreadId"),A(this,"threadPositions",new Map),A(this,"updateMarksFromThreads",s=>{this.editor.transact(i=>{i.doc.descendants((a,l)=>{a.marks.forEach(c=>{if(c.type.name===this.markType){const d=c.type,u=c.attrs.threadId,h=s.get(u),f=!!(!h||h.resolved||h.deletedAt);if(f!==c.attrs.orphan){const p=Math.max(l,0),g=Math.min(l+a.nodeSize,i.doc.content.size-1,i.doc.content.size-1);i.removeMark(p,g,c),i.addMark(p,g,d.create({...c.attrs,orphan:f})),f&&this.selectedThreadId===u&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=n,this.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new mW(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new ue({key:Td,state:{init(){return{decorations:ge.empty}},apply(s,i){const a=s.getMeta(Td);if(!s.docChanged&&!a)return i;const l=s.docChanged?yW(s.doc,o.markType):o.threadPositions;(l.size>0||o.threadPositions.size>0)&&(o.threadPositions=l,o.emitStateUpdate());const c=[];if(o.selectedThreadId){const d=l.get(o.selectedThreadId);d&&c.push(Te.inline(d.from,d.to,{class:"bn-thread-mark-selected"}))}return{decorations:ge.create(s.doc,c)}}},props:{decorations(s){var i;return((i=Td.getState(s))==null?void 0:i.decorations)??ge.empty},handleClick:(s,i,a)=>{if(a.button!==0)return;const l=s.state.doc.nodeAt(i);if(!l){o.selectThread(void 0);return}const c=l.marks.find(u=>u.type.name===r&&u.attrs.orphan!==!0),d=c==null?void 0:c.attrs.threadId;o.selectThread(d,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e,n=!0){var r,o;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(s=>s.setMeta(Td,{name:gW})),e&&n)){const s=this.threadPositions.get(e);if(!s)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(s.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const n=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,s=ke.getState(r.state),i={prosemirror:{head:o.head,anchor:o.anchor},yjs:s?ph(s.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:i})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class vW{constructor(e,n,r,o){A(this,"state"),A(this,"emitUpdate"),A(this,"mouseDownHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"dragstartHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var s;if((s=this.state)!=null&&s.show){const i=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!i)return;this.state.referencePos=i.getBoundingClientRect(),this.emitUpdate()}}),A(this,"closeMenu",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const s=this.pluginKey.getState(e.state),i=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&s!=null&&s.block&&this.editor.isEditable){const c=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${s.block.id}"]`);if(!c)return;this.state={show:!0,referencePos:c.getBoundingClientRect(),block:s.block},this.emitUpdate();return}const a=(s==null?void 0:s.block)&&!(i!=null&&i.block),l=!(s!=null&&s.block)&&(i==null?void 0:i.block);a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const sm=new xe("FilePanelPlugin");class wW extends ft{constructor(e){super(),A(this,"view"),A(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new ue({key:sm,view:n=>(this.view=new vW(e,sm,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(sm)||(!n.getMeta(ke)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}class xW{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"preventHide",!1),A(this,"preventShow",!1),A(this,"shouldShow",({view:o,state:s,from:i,to:a})=>{const{doc:l,selection:c}=s,{empty:d}=c,u=!l.textBetween(i,a).length&&nf(s.selection);if(c.$from.parent.type.spec.code||Eg(c)&&c.node.type.spec.code||d||u)return!1;const h=document.activeElement;return!(!this.isElementWithinEditorWrapper(h)&&o.editable)}),A(this,"blurHandler",o=>{var s;if(this.preventHide){this.preventHide=!1;return}const i=this.pmView.dom.parentElement;o&&o.relatedTarget&&(i===o.relatedTarget||i.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const s=this.pmView.dom.parentElement;return s?s.contains(o):!1}),A(this,"viewMousedownHandler",o=>{this.isElementWithinEditorWrapper(o.target)||(this.preventShow=!0)}),A(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),A(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),A(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o,s;const{state:i,composing:a}=e,{doc:l,selection:c}=i,d=n&&n.doc.eq(l)&&n.selection.eq(c);if(a||d)return;const{ranges:u}=c,h=Math.min(...u.map(y=>y.$from.pos)),f=Math.max(...u.map(y=>y.$to.pos)),p=this.shouldShow({view:e,state:i,from:h,to:f}),g=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(p||this.preventHide)&&!g){const y={show:!0,referencePos:this.getSelectionBoundingBox()};(y.show!==((r=this.state)==null?void 0:r.show)||y.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=y,this.emitUpdate());return}if((s=this.state)!=null&&s.show&&!this.preventHide&&(!p||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:n}=e,{ranges:r}=n,o=Math.min(...r.map(i=>i.$from.pos)),s=Math.max(...r.map(i=>i.$to.pos));if(Eg(n)){const i=this.pmView.nodeDOM(o);if(i)return i.getBoundingClientRect()}return Pu(this.pmView,o,s)}}const kW=new xe("FormattingToolbarPlugin");class CW extends ft{constructor(e){super(),A(this,"view"),A(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new ue({key:kW,view:n=>(this.view=new xW(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}const SW=Er.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",an(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),Hk=(t,e)=>{const n=t.resolve(e);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return Lc(t.resolve(r))},ou=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return Lc(t.resolve(o))},G_=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=Lc(t.resolve(r))}return e},TW=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",EW=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=t.doc.resolve(r.childContainer.beforePos+1),s=t.doc.resolve(r.childContainer.afterPos-1),i=o.blockRange(s);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(i,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},Fk=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),o=Lc(r),s=ou(e.doc,o.bnBlock.beforePos);if(!s)return!1;const i=G_(e.doc,s);return TW(i,o)?EW(e,n,i,o):!1},MW=Pe.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:s})=>{const i=Re(s);if(!i.isBlockContainer)return!1;const a=s.selection.from===i.blockContent.beforePos+1,l=i.blockContent.node.type.name==="paragraph";return a&&!l?o.command(dt(i.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:s})=>{const i=Re(s);if(!i.isBlockContainer)return!1;const{blockContent:a}=i;return s.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const i=Re(s);if(!i.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=i,c=s.selection.from===l.beforePos+1,d=s.selection.empty,u=a.beforePos;return c&&d?r().command(Fk(u)).scrollIntoView().run():!1}),()=>o.command(({state:s,dispatch:i})=>{const a=Re(s);if(!a.isBlockContainer||s.selection.from!==a.blockContent.beforePos+1||ou(s.doc,a.bnBlock.beforePos))return!1;const l=Hk(s.doc,a.bnBlock.beforePos);if((l==null?void 0:l.blockNoteType)!=="column")return!1;const c=l,d=Hk(s.doc,c.bnBlock.beforePos);if((d==null?void 0:d.blockNoteType)!=="columnList")throw new Error("parent of column is not a column list");const u=c.childContainer.node.childCount===1,h=u&&d.childContainer.node.childCount===2,f=d.childContainer.node.firstChild===c.bnBlock.node;if(i){const p=s.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(h)if(f){s.tr.step(new Ke(d.bnBlock.beforePos,d.bnBlock.afterPos,c.bnBlock.afterPos+1,d.bnBlock.afterPos-2,p,p.size,!1));const g=s.tr.doc.resolve(c.bnBlock.beforePos);s.tr.setSelection(H.between(g,g))}else{s.tr.step(new Ke(d.bnBlock.beforePos,d.bnBlock.afterPos,d.bnBlock.beforePos+2,c.bnBlock.beforePos-1,p,0,!1));const g=s.tr.doc.resolve(s.tr.mapping.map(c.bnBlock.beforePos-1));s.tr.setSelection(H.between(g,g))}else if(u)if(f){s.tr.delete(c.bnBlock.beforePos,c.bnBlock.afterPos),s.tr.insert(d.bnBlock.beforePos,p.content);const g=s.tr.doc.resolve(d.bnBlock.beforePos);s.tr.setSelection(H.between(g,g))}else s.tr.delete(c.bnBlock.beforePos-1,c.bnBlock.beforePos+1);else{s.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),f?s.tr.insert(d.bnBlock.beforePos-1,p.content):s.tr.insert(c.bnBlock.beforePos-1,p.content);const g=s.tr.doc.resolve(c.bnBlock.beforePos-1);s.tr.setSelection(H.between(g,g))}}return!0}),()=>o.command(({state:s})=>{const i=Re(s);if(!i.isBlockContainer)return!1;if(i.blockContent.node.childCount===0&&i.blockContent.node.type.spec.content==="inline*"){const a=ou(s.doc,i.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const c=i.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(c)}else if(a.blockContent.node.type.spec.content===""){const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(c)}else{const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(c)}return l.deleteRange({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:s})=>{const i=Re(s);if(!i.isBlockContainer)throw new Error("todo");const a=s.selection.from===i.blockContent.beforePos+1,l=s.selection.empty,c=ou(s.doc,i.bnBlock.beforePos);if(c&&a&&l){const d=G_(s.doc,c);if(!d.isBlockContainer)throw new Error("todo");if(d.blockContent.node.type.spec.content===""||d.blockContent.node.type.spec.content==="inline*"&&d.blockContent.node.childCount===0)return r().cut({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos},d.bnBlock.afterPos).deleteRange({from:d.bnBlock.beforePos,to:d.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const s=Re(o);if(!s.isBlockContainer)return!1;const{bnBlock:i,blockContent:a,childContainer:l}=s,{depth:c}=o.doc.resolve(i.beforePos),d=i.afterPos===o.doc.nodeSize-3,u=o.selection.from===a.afterPos-1,h=o.selection.empty;if(!d&&u&&h&&l===void 0){let f=c,p=i.afterPos+1,g=o.doc.resolve(p).depth;for(;g<f;)f=g,p+=2,g=o.doc.resolve(p).depth;return r.command(Fk(p-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o})=>[()=>o.command(({state:s})=>{const i=Re(s);if(!i.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=i,{depth:c}=s.doc.resolve(a.beforePos),d=s.selection.$anchor.parentOffset===0,u=s.selection.anchor===s.selection.head,h=l.node.childCount===0,f=c>1;return d&&u&&h&&f?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const i=Re(s),a=this.options.editor.schema.blockSchema[i.blockNoteType].hardBreakShortcut??"shift+enter";return a==="none"?!1:a==="shift+enter"&&r||a==="enter"?o.insertContent({type:"hardBreak"}):!1}),()=>o.command(({state:s,dispatch:i})=>{const a=Re(s);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=a,d=s.selection.$anchor.parentOffset===0,u=s.selection.anchor===s.selection.head,h=c.node.childCount===0;if(d&&u&&h){const f=l.afterPos,p=f+2;if(i){const g=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(f,g).scrollIntoView(),s.tr.setSelection(new H(s.doc.resolve(p)))}return!0}return!1}),()=>o.command(({state:s,chain:i})=>{const a=Re(s);if(!a.isBlockContainer)return!1;const{blockContent:l}=a,c=s.selection.$anchor.parentOffset===0;return l.node.childCount===0?!1:(i().deleteSelection().command(C_(s.selection.from,c,c)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(s=this.options.editor.filePanel)!=null&&s.shown)?!1:D_(this.options.editor)},"Shift-Tab":()=>{var r,o,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(s=this.options.editor.filePanel)!=null&&s.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class AW{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"menuUpdateTimer"),A(this,"startMenuUpdateTimer"),A(this,"stopMenuUpdateTimer"),A(this,"mouseHoveredLinkMark"),A(this,"mouseHoveredLinkMarkRange"),A(this,"keyboardHoveredLinkMark"),A(this,"keyboardHoveredLinkMarkRange"),A(this,"linkMark"),A(this,"linkMarkRange"),A(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const s=o.target,i=this.pmView.posAtDOM(s,0)+1,a=this.pmView.state.doc.resolve(i),l=a.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=c,this.mouseHoveredLinkMarkRange=$l(a,c.type,c.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),A(this,"clickHandler",o=>{var s;const i=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(i===o.target||i.contains(o.target))&&(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=Pu(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),A(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,n){var r;this.editor.transact(o=>{const s=rt(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,s.mark("link",{href:e}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,n,r=!1){var o;const{state:s}=e;if(n&&n.selection.from===s.selection.from&&n.selection.to===s.selection.to||!this.pmView.hasFocus())return;const i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const l of a)if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=$l(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:Pu(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&i&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const _W=new xe("LinkToolbarPlugin");class PW extends ft{constructor(e){super(),A(this,"view"),A(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),A(this,"deleteLink",()=>{this.view.deleteLink()}),A(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),A(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),A(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new ue({key:_W,view:n=>(this.view=new AW(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const q_=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],K_="https",RW=new xe("node-selection-keyboard");class IW extends ft{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new ue({key:RW,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=e.state.tr;return e.dispatch(r.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new H(r.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const NW=new xe("blocknote-placeholder");class DW extends ft{static key(){return"placeholder"}constructor(e,n){super(),this.addProsemirrorPlugin(new ue({key:NW,view:r=>{var o,s;const i=`placeholder-selector-${xM()}`;r.dom.classList.add(i);const a=document.createElement("style"),l=e._tiptapEditor.options.injectNonce;l&&a.setAttribute("nonce",l),((o=e.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):(s=e.prosemirrorView)==null||s.root.head.appendChild(a);const c=a.sheet,d=(u="")=>`.${i} .bn-block-content${u} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:u,emptyDocument:h,...f}=n;for(const[y,v]of Object.entries(f)){const x=`[data-content-type="${y}"]`;c.insertRule(`${d(x)} { content: ${JSON.stringify(v)}; }`)}c.insertRule(`${d("[data-is-only-empty-block]")} { content: ${JSON.stringify(h)}; }`),c.insertRule(`${d("[data-is-empty-and-focused]")} { content: ${JSON.stringify(u)}; }`)}catch(u){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",u)}return{destroy:()=>{var u,h;((u=e.prosemirrorView)==null?void 0:u.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):(h=e.prosemirrorView)==null||h.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:s}=r;if(!e.isEditable||!s.empty||s.$from.parent.type.spec.code)return;const i=[];r.doc.content.size===6&&i.push(Te.node(2,4,{"data-is-only-empty-block":"true"}));const a=s.$anchor,l=a.parent;if(l.content.size===0){const c=a.before();i.push(Te.node(c,c+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return ge.create(o,i)}}}))}}const zk=new xe("previous-blocks"),OW={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class LW extends ft{static key(){return"previousBlockType"}constructor(){super();let e;this.addProsemirrorPlugin(new ue({key:zk,view(n){return{update:async(r,o)=>{var s;((s=this.key)==null?void 0:s.getState(r.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(zk,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,s){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(s.doc))return r;const i={},a=Tx(o.doc,d=>d.attrs.id),l=new Map(a.map(d=>[d.node.attrs.id,d])),c=Tx(s.doc,d=>d.attrs.id);for(const d of c){const u=l.get(d.node.attrs.id),h=u==null?void 0:u.node.firstChild,f=d.node.firstChild;if(u&&h&&f){const p={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:s.doc.resolve(d.pos).depth};let g={index:h.attrs.index,level:h.attrs.level,type:h.type.name,depth:o.doc.resolve(u.pos).depth};i[d.node.attrs.id]=g,n.getMeta("numberedListIndexing")&&(d.node.attrs.id in r.prevTransactionOldBlockAttrs&&(g=r.prevTransactionOldBlockAttrs[d.node.attrs.id]),p.type==="numberedListItem"&&(g.index=p.index)),r.currentTransactionOldBlockAttrs[d.node.attrs.id]=g,JSON.stringify(g)!==JSON.stringify(p)&&(g["depth-change"]=g.depth-p.depth,r.updatedBlocks.add(d.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=i,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((s,i)=>{if(!s.attrs.id||!r.updatedBlocks.has(s.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[s.attrs.id],l={};for(const[d,u]of Object.entries(a))l["data-prev-"+OW[d]]=u||"none";const c=Te.node(i,i+s.nodeSize,{...l});o.push(c)}),ge.create(n.doc,o)}}}))}}const Uk=new xe("blocknote-show-selection");class jW extends ft{constructor(e){super(),A(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new ue({key:Uk,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return ge.empty;const s=Te.inline(o.from,o.to,{"data-show-selection":"true"});return ge.create(r,[s])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(n=>n.setMeta(Uk,{})))}getEnabled(){return this.enabled}}function Z_(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}class Bs extends Z{constructor(e,n){super(e,n),A(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(o,s,i)=>{if(i!==null&&i.eq(r))return this.nodes.push(o),!1})}static create(e,n,r=n){return new Bs(e.resolve(n),e.resolve(r))}content(){return new D(_.from(this.nodes),0,0)}eq(e){if(!(e instanceof Bs)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?Z.near(e.resolve(r.pos)):r.deleted?Z.near(e.resolve(o.pos)):new Bs(e.resolve(r.pos),e.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}Z.jsonID("multiple-node",Bs);let On;function BW(t,e){let n,r;const o=e.resolve(t.from).node().type.spec.group==="blockContent",s=e.resolve(t.to).node().type.spec.group==="blockContent",i=Math.min(t.$anchor.depth,t.$head.depth);if(o&&s){const a=t.$from.start(i-1),l=t.$to.end(i-1);n=e.resolve(a-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function Wk(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),o=t.domAtPos(e).node,s=(d,u)=>Array.prototype.indexOf.call(d.children,u),i=s(o,t.domAtPos(e+1).node.parentElement),a=s(o,t.domAtPos(n-1).node.parentElement);for(let d=o.childElementCount-1;d>=0;d--)(d>a||d<i)&&r.removeChild(r.children[d]);J_(t.root),On=r;const l=On.getElementsByTagName("iframe");for(let d=0;d<l.length;d++){const u=l[d],h=u.parentElement;h&&h.removeChild(u)}const c=t.dom.className.split(" ").filter(d=>d!=="ProseMirror"&&d!=="bn-root"&&d!=="bn-editor").join(" ");On.className=On.className+" bn-drag-preview "+c,t.root instanceof ShadowRoot?t.root.appendChild(On):t.root.body.appendChild(On)}function J_(t){On!==void 0&&(t instanceof ShadowRoot?t.removeChild(On):t.body.removeChild(On),On=void 0)}function VW(t,e,n){if(!t.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=cn(e.id,r.state.doc);if(!o)throw new Error(`Block with ID ${e.id} not found`);const s=o.posBeforeNode;if(s!=null){const i=r.state.selection,a=r.state.doc,{from:l,to:c}=BW(i,a),d=l<=s&&s<c,u=i.$anchor.node()!==i.$head.node()||i instanceof Bs;d&&u?(r.dispatch(r.state.tr.setSelection(Bs.create(a,l,c))),Wk(r,l,c)):(r.dispatch(r.state.tr.setSelection(z.create(r.state.doc,s))),Wk(r,s));const h=r.state.selection.content(),f=n.pmSchema,p=r.serializeForClipboard(h).dom.innerHTML,g=wf(f,n),y=$_(h.content),v=g.exportBlocks(y,{}),x=L0(v);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",p),t.dataTransfer.setData("text/html",v),t.dataTransfer.setData("text/plain",x),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(On,0,0)}}const Va=.1;function hy(t,e,n,r=!0){const o=t.root.elementsFromPoint(e.left+(n==="editor"?50:0),e.top);for(const s of o)if(t.dom.contains(s))return r&&s.closest("[data-node-type=columnList]")?hy(t,{left:e.left+50,top:e.top},n,!1):Z_(s,t)}function $W(t,e,n){if(!e.dom.firstChild)return;const r=e.dom.firstChild.getBoundingClientRect(),o={left:t.x,top:t.y},s=o.left<r.left,i=o.left>r.right;n==="viewport"&&(s&&(o.left=r.left+10),i&&(o.left=r.right-10));let a=hy(e,o,n);if(!i&&a){const l=a.node.getBoundingClientRect();o.left=l.right-10,a=hy(e,o,"viewport",!1)}return a}class HW{constructor(e,n,r,o){A(this,"state"),A(this,"emitUpdate"),A(this,"mousePos"),A(this,"hoveredBlock"),A(this,"menuFrozen",!1),A(this,"isDragOrigin",!1),A(this,"updateState",s=>{this.state=s,this.emitUpdate(this.state)}),A(this,"updateStateFromMousePos",()=>{var s,i,a,l;if(this.menuFrozen||!this.mousePos)return;const c=$W(this.mousePos,this.pmView,this.sideMenuDetection);if(!c||!this.editor.isEditable){(s=this.state)!=null&&s.show&&(this.state.show=!1,this.updateState(this.state));return}if((i=this.state)!=null&&i.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===c.id)return;this.hoveredBlock=c.node;const d=c.node.firstChild;if(d&&this.editor.isEditable){const u=d.getBoundingClientRect(),h=c.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(h?h.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,u.y,u.width,u.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),A(this,"onDrop",s=>{var i,a;if(this.pmView.dragging===null)return;this.editor._tiptapEditor.commands.blur();const l=s.target instanceof Node&&((i=s.target instanceof HTMLElement?s.target:s.target.parentElement)==null?void 0:i.closest(".bn-editor"))||null;if(l&&(!this.isDragOrigin&&this.pmView.dom===l?this.pmView.dispatch(this.pmView.state.tr.setSelection(H.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.to))):this.isDragOrigin&&this.pmView.dom!==l&&setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0)),this.sideMenuDetection==="editor"||s.synthetic||!((a=s.dataTransfer)!=null&&a.types.includes("blocknote/html")))return;const c=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!c||c.inside===-1){const d=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(d)}}),A(this,"onDragEnd",()=>{this.pmView.dragging=null}),A(this,"onDragStart",s=>{var i;const a=(i=s.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!a)return;if(this.pmView.dragging)throw new Error("New drag was started while an existing drag is ongoing");const l=document.createElement("div");l.innerHTML=a;const c=qr.fromSchema(this.pmView.state.schema).parse(l,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new D(c.content,0,0),move:!0}}),A(this,"onDragOver",s=>{var i;if(this.sideMenuDetection==="editor"||s.synthetic||!((i=s.dataTransfer)!=null&&i.types.includes("blocknote/html")))return;const a=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!a||a.inside===-1&&this.pmView.dom.firstChild){const l=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(l)}}),A(this,"onKeyDown",s=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),A(this,"onMouseMove",s=>{var i;if(this.menuFrozen)return;this.mousePos={x:s.clientX,y:s.clientY};const a=this.pmView.dom.getBoundingClientRect(),l=this.mousePos.x>a.left&&this.mousePos.x<a.right&&this.mousePos.y>a.top&&this.mousePos.y<a.bottom,c=this.pmView.dom.parentElement;if(l&&s&&s.target&&!(c===s.target||c.contains(s.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),A(this,"onScroll",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state))}),this.editor=e,this.sideMenuDetection=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");o(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),O0(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}createSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();return n.clientX=e.clientX,n.clientY=e.clientY,e.clientX<r.left&&e.clientX>r.left-r.width*Va?n.clientX=r.left+r.width*Va/2:e.clientX>r.right&&e.clientX<r.right+r.width*Va?n.clientX=r.right-r.width*Va/2:(e.clientX<r.left||e.clientX>r.right)&&(n.clientX=r.left+Va*r.width*2),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,n}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const FW=new xe("SideMenuPlugin");class zW extends ft{constructor(e,n){super(),A(this,"view"),A(this,"blockDragStart",(r,o)=>{this.view&&(this.view.isDragOrigin=!0),VW(r,o,this.editor)}),A(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&J_(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),A(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),A(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new ue({key:FW,view:r=>(this.view=new HW(e,n,r,o=>{this.emit("update",o)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const Ed=new Map;function UW(t){if(Ed.has(t))return Ed.get(t);const e=new Gi;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{Ed.delete(t)}),Ed.set(t,e),e}function WW(t,e,n="left"){const r=ke.getState(t._tiptapEditor.state);if(!r){const s=UW(t),i=s.maps.length;return()=>s.slice(i).map(e,n==="left"?-1:1)}const o=tc(e+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const s=ke.getState(t._tiptapEditor.state),i=js(s.doc,s.binding.type,o,s.binding.mapping);if(i===null)throw new Error("Position not found, cannot track positions");return i+(n==="right"?-1:0)}}const GW=sf(t=>t.type.name==="blockContainer");class qW{constructor(e,n){A(this,"state"),A(this,"emitUpdate"),A(this,"rootEl"),A(this,"pluginState"),A(this,"handleScroll",()=>{var s,i;if((s=this.state)!=null&&s.show){const a=(i=this.rootEl)==null?void 0:i.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),A(this,"closeMenu",()=>{this.editor.transact(s=>s.setMeta(Fi,null))}),A(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(s=>s.selection.from)}).run()});var r,o;this.editor=e,this.pluginState=void 0,this.emitUpdate=s=>{var i;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(s,{...this.state,ignoreQueryLength:(i=this.pluginState)==null?void 0:i.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const o=Fi.getState(n),s=Fi.getState(e.state),i=o===void 0&&s!==void 0,a=o!==void 0&&s===void 0;if(!i&&!(o!==void 0&&s!==void 0)&&!a)return;if(this.pluginState=a?o:s,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const Fi=new xe("SuggestionMenuPlugin");class KW extends ft{constructor(e){super(),A(this,"view"),A(this,"triggerCharacters",[]),A(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),A(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),A(this,"closeMenu",()=>this.view.closeMenu()),A(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new ue({key:Fi,view:()=>(this.view=new qW(e,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,s,i)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(Fi);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const c=WW(e,i.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>c()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a==null?void 0:a.ignoreQueryLength}}if(o===void 0)return o;if(i.selection.from!==i.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&i.selection.from<o.queryStartPos()||!i.selection.$from.sameParent(i.doc.resolve(o.queryStartPos())))return;const l={...o};return l.query=i.doc.textBetween(o.queryStartPos(),i.selection.from),l}},props:{handleTextInput(r,o,s,i){return n.includes(i)?(r.dispatch(r.state.tr.insertText(i)),r.dispatch(r.state.tr.setMeta(Fi,{triggerCharacter:i}).scrollIntoView()),!0):!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const s=GW(r.selection);if(s)return ge.create(r.doc,[Te.node(s.pos,s.pos+s.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return ge.create(r.doc,[Te.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,n){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,n)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const ZW=ht.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),JW=ht.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),YW=ht.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}});let Ft;function Gk(t){Ft||(Ft=document.createElement("div"),Ft.innerHTML="_",Ft.style.opacity="0",Ft.style.height="1px",Ft.style.width="1px",t instanceof Document?t.body.appendChild(Ft):t.appendChild(Ft))}function XW(t){Ft&&(t instanceof Document?t.body.removeChild(Ft):t.removeChild(Ft),Ft=void 0)}function Md(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function QW(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function eG(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class tG{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"tableId"),A(this,"tablePos"),A(this,"tableElement"),A(this,"menuFrozen",!1),A(this,"mouseState","up"),A(this,"prevWasEditable",null),A(this,"viewMousedownHandler",()=>{this.mouseState="down"}),A(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),A(this,"mouseMoveHandler",o=>{var s,i,a,l,c,d,u;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const h=QW(o.target);if((h==null?void 0:h.type)==="cell"&&this.mouseState==="down"&&!((s=this.state)!=null&&s.draggingState)){this.mouseState="selecting",(i=this.state)!=null&&i.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!h||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!h.tbodyNode)return;const f=h.tbodyNode.getBoundingClientRect(),p=Z_(h.domNode,this.pmView);if(!p)return;this.tableElement=p.node;let g;const y=this.editor.transact(w=>cn(p.id,w.doc));if(!y)throw new Error(`Block with ID ${p.id} not found`);const v=Le(y.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(cU("table",v,this.editor)&&(this.tablePos=y.posBeforeNode+1,g=v),!g)return;this.tableId=p.id;const x=(l=h.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if((h==null?void 0:h.type)==="wrapper"){const w=o.clientY>=f.bottom-1&&o.clientY<f.bottom+20,C=o.clientX>=f.right-1&&o.clientX<f.right+20,k=o.clientX>f.right||o.clientY>f.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:w,showAddOrRemoveColumnsButton:C,referencePosTable:f,block:g,widgetContainer:x,colIndex:k||(c=this.state)==null?void 0:c.colIndex,rowIndex:k||(d=this.state)==null?void 0:d.rowIndex,referencePosCell:k||(u=this.state)==null?void 0:u.referencePosCell}}else{const w=Md(h.domNode),C=Md(h.domNode.parentElement),k=h.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===p.id&&this.state.rowIndex===C&&this.state.colIndex===w)return;this.state={show:!0,showAddOrRemoveColumnsButton:w===g.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:C===g.content.rows.length-1,referencePosTable:f,block:g,draggingState:void 0,referencePosCell:k,colIndex:w,rowIndex:C,widgetContainer:x}}return this.emitUpdate(),!1}),A(this,"dragOverHandler",o=>{var s;if(((s=this.state)==null?void 0:s.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",eG(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const i={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(i.left,i.top).filter(g=>g.tagName==="TD"||g.tagName==="TH");if(a.length===0)return;const l=a[0];let c=!1;const d=Md(l.parentElement),u=Md(l),h=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,f=(this.state.draggingState.draggedCellOrientation==="row"?d:u)!==h;(this.state.rowIndex!==d||this.state.colIndex!==u)&&(this.state.rowIndex=d,this.state.colIndex=u,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const p=this.state.draggingState.draggedCellOrientation==="row"?i.top:i.left;this.state.draggingState.mousePos!==p&&(this.state.draggingState.mousePos=p,c=!0),c&&this.emitUpdate(),f&&this.editor.transact(g=>g.setMeta(rl,!0))}),A(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:s,colIndex:i,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(s.draggedCellOrientation==="row"){if(!i_(this.state.block,s.originalIndex,a))return!1;const c=WF(this.state.block,s.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:c}})}else{if(!a_(this.state.block,s.originalIndex,i))return!1;const c=UF(this.state.block,s.originalIndex,i),[d]=l.splice(s.originalIndex,1);l.splice(i,0,d),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:c}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=E0(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const s=o.children[this.state.rowIndex].children[this.state.colIndex];s?this.state.referencePosCell=s.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const rl=new xe("TableHandlesPlugin");class nG extends ft{constructor(e){super(),A(this,"view"),A(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(rl,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");Gk(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Ft,0,0),n.dataTransfer.effectAllowed="move"}),A(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(rl,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");Gk(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Ft,0,0),n.dataTransfer.effectAllowed="copyMove"}),A(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(rl,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");XW(this.editor.prosemirrorView.root)}),A(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),A(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),A(this,"getCellsAtRowHandle",(n,r)=>ny(n,r)),A(this,"getCellsAtColumnHandle",(n,r)=>ry(n,r)),A(this,"setCellSelection",(n,r,o=r)=>{const s=this.view;if(!s)throw new Error("Table handles view not initialized");const i=n.doc.resolve(s.tablePos+1),a=n.doc.resolve(i.posAtIndex(r.row)+1),l=n.doc.resolve(a.posAtIndex(r.col)),c=n.doc.resolve(i.posAtIndex(o.row)+1),d=n.doc.resolve(c.posAtIndex(o.col)),u=n.tr;return u.setSelection(new Ee(l,d)),n.apply(u)}),A(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,s)=>{const i=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?z8(i,s):U8(i,s):r.side==="left"?B8(i,s):V8(i,s)})}),A(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,s)=>{const i=this.setCellSelection(o,{row:n,col:0});return G8(i,s)}):this.editor.exec((o,s)=>{const i=this.setCellSelection(o,{row:0,col:n});return H8(i,s)})),A(this,"mergeCells",n=>this.editor.exec((r,o)=>{const s=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return K8(s,o)})),A(this,"splitCell",n=>this.editor.exec((r,o)=>{const s=n?this.setCellSelection(r,n):r;return Z8(s,o)})),A(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,s=r.$to;if(ly(r)){const{ranges:p}=r;p.forEach(g=>{o=g.$from.min(o??g.$from),s=g.$to.max(s??g.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),s=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||s.pos===0)return;const i=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(s.pos-s.parentOffset-1),l=n.doc.resolve(i.pos-i.parentOffset-1),c=o.index(i.depth),d=i.index(l.depth),u=s.index(a.depth),h=a.index(l.depth),f=[];for(let p=d;p<=h;p++)for(let g=c;g<=u;g++)f.push({row:p,col:g});return{from:{row:d,col:c},to:{row:h,col:u},cells:f}})),A(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=ly(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const s=this.getCellSelection();if(s)return KF(s.from,s.to,n)?"vertical":"horizontal"})),A(this,"cropEmptyRowsOrColumns",(n,r)=>GF(n,r)),A(this,"addRowsOrColumns",(n,r,o)=>qF(n,r,o)),this.editor=e,this.addProsemirrorPlugin(new ue({key:rl,view:n=>(this.view=new tG(e,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:s,draggingState:i}=this.view.state,{originalIndex:a,draggedCellOrientation:l}=i;if(r===a||!s||l==="row"&&!i_(s,a,r)||l==="col"&&!a_(s,a,r))return ge.create(n.doc,o);const c=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?ny(this.view.state.block,r).forEach(({row:d,col:u})=>{const h=n.doc.resolve(c.posAtIndex(d)+1),f=n.doc.resolve(h.posAtIndex(u)+1),p=f.node(),g=f.pos+(r>a?p.nodeSize-2:0);o.push(Te.widget(g,()=>{const y=document.createElement("div");return y.className="bn-table-drop-cursor",y.style.left="0",y.style.right="0",r>a?y.style.bottom="-2px":y.style.top="-3px",y.style.height="4px",y}))}):ry(this.view.state.block,r).forEach(({row:d,col:u})=>{const h=n.doc.resolve(c.posAtIndex(d)+1),f=n.doc.resolve(h.posAtIndex(u)+1),p=f.node(),g=f.pos+(r>a?p.nodeSize-2:0);o.push(Te.widget(g,()=>{const y=document.createElement("div");return y.className="bn-table-drop-cursor",y.style.top="0",y.style.bottom="0",r>a?y.style.right="-2px":y.style.left="-3px",y.style.width="4px",y}))}),ge.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const rG=Pe.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),oG=Pe.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:Ye.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):Ye.textColor.default,renderHTML:t=>t.textColor===Ye.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),sG=Pe.create({name:"trailingNode",addProseMirrorPlugins(){const t=new xe(this.name);return[new ue({key:t,appendTransaction:(e,n,r)=>{const{doc:o,tr:s,schema:i}=r,a=t.getState(r),l=o.content.size-2,c=i.nodes.blockContainer,d=i.nodes.paragraph;if(a)return s.insert(l,c.create(void 0,d.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let r=e.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),iG={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},aG=Er.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(iG))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[s,i]of Object.entries(t))s!=="class"&&n.setAttribute(s,i);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},o=document.createElement("div");o.className=Ne("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[s,i]of Object.entries(r))s!=="class"&&o.setAttribute(s,i);return n.appendChild(o),{dom:n,contentDOM:o}}}),lG=Er.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=Ne("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,s]of Object.entries(n))o!=="class"&&r.setAttribute(o,s);return{dom:r,contentDOM:r}}}),cG=Er.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class dG extends ft{constructor({editor:e,collaboration:n}){super(e),A(this,"editor"),A(this,"collaboration"),A(this,"forkedState"),this.editor=e,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,n){const r=e.doc;if(e._item===null){const o=Array.from(r.share.keys()).find(s=>r.share.get(s)===e);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,e.constructor)}else{const o=e._item,s=n.store.clients.get(o.id.client)??[],i=An(s,o.id.clock);return s[i].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){if(this.isForkedFromRemote)return;const e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");const n=new Qo;ik(n,ak(e.doc));const r=this.findTypeInOtherYdoc(e,n);this.forkedState={originalFragment:e,forkedFragment:r},this.editor._tiptapEditor.unregisterPlugin([tl,cr,ke]),this.editor._tiptapEditor.registerPlugin(new dy(r).plugins[0]),this.editor._tiptapEditor.registerPlugin(new uy().plugins[0]),this.emit("forked",!0)}merge({keepChanges:e}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(ke),this.editor._tiptapEditor.unregisterPlugin(cr);const{originalFragment:n,forkedFragment:r}=this.forkedState;if(e){const o=ak(r.doc);ik(n.doc,o)}this.editor.extensions.ySyncPlugin=new dy(n),this.editor.extensions.yCursorPlugin=new U_(this.collaboration),this.editor.extensions.yUndoPlugin=new uy,this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),this.forkedState=void 0,this.emit("forked",!1)}}const uG=t=>{var e;const n={},r=hG(t);for(const s of r)n[s.name]=s;t.collaboration&&(n.ySyncPlugin=new dy(t.collaboration.fragment),n.yUndoPlugin=new uy,(e=t.collaboration.provider)!=null&&e.awareness&&(n.yCursorPlugin=new U_(t.collaboration)),n.forkYDocPlugin=new dG({editor:t.editor,collaboration:t.collaboration})),n.formattingToolbar=new CW(t.editor),n.linkToolbar=new PW(t.editor),n.sideMenu=new zW(t.editor,t.sideMenuDetection),n.suggestionMenus=new KW(t.editor),n.filePanel=new wW(t.editor),n.placeholder=new DW(t.editor,t.placeholders),(t.animations??!0)&&(n.animations=new LW),t.tableHandles&&(n.tableHandles=new nG(t.editor)),n.nodeSelectionKeyboard=new IW,n.showSelection=new jW(t.editor),t.comments&&(n.comments=new bW(t.editor,t.comments.threadStore,W_.name));const o=t.disableExtensions||[];for(const s of o)delete n[s];return n};let qk=!1;const hG=t=>{const e=[ja.ClipboardTextSerializer,ja.Commands,ja.Editable,ja.FocusEvents,ja.Tabindex,TV,Pe.create({name:"dropCursor",addProseMirrorPlugins:()=>[t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})]}),gf.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),SW,s$,ZW,JW,YW,o$.extend({inclusive:!1}).configure({defaultProtocol:K_,protocols:qk?[]:q_}),...Object.values(t.styleSpecs).map(n=>n.implementation.mark.configure({editor:t.editor})),oG,pW,rG,Pe.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),cG,aG.configure({editor:t.editor,domAttributes:t.domAttributes}),MW.configure({editor:t.editor,tabBehavior:t.tabBehavior}),lG.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:t.editor,domAttributes:t.domAttributes})),n.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),fW(t.editor),uW(t.editor,t.pasteHandler||(n=>n.defaultPasteHandler())),KU(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[sG]:[],...t.comments?[W_]:[]];return qk=!0,t.collaboration||e.push(OV),e};function fG(t,e){const n=[];return t.forEach((r,o,s)=>{s!==e&&n.push(r)}),_.from(n)}function pG(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],s=o.copy(o.content.addToEnd(t.child(r)));n[n.length-1]=s}else{const o=e.nodes.table.createChecked(void 0,t.child(r));n.push(o)}else n.push(t.child(r));return t=_.from(n),t}function mG(t,e){let n=_.from(t.content);if(n=pG(n,e.state.schema),!gG(n,e))return new D(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const i=n.child(r+1).child(0).child(0);(i.type.name==="bulletListItem"||i.type.name==="numberedListItem"||i.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=fG(n,r+1))}const s=e.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,s)}return new D(n,t.openStart,t.openEnd)}function gG(t,e){var n,r;const o=t.childCount===1,s=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",i=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(s)return!1;if(i){const a=Re(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const fy=class extends G7{constructor(e,n){super({...e,content:void 0}),A(this,"_state"),A(this,"mount",(a,l,c)=>{l?(this.options.element=l,this.createViewAlternative(a,c)):this.destroy()});const r=this.schema;let o;const s=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=s.apply(r.nodes.doc,a),c=JSON.parse(JSON.stringify(l.toJSON()));return c.content[0].content[0].attrs.id="initialBlockId",o=Gr.fromJSON(r,c),o};let i;try{const a=e==null?void 0:e.content.map(l=>si(l,this.schema,n).toJSON());i=Au({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=Cs.create({doc:i,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view){this._state=this.state.apply(e),this.emit("transaction",{editor:this,transaction:e});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(e);return}const{state:n,transactions:r}=this.state.applyTransaction(e),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(s=>{s.type==="mark"&&s.config.addMarkView&&(r[s.name]=s.config.addMarkView(e))}),this.view=new $E({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};A(fy,"create",(t,e)=>{var n,r;const o=(n=globalThis==null?void 0:globalThis.window)==null?void 0:n.setTimeout;typeof((r=globalThis==null?void 0:globalThis.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new fy(t,e)}finally{o&&(globalThis.window.setTimeout=o)}});let Y_=fy;Y_.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const yG={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let bG=class X_ extends B0{constructor(e){var n,r,o,s,i,a,l,c,d,u,h,f,p,g,y;super(),A(this,"pmSchema"),A(this,"extensions",{}),A(this,"headless",!1),A(this,"_tiptapEditor"),A(this,"elementRenderer",null),A(this,"blockCache",new WeakMap),A(this,"dictionary"),A(this,"schema"),A(this,"blockImplementations"),A(this,"inlineContentImplementations"),A(this,"styleImplementations"),A(this,"formattingToolbar"),A(this,"linkToolbar"),A(this,"sideMenu"),A(this,"suggestionMenus"),A(this,"filePanel"),A(this,"tableHandles"),A(this,"comments"),A(this,"showSelectionPlugin"),A(this,"forkYDocPlugin"),A(this,"uploadFile"),A(this,"onUploadStartCallbacks",[]),A(this,"onUploadEndCallbacks",[]),A(this,"resolveFileUrl"),A(this,"resolveUsers"),A(this,"settings"),A(this,"activeTransaction",null),A(this,"mount",(T,E)=>{this._tiptapEditor.mount(this,T,E)}),this.options=e;const v=e;if(v.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(v.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(v.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(v.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||DF,this.settings={tables:{splitCells:((n=e==null?void 0:e.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e==null?void 0:e.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=e==null?void 0:e.tables)==null?void 0:o.cellTextColor)??!1,headers:((s=e==null?void 0:e.tables)==null?void 0:s.headers)??!1},codeBlock:{indentLineWithTab:((i=e==null?void 0:e.codeBlock)==null?void 0:i.indentLineWithTab)??!0,defaultLanguage:((a=e==null?void 0:e.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((l=e==null?void 0:e.codeBlock)==null?void 0:l.supportedLanguages)??{},createHighlighter:((c=e==null?void 0:e.codeBlock)==null?void 0:c.createHighlighter)??void 0}};const x={defaultStyles:!0,schema:e.schema||D0.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(x.comments&&!x.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=x.resolveUsers,this.schema=x.schema,this.blockImplementations=x.schema.blockSpecs,this.inlineContentImplementations=x.schema.inlineContentSpecs,this.styleImplementations=x.schema.styleSpecs,this.extensions=uG({editor:this,domAttributes:x.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:x.collaboration,trailingBlock:x.trailingBlock,disableExtensions:x.disableExtensions,setIdAttribute:x.setIdAttribute,animations:x.animations??!0,tableHandles:Ht("table",this),dropCursor:this.options.dropCursor??IF,placeholders:x.placeholders,tabBehavior:x.tabBehavior,sideMenuDetection:x.sideMenuDetection||"viewport",comments:x.comments,pasteHandler:x.pasteHandler}),(((d=x._tiptapOptions)==null?void 0:d.extensions)||[]).forEach(T=>{this.extensions[T.name]=T});for(let T of x.extensions||[]){typeof T=="function"&&(T=T(this));const E=T.constructor.key();if(!E)throw new Error(`Extension ${T.constructor.name} does not have a key method`);if(this.extensions[E])throw new Error(`Extension ${T.constructor.name} already exists with key ${E}`);this.extensions[E]=T}if(Object.entries(x._extensions||{}).forEach(([T,E])=>{const M=typeof E=="function"?E(this):E;if(!("plugin"in M)){this.extensions[T]=M;return}this.extensions[T]=new class extends ft{static key(){return T}constructor(){super(),this.addProsemirrorPlugin(M.plugin)}get priority(){return M.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,x.uploadFile){const T=x.uploadFile;this.uploadFile=async(E,M)=>{this.onUploadStartCallbacks.forEach(P=>P.apply(this,[M]));try{return await T(E,M)}finally{this.onUploadEndCallbacks.forEach(P=>P.apply(this,[M]))}}}this.resolveFileUrl=x.resolveFileUrl,this.headless=x._headless;const w="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;w&&x.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const C=x.initialContent||(w?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:gf.options.generateID()}]);if(!Array.isArray(C)||C.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+C);const k=[...Object.entries(this.extensions).map(([T,E])=>{if(E instanceof Pe||E instanceof Er||E instanceof ht)return E;if(!(E instanceof ft&&!E.plugins.length))return Pe.create({name:T,priority:E.priority,addProseMirrorPlugins:()=>E.plugins})})].filter(T=>T!==void 0),S={...yG,...x._tiptapOptions,content:C,extensions:k,editorProps:{...(u=x._tiptapOptions)==null?void 0:u.editorProps,attributes:{tabIndex:"0",...(f=(h=x._tiptapOptions)==null?void 0:h.editorProps)==null?void 0:f.attributes,...(p=x.domAttributes)==null?void 0:p.editor,class:Ne("bn-editor",x.defaultStyles?"bn-default-styles":"",((y=(g=x.domAttributes)==null?void 0:g.editor)==null?void 0:y.class)||"")},transformPasted:mG}};this.headless?this.pmSchema=b7(S.extensions):(this._tiptapEditor=Y_.create(S,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(e={}){return new X_(e)}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(e,n=e.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>HF(e.doc,this.pmSchema))}getBlock(e){return this.transact(n=>MU(n.doc,e))}getPrevBlock(e){return this.transact(n=>AU(n.doc,e))}getNextBlock(e){return this.transact(n=>_U(n.doc,e))}getParentBlock(e){return this.transact(n=>PU(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function o(s){for(const i of s){if(e(i)===!1)return!1;const a=n?i.children.slice().reverse():i.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>OU(e))}setTextCursorPosition(e,n="start"){return this.transact(r=>O_(r,e,n))}getSelection(){return this.transact(e=>IU(e))}getSelectionCutBlocks(){return this.transact(e=>DU(e))}setSelection(e,n){return this.transact(r=>NU(r,e,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,n,r="before"){return this.transact(o=>XF(o,e,n,r))}updateBlock(e,n){return this.transact(r=>ez(r,e,n))}removeBlocks(e){return this.transact(n=>_k(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.transact(r=>_k(r,e,n))}undo(){return this.options.collaboration?this.exec(MF):this.exec(zb)}redo(){return this.options.collaboration?this.exec(AF):this.exec(Ub)}insertInlineContent(e,{updateSelection:n=!1}={}){const r=Zn(e,this.pmSchema);this.transact(o=>{RU(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(e=>{const n={},r=e.selection.$to.marks();for(const o of r){const s=this.schema.styleSchema[o.type.name];if(!s){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}s.propSchema==="boolean"?n[s.type]=!0:n[s.type]=o.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new br(o.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new br(o.propSchema)}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.pmSchema.mark("link",{href:e});this.transact(o=>{const{from:s,to:i}=o.selection;n?o.insertText(n,s,i).addMark(s,s+n.length,r):o.setSelection(H.create(o.doc,i)).addMark(s,i,r)})}canNestBlock(){return TU(this)}nestBlock(){D_(this)}canUnnestBlock(){return EU(this)}unnestBlock(){SU(this)}moveBlocksUp(){return xU(this)}moveBlocksDown(){return kU(this)}async blocksToHTMLLossy(e=this.document){return wf(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return sz(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return j_(e,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return BU(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return WU(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}onChange(e){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{e(this,{getChanges:()=>YF(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(e,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(ke)&&!n||e(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(s=>s.$from.pos)),o=Math.max(...n.map(s=>s.$to.pos));if(Eg(e)){const s=this.prosemirrorView.nodeDOM(r);if(s)return s.getBoundingClientRect()}return Pu(this.prosemirrorView,r,o)}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}openSuggestionMenu(e,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:(n==null?void 0:n.deleteTriggerCharacter)||!1,ignoreQueryLength:(n==null?void 0:n.ignoreQueryLength)||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return L_(e.trim()).innerHTML}pasteHTML(e,n=!1){var r;let o=e;n||(o=this.convertHtmlToBlockNoteHtml(e)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(e){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await B_(e))}},im;async function vG(){return im||(im=(async()=>{const[t,e]=await Promise.all([lt(()=>import("./module-BvCTiNll.js"),[]),lt(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),im)}async function wG(t,e){if(!lU("text",t))return[];const{emojiData:n,emojiMart:r}=await vG();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(o=>({id:o.skins[0].native,onItemClick:()=>t.insertInlineContent(o.skins[0].native+" ")}))}function py(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function oa(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&_N(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function Q_(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function eP(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function xG(t){return CG()?!1:!Kk()&&t.width===0&&t.height===0||Kk()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function tP(){return/apple/i.test(navigator.vendor)}function Kk(){const t=/android/i;return t.test(Q_())||t.test(eP())}function kG(){return Q_().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function CG(){return eP().includes("jsdom/")}function my(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function SG(t){return"nativeEvent"in t}function TG(t){return t.matches("html,body")}function No(t){return(t==null?void 0:t.ownerDocument)||document}function am(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Si(t){return"composedPath"in t?t.composedPath()[0]:t.target}const EG="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function MG(t){return eb(t)&&t.matches(EG)}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var AG=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],gy=AG.join(","),nP=typeof Element>"u",sc=nP?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,yh=!nP&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},bh=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",i=s||n&&e&&t(e.parentNode);return i},_G=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},PG=function(e,n,r){if(bh(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(gy));return n&&sc.call(e,gy)&&o.unshift(e),o=o.filter(r),o},RG=function t(e,n,r){for(var o=[],s=Array.from(e);s.length;){var i=s.shift();if(!bh(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,c=t(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else{var d=sc.call(i,gy);d&&r.filter(i)&&(n||!e.includes(i))&&o.push(i);var u=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),h=!bh(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(u&&h){var f=t(u===!0?i.children:u.children,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:i,candidates:f})}else s.unshift.apply(s,i.children)}}return o},rP=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},oP=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||_G(e))&&!rP(e)?0:e.tabIndex},IG=function(e,n){var r=oP(e);return r<0&&n&&!rP(e)?0:r},NG=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},sP=function(e){return e.tagName==="INPUT"},DG=function(e){return sP(e)&&e.type==="hidden"},OG=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},LG=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},jG=function(e){if(!e.name)return!0;var n=e.form||yh(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=LG(o,e.form);return!s||s===e},BG=function(e){return sP(e)&&e.type==="radio"},VG=function(e){return BG(e)&&!jG(e)},$G=function(e){var n,r=e&&yh(e),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var i,a,l;for(s=!!((i=o)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&o;){var c,d,u;r=yh(o),o=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=o)!==null&&d!==void 0&&(u=d.ownerDocument)!==null&&u!==void 0&&u.contains(o))}}return s},Zk=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},HG=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=sc.call(e,"details>summary:first-of-type"),i=s?e.parentElement:e;if(sc.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var l=e.parentElement,c=yh(e);if(l&&!l.shadowRoot&&o(l)===!0)return Zk(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if($G(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Zk(e);return!1},FG=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return sc.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},zG=function(e,n){return!(n.disabled||bh(n)||DG(n)||HG(n,e)||OG(n)||FG(n))},Jk=function(e,n){return!(VG(n)||oP(n)<0||!zG(e,n))},UG=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},WG=function t(e){var n=[],r=[];return e.forEach(function(o,s){var i=!!o.scopeParent,a=i?o.scopeParent:o,l=IG(a,i),c=i?t(o.candidates):a;l===0?i?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:c})}),r.sort(NG).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},iP=function(e,n){n=n||{};var r;return n.getShadowRoot?r=RG([e],n.includeContainer,{filter:Jk.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:UG}):r=PG(e,n.includeContainer,Jk.bind(null,n)),WG(r)};const aP={...IN},GG=aP.useInsertionEffect,qG=GG||(t=>t());function Hr(t){const e=b.useRef(()=>{});return qG(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var Ct=typeof document<"u"?b.useLayoutEffect:b.useEffect;function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yy.apply(this,arguments)}let Yk=!1,KG=0;const Xk=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+KG++;function ZG(){const[t,e]=b.useState(()=>Yk?Xk():void 0);return Ct(()=>{t==null&&e(Xk())},[]),b.useEffect(()=>{Yk=!0},[]),t}const JG=aP.useId,V0=JG||ZG;function YG(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const XG=b.createContext(null),QG=b.createContext(null),$0=()=>{var t;return((t=b.useContext(XG))==null?void 0:t.id)||null},H0=()=>b.useContext(QG);function $c(t){return"data-floating-ui-"+t}function As(t){const e=b.useRef(t);return Ct(()=>{e.current=t}),e}const Qk=$c("safe-polygon");function su(t,e,n){return n&&!my(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function eq(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:i}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:u=0,move:h=!0}=e,f=H0(),p=$0(),g=As(c),y=As(l),v=As(n),x=b.useRef(),w=b.useRef(-1),C=b.useRef(),k=b.useRef(-1),S=b.useRef(!0),T=b.useRef(!1),E=b.useRef(()=>{}),M=b.useRef(!1),P=b.useCallback(()=>{var L;const j=(L=o.current.openEvent)==null?void 0:L.type;return(j==null?void 0:j.includes("mouse"))&&j!=="mousedown"},[o]);b.useEffect(()=>{if(!a)return;function L(j){let{open:V}=j;V||(clearTimeout(w.current),clearTimeout(k.current),S.current=!0,M.current=!1)}return s.on("openchange",L),()=>{s.off("openchange",L)}},[a,s]),b.useEffect(()=>{if(!a||!g.current||!n)return;function L(V){P()&&r(!1,V,"hover")}const j=No(i.floating).documentElement;return j.addEventListener("mouseleave",L),()=>{j.removeEventListener("mouseleave",L)}},[i.floating,n,r,a,g,P]);const B=b.useCallback(function(L,j,V){j===void 0&&(j=!0),V===void 0&&(V="hover");const ee=su(y.current,"close",x.current);ee&&!C.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,L,V),ee)):j&&(clearTimeout(w.current),r(!1,L,V))},[y,r]),$=Hr(()=>{E.current(),C.current=void 0}),W=Hr(()=>{if(T.current){const L=No(i.floating).body;L.style.pointerEvents="",L.removeAttribute(Qk),T.current=!1}}),Y=Hr(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);b.useEffect(()=>{if(!a)return;function L(q){if(clearTimeout(w.current),S.current=!1,d&&!my(x.current)||u>0&&!su(y.current,"open"))return;const he=su(y.current,"open",x.current);he?w.current=window.setTimeout(()=>{v.current||r(!0,q,"hover")},he):n||r(!0,q,"hover")}function j(q){if(Y())return;E.current();const he=No(i.floating);if(clearTimeout(k.current),M.current=!1,g.current&&o.current.floatingContext){n||clearTimeout(w.current),C.current=g.current({...o.current.floatingContext,tree:f,x:q.clientX,y:q.clientY,onClose(){W(),$(),Y()||B(q,!0,"safe-polygon")}});const pt=C.current;he.addEventListener("mousemove",pt),E.current=()=>{he.removeEventListener("mousemove",pt)};return}(x.current==="touch"?!oa(i.floating,q.relatedTarget):!0)&&B(q)}function V(q){Y()||o.current.floatingContext&&(g.current==null||g.current({...o.current.floatingContext,tree:f,x:q.clientX,y:q.clientY,onClose(){W(),$(),Y()||B(q)}})(q))}if(Pt(i.domReference)){var ee;const q=i.domReference;return n&&q.addEventListener("mouseleave",V),(ee=i.floating)==null||ee.addEventListener("mouseleave",V),h&&q.addEventListener("mousemove",L,{once:!0}),q.addEventListener("mouseenter",L),q.addEventListener("mouseleave",j),()=>{var he;n&&q.removeEventListener("mouseleave",V),(he=i.floating)==null||he.removeEventListener("mouseleave",V),h&&q.removeEventListener("mousemove",L),q.removeEventListener("mouseenter",L),q.removeEventListener("mouseleave",j)}}},[i,a,t,d,u,h,B,$,W,r,n,v,f,y,g,o,Y]),Ct(()=>{var L;if(a&&n&&(L=g.current)!=null&&L.__options.blockPointerEvents&&P()){T.current=!0;const V=i.floating;if(Pt(i.domReference)&&V){var j;const ee=No(i.floating).body;ee.setAttribute(Qk,"");const q=i.domReference,he=f==null||(j=f.nodesRef.current.find(Ce=>Ce.id===p))==null||(j=j.context)==null?void 0:j.elements.floating;return he&&(he.style.pointerEvents=""),ee.style.pointerEvents="none",q.style.pointerEvents="auto",V.style.pointerEvents="auto",()=>{ee.style.pointerEvents="",q.style.pointerEvents="",V.style.pointerEvents=""}}}},[a,n,p,i,f,g,P]),Ct(()=>{n||(x.current=void 0,M.current=!1,$(),W())},[n,$,W]),b.useEffect(()=>()=>{$(),clearTimeout(w.current),clearTimeout(k.current),W()},[a,i.domReference,$,W]);const G=b.useMemo(()=>{function L(j){x.current=j.pointerType}return{onPointerDown:L,onPointerEnter:L,onMouseMove(j){const{nativeEvent:V}=j;function ee(){!S.current&&!v.current&&r(!0,V,"hover")}d&&!my(x.current)||n||u===0||M.current&&j.movementX**2+j.movementY**2<2||(clearTimeout(k.current),x.current==="touch"?ee():(M.current=!0,k.current=window.setTimeout(ee,u)))}}},[d,r,n,v,u]),X=b.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(L){Y()||B(L.nativeEvent,!1)}}),[B,Y]);return b.useMemo(()=>a?{reference:G,floating:X}:{},[a,G,X])}const by=()=>{},lP=b.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:by,setState:by,isInstantPhase:!1}),tq=()=>b.useContext(lP);function nq(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,s]=b.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),i=b.useRef(null),a=b.useCallback(l=>{s({currentId:l})},[]);return Ct(()=>{o.currentId?i.current===null?i.current=o.currentId:o.isInstantPhase||s({isInstantPhase:!0}):(o.isInstantPhase&&s({isInstantPhase:!1}),i.current=null)},[o.currentId,o.isInstantPhase]),b.createElement(lP.Provider,{value:b.useMemo(()=>({...o,setState:s,setCurrentId:a}),[o,a])},e)}function rq(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:s,enabled:i=!0}=e,a=s??o,l=tq(),{currentId:c,setCurrentId:d,initialDelay:u,setState:h,timeoutMs:f}=l;return Ct(()=>{i&&c&&(h({delay:{open:1,close:su(u,"close")}}),c!==a&&r(!1))},[i,a,r,h,c,u]),Ct(()=>{function p(){r(!1),h({delay:u,currentId:null})}if(i&&c&&!n&&c===a){if(f){const g=window.setTimeout(p,f);return()=>{clearTimeout(g)}}p()}},[i,n,h,c,a,r,u,f]),Ct(()=>{i&&(d===by||!n||d(a))},[i,n,d,a]),l}function lm(t,e){let n=t.filter(o=>{var s;return o.parentId===e&&((s=o.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(o=>{var s;return(s=r)==null?void 0:s.some(i=>{var a;return o.parentId===i.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const cP=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function dP(t,e){const n=iP(t,cP());e==="prev"&&n.reverse();const r=n.indexOf(py(No(t)));return n.slice(r+1)[0]}function oq(){return dP(document.body,"next")}function sq(){return dP(document.body,"prev")}function cm(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!oa(n,r)}function iq(t){iP(t,cP()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function eC(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const uP={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let aq;function tC(t){t.key==="Tab"&&(t.target,clearTimeout(aq))}const nC=b.forwardRef(function(e,n){const[r,o]=b.useState();Ct(()=>(tP()&&o("button"),document.addEventListener("keydown",tC),()=>{document.removeEventListener("keydown",tC)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[$c("focus-guard")]:"",style:uP};return b.createElement("span",yy({},e,s))}),hP=b.createContext(null),rC=$c("portal");function lq(t){t===void 0&&(t={});const{id:e,root:n}=t,r=V0(),o=dq(),[s,i]=b.useState(null),a=b.useRef(null);return Ct(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),Ct(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(rC,""),l.appendChild(c),a.current=c,i(c)},[e,r]),Ct(()=>{if(n===null||!r||a.current)return;let l=n||(o==null?void 0:o.portalNode);l&&!Pt(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const d=document.createElement("div");d.id=r,d.setAttribute(rC,""),l=c||l,l.appendChild(d),a.current=d,i(d)},[e,n,r,o]),s}function cq(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,s=lq({id:n,root:r}),[i,a]=b.useState(null),l=b.useRef(null),c=b.useRef(null),d=b.useRef(null),u=b.useRef(null),h=i==null?void 0:i.modal,f=i==null?void 0:i.open,p=!!i&&!i.modal&&i.open&&o&&!!(r||s);return b.useEffect(()=>{if(!s||!o||h)return;function g(y){s&&cm(y)&&(y.type==="focusin"?eC:iq)(s)}return s.addEventListener("focusin",g,!0),s.addEventListener("focusout",g,!0),()=>{s.removeEventListener("focusin",g,!0),s.removeEventListener("focusout",g,!0)}},[s,o,h]),b.useEffect(()=>{s&&(f||eC(s))},[f,s]),b.createElement(hP.Provider,{value:b.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:u,portalNode:s,setFocusManagerState:a}),[o,s])},p&&s&&b.createElement(nC,{"data-type":"outside",ref:l,onFocus:g=>{if(cm(g,s)){var y;(y=d.current)==null||y.focus()}else{const v=sq()||(i==null?void 0:i.refs.domReference.current);v==null||v.focus()}}}),p&&s&&b.createElement("span",{"aria-owns":s.id,style:uP}),s&&Fn.createPortal(e,s),p&&s&&b.createElement(nC,{"data-type":"outside",ref:c,onFocus:g=>{if(cm(g,s)){var y;(y=u.current)==null||y.focus()}else{const v=oq()||(i==null?void 0:i.refs.domReference.current);v==null||v.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,g.nativeEvent,"focus-out"))}}}))}const dq=()=>b.useContext(hP),uq="data-floating-ui-focusable",hq={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},fq={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},oC=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function fP(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=t,{enabled:i=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:u="pointerdown",ancestorScroll:h=!1,bubbles:f,capture:p}=e,g=H0(),y=Hr(typeof l=="function"?l:()=>!1),v=typeof l=="function"?y:l,x=b.useRef(!1),w=b.useRef(!1),{escapeKey:C,outsidePress:k}=oC(f),{escapeKey:S,outsidePress:T}=oC(p),E=b.useRef(!1),M=Hr(G=>{var X;if(!n||!i||!a||G.key!=="Escape"||E.current)return;const L=(X=s.current.floatingContext)==null?void 0:X.nodeId,j=g?lm(g.nodesRef.current,L):[];if(!C&&(G.stopPropagation(),j.length>0)){let V=!0;if(j.forEach(ee=>{var q;if((q=ee.context)!=null&&q.open&&!ee.context.dataRef.current.__escapeKeyBubbles){V=!1;return}}),!V)return}r(!1,SG(G)?G.nativeEvent:G,"escape-key")}),P=Hr(G=>{var X;const L=()=>{var j;M(G),(j=Si(G))==null||j.removeEventListener("keydown",L)};(X=Si(G))==null||X.addEventListener("keydown",L)}),B=Hr(G=>{var X;const L=x.current;x.current=!1;const j=w.current;if(w.current=!1,c==="click"&&j||L||typeof v=="function"&&!v(G))return;const V=Si(G),ee="["+$c("inert")+"]",q=No(o.floating).querySelectorAll(ee);let he=Pt(V)?V:null;for(;he&&!zv(he);){const $e=DN(he);if(zv($e)||!Pt($e))break;he=$e}if(q.length&&Pt(V)&&!TG(V)&&!oa(V,o.floating)&&Array.from(q).every($e=>!oa(he,$e)))return;if(eb(V)&&Y){const $e=V.clientWidth>0&&V.scrollWidth>V.clientWidth,We=V.clientHeight>0&&V.scrollHeight>V.clientHeight;let Yt=We&&G.offsetX>V.clientWidth;if(We&&ON(V).direction==="rtl"&&(Yt=G.offsetX<=V.offsetWidth-V.clientWidth),Yt||$e&&G.offsetY>V.clientHeight)return}const Ce=(X=s.current.floatingContext)==null?void 0:X.nodeId,pt=g&&lm(g.nodesRef.current,Ce).some($e=>{var We;return am(G,(We=$e.context)==null?void 0:We.elements.floating)});if(am(G,o.floating)||am(G,o.domReference)||pt)return;const mt=g?lm(g.nodesRef.current,Ce):[];if(mt.length>0){let $e=!0;if(mt.forEach(We=>{var Yt;if((Yt=We.context)!=null&&Yt.open&&!We.context.dataRef.current.__outsidePressBubbles){$e=!1;return}}),!$e)return}r(!1,G,"outside-press")}),$=Hr(G=>{var X;const L=()=>{var j;B(G),(j=Si(G))==null||j.removeEventListener(c,L)};(X=Si(G))==null||X.addEventListener(c,L)});b.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=C,s.current.__outsidePressBubbles=k;let G=-1;function X(q){r(!1,q,"ancestor-scroll")}function L(){window.clearTimeout(G),E.current=!0}function j(){G=window.setTimeout(()=>{E.current=!1},NN()?5:0)}const V=No(o.floating);a&&(V.addEventListener("keydown",S?P:M,S),V.addEventListener("compositionstart",L),V.addEventListener("compositionend",j)),v&&V.addEventListener(c,T?$:B,T);let ee=[];return h&&(Pt(o.domReference)&&(ee=$d(o.domReference)),Pt(o.floating)&&(ee=ee.concat($d(o.floating))),!Pt(o.reference)&&o.reference&&o.reference.contextElement&&(ee=ee.concat($d(o.reference.contextElement)))),ee=ee.filter(q=>{var he;return q!==((he=V.defaultView)==null?void 0:he.visualViewport)}),ee.forEach(q=>{q.addEventListener("scroll",X,{passive:!0})}),()=>{a&&(V.removeEventListener("keydown",S?P:M,S),V.removeEventListener("compositionstart",L),V.removeEventListener("compositionend",j)),v&&V.removeEventListener(c,T?$:B,T),ee.forEach(q=>{q.removeEventListener("scroll",X)}),window.clearTimeout(G)}},[s,o,a,v,c,n,r,h,i,C,k,M,S,P,B,T,$]),b.useEffect(()=>{x.current=!1},[v,c]);const W=b.useMemo(()=>({onKeyDown:M,[hq[u]]:G=>{d&&r(!1,G.nativeEvent,"reference-press")}}),[M,r,d,u]),Y=b.useMemo(()=>({onKeyDown:M,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[fq[c]]:()=>{x.current=!0}}),[M,c]);return b.useMemo(()=>i?{reference:W,floating:Y}:{},[i,W,Y])}function pq(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=V0(),s=b.useRef({}),[i]=b.useState(()=>YG()),a=$0()!=null,[l,c]=b.useState(r.reference),d=Hr((f,p,g)=>{s.current.openEvent=f?p:void 0,i.emit("openchange",{open:f,event:p,reason:g,nested:a}),n==null||n(f,p,g)}),u=b.useMemo(()=>({setPositionReference:c}),[]),h=b.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return b.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:h,events:i,floatingId:o,refs:u}),[e,d,h,i,o,u])}function ba(t){t===void 0&&(t={});const{nodeId:e}=t,n=pq({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[s,i]=b.useState(null),[a,l]=b.useState(null),d=(o==null?void 0:o.domReference)||s,u=b.useRef(null),h=H0();Ct(()=>{d&&(u.current=d)},[d]);const f=PN({...t,elements:{...o,...a&&{reference:a}}}),p=b.useCallback(w=>{const C=Pt(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;l(C),f.refs.setReference(C)},[f.refs]),g=b.useCallback(w=>{(Pt(w)||w===null)&&(u.current=w,i(w)),(Pt(f.refs.reference.current)||f.refs.reference.current===null||w!==null&&!Pt(w))&&f.refs.setReference(w)},[f.refs]),y=b.useMemo(()=>({...f.refs,setReference:g,setPositionReference:p,domReference:u}),[f.refs,g,p]),v=b.useMemo(()=>({...f.elements,domReference:d}),[f.elements,d]),x=b.useMemo(()=>({...f,...r,refs:y,elements:v,nodeId:e}),[f,y,v,e,r]);return Ct(()=>{r.dataRef.current.floatingContext=x;const w=h==null?void 0:h.nodesRef.current.find(C=>C.id===e);w&&(w.context=x)}),b.useMemo(()=>({...f,context:x,refs:y,elements:v}),[f,y,v,x])}function mq(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:s,elements:i}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=b.useRef(!1),d=b.useRef(),u=b.useRef(!0);b.useEffect(()=>{if(!a)return;const f=RN(i.domReference);function p(){!n&&eb(i.domReference)&&i.domReference===py(No(i.domReference))&&(c.current=!0)}function g(){u.current=!0}return f.addEventListener("blur",p),f.addEventListener("keydown",g,!0),()=>{f.removeEventListener("blur",p),f.removeEventListener("keydown",g,!0)}},[i.domReference,n,a]),b.useEffect(()=>{if(!a)return;function f(p){let{reason:g}=p;(g==="reference-press"||g==="escape-key")&&(c.current=!0)}return o.on("openchange",f),()=>{o.off("openchange",f)}},[o,a]),b.useEffect(()=>()=>{clearTimeout(d.current)},[]);const h=b.useMemo(()=>({onPointerDown(f){xG(f.nativeEvent)||(u.current=!1)},onMouseLeave(){c.current=!1},onFocus(f){if(c.current)return;const p=Si(f.nativeEvent);if(l&&Pt(p))try{if(tP()&&kG())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!u.current&&!MG(p))return}r(!0,f.nativeEvent,"focus")},onBlur(f){c.current=!1;const p=f.relatedTarget,g=f.nativeEvent,y=Pt(p)&&p.hasAttribute($c("focus-guard"))&&p.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var v;const x=py(i.domReference?i.domReference.ownerDocument:document);!p&&x===i.domReference||oa((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,x)||oa(i.domReference,x)||y||r(!1,g,"focus")})}}),[s,i.domReference,r,l]);return b.useMemo(()=>a?{reference:h}:{},[a,h])}const sC="active",iC="selected";function dm(t,e,n){const r=new Map,o=n==="item";let s=t;if(o&&t){const{[sC]:i,[iC]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[uq]:""},...s,...e.map(i=>{const a=i?i[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((i,a)=>(a&&Object.entries(a).forEach(l=>{let[c,d]=l;if(!(o&&[sC,iC].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var u;(u=r.get(c))==null||u.push(d),i[c]=function(){for(var h,f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];return(h=r.get(c))==null?void 0:h.map(y=>y(...p)).find(y=>y!==void 0)}}}else i[c]=d}),i),{})}}function pP(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),o=b.useCallback(a=>dm(a,t,"reference"),e),s=b.useCallback(a=>dm(a,t,"floating"),n),i=b.useCallback(a=>dm(a,t,"item"),r);return b.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const gq=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function yq(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:s=!0,role:i="dialog"}=e,a=(n=gq.get(i))!=null?n:i,l=V0(),d=$0()!=null,u=b.useMemo(()=>a==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&d&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[a,o,d,r,l,i]),h=b.useMemo(()=>{const p={id:o,...a&&{role:a}};return a==="tooltip"||i==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,i]),f=b.useCallback(p=>{let{active:g,selected:y}=p;const v={role:"option",...g&&{id:o+"-option"}};switch(i){case"select":return{...v,"aria-selected":g&&y};case"combobox":return{...v,...g&&{"aria-selected":!0}}}return{}},[o,i]);return b.useMemo(()=>s?{reference:u,floating:h,item:f}:{},[s,u,h,f])}const aC=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function fi(t,e){return typeof t=="function"?t(e):t}function bq(t,e){const[n,r]=b.useState(t);return t&&!n&&r(!0),b.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function vq(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,i=(typeof o=="number"?o:o.close)||0,[a,l]=b.useState("unmounted"),c=bq(n,i);return!c&&a==="close"&&l("unmounted"),Ct(()=>{if(r){if(n){l("initial");const d=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(d)}}l("close")}},[n,r]),{isMounted:c,status:a}}function F0(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:s,duration:i=250}=e,a=t.placement,l=a.split("-")[0],c=b.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof i=="number",u=(d?i:i.open)||0,h=(d?i:i.close)||0,[f,p]=b.useState(()=>({...fi(s,c),...fi(n,c)})),{isMounted:g,status:y}=vq(t,{duration:i}),v=As(n),x=As(r),w=As(o),C=As(s);return Ct(()=>{const k=fi(v.current,c),S=fi(w.current,c),T=fi(C.current,c),E=fi(x.current,c)||Object.keys(k).reduce((M,P)=>(M[P]="",M),{});if(y==="initial"&&p(M=>({transitionProperty:M.transitionProperty,...T,...k})),y==="open"&&p({transitionProperty:Object.keys(E).map(aC).join(","),transitionDuration:u+"ms",...T,...E}),y==="close"){const M=S||k;p({transitionProperty:Object.keys(M).map(aC).join(","),transitionDuration:h+"ms",...T,...M})}},[h,w,v,x,C,u,y,c]),{isMounted:g,styles:f}}var mP={exports:{}},um={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC;function wq(){if(lC)return um;lC=1;var t=R;function e(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function a(u,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,y=p[1];return s(function(){g.value=f,g.getSnapshot=h,l(g)&&y({inst:g})},[u,f,h]),o(function(){return l(g)&&y({inst:g}),u(function(){l(g)&&y({inst:g})})},[u]),i(f),f}function l(u){var h=u.getSnapshot;u=u.value;try{var f=h();return!n(u,f)}catch{return!0}}function c(u,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return um.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,um}mP.exports=wq();var gP=mP.exports;const xq=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},kq=({contentComponent:t})=>{const e=gP.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return R.createElement(R.Fragment,null,Object.values(e))};function Cq(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:F2.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class Sq extends R.Component{constructor(e){var n;super(e),this.editorContentRef=R.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=Cq(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return R.createElement(R.Fragment,null,R.createElement("div",{ref:xq(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&R.createElement(kq,{contentComponent:e.contentComponent}))}}const Tq=b.forwardRef((t,e)=>{const n=R.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return R.createElement(Sq,{key:n,innerRef:e,...t})});R.memo(Tq);var hm={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC;function Eq(){if(cC)return hm;cC=1;var t=R,e=gP;function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return hm.useSyncExternalStoreWithSelector=function(c,d,u,h,f){var p=s(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function v(S){if(!x){if(x=!0,w=S,S=h(S),f!==void 0&&g.hasValue){var T=g.value;if(f(T,S))return C=T}return C=S}if(T=C,r(w,S))return T;var E=h(S);return f!==void 0&&f(T,E)?T:(w=S,C=E)}var x=!1,w,C,k=u===void 0?null:u;return[function(){return v(d())},k===null?void 0:function(){return v(k())}]},[d,u,h,f]);var y=o(c,p[0],p[1]);return i(function(){g.hasValue=!0,g.value=y},[y]),l(y),y},hm}Eq();const Mq=b.createContext({editor:null});Mq.Consumer;const yP=b.createContext({onDragStart:void 0}),bP=()=>b.useContext(yP),Aq=R.forwardRef((t,e)=>{const{onDragStart:n}=bP(),r=t.as||"div";return R.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function _q(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function Pq(t){var e;return typeof t=="object"&&((e=t.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class Rq{constructor(e,{editor:n,props:r={},as:o="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?Fn.flushSync(()=>{this.render()}):this.render()}render(){var e;const n=this.component,r=this.props,o=this.editor;(_q(n)||Pq(n))&&(r.ref=s=>{this.ref=s}),this.reactElement=R.createElement(n,{...r}),(e=o==null?void 0:o.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n==null?void 0:n.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class Iq extends q7{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const c=d=>d.charAt(0).toUpperCase()+d.substring(1);this.component.displayName=c(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&c.appendChild(this.contentDOMElement)}},s=this.component,i=R.memo(c=>R.createElement(yP.Provider,{value:o},R.createElement(s,c)));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new Rq(i,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const o=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,i=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:s,oldDecorations:i,newNode:e,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,o({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=Tu(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function Nq(t,e){return n=>n.editor.contentComponent?new Iq(t,n,e):{}}var Ad={},dC;function Dq(){if(dC)return Ad;dC=1;var t=LN();return Ad.createRoot=t.createRoot,Ad.hydrateRoot=t.hydrateRoot,Ad}var Oq=Dq();const vP=b.createContext(void 0);function Pr(t){return b.useContext(vP)}function J(t){const e=Pr();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function z0(t,e,n){const r=Pr();e||(e=r==null?void 0:r.editor),b.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}function Lq(t,e){const n=J();e=e||n;const[r,o]=b.useState(()=>{if(t)return e.getSelectionBoundingBox()}),s=b.useCallback(()=>{if(!t)return;const i=e.getSelectionBoundingBox();o(i)},[e,t]);return z0(s,e,!0),b.useEffect(()=>{o(t?e.getSelectionBoundingBox():void 0)},[t,e]),r}function jq(t){return t.getBoundingClientRect!==void 0}function ts(t,e,n,r){const{refs:o,update:s,context:i,floatingStyles:a,isPositioned:l}=ba({open:t,...r}),{isMounted:c,styles:d}=F0(i),u=typeof(r==null?void 0:r.canDismiss)=="object"?r.canDismiss:{enabled:r==null?void 0:r.canDismiss},h=fP(i,u),{getReferenceProps:f,getFloatingProps:p}=pP([h]);return b.useEffect(()=>{s()},[e,s]),b.useEffect(()=>{e!==null&&(e instanceof HTMLElement||jq(e)?o.setReference(e):o.setReference({getBoundingClientRect:()=>e}))},[e,o]),b.useMemo(()=>({isMounted:c,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...d,...a,zIndex:n},getFloatingProps:p,getReferenceProps:f,isPositioned:l}),[l,a,c,o.setFloating,o.setReference,d,n,p,f])}function lo(t){const[e,n]=b.useState();return b.useEffect(()=>t(r=>{n({...r})}),[t]),e}const wP=b.createContext(void 0);function K(){return b.useContext(wP)}const Cf=(t={},e=[])=>b.useMemo(()=>{const n=bG.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e);function ae(){return Pr().editor.dictionary}function U0(t,e){const n=Pr();e||(e=n==null?void 0:n.editor),b.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}const W0=t=>{const[e,n]=b.useState(!1),[r,o]=b.useState(t.editor.isEmpty),s=K();U0(()=>{o(t.editor.isEmpty)},t.editor);const i=b.useCallback(()=>{n(!0)},[]),a=b.useCallback(()=>{n(!1)},[]);return b.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),m.jsxs(m.Fragment,{children:[m.jsx(s.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:i,onBlur:a,editable:t.editable}),t.actions&&m.jsx("div",{className:"bn-comment-actions-wrapper",children:m.jsx(t.actions,{isFocused:e,isEmpty:r})})]})},Bq=ao(_n(I0.paragraph.implementation.node.config),{}),{textColor:Oue,backgroundColor:Lue,...Vq}=N0,G0=D0.create({blockSpecs:{paragraph:Bq},styleSpecs:Vq});function $q(){const t=J();if(!t.comments)throw new Error("Comments plugin not found");const e=t.comments,n=K(),r=ae(),o=Cf({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:G0,sideMenuDetection:"editor"});return m.jsx(n.Comments.Card,{className:"bn-thread",children:m.jsx(W0,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:s})=>m.jsx(n.Generic.Toolbar.Root,{className:Ne("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:m.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:s,onClick:async()=>{await e.createThread({initialComment:{body:o.document}}),e.stopPendingComment()},children:"Save"})})})})}const Hq=t=>{const e=J();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=e.comments;b.useEffect(()=>{const d=n.onUpdate(u=>e.setForceSelectionVisible(u.pendingComment));return()=>d()},[n,e]);const r=lo(n.onUpdate.bind(n)),o=Lq(r==null?void 0:r.pendingComment),{isMounted:s,ref:i,style:a,getFloatingProps:l}=ts((r==null?void 0:r.pendingComment)||!1,o||null,5e3,{placement:"bottom",middleware:[Cr(10),ni(),zn()],onOpenChange:d=>{d||(n.stopPendingComment(),e.focus())},...t.floatingOptions});if(!s||!r)return null;const c=t.floatingComposer||$q;return m.jsx("div",{ref:i,style:a,...l(),children:m.jsx(c,{})})};var xP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},uC=R.createContext&&R.createContext(xP),Fq=["attr","size","title"];function zq(t,e){if(t==null)return{};var n=Uq(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uq(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vh(){return vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vh.apply(this,arguments)}function hC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function wh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hC(Object(n),!0).forEach(function(r){Wq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wq(t,e,n){return e=Gq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gq(t){var e=qq(t,"string");return typeof e=="symbol"?e:e+""}function qq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kP(t){return t&&t.map((e,n)=>R.createElement(e.tag,wh({key:n},e.attr),kP(e.child)))}function Q(t){return e=>R.createElement(Kq,vh({attr:wh({},t.attr)},e),kP(t.child))}function Kq(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=zq(t,Fq),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),R.createElement("svg",vh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:wh(wh({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&R.createElement("title",null,s),t.children)};return uC!==void 0?R.createElement(uC.Consumer,null,n=>e(n)):e(xP)}function Zq(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function CP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function Jq(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function Yq(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function q0(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function Xq(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function Qq(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function eK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function tK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function nK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function rK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function fC(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function SP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function TP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function EP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function oK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function sK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function pC(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function iK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function aK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function MP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function AP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function _P(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function PP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function lK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function cK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function RP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function dK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function uK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function K0(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function hK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function fK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function IP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function pK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function mK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function gK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function NP(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function yK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function bK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function vK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function wK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function xK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function kK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function CK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function SK(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function mC(t){return Q({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}let fm;async function TK(){return fm||(fm=(async()=>{const[t,e]=await Promise.all([lt(()=>import("./module-BvCTiNll.js"),[]),lt(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),fm)}function EK(t){const e=b.useRef(null),n=b.useRef(null);return n.current&&n.current.update(t),b.useEffect(()=>((async()=>{const{emojiMart:r}=await TK();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),R.createElement("div",{ref:e})}const gC=t=>{const[e,n]=b.useState(!1),r=K(),o=Pr();return m.jsxs(r.Generic.Popover.Root,{opened:e,children:[m.jsx(r.Generic.Popover.Trigger,{children:m.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),n(!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),m.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:m.jsx(EK,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:s=>{t.onEmojiSelect(s),n(!1)},theme:o==null?void 0:o.colorSchemePreference})})]})};function MK(t,e){return Z0(t,[e]).get(e)}function Z0(t,e){const n=t.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=b.useCallback(()=>{const a=new Map;for(const l of e){const c=r.getUser(l);c&&a.set(l,c)}return a},[r,e]),s=b.useMemo(()=>({current:o()}),[o]),i=b.useCallback(a=>{const l=r.subscribe(c=>{s.current=o(),a()});return r.loadUsers(e),l},[r,o,e,s]);return b.useSyncExternalStore(i,()=>s.current)}const AK=t=>{const e=K(),n=ae(),r=J();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=t.comment.reactions.find(l=>l.emoji===t.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[s,i]=b.useState([]),a=Z0(r,s);return m.jsx(e.Generic.Badge.Root,{className:Ne("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(t.comment,o.emoji),onClick:()=>t.onReactionSelect(o.emoji),onMouseEnter:()=>i(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},o.emoji)},_K=({comment:t,thread:e,showResolveButton:n})=>{const r=ae(),o=Cf({initialContent:t.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:G0,sideMenuDetection:"editor"},[t.body]),s=K(),[i,a]=b.useState(!1),l=J();if(!l.comments)throw new Error("Comments plugin not found");const c=l.comments.threadStore,d=b.useCallback(()=>{a(!0)},[]),u=b.useCallback(()=>{o.replaceBlocks(o.document,t.body),a(!1)},[o,t.body]),h=b.useCallback(async E=>{await c.updateComment({commentId:t.id,comment:{body:o.document},threadId:e.id}),a(!1)},[t,e.id,o,c]),f=b.useCallback(async()=>{await c.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,c]),p=b.useCallback(async E=>{c.auth.canAddReaction(t,E)?await c.addReaction({threadId:e.id,commentId:t.id,emoji:E}):c.auth.canDeleteReaction(t,E)&&await c.deleteReaction({threadId:e.id,commentId:t.id,emoji:E})},[c,t,e.id]),g=b.useCallback(async()=>{await c.resolveThread({threadId:e.id})},[e.id,c]),y=b.useCallback(async()=>{await c.unresolveThread({threadId:e.id})},[e.id,c]),v=MK(l,t.userId);if(!t.body)return null;let x;const w=c.auth.canAddReaction(t),C=c.auth.canDeleteComment(t),k=c.auth.canUpdateComment(t),S=n&&(e.resolved?c.auth.canUnresolveThread(e):c.auth.canResolveThread(e));i||(x=m.jsxs(s.Generic.Toolbar.Root,{className:Ne("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[w&&m.jsx(gC,{onEmojiSelect:E=>p(E.native),children:m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:m.jsx(mC,{size:16})},"add-reaction")}),S&&(e.resolved?m.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:y,children:m.jsx(Zq,{size:16})},"reopen"):m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:g,children:m.jsx(bK,{size:16})},"resolve")),(C||k)&&m.jsxs(s.Generic.Menu.Root,{position:"bottom-start",children:[m.jsx(s.Generic.Menu.Trigger,{children:m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:m.jsx(CK,{size:16})},"more-actions")}),m.jsxs(s.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[k&&m.jsx(s.Generic.Menu.Item,{icon:m.jsx(Jq,{}),onClick:d,children:r.comments.actions.edit_comment},"edit-comment"),C&&m.jsx(s.Generic.Menu.Item,{icon:m.jsx(wK,{}),onClick:f,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const T=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return m.jsx(s.Comments.Comment,{authorInfo:v??"loading",timeString:T,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:x,className:"bn-thread-comment",children:m.jsx(W0,{autoFocus:i,editor:o,editable:i,actions:t.reactions.length>0||i?({isEmpty:E})=>m.jsxs(m.Fragment,{children:[t.reactions.length>0&&!i&&m.jsxs(s.Generic.Badge.Group,{className:Ne("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(M=>m.jsx(AK,{comment:t,emoji:M.emoji,onReactionSelect:p},M.emoji)),m.jsx(gC,{onEmojiSelect:M=>p(M.native),children:m.jsx(s.Generic.Badge.Root,{className:Ne("bn-badge","bn-comment-add-reaction"),text:"+",icon:m.jsx(mC,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),i&&m.jsxs(s.Generic.Toolbar.Root,{variant:"action-toolbar",className:Ne("bn-action-toolbar","bn-comment-actions"),children:[m.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",onClick:h,isDisabled:E,children:"Save"}),m.jsx(s.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Cancel",variant:"compact",onClick:u,children:"Cancel"})]})]}):void 0})})},PK=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=K(),r=ae(),o=J(),s=Z0(o,t.resolvedBy?[t.resolvedBy]:[]),i=t.comments.map((a,l)=>m.jsx(_K,{thread:t,comment:a,showResolveButton:l===0},a.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!s.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const a=t.comments.findLastIndex(l=>t.resolvedUpdatedAt.getTime()>l.createdAt.getTime())+1;i.splice(a,0,m.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&s.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:m.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&i.length>e&&i.splice(1,i.length-2,m.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),i},DP=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:s,tabIndex:i})=>{const a=K(),l=ae(),c=J().comments;if(!c)throw new Error("Comments plugin not found");const d=Cf({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:G0,sideMenuDetection:"editor"}),u=b.useCallback(async()=>{await c.threadStore.addComment({comment:{body:d.document},threadId:t.id}),d.removeBlocks(d.document)},[c,d,t.id]);return m.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:s,selected:e,tabIndex:i,children:[m.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:m.jsx(PK,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&m.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:m.jsx(W0,{autoFocus:!1,editable:!0,editor:d,actions:({isEmpty:h})=>h?null:m.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Ne("bn-action-toolbar","bn-comment-actions"),children:m.jsx(a.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",isDisabled:h,onClick:u,children:"Save"})})})})]})};function RK(t){const e=t.comments;if(!e)throw new Error("Comments plugin not found");const n=e.threadStore,r=b.useRef();r.current||(r.current=n.getThreads());const o=b.useCallback(s=>n.subscribe(i=>{r.current=i,s()}),[n]);return b.useSyncExternalStore(o,()=>r.current)}const IK=t=>{const e=J();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=lo(e.comments.onUpdate.bind(e.comments)),{isMounted:r,ref:o,style:s,getFloatingProps:i,setReference:a}=ts(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[Cr(10),ni(),zn()],onOpenChange:u=>{var h;u||((h=e.comments)==null||h.selectThread(void 0),e.focus())},...t.floatingOptions}),l=b.useCallback(()=>{var u;if(!(n!=null&&n.selectedThreadId))return;const h=(u=e.domElement)==null?void 0:u.querySelector(`[data-bn-thread-id="${n==null?void 0:n.selectedThreadId}"]`);h&&a(h)},[a,e,n==null?void 0:n.selectedThreadId]);b.useEffect(()=>{if(n!=null&&n.selectedThreadId)return e.onChange(()=>{l()})},[e,l,n==null?void 0:n.selectedThreadId]),b.useLayoutEffect(l,[l]);const c=RK(e);if(!r||!n||!n.selectedThreadId)return null;const d=t.floatingThread||DP;return m.jsx("div",{ref:o,style:s,...i(),children:m.jsx(d,{thread:c.get(n.selectedThreadId),selected:!0})})},NK=t=>{const e=K(),n=ae(),{block:r}=t,o=J(),[s,i]=b.useState(""),a=b.useCallback(d=>{i(d.currentTarget.value)},[]),l=b.useCallback(d=>{d.key==="Enter"&&(d.preventDefault(),o.updateBlock(r,{props:{name:Mk(s),url:s}}))},[o,r,s]),c=b.useCallback(()=>{o.updateBlock(r,{props:{name:Mk(s),url:s}})},[o,r,s]);return m.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[m.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:s,onChange:a,onKeyDown:l,"data-test":"embed-input"}),m.jsx(e.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},DK=t=>{var e;const n=K(),r=ae(),{block:o,setLoading:s}=t,i=J(),[a,l]=b.useState(!1);b.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const c=b.useCallback(h=>{if(h===null)return;async function f(p){if(s(!0),i.uploadFile!==void 0)try{let g=await i.uploadFile(p,o.id);typeof g=="string"&&(g={props:{name:p.name,url:g}}),i.updateBlock(o,g)}catch{l(!0)}finally{s(!1)}}f(h)},[o,i,s]),d=i.schema.blockSchema[o.type],u=d.isFileBlock&&(e=d.fileBlockAccept)!=null&&e.length?d.fileBlockAccept.join(","):"*/*";return m.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[m.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:u,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),a&&m.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},OP=t=>{const e=K(),n=ae(),r=J(),[o,s]=b.useState(!1),i=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:m.jsx(DK,{block:t.block,setLoading:s})}]:[],{name:n.file_panel.embed.title,tabPanel:m.jsx(NK,{block:t.block})}],[a,l]=b.useState(t.defaultOpenTab||i[0].name);return m.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:i,loading:o})},OK=t=>{const e=J();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=lo(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:r,ref:o,style:s,getFloatingProps:i}=ts((n==null?void 0:n.show)||!1,(n==null?void 0:n.referencePos)||null,5e3,{placement:"bottom",middleware:[Cr(10),zn()],onOpenChange:u=>{u||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...c}=n,d=t.filePanel||OP;return m.jsx("div",{ref:o,style:s,...i(),children:m.jsx(d,{...c})})};function ns(t,e){U0(t,e),z0(t,e)}function J0(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Jt(t){const e=Pr();if(t||(t=e==null?void 0:e.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=t,[r,o]=b.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]});return ns(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},n),r}const LK={bold:nK,italic:iK,underline:hK,strike:dK,code:Yq};function jK(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const _d=t=>{const e=ae(),n=K(),r=J(),o=jK(t.basicTextStyle,r),s=Jt(r),[i,a]=b.useState(t.basicTextStyle in r.getActiveStyles());ns(()=>{o&&a(t.basicTextStyle in r.getActiveStyles())},r);const l=d=>{if(r.focus(),!!o){if(r.schema.styleSchema[d].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[d]:!0})}};if(!b.useMemo(()=>o?!!s.find(d=>d.content!==void 0):!1,[o,s])||!r.isEditable)return null;const c=LK[t.basicTextStyle];return m.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>l(t.basicTextStyle),isSelected:i,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:yn(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:m.jsx(c,{})})},vy=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,o=b.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return m.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:o,children:"A"})},yC=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],Sf=t=>{const e=K(),n=ae();return m.jsxs(m.Fragment,{children:[m.jsx(()=>t.text?m.jsxs(m.Fragment,{children:[m.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),yC.map(r=>m.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:m.jsx(vy,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),m.jsx(()=>t.background?m.jsxs(m.Fragment,{children:[m.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),yC.map(r=>m.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:m.jsx(vy,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function bC(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const BK=()=>{const t=K(),e=ae(),n=J(),r=bC("text",n),o=bC("background",n),s=Jt(n),[i,a]=b.useState(r&&n.getActiveStyles().textColor||"default"),[l,c]=b.useState(o&&n.getActiveStyles().backgroundColor||"default");ns(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&c(n.getActiveStyles().backgroundColor||"default")},n);const d=b.useCallback(h=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");h==="default"?n.removeStyles({textColor:h}):n.addStyles({textColor:h}),setTimeout(()=>{n.focus()})},[n,r]),u=b.useCallback(h=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");h==="default"?n.removeStyles({backgroundColor:h}):n.addStyles({backgroundColor:h}),setTimeout(()=>{n.focus()})},[o,n]);return!b.useMemo(()=>{if(!r&&!o)return!1;for(const h of s)if(h.content!==void 0)return!0;return!1},[o,s,r])||!n.isEditable?null:m.jsxs(t.Generic.Menu.Root,{children:[m.jsx(t.Generic.Menu.Trigger,{children:m.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:m.jsx(vy,{textColor:i,backgroundColor:l,size:20})})}),m.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Sf,{text:r?{color:i,setColor:d}:void 0,background:o?{color:l,setColor:u}:void 0})})]})},vC=t=>{for(const e of q_)if(t.startsWith(e))return t;return`${K_}://${t}`},LP=t=>{const e=K(),n=ae(),{url:r,text:o,editLink:s,showTextField:i}=t,[a,l]=b.useState(r),[c,d]=b.useState(o);b.useEffect(()=>{l(r),d(o)},[o,r]);const u=b.useCallback(g=>{g.key==="Enter"&&(g.preventDefault(),s(vC(a),c))},[s,a,c]),h=b.useCallback(g=>l(g.currentTarget.value),[]),f=b.useCallback(g=>d(g.currentTarget.value),[]),p=b.useCallback(()=>s(vC(a),c),[s,a,c]);return m.jsxs(e.Generic.Form.Root,{children:[m.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:m.jsx(MP,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:u,onChange:h,onSubmit:p}),i!==!1&&m.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:m.jsx(K0,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:u,onChange:f,onSubmit:p})]})};function VK(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const $K=()=>{var t;const e=J(),n=K(),r=ae(),o=VK(e),s=Jt(e),[i,a]=b.useState(!1),[l,c]=b.useState(e.getSelectedLinkUrl()||""),[d,u]=b.useState(e.getSelectedText());ns(()=>{u(e.getSelectedText()||""),c(e.getSelectedLinkUrl()||"")},e),b.useEffect(()=>{var p;const g=y=>{(y.ctrlKey||y.metaKey)&&y.key==="k"&&(a(!0),y.preventDefault())};return(p=e.prosemirrorView)==null||p.dom.addEventListener("keydown",g),()=>{var y;(y=e.prosemirrorView)==null||y.dom.removeEventListener("keydown",g)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const h=b.useCallback(p=>{e.createLink(p),e.focus()},[e]),f=e.transact(p=>ly(p.selection));return!b.useMemo(()=>{if(!o)return!1;for(const p of s)if(p.content===void 0)return!1;return!f},[o,s,f])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:m.jsxs(n.Generic.Popover.Root,{opened:i,children:[m.jsx(n.Generic.Popover.Trigger,{children:m.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:yn(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:m.jsx(MP,{}),onClick:()=>a(!0)})}),m.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(LP,{url:l,text:d,editLink:h,showTextField:!1})})]})},HK=()=>{const t=ae(),e=K(),n=J(),[r,o]=b.useState(),s=Jt(n),i=b.useMemo(()=>{if(s.length!==1)return;const c=s[0];if(Bc(c,n))return o(c.props.caption),c},[n,s]),a=b.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{caption:r}}))},[r,n,i]),l=b.useCallback(c=>o(c.currentTarget.value),[]);return!i||Vc(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:m.jsx(pC,{}),isSelected:i.props.caption!==""})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(e.Generic.Form.Root,{children:m.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:m.jsx(pC,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},FK=()=>{const t=ae(),e=K(),n=J(),r=Jt(n),o=b.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(Bc(i,n))return i},[n,r]),s=b.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||Vc(o,n)||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:m.jsx(vK,{}),onClick:s})},zK=()=>{const t=ae(),e=K(),n=J(),[r,o]=b.useState(),s=Jt(n),i=b.useMemo(()=>{if(s.length!==1)return;const c=s[0];if(Bc(c,n))return o(c.props.name),c},[n,s]),a=b.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{name:r}}))},[r,n,i]),l=b.useCallback(c=>o(c.currentTarget.value),[]);return!i||Vc(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:m.jsx(fC,{})})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(e.Generic.Form.Root,{children:m.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:m.jsx(fC,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[i.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},UK=()=>{const t=ae(),e=K(),n=J(),r=Jt(n),[o,s]=b.useState(!1);b.useEffect(()=>{s(!1)},[r]);const i=r.length===1?r[0]:void 0;return i===void 0||!Bc(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{opened:o,position:"bottom",children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>s(!o),isSelected:o,mainTooltip:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:m.jsx(mK,{})})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:m.jsx(OP,{block:i})})]})},WK=()=>{const t=ae(),e=K(),n=J(),r=Jt(n),[o,s]=b.useState(()=>n.canNestBlock());ns(()=>{s(n.canNestBlock())},n);const i=b.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!b.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:yn(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:m.jsx(sK,{})})},GK=()=>{const t=ae(),e=K(),n=J(),r=Jt(n),[o,s]=b.useState(()=>n.canUnnestBlock());ns(()=>{s(n.canUnnestBlock())},n);const i=b.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!b.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:yn(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:m.jsx(oK,{})})},qK=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:K0,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:SP,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:TP,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:EP,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.quote.title,type:"quote",icon:RP,isSelected:e=>e.type==="quote"},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:PP,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:_P,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:AP,isSelected:e=>e.type==="checkListItem"}],KK=t=>{const e=K(),n=ae(),r=J(),o=Jt(r),[s,i]=b.useState(r.getTextCursorPosition().block),a=b.useMemo(()=>(t.items||qK(n)).filter(d=>d.type in r.schema.blockSchema),[r,n,t.items]),l=b.useMemo(()=>a.find(d=>d.type===s.type)!==void 0,[s.type,a]),c=b.useMemo(()=>{const d=u=>{r.focus(),r.transact(()=>{for(const h of o)r.updateBlock(h,{type:u.type,props:u.props})})};return a.map(u=>{const h=u.icon;return{text:u.name,icon:m.jsx(h,{size:16}),onClick:()=>d(u),isSelected:u.isSelected(s)}})},[s,a,r,o]);return ns(()=>{i(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:m.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:c})},ZK=()=>{const t=ae(),e=K(),n=J(),r=b.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:m.jsx(CP,{}),onClick:r}):null},JK=()=>{const t=ae(),e=K(),n=J(),r=b.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:m.jsx(CP,{}),onClick:r})};function wy(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const YK=()=>{const t=ae(),e=K(),n=J(),r=Jt(n),o=b.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(Bc(i,n))return i},[n,r]),s=b.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(i=>window.open(wy(i,window.location.href))):window.open(wy(o.props.url,window.location.href)))},[n,o]);return!o||Vc(o,n)?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,icon:m.jsx(xK,{}),onClick:s})},XK=()=>{const t=ae(),e=K(),n=J(),r=Jt(n),o=b.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(dU(i,n))return i},[n,r]),s=b.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||Vc(o,n)||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:m.jsx(pK,{}),isSelected:o.props.showPreview,onClick:s})},QK=()=>{const t=ae(),e=K(),n=J(),r=Jt(n),o=b.useMemo(()=>{var i;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(i=n.tableHandles)==null?void 0:i.getMergeDirection(a)},[n,r]),s=b.useCallback(()=>{var i;(i=n.tableHandles)==null||i.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?m.jsx(lK,{}):m.jsx(cK,{}),onClick:s})},eZ={left:eK,center:Xq,right:tK,justify:Qq},pm=t=>{const e=K(),n=ae(),r=J(),o=Jt(r),s=b.useMemo(()=>{var l;const c=o[0];if(ay("textAlignment",c,r))return c.props.textAlignment;if(c.type==="table"){const d=(l=r.tableHandles)==null?void 0:l.getCellSelection();if(!d)return;const u=d.cells.map(({row:f,col:p})=>Uo(c.content.rows[f].cells[p]).props.textAlignment),h=u[0];if(u.every(f=>f===h))return h}},[r,o]),i=b.useCallback(l=>{var c;r.focus();for(const d of o)if(Ei("textAlignment",d.type,r))r.updateBlock(d,{props:{textAlignment:l}});else if(d.type==="table"){const u=(c=r.tableHandles)==null?void 0:c.getCellSelection();if(!u)continue;const h=d.content.rows.map(f=>({...f,cells:f.cells.map(p=>Uo(p))}));u.cells.forEach(({row:f,col:p})=>{h[f].cells[p].props.textAlignment=l}),r.updateBlock(d,{type:"table",content:{...d.content,type:"tableContent",rows:h}}),r.setTextCursorPosition(d)}},[r,o]);if(!b.useMemo(()=>!!o.find(l=>"textAlignment"in l.props||l.type==="table"&&l.children),[o])||!r.isEditable)return null;const a=eZ[t.textAlignment];return m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>i(t.textAlignment),isSelected:s===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:m.jsx(a,{})})},jP=t=>[m.jsx(KK,{items:t},"blockTypeSelect"),m.jsx(QK,{},"tableCellMergeButton"),m.jsx(HK,{},"fileCaptionButton"),m.jsx(UK,{},"replaceFileButton"),m.jsx(zK,{},"fileRenameButton"),m.jsx(FK,{},"fileDeleteButton"),m.jsx(YK,{},"fileDownloadButton"),m.jsx(XK,{},"filePreviewButton"),m.jsx(_d,{basicTextStyle:"bold"},"boldStyleButton"),m.jsx(_d,{basicTextStyle:"italic"},"italicStyleButton"),m.jsx(_d,{basicTextStyle:"underline"},"underlineStyleButton"),m.jsx(_d,{basicTextStyle:"strike"},"strikeStyleButton"),m.jsx(pm,{textAlignment:"left"},"textAlignLeftButton"),m.jsx(pm,{textAlignment:"center"},"textAlignCenterButton"),m.jsx(pm,{textAlignment:"right"},"textAlignRightButton"),m.jsx(BK,{},"colorStyleButton"),m.jsx(WK,{},"nestBlockButton"),m.jsx(GK,{},"unnestBlockButton"),m.jsx($K,{},"createLinkButton"),m.jsx(ZK,{},"addCommentButton"),m.jsx(JK,{},"addTiptapCommentButton")],BP=t=>{const e=K();return m.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||jP(t.blockTypeSelectItems)})},wC=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},VP=t=>{const e=b.useRef(null),n=J(),[r,o]=b.useState(()=>{const h=n.getTextCursorPosition().block;return"textAlignment"in h.props?wC(h.props.textAlignment):"top-start"});ns(()=>{const h=n.getTextCursorPosition().block;"textAlignment"in h.props?o(wC(h.props.textAlignment)):o("top-start")},n);const s=lo(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:i,ref:a,style:l,getFloatingProps:c}=ts((s==null?void 0:s.show)||!1,(s==null?void 0:s.referencePos)||null,3e3,{placement:r,middleware:[Cr(10),ni(),zn()],onOpenChange:(h,f)=>{h||(n.formattingToolbar.closeMenu(),n.focus())},...t.floatingOptions}),d=b.useMemo(()=>J0([e,a]),[e,a]);if(!i||!s)return null;if(!s.show&&e.current)return m.jsx("div",{ref:d,style:l,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const u=t.formattingToolbar||BP;return m.jsx("div",{ref:d,style:l,...c(),children:m.jsx(u,{})})},tZ=t=>{const e=K(),n=ae();return m.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:m.jsx(aK,{})})},nZ=t=>{const e=K(),n=ae();return m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(LP,{...t})})]})},rZ=t=>{const e=K(),n=ae();return m.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(wy(t.url,window.location.href),"_blank")},icon:m.jsx(kK,{})})},oZ=t=>{const e=K();return t.children?m.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children}):m.jsxs(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:[m.jsx(nZ,{url:t.url,text:t.text,editLink:t.editLink}),m.jsx(rZ,{url:t.url}),m.jsx(tZ,{deleteLink:t.deleteLink})]})},sZ=t=>{const e=J(),n={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},r=lo(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=ts((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,4e3,{placement:"top-start",middleware:[Cr(10),zn()],onOpenChange:h=>{h||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.linkToolbar||oZ;return m.jsx("div",{ref:s,style:i,...a(),children:m.jsx(u,{...d,...n})})};function iZ(t){return Q({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const aZ=t=>{const e=K(),n=ae(),r=J(),o=b.useCallback(()=>{const s=t.block.content;if(s!==void 0&&Array.isArray(s)&&s.length===0)r.setTextCursorPosition(t.block),r.openSuggestionMenu("/");else{const i=r.insertBlocks([{type:"paragraph"}],t.block,"after")[0];r.setTextCursorPosition(i),r.openSuggestionMenu("/")}},[r,t.block]);return m.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:m.jsx(iZ,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function $P(t){return Q({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function lZ(t){return Q({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const cZ=t=>{const e=K(),n=J();return!Ei("textColor",t.block.type,n)&&!Ei("backgroundColor",t.block.type,n)?null:m.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(e.Generic.Menu.Trigger,{sub:!0,children:m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),m.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Sf,{iconSize:18,text:Ei("textColor",t.block.type,n)&&ay("textColor",t.block,n)?{color:t.block.props.textColor,setColor:r=>n.updateBlock(t.block,{type:t.block.type,props:{textColor:r}})}:void 0,background:Ei("backgroundColor",t.block.type,n)&&ay("backgroundColor",t.block,n)?{color:t.block.props.backgroundColor,setColor:r=>n.updateBlock(t.block,{props:{backgroundColor:r}})}:void 0})})]})},dZ=t=>{const e=K(),n=J();return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([t.block]),children:t.children})},uZ=t=>{const e=K(),n=J();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerRows;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(t.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:t.children})},hZ=t=>{const e=K(),n=J();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerCols;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(t.block,{type:"table",content:{...t.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:t.children})},fZ=t=>{const e=K(),n=ae();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(dZ,{...t,children:n.drag_handle.delete_menuitem}),m.jsx(cZ,{...t,children:n.drag_handle.colors_menuitem}),m.jsx(uZ,{...t,children:n.drag_handle.header_row_menuitem}),m.jsx(hZ,{...t,children:n.drag_handle.header_column_menuitem})]})})},pZ=t=>{const e=K(),n=ae(),r=t.dragHandleMenu||fZ;return m.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>t.blockDragStart(o,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:m.jsx($P,{size:24,"data-test":"dragHandle"})})}),m.jsx(r,{block:t.block,children:t.children})]})},mZ=t=>{const e=K(),n=b.useMemo(()=>{const r={"data-block-type":t.block.type};return t.block.type==="heading"&&(r["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[t.block,t.editor.schema.blockSchema]);return m.jsx(e.SideMenu.Root,{className:"bn-side-menu",...n,children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(aZ,{...t}),m.jsx(pZ,{...t})]})})},gZ=t=>{const e=J(),n={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},r=lo(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=ts((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,1e3,{placement:"left-start",...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.sideMenu||mZ;return m.jsx("div",{ref:s,style:i,...a(),children:m.jsx(u,{...d,...n,editor:e})})};async function yZ(t,e){return(await wG(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function bZ(t){const e=K(),n=ae(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i,columns:a}=t,l=o==="loading-initial"||o==="loading"?m.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,c=b.useMemo(()=>{const d=[];for(let u=0;u<r.length;u++){const h=r[u];d.push(m.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:h,id:`bn-grid-suggestion-menu-item-${u}`,isSelected:u===s,onClick:()=>i==null?void 0:i(h)},h.id))}return d},[e,r,i,s]);return m.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&t.loadingState==="loaded"&&m.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function HP(t,e,n,r=3){const o=b.useRef(0);b.useEffect(()=>{e!==void 0&&(t.length>0?o.current=e.length:e.length-o.current>r&&n())},[n,r,t.length,e])}function FP(t,e){const[n,r]=b.useState([]),[o,s]=b.useState(!1),i=b.useRef(),a=b.useRef();return b.useEffect(()=>{const l=t;i.current=t,s(!0),e(t).then(c=>{i.current===l&&(r(c),s(!1),a.current=l)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function vZ(t,e,n,r,o){const[s,i]=b.useState(0),a=r!==void 0&&r>1;return b.useEffect(()=>{var l;const c=d=>(d.key==="ArrowLeft"&&(d.preventDefault(),n.length&&i((s-1+n.length)%n.length)),d.key==="ArrowRight"&&(d.preventDefault(),n.length&&i((s+1+n.length)%n.length)),d.key==="ArrowUp"?(d.preventDefault(),n.length&&i((s-r+n.length)%n.length),!0):d.key==="ArrowDown"?(d.preventDefault(),n.length&&i((s+r)%n.length),!0):d.key==="Enter"&&!d.isComposing?(d.stopPropagation(),d.preventDefault(),n.length&&(o==null||o(n[s])),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",c,!0)}},[t.domElement,n,s,o,r,a]),b.useEffect(()=>{i(0)},[e]),{selectedIndex:n.length===0?void 0:s}}function wZ(t){const e=Pr().setContentEditableProps,n=J(),{getItems:r,gridSuggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l,columns:c}=t,d=b.useCallback(g=>{a(),i(),l==null||l(g)},[l,a,i]),{items:u,usedQuery:h,loadingState:f}=FP(s,r);HP(u,h,a);const{selectedIndex:p}=vZ(n,s,u,c,d);return b.useEffect(()=>(e(g=>({...g,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(g=>({...g,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),b.useEffect(()=>(e(g=>({...g,"aria-activedescendant":p?"bn-suggestion-menu-item-"+p:void 0})),()=>{e(g=>({...g,"aria-activedescendant":void 0}))}),[e,p]),m.jsx(o,{items:u,onItemClick:d,loadingState:f,selectedIndex:p,columns:c})}function xZ(t){const e=J(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:s,onItemClick:i,getItems:a,floatingOptions:l}=t,c=b.useMemo(()=>i||(x=>{x.onItemClick(e)}),[e,i]),d=b.useMemo(()=>a||(async x=>await yZ(e,x)),[e,a]),u={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},h=b.useCallback(x=>e.suggestionMenus.onUpdate(n,x),[e.suggestionMenus,n]),f=lo(h),{isMounted:p,ref:g,style:y,getFloatingProps:v}=ts((f==null?void 0:f.show)||!1,(f==null?void 0:f.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Cr(10),zn(),jh({apply({availableHeight:x,elements:w}){Object.assign(w.floating.style,{maxHeight:`${x-10}px`})}})],onOpenChange(x){x||e.suggestionMenus.closeMenu()},...l});return!p||!f||!(f!=null&&f.ignoreQueryLength)&&s&&(f.query.startsWith(" ")||f.query.length<s)?null:m.jsx("div",{ref:g,style:y,...v(),children:m.jsx(wZ,{query:f.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:d,columns:o,gridSuggestionMenuComponent:r||bZ,onItemClick:c})})}function kZ(t){const e=K(),n=ae(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i}=t,a=o==="loading-initial"||o==="loading"?m.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=b.useMemo(()=>{let c;const d=[];for(let u=0;u<r.length;u++){const h=r[u];h.group!==c&&(c=h.group,d.push(m.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),d.push(m.jsx(e.SuggestionMenu.Item,{className:Ne("bn-suggestion-menu-item",h.size==="small"?"bn-suggestion-menu-item-small":""),item:h,id:`bn-suggestion-menu-item-${u}`,isSelected:u===s,onClick:()=>i==null?void 0:i(h)},h.title))}return d},[e,r,i,s]);return m.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&m.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function CZ(t,e){const[n,r]=b.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),t.length&&r((n+1)%t.length),!0;const s=SZ(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!s?(o.preventDefault(),o.stopPropagation(),t.length&&(e==null||e(t[n])),!0):!1}}}function SZ(t){return t.nativeEvent!==void 0}function TZ(t,e,n,r,o){const{selectedIndex:s,setSelectedIndex:i,handler:a}=CZ(n,r);return b.useEffect(()=>{var l;return(l=t.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var c;(c=t.domElement)==null||c.removeEventListener("keydown",a,!0)}},[t.domElement,n,s,r,o,a]),b.useEffect(()=>{i(0)},[e,i]),{selectedIndex:n.length===0?void 0:s}}function EZ(t){const e=Pr().setContentEditableProps,n=J(),{getItems:r,suggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l}=t,c=b.useCallback(p=>{a(),i(),l==null||l(p)},[l,a,i]),{items:d,usedQuery:u,loadingState:h}=FP(s,r);HP(d,u,a);const{selectedIndex:f}=TZ(n,s,d,c);return b.useEffect(()=>(e(p=>({...p,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(p=>({...p,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),b.useEffect(()=>(e(p=>({...p,"aria-activedescendant":f?"bn-suggestion-menu-item-"+f:void 0})),()=>{e(p=>({...p,"aria-activedescendant":void 0}))}),[e,f]),m.jsx(o,{items:d,onItemClick:c,loadingState:h,selectedIndex:f})}const MZ={heading:SP,heading_2:TP,heading_3:EP,quote:RP,numbered_list:_P,bullet_list:PP,check_list:AP,paragraph:K0,table:uK,image:IP,video:fK,audio:NP,file:q0,emoji:SK,code_block:rK};function AZ(t){return hU(t).map(e=>{const n=MZ[e.key];return{...e,icon:m.jsx(n,{size:18})}})}function _Z(t){const e=J(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:s,getItems:i,floatingOptions:a}=t,l=b.useMemo(()=>s||(v=>{v.onItemClick(e)}),[e,s]),c=b.useMemo(()=>i||(async v=>fU(AZ(e),v)),[e,i]),d={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},u=b.useCallback(v=>e.suggestionMenus.onUpdate(n,v),[e.suggestionMenus,n]),h=lo(u),{isMounted:f,ref:p,style:g,getFloatingProps:y}=ts((h==null?void 0:h.show)||!1,(h==null?void 0:h.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Cr(10),zn({mainAxis:!0,crossAxis:!1}),ni(),jh({apply({availableHeight:v,elements:x}){Object.assign(x.floating.style,{maxHeight:`${v-10}px`})}})],onOpenChange(v){v||e.suggestionMenus.closeMenu()},...a});return!f||!h||!(h!=null&&h.ignoreQueryLength)&&o&&(h.query.startsWith(" ")||h.query.length<o)?null:m.jsx("div",{ref:p,style:g,...y(),children:m.jsx(EZ,{query:h.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:c,suggestionMenuComponent:r||kZ,onItemClick:l})})}const PZ=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},RZ=t=>{const e=K(),n=b.useRef(!1),[r,o]=b.useState(),s=b.useCallback(a=>{t.onMouseDown(),o({originalContent:t.block.content,originalCroppedContent:{rows:t.editor.tableHandles.cropEmptyRowsOrColumns(t.block,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[t]),i=b.useCallback(()=>{n.current||t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns(t.block,"columns",1):t.editor.tableHandles.addRowsOrColumns(t.block,"rows",1)}})},[t.block,t.orientation,t.editor]);return b.useEffect(()=>{const a=l=>{var c,d;if(!r)throw new Error("editingState is undefined");n.current=!0;const u=(t.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,h=t.orientation==="addOrRemoveColumns"?((c=r.originalCroppedContent.rows[0])==null?void 0:c.cells.length)??0:r.originalCroppedContent.rows.length,f=t.orientation==="addOrRemoveColumns"?((d=r.originalContent.rows[0])==null?void 0:d.cells.length)??0:r.originalContent.rows.length,p=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,g=f+PZ(u/(t.orientation==="addOrRemoveColumns"?R0:Kz),.3);g>=h&&g>0&&g!==p&&(t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",g-h):t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",g-h)}}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,t.block,t.editor,t.orientation]),b.useEffect(()=>{const a=t.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,t.onMouseUp]),m.jsx(e.TableHandle.ExtendButton,{className:Ne("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:i,onMouseDown:s,children:t.children||m.jsx(yK,{size:18,"data-test":"extendButton"})})},xC=t=>{const e=K(),n=ae(),r=J().tableHandles;return r?m.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(t.index,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]}):null},IZ=t=>{const e=K(),n=ae(),r=J().tableHandles;return r?m.jsx(e.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(t.index,t.orientation)},children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},NZ=t=>{const e=K(),n=ae(),r=J(),o=r.tableHandles,s=b.useMemo(()=>!o||!t.block?[]:t.orientation==="row"?o.getCellsAtRowHandle(t.block,t.index):o.getCellsAtColumnHandle(t.block,t.index),[t.block,t.index,t.orientation,o]),i=(l,c)=>{const d=t.block.content.rows.map(u=>({...u,cells:u.cells.map(h=>Uo(h))}));s.forEach(({row:u,col:h})=>{c==="text"?d[u].cells[h].props.textColor=l:d[u].cells[h].props.backgroundColor=l}),r.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),r.setTextCursorPosition(t.block)};if(!s||!s[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=Uo(s[0].cell);return m.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(e.Generic.Menu.Trigger,{sub:!0,children:m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),m.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Sf,{iconSize:18,text:r.settings.tables.cellTextColor?{color:s.every(({cell:l})=>Wo(l)&&l.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:l=>{i(l,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:s.every(({cell:l})=>Wo(l)&&l.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:l=>i(l,"background")}:void 0})})]})},DZ=t=>{const e=K(),n=ae(),r=J();if(!r.tableHandles||t.index!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerRows;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},OZ=t=>{const e=K(),n=ae(),r=J();if(!r.tableHandles||t.index!==0||t.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerCols;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},LZ=t=>{const e=K();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(IZ,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(xC,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),m.jsx(xC,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"}),m.jsx(DZ,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(OZ,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(NZ,{orientation:t.orientation,block:t.block,index:t.index})]})})},jZ=t=>{const e=K(),[n,r]=b.useState(!1),o=t.tableHandleMenu||LZ,s=b.useMemo(()=>{const i=t.editor.tableHandles;return!i||!t.block||t.block.type!=="table"?!1:t.orientation==="column"?i.getCellsAtColumnHandle(t.block,t.index).every(({cell:a})=>Qs(a)===1):i.getCellsAtRowHandle(t.block,t.index).every(({cell:a})=>rc(a)===1)},[t.block,t.editor.tableHandles,t.index,t.orientation]);return m.jsxs(e.Generic.Menu.Root,{onOpenChange:i=>{i?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.TableHandle.Root,{className:Ne("bn-table-handle",n?"bn-table-handle-dragging":"",s?"":"bn-table-handle-not-draggable"),draggable:s,onDragStart:i=>{r(!0),t.dragStart(i)},onDragEnd:()=>{t.dragEnd(),r(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||m.jsx($P,{size:24,"data-test":"tableHandle"})})}),Fn.createPortal(m.jsx(o,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function kC(t,e,n){const{refs:r,update:o,context:s,floatingStyles:i}=ba({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[jh({apply({rects:c,elements:d}){Object.assign(d.floating.style,t==="addOrRemoveColumns"?{height:`${c.reference.height}px`}:{width:`${c.reference.width}px`})}})]}),{isMounted:a,styles:l}=F0(s);return b.useEffect(()=>{o()},[n,o]),b.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[t,n,r]),b.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...i}}),[i,a,r.setFloating,l])}function BZ(t,e,n){const r=kC("addOrRemoveRows",e,n),o=kC("addOrRemoveColumns",t,n);return b.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function VZ(t,e,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(e.x,n.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function $Z(t,e,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function HZ(t){return new DOMRect(t.x,t.y,t.width,0)}function mm(t,e,n,r,o){const{refs:s,update:i,context:a,floatingStyles:l}=ba({open:e,placement:t==="row"?"left":t==="col"?"top":"bottom-end",middleware:[Cr(t==="row"?-10:t==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:c,styles:d}=F0(a);return b.useEffect(()=>{i()},[n,r,i]),b.useEffect(()=>{n===null||r===null||o&&t==="cell"||s.setReference({getBoundingClientRect:()=>(t==="row"?VZ:t==="col"?$Z:HZ)(n,r,o)})},[o,t,n,r,s]),b.useMemo(()=>({isMounted:c,ref:s.setFloating,style:{display:"flex",...d,...l}}),[l,c,s.setFloating,d])}function FZ(t,e,n,r){const o=mm("row",t,e,n,r),s=mm("col",t,e,n,r),i=mm("cell",t,e,n,r);return b.useMemo(()=>({rowHandle:o,colHandle:s,cellHandle:i}),[s,o,i])}const zZ=t=>{var e,n;const r=K(),o=ae(),s=J(),i=(l,c)=>{const d=t.block.content.rows.map(u=>({...u,cells:u.cells.map(h=>Uo(h))}));c==="text"?d[t.rowIndex].cells[t.colIndex].props.textColor=l:d[t.rowIndex].cells[t.colIndex].props.backgroundColor=l,s.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),s.setTextCursorPosition(t.block)},a=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!a||s.settings.tables.cellTextColor===!1&&s.settings.tables.cellBackgroundColor===!1?null:m.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(r.Generic.Menu.Trigger,{sub:!0,children:m.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||o.drag_handle.colors_menuitem})}),m.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Sf,{iconSize:18,text:s.settings.tables.cellTextColor?{color:Wo(a)?a.props.textColor:"default",setColor:l=>i(l,"text")}:void 0,background:s.settings.tables.cellBackgroundColor?{color:Wo(a)?a.props.backgroundColor:"default",setColor:l=>i(l,"background")}:void 0})})]})},UZ=t=>{var e,n;const r=K(),o=ae(),s=J(),i=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!i||!Wo(i)||rc(i)===1&&Qs(i)===1||!s.settings.tables.splitCells?null:m.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=s.tableHandles)==null||a.splitCell({row:t.rowIndex,col:t.colIndex})},children:o.table_handle.split_cell_menuitem})},WZ=t=>{const e=K();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(UZ,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),m.jsx(zZ,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex})]})})},GZ=t=>{const e=K(),n=t.tableCellMenu||WZ;return!t.editor.settings.tables.splitCells&&!t.editor.settings.tables.cellBackgroundColor&&!t.editor.settings.tables.cellTextColor?null:m.jsxs(e.Generic.Menu.Root,{onOpenChange:r=>{r?t.freezeHandles():(t.unfreezeHandles(),t.editor.focus())},position:"right",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||m.jsx(lZ,{size:12,"data-test":"tableCellHandle"})})}),Fn.createPortal(m.jsx(n,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),t.menuContainer)]})},qZ=t=>{var e,n;const r=J(),[o,s]=b.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const i={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=i,c=b.useCallback(()=>{a(),k(!0),w(!0)},[a]),d=b.useCallback(()=>{l(),k(!1),w(!1)},[l]),u=lo(r.tableHandles.onUpdate.bind(r.tableHandles)),h=b.useMemo(()=>{var M,P;return u!=null&&u.draggingState?{draggedCellOrientation:(M=u==null?void 0:u.draggingState)==null?void 0:M.draggedCellOrientation,mousePos:(P=u==null?void 0:u.draggingState)==null?void 0:P.mousePos}:void 0},[u==null?void 0:u.draggingState,(e=u==null?void 0:u.draggingState)==null?void 0:e.draggedCellOrientation,(n=u==null?void 0:u.draggingState)==null?void 0:n.mousePos]),{rowHandle:f,colHandle:p,cellHandle:g}=FZ((u==null?void 0:u.show)||!1,(u==null?void 0:u.referencePosCell)||null,(u==null?void 0:u.referencePosTable)||null,h),{addOrRemoveColumnsButton:y,addOrRemoveRowsButton:v}=BZ((u==null?void 0:u.showAddOrRemoveColumnsButton)||!1,(u==null?void 0:u.showAddOrRemoveRowsButton)||!1,(u==null?void 0:u.referencePosTable)||null),[x,w]=b.useState(!1),[C,k]=b.useState(!1);if(!u)return null;const S=t.tableHandle||jZ,T=t.extendButton||RZ,E=t.tableCellHandle||GZ;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:s}),m.jsxs(cq,{root:u.widgetContainer,children:[!x&&o&&f.isMounted&&u.rowIndex!==void 0&&m.jsx("div",{ref:f.ref,style:f.style,children:m.jsx(S,{editor:r,orientation:"row",showOtherSide:()=>k(!1),hideOtherSide:()=>k(!0),index:u.rowIndex,block:u.block,dragStart:i.rowDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),!C&&o&&p.isMounted&&u.colIndex!==void 0&&m.jsx("div",{ref:p.ref,style:p.style,children:m.jsx(S,{editor:r,orientation:"column",showOtherSide:()=>w(!1),hideOtherSide:()=>w(!0),index:u.colIndex,block:u.block,dragStart:i.colDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),o&&g.isMounted&&u.colIndex!==void 0&&u.rowIndex!==void 0&&m.jsx("div",{ref:g.ref,style:g.style,children:m.jsx(E,{editor:r,block:u.block,rowIndex:u.rowIndex,colIndex:u.colIndex,menuContainer:o,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles})}),m.jsx("div",{ref:v.ref,style:v.style,children:m.jsx(T,{editor:r,orientation:"addOrRemoveRows",block:u.block,onMouseDown:c,onMouseUp:d})}),m.jsx("div",{ref:y.ref,style:y.style,children:m.jsx(T,{editor:r,orientation:"addOrRemoveColumns",block:u.block,onMouseDown:c,onMouseUp:d})})]})]})};function KZ(t){const e=J();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return m.jsxs(m.Fragment,{children:[t.formattingToolbar!==!1&&m.jsx(VP,{}),t.linkToolbar!==!1&&m.jsx(sZ,{}),t.slashMenu!==!1&&m.jsx(_Z,{triggerCharacter:"/"}),t.emojiPicker!==!1&&m.jsx(xZ,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&m.jsx(gZ,{}),e.filePanel&&t.filePanel!==!1&&m.jsx(OK,{}),e.tableHandles&&t.tableHandles!==!1&&m.jsx(qZ,{}),e.comments&&t.comments!==!1&&m.jsxs(m.Fragment,{children:[m.jsx(Hq,{}),m.jsx(IK,{})]})]})}const zP=()=>{const t=b.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)")},[]),e=b.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: light)")},[]),n=t==null?void 0:t.matches,r=e==null?void 0:e.matches,[o,s]=b.useState(n?"dark":r?"light":"no-preference");return b.useEffect(()=>{s(n?"dark":r?"light":"no-preference")},[n,r]),b.useEffect(()=>{if(typeof(t==null?void 0:t.addEventListener)=="function"){const i=({matches:l})=>l&&s("dark"),a=({matches:l})=>l&&s("light");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",a),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",a)}}else{const i=()=>s(t.matches?"dark":e.matches?"light":"no-preference");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",i),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",i)}}},[t,e]),o},UP=b.createContext(void 0);function ZZ(){return b.useContext(UP)}function JZ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Fn.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}const YZ=({contentComponent:t})=>{const e=b.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(e)})},XZ=b.forwardRef((t,e)=>{const[n,r]=b.useState();return b.useImperativeHandle(e,()=>(o,s)=>{Fn.flushSync(()=>{r({node:o,container:s})}),r(void 0)},[]),m.jsx(m.Fragment,{children:n&&Fn.createPortal(n.node,n.container)})}),CC=()=>{};function QZ(t,e){const{editor:n,className:r,theme:o,children:s,editable:i,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:d,slashMenu:u,emojiPicker:h,sideMenu:f,filePanel:p,tableHandles:g,comments:y,autoFocus:v,renderEditor:x=!n.headless,...w}=t,[C,k]=b.useState(),S=Pr(),T=zP(),E=(S==null?void 0:S.colorSchemePreference)||T,M=o||(E==="dark"?"dark":"light");U0(l||CC,n),z0(a||CC,n),b.useEffect(()=>{n.isEditable=i!==!1},[i,n]);const P=b.useCallback(Y=>{n.elementRenderer=Y},[n]),B=b.useMemo(()=>({...S,editor:n,setContentEditableProps:k}),[S,n]),$={formattingToolbar:c,linkToolbar:d,slashMenu:u,emojiPicker:h,sideMenu:f,filePanel:p,tableHandles:g,comments:y},W={autoFocus:v,contentEditableProps:C};return m.jsx(vP.Provider,{value:B,children:m.jsxs(UP.Provider,{value:{editorProps:W,defaultUIProps:$},children:[m.jsx(XZ,{ref:P}),m.jsx(eJ,{className:r,renderEditor:x,editorColorScheme:M,ref:e,...w,children:s})]})})}const eJ=R.forwardRef(({className:t,renderEditor:e,editorColorScheme:n,children:r,...o},s)=>m.jsx("div",{className:Ne("bn-container",n,t),"data-color-scheme":n,...o,ref:s,children:e?m.jsx(nJ,{children:r}):r})),tJ=R.forwardRef(QZ),nJ=t=>{const e=ZZ(),n=J(),r=b.useMemo(()=>JZ(),[]),o=b.useCallback(s=>{n.mount(s,r)},[n,r]);return m.jsxs(m.Fragment,{children:[m.jsx(YZ,{contentComponent:r}),m.jsx(rJ,{...e.editorProps,...t,mount:o}),m.jsx(KZ,{...e.defaultUIProps}),t.children]})},rJ=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return m.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})};function SC(t,e){let n;const r=document.createElement("div");let o;if(e!=null&&e.elementRenderer)e.elementRenderer(t(l=>n=l||void 0),r);else{if(!(e!=null&&e.headless))throw new Error("elementRenderer not available, expected headless editor");o=Oq.createRoot(r),Fn.flushSync(()=>{o.render(t(l=>n=l||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n==null||n.setAttribute("data-tmp-find","true");const s=r.cloneNode(!0),i=s.firstElementChild,a=s.querySelector("[data-tmp-find]");return a==null||a.removeAttribute("data-tmp-find"),o==null||o.unmount(),{dom:i,contentDOM:a||void 0}}function gm(t){var e;return m.jsx(Aq,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([n])=>n!=="class")),className:Ne("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([n,r])=>{const o=t.propSchema[n];return!w0.includes(n)&&r!==o.default}).map(([n,r])=>[gh(n),r])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function Tf(t,e){const n=_n({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return Dc(t.propSchema)},parseHTML(){return e_(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return nl({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return r=>{const o=Nq(s=>{var i;const a=this.options.editor,l=YA(s.getPos,a,this.editor,t.type),c=((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},d=bP().nodeViewContentRef;if(!d)throw new Error("nodeViewContentRef is not set");const u=e.render;return m.jsx(gm,{blockType:l.type,blockProps:l.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:c,children:m.jsx(u,{block:l,editor:a,contentRef:h=>{d(h),h&&(h.className=Ne("bn-inline-content",h.className))}})})},{className:"bn-react-node-view-renderer"})(r);return t.isSelectable===!1&&QA(o,this.editor),o}}});return x0(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render;return SC(l=>m.jsx(gm,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:i,children:m.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Ne("bn-inline-content",c.className))}})}),o)},toExternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.toExternalHTML||e.render;return SC(l=>m.jsx(gm,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:i,children:m.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Ne("bn-inline-content",c.className))}})}),o)}})}function Y0(t){const e=J(),[n,r]=b.useState("loading"),[o,s]=b.useState();if(b.useEffect(()=>{let i=!0;return(async()=>{let a="";r("loading");try{a=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{r("error");return}i&&(r("loaded"),s(a))})(),()=>{i=!1}},[e,t]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const X0=t=>m.jsxs("figure",{children:[t.children,m.jsx("figcaption",{children:t.caption})]});function oJ(t){const e=J();b.useEffect(()=>e.onUploadEnd(t),[t,e])}function sJ(t){const e=J();b.useEffect(()=>e.onUploadStart(t),[t,e])}function WP(t){const[e,n]=b.useState(!1);return sJ(r=>{r===t&&n(!0)}),oJ(r=>{r===t&&n(!1)}),e}const iJ=t=>{const e=ae(),n=b.useCallback(o=>{o.preventDefault()},[]),r=b.useCallback(()=>{t.editor.transact(o=>o.setMeta(t.editor.filePanel.plugins[0],{block:t.block}))},[t.block,t.editor]);return m.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[m.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||m.jsx(q0,{size:24})}),m.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},aJ=t=>m.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[m.jsx("div",{className:"bn-file-icon",children:m.jsx(q0,{size:24})}),m.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),Q0=t=>{const e=WP(t.block.id);return m.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?m.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?m.jsx(iJ,{...t}):m.jsxs(m.Fragment,{children:[t.block.props.showPreview===!1||!t.children?m.jsx(aJ,{...t}):t.children,t.block.props.caption&&m.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},Ef=t=>m.jsxs("div",{children:[t.children,m.jsx("p",{children:t.caption})]}),lJ=t=>{const e=Y0(t.block.props.url);return m.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},cJ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?m.jsx("audio",{src:t.block.props.url}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(X0,{caption:t.block.props.caption,children:e}):m.jsx(Ef,{caption:t.block.props.caption,children:e}):e},dJ=t=>m.jsx(Q0,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:m.jsx(NP,{size:24}),children:m.jsx(lJ,{...t})});Tf(m_,{render:dJ,parse:g_,toExternalHTML:cJ});const uJ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add file"});const e=m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?m.jsx(Ef,{caption:t.block.props.caption,children:e}):e},hJ=t=>m.jsx(Q0,{...t});Tf(y_,{render:hJ,parse:b_,toExternalHTML:uJ});const GP=t=>{const[e,n]=b.useState(void 0),[r,o]=b.useState(t.block.props.previewWidth),[s,i]=b.useState(!1),a=b.useRef(null);b.useEffect(()=>{const f=g=>{var y,v;let x;t.block.props.textAlignment==="center"?e.handleUsed==="left"?x=e.initialWidth+(e.initialClientX-g.clientX)*2:x=e.initialWidth+(g.clientX-e.initialClientX)*2:e.handleUsed==="left"?x=e.initialWidth+e.initialClientX-g.clientX:x=e.initialWidth+g.clientX-e.initialClientX,o(Math.min(Math.max(x,64),((v=(y=t.editor.domElement)==null?void 0:y.firstElementChild)==null?void 0:v.clientWidth)||Number.MAX_VALUE))},p=()=>{n(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:r}})};return e&&(window.addEventListener("mousemove",f),window.addEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p)}},[t,e,r]);const l=b.useCallback(()=>{t.editor.isEditable&&i(!0)},[t.editor.isEditable]),c=b.useCallback(()=>{i(!1)},[]),d=b.useCallback(f=>{f.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:f.clientX})},[]),u=b.useCallback(f=>{f.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:f.clientX})},[]),h=WP(t.block.id);return m.jsx(Q0,{...t,onMouseEnter:l,onMouseLeave:c,style:t.block.props.url&&!h&&t.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:m.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[t.children,(s||e)&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:d}),m.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:u})]})]})})},fJ=t=>{const e=Y0(t.block.props.url);return m.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},pJ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?m.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(X0,{caption:t.block.props.caption,children:e}):m.jsx(Ef,{caption:t.block.props.caption,children:e}):e},mJ=t=>m.jsx(GP,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:m.jsx(IP,{size:24}),children:m.jsx(fJ,{...t})});Tf(x_,{render:mJ,parse:k_,toExternalHTML:pJ});const gJ=t=>{const e=Y0(t.block.props.url);return m.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},yJ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?m.jsx("video",{src:t.block.props.url}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(X0,{caption:t.block.props.caption,children:e}):m.jsx(Ef,{caption:t.block.props.caption,children:e}):e},bJ=t=>m.jsx(GP,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:m.jsx(gK,{size:24}),children:m.jsx(gJ,{...t})});Tf(E_,{render:bJ,parse:M_,toExternalHTML:yJ});R.memo(({thread:t,selectedThreadId:e,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const s=b.useCallback(a=>{var l;a.target.closest(".bn-action-toolbar")||(l=n.comments)==null||l.selectThread(t.id)},[n.comments,t.id]),i=b.useCallback(a=>{var l;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const c=a.target instanceof Node?a.target:null,d=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!c||!d||!d.contains(c))&&((l=n.comments)==null||l.selectThread(void 0))},[n.comments]);return m.jsx(DP,{thread:t,selected:t.id===e,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:s,onBlur:i,tabIndex:0})});function qP(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top<r.top,s=n.bottom>r.bottom;return o&&s?"both":o?"top":s?"bottom":"none"}function ur(t){return Object.keys(t)}function ym(t){return t&&typeof t=="object"&&!Array.isArray(t)}function e1(t,e){const n={...t},r=e;return ym(t)&&ym(e)&&Object.keys(e).forEach(o=>{ym(r[o])&&o in t?n[o]=e1(n[o],r[o]):n[o]=r[o]}),n}function vJ(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function wJ(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function xJ(t){const e=wJ(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function bm(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function KP(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?bm(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(t))return e?bm(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const s=`${Number(o)/16}${t}`;return e?bm(s):s}}return r}return n}const I=KP("rem",{shouldScale:!0}),TC=KP("em");function Mf(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function ZP(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function Hc(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==b.Fragment:!1}function Af(t){const e=b.createContext(null);return[({children:o,value:s})=>m.jsx(e.Provider,{value:s,children:o}),()=>{const o=b.useContext(e);if(o===null)throw new Error(t);return o}]}function t1(t=null){const e=b.createContext(t);return[({children:o,value:s})=>m.jsx(e.Provider,{value:s,children:o}),()=>b.useContext(e)]}function EC(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function xh(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function kJ(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function CJ(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function SJ(t,e,n){return xh(t,n)===xh(e,n)}function JP({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:s="rtl",orientation:i}){return a=>{var p;n==null||n(a);const l=Array.from(((p=xh(a.currentTarget,t))==null?void 0:p.querySelectorAll(e))||[]).filter(g=>SJ(a.currentTarget,g,t)),c=l.findIndex(g=>a.currentTarget===g),d=CJ(c,l,r),u=kJ(c,l,r),h=s==="rtl"?u:d,f=s==="rtl"?d:u;switch(a.key){case"ArrowRight":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),o&&l[h].click());break}case"ArrowLeft":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"ArrowUp":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[u].focus(),o&&l[u].click());break}case"ArrowDown":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),o&&l[d].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const g=l.length-1;!l[g].disabled&&l[g].focus();break}}}}const TJ={app:100,modal:200,popover:300,overlay:400,max:9999};function Fc(t){return TJ[t]}const EJ=()=>{};function MJ(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||EJ:n=>{var r;n.key==="Escape"&&(t(n),(r=e.onTrigger)==null||r.call(e))}}function Ie(t,e="size",n=!0){if(t!==void 0)return ZP(t)?n?I(t):t:`var(--${e}-${t})`}function zc(t){return Ie(t,"mantine-spacing")}function Et(t){return t===void 0?"var(--mantine-radius-default)":Ie(t,"mantine-radius")}function Zt(t){return Ie(t,"mantine-font-size")}function AJ(t){return Ie(t,"mantine-line-height",!1)}function YP(t){if(t)return Ie(t,"mantine-shadow",!1)}function lr(t,e){return n=>{t==null||t(n),e==null||e(n)}}function _J(t,e,n){var r;return n?Array.from(((r=xh(n,e))==null?void 0:r.querySelectorAll(t))||[]).findIndex(o=>o===n):null}function PJ(){const[t,e]=b.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function RJ(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const MC=["mousedown","touchstart"];function IJ(t,e,n){const r=b.useRef(null);return b.useEffect(()=>{const o=s=>{const{target:i}=s??{};if(Array.isArray(n)){const a=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";n.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&t()}else r.current&&!r.current.contains(i)&&t()};return(e||MC).forEach(s=>document.addEventListener(s,o)),()=>{(e||MC).forEach(s=>document.removeEventListener(s,o))}},[r,t,n]),r}function NJ(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function DJ(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function OJ(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=b.useState(n?e:DJ(t)),s=b.useRef(null);return b.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(t),o(s.current.matches),NJ(s.current,i=>o(i.matches))},[t]),r}const _f=typeof document<"u"?b.useLayoutEffect:b.useEffect;function qo(t,e){const n=b.useRef(!1);b.useEffect(()=>()=>{n.current=!1},[]),b.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function LJ({opened:t,shouldReturnFocus:e=!0}){const n=b.useRef(null),r=()=>{var o;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((o=n.current)==null||o.focus({preventScroll:!0}))};return qo(()=>{let o=-1;const s=i=>{i.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",s),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",s)}},[t,e]),r}const jJ=/input|select|textarea|button|object/,XP="a, input, select, textarea, button, object, [tabindex]";function BJ(t){return t.style.display==="none"}function VJ(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(BJ(n))return!1;n=n.parentNode}return!0}function QP(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function xy(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(QP(t));return(jJ.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&VJ(t)}function eR(t){const e=QP(t);return(Number.isNaN(e)||e>=0)&&xy(t)}function $J(t){return Array.from(t.querySelectorAll(XP)).filter(eR)}function HJ(t,e){const n=$J(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let s=r===o.activeElement||t===o.activeElement;const i=o.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(s=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===i.getAttribute("name")).includes(r)),!s)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function tR(t=!0){const e=b.useRef(null),n=o=>{let s=o.querySelector("[data-autofocus]");if(!s){const i=Array.from(o.querySelectorAll(XP));s=i.find(eR)||i.find(xy)||null,!s&&xy(o)&&(s=o)}s&&s.focus({preventScroll:!0})},r=b.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return b.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=s=>{s.key==="Tab"&&e.current&&HJ(e.current,s)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const FJ=R.useId||(()=>{});function zJ(){const t=FJ();return t?`mantine-${t.replace(/:/g,"")}`:""}function Uc(t){const e=zJ(),[n,r]=b.useState(e);return _f(()=>{r(RJ())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function kh(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function Wc(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=kh(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o?o():kh(r,null)}),e.clear()}}}function co(...t){return b.useCallback(Wc(...t),t)}function va({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,s]=b.useState(e!==void 0?e:n),i=(a,...l)=>{s(a),r==null||r(a,...l)};return t!==void 0?[t,r,!0]:[o,i,!1]}function UJ(t,e){return OJ("(prefers-reduced-motion: reduce)",t,e)}function WJ(){const[t,e]=b.useState(!1),n=b.useRef(null),r=b.useCallback(()=>e(!0),[]),o=b.useCallback(()=>e(!1),[]);return b.useEffect(()=>{const s=n.current;if(s)return s.addEventListener("mouseenter",r),s.addEventListener("mouseleave",o),()=>{s==null||s.removeEventListener("mouseenter",r),s==null||s.removeEventListener("mouseleave",o)}},[n.current]),{ref:n,hovered:t}}function GJ(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function nR({onBlur:t,onFocus:e}={}){const n=b.useRef(null),[r,o]=b.useState(!1),s=b.useRef(!1),i=c=>{o(c),s.current=c},a=c=>{s.current||(i(!0),e==null||e(c))},l=c=>{s.current&&!GJ(c)&&(i(!1),t==null||t(c))};return b.useEffect(()=>{const c=n.current;if(c)return c.addEventListener("focusin",a),c.addEventListener("focusout",l),()=>{c==null||c.removeEventListener("focusin",a),c==null||c.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function n1(t){var n;const e=R.version;return typeof R.version!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(n=t==null?void 0:t.props)==null?void 0:n.ref}function rR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=rR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function uo(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=rR(t))&&(r&&(r+=" "),r+=e);return r}const qJ={};function KJ(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=uo(e[r],o):e[r]=o})}),e}function Pf({theme:t,classNames:e,props:n,stylesCtx:r}){const s=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(t,n,r):i||qJ);return KJ(s)}function Ch({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((s,i)=>typeof i=="function"?{...s,...i(t,n,r)}:{...s,...i},{})}const oR=b.createContext(null);function rs(){const t=b.useContext(oR);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function ZJ(){return rs().cssVariablesResolver}function JJ(){return rs().classNamesPrefix}function r1(){return rs().getStyleNonce}function YJ(){return rs().withStaticClasses}function XJ(){return rs().headless}function QJ(){var t;return(t=rs().stylesTransform)==null?void 0:t.sx}function eY(){var t;return(t=rs().stylesTransform)==null?void 0:t.styles}function sR(){return rs().env||"default"}function tY(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function nY(t){let e=t.replace("#","");if(e.length===3){const i=e.split("");e=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(e.length===8){const i=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:i}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,s=n&255;return{r,g:o,b:s,a:1}}function rY(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o||1}}function oY(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,i=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),d=s-a/2;let u,h,f;return l>=0&&l<1?(u=a,h=c,f=0):l>=1&&l<2?(u=c,h=a,f=0):l>=2&&l<3?(u=0,h=a,f=c):l>=3&&l<4?(u=0,h=c,f=a):l>=4&&l<5?(u=c,h=0,f=a):(u=a,h=0,f=c),{r:Math.round((u+d)*255),g:Math.round((h+d)*255),b:Math.round((f+d)*255),a:i||1}}function o1(t){return tY(t)?nY(t):t.startsWith("rgb")?rY(t):t.startsWith("hsl")?oY(t):{r:0,g:0,b:0,a:1}}function Pd(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a:s}=o1(t),i=1-e,a=l=>Math.round(l*i);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${s})`}function ic(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function vm(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function sY(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function iY(t){if(t.startsWith("oklch("))return(sY(t)||0)/100;const{r:e,g:n,b:r}=o1(t),o=e/255,s=n/255,i=r/255,a=vm(o),l=vm(s),c=vm(i);return .2126*a+.7152*l+.0722*c}function $a(t,e=.179){return t.startsWith("var(")?!1:iY(t)>e}function wa({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:$a(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:$a(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:$a(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),s=o?Number(o):void 0,i=r in e.colors;if(i){const a=s!==void 0?e.colors[r][s]:e.colors[r][ic(e,n||"light")];return{color:r,value:a,shade:s,isThemeColor:i,isLight:$a(a,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:i,isLight:$a(t,e.luminanceThreshold),shade:s,variable:void 0}}function wr(t,e){const n=wa({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function ky(t,e){const n={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)??e.defaultGradient.deg??0},r=wr(n.from,e),o=wr(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function sr(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const s=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${s}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=o1(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const pi=sr,aY=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const s=wa({color:t,theme:e}),i=typeof o=="boolean"?o:e.autoContrast;if(n==="filled"){const a=i&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${I(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${I(1)} solid transparent`}:{background:t,hover:Pd(t,.1),color:a,border:`${I(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${I(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:sr(a,.1),hover:sr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${I(1)} solid transparent`}}return{background:sr(t,.1),hover:sr(t,.12),color:t,border:`${I(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${I(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:sr(e.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${I(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:sr(t,.05),color:t,border:`${I(1)} solid ${t}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${I(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:"transparent",hover:sr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${I(1)} solid transparent`}}return{background:"transparent",hover:sr(t,.12),color:t,border:`${I(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${I(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${I(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${I(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:Pd(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${I(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Pd(e.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${I(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Pd(e.white,.01),color:t,border:`${I(1)} solid transparent`}:n==="gradient"?{background:ky(r,e),hover:ky(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${I(1)} solid var(--mantine-color-default-border)`}:{}},lY={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},AC="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",s1={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:lY,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:aY,autoContrast:!1,luminanceThreshold:.3,fontFamily:AC,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:AC,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:I(34),lineHeight:"1.3"},h2:{fontSize:I(26),lineHeight:"1.35"},h3:{fontSize:I(22),lineHeight:"1.4"},h4:{fontSize:I(18),lineHeight:"1.45"},h5:{fontSize:I(16),lineHeight:"1.5"},h6:{fontSize:I(14),lineHeight:"1.5"}}},fontSizes:{xs:I(12),sm:I(14),md:I(16),lg:I(18),xl:I(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:I(2),sm:I(4),md:I(8),lg:I(16),xl:I(32)},spacing:{xs:I(10),sm:I(12),md:I(16),lg:I(20),xl:I(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), 0 ${I(1)} ${I(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${I(10)} ${I(15)} ${I(-5)}, rgba(0, 0, 0, 0.04) 0 ${I(7)} ${I(7)} ${I(-5)}`,md:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${I(20)} ${I(25)} ${I(-5)}, rgba(0, 0, 0, 0.04) 0 ${I(10)} ${I(10)} ${I(-5)}`,lg:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${I(28)} ${I(23)} ${I(-7)}, rgba(0, 0, 0, 0.04) 0 ${I(12)} ${I(12)} ${I(-7)}`,xl:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${I(36)} ${I(28)} ${I(-7)}, rgba(0, 0, 0, 0.04) 0 ${I(17)} ${I(17)} ${I(-7)}`},other:{},components:{}};function _C(t){return t==="auto"||t==="dark"||t==="light"}function cY({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return _C(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&_C(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const dY="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more â€“ https://mantine.dev/theming/colors/#primary-color",PC="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function wm(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function RC(t){if(!(t.primaryColor in t.colors))throw new Error(dY);if(typeof t.primaryShade=="object"&&(!wm(t.primaryShade.dark)||!wm(t.primaryShade.light)))throw new Error(PC);if(typeof t.primaryShade=="number"&&!wm(t.primaryShade))throw new Error(PC)}function uY(t,e){var r;if(!e)return RC(t),t;const n=e1(t,e);return e.fontFamily&&!((r=e.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=e.fontFamily),RC(n),n}const i1=b.createContext(null),hY=()=>b.useContext(i1)||s1;function un(){const t=b.useContext(i1);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function iR({theme:t,children:e,inherit:n=!0}){const r=hY(),o=b.useMemo(()=>uY(n?r:s1,t),[t,r,n]);return m.jsx(i1.Provider,{value:o,children:e})}iR.displayName="@mantine/core/MantineThemeProvider";function fY(){const t=un(),e=r1(),n=ur(t.breakpoints).reduce((r,o)=>{const s=t.breakpoints[o].includes("px"),i=xJ(t.breakpoints[o]),a=s?`${i-.1}px`:TC(i-.1),l=s?`${i}px`:TC(i);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return m.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:n}})}function xm(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Ha(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function pY(t,e){const n=xm(t.variables),r=n?Ha(e,n):"",o=xm(t.dark),s=xm(t.light),i=o?Ha(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",a=s?Ha(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,s):"";return`${r}${i}${a}`}function aR({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&wa({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function IC(t,e){return aR({color:t.colors[t.primaryColor][ic(t,e)],theme:t,autoContrast:null})}function Rd({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const a=ic(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:pi(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:pi(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:pi(t.colors[e][a],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const s=ic(t,"dark"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:pi(t.colors[e][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:pi(t.colors[e][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:pi(t.colors[e][Math.max(s-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...i}:i}function mY(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function mi(t,e,n){ur(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const lR=t=>{const e=ic(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:I(t.defaultRadius),r={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":IC(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":IC(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};mi(r.variables,t.breakpoints,"breakpoint"),mi(r.variables,t.spacing,"spacing"),mi(r.variables,t.fontSizes,"font-size"),mi(r.variables,t.lineHeights,"line-height"),mi(r.variables,t.shadows,"shadow"),mi(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((s,i)=>{r.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${t.primaryColor}-${i})`}),ur(t.colors).forEach(s=>{const i=t.colors[s];if(mY(i)){Object.assign(r.light,Rd({theme:t,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Rd({theme:t,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,Rd({theme:t,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Rd({theme:t,color:s,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return ur(o).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=o[s].fontSize,r.variables[`--mantine-${s}-line-height`]=o[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=o[s].fontWeight||t.headings.fontWeight}),r};function gY({theme:t,generator:e}){const n=lR(t),r=e==null?void 0:e(t);return r?e1(n,r):n}const km=lR(s1);function yY(t){const e={variables:{},light:{},dark:{}};return ur(t.variables).forEach(n=>{km.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),ur(t.light).forEach(n=>{km.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),ur(t.dark).forEach(n=>{km.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function bY(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function cR({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=un(),r=r1(),o=ZJ(),s=gY({theme:n,generator:o}),i=t===":root"&&e,a=i?yY(s):s,l=pY(a,t);return l?m.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${i?"":bY(t)}`}}):null}cR.displayName="@mantine/CssVariables";function vY(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function gi(t,e){var o,s;const n=typeof window<"u"&&"matchMedia"in window&&((o=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:o.matches),r=t!=="auto"?t:n?"dark":"light";(s=e())==null||s.setAttribute("data-mantine-color-scheme",r)}function wY({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=b.useRef(null),[s,i]=b.useState(()=>t.get(e)),a=r||s,l=b.useCallback(d=>{r||(gi(d,n),i(d),t.set(d))},[t.set,a,r]),c=b.useCallback(()=>{i(e),gi(e,n),t.clear()},[t.clear,e]);return b.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),_f(()=>{gi(t.get(e),n)},[]),b.useEffect(()=>{var u;if(r)return gi(r,n),()=>{};r===void 0&&gi(s,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=h=>{s==="auto"&&gi(h.matches?"dark":"light",n)};return(u=o.current)==null||u.addEventListener("change",d),()=>{var h;return(h=o.current)==null?void 0:h.removeEventListener("change",d)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function xY({respectReducedMotion:t,getRootElement:e}){_f(()=>{var n;t&&((n=e())==null||n.setAttribute("data-respect-reduced-motion","true"))},[t])}vY();function dR({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:s=!0,withCssVariables:i=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=cY(),defaultColorScheme:d="light",getRootElement:u=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:f,stylesTransform:p,env:g}){const{colorScheme:y,setColorScheme:v,clearColorScheme:x}=wY({defaultColorScheme:d,forceColorScheme:f,manager:c,getRootElement:u});return xY({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:u}),m.jsx(oR.Provider,{value:{colorScheme:y,setColorScheme:v,clearColorScheme:x,getRootElement:u,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:h,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p,env:g},children:m.jsxs(iR,{theme:t,children:[i&&m.jsx(cR,{cssVariablesSelector:a,deduplicateCssVariables:s}),o&&m.jsx(fY,{}),e]})})}dR.displayName="@mantine/core/MantineProvider";function Rf({classNames:t,styles:e,props:n,stylesCtx:r}){const o=un();return{resolvedClassNames:Pf({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:Ch({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const kY={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function CY({theme:t,options:e,unstyled:n}){return uo((e==null?void 0:e.focusable)&&!n&&(t.focusClassName||kY[t.focusRing]),(e==null?void 0:e.active)&&!n&&t.activeClassName)}function SY({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return Pf({theme:o,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:e})[t]}function NC({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return Pf({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function TY({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function EY({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function MY({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function AY({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(s=>{var i,a;return(a=Pf({theme:e,classNames:(i=e.components[s])==null?void 0:i.classNames,props:r,stylesCtx:o}))==null?void 0:a[n]})}function _Y({options:t,classes:e,selector:n,unstyled:r}){return t!=null&&t.variant&&!r?e[`${n}--${t.variant}`]:void 0}function PY({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:s,classes:i,unstyled:a,className:l,rootSelector:c,props:d,stylesCtx:u,withStaticClasses:h,headless:f,transformedStyles:p}){return uo(CY({theme:t,options:e,unstyled:a||f}),AY({theme:t,themeName:n,selector:r,props:d,stylesCtx:u}),_Y({options:e,classes:i,selector:r,unstyled:a}),NC({selector:r,stylesCtx:u,theme:t,classNames:s,props:d}),NC({selector:r,stylesCtx:u,theme:t,classNames:p,props:d}),SY({selector:r,stylesCtx:u,options:e,props:d,theme:t}),TY({rootSelector:c,selector:r,className:l}),EY({selector:r,classes:i,unstyled:a||f}),h&&!f&&MY({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function RY({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(s=>{var i;return Ch({theme:t,styles:(i=t.components[s])==null?void 0:i.styles,props:n,stylesCtx:r})[o]}).reduce((s,i)=>({...s,...i}),{})}function Cy({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Cy({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function IY(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...Mf(n[r])}}),e),{})}function NY({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:s,themeName:i,headless:a}){var l;return(l=IY([a?{}:e==null?void 0:e(n,r,o),...i.map(c=>{var d,u,h;return(h=(u=(d=n.components)==null?void 0:d[c])==null?void 0:u.vars)==null?void 0:h.call(u,n,r,o)}),t==null?void 0:t(n,r,o)]))==null?void 0:l[s]}function DY({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:s,rootSelector:i,styles:a,style:l,vars:c,varsResolver:d,headless:u,withStylesTransform:h}){return{...!h&&RY({theme:t,themeName:e,props:o,stylesCtx:s,selector:n}),...!h&&Ch({theme:t,styles:a,props:o,stylesCtx:s})[n],...!h&&Ch({theme:t,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||o,stylesCtx:s})[n],...NY({theme:t,props:o,stylesCtx:s,vars:c,varsResolver:d,selector:n,themeName:e,headless:u}),...i===n?Cy({style:l,theme:t}):null,...Cy({style:r==null?void 0:r.style,theme:t})}}function OY({props:t,stylesCtx:e,themeName:n}){var i;const r=un(),o=(i=eY())==null?void 0:i();return{getTransformedStyles:a=>o?[...a.map(c=>o(c,{props:t,theme:r,ctx:e})),...n.map(c=>{var d;return o((d=r.components[c])==null?void 0:d.styles,{props:t,theme:r,ctx:e})})].filter(Boolean):[],withStylesTransform:!!o}}function be({name:t,classes:e,props:n,stylesCtx:r,className:o,style:s,rootSelector:i="root",unstyled:a,classNames:l,styles:c,vars:d,varsResolver:u}){const h=un(),f=JJ(),p=YJ(),g=XJ(),y=(Array.isArray(t)?t:[t]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:x}=OY({props:n,stylesCtx:r,themeName:y});return(w,C)=>({className:PY({theme:h,options:C,themeName:y,selector:w,classNamesPrefix:f,classNames:l,classes:e,unstyled:a,className:o,rootSelector:i,props:n,stylesCtx:r,withStaticClasses:p,headless:g,transformedStyles:x([C==null?void 0:C.styles,c])}),style:DY({theme:h,themeName:y,selector:w,options:C,props:n,stylesCtx:r,rootSelector:i,styles:c,style:s,vars:d,varsResolver:u,headless:g,withStylesTransform:v})})}function LY(t,e){return typeof t=="boolean"?t:e.autoContrast}function U(t,e,n){var i;const r=un(),o=(i=r.components[t])==null?void 0:i.defaultProps,s=typeof o=="function"?o(r):o;return{...e,...s,...Mf(n)}}function Cm(t){return ur(t).reduce((e,n)=>t[n]!==void 0?`${e}${vJ(n)}:${t[n]};`:e,"").trim()}function jY({selector:t,styles:e,media:n,container:r}){const o=e?Cm(e):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${Cm(a.styles)}}}`):[],i=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${Cm(a.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${s.join("")}${i.join("")}`.trim()}function uR(t){const e=r1();return m.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:jY(t)}})}function If(t){const{m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:g,pr:y,pe:v,ps:x,bd:w,bg:C,c:k,opacity:S,ff:T,fz:E,fw:M,lts:P,ta:B,lh:$,fs:W,tt:Y,td:G,w:X,miw:L,maw:j,h:V,mih:ee,mah:q,bgsz:he,bgp:Ce,bgr:pt,bga:mt,pos:$e,top:We,left:Yt,bottom:Mt,right:At,inset:ho,display:Pa,flex:ls,hiddenFrom:ci,visibleFrom:Ra,lightHidden:op,darkHidden:sp,sx:ip,...od}=t;return{styleProps:Mf({m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:g,pr:y,pe:v,ps:x,bd:w,bg:C,c:k,opacity:S,ff:T,fz:E,fw:M,lts:P,ta:B,lh:$,fs:W,tt:Y,td:G,w:X,miw:L,maw:j,h:V,mih:ee,mah:q,bgsz:he,bgp:Ce,bgr:pt,bga:mt,pos:$e,top:We,left:Yt,bottom:Mt,right:At,inset:ho,display:Pa,flex:ls,hiddenFrom:ci,visibleFrom:Ra,lightHidden:op,darkHidden:sp,sx:ip}),rest:od}}const BY={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function a1(t,e){const n=wa({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function VY(t,e){const n=wa({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:a1(t,e)}function $Y(t,e){if(typeof t=="number")return I(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(i=>i.trim()!=="");let s=`${I(n)}`;return r&&(s+=` ${r}`),o.length>0&&(s+=` ${a1(o.join(" "),e)}`),s.trim()}return t}const DC={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function HY(t){return typeof t=="string"&&t in DC?DC[t]:t}const FY=["h1","h2","h3","h4","h5","h6"];function zY(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&FY.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?I(t):t}function UY(t){return t}const WY=["h1","h2","h3","h4","h5","h6"];function GY(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&WY.includes(t)?`var(--mantine-${t}-line-height)`:t}function qY(t){return typeof t=="number"?I(t):t}function KY(t,e){if(typeof t=="number")return I(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return I(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const Sm={color:a1,textColor:VY,fontSize:zY,spacing:KY,identity:UY,size:qY,lineHeight:GY,fontFamily:HY,border:$Y};function OC(t){return t.replace("(min-width: ","").replace("em)","")}function ZY({media:t,...e}){const r=Object.keys(t).sort((o,s)=>Number(OC(o))-Number(OC(s))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function JY(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function YY(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function XY(t){return typeof t=="object"&&t!==null?ur(t).filter(e=>e!=="base"):[]}function QY(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function hR({styleProps:t,data:e,theme:n}){return ZY(ur(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const s=e[o],i=Array.isArray(s.property)?s.property:[s.property],a=YY(t[o]);if(!JY(t[o]))return i.forEach(c=>{r.inlineStyles[c]=Sm[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=XY(t[o]);return i.forEach(c=>{a&&(r.styles[c]=Sm[s.type](a,n)),l.forEach(d=>{const u=`(min-width: ${n.breakpoints[d]})`;r.media[u]={...r.media[u],[c]:Sm[s.type](QY(t[o],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function fR(){return`__m__-${b.useId().replace(/:/g,"")}`}function pR(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...pR(r,e)}),{}):typeof t=="function"?t(e):t??{}}function mR(t){return t.startsWith("data-")?t:`data-${t}`}function eX(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[mR(n)]=t[n]),e},{})}function gR(t){return t?typeof t=="string"?{[mR(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...gR(n)}),{}):eX(t):null}function Sy(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Sy(r,e)}),{}):typeof t=="function"?t(e):t??{}}function tX({theme:t,style:e,vars:n,styleProps:r}){const o=Sy(e,t),s=Sy(n,t);return{...o,...s,...r}}const yR=b.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:s,size:i,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:d,renderRoot:u,__size:h,...f},p)=>{var E;const g=un(),y=t||"div",{styleProps:v,rest:x}=If(f),w=QJ(),C=(E=w==null?void 0:w())==null?void 0:E(v.sx),k=fR(),S=hR({styleProps:v,theme:g,data:BY}),T={ref:p,style:tX({theme:g,style:e,vars:n,styleProps:S.inlineStyles}),className:uo(r,C,{[k]:S.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":d,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":ZP(i)?void 0:i||void 0,size:h,...gR(s),...x};return m.jsxs(m.Fragment,{children:[S.hasResponsiveStyles&&m.jsx(uR,{selector:`.${k}`,styles:S.styles,media:S.media}),typeof u=="function"?u(T):m.jsx(y,{...T})]})});yR.displayName="@mantine/core/Box";const ne=yR;function bR(t){return t}function nX(t){const e=t;return n=>{const r=b.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function ve(t){const e=b.forwardRef(t);return e.extend=bR,e.withProps=n=>{const r=b.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function Vt(t){const e=b.forwardRef(t);return e.withProps=n=>{const r=b.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=bR,e}const rX=b.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Gc(){return b.useContext(rX)}var vR={root:"m_87cf2631"};const oX={__staticSelector:"UnstyledButton"},ii=Vt((t,e)=>{const n=U("UnstyledButton",oX,t),{className:r,component:o="button",__staticSelector:s,unstyled:i,classNames:a,styles:l,style:c,...d}=n,u=be({name:s,props:n,classes:vR,className:r,style:c,classNames:a,styles:l,unstyled:i});return m.jsx(ne,{...u("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...d})});ii.classes=vR;ii.displayName="@mantine/core/UnstyledButton";var wR={root:"m_515a97f8"};const sX={},l1=ve((t,e)=>{const n=U("VisuallyHidden",sX,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,...c}=n,d=be({name:"VisuallyHidden",classes:wR,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a});return m.jsx(ne,{component:"span",ref:e,...d("root"),...c})});l1.classes=wR;l1.displayName="@mantine/core/VisuallyHidden";var xR={root:"m_1b7284a3"};const iX={},aX=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:Et(e),"--paper-shadow":YP(n)}}),c1=Vt((t,e)=>{const n=U("Paper",iX,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,withBorder:l,vars:c,radius:d,shadow:u,variant:h,mod:f,...p}=n,g=be({name:"Paper",props:n,classes:xR,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:c,varsResolver:aX});return m.jsx(ne,{ref:e,mod:[{"data-with-border":l},f],...g("root"),variant:h,...p})});c1.classes=xR;c1.displayName="@mantine/core/Paper";function kR(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}function LC(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function jC(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const lX={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function cX({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:s,arrowY:i,dir:a}){const[l,c="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[lX[l]]:r},u=-e/2;return l==="left"?{...d,...LC(c,i,n,o),right:u,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...d,...LC(c,i,n,o),left:u,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...d,...jC(c,s,n,o,a),bottom:u,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...d,...jC(c,s,n,o,a),top:u,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const d1=b.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:s,arrowX:i,arrowY:a,style:l,...c},d)=>{const{dir:u}=Gc();return s?m.jsx("div",{...c,ref:d,style:{...l,...cX({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:u,arrowX:i,arrowY:a})}}):null});d1.displayName="@mantine/core/FloatingArrow";var CR={root:"m_9814e45f"};const dX={zIndex:Fc("modal")},uX=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:s,zIndex:i})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&sr(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${I(o)})`:void 0,"--overlay-radius":s===void 0?void 0:Et(s),"--overlay-z-index":i==null?void 0:i.toString()}}),ac=Vt((t,e)=>{const n=U("Overlay",dX,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,fixed:c,center:d,children:u,radius:h,zIndex:f,gradient:p,blur:g,color:y,backgroundOpacity:v,mod:x,...w}=n,C=be({name:"Overlay",props:n,classes:CR,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:uX});return m.jsx(ne,{ref:e,...C("root"),mod:[{center:d,fixed:c},x],...w,children:u})});ac.classes=CR;ac.displayName="@mantine/core/Overlay";function Tm(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function hX({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||Tm(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=Tm(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return Tm(n)}const fX={},SR=ve((t,e)=>{const{children:n,target:r,reuseTargetNode:o,...s}=U("Portal",fX,t),[i,a]=b.useState(!1),l=b.useRef(null);return _f(()=>(a(!0),l.current=hX({target:r,reuseTargetNode:o,...s}),kh(e,l.current),!r&&!o&&l.current&&document.body.appendChild(l.current),()=>{!r&&!o&&l.current&&document.body.removeChild(l.current)}),[r]),!i||!l.current?null:Fn.createPortal(m.jsx(m.Fragment,{children:n}),l.current)});SR.displayName="@mantine/core/Portal";const qc=ve(({withinPortal:t=!0,children:e,...n},r)=>sR()==="test"||!t?m.jsx(m.Fragment,{children:e}):m.jsx(SR,{ref:r,...n,children:e}));qc.displayName="@mantine/core/OptionalPortal";const Fa=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Id={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Fa("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Fa("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Fa("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Fa("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Fa("top"),common:{transformOrigin:"top right"}}},BC={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function pX({transition:t,state:e,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in Id?{transitionProperty:Id[t].transitionProperty,...o,...Id[t].common,...Id[t][BC[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[BC[e]]}}function mX({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:s,onEntered:i,onExited:a,enterDelay:l,exitDelay:c}){const d=un(),u=UJ(),h=d.respectReducedMotion?u:!1,[f,p]=b.useState(h?0:t),[g,y]=b.useState(r?"entered":"exited"),v=b.useRef(-1),x=b.useRef(-1),w=b.useRef(-1),C=S=>{const T=S?o:s,E=S?i:a;window.clearTimeout(v.current);const M=h?0:S?t:e;p(M),M===0?(typeof T=="function"&&T(),typeof E=="function"&&E(),y(S?"entered":"exited")):w.current=requestAnimationFrame(()=>{F2.flushSync(()=>{y(S?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof T=="function"&&T(),y(S?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof E=="function"&&E(),y(S?"entered":"exited")},M)})})},k=S=>{if(window.clearTimeout(x.current),typeof(S?l:c)!="number"){C(S);return}x.current=window.setTimeout(()=>{C(S)},S?l:c)};return qo(()=>{k(r)},[r]),b.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:f,transitionStatus:g,transitionTimingFunction:n||"ease"}}function ai({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:s,timingFunction:i="ease",onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h}){const f=sR(),{transitionDuration:p,transitionStatus:g,transitionTimingFunction:y}=mX({mounted:o,exitDuration:r,duration:n,timingFunction:i,onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h});return p===0||f==="test"?o?m.jsx(m.Fragment,{children:s({})}):t?s({display:"none"}):null:g==="exited"?t?s({display:"none"}):null:m.jsx(m.Fragment,{children:s(pX({transition:e,duration:p,state:g,timingFunction:y}))})}ai.displayName="@mantine/core/Transition";const[gX,TR]=Af("Popover component was not found in the tree");function u1({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=tR(e),s=co(o,r);return Hc(t)?b.cloneElement(t,{[n]:s}):t}function ER(t){return m.jsx(l1,{tabIndex:-1,"data-autofocus":!0,...t})}u1.displayName="@mantine/core/FocusTrap";ER.displayName="@mantine/core/FocusTrapInitialFocus";u1.InitialFocus=ER;var MR={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const yX={},Nf=ve((t,e)=>{var y,v,x,w;const n=U("PopoverDropdown",yX,t),{className:r,style:o,vars:s,children:i,onKeyDownCapture:a,variant:l,classNames:c,styles:d,...u}=n,h=TR(),f=LJ({opened:h.opened,shouldReturnFocus:h.returnFocus}),p=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=co(e,h.floating);return h.disabled?null:m.jsx(qc,{...h.portalProps,withinPortal:h.withinPortal,children:m.jsx(ai,{mounted:h.opened,...h.transitionProps,transition:((y=h.transitionProps)==null?void 0:y.transition)||"fade",duration:((v=h.transitionProps)==null?void 0:v.duration)??150,keepMounted:h.keepMounted,exitDuration:typeof((x=h.transitionProps)==null?void 0:x.exitDuration)=="number"?h.transitionProps.exitDuration:(w=h.transitionProps)==null?void 0:w.duration,children:C=>m.jsx(u1,{active:h.trapFocus&&h.opened,innerRef:g,children:m.jsxs(ne,{...p,...u,variant:l,onKeyDownCapture:MJ(()=>{var k,S;(k=h.onClose)==null||k.call(h),(S=h.onDismiss)==null||S.call(h)},{active:h.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":h.placement,"data-fixed":h.floatingStrategy==="fixed"||void 0,...h.getStyles("dropdown",{className:r,props:n,classNames:c,styles:d,style:[{...C,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:I(h.width)},h.resolvedStyles.dropdown,d==null?void 0:d.dropdown,o]}),children:[i,m.jsx(d1,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:n,classNames:c,styles:d})})]})})})})});Nf.classes=MR;Nf.displayName="@mantine/core/PopoverDropdown";const bX={refProp:"ref",popupType:"dialog"},h1=ve((t,e)=>{const{children:n,refProp:r,popupType:o,...s}=U("PopoverTarget",bX,t);if(!Hc(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=s,a=TR(),l=co(a.reference,n1(n),e),c=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return b.cloneElement(n,{...i,...c,...a.targetProps,className:uo(a.targetProps.className,i.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});h1.displayName="@mantine/core/PopoverTarget";function AR({opened:t,floating:e,position:n,positionDependencies:r}){const[o,s]=b.useState(0);b.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return jN(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,o,n]),qo(()=>{e.update()},r),qo(()=>{s(i=>i+1)},[t])}function vX(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function wX(t,e){const n=vX(t.middlewares),r=[Cr(t.offset)];return n.shift&&r.push(ni(typeof n.shift=="boolean"?{limiter:Uv(),padding:5}:{limiter:Uv(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?zn():zn(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?il():il(n.inline)),r.push(z2({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&r.push(jh({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:s,availableHeight:i,...a}){var d;const c=((d=e().refs.floating.current)==null?void 0:d.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:s,availableHeight:i,...a}):Object.assign(c,{maxWidth:`${s}px`,maxHeight:`${i}px`})),t.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),r}function xX(t){const[e,n]=va({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=b.useRef(e),o=()=>{e&&n(!1)},s=()=>n(!e),i=ba({strategy:t.strategy,placement:t.position,middleware:wX(t,()=>i)});return AR({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:i}),qo(()=>{var a;(a=t.onPositionChange)==null||a.call(t,i.placement)},[i.placement]),qo(()=>{var a,l;e!==r.current&&(e?(l=t.onOpen)==null||l.call(t):(a=t.onClose)==null||a.call(t)),r.current=e},[e,t.onClose,t.onOpen]),{floating:i,controlled:typeof t.opened=="boolean",opened:e,onClose:o,onToggle:s}}const kX={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Fc("popover"),__staticSelector:"Popover",width:"max-content"},CX=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:Et(e),"--popover-shadow":YP(n)}});function ss(t){var jv,Bv,Vv,$v,Hv,Fv;const e=U("Popover",kX,t),{children:n,position:r,offset:o,onPositionChange:s,positionDependencies:i,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:d,width:u,middlewares:h,withArrow:f,arrowSize:p,arrowOffset:g,arrowRadius:y,arrowPosition:v,unstyled:x,classNames:w,styles:C,closeOnClickOutside:k,withinPortal:S,portalProps:T,closeOnEscape:E,clickOutsideEvents:M,trapFocus:P,onClose:B,onDismiss:$,onOpen:W,onChange:Y,zIndex:G,radius:X,shadow:L,id:j,defaultOpened:V,__staticSelector:ee,withRoles:q,disabled:he,returnFocus:Ce,variant:pt,keepMounted:mt,vars:$e,floatingStrategy:We,withOverlay:Yt,overlayProps:Mt,...At}=e,ho=be({name:ee,props:e,classes:MR,classNames:w,styles:C,unstyled:x,rootSelector:"dropdown",vars:$e,varsResolver:CX}),{resolvedStyles:Pa}=Rf({classNames:w,styles:C,props:e}),ls=b.useRef(null),[ci,Ra]=b.useState(null),[op,sp]=b.useState(null),{dir:ip}=Gc(),od=Uc(j),gt=xX({middlewares:h,width:u,position:kR(ip,r),offset:typeof o=="number"?o+(f?p/2:0):o,arrowRef:ls,arrowOffset:g,onPositionChange:s,positionDependencies:i,opened:a,defaultOpened:V,onChange:Y,onOpen:W,onClose:B,onDismiss:$,strategy:We});IJ(()=>{k&&(gt.onClose(),$==null||$())},M,[ci,op]);const CN=b.useCallback(Xt=>{Ra(Xt),gt.floating.refs.setReference(Xt)},[gt.floating.refs.setReference]),SN=b.useCallback(Xt=>{sp(Xt),gt.floating.refs.setFloating(Xt)},[gt.floating.refs.setFloating]),TN=b.useCallback(()=>{var Xt;(Xt=l==null?void 0:l.onExited)==null||Xt.call(l),c==null||c()},[l==null?void 0:l.onExited,c]),EN=b.useCallback(()=>{var Xt;(Xt=l==null?void 0:l.onEntered)==null||Xt.call(l),d==null||d()},[l==null?void 0:l.onEntered,d]);return m.jsxs(gX,{value:{returnFocus:Ce,disabled:he,controlled:gt.controlled,reference:CN,floating:SN,x:gt.floating.x,y:gt.floating.y,arrowX:(Vv=(Bv=(jv=gt.floating)==null?void 0:jv.middlewareData)==null?void 0:Bv.arrow)==null?void 0:Vv.x,arrowY:(Fv=(Hv=($v=gt.floating)==null?void 0:$v.middlewareData)==null?void 0:Hv.arrow)==null?void 0:Fv.y,opened:gt.opened,arrowRef:ls,transitionProps:{...l,onExited:TN,onEntered:EN},width:u,withArrow:f,arrowSize:p,arrowOffset:g,arrowRadius:y,arrowPosition:v,placement:gt.floating.placement,trapFocus:P,withinPortal:S,portalProps:T,zIndex:G,radius:X,shadow:L,closeOnEscape:E,onDismiss:$,onClose:gt.onClose,onToggle:gt.onToggle,getTargetId:()=>`${od}-target`,getDropdownId:()=>`${od}-dropdown`,withRoles:q,targetProps:At,__staticSelector:ee,classNames:w,styles:C,unstyled:x,variant:pt,keepMounted:mt,getStyles:ho,resolvedStyles:Pa,floatingStrategy:We},children:[n,Yt&&m.jsx(ai,{transition:"fade",mounted:gt.opened,duration:(l==null?void 0:l.duration)||250,exitDuration:(l==null?void 0:l.exitDuration)||250,children:Xt=>m.jsx(qc,{withinPortal:S,children:m.jsx(ac,{...Mt,...ho("overlay",{className:Mt==null?void 0:Mt.className,style:[Xt,Mt==null?void 0:Mt.style]})})})})]})}ss.Target=h1;ss.Dropdown=Nf;ss.displayName="@mantine/core/Popover";ss.extend=t=>t;var Vn={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const _R=b.forwardRef(({className:t,...e},n)=>m.jsxs(ne,{component:"span",className:uo(Vn.barsLoader,t),...e,ref:n,children:[m.jsx("span",{className:Vn.bar}),m.jsx("span",{className:Vn.bar}),m.jsx("span",{className:Vn.bar})]}));_R.displayName="@mantine/core/Bars";const PR=b.forwardRef(({className:t,...e},n)=>m.jsxs(ne,{component:"span",className:uo(Vn.dotsLoader,t),...e,ref:n,children:[m.jsx("span",{className:Vn.dot}),m.jsx("span",{className:Vn.dot}),m.jsx("span",{className:Vn.dot})]}));PR.displayName="@mantine/core/Dots";const RR=b.forwardRef(({className:t,...e},n)=>m.jsx(ne,{component:"span",className:uo(Vn.ovalLoader,t),...e,ref:n}));RR.displayName="@mantine/core/Oval";const IR={bars:_R,oval:RR,dots:PR},SX={loaders:IR,type:"oval"},TX=(t,{size:e,color:n})=>({root:{"--loader-size":Ie(e,"loader-size"),"--loader-color":n?wr(n,t):void 0}}),is=ve((t,e)=>{const n=U("Loader",SX,t),{size:r,color:o,type:s,vars:i,className:a,style:l,classNames:c,styles:d,unstyled:u,loaders:h,variant:f,children:p,...g}=n,y=be({name:"Loader",props:n,classes:Vn,className:a,style:l,classNames:c,styles:d,unstyled:u,vars:i,varsResolver:TX});return p?m.jsx(ne,{...y("root"),ref:e,...g,children:p}):m.jsx(ne,{...y("root"),ref:e,component:h[s],variant:f,size:r,...g})});is.defaultLoaders=IR;is.classes=Vn;is.displayName="@mantine/core/Loader";var xa={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const VC={orientation:"horizontal"},EX=(t,{borderWidth:e})=>({group:{"--ai-border-width":I(e)}}),f1=ve((t,e)=>{const n=U("ActionIconGroup",VC,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=U("ActionIconGroup",VC,t),p=be({name:"ActionIconGroup",props:n,classes:xa,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:EX,rootSelector:"group"});return m.jsx(ne,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});f1.classes=xa;f1.displayName="@mantine/core/ActionIconGroup";const $C={},MX=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":Ie(i,"section-height"),"--section-padding-x":Ie(i,"section-padding-x"),"--section-fz":Zt(i),"--section-radius":e===void 0?void 0:Et(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},p1=ve((t,e)=>{const n=U("ActionIconGroupSection",$C,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=U("ActionIconGroupSection",$C,t),p=be({name:"ActionIconGroupSection",props:n,classes:xa,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:MX,rootSelector:"groupSection"});return m.jsx(ne,{...p("groupSection"),ref:e,variant:c,...f})});p1.classes=xa;p1.displayName="@mantine/core/ActionIconGroupSection";const AX={},_X=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i})=>{const a=t.variantColorResolver({color:s||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ai-size":Ie(e,"ai-size"),"--ai-radius":n===void 0?void 0:Et(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},li=Vt((t,e)=>{const n=U("ActionIcon",AX,t),{className:r,unstyled:o,variant:s,classNames:i,styles:a,style:l,loading:c,loaderProps:d,size:u,color:h,radius:f,__staticSelector:p,gradient:g,vars:y,children:v,disabled:x,"data-disabled":w,autoContrast:C,mod:k,...S}=n,T=be({name:["ActionIcon",p],props:n,className:r,style:l,classes:xa,classNames:i,styles:a,unstyled:o,vars:y,varsResolver:_X});return m.jsxs(ii,{...T("root",{active:!x&&!c&&!w}),...S,unstyled:o,variant:s,size:u,disabled:x||c,ref:e,mod:[{loading:c,disabled:x||w},k],children:[m.jsx(ai,{mounted:!!c,transition:"slide-down",duration:150,children:E=>m.jsx(ne,{component:"span",...T("loader",{style:E}),"aria-hidden":!0,children:m.jsx(is,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),m.jsx(ne,{component:"span",mod:{loading:c},...T("icon"),children:v})]})});li.classes=xa;li.displayName="@mantine/core/ActionIcon";li.Group=f1;li.GroupSection=p1;const NR=b.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>m.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:m.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));NR.displayName="@mantine/core/CloseIcon";var DR={root:"m_86a44da5","root--subtle":"m_220c80f2"};const PX={variant:"subtle"},RX=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":Ie(e,"cb-size"),"--cb-radius":n===void 0?void 0:Et(n),"--cb-icon-size":I(r)}}),Df=Vt((t,e)=>{const n=U("CloseButton",PX,t),{iconSize:r,children:o,vars:s,radius:i,className:a,classNames:l,style:c,styles:d,unstyled:u,"data-disabled":h,disabled:f,variant:p,icon:g,mod:y,__staticSelector:v,...x}=n,w=be({name:v||"CloseButton",props:n,className:a,style:c,classes:DR,classNames:l,styles:d,unstyled:u,vars:s,varsResolver:RX});return m.jsxs(ii,{ref:e,...x,unstyled:u,variant:p,disabled:f,mod:[{disabled:f||h},y],...w("root",{variant:p,active:!f&&!h}),children:[g||m.jsx(NR,{}),o]})});Df.classes=DR;Df.displayName="@mantine/core/CloseButton";function IX(t){return b.Children.toArray(t).filter(Boolean)}var OR={root:"m_4081bf90"};const NX={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},DX=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:s,wrap:i},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":zc(r),"--group-align":o,"--group-justify":s,"--group-wrap":i}}),ut=ve((t,e)=>{const n=U("Group",NX,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,children:l,gap:c,align:d,justify:u,wrap:h,grow:f,preventGrowOverflow:p,vars:g,variant:y,__size:v,mod:x,...w}=n,C=IX(l),k=C.length,S=zc(c??"md"),E={childWidth:`calc(${100/k}% - (${S} - ${S} / ${k}))`},M=be({name:"Group",props:n,stylesCtx:E,className:o,style:s,classes:OR,classNames:r,styles:i,unstyled:a,vars:g,varsResolver:DX});return m.jsx(ne,{...M("root"),ref:e,variant:y,mod:[{grow:f},x],size:v,...w,children:C})});ut.classes=OR;ut.displayName="@mantine/core/Group";const[OX,LX]=t1({size:"sm"}),jX={},LR=ve((t,e)=>{const n=U("InputClearButton",jX,t),{size:r,variant:o,vars:s,classNames:i,styles:a,...l}=n,c=LX(),{resolvedClassNames:d,resolvedStyles:u}=Rf({classNames:i,styles:a,props:n});return m.jsx(Df,{variant:o||"transparent",ref:e,size:r||(c==null?void 0:c.size)||"sm",classNames:d,styles:u,__staticSelector:"InputClearButton",...l})});LR.displayName="@mantine/core/InputClearButton";const[BX,Of]=t1({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Pn={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const HC={},VX=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Zt(e)} - ${I(2)})`}}),Lf=ve((t,e)=>{const n=U("InputDescription",HC,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=U("InputDescription",HC,n),p=Of(),g=be({name:["InputWrapper",d],props:n,classes:Pn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"description",vars:l,varsResolver:VX}),y=u&&(p==null?void 0:p.getStyles)||g;return m.jsx(ne,{component:"p",ref:e,variant:h,size:c,...y("description",p!=null&&p.getStyles?{className:o,style:s}:void 0),...f})});Lf.classes=Pn;Lf.displayName="@mantine/core/InputDescription";const $X={},HX=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Zt(e)} - ${I(2)})`}}),jf=ve((t,e)=>{const n=U("InputError",$X,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=n,p=be({name:["InputWrapper",d],props:n,classes:Pn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"error",vars:l,varsResolver:HX}),g=Of(),y=u&&(g==null?void 0:g.getStyles)||p;return m.jsx(ne,{component:"p",ref:e,variant:h,size:c,...y("error",g!=null&&g.getStyles?{className:o,style:s}:void 0),...f})});jf.classes=Pn;jf.displayName="@mantine/core/InputError";const FC={labelElement:"label"},FX=(t,{size:e})=>({label:{"--input-label-size":Zt(e),"--input-asterisk-color":void 0}}),Bf=ve((t,e)=>{const n=U("InputLabel",FC,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,labelElement:c,size:d,required:u,htmlFor:h,onMouseDown:f,children:p,__staticSelector:g,variant:y,mod:v,...x}=U("InputLabel",FC,n),w=be({name:["InputWrapper",g],props:n,classes:Pn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"label",vars:l,varsResolver:FX}),C=Of(),k=(C==null?void 0:C.getStyles)||w;return m.jsxs(ne,{...k("label",C!=null&&C.getStyles?{className:o,style:s}:void 0),component:c,variant:y,size:d,ref:e,htmlFor:c==="label"?h:void 0,mod:[{required:u},v],onMouseDown:S=>{f==null||f(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...x,children:[p,u&&m.jsx("span",{...k("required"),"aria-hidden":!0,children:" *"})]})});Bf.classes=Pn;Bf.displayName="@mantine/core/InputLabel";const zC={},m1=ve((t,e)=>{const n=U("InputPlaceholder",zC,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,__staticSelector:c,variant:d,error:u,mod:h,...f}=U("InputPlaceholder",zC,n),p=be({name:["InputPlaceholder",c],props:n,classes:Pn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"placeholder"});return m.jsx(ne,{...p("placeholder"),mod:[{error:!!u},h],component:"span",variant:d,ref:e,...f})});m1.classes=Pn;m1.displayName="@mantine/core/InputPlaceholder";function zX(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),o=t.slice(0,r),s=t.slice(r+1),i=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&s.includes("description")||n&&s.includes("error"),offsetTop:i}}const UX={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},WX=(t,{size:e})=>({label:{"--input-label-size":Zt(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Zt(e)} - ${I(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Zt(e)} - ${I(2)})`}}),g1=ve((t,e)=>{const n=U("InputWrapper",UX,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,variant:d,__staticSelector:u,inputContainer:h,inputWrapperOrder:f,label:p,error:g,description:y,labelProps:v,descriptionProps:x,errorProps:w,labelElement:C,children:k,withAsterisk:S,id:T,required:E,__stylesApiProps:M,mod:P,...B}=n,$=be({name:["InputWrapper",u],props:M||n,classes:Pn,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:WX}),W={size:c,variant:d,__staticSelector:u},Y=Uc(T),G=typeof S=="boolean"?S:E,X=(w==null?void 0:w.id)||`${Y}-error`,L=(x==null?void 0:x.id)||`${Y}-description`,j=Y,V=!!g&&typeof g!="boolean",ee=!!y,q=`${V?X:""} ${ee?L:""}`,he=q.trim().length>0?q.trim():void 0,Ce=(v==null?void 0:v.id)||`${Y}-label`,pt=p&&m.jsx(Bf,{labelElement:C,id:Ce,htmlFor:j,required:G,...W,...v,children:p},"label"),mt=ee&&m.jsx(Lf,{...x,...W,size:(x==null?void 0:x.size)||W.size,id:(x==null?void 0:x.id)||L,children:y},"description"),$e=m.jsx(b.Fragment,{children:h(k)},"input"),We=V&&b.createElement(jf,{...w,...W,size:(w==null?void 0:w.size)||W.size,key:"error",id:(w==null?void 0:w.id)||X},g),Yt=f.map(Mt=>{switch(Mt){case"label":return pt;case"input":return $e;case"description":return mt;case"error":return We;default:return null}});return m.jsx(BX,{value:{getStyles:$,describedBy:he,inputId:j,labelId:Ce,...zX(f,{hasDescription:ee,hasError:V})},children:m.jsx(ne,{ref:e,variant:d,size:c,mod:[{error:!!g},P],...$("root"),...B,children:Yt})})});g1.classes=Pn;g1.displayName="@mantine/core/InputWrapper";const GX={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},qX=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Ie(e.size,"input-height"),"--input-fz":Zt(e.size),"--input-radius":e.radius===void 0?void 0:Et(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?I(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?I(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Ie(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),dn=Vt((t,e)=>{const n=U("Input",GX,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:d,size:u,wrapperProps:h,error:f,disabled:p,leftSection:g,leftSectionProps:y,leftSectionWidth:v,rightSection:x,rightSectionProps:w,rightSectionWidth:C,rightSectionPointerEvents:k,leftSectionPointerEvents:S,variant:T,vars:E,pointer:M,multiline:P,radius:B,id:$,withAria:W,withErrorStyles:Y,mod:G,inputSize:X,__clearSection:L,__clearable:j,__defaultRightSection:V,...ee}=n,{styleProps:q,rest:he}=If(ee),Ce=Of(),pt={offsetBottom:Ce==null?void 0:Ce.offsetBottom,offsetTop:Ce==null?void 0:Ce.offsetTop},mt=be({name:["Input",c],props:d||n,classes:Pn,className:o,style:s,classNames:r,styles:i,unstyled:a,stylesCtx:pt,rootSelector:"wrapper",vars:E,varsResolver:qX}),$e=W?{required:l,disabled:p,"aria-invalid":!!f,"aria-describedby":Ce==null?void 0:Ce.describedBy,id:(Ce==null?void 0:Ce.inputId)||$}:{},We=x||j&&L||V;return m.jsx(OX,{value:{size:u||"sm"},children:m.jsxs(ne,{...mt("wrapper"),...q,...h,mod:[{error:!!f&&Y,pointer:M,disabled:p,multiline:P,"data-with-right-section":!!We,"data-with-left-section":!!g},G],variant:T,size:u,children:[g&&m.jsx("div",{...y,"data-position":"left",...mt("section",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),children:g}),m.jsx(ne,{component:"input",...he,...$e,ref:e,required:l,mod:{disabled:p,error:!!f&&Y},variant:T,__size:X,...mt("input")}),We&&m.jsx("div",{...w,"data-position":"right",...mt("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:We})]})})});dn.classes=Pn;dn.Wrapper=g1;dn.Label=Bf;dn.Error=jf;dn.Description=Lf;dn.Placeholder=m1;dn.ClearButton=LR;dn.displayName="@mantine/core/Input";function KX(t,e,n){const r=U(t,e,n),{label:o,description:s,error:i,required:a,classNames:l,styles:c,className:d,unstyled:u,__staticSelector:h,__stylesApiProps:f,errorProps:p,labelProps:g,descriptionProps:y,wrapperProps:v,id:x,size:w,style:C,inputContainer:k,inputWrapperOrder:S,withAsterisk:T,variant:E,vars:M,mod:P,...B}=r,{styleProps:$,rest:W}=If(B),Y={label:o,description:s,error:i,required:a,classNames:l,className:d,__staticSelector:h,__stylesApiProps:f||r,errorProps:p,labelProps:g,descriptionProps:y,unstyled:u,styles:c,size:w,style:C,inputContainer:k,inputWrapperOrder:S,withAsterisk:T,variant:E,id:x,mod:P,...v};return{...W,classNames:l,styles:c,unstyled:u,wrapperProps:{...Y,...$},inputProps:{required:a,classNames:l,styles:c,unstyled:u,size:w,__staticSelector:h,__stylesApiProps:f||r,error:i,variant:E,id:x}}}const ZX={__staticSelector:"InputBase",withAria:!0},ka=Vt((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=KX("InputBase",ZX,t);return m.jsx(dn.Wrapper,{...r,children:m.jsx(dn,{...n,...o,ref:e})})});ka.classes={...dn.classes,...dn.Wrapper.classes};ka.displayName="@mantine/core/InputBase";const JX={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var jR={root:"m_8bffd616"};const YX={},y1=Vt((t,e)=>{const n=U("Flex",YX,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:g,...y}=n,v=be({name:"Flex",classes:jR,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l}),x=un(),w=fR(),C=hR({styleProps:{gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:g},theme:x,data:JX});return m.jsxs(m.Fragment,{children:[C.hasResponsiveStyles&&m.jsx(uR,{selector:`.${w}`,styles:C.styles,media:C.media}),m.jsx(ne,{ref:e,...v("root",{className:w,style:Mf(C.inlineStyles)}),...y})]})});y1.classes=jR;y1.displayName="@mantine/core/Flex";var BR={root:"m_b6d8b162"};function XX(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const QX={inherit:!1},eQ=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:s})=>({root:{"--text-fz":Zt(o),"--text-lh":AJ(o),"--text-gradient":e==="gradient"?ky(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?wr(s,t):void 0}}),xr=Vt((t,e)=>{const n=U("Text",QX,t),{lineClamp:r,truncate:o,inline:s,inherit:i,gradient:a,span:l,__staticSelector:c,vars:d,className:u,style:h,classNames:f,styles:p,unstyled:g,variant:y,mod:v,size:x,...w}=n,C=be({name:["Text",c],props:n,classes:BR,className:u,style:h,classNames:f,styles:p,unstyled:g,vars:d,varsResolver:eQ});return m.jsx(ne,{...C("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:y,mod:[{"data-truncate":XX(o),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":i},v],size:x,...w})});xr.classes=BR;xr.displayName="@mantine/core/Text";function b1({size:t,style:e,...n}){const r=t!==void 0?{width:I(t),height:I(t),...e}:e;return m.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:m.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const VR=b.createContext(null),tQ=VR.Provider;function nQ(){return{withinGroup:!!b.useContext(VR)}}var Vf={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const rQ={},oQ=(t,{spacing:e})=>({group:{"--ag-spacing":zc(e)}}),v1=ve((t,e)=>{const n=U("AvatarGroup",rQ,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,spacing:c,...d}=n,u=be({name:"AvatarGroup",classes:Vf,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:oQ,rootSelector:"group"});return m.jsx(tQ,{value:!0,children:m.jsx(ne,{ref:e,...u("group"),...d})})});v1.classes=Vf;v1.displayName="@mantine/core/AvatarGroup";function sQ(t){return m.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function iQ(t){let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}const aQ=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function lQ(t,e=aQ){const n=iQ(t),r=Math.abs(n)%e.length;return e[r]}function cQ(t,e=2){const n=t.split(" ");return n.length===1?t.slice(0,e).toUpperCase():n.map(r=>r[0]).slice(0,e).join("").toUpperCase()}const dQ={},uQ=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i,name:a,allowedInitialsColors:l})=>{const c=s==="initials"&&typeof a=="string"?lQ(a,l):s,d=t.variantColorResolver({color:c||"gray",theme:t,gradient:o,variant:r||"light",autoContrast:i});return{root:{"--avatar-size":Ie(e,"avatar-size"),"--avatar-radius":n===void 0?void 0:Et(n),"--avatar-bg":c||r?d.background:void 0,"--avatar-color":c||r?d.color:void 0,"--avatar-bd":c||r?d.border:void 0}}},$f=Vt((t,e)=>{const n=U("Avatar",dQ,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,src:c,alt:d,radius:u,color:h,gradient:f,imageProps:p,children:g,autoContrast:y,mod:v,name:x,allowedInitialsColors:w,...C}=n,k=nQ(),[S,T]=b.useState(!c),E=be({name:"Avatar",props:n,classes:Vf,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:uQ});return b.useEffect(()=>T(!c),[c]),m.jsx(ne,{...E("root"),mod:[{"within-group":k.withinGroup},v],ref:e,...C,children:S?m.jsx("span",{...E("placeholder"),title:d,children:g||typeof x=="string"&&cQ(x)||m.jsx(sQ,{})}):m.jsx("img",{...p,...E("image"),src:c,alt:d,onError:M=>{var P;T(!0),(P=p==null?void 0:p.onError)==null||P.call(p,M)}})})});$f.classes=Vf;$f.displayName="@mantine/core/Avatar";$f.Group=v1;var $R={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const hQ={},fQ=(t,{radius:e,color:n,gradient:r,variant:o,size:s,autoContrast:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{root:{"--badge-height":Ie(s,"badge-height"),"--badge-padding-x":Ie(s,"badge-padding-x"),"--badge-fz":Ie(s,"badge-fz"),"--badge-radius":e===void 0?void 0:Et(e),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?wr(n,t):void 0}}},w1=Vt((t,e)=>{const n=U("Badge",hQ,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,radius:c,color:d,gradient:u,leftSection:h,rightSection:f,children:p,variant:g,fullWidth:y,autoContrast:v,circle:x,mod:w,...C}=n,k=be({name:"Badge",props:n,classes:$R,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:fQ});return m.jsxs(ne,{variant:g,mod:[{block:y,circle:x,"with-right-section":!!f,"with-left-section":!!h},w],...k("root",{variant:g}),ref:e,...C,children:[h&&m.jsx("span",{...k("section"),"data-position":"left",children:h}),m.jsx("span",{...k("label"),children:p}),f&&m.jsx("span",{...k("section"),"data-position":"right",children:f})]})});w1.classes=$R;w1.displayName="@mantine/core/Badge";var Ca={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const UC={orientation:"horizontal"},pQ=(t,{borderWidth:e})=>({group:{"--button-border-width":I(e)}}),x1=ve((t,e)=>{const n=U("ButtonGroup",UC,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=U("ButtonGroup",UC,t),p=be({name:"ButtonGroup",props:n,classes:Ca,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:pQ,rootSelector:"group"});return m.jsx(ne,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});x1.classes=Ca;x1.displayName="@mantine/core/ButtonGroup";const WC={},mQ=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":Ie(i,"section-height"),"--section-padding-x":Ie(i,"section-padding-x"),"--section-fz":i!=null&&i.includes("compact")?Zt(i.replace("compact-","")):Zt(i),"--section-radius":e===void 0?void 0:Et(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},k1=ve((t,e)=>{const n=U("ButtonGroupSection",WC,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=U("ButtonGroupSection",WC,t),p=be({name:"ButtonGroupSection",props:n,classes:Ca,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:mQ,rootSelector:"groupSection"});return m.jsx(ne,{...p("groupSection"),ref:e,variant:c,...f})});k1.classes=Ca;k1.displayName="@mantine/core/ButtonGroupSection";const gQ={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${I(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},yQ={},bQ=(t,{radius:e,color:n,gradient:r,variant:o,size:s,justify:i,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":i,"--button-height":Ie(s,"button-height"),"--button-padding-x":Ie(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Zt(s.replace("compact-","")):Zt(s),"--button-radius":e===void 0?void 0:Et(e),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},Qn=Vt((t,e)=>{const n=U("Button",yQ,t),{style:r,vars:o,className:s,color:i,disabled:a,children:l,leftSection:c,rightSection:d,fullWidth:u,variant:h,radius:f,loading:p,loaderProps:g,gradient:y,classNames:v,styles:x,unstyled:w,"data-disabled":C,autoContrast:k,mod:S,...T}=n,E=be({name:"Button",props:n,classes:Ca,className:s,style:r,classNames:v,styles:x,unstyled:w,vars:o,varsResolver:bQ}),M=!!c,P=!!d;return m.jsxs(ii,{ref:e,...E("root",{active:!a&&!p&&!C}),unstyled:w,variant:h,disabled:a||p,mod:[{disabled:a||C,loading:p,block:u,"with-left-section":M,"with-right-section":P},S],...T,children:[m.jsx(ai,{mounted:!!p,transition:gQ,duration:150,children:B=>m.jsx(ne,{component:"span",...E("loader",{style:B}),"aria-hidden":!0,children:m.jsx(is,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),m.jsxs("span",{...E("inner"),children:[c&&m.jsx(ne,{component:"span",...E("section"),mod:{position:"left"},children:c}),m.jsx(ne,{component:"span",mod:{loading:p},...E("label"),children:l}),d&&m.jsx(ne,{component:"span",...E("section"),mod:{position:"right"},children:d})]})]})});Qn.classes=Ca;Qn.displayName="@mantine/core/Button";Qn.Group=x1;Qn.GroupSection=k1;const[vQ,wQ]=Af("Card component was not found in tree");var C1={root:"m_e615b15f",section:"m_599a2148"};const xQ={},Hf=Vt((t,e)=>{const n=U("CardSection",xQ,t),{classNames:r,className:o,style:s,styles:i,vars:a,withBorder:l,inheritPadding:c,mod:d,...u}=n,h=wQ();return m.jsx(ne,{ref:e,mod:[{"with-border":l,"inherit-padding":c},d],...h.getStyles("section",{className:o,style:s,styles:i,classNames:r}),...u})});Hf.classes=C1;Hf.displayName="@mantine/core/CardSection";const kQ={},CQ=(t,{padding:e})=>({root:{"--card-padding":zc(e)}}),Kc=Vt((t,e)=>{const n=U("Card",kQ,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,children:c,padding:d,...u}=n,h=be({name:"Card",props:n,classes:C1,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:CQ}),f=b.Children.toArray(c),p=f.map((g,y)=>typeof g=="object"&&g&&"type"in g&&g.type===Hf?b.cloneElement(g,{"data-first-section":y===0||void 0,"data-last-section":y===f.length-1||void 0}):g);return m.jsx(vQ,{value:{getStyles:h},children:m.jsx(c1,{ref:e,unstyled:a,...h("root"),...u,children:p})})});Kc.classes=C1;Kc.displayName="@mantine/core/Card";Kc.Section=Hf;const[SQ,TQ]=t1(),EQ={};function HR(t){const{value:e,defaultValue:n,onChange:r,multiple:o,children:s}=U("ChipGroup",EQ,t),[i,a]=va({value:e,defaultValue:n,finalValue:o?[]:null,onChange:r}),l=d=>Array.isArray(i)?i.includes(d):d===i,c=d=>{const u=d.currentTarget.value;Array.isArray(i)?a(i.includes(u)?i.filter(h=>h!==u):[...i,u]):a(u)};return m.jsx(SQ,{value:{isChipSelected:l,onChange:c,multiple:o},children:s})}HR.displayName="@mantine/core/ChipGroup";var FR={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const MQ={type:"checkbox"},AQ=(t,{size:e,radius:n,variant:r,color:o,autoContrast:s})=>{const i=t.variantColorResolver({color:o||t.primaryColor,theme:t,variant:r||"filled",autoContrast:s});return{root:{"--chip-fz":Zt(e),"--chip-size":Ie(e,"chip-size"),"--chip-radius":n===void 0?void 0:Et(n),"--chip-checked-padding":Ie(e,"chip-checked-padding"),"--chip-padding":Ie(e,"chip-padding"),"--chip-icon-size":Ie(e,"chip-icon-size"),"--chip-bg":o||r?i.background:void 0,"--chip-hover":o||r?i.hover:void 0,"--chip-color":o||r?i.color:void 0,"--chip-bd":o||r?i.border:void 0,"--chip-spacing":Ie(e,"chip-spacing")}}},Ff=ve((t,e)=>{const n=U("Chip",MQ,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,id:c,checked:d,defaultChecked:u,onChange:h,value:f,wrapperProps:p,type:g,disabled:y,children:v,size:x,variant:w,icon:C,rootRef:k,autoContrast:S,mod:T,...E}=n,M=be({name:"Chip",classes:FR,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:AQ}),P=TQ(),B=Uc(c),{styleProps:$,rest:W}=If(E),[Y,G]=va({value:d,defaultValue:u,finalValue:!1,onChange:h}),X=P?{checked:P.isChipSelected(f),onChange:j=>{P.onChange(j),h==null||h(j.currentTarget.checked)},type:P.multiple?"checkbox":"radio"}:{},L=X.checked||Y;return m.jsxs(ne,{size:x,variant:w,ref:k,mod:T,...M("root"),...$,...p,children:[m.jsx("input",{type:g,...M("input"),checked:L,onChange:j=>G(j.currentTarget.checked),id:B,disabled:y,ref:e,value:f,...X,...W}),m.jsxs("label",{htmlFor:B,"data-checked":L||void 0,"data-disabled":y||void 0,...M("label",{variant:w||"filled"}),children:[L&&m.jsx("span",{...M("iconWrapper"),children:C||m.jsx(b1,{...M("checkIcon")})}),m.jsx("span",{children:v})]})]})});Ff.classes=FR;Ff.displayName="@mantine/core/Chip";Ff.Group=HR;var zR={root:"m_3eebeb36",label:"m_9e365f20"};const _Q={orientation:"horizontal"},PQ=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?wr(e,t):void 0,"--divider-border-style":n,"--divider-size":Ie(r,"divider-size")}}),S1=ve((t,e)=>{const n=U("Divider",_Q,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,color:c,orientation:d,label:u,labelPosition:h,mod:f,...p}=n,g=be({name:"Divider",classes:zR,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:PQ});return m.jsx(ne,{ref:e,mod:[{orientation:d,"with-label":!!u},f],...g("root"),...p,role:"separator",children:u&&m.jsx(ne,{component:"span",mod:{position:h},...g("label"),children:u})})});S1.classes=zR;S1.displayName="@mantine/core/Divider";const RQ={multiple:!1},UR=b.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:s,name:i,form:a,resetRef:l,disabled:c,capture:d,inputProps:u,...h}=U("FileButton",RQ,t),f=b.useRef(null),p=()=>{var v;!c&&((v=f.current)==null||v.click())},g=v=>{n(o?Array.from(v.currentTarget.files):v.currentTarget.files[0]||null)};return kh(l,()=>{f.current&&(f.current.value="")}),m.jsxs(m.Fragment,{children:[r({onClick:p,...h}),m.jsx("input",{style:{display:"none"},type:"file",accept:s,multiple:o,onChange:g,ref:co(e,f),name:i,form:a,capture:d,...u})]})});UR.displayName="@mantine/core/FileButton";const IQ=({value:t})=>m.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t==null?void 0:t.name}),NQ={valueComponent:IQ},T1=ve((t,e)=>{const n=U("FileInput",NQ,t),{unstyled:r,vars:o,onChange:s,value:i,defaultValue:a,multiple:l,accept:c,name:d,form:u,valueComponent:h,clearable:f,clearButtonProps:p,readOnly:g,capture:y,fileInputProps:v,rightSection:x,size:w,placeholder:C,component:k,resetRef:S,classNames:T,styles:E,...M}=n,P=b.useRef(null),{resolvedClassNames:B,resolvedStyles:$}=Rf({classNames:T,styles:E,props:n}),[W,Y]=va({value:i,defaultValue:a,onChange:s,finalValue:l?[]:null}),G=Array.isArray(W)?W.length!==0:W!==null,X=x||(f&&G&&!g?m.jsx(Df,{...p,variant:"subtle",onClick:()=>Y(l?[]:null),size:w,unstyled:r}):null);b.useEffect(()=>{var j;(Array.isArray(W)&&W.length===0||W===null)&&((j=P.current)==null||j.call(P))},[W]);const L=h;return m.jsx(UR,{onChange:Y,multiple:l,accept:c,name:d,form:u,resetRef:co(P,S),disabled:g,capture:y,inputProps:v,children:j=>m.jsx(ka,{component:k||"button",ref:e,rightSection:X,...j,...M,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:w,classNames:T,styles:E,children:G?m.jsx(L,{value:W}):m.jsx(dn.Placeholder,{__staticSelector:"FileInput",classNames:B,styles:$,children:C})})})});T1.classes=ka.classes;T1.displayName="@mantine/core/FileInput";const DQ=T1;function OQ({open:t,close:e,openDelay:n,closeDelay:r}){const o=b.useRef(-1),s=b.useRef(-1),i=()=>{window.clearTimeout(o.current),window.clearTimeout(s.current)},a=()=>{i(),n===0||n===void 0?t():o.current=window.setTimeout(t,n)},l=()=>{i(),r===0||r===void 0?e():s.current=window.setTimeout(e,r)};return b.useEffect(()=>i,[]),{openDropdown:a,closeDropdown:l}}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(null,arguments)}function LQ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jQ=b.useLayoutEffect,BQ=function(e){var n=b.useRef(e);return jQ(function(){n.current=e}),n},GC=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},VQ=function(e,n){var r=b.useRef();return b.useCallback(function(o){e.current=o,r.current&&GC(r.current,null),r.current=n,n&&GC(n,o)},[n])},qC={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},$Q=function(e){Object.keys(qC).forEach(function(n){e.style.setProperty(n,qC[n],"important")})},KC=$Q,_t=null,ZC=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function HQ(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),_t||(_t=document.createElement("textarea"),_t.setAttribute("tabindex","-1"),_t.setAttribute("aria-hidden","true"),KC(_t)),_t.parentNode===null&&document.body.appendChild(_t);var o=t.paddingSize,s=t.borderSize,i=t.sizingStyle,a=i.boxSizing;Object.keys(i).forEach(function(h){var f=h;_t.style[f]=i[f]}),KC(_t),_t.value=e;var l=ZC(_t,t);_t.value=e,l=ZC(_t,t),_t.value="x";var c=_t.scrollHeight-o,d=c*n;a==="border-box"&&(d=d+o+s),l=Math.max(d,l);var u=c*r;return a==="border-box"&&(u=u+o+s),l=Math.min(u,l),[l,c]}var JC=function(){},FQ=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},zQ=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],UQ=!!document.documentElement.currentStyle,WQ=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=FQ(zQ,n),o=r.boxSizing;if(o==="")return null;UQ&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:i}},GQ=WQ;function E1(t,e,n){var r=BQ(n);b.useLayoutEffect(function(){var o=function(i){return r.current(i)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var qQ=function(e,n){E1(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},KQ=function(e){E1(window,"resize",e)},ZQ=function(e){E1(document.fonts,"loadingdone",e)},JQ=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],YQ=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,s=e.minRows,i=e.onChange,a=i===void 0?JC:i,l=e.onHeightChange,c=l===void 0?JC:l,d=LQ(e,JQ),u=d.value!==void 0,h=b.useRef(null),f=VQ(h,n),p=b.useRef(0),g=b.useRef(),y=function(){var w=h.current,C=r&&g.current?g.current:GQ(w);if(C){g.current=C;var k=HQ(C,w.value||w.placeholder||"x",s,o),S=k[0],T=k[1];p.current!==S&&(p.current=S,w.style.setProperty("height",S+"px","important"),c(S,{rowHeight:T}))}},v=function(w){u||y(),a(w)};return b.useLayoutEffect(y),qQ(h,function(){if(!u){var x=h.current.value;requestAnimationFrame(function(){var w=h.current;w&&x!==w.value&&y()})}}),KQ(y),ZQ(y),b.createElement("textarea",Ty({},d,{onChange:v,ref:f}))},XQ=b.forwardRef(YQ),WR={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const YC={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Fc("overlay")},QQ=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),M1=ve((t,e)=>{const n=U("LoadingOverlay",YC,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,transitionProps:c,loaderProps:d,overlayProps:u,visible:h,zIndex:f,...p}=n,g=un(),y=be({name:"LoadingOverlay",classes:WR,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:QQ}),v={...YC.overlayProps,...u};return m.jsx(ai,{transition:"fade",...c,mounted:!!h,children:x=>m.jsxs(ne,{...y("root",{style:x}),ref:e,...p,children:[m.jsx(is,{...y("loader"),unstyled:a,...d}),m.jsx(ac,{...v,...y("overlay"),darkHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||g.white}),m.jsx(ac,{...v,...y("overlay"),lightHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||g.colors.dark[5]})]})})});M1.classes=WR;M1.displayName="@mantine/core/LoadingOverlay";const[eee,Zc]=Af("Menu component was not found in the tree");var Sa={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const tee={},A1=ve((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=U("MenuDivider",tee,t),l=Zc();return m.jsx(ne,{ref:e,...l.getStyles("divider",{className:r,style:o,styles:s,classNames:n}),...a})});A1.classes=Sa;A1.displayName="@mantine/core/MenuDivider";const nee={},_1=ve((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:d,...u}=U("MenuDropdown",nee,t),h=b.useRef(null),f=Zc(),p=lr(c,v=>{var x,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(x=h.current)==null?void 0:x.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),g=lr(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),y=lr(l,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return m.jsxs(ss.Dropdown,{...u,onMouseEnter:g,onMouseLeave:y,role:"menu","aria-orientation":"vertical",ref:co(e,h),...f.getStyles("dropdown",{className:r,style:o,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[f.withInitialFocusPlaceholder&&m.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),d]})});_1.classes=Sa;_1.displayName="@mantine/core/MenuDropdown";const ree={},P1=Vt((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,color:a,closeMenuOnClick:l,leftSection:c,rightSection:d,children:u,disabled:h,"data-disabled":f,...p}=U("MenuItem",ree,t),g=Zc(),y=un(),{dir:v}=Gc(),x=b.useRef(null),w=g.getItemIndex(x.current),C=p,k=lr(C.onMouseLeave,()=>g.setHovered(-1)),S=lr(C.onMouseEnter,()=>g.setHovered(g.getItemIndex(x.current))),T=lr(C.onClick,()=>{f||(typeof l=="boolean"?l&&g.closeDropdownImmediately():g.closeOnItemClick&&g.closeDropdownImmediately())}),E=lr(C.onFocus,()=>g.setHovered(g.getItemIndex(x.current))),M=a?y.variantColorResolver({color:a,theme:y,variant:"light"}):void 0,P=a?wa({color:a,theme:y}):null;return m.jsxs(ii,{...p,unstyled:g.unstyled,tabIndex:g.menuItemTabIndex,onFocus:E,...g.getStyles("item",{className:r,style:o,styles:s,classNames:n}),ref:co(x,e),role:"menuitem",disabled:h,"data-menu-item":!0,"data-disabled":h||f||void 0,"data-hovered":g.hovered===w?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:S,onMouseLeave:k,onClick:T,onKeyDown:JP({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:g.loop,dir:v,orientation:"vertical",onKeyDown:C.onKeyDown}),__vars:{"--menu-item-color":P!=null&&P.isThemeColor&&(P==null?void 0:P.shade)===void 0?`var(--mantine-color-${P.color}-6)`:M==null?void 0:M.color,"--menu-item-hover":M==null?void 0:M.hover},children:[c&&m.jsx("div",{...g.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:c}),u&&m.jsx("div",{...g.getStyles("itemLabel",{styles:s,classNames:n}),children:u}),d&&m.jsx("div",{...g.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:d})]})});P1.classes=Sa;P1.displayName="@mantine/core/MenuItem";const oee={},R1=ve((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=U("MenuLabel",oee,t),l=Zc();return m.jsx(ne,{ref:e,...l.getStyles("label",{className:r,style:o,styles:s,classNames:n}),...a})});R1.classes=Sa;R1.displayName="@mantine/core/MenuLabel";const see={refProp:"ref"},GR=b.forwardRef((t,e)=>{const{children:n,refProp:r,...o}=U("MenuTarget",see,t);if(!Hc(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=Zc(),i=n.props,a=lr(i.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),l=lr(i.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),c=lr(i.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return m.jsx(ss.Target,{refProp:r,popupType:"menu",ref:e,...o,children:b.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:c,"data-expanded":s.opened?!0:void 0})})});GR.displayName="@mantine/core/MenuTarget";const iee={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ue(t){const e=U("Menu",iee,t),{children:n,onOpen:r,onClose:o,opened:s,defaultOpened:i,trapFocus:a,onChange:l,closeOnItemClick:c,loop:d,closeOnEscape:u,trigger:h,openDelay:f,closeDelay:p,classNames:g,styles:y,unstyled:v,variant:x,vars:w,menuItemTabIndex:C,keepMounted:k,withInitialFocusPlaceholder:S,...T}=e,E=be({name:"Menu",classes:Sa,props:e,classNames:g,styles:y,unstyled:v}),[M,{setHovered:P,resetHovered:B}]=PJ(),[$,W]=va({value:s,defaultValue:i,finalValue:!1,onChange:l}),[Y,G]=b.useState(!1),X=()=>{W(!1),G(!1),$&&(o==null||o())},L=()=>{W(!0),!$&&(r==null||r())},j=()=>{$?X():L()},{openDropdown:V,closeDropdown:ee}=OQ({open:L,close:X,closeDelay:p,openDelay:f}),q=pt=>_J("[data-menu-item]","[data-menu-dropdown]",pt),{resolvedClassNames:he,resolvedStyles:Ce}=Rf({classNames:g,styles:y,props:e});return qo(()=>{B()},[$]),m.jsx(eee,{value:{getStyles:E,opened:$,toggleDropdown:j,getItemIndex:q,hovered:M,setHovered:P,openedViaClick:Y,setOpenedViaClick:G,closeOnItemClick:c,closeDropdown:h==="click"?X:ee,openDropdown:h==="click"?L:V,closeDropdownImmediately:X,loop:d,trigger:h,unstyled:v,menuItemTabIndex:C,withInitialFocusPlaceholder:S},children:m.jsx(ss,{...T,opened:$,onChange:j,defaultOpened:i,trapFocus:k?!1:a,closeOnEscape:u,__staticSelector:"Menu",classNames:he,styles:Ce,unstyled:v,variant:x,keepMounted:k,children:n})})}Ue.extend=t=>t;Ue.withProps=nX(Ue);Ue.classes=Sa;Ue.displayName="@mantine/core/Menu";Ue.Item=P1;Ue.Label=R1;Ue.Dropdown=_1;Ue.Target=GR;Ue.Divider=A1;const aee={duration:100,transition:"fade"};function lee(t,e){return{...aee,...e,...t}}function cee({offset:t,position:e,defaultOpened:n}){const[r,o]=b.useState(n),s=b.useRef(null),{x:i,y:a,elements:l,refs:c,update:d,placement:u}=ba({placement:e,middleware:[ni({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=u.includes("right")?t:e.includes("left")?t*-1:0,f=u.includes("bottom")?t:e.includes("top")?t*-1:0,p=b.useCallback(({clientX:g,clientY:y})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:g,y,left:g+h,top:y+f,right:g,bottom:y}}})},[l.reference]);return b.useEffect(()=>{if(c.floating.current){const g=s.current;g.addEventListener("mousemove",p);const y=$d(c.floating.current);return y.forEach(v=>{v.addEventListener("scroll",d)}),()=>{g.removeEventListener("mousemove",p),y.forEach(v=>{v.removeEventListener("scroll",d)})}}},[l.reference,c.floating.current,d,p,r]),{handleMouseMove:p,x:i,y:a,opened:r,setOpened:o,boundaryRef:s,floating:c.setFloating}}var zf={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const dee={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Fc("popover")},uee=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Et(e),"--tooltip-bg":n?wr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),I1=ve((t,e)=>{const n=U("TooltipFloating",dee,t),{children:r,refProp:o,withinPortal:s,style:i,className:a,classNames:l,styles:c,unstyled:d,radius:u,color:h,label:f,offset:p,position:g,multiline:y,zIndex:v,disabled:x,defaultOpened:w,variant:C,vars:k,portalProps:S,...T}=n,E=un(),M=be({name:"TooltipFloating",props:n,classes:zf,className:a,style:i,classNames:l,styles:c,unstyled:d,rootSelector:"tooltip",vars:k,varsResolver:uee}),{handleMouseMove:P,x:B,y:$,opened:W,boundaryRef:Y,floating:G,setOpened:X}=cee({offset:p,position:g,defaultOpened:w});if(!Hc(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=co(Y,n1(r),e),j=r.props,V=q=>{var he;(he=j.onMouseEnter)==null||he.call(j,q),P(q),X(!0)},ee=q=>{var he;(he=j.onMouseLeave)==null||he.call(j,q),X(!1)};return m.jsxs(m.Fragment,{children:[m.jsx(qc,{...S,withinPortal:s,children:m.jsx(ne,{...T,...M("tooltip",{style:{...pR(i,E),zIndex:v,display:!x&&W?"block":"none",top:($&&Math.round($))??"",left:(B&&Math.round(B))??""}}),variant:C,ref:G,mod:{multiline:y},children:f})}),b.cloneElement(r,{...j,[o]:L,onMouseEnter:V,onMouseLeave:ee})]})});I1.classes=zf;I1.displayName="@mantine/core/TooltipFloating";const qR=b.createContext(!1),hee=qR.Provider,fee=()=>b.useContext(qR),pee={openDelay:0,closeDelay:0};function N1(t){const{openDelay:e,closeDelay:n,children:r}=U("TooltipGroup",pee,t);return m.jsx(hee,{value:!0,children:m.jsx(nq,{delay:{open:e,close:n},children:r})})}N1.displayName="@mantine/core/TooltipGroup";N1.extend=t=>t;function mee(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function gee(t){const e=mee(t.middlewares),n=[Cr(t.offset)];return e.shift&&n.push(ni(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?zn():zn(e.flip)),n.push(z2({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?il():il(e.inline)):t.inline&&n.push(il()),n}function yee(t){var S,T,E;const[e,n]=b.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,s=fee(),i=Uc(),a=b.useCallback(M=>{n(M),M&&x(i)},[i]),{x:l,y:c,context:d,refs:u,update:h,placement:f,middlewareData:{arrow:{x:p,y:g}={}}}=ba({strategy:t.strategy,placement:t.position,open:o,onOpenChange:a,middleware:gee(t)}),{delay:y,currentId:v,setCurrentId:x}=rq(d,{id:i}),{getReferenceProps:w,getFloatingProps:C}=pP([eq(d,{enabled:(S=t.events)==null?void 0:S.hover,delay:s?y:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((T=t.events)!=null&&T.touch)}),mq(d,{enabled:(E=t.events)==null?void 0:E.focus,visibleOnly:!0}),yq(d,{role:"tooltip"}),fP(d,{enabled:typeof t.opened>"u"})]);AR({opened:o,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:u,update:h}}),qo(()=>{var M;(M=t.onPositionChange)==null||M.call(t,f)},[f]);const k=o&&v&&v!==i;return{x:l,y:c,arrowX:p,arrowY:g,reference:u.setReference,floating:u.setFloating,getFloatingProps:C,getReferenceProps:w,isGroupPhase:k,opened:o,placement:f}}const XC={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Fc("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},bee=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Et(e),"--tooltip-bg":n?wr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Ta=ve((t,e)=>{const n=U("Tooltip",XC,t),{children:r,position:o,refProp:s,label:i,openDelay:a,closeDelay:l,onPositionChange:c,opened:d,defaultOpened:u,withinPortal:h,radius:f,color:p,classNames:g,styles:y,unstyled:v,style:x,className:w,withArrow:C,arrowSize:k,arrowOffset:S,arrowRadius:T,arrowPosition:E,offset:M,transitionProps:P,multiline:B,events:$,zIndex:W,disabled:Y,positionDependencies:G,onClick:X,onMouseEnter:L,onMouseLeave:j,inline:V,variant:ee,keepMounted:q,vars:he,portalProps:Ce,mod:pt,floatingStrategy:mt,middlewares:$e,...We}=U("Tooltip",XC,n),{dir:Yt}=Gc(),Mt=b.useRef(null),At=yee({position:kR(Yt,o),closeDelay:l,openDelay:a,onPositionChange:c,opened:d,defaultOpened:u,events:$,arrowRef:Mt,arrowOffset:S,offset:typeof M=="number"?M+(C?k/2:0):M,positionDependencies:[...G,r],inline:V,strategy:mt,middlewares:$e}),ho=be({name:"Tooltip",props:n,classes:zf,className:w,style:x,classNames:g,styles:y,unstyled:v,rootSelector:"tooltip",vars:he,varsResolver:bee});if(!Hc(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Pa=co(At.reference,n1(r),e),ls=lee(P,{duration:100,transition:"fade"}),ci=r.props;return m.jsxs(m.Fragment,{children:[m.jsx(qc,{...Ce,withinPortal:h,children:m.jsx(ai,{...ls,keepMounted:q,mounted:!Y&&!!At.opened,duration:At.isGroupPhase?10:ls.duration,children:Ra=>m.jsxs(ne,{...We,"data-fixed":mt==="fixed"||void 0,variant:ee,mod:[{multiline:B},pt],...At.getFloatingProps({ref:At.floating,className:ho("tooltip").className,style:{...ho("tooltip").style,...Ra,zIndex:W,top:At.y??0,left:At.x??0}}),children:[i,m.jsx(d1,{ref:Mt,arrowX:At.arrowX,arrowY:At.arrowY,visible:C,position:At.placement,arrowSize:k,arrowOffset:S,arrowRadius:T,arrowPosition:E,...ho("arrow")})]})})}),b.cloneElement(r,At.getReferenceProps({onClick:X,onMouseEnter:L,onMouseLeave:j,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:uo(w,ci.className),...ci,[s]:Pa}))]})});Ta.classes=zf;Ta.displayName="@mantine/core/Tooltip";Ta.Floating=I1;Ta.Group=N1;var KR={root:"m_18320242","skeleton-fade":"m_299c329c"};const vee={visible:!0,animate:!0},wee=(t,{width:e,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":I(n),"--skeleton-width":I(o?n:e),"--skeleton-radius":o?"1000px":r===void 0?void 0:Et(r)}}),Sh=ve((t,e)=>{const n=U("Skeleton",vee,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,width:c,height:d,circle:u,visible:h,radius:f,animate:p,mod:g,...y}=n,v=be({name:"Skeleton",classes:KR,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:wee});return m.jsx(ne,{ref:e,...v("root"),mod:[{visible:h,animate:p},g],...y})});Sh.classes=KR;Sh.displayName="@mantine/core/Skeleton";var ZR={root:"m_6d731127"};const xee={gap:"md",align:"stretch",justify:"flex-start"},kee=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":zc(e),"--stack-align":n,"--stack-justify":r}}),Jc=ve((t,e)=>{const n=U("Stack",xee,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,align:c,justify:d,gap:u,variant:h,...f}=n,p=be({name:"Stack",props:n,classes:ZR,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:kee});return m.jsx(ne,{ref:e,...p("root"),variant:h,...f})});Jc.classes=ZR;Jc.displayName="@mantine/core/Stack";const[Cee,D1]=Af("Tabs component was not found in the tree");var Yc={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const See={},O1=ve((t,e)=>{const n=U("TabsList",See,t),{children:r,className:o,grow:s,justify:i,classNames:a,styles:l,style:c,mod:d,...u}=n,h=D1();return m.jsx(ne,{...u,...h.getStyles("list",{className:o,style:c,classNames:a,styles:l,props:n,variant:h.variant}),ref:e,role:"tablist",variant:h.variant,mod:[{grow:s,orientation:h.orientation,placement:h.orientation==="vertical"&&h.placement,inverted:h.inverted},d],"aria-orientation":h.orientation,__vars:{"--tabs-justify":i},children:r})});O1.classes=Yc;O1.displayName="@mantine/core/TabsList";const Tee={},L1=ve((t,e)=>{const n=U("TabsPanel",Tee,t),{children:r,className:o,value:s,classNames:i,styles:a,style:l,mod:c,keepMounted:d,...u}=n,h=D1(),f=h.value===s,p=h.keepMounted||d||f?r:null;return m.jsx(ne,{...u,...h.getStyles("panel",{className:o,classNames:i,styles:a,style:[l,f?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:h.orientation},c],role:"tabpanel",id:h.getPanelId(s),"aria-labelledby":h.getTabId(s),children:p})});L1.classes=Yc;L1.displayName="@mantine/core/TabsPanel";const Eee={},j1=ve((t,e)=>{const n=U("TabsTab",Eee,t),{className:r,children:o,rightSection:s,leftSection:i,value:a,onClick:l,onKeyDown:c,disabled:d,color:u,style:h,classNames:f,styles:p,vars:g,mod:y,tabIndex:v,...x}=n,w=un(),{dir:C}=Gc(),k=D1(),S=a===k.value,T=M=>{k.onChange(k.allowTabDeactivation&&a===k.value?null:a),l==null||l(M)},E={classNames:f,styles:p,props:n};return m.jsxs(ii,{...x,...k.getStyles("tab",{className:r,style:h,variant:k.variant,...E}),disabled:d,unstyled:k.unstyled,variant:k.variant,mod:[{active:S,disabled:d,orientation:k.orientation,inverted:k.inverted,placement:k.orientation==="vertical"&&k.placement},y],ref:e,role:"tab",id:k.getTabId(a),"aria-selected":S,tabIndex:v!==void 0?v:S||k.value===null?0:-1,"aria-controls":k.getPanelId(a),onClick:T,__vars:{"--tabs-color":u?wr(u,w):void 0},onKeyDown:JP({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:k.activateTabWithKeyboard,loop:k.loop,orientation:k.orientation||"horizontal",dir:C,onKeyDown:c}),children:[i&&m.jsx("span",{...k.getStyles("tabSection",E),"data-position":"left",children:i}),o&&m.jsx("span",{...k.getStyles("tabLabel",E),children:o}),s&&m.jsx("span",{...k.getStyles("tabSection",E),"data-position":"right",children:s})]})});j1.classes=Yc;j1.displayName="@mantine/core/TabsTab";const QC="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Mee={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Aee=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":Et(e),"--tabs-color":wr(n,t),"--tabs-text-color":LY(r,t)?aR({color:n,theme:t,autoContrast:r}):void 0}}),Ur=ve((t,e)=>{const n=U("Tabs",Mee,t),{defaultValue:r,value:o,onChange:s,orientation:i,children:a,loop:l,id:c,activateTabWithKeyboard:d,allowTabDeactivation:u,variant:h,color:f,radius:p,inverted:g,placement:y,keepMounted:v,classNames:x,styles:w,unstyled:C,className:k,style:S,vars:T,autoContrast:E,mod:M,...P}=n,B=Uc(c),[$,W]=va({value:o,defaultValue:r,finalValue:null,onChange:s}),Y=be({name:"Tabs",props:n,classes:Yc,className:k,style:S,classNames:x,styles:w,unstyled:C,vars:T,varsResolver:Aee});return m.jsx(Cee,{value:{placement:y,value:$,orientation:i,id:B,loop:l,activateTabWithKeyboard:d,getTabId:EC(`${B}-tab`,QC),getPanelId:EC(`${B}-panel`,QC),onChange:W,allowTabDeactivation:u,variant:h,color:f,radius:p,inverted:g,keepMounted:v,unstyled:C,getStyles:Y},children:m.jsx(ne,{ref:e,id:B,variant:h,mod:[{orientation:i,inverted:i==="horizontal"&&g,placement:i==="vertical"&&y},M],...Y("root"),...P,children:a})})});Ur.classes=Yc;Ur.displayName="@mantine/core/Tabs";Ur.Tab=j1;Ur.Panel=L1;Ur.List=O1;const _ee={},Uf=ve((t,e)=>{const n=U("TextInput",_ee,t);return m.jsx(ka,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});Uf.classes=ka.classes;Uf.displayName="@mantine/core/TextInput";const JR=(t,e,n=!1)=>{const r=[];function o(s,i="--bn"){for(const a in s){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${i}-${l}`;typeof s[a]!="object"?(typeof s[a]=="number"&&(s[a]=`${s[a]}px`),n?e.style.removeProperty(c):e.style.setProperty(c,s[a].toString())):o(s[a],c)}}return o(t),r},eS=(t,e)=>JR(t,e),Pee={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},Ree=t=>JR(Pee,t,!0),YR=t=>m.jsxs(Jc,{gap:0,className:"bn-tooltip",children:[m.jsx(xr,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&m.jsx(xr,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),Em=b.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:s,icon:i,isSelected:a,isDisabled:l,onClick:c,label:d,variant:u,...h}=t;ce(h,!1);const[f,p]=b.useState(!1),g=r?m.jsx(Qn,{"aria-label":d,className:n,onMouseDown:y=>{ty()&&y.currentTarget.focus()},onClick:y=>{p(!0),c==null||c(y)},onPointerLeave:()=>p(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:u==="compact"?"compact-xs":"xs",disabled:l||!1,ref:e,...h,children:r}):m.jsx(li,{className:n,"aria-label":d,onMouseDown:y=>{ty()&&y.currentTarget.focus()},onClick:y=>{p(!0),c==null||c(y)},onPointerLeave:()=>p(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:u==="compact"?20:30,disabled:l||!1,ref:e,...h,children:i});return o?m.jsx(Ta,{disabled:f,withinPortal:!1,label:m.jsx(YR,{mainTooltip:o,secondaryTooltip:s}),children:g}):g}),Iee=b.forwardRef((t,e)=>{const{className:n,text:r,icon:o,isSelected:s,mainTooltip:i,secondaryTooltip:a,onClick:l,onMouseEnter:c,...d}=t;ce(d,!1);const[u,h]=b.useState(!1),f=m.jsxs(Ff,{className:n,checked:s===!0,wrapperProps:{onMouseEnter:c,onMouseLeave:()=>h(!1),onClick:p=>{h(!0),l==null||l(p)}},variant:"light",icon:null,ref:e,children:[m.jsx("span",{children:o}),m.jsx("span",{children:r})]});return!i||u?f:m.jsx(Ta,{refProp:"rootRef",withinPortal:!1,label:m.jsx(YR,{mainTooltip:i,secondaryTooltip:a}),children:f})}),Nee=b.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return ce(o),m.jsx(ut,{className:n,ref:e,children:r})}),Dee=b.forwardRef((t,e)=>{const{className:n,children:r,headerText:o,selected:s,onFocus:i,onBlur:a,tabIndex:l,...c}=t;ce(c,!1);const d=b.useRef(null);return b.useEffect(()=>{var u;s&&((u=d.current)==null||u.scrollIntoView({behavior:"smooth",block:"center"}))},[s]),m.jsxs(Kc,{className:Ne(n,s?"selected":""),onFocus:i,onBlur:a,tabIndex:l,ref:J0([e,d]),children:[o&&m.jsx(xr,{className:"bn-header-text",children:o}),r]})}),Oee=b.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return ce(o,!1),m.jsx(Kc.Section,{className:n,ref:e,children:r})}),Lee=b.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return ce(o,!1),m.jsx(S1,{className:n,label:m.jsx(xr,{children:r}),ref:e})}),jee=b.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:o,...s}=t;return ce(s,!1),n==="loading"?m.jsxs(ut,{children:[m.jsx(Sh,{height:24,width:24}),m.jsx("div",{children:m.jsx(Sh,{height:12,width:100})})]}):m.jsxs(ut,{children:[m.jsx($f,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),m.jsxs(xr,{fz:"sm",fw:"bold",children:[n.username,m.jsxs(xr,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&"(edited)"]})]})]})}),Bee=b.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:o,timeString:s,edited:i,actions:a,children:l,...c}=t,{hovered:d,ref:u}=WJ(),{focused:h,ref:f}=nR(),p=J0([e,u]);return ce(c,!1),m.jsxs(ut,{pos:"relative",ref:p,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&d||h)?m.jsx(ut,{ref:f,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,m.jsx(jee,{...t}),l]})}),Vee=b.forwardRef((t,e)=>{const{className:n,autoFocus:r,onFocus:o,onBlur:s,editor:i,editable:a,...l}=t;return ce(l,!1),m.jsx(n4,{autoFocus:r,className:n,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:e,onFocus:o,onBlur:s,children:m.jsx(VP,{formattingToolbar:$ee})})}),$ee=()=>{const t=jP([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return m.jsx(BP,{blockTypeSelectItems:[],children:t})},Hee=b.forwardRef((t,e)=>{const{className:n,name:r,label:o,variant:s,icon:i,value:a,autoFocus:l,placeholder:c,disabled:d,onKeyDown:u,onChange:h,onSubmit:f,autoComplete:p,rightSection:g,...y}=t;return ce(y),m.jsx(Uf,{size:"xs",className:Ne(n||"",s==="large"?"bn-mt-input-large":""),ref:e,name:r,label:o,leftSection:i,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:g,placeholder:c,disabled:d,onKeyDown:u,onChange:h,onSubmit:f,autoComplete:p})});var XR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tS=R.createContext&&R.createContext(XR),Fee=["attr","size","title"];function zee(t,e){if(t==null)return{};var n=Uee(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Th(){return Th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Th.apply(this,arguments)}function nS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Eh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nS(Object(n),!0).forEach(function(r){Wee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wee(t,e,n){return e=Gee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gee(t){var e=qee(t,"string");return typeof e=="symbol"?e:e+""}function qee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QR(t){return t&&t.map((e,n)=>R.createElement(e.tag,Eh({key:n},e.attr),QR(e.child)))}function e4(t){return e=>R.createElement(Kee,Th({attr:Eh({},t.attr)},e),QR(t.child))}function Kee(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=zee(t,Fee),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),R.createElement("svg",Th({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:Eh(Eh({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&R.createElement("title",null,s),t.children)};return tS!==void 0?R.createElement(tS.Consumer,null,n=>e(n)):e(XR)}function Zee(t){return e4({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function Jee(t){return e4({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}const t4=b.createContext(void 0),Yee=b.forwardRef((t,e)=>{const{children:n,onOpenChange:r,position:o,sub:s,...i}=t;ce(i);const[a,l]=b.useState(!1),c=b.useRef(null),d=b.useRef(),u=b.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{l(!1)},250)},[]),h=b.useCallback(()=>{d.current&&clearTimeout(d.current),l(!0)},[]);return m.jsx(t4.Provider,{value:{onMenuMouseOver:h,onMenuMouseLeave:u},children:m.jsx(Ue.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:Wc(e,c),onMouseOver:h,onMouseLeave:u,children:m.jsx(Ue,{portalProps:{target:c.current?c.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})}),Xee=t=>{const{children:e,onOpenChange:n,position:r,sub:o,...s}=t;return ce(s),o?m.jsx(Yee,{...t}):m.jsx(Ue,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e})},Qee=b.forwardRef((t,e)=>{const{className:n,children:r,icon:o,checked:s,subTrigger:i,onClick:a,...l}=t;return ce(l,!1),i?m.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation()},ref:e,...l,children:[r,m.jsx(Jee,{size:15})]}):m.jsx(Ue.Item,{className:n,ref:e,leftSection:o,rightSection:s?m.jsx(b1,{size:10}):s===!1?m.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),ete=t=>{const{children:e,sub:n,...r}=t;return ce(r),m.jsx(Ue.Target,{children:e})},tte=b.forwardRef((t,e)=>{const{className:n,children:r,sub:o,...s}=t;ce(s);const i=b.useContext(t4);return m.jsx(Ue.Dropdown,{className:n,ref:e,onMouseOver:i==null?void 0:i.onMenuMouseOver,onMouseLeave:i==null?void 0:i.onMenuMouseLeave,children:r})}),nte=b.forwardRef((t,e)=>{const{className:n,...r}=t;return ce(r),m.jsx(Ue.Divider,{className:n,ref:e})}),rte=b.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return ce(o),m.jsx(Ue.Label,{className:n,ref:e,children:r})}),ote=b.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...d}=t;return ce(d,!1),o?m.jsx(li,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):m.jsx(Qn,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),ste=b.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:s,setOpenTab:i,loading:a,...l}=t;return ce(l),m.jsx(ut,{className:n,ref:e,children:m.jsxs(Ur,{value:s,defaultValue:o,onChange:i,children:[a&&m.jsx(M1,{visible:a}),m.jsx(Ur.List,{children:r.map(c=>m.jsx(Ur.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>m.jsx(Ur.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),ite=b.forwardRef((t,e)=>{const{className:n,children:r,onClick:o,label:s,...i}=t;return ce(i),m.jsx(Qn,{size:"xs","aria-label":s,className:n,ref:e,onClick:o,...i,children:r})}),ate=b.forwardRef((t,e)=>{const{className:n,accept:r,value:o,placeholder:s,onChange:i,...a}=t;return ce(a),m.jsx(DQ,{size:"xs",className:n,ref:e,accept:r,value:o,placeholder:s,onChange:i,...a})}),lte=b.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return ce(o),m.jsx("div",{className:n,ref:e,children:r})}),cte=b.forwardRef((t,e)=>{const{className:n,value:r,placeholder:o,onKeyDown:s,onChange:i,...a}=t;return ce(a),m.jsx(Uf,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:o,onKeyDown:s,onChange:i})}),dte=t=>{const{opened:e,position:n,children:r,...o}=t;return ce(o),m.jsx(ss,{withinPortal:!1,opened:e,position:n,children:r})},ute=t=>{const{children:e,...n}=t;return ce(n),m.jsx(h1,{children:e})},hte=b.forwardRef((t,e)=>{const{className:n,children:r,variant:o,...s}=t;return ce(s),m.jsx(Nf,{className:n,ref:e,children:r})}),fte=b.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return ce(o,!1),m.jsx(ut,{align:"center",gap:0,className:n,ref:e,...o,children:r})}),pte=b.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...d}=t;return ce(d,!1),o?m.jsx(li,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):m.jsx(Qn,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),mte=b.forwardRef((t,e)=>{const{className:n,children:r,id:o,...s}=t;return ce(s),m.jsx(Jc,{gap:0,className:n,ref:e,id:o,role:"listbox",children:r})}),gte=b.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return ce(o),m.jsx(ut,{className:n,ref:e,children:m.jsx(ut,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),yte=b.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;ce(a);const l=b.useRef(null);return b.useEffect(()=>{if(!l.current||!r)return;const c=qP(l.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),m.jsxs(ut,{gap:0,className:n,ref:Wc(e,l),id:i,role:"option",onMouseDown:c=>c.preventDefault(),onClick:o,"aria-selected":r||void 0,children:[s.icon&&m.jsx(ut,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:s.icon}),m.jsxs(Jc,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[m.jsx(xr,{className:"bn-mt-suggestion-menu-item-title",children:s.title}),m.jsx(xr,{className:"bn-mt-suggestion-menu-item-subtitle",children:s.subtext})]}),s.badge&&m.jsx(ut,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:m.jsx(w1,{size:"xs",children:s.badge})})]})}),bte=b.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return ce(o),m.jsx(ut,{className:n,ref:e,children:r})}),vte=b.forwardRef((t,e)=>{const{className:n,...r}=t;return ce(r),m.jsx(is,{className:n,type:"dots",size:16,ref:e})}),wte=b.forwardRef((t,e)=>{const{className:n,children:r,id:o,columns:s,...i}=t;return ce(i),m.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${s}, 1fr)`},ref:e,id:o,role:"grid",children:r})}),xte=b.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return ce(s),m.jsx(ut,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:m.jsx(ut,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),kte=b.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;ce(a);const l=b.useRef(null);return b.useEffect(()=>{if(!l.current||!r)return;const c=qP(l.current,document.querySelector(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),m.jsx("div",{className:n,ref:Wc(e,l),id:i,role:"option",onClick:o,"aria-selected":r||void 0,children:s.icon})}),Cte=b.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return ce(s),m.jsx(is,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:e})}),Ste=b.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:o,onClick:s,...i}=t;return ce(i,!1),m.jsx(Qn,{className:r,ref:e,onMouseDown:o,onClick:s,...i,children:n})}),Tte=b.forwardRef((t,e)=>{const{className:n,children:r,draggable:o,onDragStart:s,onDragEnd:i,style:a,label:l,...c}=t;return ce(c,!1),m.jsx(Qn,{className:n,ref:e,"aria-label":l,draggable:o,onDragStart:s,onDragEnd:i,style:a,...c,children:r})}),Mm=b.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:s,variant:i,...a}=t;ce(a);const{ref:l,focused:c}=nR(),d=tR(c),u=Wc(e,l,d);return m.jsx(y1,{className:n,ref:u,role:"toolbar",onMouseEnter:o,onMouseLeave:s,gap:i==="action-toolbar"?2:void 0,children:r})}),Am=b.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:o,...s}=t;ce(s);const i=r.filter(a=>a.isSelected)[0];return i?m.jsxs(Ue,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[m.jsx(Ue.Target,{children:m.jsx(Qn,{onMouseDown:a=>{ty()&&a.currentTarget.focus()},leftSection:i.icon,rightSection:m.jsx(Zee,{}),size:"xs",variant:"subtle",disabled:o,children:i.text})}),m.jsx(Ue.Dropdown,{className:n,ref:e,children:r.map(a=>m.jsx(Ue.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?m.jsx(b1,{size:10,className:"bn-tick-icon"}):m.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),Ete={FormattingToolbar:{Root:Mm,Button:Em,Select:Am},FilePanel:{Root:ste,Button:ite,FileInput:ate,TabPanel:lte,TextInput:cte},GridSuggestionMenu:{Root:wte,Item:kte,EmptyItem:xte,Loader:Cte},LinkToolbar:{Root:Mm,Button:Em,Select:Am},SideMenu:{Root:fte,Button:pte},SuggestionMenu:{Root:mte,Item:yte,EmptyItem:gte,Label:bte,Loader:vte},TableHandle:{Root:Tte,ExtendButton:Ste},Generic:{Badge:{Root:Iee,Group:Nee},Form:{Root:t=>m.jsx("div",{children:t.children}),TextInput:Hee},Menu:{Root:Xee,Trigger:ete,Dropdown:tte,Divider:nte,Label:rte,Item:Qee,Button:ote},Popover:{Root:dte,Trigger:ute,Content:hte},Toolbar:{Root:Mm,Button:Em,Select:Am}},Comments:{Comment:Bee,Editor:Vee,Card:Dee,CardSection:Oee,ExpandSectionsPrompt:Lee}},Mte={activeClassName:""},n4=t=>{const{className:e,theme:n,...r}=t,o=Pr(),s=zP(),i=(o==null?void 0:o.colorSchemePreference)||s,a=b.useCallback(c=>{if(c&&(Ree(c),typeof n=="object")){if("light"in n&&"dark"in n){eS(n[i==="dark"?"dark":"light"],c);return}eS(n,c);return}},[i,n]),l=typeof n=="string"?n:i!=="no-preference"?i:"light";return m.jsx(wP.Provider,{value:Ete,children:m.jsx(dR,{theme:Mte,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:m.jsx(tJ,{"data-mantine-color-scheme":l,className:Ne("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})},Ate="_container_1rbb6_2",_te="_editIcon_1rbb6_9",Pte="_saveButton_1rbb6_16",_m={container:Ate,editIcon:_te,saveButton:Pte};function r4({value:t,setValue:e,readOnly:n,classes:r,onClickEdit:o,onClickSave:s,shouldShowSaveButton:i}){const a=Cf({initialContent:t});return m.jsxs("div",{className:pe(_m.container,r==null?void 0:r.container),children:[n&&m.jsx(ie,{onClick:o,className:_m.editIcon,icon:"solar:pen-new-square-outline",width:24,height:24}),m.jsx(n4,{editable:!n,theme:"light",editor:a,onChange:()=>e(a.document)}),i&&!n&&m.jsx(Dt,{onClick:s,className:_m.saveButton,children:"Save"})]})}const Rte="_selectWrapper_1xhpw_1",Ite="_selectLabel_1xhpw_5",Nte="_selectElement_1xhpw_9",Dte="_open_1xhpw_23",Ote="_selectedValue_1xhpw_27",Lte="_optionsList_1xhpw_35",jte="_option_1xhpw_35",fs={selectWrapper:Rte,selectLabel:Ite,selectElement:Nte,open:Dte,selectedValue:Ote,optionsList:Lte,option:jte},o4=({options:t,onChange:e,disabled:n=!1,label:r,renderOption:o,renderLabel:s,renderInput:i,renderOptionFooter:a,classes:l={}})=>{const[c,d]=b.useState(!1),u=b.useRef(null),h=()=>d(!1);return b.useEffect(()=>{const f=p=>{u.current&&!u.current.contains(p.target)&&h()};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),m.jsxs("div",{className:pe(fs.selectWrapper,l.container),ref:u,children:[s?s():r&&m.jsx("label",{className:fs.selectLabel,children:r}),m.jsxs("div",{className:`${fs.selectElement} ${c?fs.open:""}`,role:"button",tabIndex:0,children:[m.jsx("div",{className:fs.selectedValue,onClick:()=>!n&&d(!0),children:i?i():"Select..."}),c&&m.jsxs("div",{className:fs.optionsList,children:[t.map(f=>m.jsx("div",{className:fs.option,onClick:()=>{e(f,{close:h})},children:o?o(f,{close:h}):f.label},f.value)),a&&a({close:h})]})]})]})},Bte="_selectContainer_13uov_2",Vte="_submitButton_13uov_10",$te="_footerCenter_13uov_14",Pm={selectContainer:Bte,submitButton:Vte,footerCenter:$te},Hte=({fields:t,checklistId:e,checklistTemplateId:n,currentDay:r,onSubmit:o})=>{const[s,i]=R.useState({value:""}),[a,l]=R.useState(t[0]),{addChecklistRecord:c}=Jo();return m.jsxs("div",{children:[t.length>1?m.jsx(o4,{options:t.map(d=>({...d,value:d.id,label:d.title})),renderOption:d=>d.title,renderInput:()=>m.jsx("div",{children:a.title}),onChange:(d,{close:u})=>{u(),l(d)},classes:{container:Pm.selectContainer}}):null,m.jsx(r4,{value:s.value,setValue:d=>i({...s,value:d})}),m.jsx("div",{className:Pm.footerCenter,children:m.jsx(Dt,{type:"primary",className:Pm.submitButton,onClick:()=>{c({value:s.value,checklistId:e,checklistTemplateId:n,createdAt:r,records:[{fieldId:a.id,value:s.value}]}),o==null||o()},children:"Submit"})})]})},Fte="_header_1uwps_2",zte="_editor_1uwps_6",rS={header:Fte,editor:zte},Ute=({fields:t,checklistId:e,checklistTemplateId:n,currentDay:r})=>{const{getChecklistRecords:o,updateChecklistRecord:s}=Jo(),[i,a]=R.useState({}),[l,c]=R.useState({}),d=t.reduce((f,p)=>({...f,[p.id]:p}),{}),[u,h]=R.useState();return R.useEffect(()=>{const f=o(n,{rangeDate:{from:lb(new Date).toISOString(),to:ab(new Date).toISOString()},type:"time",fieldIds:Object.keys(d)});a(f)},[n]),m.jsx("div",{children:Object.entries(i).map(([f,p])=>m.jsxs("div",{children:[m.jsx("div",{className:rS.header,children:new Date(f).toLocaleString()}),p.map(g=>{const y=(u==null?void 0:u.id)===g.id;return console.log("IS ACTIVED",y),m.jsx("div",{children:m.jsx(r4,{onClickEdit:()=>{h(g)},classes:{container:rS.editor},value:g.value,setValue:v=>h(x=>({...x,value:v})),shouldShowSaveButton:!0,readOnly:!y,onClickSave:()=>{s(g.id,{value:(u==null?void 0:u.value)||"",checklistTemplateId:n}),h(void 0)}})})})]},f))})},Wte=({currentDay:t,checklistId:e,checklistTemplateId:n,fields:r})=>{const{getChecklistRecords:o}=Jo(),[s,i]=R.useState([]),a=()=>{const l=o(n,{rangeDate:{from:new Date(new Date(t).setHours(0,0,0,0)).toISOString(),to:new Date(new Date(t).setHours(23,59,59,999)).toISOString()},fieldIds:r.map(c=>c.id)});return i(Object.values(l)),l};return R.useEffect(()=>{a()},[n]),m.jsx("div",{children:"Pinned notes will be shown here."})};var iu=(t=>(t[t.Home=0]="Home",t[t.Add=1]="Add",t[t.History=2]="History",t))(iu||{});const Gte=({fields:t,checklistId:e,checklistTemplateId:n,currentDay:r})=>{const[o,s]=R.useState(0),i=()=>({0:"Note",2:"Note History",1:"Add Note"})[o],a=()=>{switch(o){case 0:return m.jsx(Wte,{currentDay:r,checklistId:e,checklistTemplateId:n,fields:t});case 1:return m.jsx(Hte,{fields:t,checklistId:e,checklistTemplateId:n,currentDay:r,onSubmit:()=>s(2)});case 2:return m.jsx(Ute,{fields:t,checklistId:e,checklistTemplateId:n,currentDay:r});default:return null}};return m.jsxs(Wn,{className:vw.container,children:[m.jsx(pL,{renderTitle:i,activeTab:o,onClickHome:()=>s(0),onClickHistory:()=>s(2),onClickAdd:()=>s(1)}),m.jsx(Di,{classes:{hr:vw.hr}}),a()]})},qte="record_field",Kte={duration:{id:"duration",title:"Duration",icon:"solar:clock-square-broken",description:"Record duration for tracking purpose",type:"metric",unit:"minutes"},"push-ups":{id:"push-ups",title:"Push-ups",icon:"iconoir:gym",description:"For example: Push-ups, Squats",type:"metric",unit:"reps"},note:{id:"note",title:"Note",icon:"solar:notebook-minimalistic-linear",description:"Note for tracking purpose",type:"note",unit:"words"}},B1=()=>{const[t,e]=mr(qte,Kte);return{getAllRecordFields:()=>Object.values(t),getRecordFields:s=>s.map(i=>t[i]),addRecordField:s=>{const i=tn();e(a=>({...a,[i]:{id:i,...s}}))},removeRecordField:s=>{e(i=>{const a={...i};return delete a[s],a})}}},Zte="_container_1m3rn_2",Jte="_left_1m3rn_14",Yte="_right_1m3rn_23",Xte="_backIcon_1m3rn_36",Ai={container:Zte,left:Jte,right:Yte,backIcon:Xte},Qte=()=>{const t=Yn();return m.jsx("div",{className:Ai.container,children:m.jsx("div",{className:Ai.left,onClick:()=>t("/"),children:"DREAMER"})})},V1=({renderLeftComponent:t,renderRightComponent:e,onClickLeftButton:n})=>{const r=Yn();return m.jsxs("div",{className:Ai.container,children:[m.jsxs("div",{className:Ai.left,onClick:n||(()=>r(-1)),children:[m.jsx(ie,{icon:"solar:arrow-left-outline",width:24,className:Ai.backIcon}),t==null?void 0:t()]}),m.jsx("div",{className:Ai.right,children:e==null?void 0:e()})]})},ene=()=>{const{id:t}=Q2(),[e,n]=iD(),{getChecklistTemplate:r}=Qr(),{getRecordFields:o}=B1(),{addChecklist:s}=zh(),i=e.get("checklistId"),a=e.get("currentDay"),[l,c]=R.useState([]),[d,u]=R.useState([]),[h,f]=R.useState();if(!t||!a)return;R.useEffect(()=>{const g=r(t);if(f(g),!i&&g){const y=s({title:g.title,checklistTemplateId:t,startedAt:new Date(a).toISOString(),endedAt:new Date(a).toISOString()});n({...Object.fromEntries(e),checklistId:y.id})}},[i]),R.useEffect(()=>{const g=r(t),y=o(g==null?void 0:g.records);if(y.length){const v=y.filter(w=>w.type==="metric"),x=y.filter(w=>w.type==="note");c(v),u(x)}},[]);const p=Yn();return i?m.jsxs(m.Fragment,{children:[m.jsx(V1,{renderLeftComponent:()=>m.jsx("div",{children:h==null?void 0:h.title}),renderRightComponent:()=>m.jsx(ie,{onClick:()=>{p(`/edit-checklist/${t}`)},width:24,icon:"solar:pen-new-square-linear"}),onClickLeftButton:()=>p("/")}),l.length?m.jsx(oL,{checklistTemplateId:t,checklistId:i,currentDay:a,fields:l}):null,d.length?m.jsx(Gte,{fields:d,checklistId:i,checklistTemplateId:t,currentDay:a}):null]}):null},tne=t=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},s4=({value:t,onChange:e,className:n})=>m.jsx("input",{className:n,type:"date",value:t?tne(new Date(t)):"",onChange:e}),nne="_container_1ew1v_1",rne="_lg_1ew1v_6",oS={container:nne,lg:rne};function Wf({size:t,className:e,disabled:n,...r}){return m.jsx("input",{className:pe(oS.container,t==="lg"&&oS.lg,e),type:"checkbox",disabled:n,...r})}const one="_container_a6kby_1",sne="_label_a6kby_7",ine="_card_a6kby_16",ane="_datePicker_a6kby_21",lne="_datePickerContainer_a6kby_27",cne="_checklistItem_a6kby_34",dne="_checklistBody_a6kby_40",une="_checkbox_a6kby_45",hne="_footer_a6kby_50",In={container:one,label:sne,card:ine,datePicker:ane,datePickerContainer:lne,checklistItem:cne,checklistBody:dne,checkbox:une,footer:hne},fne=()=>{var d;const[t,e]=mr("user_new",!1),n=Bt(),{baby:r,setBaby:o,calculateStartDateFromDueDate:s}=QD(),{getRecommendChecklistTemplates:i,selectedChecklistTemplates:a,updateSelectedChecklistTemplate:l}=Qr(),c=()=>{e(!1),window.location.reload()};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:In.container,children:[m.jsx(Wn,{className:In.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:In.label,children:n.formatMessage({id:"PregnantIntro.label-enter-the-due-date",defaultMessage:"When's the little one's due date?"})}),m.jsx("div",{className:In.datePickerContainer,children:m.jsx(s4,{value:((d=r==null?void 0:r.dueDate)==null?void 0:d.split("T")[0])||new Date(new Date().getTime()+40*7*24*60*60*1e3).toISOString().split("T")[0],onChange:u=>o({...r,dueDate:u.target.value,startDate:s(u.target.value)}),className:In.datePicker})})]})}),m.jsx(Wn,{className:In.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:In.label,children:n.formatMessage({id:"PregnantIntro.checklists",defaultMessage:"Pick the tasks you'd love to do every day!"})}),i().map(({id:u,title:h,avatar:f})=>m.jsxs("div",{className:In.checklistItem,children:[m.jsx(ie,{color:f.color||"#8A8A8A",width:32,height:32,icon:f.name}),m.jsx("p",{className:In.checklistBody,children:h}),m.jsx(Wf,{checked:a.includes(u),onChange:p=>{const g=p.target.checked;l(g?[...a,u]:a.filter(y=>y!==u))},className:In.checkbox})]},u))]})})]}),m.jsx("div",{className:In.footer,onClick:c,children:m.jsx(Dt,{size:"lg",children:"Submit"})})]})},pne="_input_k71ix_2",mne={input:pne},gne=({date:t,setDate:e})=>{const n=Bt();return m.jsx("div",{children:m.jsx(vt.ItemMeta,{logo:m.jsx(ie,{width:24,icon:"solar:calendar-date-line-duotone"}),title:n.formatMessage({defaultMessage:"Start Day",id:"label-start-day.label"}),description:n.formatMessage({defaultMessage:"Select the first day",id:"label-start-day.description"}),rightComponent:m.jsx(s4,{value:t,onChange:r=>e(r.target.value),className:mne.input})})})};function yne({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#00000075",className:pe($h.icon,t),...e,children:m.jsx("g",{id:"done_24px",children:m.jsx("path",{id:"icon/action/done_24px",d:"M8.80004 15.905L5.30004 12.405C5.11519 12.2178 4.86309 12.1125 4.60004 12.1125C4.33699 12.1125 4.0849 12.2178 3.90004 12.405C3.51004 12.795 3.51004 13.415 3.90004 13.805L8.09004 17.995C8.48004 18.385 9.11004 18.385 9.50004 17.995L20.1 7.40499C20.49 7.01499 20.49 6.39499 20.1 6.00499C19.9152 5.81784 19.6631 5.71251 19.4 5.71251C19.137 5.71251 18.8849 5.81784 18.7 6.00499L8.80004 15.905Z"})})})}const bne="_container_jx4ao_2",vne="_button_jx4ao_11",wne="_icon_jx4ao_19",xne="_activeIcon_jx4ao_25",kne="_activeButton_jx4ao_29",za={container:bne,button:vne,icon:wne,activeIcon:xne,activeButton:kne};function Cne({options:t,values:e=[],setValues:n=()=>{}}){return m.jsx("div",{className:za.container,children:t.map(r=>{const o=e.includes(r.value);return m.jsxs(Dt,{type:"ghost",className:pe(za.button,o&&za.activeButton),onClick:()=>{n(o?e.filter(s=>s!==r.value):[...e,r.value])},children:[m.jsx(yne,{className:pe(za.icon,o&&za.activeIcon)}),r.label]},`${r.label}-${r.value}`)})})}var $1=Qc(),oe=t=>Xc(t,$1),H1=Qc();oe.write=t=>Xc(t,H1);var Gf=Qc();oe.onStart=t=>Xc(t,Gf);var F1=Qc();oe.onFrame=t=>Xc(t,F1);var z1=Qc();oe.onFinish=t=>Xc(t,z1);var zi=[];oe.setTimeout=(t,e)=>{const n=oe.now()+e,r=()=>{const s=zi.findIndex(i=>i.cancel==r);~s&&zi.splice(s,1),Oo-=~s?1:0},o={time:n,handler:t,cancel:r};return zi.splice(i4(n),0,o),Oo+=1,a4(),o};var i4=t=>~(~zi.findIndex(e=>e.time>t)||~zi.length);oe.cancel=t=>{Gf.delete(t),F1.delete(t),z1.delete(t),$1.delete(t),H1.delete(t)};oe.sync=t=>{Ey=!0,oe.batchedUpdates(t),Ey=!1};oe.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...o){e=o,oe.onStart(n)}return r.handler=t,r.cancel=()=>{Gf.delete(n),e=null},r};var U1=typeof window<"u"?window.requestAnimationFrame:()=>{};oe.use=t=>U1=t;oe.now=typeof performance<"u"?()=>performance.now():Date.now;oe.batchedUpdates=t=>t();oe.catch=console.error;oe.frameLoop="always";oe.advance=()=>{oe.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):c4()};var Do=-1,Oo=0,Ey=!1;function Xc(t,e){Ey?(e.delete(t),t(0)):(e.add(t),a4())}function a4(){Do<0&&(Do=0,oe.frameLoop!=="demand"&&U1(l4))}function Sne(){Do=-1}function l4(){~Do&&(U1(l4),oe.batchedUpdates(c4))}function c4(){const t=Do;Do=oe.now();const e=i4(Do);if(e&&(d4(zi.splice(0,e),n=>n.handler()),Oo-=e),!Oo){Sne();return}Gf.flush(),$1.flush(t?Math.min(64,Do-t):16.667),F1.flush(),H1.flush(),z1.flush()}function Qc(){let t=new Set,e=t;return{add(n){Oo+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Oo-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Oo-=e.size,d4(e,r=>r(n)&&t.add(r)),Oo+=t.size,e=t)}}}function d4(t,e){t.forEach(n=>{try{e(n)}catch(r){oe.catch(r)}})}var Tne=Object.defineProperty,Ene=(t,e)=>{for(var n in e)Tne(t,n,{get:e[n],enumerable:!0})},Jn={};Ene(Jn,{assign:()=>Ane,colors:()=>Vo,createStringInterpolator:()=>G1,skipAnimation:()=>h4,to:()=>u4,willAdvance:()=>q1});function My(){}var Mne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),O={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function $r(t,e){if(O.arr(t)){if(!O.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var ye=(t,e)=>t.forEach(e);function kr(t,e,n){if(O.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var on=t=>O.und(t)?[]:O.arr(t)?t:[t];function wl(t,e){if(t.size){const n=Array.from(t);t.clear(),ye(n,e)}}var ol=(t,...e)=>wl(t,n=>n(...e)),W1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),G1,u4,Vo=null,h4=!1,q1=My,Ane=t=>{t.to&&(u4=t.to),t.now&&(oe.now=t.now),t.colors!==void 0&&(Vo=t.colors),t.skipAnimation!=null&&(h4=t.skipAnimation),t.createStringInterpolator&&(G1=t.createStringInterpolator),t.requestAnimationFrame&&oe.use(t.requestAnimationFrame),t.batchedUpdates&&(oe.batchedUpdates=t.batchedUpdates),t.willAdvance&&(q1=t.willAdvance),t.frameLoop&&(oe.frameLoop=t.frameLoop)},xl=new Set,Cn=[],Rm=[],Mh=0,qf={get idle(){return!xl.size&&!Cn.length},start(t){Mh>t.priority?(xl.add(t),oe.onStart(_ne)):(f4(t),oe(Ay))},advance:Ay,sort(t){if(Mh)oe.onFrame(()=>qf.sort(t));else{const e=Cn.indexOf(t);~e&&(Cn.splice(e,1),p4(t))}},clear(){Cn=[],xl.clear()}};function _ne(){xl.forEach(f4),xl.clear(),oe(Ay)}function f4(t){Cn.includes(t)||p4(t)}function p4(t){Cn.splice(Pne(Cn,e=>e.priority>t.priority),0,t)}function Ay(t){const e=Rm;for(let n=0;n<Cn.length;n++){const r=Cn[n];Mh=r.priority,r.idle||(q1(r),r.advance(t),r.idle||e.push(r))}return Mh=0,Rm=Cn,Rm.length=0,Cn=e,Cn.length>0}function Pne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Rne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},$n="[-+]?\\d*\\.?\\d+",Ah=$n+"%";function Kf(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Ine=new RegExp("rgb"+Kf($n,$n,$n)),Nne=new RegExp("rgba"+Kf($n,$n,$n,$n)),Dne=new RegExp("hsl"+Kf($n,Ah,Ah)),One=new RegExp("hsla"+Kf($n,Ah,Ah,$n)),Lne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,jne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Bne=/^#([0-9a-fA-F]{6})$/,Vne=/^#([0-9a-fA-F]{8})$/;function $ne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Bne.exec(t))?parseInt(e[1]+"ff",16)>>>0:Vo&&Vo[t]!==void 0?Vo[t]:(e=Ine.exec(t))?(yi(e[1])<<24|yi(e[2])<<16|yi(e[3])<<8|255)>>>0:(e=Nne.exec(t))?(yi(e[1])<<24|yi(e[2])<<16|yi(e[3])<<8|aS(e[4]))>>>0:(e=Lne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Vne.exec(t))?parseInt(e[1],16)>>>0:(e=jne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Dne.exec(t))?(sS(iS(e[1]),Nd(e[2]),Nd(e[3]))|255)>>>0:(e=One.exec(t))?(sS(iS(e[1]),Nd(e[2]),Nd(e[3]))|aS(e[4]))>>>0:null}function Im(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function sS(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,o=2*n-r,s=Im(o,r,t+1/3),i=Im(o,r,t),a=Im(o,r,t-1/3);return Math.round(s*255)<<24|Math.round(i*255)<<16|Math.round(a*255)<<8}function yi(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function iS(t){return(parseFloat(t)%360+360)%360/360}function aS(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Nd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function lS(t){let e=$ne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,o=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${o}, ${s})`}var lc=(t,e,n)=>{if(O.fun(t))return t;if(O.arr(t))return lc({range:t,output:e,extrapolate:n});if(O.str(t.output[0]))return G1(t);const r=t,o=r.output,s=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const d=Fne(c,s);return Hne(c,s[d],s[d+1],o[d],o[d+1],l,i,a,r.map)}};function Hne(t,e,n,r,o,s,i,a,l){let c=l?l(t):t;if(c<e){if(i==="identity")return c;i==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===o?r:e===n?t<=e?r:o:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:o===1/0?c=c+r:c=c*(o-r)+r,c)}function Fne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var zne={linear:t=>t},cc=Symbol.for("FluidValue.get"),sa=Symbol.for("FluidValue.observers"),vn=t=>!!(t&&t[cc]),zt=t=>t&&t[cc]?t[cc]():t,cS=t=>t[sa]||null;function Une(t,e){t.eventObserved?t.eventObserved(e):t(e)}function dc(t,e){const n=t[sa];n&&n.forEach(r=>{Une(r,e)})}var m4=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Wne(this,t)}},Wne=(t,e)=>g4(t,cc,e);function Ea(t,e){if(t[cc]){let n=t[sa];n||g4(t,sa,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function uc(t,e){const n=t[sa];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[sa]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var g4=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),au=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Gne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,dS=new RegExp(`(${au.source})(%|[a-z]+)`,"i"),qne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Zf=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,y4=t=>{const[e,n]=Kne(t);if(!e||W1())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(n);return o||t}else{if(n&&Zf.test(n))return y4(n);if(n)return n}return t},Kne=t=>{const e=Zf.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},Nm,Zne=(t,e,n,r,o)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,b4=t=>{Nm||(Nm=Vo?new RegExp(`(${Object.keys(Vo).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>zt(s).replace(Zf,y4).replace(Gne,lS).replace(Nm,lS)),n=e.map(s=>s.match(au).map(Number)),o=n[0].map((s,i)=>n.map(a=>{if(!(i in a))throw Error('The arity of each "output" value must be equal');return a[i]})).map(s=>lc({...t,output:s}));return s=>{var l;const i=!dS.test(e[0])&&((l=e.find(c=>dS.test(c)))==null?void 0:l.replace(au,""));let a=0;return e[0].replace(au,()=>`${o[a++](s)}${i||""}`).replace(qne,Zne)}},K1="react-spring: ",v4=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${K1}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Jne=v4(console.warn);function Yne(){Jne(`${K1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Xne=v4(console.warn);function Qne(){Xne(`${K1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Jf(t){return O.str(t)&&(t[0]=="#"||/\d/.test(t)||!W1()&&Zf.test(t)||t in(Vo||{}))}var Z1=W1()?b.useEffect:b.useLayoutEffect,ere=()=>{const t=b.useRef(!1);return Z1(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function w4(){const t=b.useState()[1],e=ere();return()=>{e.current&&t(Math.random())}}var x4=t=>b.useEffect(t,tre),tre=[];function uS(t){const e=b.useRef(void 0);return b.useEffect(()=>{e.current=t}),e.current}var hc=Symbol.for("Animated:node"),nre=t=>!!t&&t[hc]===t,ir=t=>t&&t[hc],J1=(t,e)=>Mne(t,hc,e),Yf=t=>t&&t[hc]&&t[hc].getPayload(),k4=class{constructor(){J1(this,this)}getPayload(){return this.payload||[]}},Xf=class C4 extends k4{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,O.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new C4(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return O.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,O.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},_h=class S4 extends Xf{constructor(e){super(0),this._string=null,this._toString=lc({output:[e,e]})}static create(e){return new S4(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(O.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=lc({output:[this.getValue(),e]})),this._value=0,super.reset()}},Ph={dependencies:null},Qf=class extends k4{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return kr(this.source,(n,r)=>{nre(n)?e[r]=n.getValue(t):vn(n)?e[r]=zt(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&ye(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return kr(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Ph.dependencies&&vn(t)&&Ph.dependencies.add(t);const e=Yf(t);e&&ye(e,n=>this.add(n))}},rre=class T4 extends Qf{constructor(e){super(e)}static create(e){return new T4(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((r,o)=>r.setValue(e[o])).some(Boolean):(super.setValue(e.map(ore)),!0)}};function ore(t){return(Jf(t)?_h:Xf).create(t)}function _y(t){const e=ir(t);return e?e.constructor:O.arr(t)?rre:Jf(t)?_h:Xf}var hS=(t,e)=>{const n=!O.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((r,o)=>{const s=b.useRef(null),i=n&&b.useCallback(p=>{s.current=are(o,p)},[o]),[a,l]=ire(r,e),c=w4(),d=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},u=new sre(d,l),h=b.useRef(void 0);Z1(()=>(h.current=u,ye(l,p=>Ea(p,u)),()=>{h.current&&(ye(h.current.deps,p=>uc(p,h.current)),oe.cancel(h.current.update))})),b.useEffect(d,[]),x4(()=>()=>{const p=h.current;ye(p.deps,g=>uc(g,p))});const f=e.getComponentProps(a.getValue());return b.createElement(t,{...f,ref:i})})},sre=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&oe.write(this.update)}};function ire(t,e){const n=new Set;return Ph.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Qf(t),Ph.dependencies=null,[t,n]}function are(t,e){return t&&(O.fun(t)?t(e):t.current=e),e}var fS=Symbol.for("AnimatedComponent"),lre=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=o=>new Qf(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=i=>{const a=pS(i)||"Anonymous";return O.str(i)?i=s[i]||(s[i]=hS(i,o)):i=i[fS]||(i[fS]=hS(i,o)),i.displayName=`Animated(${a})`,i};return kr(t,(i,a)=>{O.arr(t)&&(a=pS(i)),s[a]=s(i)}),{animated:s}},pS=t=>O.str(t)?t:t&&O.str(t.displayName)?t.displayName:O.fun(t)&&t.name||null;function ks(t,...e){return O.fun(t)?t(...e):t}var kl=(t,e)=>t===!0||!!(e&&t&&(O.fun(t)?t(e):on(t).includes(e))),E4=(t,e)=>O.obj(t)?e&&t[e]:t,M4=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,cre=t=>t,Y1=(t,e=cre)=>{let n=dre;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const o of n){const s=e(t[o],o);O.und(s)||(r[o]=s)}return r},dre=["config","onProps","onStart","onChange","onPause","onResume","onRest"],ure={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function hre(t){const e={};let n=0;if(kr(t,(r,o)=>{ure[o]||(e[o]=r,n++)}),n)return e}function A4(t){const e=hre(t);if(e){const n={to:e};return kr(t,(r,o)=>o in e||(n[o]=r)),n}return{...t}}function fc(t){return t=zt(t),O.arr(t)?t.map(fc):Jf(t)?Jn.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function fre(t){for(const e in t)return!0;return!1}function Py(t){return O.fun(t)||O.arr(t)&&O.obj(t[0])}function pre(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function mre(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var gre={default:{tension:170,friction:26}},Ry={...gre.default,mass:1,damping:1,easing:zne.linear,clamp:!1},yre=class{constructor(){this.velocity=0,Object.assign(this,Ry)}};function bre(t,e,n){n&&(n={...n},mS(n,e),e={...n,...e}),mS(t,e),Object.assign(t,e);for(const i in Ry)t[i]==null&&(t[i]=Ry[i]);let{frequency:r,damping:o}=t;const{mass:s}=t;return O.und(r)||(r<.01&&(r=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*o*s/r),t}function mS(t,e){if(!O.und(e.decay))t.duration=void 0;else{const n=!O.und(e.tension)||!O.und(e.friction);(n||!O.und(e.frequency)||!O.und(e.damping)||!O.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var gS=[],vre=class{constructor(){this.changed=!1,this.values=gS,this.toValues=null,this.fromValues=gS,this.config=new yre,this.immediate=!1}};function _4(t,{key:e,props:n,defaultProps:r,state:o,actions:s}){return new Promise((i,a)=>{let l,c,d=kl(n.cancel??(r==null?void 0:r.cancel),e);if(d)f();else{O.und(n.pause)||(o.paused=kl(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=o.paused||kl(p,e)),l=ks(n.delay||0,e),p?(o.resumeQueue.add(h),s.pause()):(s.resume(),h())}function u(){o.resumeQueue.add(h),o.timeouts.delete(c),c.cancel(),l=c.time-oe.now()}function h(){l>0&&!Jn.skipAnimation?(o.delayed=!0,c=oe.setTimeout(f,l),o.pauseQueue.add(u),o.timeouts.add(c)):f()}function f(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(u),o.timeouts.delete(c),t<=(o.cancelId||0)&&(d=!0);try{s.start({...n,callId:t,cancel:d},i)}catch(p){a(p)}}})}var X1=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Ui(t.get()):e.every(n=>n.noop)?P4(t.get()):Ln(t.get(),e.every(n=>n.finished)),P4=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ln=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Ui=t=>({value:t,cancelled:!0,finished:!1});function R4(t,e,n,r){const{callId:o,parentId:s,onRest:i}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=o,n.asyncTo=t;const c=Y1(e,(y,v)=>v==="onRest"?void 0:y);let d,u;const h=new Promise((y,v)=>(d=y,u=v)),f=y=>{const v=o<=(n.cancelId||0)&&Ui(r)||o!==n.asyncId&&Ln(r,!1);if(v)throw y.result=v,u(y),y},p=(y,v)=>{const x=new yS,w=new bS;return(async()=>{if(Jn.skipAnimation)throw pc(n),w.result=Ln(r,!1),u(w),w;f(x);const C=O.obj(y)?{...y}:{...v,to:y};C.parentId=o,kr(c,(S,T)=>{O.und(C[T])&&(C[T]=S)});const k=await r.start(C);return f(x),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),k})()};let g;if(Jn.skipAnimation)return pc(n),Ln(r,!1);try{let y;O.arr(t)?y=(async v=>{for(const x of v)await p(x)})(t):y=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([y.then(d),h]),g=Ln(r.get(),!0,!1)}catch(y){if(y instanceof yS)g=y.result;else if(y instanceof bS)g=y.result;else throw y}finally{o==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return O.fun(i)&&oe.batchedUpdates(()=>{i(g,r,r.item)}),g})()}function pc(t,e){wl(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var yS=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},bS=class extends Error{constructor(){super("SkipAnimationSignal")}},Iy=t=>t instanceof Q1,wre=1,Q1=class extends m4{constructor(){super(...arguments),this.id=wre++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=ir(this);return t&&t.getValue()}to(...t){return Jn.to(this,t)}interpolate(...t){return Yne(),Jn.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){dc(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||qf.sort(this),dc(this,{type:"priority",parent:this,priority:t})}},ti=Symbol.for("SpringPhase"),I4=1,N4=2,D4=4,Dm=t=>(t[ti]&I4)>0,yo=t=>(t[ti]&N4)>0,Ua=t=>(t[ti]&D4)>0,vS=(t,e)=>e?t[ti]|=N4|I4:t[ti]&=-3,wS=(t,e)=>e?t[ti]|=D4:t[ti]&=-5,xre=class extends Q1{constructor(t,e){if(super(),this.animation=new vre,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!O.und(t)||!O.und(e)){const n=O.obj(t)?{...t}:{...e,from:t};O.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(yo(this)||this._state.asyncTo)||Ua(this)}get goal(){return zt(this.animation.to)}get velocity(){const t=ir(this);return t instanceof Xf?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Dm(this)}get isAnimating(){return yo(this)}get isPaused(){return Ua(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:o}=r;const{config:s}=r,i=Yf(r.to);!i&&vn(r.to)&&(o=on(zt(r.to))),r.values.forEach((c,d)=>{if(c.done)return;const u=c.constructor==_h?1:i?i[d].lastPosition:o[d];let h=r.immediate,f=u;if(!h){if(f=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const g=r.fromValues[d],y=c.v0!=null?c.v0:c.v0=O.arr(s.velocity)?s.velocity[d]:s.velocity;let v;const x=s.precision||(g==u?.005:Math.min(1,Math.abs(u-g)*.001));if(O.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,C=Math.exp(-(1-w)*p);f=g+y/(1-w)*(1-C),h=Math.abs(c.lastPosition-f)<=x,v=y*C}else{v=c.lastVelocity==null?y:c.lastVelocity;const w=s.restVelocity||x/10,C=s.clamp?0:s.bounce,k=!O.und(C),S=g==u?c.v0>0:g<u;let T,E=!1;const M=1,P=Math.ceil(t/M);for(let B=0;B<P&&(T=Math.abs(v)>w,!(!T&&(h=Math.abs(u-f)<=x,h)));++B){k&&(E=f==u||f>u==S,E&&(v=-v*C,f=u));const $=-s.tension*1e-6*(f-u),W=-s.friction*.001*v,Y=($+W)/s.mass;v=v+Y*M,f=f+v*M}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),f=g+s.easing(w)*(u-g),v=(f-c.lastPosition)/t,h=w==1}c.lastVelocity=v,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}i&&!i[d].done&&(h=!1),h?c.done=!0:e=!1,c.setValue(f,s.round)&&(n=!0)});const a=ir(this),l=a.getValue();if(e){const c=zt(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return oe.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(yo(this)){const{to:t,config:e}=this.animation;oe.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return O.und(t)?(n=this.queue||[],this.queue=[]):n=[O.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>X1(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),pc(this._state,t&&this._lastCallId),oe.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=O.obj(n)?n[e]:n,(n==null||Py(n))&&(n=void 0),r=O.obj(r)?r[e]:r,r==null&&(r=void 0);const o={to:n,from:r};return Dm(this)||(t.reverse&&([n,r]=[r,n]),r=zt(r),O.und(r)?ir(this)||this._set(n):this._set(r)),o}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,Y1(t,(i,a)=>/^on/.test(a)?E4(i,n):i)),kS(this,t,"onProps"),Ga(this,"onProps",t,this);const o=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return _4(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Ua(this)||(wS(this,!0),ol(s.pauseQueue),Ga(this,"onPause",Ln(this,Wa(this,this.animation.to)),this))},resume:()=>{Ua(this)&&(wS(this,!1),yo(this)&&this._resume(),ol(s.resumeQueue),Ga(this,"onResume",Ln(this,Wa(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(i=>{if(t.loop&&i.finished&&!(e&&i.noop)){const a=O4(t);if(a)return this._update(a,!0)}return i})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Ui(this));const r=!O.und(t.to),o=!O.und(t.from);if(r||o)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Ui(this));const{key:s,defaultProps:i,animation:a}=this,{to:l,from:c}=a;let{to:d=l,from:u=c}=t;o&&!r&&(!e.default||O.und(d))&&(d=u),e.reverse&&([d,u]=[u,d]);const h=!$r(u,c);h&&(a.from=u),u=zt(u);const f=!$r(d,l);f&&this._focus(d);const p=Py(e.to),{config:g}=a,{decay:y,velocity:v}=g;(r||o)&&(g.velocity=0),e.config&&!p&&bre(g,ks(e.config,s),e.config!==i.config?ks(i.config,s):void 0);let x=ir(this);if(!x||O.und(d))return n(Ln(this,!0));const w=O.und(e.reset)?o&&!e.default:!O.und(u)&&kl(e.reset,s),C=w?u:this.get(),k=fc(d),S=O.num(k)||O.arr(k)||Jf(k),T=!p&&(!S||kl(i.immediate||e.immediate,s));if(f){const B=_y(d);if(B!==x.constructor)if(T)x=this._set(k);else throw Error(`Cannot animate between ${x.constructor.name} and ${B.name}, as the "to" prop suggests`)}const E=x.constructor;let M=vn(d),P=!1;if(!M){const B=w||!Dm(this)&&h;(f||B)&&(P=$r(fc(C),k),M=!P),(!$r(a.immediate,T)&&!T||!$r(g.decay,y)||!$r(g.velocity,v))&&(M=!0)}if(P&&yo(this)&&(a.changed&&!w?M=!0:M||this._stop(l)),!p&&((M||vn(l))&&(a.values=x.getPayload(),a.toValues=vn(d)?null:E==_h?[1]:on(k)),a.immediate!=T&&(a.immediate=T,!T&&!w&&this._set(l)),M)){const{onRest:B}=a;ye(Cre,W=>kS(this,e,W));const $=Ln(this,Wa(this,l));ol(this._pendingCalls,$),this._pendingCalls.add(n),a.changed&&oe.batchedUpdates(()=>{var W;a.changed=!w,B==null||B($,this),w?ks(i.onRest,$):(W=a.onStart)==null||W.call(a,$,this)})}w&&this._set(C),p?n(R4(e.to,e,this._state,this)):M?this._start():yo(this)&&!f?this._pendingCalls.add(n):n(P4(C))}_focus(t){const e=this.animation;t!==e.to&&(cS(this)&&this._detach(),e.to=t,cS(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;vn(e)&&(Ea(e,this),Iy(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;vn(t)&&uc(t,this)}_set(t,e=!0){const n=zt(t);if(!O.und(n)){const r=ir(this);if(!r||!$r(n,r.getValue())){const o=_y(n);!r||r.constructor!=o?J1(this,o.create(n)):r.setValue(n),r&&oe.batchedUpdates(()=>{this._onChange(n,e)})}}return ir(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Ga(this,"onStart",Ln(this,Wa(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),ks(this.animation.onChange,t,this)),ks(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;ir(this).reset(zt(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),yo(this)||(vS(this,!0),Ua(this)||this._resume())}_resume(){Jn.skipAnimation?this.finish():qf.start(this)}_stop(t,e){if(yo(this)){vS(this,!1);const n=this.animation;ye(n.values,o=>{o.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),dc(this,{type:"idle",parent:this});const r=e?Ui(this.get()):Ln(this.get(),Wa(this,t??n.to));ol(this._pendingCalls,r),n.changed&&(n.changed=!1,Ga(this,"onRest",r,this))}}};function Wa(t,e){const n=fc(e),r=fc(t.get());return $r(r,n)}function O4(t,e=t.loop,n=t.to){const r=ks(e);if(r){const o=r!==!0&&A4(r),s=(o||t).reverse,i=!o||o.reset;return mc({...t,loop:e,default:!1,pause:void 0,to:!s||Py(n)?n:void 0,from:i?t.from:void 0,reset:i,...o})}}function mc(t){const{to:e,from:n}=t=A4(t),r=new Set;return O.obj(e)&&xS(e,r),O.obj(n)&&xS(n,r),t.keys=r.size?Array.from(r):null,t}function kre(t){const e=mc(t);return O.und(e.default)&&(e.default=Y1(e)),e}function xS(t,e){kr(t,(n,r)=>n!=null&&e.add(r))}var Cre=["onStart","onRest","onChange","onPause","onResume"];function kS(t,e,n){t.animation[n]=e[n]!==M4(e,n)?E4(e[n],t.key):void 0}function Ga(t,e,...n){var r,o,s,i;(o=(r=t.animation)[e])==null||o.call(r,...n),(i=(s=t.defaultProps)[e])==null||i.call(s,...n)}var Sre=["onStart","onChange","onRest"],Tre=1,Ere=class{constructor(t,e){this.id=Tre++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];O.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(mc(t)),this}start(t){let{queue:e}=this;return t?e=on(t).map(mc):this.queue=[],this._flush?this._flush(this,e):($4(this,e),Ny(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;ye(on(e),r=>n[r].stop(!!t))}else pc(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(O.und(t))this.start({pause:!0});else{const e=this.springs;ye(on(t),n=>e[n].pause())}return this}resume(t){if(O.und(t))this.start({pause:!1});else{const e=this.springs;ye(on(t),n=>e[n].resume())}return this}each(t){kr(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,o=this._changed.size>0;(r&&!this._started||o&&!this._started)&&(this._started=!0,wl(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,i=o||s&&n.size?this.get():null;o&&e.size&&wl(e,([a,l])=>{l.value=i,a(l,this,this._item)}),s&&(this._started=!1,wl(n,([a,l])=>{l.value=i,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;oe.onFrame(this._onFrame)}};function Ny(t,e){return Promise.all(e.map(n=>L4(t,n))).then(n=>X1(t,n))}async function L4(t,e,n){const{keys:r,to:o,from:s,loop:i,onRest:a,onResolve:l}=e,c=O.obj(e.default)&&e.default;i&&(e.loop=!1),o===!1&&(e.to=null),s===!1&&(e.from=null);const d=O.arr(o)||O.fun(o)?o:void 0;d?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):ye(Sre,g=>{const y=e[g];if(O.fun(y)){const v=t._events[g];e[g]=({finished:x,cancelled:w})=>{const C=v.get(y);C?(x||(C.finished=!1),w&&(C.cancelled=!0)):v.set(y,{value:null,finished:x||!1,cancelled:w||!1})},c&&(c[g]=e[g])}});const u=t._state;e.pause===!u.paused?(u.paused=e.pause,ol(e.pause?u.pauseQueue:u.resumeQueue)):u.paused&&(e.pause=!0);const h=(r||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),f=e.cancel===!0||M4(e,"cancel")===!0;(d||f&&u.asyncId)&&h.push(_4(++t._lastAsyncId,{props:e,state:u,actions:{pause:My,resume:My,start(g,y){f?(pc(u,t._lastAsyncId),y(Ui(t))):(g.onRest=a,y(R4(d,g,u,t)))}}})),u.paused&&await new Promise(g=>{u.resumeQueue.add(g)});const p=X1(t,await Promise.all(h));if(i&&p.finished&&!(n&&p.noop)){const g=O4(e,i,o);if(g)return $4(t,[g]),L4(t,g,!0)}return l&&oe.batchedUpdates(()=>l(p,t,t.item)),p}function CS(t,e){const n={...t.springs};return e&&ye(on(e),r=>{O.und(r.keys)&&(r=mc(r)),O.obj(r.to)||(r={...r,to:void 0}),V4(n,r,o=>B4(o))}),j4(t,n),n}function j4(t,e){kr(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,Ea(n,t))})}function B4(t,e){const n=new xre;return n.key=t,e&&Ea(n,e),n}function V4(t,e,n){e.keys&&ye(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function $4(t,e){ye(e,n=>{V4(t.springs,n,r=>B4(r,t))})}var Mre=b.createContext({pause:!1,immediate:!1}),Are=()=>{const t=[],e=function(r){Qne();const o=[];return ye(t,(s,i)=>{if(O.und(r))o.push(s.start());else{const a=n(r,s,i);a&&o.push(s.start(a))}}),o};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const o=t.indexOf(r);~o&&t.splice(o,1)},e.pause=function(){return ye(t,r=>r.pause(...arguments)),this},e.resume=function(){return ye(t,r=>r.resume(...arguments)),this},e.set=function(r){ye(t,(o,s)=>{const i=O.fun(r)?r(s,o):r;i&&o.set(i)})},e.start=function(r){const o=[];return ye(t,(s,i)=>{if(O.und(r))o.push(s.start());else{const a=this._getProps(r,s,i);a&&o.push(s.start(a))}}),o},e.stop=function(){return ye(t,r=>r.stop(...arguments)),this},e.update=function(r){return ye(t,(o,s)=>o.update(this._getProps(r,o,s))),this};const n=function(r,o,s){return O.fun(r)?r(s,o):r};return e._getProps=n,e};function _re(t,e,n){const r=O.fun(e)&&e;r&&!n&&(n=[]);const o=b.useMemo(()=>r||arguments.length==3?Are():void 0,[]),s=b.useRef(0),i=w4(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(v,x){const w=CS(v,x);return s.current>0&&!a.queue.length&&!Object.keys(w).some(k=>!v.springs[k])?Ny(v,x):new Promise(k=>{j4(v,w),a.queue.push(()=>{k(Ny(v,x))}),i()})}}),[]),l=b.useRef([...a.ctrls]),c=b.useRef([]);c.current??(c.current=[]);const d=uS(t)||0;b.useMemo(()=>{ye(l.current.slice(t,d),v=>{pre(v,o),v.stop(!0)}),l.current.length=t,u(d,t)},[t]),b.useMemo(()=>{u(0,Math.min(d,t))},n);function u(v,x){for(let w=v;w<x;w++){const C=l.current[w]||(l.current[w]=new Ere(null,a.flush)),k=r?r(w,C):e[w];k&&(c.current[w]=kre(k))}}const h=l.current.map((v,x)=>CS(v,c.current[x])),f=b.useContext(Mre),p=uS(f),g=f!==p&&fre(f);Z1(()=>{s.current++,a.ctrls=l.current;const{queue:v}=a;v.length&&(a.queue=[],ye(v,x=>x())),ye(l.current,(x,w)=>{o==null||o.add(x),g&&x.start({default:f});const C=c.current[w];C&&(mre(x,C.ref),x.ref?x.queue.push(C):x.start(C)),c.current[w]=null})}),x4(()=>()=>{ye(a.ctrls,v=>v.stop(!0))});const y=h.map(v=>({...v}));return o?[y,o]:y}function ev(t,e){const n=O.fun(t),[[r],o]=_re(1,n?t:[t],n?[]:e);return n||arguments.length==2?[r,o]:r}var Pre=class extends Q1{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=lc(...e);const n=this._get(),r=_y(n);J1(this,r.create(n))}advance(t){const e=this._get(),n=this.get();$r(e,n)||(ir(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&SS(this._active)&&Om(this)}_get(){const t=O.arr(this.source)?this.source.map(zt):on(zt(this.source));return this.calc(...t)}_start(){this.idle&&!SS(this._active)&&(this.idle=!1,ye(Yf(this),t=>{t.done=!1}),Jn.skipAnimation?(oe.batchedUpdates(()=>this.advance()),Om(this)):qf.start(this))}_attach(){let t=1;ye(on(this.source),e=>{vn(e)&&Ea(e,this),Iy(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){ye(on(this.source),t=>{vn(t)&&uc(t,this)}),this._active.clear(),Om(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=on(this.source).reduce((e,n)=>Math.max(e,(Iy(n)?n.priority:0)+1),0))}};function Rre(t){return t.idle!==!1}function SS(t){return!t.size||Array.from(t).every(Rre)}function Om(t){t.idle||(t.idle=!0,ye(Yf(t),e=>{e.done=!0}),dc(t,{type:"idle",parent:t}))}Jn.assign({createStringInterpolator:b4,to:(t,e)=>new Pre(t,e)});var H4=/^--/;function Ire(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!H4.test(t)&&!(Cl.hasOwnProperty(t)&&Cl[t])?e+"px":(""+e).trim()}var TS={};function Nre(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:r,style:o,children:s,scrollTop:i,scrollLeft:a,viewBox:l,...c}=e,d=Object.values(c),u=Object.keys(c).map(h=>n||t.hasAttribute(h)?h:TS[h]||(TS[h]=h.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in o)if(o.hasOwnProperty(h)){const f=Ire(h,o[h]);H4.test(h)?t.style.setProperty(h,f):t.style[h]=f}u.forEach((h,f)=>{t.setAttribute(h,d[f])}),r!==void 0&&(t.className=r),i!==void 0&&(t.scrollTop=i),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var Cl={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dre=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Ore=["Webkit","Ms","Moz","O"];Cl=Object.keys(Cl).reduce((t,e)=>(Ore.forEach(n=>t[Dre(n,e)]=t[e]),t),Cl);var Lre=/^(matrix|translate|scale|rotate|skew)/,jre=/^(translate)/,Bre=/^(rotate|skew)/,Lm=(t,e)=>O.num(t)&&t!==0?t+e:t,lu=(t,e)=>O.arr(t)?t.every(n=>lu(n,e)):O.num(t)?t===e:parseFloat(t)===e,Vre=class extends Qf{constructor({x:t,y:e,z:n,...r}){const o=[],s=[];(t||e||n)&&(o.push([t||0,e||0,n||0]),s.push(i=>[`translate3d(${i.map(a=>Lm(a,"px")).join(",")})`,lu(i,0)])),kr(r,(i,a)=>{if(a==="transform")o.push([i||""]),s.push(l=>[l,l===""]);else if(Lre.test(a)){if(delete r[a],O.und(i))return;const l=jre.test(a)?"px":Bre.test(a)?"deg":"";o.push(on(i)),s.push(a==="rotate3d"?([c,d,u,h])=>[`rotate3d(${c},${d},${u},${Lm(h,l)})`,lu(h,0)]:c=>[`${a}(${c.map(d=>Lm(d,l)).join(",")})`,lu(c,a.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new $re(o,s)),super(r)}},$re=class extends m4{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return ye(this.inputs,(n,r)=>{const o=zt(n[0]),[s,i]=this.transforms[r](O.arr(o)?o:n.map(zt));t+=" "+s,e=e&&i}),e?"none":t}observerAdded(t){t==1&&ye(this.inputs,e=>ye(e,n=>vn(n)&&Ea(n,this)))}observerRemoved(t){t==0&&ye(this.inputs,e=>ye(e,n=>vn(n)&&uc(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),dc(this,t)}},Hre=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Jn.assign({batchedUpdates:Fn.unstable_batchedUpdates,createStringInterpolator:b4,colors:Rne});var Fre=lre(Hre,{applyAnimatedValues:Nre,createAnimatedStyle:t=>new Vre(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Rh=Fre.animated;const zre="_container_32ncs_1",Ure="_checkedContainer_32ncs_14",Wre="_handle_32ncs_18",jm={container:zre,checkedContainer:Ure,handle:Wre},Gre=26;function qre({checked:t,onChange:e}){const n=ev({translateX:t?Gre:0});return m.jsx("div",{className:pe(jm.container,t&&jm.checkedContainer),onClick:()=>e(!t),children:m.jsx(Rh.div,{style:{transform:n.translateX.to(r=>`translateX(${r}px)`)},className:jm.handle})})}function Kre(t){return m.jsx("svg",{width:"24",height:"24",fill:"#00000075",viewBox:"0 0 448 512",className:$h.icon,...t,children:m.jsx("path",{d:"M224 232C237.3 232 248 242.7 248 256V304H296C309.3 304 320 314.7 320 328C320 341.3 309.3 352 296 352H248V400C248 413.3 237.3 424 224 424C210.7 424 200 413.3 200 400V352H152C138.7 352 128 341.3 128 328C128 314.7 138.7 304 152 304H200V256C200 242.7 210.7 232 224 232zM152 64H296V24C296 10.75 306.7 0 320 0C333.3 0 344 10.75 344 24V64H384C419.3 64 448 92.65 448 128V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V128C0 92.65 28.65 64 64 64H104V24C104 10.75 114.7 0 128 0C141.3 0 152 10.75 152 24V64zM48 448C48 456.8 55.16 464 64 464H384C392.8 464 400 456.8 400 448V192H48V448z"})})}const Zre="_container_16drl_1",Jre={container:Zre};var re=(t=>(t.Mon="mon",t.Tue="tue",t.Thu="thu",t.Wed="wed",t.Fri="fri",t.Sat="sat",t.Sun="sun",t))(re||{});R.createContext({createTask:()=>{},changeTaskStatus:()=>{},deleteTask:()=>{},updateTask:()=>{},currentTaskIds:[],setCurrentTaskIds:()=>{},getTaskDetail:()=>{},cancelProcessingTask:()=>{},createTaskFromWeeklyHobby:()=>{},getRecommendedTasks:()=>[],filter:{showDoneTask:!1,disableAddProgressTaskAtTop:!1,showAllTask:!1},setFilter:()=>{}});re.Mon,re.Tue,re.Thu,re.Wed,re.Fri,re.Sat,re.Sun;const Yre=({className:t,values:e,setValues:n})=>{const r=Bt(),o=ev({maxHeight:!e||e.length===0?0:80});return m.jsxs(m.Fragment,{children:[m.jsx(vt.ItemMeta,{className:t,logo:m.jsx(Kre,{}),title:r.formatMessage({defaultMessage:"Build Hobby",id:"label-build-Hobby"}),description:r.formatMessage({defaultMessage:"Select days to achieve a good hobby",id:"build-weekly-hobby-subtitle"}),rightComponent:m.jsx(qre,{checked:e?e.length!==0:!1,onChange:s=>{n(s?[re.Mon]:[])}})}),m.jsx(Rh.div,{className:Jre.container,style:{maxHeight:o.maxHeight},children:m.jsx(Cne,{values:e,setValues:n,options:[{label:"Mon",value:re.Mon},{label:"Tue",value:re.Tue},{label:"Thu",value:re.Thu},{label:"Wed",value:re.Wed},{label:"Fri",value:re.Fri},{label:"Sat",value:re.Sat},{label:"Sun",value:re.Sun}]})})]})},Xre="_color_11daa_2",Qre="_selected_11daa_8",eoe="_container_11daa_14",Sl={color:Xre,selected:Qre,container:eoe},toe=({value:t,onClick:e,className:n})=>m.jsx("div",{onClick:e,className:pe(Sl.color,Sl.selected,n),style:{backgroundColor:t}}),noe=({value:t,setValue:e,className:n})=>{const r=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"];return m.jsx("div",{className:pe(Sl.container,n),children:r.map((o,s)=>m.jsx("div",{className:pe(Sl.color,t===o&&Sl.selected),style:{backgroundColor:o},onClick:()=>e(o)},s))})},roe="_iconSearchInput_1bx6o_2",ooe="_inputContainer_1bx6o_9",soe="_container_1bx6o_14",ioe="_rightContainer_1bx6o_25",aoe="_colorView_1bx6o_31",loe="_colorPicker_1bx6o_51",bi={iconSearchInput:roe,inputContainer:ooe,container:soe,rightContainer:ioe,colorView:aoe,colorPicker:loe},F4=({selectedIcon:t,setSelectedIcon:e,className:n,selectedColor:r,setSelectedColor:o})=>{const[s,i]=b.useState(""),[a,l]=b.useState([]),[c,d]=b.useState(2),u=Bt(),h=async p=>{var v;const y=await(await fetch(`https://api.iconify.design/search?query=${p}`)).json();((v=y==null?void 0:y.icons)==null?void 0:v.length)>0&&l(y.icons)},f=p=>{e(p),d(2)};return m.jsxs("div",{className:pe(n,bi.container),children:[m.jsx(vt.ItemMeta,{logo:m.jsx(ie,{width:24,icon:"tdesign:icon"}),title:u.formatMessage({defaultMessage:"Icons",id:"icon-picker.title"}),rightComponent:m.jsx("div",{className:bi.rightContainer,children:m.jsx(ie,{width:24,icon:t,color:r})})}),m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:bi.inputContainer,children:[m.jsx(Sn,{placeholder:"Search icons...",border:"dash",value:s,onChange:p=>{i(p.target.value),h(p.target.value),c!==1&&d(1)},className:bi.iconSearchInput}),m.jsx(toe,{value:r,className:bi.colorView,onClick:()=>{d(0)}})]}),c===1&&m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",maxHeight:"300px",overflowY:"scroll"},children:a.map(p=>m.jsx("div",{onClick:()=>f(p),style:{padding:"10px",border:"2px solid transparent",cursor:"pointer"},children:m.jsx(ie,{icon:p,width:"24",height:"24",color:r})},p))}),c===0&&m.jsx(noe,{value:r,setValue:p=>{o(p),d(2)},className:bi.colorPicker})]})]})},coe="_selectorCard_1y25a_2",doe="_selected_1y25a_6",uoe="_closeIcon_1y25a_16",hoe="_resultInput_1y25a_26",foe="_addCustomField_1y25a_34",poe="_selector_1y25a_2",ps={selectorCard:coe,selected:doe,closeIcon:uoe,resultInput:hoe,addCustomField:foe,selector:poe},moe="_blurContainer_1iw2l_2",goe="_visible_1iw2l_18",yoe="_container_1iw2l_22",Bm={blurContainer:moe,visible:goe,container:yoe};function z4({children:t,visible:e,className:n,onBlur:r}){const[o,s]=b.useState(e);b.useEffect(()=>{e&&s(!0)},[e]);const i=ev({translateX:e?-100:0,opacity:e?1:0,onRest:()=>{e||s(!1)}});return!e&&!o?null:m.jsx(Rh.div,{className:pe(Bm.blurContainer,e&&Bm.visible),onClick:r,style:{visibility:o?"visible":"hidden",opacity:i.opacity},children:m.jsx(Rh.div,{className:pe(Bm.container,n),onClick:a=>a.stopPropagation(),style:{transform:i.translateX.to(a=>`translateY(${a}%)`),opacity:i.opacity},children:t})})}const boe="_customeFieldInput_x2u4g_2",voe="_addFieldButtonContainer_x2u4g_12",Vm={customeFieldInput:boe,addFieldButtonContainer:voe},woe=({className:t,onSubmit:e})=>{const n=Bt(),[r,o]=R.useState({icon:"octicon:goal-24",selectedIconColor:"#607d8b",type:"metric",title:"",unit:"",description:""}),{addRecordField:s}=B1();return m.jsxs("div",{className:pe(t),children:[m.jsx(vt.ItemMeta,{logo:m.jsx(ie,{width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Field Name",id:"label-record-custom.name.label"}),description:n.formatMessage({defaultMessage:"Ex: Push-ups, Squats",id:"label-record-custom.name.description"}),rightComponent:m.jsx(Sn,{value:r.title,onChange:i=>o({...r,title:i.target.value}),border:"dash",className:Vm.customeFieldInput})}),m.jsx(vt.ItemMeta,{logo:m.jsx(ie,{value:r.unit,width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Field Unit",id:"label-record-custom.unit.label"}),description:n.formatMessage({defaultMessage:"Ex: minutes, hours, reps, kg",id:"label-record-custom.unit.description"}),rightComponent:m.jsx(Sn,{border:"dash",onChange:i=>o({...r,unit:i.target.value}),className:Vm.customeFieldInput})}),m.jsx(vt.ItemMeta,{logo:m.jsx(ie,{width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Type",id:"label-record-custom.type.label"}),rightComponent:m.jsx(ng,{isButton:!0,value:r.type,onChangeValue:i=>o({...r,type:i}),options:[{label:"Metric",value:"metric"},{label:"Note",value:"note"}]})}),m.jsx(F4,{selectedIcon:r.icon,setSelectedIcon:i=>o({...r,icon:i}),selectedColor:r.selectedIconColor,setSelectedColor:i=>o({...r,selectedIconColor:i})}),m.jsx("div",{className:Vm.addFieldButtonContainer,children:m.jsx(Dt,{block:!0,size:"lg",type:"primary",onClick:()=>{s(r),e==null||e()},children:n.formatMessage({defaultMessage:"Save",id:"label-record-custom.save"})})})]})},xoe="_container_5hhs5_2",koe="_drawer_5hhs5_6",Coe="_header_5hhs5_15",$m={container:xoe,drawer:koe,header:Coe},Soe=({visible:t,onClose:e})=>{const n=Bt();return m.jsxs(z4,{className:$m.drawer,visible:t,onBlur:e,children:[m.jsxs("div",{className:$m.header,children:[m.jsx(le.Title,{noMargin:!0,level:3,children:n.formatMessage({defaultMessage:"Add more field to record",id:"label-record-custom.title"})}),m.jsx(ie,{width:32,icon:"material-symbols:close-rounded",onClick:e})]}),m.jsx(woe,{className:$m.container,onSubmit:e})]})},Toe=({selectedRecords:t=[],setSelectedRecords:e})=>{const{getAllRecordFields:n}=B1(),r=Bt(),[o,s]=R.useState(!1),[i,a]=R.useState(n());return R.useEffect(()=>{a(n())}),m.jsxs("div",{children:[m.jsx(Soe,{visible:o,onClose:()=>s(!1)}),m.jsx(o4,{options:i.map(l=>({...l,label:l.title,value:l.id})),classes:{container:ps.selector},renderInput:()=>t.length===0?m.jsx("div",{children:"Record & Metric"}):m.jsx("div",{className:ps.resultInput,children:t.map(l=>{const c=i.find(d=>d.id===l);return m.jsxs("div",{className:ps.selected,children:[c==null?void 0:c.title,m.jsx(ie,{icon:"material-symbols:close-rounded",width:16,height:16,color:"black",className:ps.closeIcon,onClick:()=>{e(t.filter(d=>d!==key))}})]})})}),renderOptionFooter:({close:l})=>m.jsx("div",{onClick:()=>{s(!0),l()},className:ps.addCustomField,children:r.formatMessage({id:"label-add-custom-field",defaultMessage:"Add custom field"})}),onChange:({id:l},{close:c})=>{c();const d=new Set([...t,l]);e([...d])},renderOption:l=>m.jsx(vt.ItemMeta,{className:ps.selectorCard,logo:m.jsx(ie,{width:24,icon:l.icon}),title:l.title,description:l.description})}),t.map(l=>{const c=i.find(d=>d.key===l);if(c)return m.jsx(vt.ItemMeta,{className:ps.selectorCard,logo:m.jsx(ie,{width:24,icon:c.icon}),title:c.title,description:c.description,rightComponent:m.jsx(Wf,{checked:!0,size:"lg",onClick:()=>{e(t.filter(d=>d!==l))}})})})]})},Eoe="_menu_gcrp7_1",Moe="_input_gcrp7_6",Aoe="_dashed_gcrp7_23",_oe="_container_gcrp7_30",Poe="_submitButton_gcrp7_34",Roe="_footer_gcrp7_51",Ioe="_footerCenter_gcrp7_63",bo={menu:Eoe,input:Moe,dashed:Aoe,container:_oe,submitButton:Poe,footer:Roe,footerCenter:Ioe},U4=({initialValues:t,onSubmit:e})=>{const[n,r]=R.useState(t),{selectedRecords:o,checklistText:s,weeklyHobbies:i,startedAt:a,selectedIcon:l,selectedColor:c}=n,d=v=>{r(x=>({...x,selectedRecords:v}))},u=v=>{r(x=>({...x,checklistText:v}))},h=v=>{r(x=>({...x,weeklyHobbies:v}))},f=v=>{r(x=>({...x,startedAt:v}))},p=v=>{r(x=>({...x,selectedIcon:v}))},g=v=>{r(x=>({...x,selectedColor:v}))},y=Bt();return Yn(),m.jsxs("div",{className:bo.container,children:[m.jsxs(Wn,{className:bo.container,children:[m.jsx("div",{className:bo.menu}),m.jsx(XQ,{placeholder:y.formatMessage({id:"CreateChecklist.label-create-checklist-input-placeholder",defaultMessage:"Write your task here"}),className:bo.input,maxRows:3,autoFocus:!0,onChange:v=>{u(v.currentTarget.value)},value:s}),m.jsx("hr",{className:bo.dashed}),m.jsx(Yre,{values:i,setValues:h}),m.jsx(Di,{}),m.jsx(F4,{selectedIcon:l,setSelectedIcon:p,selectedColor:c,setSelectedColor:g}),m.jsx(Di,{}),m.jsx(gne,{date:a,setDate:f}),m.jsx(Di,{}),m.jsx(Toe,{selectedRecords:o,setSelectedRecords:d})]}),m.jsx("div",{className:bo.footer,children:m.jsx("div",{className:bo.footerCenter,children:m.jsx(Dt,{type:"primary",className:bo.submitButton,onClick:()=>{e(n)},children:y.formatMessage({id:"CreateChecklist.label-submit",defaultMessage:"SUBMIT"})})})})]})},W4=({weeklyHobbies:t})=>{if(!(!t||t.length===0))return t.length===7?{startedAt:new Date().toISOString(),dayOfWeek:"*",minute:"0",hour:"8",dayOfMonth:"*",month:"*"}:{startedAt:new Date().toISOString(),minute:"0",hour:"8",dayOfMonth:"*",month:"*",dayOfWeek:t.map(e=>{switch(e){case re.Mon:return"1";case re.Tue:return"2";case re.Wed:return"3";case re.Thu:return"4";case re.Fri:return"5";case re.Sat:return"6";case re.Sun:return"0"}}).join(",")}},Noe=()=>{const t=new Date;return[re.Sun,re.Mon,re.Tue,re.Wed,re.Thu,re.Fri,re.Sat][t.getDay()]},Doe=()=>{const{addChecklistTemplate:t}=Qr(),{addChecklist:e}=zh(),n=Yn(),r=({startedAt:o,selectedRecords:s,selectedColor:i,selectedIcon:a,checklistText:l,weeklyHobbies:c})=>{const d=W4({weeklyHobbies:c}),{id:u}=t({title:l,repeat:d,avatar:{type:"icon",name:a,color:i},records:s});d||e({title:l,checklistTemplateId:u,startedAt:o,endedAt:new Date(new Date().setHours(23,59,59,999)).toISOString()}),n("/")};return m.jsxs(m.Fragment,{children:[m.jsx(V1,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Create Task"}),onClickLeftButton:()=>n("/")}),m.jsx(U4,{onSubmit:r,initialValues:{selectedRecords:[],checklistText:"",weeklyHobbies:[Noe()],startedAt:new Date().toISOString().split("T")[0],selectedIcon:"material-symbols:checklist",selectedColor:"#607d8b"}})]})},Ooe=t=>t!=null&&t.dayOfWeek?t.dayOfWeek==="*"?[re.Sun,re.Mon,re.Tue,re.Wed,re.Thu,re.Fri,re.Sat]:t.dayOfWeek.split(",").map(e=>{switch(e){case"0":return re.Sun;case"1":return re.Mon;case"2":return re.Tue;case"3":return re.Wed;case"4":return re.Thu;case"5":return re.Fri;case"6":return re.Sat;default:return re.Sun}}):[new Date().getDay()],Loe=()=>{var i,a,l;const{checklistTemplate:t}=Qr(),{id:e}=Q2(),n=t[e||""],{updateChecklistTemplate:r}=Qr(),o=Yn(),s=({startedAt:c,selectedRecords:d,selectedColor:u,selectedIcon:h,checklistText:f,weeklyHobbies:p})=>{const g=W4({weeklyHobbies:p});r({id:n.id,records:d,title:f,repeat:g,avatar:{type:"icon",name:h,color:u}}),o("/")};return m.jsxs(m.Fragment,{children:[m.jsx(V1,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Edit Task"}),onClickLeftButton:()=>o("/")}),m.jsx(U4,{onSubmit:s,initialValues:{selectedRecords:n.records,checklistText:n.title,weeklyHobbies:Ooe(n.repeat),startedAt:(i=n==null?void 0:n.repeat)!=null&&i.startedAt?new Date(n.repeat.startedAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],selectedIcon:(a=n==null?void 0:n.avatar)==null?void 0:a.name,selectedColor:((l=n==null?void 0:n.avatar)==null?void 0:l.color)||"#607d8b"}})]})},joe="_container_1czko_1",Boe={container:joe},Voe=()=>{const{chartData:t,updateChartDate:e}=cb();R.useEffect(()=>{e()},[]);const n={stroke:{curve:"smooth"},fill:{type:"gradient"},xaxis:{categories:t==null?void 0:t.categories}},r=[{name:"weight",data:t==null?void 0:t.weights},{name:"belly's size",data:t==null?void 0:t.bellySizes}];return!t||!t.categories||(t==null?void 0:t.categories.length)===0||(t==null?void 0:t.weights.length)===0||(t==null?void 0:t.bellySizes.length)===0?null:m.jsxs(Wn,{className:Boe.container,children:[m.jsx(le.Title,{level:3,noMargin:!0,children:"Timeline"}),m.jsx(TT,{options:n,series:r,type:"line"})]})},$oe="_header_1oykc_1",Hoe="_iconSuccess_1oykc_7",Foe="_numberInput_1oykc_13",zoe="_kgText_1oykc_21",Uoe="_titleAnswer_1oykc_27",Woe="_iconAnswerContainer_1oykc_33",Goe="_inputContainer_1oykc_37",qoe="_questionTitle_1oykc_44",Koe="_divider_1oykc_48",Zoe="_editFooter_1oykc_54",Me={header:$oe,iconSuccess:Hoe,numberInput:Foe,kgText:zoe,titleAnswer:Uoe,iconAnswerContainer:Woe,inputContainer:Goe,questionTitle:qoe,divider:Koe,editFooter:Zoe},Joe="_player_109l2_14",Yoe="_currentContainer_109l2_19",Xoe="_icon_109l2_33",Dd={player:Joe,currentContainer:Yoe,icon:Xoe},Qoe=t=>new Date(t.getTime()-24*60*60*1e3),ese=t=>new Date(t.getTime()+24*60*60*1e3),tse=({date:t,onDateChange:e,getText:n})=>{const r=new Date(t).toLocaleDateString()===new Date().toLocaleDateString();return m.jsxs("div",{className:Dd.player,children:[m.jsx(ie,{onClick:()=>e(Qoe(t)),width:30,icon:"basil:skip-prev-outline",className:Dd.icon}),m.jsx("div",{className:Dd.currentContainer,onClick:()=>e(new Date),children:n({isToday:r})}),m.jsx(ie,{onClick:()=>e(ese(t)),width:30,icon:"basil:skip-next-outline",className:Dd.icon})]})},nse="_container_fgz2s_1",rse={container:nse},ES=()=>{const[t,e]=R.useState(new Date),{updateCurrentBodyMetric:n}=cb(),r=o=>{e(o),n({date:o})};return m.jsx("div",{className:rse.container,children:m.jsx(tse,{date:t,onDateChange:r,getText:({isToday:o})=>o?"Today":new Date(t).toLocaleDateString()})})},ose=()=>{const[t,e]=R.useState(40),[n,r]=R.useState(50),{addBodyMetric:o,currentBodyMetric:s,currentDay:i}=cb(),[a,l]=R.useState(!!s);R.useEffect(()=>{l(!!s)},[s]),R.useEffect(()=>{s&&(e(s.weight),r(s.bellySize))},[s]);const c=Bt();return a&&s?m.jsxs(Wn,{children:[m.jsx(ES,{}),m.jsxs("div",{className:Me.header,children:[m.jsx(ie,{width:100,color:"rgba(16,154,0,0.16)",icon:"ion:checkmark-done-circle-outline",className:Me.iconSuccess}),m.jsx(le.Title,{level:3,className:Me.questionTitle,children:c.formatMessage({id:"pregnant-weight-record.label-recorded",defaultMessage:"You've already recorded your weight and belly's size."})})]}),m.jsx("div",{className:Me.divider}),m.jsxs("div",{className:Me.inputContainer,children:[m.jsxs("div",{className:Me.iconAnswerContainer,children:[m.jsx(ie,{width:24,icon:"icon-park-outline:industrial-scales"}),m.jsx(le.Text,{className:Me.titleAnswer,children:"Weight"})]}),m.jsx(Sn,{type:"number",readOnly:!0,className:Me.numberInput,value:s.weight,step:"0.01",min:20,max:120}),m.jsx(le.Text,{className:Me.kgText,children:"Kg"})]}),m.jsxs("div",{className:Me.inputContainer,children:[m.jsxs("div",{className:Me.iconAnswerContainer,children:[m.jsx(ie,{width:24,icon:"twemoji:straight-ruler"}),m.jsx(le.Text,{className:Me.titleAnswer,children:"Belly's Size"})]}),m.jsx(Sn,{type:"number",readOnly:!0,className:Me.numberInput,value:s.bellySize,step:"0.01",min:20,max:120}),m.jsx(le.Text,{className:Me.kgText,children:"Cm"})]}),m.jsx("div",{className:Me.editFooter,children:m.jsx(Dt,{onClick:()=>{l(!1)},children:"EDIT"})})]}):m.jsxs(Wn,{children:[m.jsx(ES,{}),m.jsx("div",{children:m.jsx(le.Title,{level:3,className:Me.questionTitle,children:c.formatMessage({id:"pregnant-weight-record.label-pregnant-weight",defaultMessage:"What's your weight {{day}}? And how's your belly growing, mama?"},{day:new Date(i).toLocaleDateString()===new Date().toLocaleDateString()?"today":new Date(i).toLocaleDateString()})})}),m.jsx("div",{className:Me.divider}),m.jsxs("div",{className:Me.inputContainer,children:[m.jsxs("div",{className:Me.iconAnswerContainer,children:[m.jsx(ie,{width:24,icon:"icon-park-outline:industrial-scales"}),m.jsx(le.Text,{className:Me.titleAnswer,children:"Weight"})]}),m.jsx(Sn,{type:"number",border:"dash",className:Me.numberInput,onChange:d=>e(Number(d.target.value)),value:t,step:"0.01",min:20,max:120}),m.jsx(le.Text,{className:Me.kgText,children:"Kg"})]}),m.jsxs("div",{className:Me.inputContainer,children:[m.jsxs("div",{className:Me.iconAnswerContainer,children:[m.jsx(ie,{width:24,icon:"twemoji:straight-ruler"}),m.jsx(le.Text,{className:Me.titleAnswer,children:"Belly's Size"})]}),m.jsx(Sn,{type:"number",border:"dash",className:Me.numberInput,value:n,onChange:d=>r(Number(d.target.value)),step:"0.01",min:20,max:120}),m.jsx(le.Text,{className:Me.kgText,children:"Cm"})]}),m.jsx(Dt,{onClick:()=>{o({weight:t,bellySize:n,createdAt:i.toISOString()}),l(!0)},children:"SUBMIT"})]})},sse=()=>m.jsxs("div",{children:[m.jsx(ose,{}),m.jsx(Voe,{})]});function ise(t){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...t,children:m.jsx("g",{id:"warning_amber_24px",children:m.jsx("path",{id:"icon/alert/warning_amber_24px",fillRule:"evenodd",clipRule:"evenodd",d:"M4.46999 20.5037C2.93001 20.5037 1.96999 18.8337 2.74001 17.5037L10.27 4.49374C11.04 3.16375 12.96 3.16375 13.73 4.49374L21.26 17.5037C22.03 18.8337 21.07 20.5037 19.53 20.5037H4.46999ZM19.53 18.5037L12 5.49374L4.46999 18.5037H19.53ZM11 10.5037V12.5037C11 13.0537 11.45 13.5037 12 13.5037C12.55 13.5037 13 13.0537 13 12.5037V10.5037C13 9.95376 12.55 9.50375 12 9.50375C11.45 9.50375 11 9.95376 11 10.5037ZM13 17.5037V15.5037H11V17.5037H13Z"})})})}const ase="_container_1avzj_1",lse={container:ase};function cse(){return m.jsx("hr",{className:lse.container})}const dse="_overlay_1ach8_2",use="_container_1ach8_17",hse="_content_1ach8_29",fse="_footer_1ach8_34",pse="_header_1ach8_44",mse="_logo_1ach8_49",gse="_icon_1ach8_64",yse="_title_1ach8_70",bse="_primaryButton_1ach8_74",vse="_secondaryButton_1ach8_81",tr={overlay:dse,container:use,content:hse,footer:fse,header:pse,logo:mse,icon:gse,title:yse,primaryButton:bse,secondaryButton:vse};function wse({visible:t,primaryButtonText:e,secondaryButtonText:n,primaryButtonOnClick:r,secondaryButtonClick:o,content:s,title:i}){return t?m.jsx("div",{className:tr.overlay,children:m.jsxs("div",{className:tr.container,children:[m.jsxs("div",{className:tr.header,children:[m.jsx("div",{className:tr.logo,children:m.jsx(ise,{className:tr.icon})}),m.jsx(le.Title,{className:tr.title,level:3,noMargin:!0,children:i})]}),m.jsx(cse,{}),m.jsx("div",{className:tr.content,children:s}),m.jsxs("div",{className:tr.footer,children:[m.jsx(Dt,{size:"lg",type:"ghost",className:tr.secondaryButton,onClick:o,children:n}),m.jsx(Dt,{onClick:r,size:"lg",className:tr.primaryButton,children:e})]})]})}):null}const xse="_card_1reeb_1",kse="_checklistItem_1reeb_6",Cse="_checklistTemplateContainer_1reeb_11",Sse="_checklistBody_1reeb_16",Tse="_text_1reeb_21",Ese="_checkbox_1reeb_26",Mse="_label_1reeb_31",Ase="_enabled_1reeb_40",_se="_footer_1reeb_45",Pse="_editIcon_1reeb_49",Rse="_deleteIcon_1reeb_60",fn={card:xse,checklistItem:kse,checklistTemplateContainer:Cse,checklistBody:Sse,text:Tse,checkbox:Ese,label:Mse,enabled:Ase,footer:_se,editIcon:Pse,deleteIcon:Rse},Ise=()=>{const{getRecommendChecklistTemplates:t,selectedChecklistTemplates:e,updateSelectedChecklistTemplate:n,deleteChecklistTemplate:r}=Qr(),o=Bt(),s=Yn(),[i,a]=R.useState(!1),[l,c]=R.useState(null),d=p=>{var v;const g=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],y=((v=p==null?void 0:p.dayOfWeek)==null?void 0:v.split(","))||[];return y.includes("*")?[{enabled:!0,text:o.formatMessage({id:"PregnantIntro.repeat.everyday",defaultMessage:"Every day"})}]:[0,1,2,3,4,5,6].map(x=>({day:x,enabled:y.includes(x.toString())||y.includes("*"),text:o.formatMessage({id:`PregnantIntro.repeat.${x}`,defaultMessage:g[x]})}))},u=p=>{c(p),a(!0)},h=()=>{l&&(r(l),a(!1),c(null))},f=()=>{a(!1),c(null)};return m.jsxs(m.Fragment,{children:[m.jsx(Wn,{className:fn.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:fn.label,children:o.formatMessage({id:"PregnantIntro.checklists-management",defaultMessage:"Checklist Template Management"})}),t().map(({id:p,title:g,avatar:y,repeat:v})=>m.jsxs("div",{className:fn.checklistTemplateContainer,children:[m.jsxs("div",{className:fn.checklistItem,children:[m.jsx(ie,{color:y.color||"#8A8A8A",width:32,height:32,icon:y.name}),m.jsx("div",{className:fn.checklistBody,children:m.jsx(le.Text,{className:fn.text,children:g})}),m.jsx(ie,{className:fn.editIcon,width:24,height:24,icon:"material-symbols:edit-outline",onClick:()=>s(`/edit-checklist/${p}`)}),m.jsx(ie,{className:fn.deleteIcon,width:24,height:24,icon:"material-symbols:delete-outline",onClick:()=>u(p)}),m.jsx(Wf,{checked:e.includes(p),onChange:x=>{const w=x.target.checked;n(w?[...e,p]:e.filter(C=>C!==p))},className:fn.checkbox})]}),m.jsx("div",{className:fn.footer,children:d(v).map(({enabled:x,text:w})=>m.jsx(le.Text,{className:pe(fn.text,{[fn.enabled]:x}),children:w},w))})]},p))]})}),m.jsx(wse,{visible:i,title:o.formatMessage({id:"ChecklistTemplate.delete-confirm-title",defaultMessage:"Delete Checklist Template"}),primaryButtonText:o.formatMessage({id:"ChecklistTemplate.delete-confirm-ok",defaultMessage:"Delete"}),primaryButtonOnClick:h,secondaryButtonText:o.formatMessage({id:"ChecklistTemplate.delete-confirm-cancel",defaultMessage:"Cancel"}),secondaryButtonClick:f,content:m.jsx(le.Text,{children:o.formatMessage({id:"ChecklistTemplate.delete-confirm-message",defaultMessage:"Are you sure you want to delete this checklist template? This action cannot be undone."})})})]})},Nse=JSON.parse(`[{"identify_key":"the_golden_heart","name":"The Golden Heart","detail":"In a small village nestled between rolling hills and a dense forest, there lived a young girl named Lily. Unlike other children who spent their days playing games, Lily spent her time helping others. She would carry water for the elderly, gather firewood for widows, and share her lunch with those who had none.\\n\\nOne particularly harsh winter, when food was scarce and the cold was unbearable, Lily noticed that many villagers were suffering. Despite having little herself, she decided to venture into the forest to find food and supplies for everyone. The forest was known to be dangerous, especially in winter, but Lily's heart was set on helping others.\\n\\nAs she wandered deeper into the forest, she came across an injured fox caught in a hunter's trap. While others might have passed by, Lily stopped to help. She carefully freed the fox, bandaged its wound, and shared her last piece of bread with it. To her surprise, the fox spoke to her in a gentle voice.\\n\\n'I am the Guardian of the Forest,' the fox said. 'Your kindness has touched my heart. I will help you find what you seek.' The fox led Lily to a hidden grove where magical plants grew year-round. There, she found enough food and medicinal herbs to help the entire village.\\n\\nBut the fox had one more gift. It touched Lily's chest with its paw, and her heart began to glow with a golden light. 'This is the mark of true kindness,' the fox explained. 'As long as you continue to help others, this light will guide you and protect you.'\\n\\nLily returned to the village with the supplies, and her golden heart became a beacon of hope. The villagers, inspired by her selflessness, began to help each other more. The village flourished, and Lily's story spread far and wide, teaching everyone that true wealth lies not in gold or possessions, but in the kindness we show to others.\\n\\nYears passed, and Lily grew into a wise woman. Her golden heart continued to glow, becoming brighter with each act of kindness she performed. The village became known as the Village of the Golden Heart, a place where people lived in harmony and helped one another without hesitation.","lesson":"True wealth and happiness come from helping others. Kindness is a gift that grows stronger the more you share it, and it has the power to transform not just individuals, but entire communities. When we put others before ourselves, we create a world where everyone can thrive."},{"identify_key":"the_patient_gardener","name":"The Patient Gardener","detail":"In a bustling city, there lived an old gardener named Mr. Chen. His small garden was the most beautiful in the neighborhood, filled with flowers that bloomed in perfect harmony. People often asked him his secret, but he would just smile and say, 'Patience and care.'\\n\\nOne spring, a young boy named Tom moved next door. He was eager to grow his own garden and asked Mr. Chen for help. The old gardener gave him some seeds and basic instructions, but Tom wanted results immediately. He watered the seeds too much, dug them up to check their progress, and became frustrated when nothing grew.\\n\\nMr. Chen watched quietly, then invited Tom to help in his garden. Day by day, he taught the boy about the importance of patience. 'Plants, like people, need time to grow,' he explained. 'You cannot rush nature.'\\n\\nAs the weeks passed, Tom learned to observe the subtle changes in his plants. He discovered that growth happens slowly, often when we're not looking. His garden began to flourish, and he found joy in the process of nurturing life.\\n\\nYears later, Tom became a successful botanist, known for his innovative methods. But he always credited Mr. Chen for teaching him the most important lesson: that true growth comes from patience and consistent care.","lesson":"Patience is a virtue that leads to lasting success. Growth takes time, and rushing the process often leads to failure. By learning to wait and nurture things properly, we can achieve beautiful results that last."},{"identify_key":"the_honest_merchant","name":"The Honest Merchant","detail":"In a busy marketplace, there was a merchant named Sarah who ran a small shop selling handmade crafts. While other merchants would sometimes exaggerate the quality of their goods to make sales, Sarah always told the truth about her products.\\n\\nOne day, a wealthy customer came to her shop looking for a special gift. Sarah showed her a beautiful vase, but honestly pointed out a small flaw that others might have hidden. The customer was surprised by her honesty and bought the vase anyway.\\n\\nWord of Sarah's integrity spread, and soon her shop became the most trusted in the market. People knew they could rely on her to tell the truth, even if it meant losing a sale. Her business grew steadily, while other merchants who had been dishonest found their customers leaving.\\n\\nYears later, when the market faced tough times, Sarah's shop remained strong. Her loyal customers supported her because they knew they could trust her completely. She became known as the merchant who proved that honesty is not just the best policy, but the most profitable one too.","lesson":"Honesty builds trust and lasting relationships. While it might seem easier to tell small lies for immediate gain, the truth always leads to better long-term success. Integrity is the foundation of any lasting business or relationship."},{"identify_key":"the_brave_little_turtle","name":"The Brave Little Turtle","detail":"In a peaceful pond, there lived a small turtle named Timmy. Unlike other turtles who spent their days basking in the sun, Timmy dreamed of exploring the world beyond the pond. The other turtles warned him about the dangers outside, but Timmy's curiosity grew stronger each day.\\n\\nOne morning, Timmy decided to venture beyond the pond's edge. The journey was difficult - he had to climb steep banks, cross a busy road, and face many challenges. But Timmy's determination never wavered.\\n\\nAlong the way, he met a lost baby bird who had fallen from its nest. Despite being small and slow, Timmy helped the bird find its way home. This act of kindness earned him the respect of the forest animals, who helped him on his journey.\\n\\nWhen Timmy finally reached the ocean, he discovered a whole new world of possibilities. He learned that being brave doesn't mean being fearless, but rather facing your fears and moving forward despite them. Timmy's adventures taught him that the world is full of wonder for those who dare to explore it.","lesson":"Courage is not the absence of fear, but the willingness to face it. By stepping out of our comfort zones, we discover new possibilities and grow stronger. Every challenge we overcome makes us more capable of handling future obstacles."},{"identify_key":"the_sharing_tree","name":"The Sharing Tree","detail":"In a magical forest, there stood an ancient tree that bore the most delicious fruits. The tree had a special rule: it would only give fruit to those who shared with others. Many animals came to the tree, but only those who understood the value of sharing received its gifts.\\n\\nOne summer, a young squirrel named Sammy discovered the tree. He was hungry and wanted to keep all the fruit for himself. But the tree remained silent, its branches empty. Sammy tried everything to get the fruit, but nothing worked.\\n\\nOne day, Sammy noticed a hungry bird nearby. Remembering his own hunger, he shared his last acorn with the bird. To his surprise, the tree suddenly bore fruit, and Sammy received more than he could have imagined.\\n\\nAs time passed, Sammy became known as the most generous squirrel in the forest. He learned that the more he shared, the more the tree gave him. The forest became a happier place as animals learned from Sammy's example, understanding that sharing brings abundance to everyone.","lesson":"Sharing creates abundance for everyone. When we give freely to others, we often receive more in return. Generosity creates a cycle of giving and receiving that benefits the entire community."},{"identify_key":"the_persistent_ant","name":"The Persistent Ant","detail":"In a vast garden, there lived a tiny ant named Andy. While other ants worked together in large groups, Andy preferred to work alone. He was determined to build the biggest anthill in the garden, despite being told it was impossible for one ant.\\n\\nDay after day, Andy carried grains of sand and small pebbles, building his hill one piece at a time. Other ants laughed at his efforts, but Andy never gave up. When storms came and destroyed his work, he simply started again.\\n\\nOne particularly bad storm left many ants homeless. Andy, who had built his hill strong and tall, opened his home to those in need. The other ants were amazed by his achievement and his kindness.\\n\\nThrough his persistence, Andy proved that even the smallest creature can achieve great things. His story taught the other ants that determination and hard work can overcome any obstacle, and that helping others makes success even sweeter.","lesson":"Persistence and determination can overcome any obstacle. Even the smallest efforts, when continued consistently, can lead to great achievements. Never underestimate the power of steady, focused work."},{"identify_key":"the_wise_owl","name":"The Wise Owl","detail":"In a tall oak tree, there lived an old owl named Oliver. He was known throughout the forest for his wisdom and ability to solve problems. Animals would come to him with their troubles, and he would listen carefully before offering advice.\\n\\nOne day, a group of young animals came to Oliver with a problem: they couldn't agree on how to share the forest's resources. Each wanted what was best for their own kind, leading to constant arguments.\\n\\nInstead of telling them what to do, Oliver asked them to look at the forest from his high perch. From there, they could see how everything was connected - how the trees provided homes for birds, how the streams watered the plants, and how each creature played a vital role.\\n\\nThe young animals realized that working together would benefit everyone. They learned that true wisdom comes from understanding how all parts of a system work together, and that cooperation leads to better solutions than competition.","lesson":"Wisdom comes from seeing the bigger picture and understanding how everything is connected. By working together and considering different perspectives, we can find solutions that benefit everyone."},{"identify_key":"the_grateful_rabbit","name":"The Grateful Rabbit","detail":"In a beautiful meadow, there lived a rabbit named Rosie who always found something to be grateful for, even on the darkest days. When it rained, she was thankful for the water that helped the flowers grow. When it was cold, she appreciated her warm burrow.\\n\\nOne winter, a terrible storm destroyed many animals' homes. While others complained about their losses, Rosie focused on what she still had - her family, her health, and her ability to help others.\\n\\nRosie organized the animals to help each other rebuild. She showed them how to find joy in small things, like a warm ray of sunshine or a shared meal. Her positive attitude inspired others to look for the good in every situation.\\n\\nAs the meadow recovered, the animals realized that Rosie's gratitude had helped them all survive the hard times. They learned that being thankful for what we have makes us stronger and helps us face life's challenges with hope.","lesson":"Gratitude transforms our perspective and helps us find joy in every situation. By focusing on what we have rather than what we lack, we can maintain hope and strength even in difficult times."},{"identify_key":"the_creative_caterpillar","name":"The Creative Caterpillar","detail":"In a colorful garden, there lived a caterpillar named Clara who saw the world differently from others. While other caterpillars followed the same paths and ate the same leaves, Clara explored new places and tried different foods.\\n\\nSome caterpillars thought Clara was strange, but she didn't mind. She believed that being different was a gift. She used her unique perspective to solve problems in new ways, like finding alternative food sources when the usual leaves were scarce.\\n\\nWhen it was time to build her cocoon, Clara chose a special spot that others had never considered. Her transformation was different too - she emerged as a butterfly with the most beautiful and unique pattern in the garden.\\n\\nClara's story taught the other creatures that being different is not a weakness but a strength. Her creativity and willingness to try new things led to discoveries that benefited the entire garden.","lesson":"Creativity and being different are strengths, not weaknesses. By embracing our uniqueness and thinking outside the box, we can find new solutions and create beautiful things that others might never imagine."},{"identify_key":"the_friendly_dragon","name":"The Friendly Dragon","detail":"In a kingdom surrounded by mountains, there lived a dragon named Drake. Unlike other dragons who hoarded gold and scared villagers, Drake was kind and helpful. He used his fire breath to light the town's lamps and his wings to create gentle breezes for the crops.\\n\\nAt first, the villagers were afraid of Drake, but he patiently showed them that he meant no harm. He helped build bridges, cleared paths through the mountains, and even babysat the children when their parents were busy.\\n\\nOne day, a group of knights came to slay the dragon, believing all dragons were dangerous. The villagers stood up for Drake, explaining how he had helped them. The knights were amazed to see a dragon who used his powers for good.\\n\\nDrake's story spread throughout the kingdom, teaching everyone that we shouldn't judge others by their appearance or what we've heard about them. True character is shown through actions, not stereotypes.","lesson":"Don't judge others by their appearance or what you've heard about them. Everyone deserves a chance to show their true character through their actions. Kindness and understanding can break down even the strongest prejudices."},{"identify_key":"the_determined_seed","name":"The Determined Seed","detail":"In a dry, rocky field, there was a tiny seed that dreamed of growing into a great tree. The other seeds told it that the soil was too poor and the conditions too harsh, but this seed refused to give up.\\n\\nDay after day, the seed pushed its roots deeper into the ground, searching for water and nutrients. It faced many challenges - scorching sun, strong winds, and hungry animals. But each obstacle made it stronger.\\n\\nYears passed, and the seed grew into a magnificent tree. Its roots had broken through the rocks, creating paths for water to flow. Its shade provided shelter for animals, and its leaves enriched the soil. The once-barren field became a thriving ecosystem.\\n\\nThe tree's story inspired other seeds to try growing in difficult places. They learned that challenges can be opportunities for growth, and that determination can transform even the harshest conditions into something beautiful.","lesson":"Challenges can be opportunities for growth. With determination and perseverance, we can overcome even the most difficult circumstances and create something beautiful that benefits others."},{"identify_key":"the_musical_stream","name":"The Musical Stream","detail":"In a quiet valley, there flowed a stream that had lost its song. Once, it had been known for its beautiful melodies as it danced over rocks and through meadows. But over time, it had become silent and still.\\n\\nOne day, a young girl named Melody came to the stream. She noticed its silence and decided to help it find its music again. She started by clearing away the fallen leaves and branches that had blocked its path. Then, she carefully placed small stones in patterns that would create gentle ripples.\\n\\nAs the water began to flow freely again, it started to make soft sounds. Melody added more stones, each placed with care to create different notes. Soon, the stream was singing a beautiful melody that echoed through the valley.\\n\\nThe stream's music attracted birds and animals, who added their own voices to the symphony. The valley became alive with sound, and people came from far and wide to hear the stream's song. Melody had shown that sometimes, all it takes is a little care and attention to bring back the music in our lives.","lesson":"Beauty and joy can be found in the simplest things. By taking care of our surroundings and adding our own creative touch, we can bring harmony and music to the world around us."},{"identify_key":"the_colorful_chameleon","name":"The Colorful Chameleon","detail":"In a vibrant jungle, there lived a chameleon named Charlie who was different from other chameleons. While his friends changed colors to blend in with their surroundings, Charlie loved to stand out with bright, bold colors.\\n\\nAt first, the other chameleons thought Charlie was strange. They believed that blending in was the only way to be safe. But Charlie showed them that being different could be beautiful and useful too.\\n\\nOne day, a group of lost butterflies flew into the jungle. They were tired and couldn't find their way home. Charlie used his bright colors to create a path of light through the dark jungle, guiding the butterflies to safety.\\n\\nThe other chameleons learned that sometimes, standing out and being different can help others. They began to appreciate their ability to change colors not just for hiding, but for creating beauty and helping those in need.","lesson":"Being different is a gift that can be used to help others. Sometimes, standing out and being unique is more valuable than blending in with the crowd."},{"identify_key":"the_dreaming_star","name":"The Dreaming Star","detail":"High in the night sky, there was a small star named Stella who had big dreams. While other stars were content to simply shine, Stella wanted to learn about the world below. She watched the Earth with wonder, curious about everything she saw.\\n\\nOne night, Stella noticed a little girl named Luna looking up at the stars. Luna was feeling sad and alone. Stella decided to shine extra bright, creating a special pattern of light just for Luna.\\n\\nLuna saw the star's special message and smiled. She started to write stories about the stars, imagining their adventures and dreams. Her stories brought joy to many children, and soon, people all over the world were looking up at the stars with wonder.\\n\\nStella learned that even though she couldn't visit Earth, she could still touch people's lives through her light. Her dreams of connecting with the world below came true in a way she never expected.","lesson":"Dreams can come true in unexpected ways. Even when we can't achieve our goals exactly as we planned, we can still make a difference and touch others' lives in meaningful ways."},{"identify_key":"the_helping_hands","name":"The Helping Hands","detail":"In a busy city, there was a small community garden where people from different backgrounds came together. Each person had their own plot, but they all shared tools and knowledge. The garden was a place of peace and cooperation.\\n\\nOne summer, a terrible storm damaged many of the garden plots. Some people lost their entire crops, while others had minor damage. Instead of focusing on their own losses, everyone came together to help each other rebuild.\\n\\nThey shared seeds, tools, and time. Those with undamaged plots offered space to those who had lost everything. They worked together to make the garden stronger than before, adding better drainage and wind protection.\\n\\nThe garden became a symbol of community strength. People learned that by helping others, they created a stronger, more resilient community. The garden flourished, and so did the friendships that grew there.","lesson":"Community strength comes from helping each other. When we work together and support one another, we can overcome any challenge and create something beautiful that benefits everyone."},{"identify_key":"the_wise_mountain","name":"The Wise Mountain","detail":"In a distant land, there stood an ancient mountain that had watched over the valley for thousands of years. The mountain had seen many changes - seasons coming and going, rivers changing course, and civilizations rising and falling.\\n\\nPeople would come to the mountain seeking wisdom, but the mountain never spoke. Instead, it taught through its presence. It showed that true strength comes from standing firm in the face of change, that beauty can be found in every season, and that perspective changes everything.\\n\\nOne day, a young shepherd named Kira came to the mountain, troubled by the changes in her village. She sat quietly, watching the mountain's shadow move across the valley. As she observed, she began to understand that change is natural and necessary.\\n\\nThe mountain taught Kira that wisdom comes from observation and patience. She returned to her village with a new understanding of how to face change with grace and strength.","lesson":"True wisdom comes from observation and patience. By learning to see the bigger picture and understanding that change is natural, we can face life's challenges with grace and strength."},{"identify_key":"the_dancing_clouds","name":"The Dancing Clouds","detail":"In the vast sky, there lived a group of clouds who loved to dance. They would swirl and twirl, creating beautiful patterns that delighted everyone who looked up. But one cloud, named Cirrus, was different. She preferred to stay still and watch the others dance.\\n\\nThe other clouds tried to convince Cirrus to join them, but she was afraid of making mistakes. She thought her movements wouldn't be as graceful as the others. One day, a strong wind came and forced all the clouds to move.\\n\\nTo her surprise, Cirrus discovered that she could dance too. Her movements were unique and beautiful in their own way. The other clouds were amazed by her style and began to incorporate her moves into their dances.\\n\\nThe sky became more beautiful than ever, with each cloud adding its own special touch to the dance. Cirrus learned that everyone has their own unique way of moving and that the beauty of dance comes from the combination of different styles.","lesson":"Everyone has their own unique talents and ways of expression. By embracing our individuality and sharing it with others, we can create something more beautiful than we could ever achieve alone."},{"identify_key":"the_healing_garden","name":"The Healing Garden","detail":"In a hospital courtyard, there was a neglected garden that had once been beautiful. The plants were wilted, the paths were overgrown, and no one visited anymore. But a young patient named Maya saw its potential.\\n\\nDespite being in a wheelchair, Maya started to care for the garden. She planted flowers that could grow in shade, added herbs with healing properties, and created paths that were accessible to everyone. Other patients began to help, each adding their own touch to the garden.\\n\\nAs the garden grew, it became a place of healing and hope. Patients would come to sit among the flowers, finding peace and strength in nature's beauty. Doctors noticed that patients who spent time in the garden recovered faster.\\n\\nThe garden taught everyone that healing comes in many forms. Sometimes, the act of creating something beautiful can be the best medicine of all.","lesson":"Healing can come from unexpected places. By creating beauty and nurturing life, we can bring hope and strength to ourselves and others."},{"identify_key":"the_singing_stones","name":"The Singing Stones","detail":"On a remote beach, there were special stones that could sing when the waves touched them. Each stone had its own unique sound, creating a beautiful symphony when the tide came in. But the stones were scattered and disorganized, their music chaotic.\\n\\nA young musician named Rio discovered the stones and decided to organize them. He spent days listening to each stone's sound, then arranged them in a pattern that created harmonious melodies. The stones' music became more beautiful than ever.\\n\\nPeople came from far and wide to hear the stones' song. They would sit on the beach, letting the music wash over them like the waves. The stones taught them that even the most ordinary things can create extraordinary beauty when they work together in harmony.","lesson":"Harmony comes from working together. When we organize our talents and work in concert with others, we can create something more beautiful than we could ever achieve alone."},{"identify_key":"the_light_bearer","name":"The Light Bearer","detail":"In a village that had lost its way, there lived a young girl named Lucia who carried a special lantern. The lantern's light was different from ordinary light - it could show people their true paths when they were lost.\\n\\nAt first, the villagers were afraid of the light. They had grown comfortable in their darkness and didn't want to see the truth. But Lucia was patient. She would sit with people, sharing her light gently until they were ready to see.\\n\\nOne by one, the villagers began to accept the light. They discovered new paths and possibilities they had never imagined. The village transformed, becoming a place of hope and growth.\\n\\nLucia's lantern taught everyone that sometimes, we need someone to show us the way, but we must be ready to see the light for ourselves.","lesson":"True guidance comes from within, but sometimes we need help to find our way. By being patient and gentle, we can help others discover their own path to light and truth."},{"identify_key":"the_whispering_wind","name":"The Whispering Wind","detail":"In a quiet valley, there was a special wind that could carry messages between people. It would whisper secrets, share stories, and bring comfort to those who were lonely. But the wind was shy and would only speak to those who truly listened.\\n\\nA young boy named Echo learned to listen to the wind. He would sit still for hours, hearing its stories and messages. The wind taught him about the valley's history, about the people who lived there, and about the importance of listening.\\n\\nEcho began to share the wind's messages with others. He helped people connect with each other, carrying their words and feelings through the valley. The community grew stronger as people learned to listen and understand each other better.\\n\\nThe wind's whispers taught everyone that true communication requires both speaking and listening, and that sometimes the most important messages are the ones we hear in the silence.","lesson":"True communication requires both speaking and listening. By learning to listen carefully, we can understand others better and create stronger connections in our community."}]`),Dse="_container_fe1o7_1",Ose="_header_fe1o7_7",MS={container:Dse,header:Ose},Lse=()=>{const[t,e]=mr("story_key",{story:{},seen:[]}),n=i=>{t.seen.includes(i)||e({...t,seen:[...t.seen,i]})},[r,o]=R.useState(""),s=i=>{o(r===i?"":i),n(i)};return m.jsx("div",{children:Nse.map(({name:i,detail:a,identify_key:l,lesson:c})=>{var d;return m.jsxs(Wn,{onClick:()=>{s(l)},className:MS.container,children:[m.jsxs("div",{className:MS.header,children:[m.jsx(le.Title,{level:3,noMargin:!0,children:i}),m.jsx(le.Text,{children:((d=t.seen)==null?void 0:d.includes(l))&&"Seen"})]}),r===l&&m.jsxs("div",{children:[m.jsx(le.Title,{level:4,noMargin:!0,children:"Detail"}),m.jsx(le.Paragraph,{children:a}),m.jsx(le.Title,{level:4,noMargin:!0,children:"Lesson"}),m.jsx(le.Paragraph,{children:c})]})]},l)})})},jse=()=>null,tv=b.createContext({});function nv(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const rv=typeof window<"u",G4=rv?b.useLayoutEffect:b.useEffect,ep=b.createContext(null),ov=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function q4(t){return typeof t=="object"&&t!==null}function sv(t){return q4(t)&&"offsetHeight"in t}class Bse extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=sv(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=o-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Vse({children:t,isPresent:e,anchorX:n}){const r=b.useId(),o=b.useRef(null),s=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=b.useContext(ov);return b.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:d,right:u}=s.current;if(e||!o.current||!a||!l)return;const h=n==="left"?`left: ${d}`:`right: ${u}`;o.current.dataset.motionPopId=r;const f=document.createElement("style");return i&&(f.nonce=i),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[e]),m.jsx(Bse,{isPresent:e,childRef:o,sizeRef:s,children:b.cloneElement(t,{ref:o})})}const $se=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:s,mode:i,anchorX:a})=>{const l=nv(Hse),c=b.useId();let d=!0,u=b.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:o,onExitComplete:h=>{l.set(h,!0);for(const f of l.values())if(!f)return;r&&r()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[n,l,r]);return s&&d&&(u={...u}),b.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[n]),b.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),i==="popLayout"&&(t=m.jsx(Vse,{isPresent:n,anchorX:a,children:t})),m.jsx(ep.Provider,{value:u,children:t})};function Hse(){return new Map}function K4(t=!0){const e=b.useContext(ep);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=e,s=b.useId();b.useEffect(()=>{if(t)return o(s)},[t]);const i=b.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,i]:[!0]}const Od=t=>t.key||"";function AS(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const Fse=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:s="sync",propagate:i=!1,anchorX:a="left"})=>{const[l,c]=K4(i),d=b.useMemo(()=>AS(t),[t]),u=i&&!l?[]:d.map(Od),h=b.useRef(!0),f=b.useRef(d),p=nv(()=>new Map),[g,y]=b.useState(d),[v,x]=b.useState(d);G4(()=>{h.current=!1,f.current=d;for(let k=0;k<v.length;k++){const S=Od(v[k]);u.includes(S)?p.delete(S):p.get(S)!==!0&&p.set(S,!1)}},[v,u.length,u.join("-")]);const w=[];if(d!==g){let k=[...d];for(let S=0;S<v.length;S++){const T=v[S],E=Od(T);u.includes(E)||(k.splice(S,0,T),w.push(T))}return s==="wait"&&w.length&&(k=w),x(AS(k)),y(d),null}const{forceRender:C}=b.useContext(tv);return m.jsx(m.Fragment,{children:v.map(k=>{const S=Od(k),T=i&&!l?!1:d===v||u.includes(S),E=()=>{if(p.has(S))p.set(S,!0);else return;let M=!0;p.forEach(P=>{P||(M=!1)}),M&&(C==null||C(),x(f.current),i&&(c==null||c()),r&&r())};return m.jsx($se,{isPresent:T,initial:!h.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:s,onExitComplete:T?void 0:E,anchorX:a,children:k},S)})})},Ld=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],_S={value:null};function zse(t,e){let n=new Set,r=new Set,o=!1,s=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(u){i.has(u)&&(d.schedule(u),t()),l++,u(a)}const d={schedule:(u,h=!1,f=!1)=>{const g=f&&o?n:r;return h&&i.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),i.delete(u)},process:u=>{if(a=u,o){s=!0;return}o=!0,[n,r]=[r,n],n.forEach(c),e&&_S.value&&_S.value.frameloop[e].push(l),l=0,n.clear(),o=!1,s&&(s=!1,d.process(u))}};return d}const no={},Use=40;function Z4(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=Ld.reduce((w,C)=>(w[C]=zse(s,e?C:void 0),w),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:f,postRender:p}=i,g=()=>{const w=no.useManualTiming?o.timestamp:performance.now();n=!1,no.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,Use),1)),o.timestamp=w,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),d.process(o),u.process(o),h.process(o),f.process(o),p.process(o),o.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,o.isProcessing||t(g)};return{schedule:Ld.reduce((w,C)=>{const k=i[C];return w[C]=(S,T=!1,E=!1)=>(n||y(),k.schedule(S,T,E)),w},{}),cancel:w=>{for(let C=0;C<Ld.length;C++)i[Ld[C]].cancel(w)},state:o,steps:i}}const Mn=t=>t,{schedule:Ve,cancel:Ko,state:at,steps:Hm}=Z4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mn,!0),J4=b.createContext({strict:!1}),PS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ia={};for(const t in PS)ia[t]={isEnabled:e=>PS[t].some(n=>!!e[n])};function Wse(t){for(const e in t)ia[e]={...ia[e],...t[e]}}const Gse=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ih(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Gse.has(t)}let Y4=t=>!Ih(t);function qse(t){t&&(Y4=e=>e.startsWith("on")?!Ih(e):t(e))}try{qse(require("@emotion/is-prop-valid").default)}catch{}function Kse(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(Y4(o)||n===!0&&Ih(o)||!e&&!Ih(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}function Zse(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}const tp=b.createContext({});function np(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function gc(t){return typeof t=="string"||Array.isArray(t)}const iv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],av=["initial",...iv];function rp(t){return np(t.animate)||av.some(e=>gc(t[e]))}function X4(t){return!!(rp(t)||t.variants)}function Jse(t,e){if(rp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||gc(n)?n:void 0,animate:gc(r)?r:void 0}}return t.inherit!==!1?e:{}}function Yse(t){const{initial:e,animate:n}=Jse(t,b.useContext(tp));return b.useMemo(()=>({initial:e,animate:n}),[RS(e),RS(n)])}function RS(t){return Array.isArray(t)?t.join(" "):t}const Xse=Symbol.for("motionComponentSymbol");function _i(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Qse(t,e,n){return b.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):_i(n)&&(n.current=r))},[e])}const lv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eie="framerAppearId",Q4="data-"+lv(eie),eI=b.createContext({}),{schedule:cv}=Z4(queueMicrotask,!1);function tie(t,e,n,r,o){var g,y;const{visualElement:s}=b.useContext(tp),i=b.useContext(J4),a=b.useContext(ep),l=b.useContext(ov).reducedMotion,c=b.useRef(null);r=r||i.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,u=b.useContext(eI);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&nie(c.current,n,o,u);const h=b.useRef(!1);b.useInsertionEffect(()=>{d&&h.current&&d.update(n,a)});const f=n[Q4],p=b.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,f)));return G4(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),cv.render(d.render),p.current&&d.animationState&&d.animationState.animateChanges())}),b.useEffect(()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),p.current=!1))}),d}function nie(t,e,n,r){const{layoutId:o,layout:s,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:tI(t.parent)),t.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!i||a&&_i(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function tI(t){if(t)return t.options.allowProjection!==!1?t.projection:tI(t.parent)}let dv=()=>{};function rie({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:o}){t&&Wse(t);function s(a,l){let c;const d={...b.useContext(ov),...a,layoutId:oie(a)},{isStatic:u}=d,h=Yse(a),f=r(a,u);if(!u&&rv){sie();const p=iie(d);c=p.MeasureLayout,h.visualElement=tie(o,f,d,e,p.ProjectionNode)}return m.jsxs(tp.Provider,{value:h,children:[c&&h.visualElement?m.jsx(c,{visualElement:h.visualElement,...d}):null,n(o,a,Qse(f,h.visualElement,l),f,u,h.visualElement)]})}s.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const i=b.forwardRef(s);return i[Xse]=o,i}function oie({layoutId:t}){const e=b.useContext(tv).id;return e&&t!==void 0?e+"-"+t:t}function sie(t,e){b.useContext(J4).strict}function iie(t){const{drag:e,layout:n}=ia;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const nI=t=>e=>typeof e=="string"&&e.startsWith(t),uv=nI("--"),aie=nI("var(--"),hv=t=>aie(t)?lie.test(t.split("/*")[0].trim()):!1,lie=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yc={};function cie(t){for(const e in t)yc[e]=t[e],uv(e)&&(yc[e].isCSSVariable=!0)}const Ma=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Aa=new Set(Ma);function rI(t,{layout:e,layoutId:n}){return Aa.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!yc[t]||t==="opacity")}const oI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ro=(t,e,n)=>n>e?e:n<t?t:n,_a={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},bc={..._a,transform:t=>ro(0,1,t)},jd={..._a,default:1},IS={..._a,transform:Math.round},ed=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wo=ed("deg"),hr=ed("%"),te=ed("px"),die=ed("vh"),uie=ed("vw"),NS={...hr,parse:t=>hr.parse(t)/100,transform:t=>hr.transform(t*100)},hie={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:jd,scaleX:jd,scaleY:jd,scaleZ:jd,skew:wo,skewX:wo,skewY:wo,distance:te,translateX:te,translateY:te,translateZ:te,x:te,y:te,z:te,perspective:te,transformPerspective:te,opacity:bc,originX:NS,originY:NS,originZ:te},fv={borderWidth:te,borderTopWidth:te,borderRightWidth:te,borderBottomWidth:te,borderLeftWidth:te,borderRadius:te,radius:te,borderTopLeftRadius:te,borderTopRightRadius:te,borderBottomRightRadius:te,borderBottomLeftRadius:te,width:te,maxWidth:te,height:te,maxHeight:te,top:te,right:te,bottom:te,left:te,padding:te,paddingTop:te,paddingRight:te,paddingBottom:te,paddingLeft:te,margin:te,marginTop:te,marginRight:te,marginBottom:te,marginLeft:te,backgroundPositionX:te,backgroundPositionY:te,...hie,zIndex:IS,fillOpacity:bc,strokeOpacity:bc,numOctaves:IS},fie={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pie=Ma.length;function mie(t,e,n){let r="",o=!0;for(let s=0;s<pie;s++){const i=Ma[s],a=t[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=oI(a,fv[i]);if(!l){o=!1;const d=fie[i]||i;r+=`${d}(${c}) `}n&&(e[i]=c)}}return r=r.trim(),n?r=n(e,o?"":r):o&&(r="none"),r}function pv(t,e,n){const{style:r,vars:o,transformOrigin:s}=t;let i=!1,a=!1;for(const l in e){const c=e[l];if(Aa.has(l)){i=!0;continue}else if(uv(l)){o[l]=c;continue}else{const d=oI(c,fv[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(i||n?r.transform=mie(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const mv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),xt=t=>!!(t&&t.getVelocity);function sI(t,e,n){for(const r in e)!xt(e[r])&&!rI(r,n)&&(t[r]=e[r])}function gie({transformTemplate:t},e){return b.useMemo(()=>{const n=mv();return pv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function yie(t,e){const n=t.style||{},r={};return sI(r,n,t),Object.assign(r,gie(t,e)),r}function bie(t,e){const n={},r=yie(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const vie={offset:"stroke-dashoffset",array:"stroke-dasharray"},wie={offset:"strokeDashoffset",array:"strokeDasharray"};function xie(t,e,n=1,r=0,o=!0){t.pathLength=1;const s=o?vie:wie;t[s.offset]=te.transform(-r);const i=te.transform(e),a=te.transform(n);t[s.array]=`${i} ${a}`}function iI(t,{attrX:e,attrY:n,attrScale:r,pathLength:o,pathSpacing:s=1,pathOffset:i=0,...a},l,c,d){if(pv(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:u,style:h}=t;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete u.transformBox),e!==void 0&&(u.x=e),n!==void 0&&(u.y=n),r!==void 0&&(u.scale=r),o!==void 0&&xie(u,o,s,i,!1)}const aI=()=>({...mv(),attrs:{}}),lI=t=>typeof t=="string"&&t.toLowerCase()==="svg";function kie(t,e,n,r){const o=b.useMemo(()=>{const s=aI();return iI(s,e,lI(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};sI(s,t.style,t),o.style={...s,...o.style}}return o}const Cie=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gv(t){return typeof t!="string"||t.includes("-")?!1:!!(Cie.indexOf(t)>-1||/[A-Z]/u.test(t))}function Sie(t=!1){return(n,r,o,{latestValues:s},i)=>{const l=(gv(n)?kie:bie)(r,s,i,n),c=Kse(r,typeof n=="string",t),d=n!==b.Fragment?{...c,...l,ref:o}:{},{children:u}=r,h=b.useMemo(()=>xt(u)?u.get():u,[u]);return b.createElement(n,{...d,children:h})}}function DS(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function yv(t,e,n,r){if(typeof e=="function"){const[o,s]=DS(r);e=e(n!==void 0?n:t.custom,o,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,s]=DS(r);e=e(n!==void 0?n:t.custom,o,s)}return e}function cu(t){return xt(t)?t.get():t}function Tie({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,o){return{latestValues:Eie(n,r,o,t),renderState:e()}}const cI=t=>(e,n)=>{const r=b.useContext(tp),o=b.useContext(ep),s=()=>Tie(t,e,r,o);return n?s():nv(s)};function Eie(t,e,n,r){const o={},s=r(t,{});for(const h in s)o[h]=cu(s[h]);let{initial:i,animate:a}=t;const l=rp(t),c=X4(t);e&&c&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const u=d?a:i;if(u&&typeof u!="boolean"&&!np(u)){const h=Array.isArray(u)?u:[u];for(let f=0;f<h.length;f++){const p=yv(t,h[f]);if(p){const{transitionEnd:g,transition:y,...v}=p;for(const x in v){let w=v[x];if(Array.isArray(w)){const C=d?w.length-1:0;w=w[C]}w!==null&&(o[x]=w)}for(const x in g)o[x]=g[x]}}}return o}function bv(t,e,n){var s;const{style:r}=t,o={};for(const i in r)(xt(r[i])||e.style&&xt(e.style[i])||rI(i,t)||((s=n==null?void 0:n.getValue(i))==null?void 0:s.liveStyle)!==void 0)&&(o[i]=r[i]);return o}const Mie={useVisualState:cI({scrapeMotionValuesFromProps:bv,createRenderState:mv})};function dI(t,e,n){const r=bv(t,e,n);for(const o in t)if(xt(t[o])||xt(e[o])){const s=Ma.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[s]=t[o]}return r}const Aie={useVisualState:cI({scrapeMotionValuesFromProps:dI,createRenderState:aI})};function _ie(t,e){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const i={...gv(r)?Aie:Mie,preloadedFeatures:t,useRender:Sie(o),createVisualElement:e,Component:r};return rie(i)}}function vc(t,e,n){const r=t.getProps();return yv(r,e,n!==void 0?n:r.custom,t)}const Dy=t=>Array.isArray(t);let du;function Pie(){du=void 0}const Gt={now:()=>(du===void 0&&Gt.set(at.isProcessing||no.useManualTiming?at.timestamp:performance.now()),du),set:t=>{du=t,queueMicrotask(Pie)}};function vv(t,e){t.indexOf(e)===-1&&t.push(e)}function wv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class xv{constructor(){this.subscriptions=[]}add(e){return vv(this.subscriptions,e),()=>wv(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let s=0;s<o;s++){const i=this.subscriptions[s];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function uI(t,e){return e?t*(1e3/e):0}const OS=30,Rie=t=>!isNaN(parseFloat(t));class Iie{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{var i,a;const s=Gt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();o&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Rie(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new xv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ve.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>OS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,OS);return uI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function aa(t,e){return new Iie(t,e)}function Nie(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,aa(n))}function Die(t){return Dy(t)?t[t.length-1]||0:t}function Oie(t,e){const n=vc(t,e);let{transitionEnd:r={},transition:o={},...s}=n||{};s={...s,...r};for(const i in s){const a=Die(s[i]);Nie(t,i,a)}}function Lie(t){return!!(xt(t)&&t.add)}function Oy(t,e){const n=t.getValue("willChange");if(Lie(n))return n.add(e);if(!n&&no.WillChange){const r=new no.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function hI(t){return t.props[Q4]}const jie=t=>t!==null;function Bie(t,{repeat:e,repeatType:n="loop"},r){const o=t.filter(jie),s=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[s]}const Vie={type:"spring",stiffness:500,damping:25,restSpeed:10},$ie=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Hie={type:"keyframes",duration:.8},Fie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zie=(t,{keyframes:e})=>e.length>2?Hie:Aa.has(t)?t.startsWith("scale")?$ie(e[1]):Vie:Fie;function Uie({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:i,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function kv(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const fr=t=>t*1e3,pr=t=>t/1e3,Tl=t=>Math.round(t*1e5)/1e5,Cv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Wie(t){return t==null}const Gie=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sv=(t,e)=>n=>!!(typeof n=="string"&&Gie.test(n)&&n.startsWith(t)||e&&!Wie(n)&&Object.prototype.hasOwnProperty.call(n,e)),fI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[o,s,i,a]=r.match(Cv);return{[t]:parseFloat(o),[e]:parseFloat(s),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},qie=t=>ro(0,255,t),Fm={..._a,transform:t=>Math.round(qie(t))},_s={test:Sv("rgb","red"),parse:fI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Fm.transform(t)+", "+Fm.transform(e)+", "+Fm.transform(n)+", "+Tl(bc.transform(r))+")"};function Kie(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Ly={test:Sv("#"),parse:Kie,transform:_s.transform},Pi={test:Sv("hsl","hue"),parse:fI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+hr.transform(Tl(e))+", "+hr.transform(Tl(n))+", "+Tl(bc.transform(r))+")"},bt={test:t=>_s.test(t)||Ly.test(t)||Pi.test(t),parse:t=>_s.test(t)?_s.parse(t):Pi.test(t)?Pi.parse(t):Ly.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_s.transform(t):Pi.transform(t)},Zie=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Jie(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Cv))==null?void 0:e.length)||0)+(((n=t.match(Zie))==null?void 0:n.length)||0)>0}const pI="number",mI="color",Yie="var",Xie="var(",LS="${}",Qie=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},o=[];let s=0;const a=e.replace(Qie,l=>(bt.test(l)?(r.color.push(s),o.push(mI),n.push(bt.parse(l))):l.startsWith(Xie)?(r.var.push(s),o.push(Yie),n.push(l)):(r.number.push(s),o.push(pI),n.push(parseFloat(l))),++s,LS)).split(LS);return{values:n,split:a,indexes:r,types:o}}function gI(t){return wc(t).values}function yI(t){const{split:e,types:n}=wc(t),r=e.length;return o=>{let s="";for(let i=0;i<r;i++)if(s+=e[i],o[i]!==void 0){const a=n[i];a===pI?s+=Tl(o[i]):a===mI?s+=bt.transform(o[i]):s+=o[i]}return s}}const eae=t=>typeof t=="number"?0:t;function tae(t){const e=gI(t);return yI(t)(e.map(eae))}const Zo={test:Jie,parse:gI,createTransformer:yI,getAnimatableNone:tae};function zm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function nae({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,s=0,i=0;if(!e)o=s=i=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;o=zm(l,a,t+1/3),s=zm(l,a,t),i=zm(l,a,t-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:r}}function Nh(t,e){return n=>n>0?e:t}const je=(t,e,n)=>t+(e-t)*n,Um=(t,e,n)=>{const r=t*t,o=n*(e*e-r)+r;return o<0?0:Math.sqrt(o)},rae=[Ly,_s,Pi],oae=t=>rae.find(e=>e.test(t));function jS(t){const e=oae(t);if(!e)return!1;let n=e.parse(t);return e===Pi&&(n=nae(n)),n}const BS=(t,e)=>{const n=jS(t),r=jS(e);if(!n||!r)return Nh(t,e);const o={...n};return s=>(o.red=Um(n.red,r.red,s),o.green=Um(n.green,r.green,s),o.blue=Um(n.blue,r.blue,s),o.alpha=je(n.alpha,r.alpha,s),_s.transform(o))},jy=new Set(["none","hidden"]);function sae(t,e){return jy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}const iae=(t,e)=>n=>e(t(n)),td=(...t)=>t.reduce(iae);function aae(t,e){return n=>je(t,e,n)}function Tv(t){return typeof t=="number"?aae:typeof t=="string"?hv(t)?Nh:bt.test(t)?BS:dae:Array.isArray(t)?bI:typeof t=="object"?bt.test(t)?BS:lae:Nh}function bI(t,e){const n=[...t],r=n.length,o=t.map((s,i)=>Tv(s)(s,e[i]));return s=>{for(let i=0;i<r;i++)n[i]=o[i](s);return n}}function lae(t,e){const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=Tv(t[o])(t[o],e[o]));return o=>{for(const s in r)n[s]=r[s](o);return n}}function cae(t,e){const n=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const s=e.types[o],i=t.indexes[s][r[s]],a=t.values[i]??0;n[o]=a,r[s]++}return n}const dae=(t,e)=>{const n=Zo.createTransformer(e),r=wc(t),o=wc(e);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?jy.has(t)&&!o.values.length||jy.has(e)&&!r.values.length?sae(t,e):td(bI(cae(r,o),o.values),n):Nh(t,e)};function vI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?je(t,e,n):Tv(t)(t,e)}const uae=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ve.update(e,n),stop:()=>Ko(e),now:()=>at.isProcessing?at.timestamp:Gt.now()}},wI=(t,e,n=10)=>{let r="";const o=Math.max(Math.round(e/n),2);for(let s=0;s<o;s++)r+=t(s/(o-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Dh=2e4;function Ev(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Dh;)e+=n,r=t.next(e);return e>=Dh?1/0:e}function hae(t,e=100,n){const r=n({...t,keyframes:[0,e]}),o=Math.min(Ev(r),Dh);return{type:"keyframes",ease:s=>r.next(o*s).value/e,duration:pr(o)}}const fae=5;function xI(t,e,n){const r=Math.max(e-fae,0);return uI(n-t(r),e-r)}const Fe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},VS=.001;function pae({duration:t=Fe.duration,bounce:e=Fe.bounce,velocity:n=Fe.velocity,mass:r=Fe.mass}){let o,s,i=1-e;i=ro(Fe.minDamping,Fe.maxDamping,i),t=ro(Fe.minDuration,Fe.maxDuration,pr(t)),i<1?(o=c=>{const d=c*i,u=d*t,h=d-n,f=By(c,i),p=Math.exp(-u);return VS-h/f*p},s=c=>{const u=c*i*t,h=u*n+n,f=Math.pow(i,2)*Math.pow(c,2)*t,p=Math.exp(-u),g=By(Math.pow(c,2),i);return(-o(c)+VS>0?-1:1)*((h-f)*p)/g}):(o=c=>{const d=Math.exp(-c*t),u=(c-n)*t+1;return-.001+d*u},s=c=>{const d=Math.exp(-c*t),u=(n-c)*(t*t);return d*u});const a=5/t,l=gae(o,s,a);if(t=fr(t),isNaN(l))return{stiffness:Fe.stiffness,damping:Fe.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:t}}}const mae=12;function gae(t,e,n){let r=n;for(let o=1;o<mae;o++)r=r-t(r)/e(r);return r}function By(t,e){return t*Math.sqrt(1-e*e)}const yae=["duration","bounce"],bae=["stiffness","damping","mass"];function $S(t,e){return e.some(n=>t[n]!==void 0)}function vae(t){let e={velocity:Fe.velocity,stiffness:Fe.stiffness,damping:Fe.damping,mass:Fe.mass,isResolvedFromDuration:!1,...t};if(!$S(t,bae)&&$S(t,yae))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,s=2*ro(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:Fe.mass,stiffness:o,damping:s}}else{const n=pae(t);e={...e,...n,mass:Fe.mass},e.isResolvedFromDuration=!0}return e}function Oh(t=Fe.visualDuration,e=Fe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:o}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:f}=vae({...n,velocity:-pr(n.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*d)),y=i-s,v=pr(Math.sqrt(l/d)),x=Math.abs(y)<5;r||(r=x?Fe.restSpeed.granular:Fe.restSpeed.default),o||(o=x?Fe.restDelta.granular:Fe.restDelta.default);let w;if(g<1){const k=By(v,g);w=S=>{const T=Math.exp(-g*v*S);return i-T*((p+g*v*y)/k*Math.sin(k*S)+y*Math.cos(k*S))}}else if(g===1)w=k=>i-Math.exp(-v*k)*(y+(p+v*y)*k);else{const k=v*Math.sqrt(g*g-1);w=S=>{const T=Math.exp(-g*v*S),E=Math.min(k*S,300);return i-T*((p+g*v*y)*Math.sinh(E)+k*y*Math.cosh(E))/k}}const C={calculatedDuration:f&&u||null,next:k=>{const S=w(k);if(f)a.done=k>=u;else{let T=k===0?p:0;g<1&&(T=k===0?fr(p):xI(w,k,S));const E=Math.abs(T)<=r,M=Math.abs(i-S)<=o;a.done=E&&M}return a.value=a.done?i:S,a},toString:()=>{const k=Math.min(Ev(C),Dh),S=wI(T=>C.next(k*T).value,k,30);return k+"ms "+S},toTransition:()=>{}};return C}Oh.applyToOptions=t=>{const e=hae(t,100,Oh);return t.ease=e.ease,t.duration=fr(e.duration),t.type="keyframes",t};function Vy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=t[0],h={done:!1,value:u},f=E=>a!==void 0&&E<a||l!==void 0&&E>l,p=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let g=n*e;const y=u+g,v=i===void 0?y:i(y);v!==y&&(g=v-u);const x=E=>-g*Math.exp(-E/r),w=E=>v+x(E),C=E=>{const M=x(E),P=w(E);h.done=Math.abs(M)<=c,h.value=h.done?v:P};let k,S;const T=E=>{f(h.value)&&(k=E,S=Oh({keyframes:[h.value,p(h.value)],velocity:xI(w,E,h.value),damping:o,stiffness:s,restDelta:c,restSpeed:d}))};return T(0),{calculatedDuration:null,next:E=>{let M=!1;return!S&&k===void 0&&(M=!0,C(E),T(E)),k!==void 0&&E>=k?S.next(E-k):(!M&&C(E),h)}}}const xc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};function wae(t,e,n){const r=[],o=n||no.mix||vI,s=t.length-1;for(let i=0;i<s;i++){let a=o(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||Mn:e;a=td(l,a)}r.push(a)}return r}function xae(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const s=t.length;if(dv(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=wae(e,r,o),l=a.length,c=d=>{if(i&&d<t[0])return e[0];let u=0;if(l>1)for(;u<t.length-2&&!(d<t[u+1]);u++);const h=xc(t[u],t[u+1],d);return a[u](h)};return n?d=>c(ro(t[0],t[s-1],d)):c}function kae(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=xc(0,e,r);t.push(je(n,1,o))}}function Cae(t){const e=[0];return kae(e,t.length-1),e}function Sae(t,e){return t.map(n=>n*e)}const kI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Tae=1e-7,Eae=12;function Mae(t,e,n,r,o){let s,i,a=0;do i=e+(n-e)/2,s=kI(i,r,o)-t,s>0?n=i:e=i;while(Math.abs(s)>Tae&&++a<Eae);return i}function nd(t,e,n,r){if(t===e&&n===r)return Mn;const o=s=>Mae(s,0,1,t,n);return s=>s===0||s===1?s:kI(o(s),e,r)}const Aae=nd(.42,0,1,1),_ae=nd(0,0,.58,1),CI=nd(.42,0,.58,1),Pae=t=>Array.isArray(t)&&typeof t[0]!="number",SI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,TI=t=>e=>1-t(1-e),EI=nd(.33,1.53,.69,.99),Mv=TI(EI),MI=SI(Mv),AI=t=>(t*=2)<1?.5*Mv(t):.5*(2-Math.pow(2,-10*(t-1))),Av=t=>1-Math.sin(Math.acos(t)),_I=TI(Av),PI=SI(Av),RI=t=>Array.isArray(t)&&typeof t[0]=="number",Rae={linear:Mn,easeIn:Aae,easeInOut:CI,easeOut:_ae,circIn:Av,circInOut:PI,circOut:_I,backIn:Mv,backInOut:MI,backOut:EI,anticipate:AI},Iae=t=>typeof t=="string",HS=t=>{if(RI(t)){dv(t.length===4);const[e,n,r,o]=t;return nd(e,n,r,o)}else if(Iae(t))return Rae[t];return t};function Nae(t,e){return t.map(()=>e||CI).splice(0,t.length-1)}function El({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=Pae(r)?r.map(HS):HS(r),s={done:!1,value:e[0]},i=Sae(n&&n.length===e.length?n:Cae(e),t),a=xae(i,e,{ease:Array.isArray(o)?o:Nae(e,o)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Dae=t=>t!==null;function _v(t,{repeat:e,repeatType:n="loop"},r,o=1){const s=t.filter(Dae),a=o<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Oae={decay:Vy,inertia:Vy,tween:El,keyframes:El,spring:Oh};function II(t){typeof t.type=="string"&&(t.type=Oae[t.type])}class Pv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Lae=t=>t/100;class Rv extends Pv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(n=!0)=>{var r,o;if(n){const{motionValue:s}=this.options;s&&s.updatedAt!==Gt.now()&&this.tick(Gt.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;II(e);const{type:n=El,repeat:r=0,repeatDelay:o=0,repeatType:s,velocity:i=0}=e;let{keyframes:a}=e;const l=n||El;l!==El&&typeof a[0]!="number"&&(this.mixKeyframes=td(Lae,vI(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-i})),c.calculatedDuration===null&&(c.calculatedDuration=Ev(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:o,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:u,repeatType:h,repeatDelay:f,type:p,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>o;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let w=this.currentTime,C=r;if(u){const E=Math.min(this.currentTime,o)/a;let M=Math.floor(E),P=E%1;!P&&E>=1&&(P=1),P===1&&M--,M=Math.min(M,u+1),!!(M%2)&&(h==="reverse"?(P=1-P,f&&(P-=f/a)):h==="mirror"&&(C=i)),w=ro(0,1,P)*a}const k=x?{done:!1,value:d[0]}:C.next(w);s&&(k.value=s(k.value));let{done:S}=k;!x&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&p!==Vy&&(k.value=_v(d,this.options,y,this.speed)),g&&g(k.value),T&&this.finish(),k}then(e,n){return this.finished.then(e,n)}get duration(){return pr(this.calculatedDuration)}get time(){return pr(this.currentTime)}set time(e){var n;e=fr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Gt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=pr(this.currentTime))}play(){var o,s;if(this.isStopped)return;const{driver:e=uae,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),(s=(o=this.options).onPlay)==null||s.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function jae(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ps=t=>t*180/Math.PI,$y=t=>{const e=Ps(Math.atan2(t[1],t[0]));return Hy(e)},Bae={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:$y,rotateZ:$y,skewX:t=>Ps(Math.atan(t[1])),skewY:t=>Ps(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Hy=t=>(t=t%360,t<0&&(t+=360),t),FS=$y,zS=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),US=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Vae={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zS,scaleY:US,scale:t=>(zS(t)+US(t))/2,rotateX:t=>Hy(Ps(Math.atan2(t[6],t[5]))),rotateY:t=>Hy(Ps(Math.atan2(-t[2],t[0]))),rotateZ:FS,rotate:FS,skewX:t=>Ps(Math.atan(t[4])),skewY:t=>Ps(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Fy(t){return t.includes("scale")?1:0}function zy(t,e){if(!t||t==="none")return Fy(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=Vae,o=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Bae,o=a}if(!o)return Fy(e);const s=r[e],i=o[1].split(",").map(Hae);return typeof s=="function"?s(i):i[s]}const $ae=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return zy(n,e)};function Hae(t){return parseFloat(t.trim())}const WS=t=>t===_a||t===te,Fae=new Set(["x","y","z"]),zae=Ma.filter(t=>!Fae.has(t));function Uae(t){const e=[];return zae.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>zy(e,"x"),y:(t,{transform:e})=>zy(e,"y")};Vs.translateX=Vs.x;Vs.translateY=Vs.y;const $s=new Set;let Uy=!1,Wy=!1,Gy=!1;function NI(){if(Wy){const t=Array.from($s).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const o=Uae(r);o.length&&(n.set(r,o),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([s,i])=>{var a;(a=r.getValue(s))==null||a.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Wy=!1,Uy=!1,$s.forEach(t=>t.complete(Gy)),$s.clear()}function DI(){$s.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Wy=!0)})}function Wae(){Gy=!0,DI(),NI(),Gy=!1}class Iv{constructor(e,n,r,o,s,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=o,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?($s.add(this),Uy||(Uy=!0,Ve.read(DI),Ve.resolveKeyframes(NI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:o}=this;if(e[0]===null){const s=o==null?void 0:o.get(),i=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,i);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=i),o&&s===void 0&&o.set(e[0])}jae(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),$s.delete(this)}cancel(){this.state==="scheduled"&&($s.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Gae=t=>t.startsWith("--");function qae(t,e,n){Gae(e)?t.style.setProperty(e,n):t.style[e]=n}function Nv(t){let e;return()=>(e===void 0&&(e=t()),e)}const Kae=Nv(()=>window.ScrollTimeline!==void 0),Zae={};function Jae(t,e){const n=Nv(t);return()=>Zae[e]??n()}const OI=Jae(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,GS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sl([0,.65,.55,1]),circOut:sl([.55,0,1,.45]),backIn:sl([.31,.01,.66,-.59]),backOut:sl([.33,1.53,.69,.99])};function LI(t,e){if(t)return typeof t=="function"?OI()?wI(t,e):"ease-out":RI(t)?sl(t):Array.isArray(t)?t.map(n=>LI(n,e)||GS.easeOut):GS[t]}function Yae(t,e,n,{delay:r=0,duration:o=300,repeat:s=0,repeatType:i="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const u=LI(a,o);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:i==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(d,h)}function jI(t){return typeof t=="function"&&"applyToOptions"in t}function Xae({type:t,...e}){return jI(t)&&OI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Qae extends Pv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:o,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=i,this.options=e,dv(typeof e.type!="string");const c=Xae(e);this.animation=Yae(n,r,o,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=_v(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):qae(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return pr(Number(e))}get time(){return pr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=fr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Kae()?(this.animation.timeline=e,Mn):n(this)}}const BI={anticipate:AI,backInOut:MI,circInOut:PI};function ele(t){return t in BI}function tle(t){typeof t.ease=="string"&&ele(t.ease)&&(t.ease=BI[t.ease])}const qS=10;class nle extends Qae{constructor(e){tle(e),II(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:o,element:s,...i}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Rv({...i,autoplay:!1}),l=fr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-qS).value,a.sample(l).value,qS),a.stop()}}const KS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zo.test(t)||t==="0")&&!t.startsWith("url("));function rle(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ole(t,e,n,r){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],i=KS(o,e),a=KS(s,e);return!i||!a?!1:rle(t)||(n==="spring"||jI(n))&&r}const sle=new Set(["opacity","clipPath","filter","transform"]),ile=Nv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ale(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:o,damping:s,type:i}=t;if(!sv((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return ile()&&n&&sle.has(n)&&(n!=="transform"||!l)&&!a&&!r&&o!=="mirror"&&s!==0&&i!=="inertia"}const lle=40;class cle extends Pv{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:i="loop",keyframes:a,name:l,motionValue:c,element:d,...u}){var p;super(),this.stop=()=>{var g,y;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=Gt.now();const h={autoplay:e,delay:n,type:r,repeat:o,repeatDelay:s,repeatType:i,name:l,motionValue:c,element:d,...u},f=(d==null?void 0:d.KeyframeResolver)||Iv;this.keyframeResolver=new f(a,(g,y,v)=>this.onKeyframesResolved(g,y,h,!v),l,c,d),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,o){this.keyframeResolver=void 0;const{name:s,type:i,velocity:a,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=Gt.now(),ole(e,s,i,a)||((no.instantAnimations||!l)&&(d==null||d(_v(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const h={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>lle?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},f=!c&&ale(h)?new nle({...h,element:h.motionValue.owner.current}):new Rv(h);f.finished.then(()=>this.notifyFinished()).catch(Mn),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Wae()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Dv=(t,e,n,r={},o,s)=>i=>{const a=kv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-fr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:o};Uie(a)||Object.assign(d,zie(t,d)),d.duration&&(d.duration=fr(d.duration)),d.repeatDelay&&(d.repeatDelay=fr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let u=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(u=!0)),(no.instantAnimations||no.skipAnimations)&&(u=!0,d.duration=0,d.delay=0),d.allowFlatten=!a.type&&!a.ease,u&&!s&&e.get()!==void 0){const h=Bie(d.keyframes,a);if(h!==void 0){Ve.update(()=>{d.onUpdate(h),d.onComplete()});return}}return a.isSync?new Rv(d):new cle(d)},VI=new Set(["width","height","top","left","right","bottom",...Ma]);function dle({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function $I(t,e,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:i,...a}=e;r&&(s=r);const l=[],c=o&&t.animationState&&t.animationState.getState()[o];for(const d in a){const u=t.getValue(d,t.latestValues[d]??null),h=a[d];if(h===void 0||c&&dle(c,d))continue;const f={delay:n,...kv(s||{},d)},p=u.get();if(p!==void 0&&!u.isAnimating&&!Array.isArray(h)&&h===p&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const v=hI(t);if(v){const x=window.MotionHandoffAnimation(v,d,Ve);x!==null&&(f.startTime=x,g=!0)}}Oy(t,d),u.start(Dv(d,u,h,t.shouldReduceMotion&&VI.has(d)?{type:!1}:f,t,g));const y=u.animation;y&&l.push(y)}return i&&Promise.all(l).then(()=>{Ve.update(()=>{i&&Oie(t,i)})}),l}function qy(t,e,n={}){var l;const r=vc(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const s=r?()=>Promise.all($I(t,r,n)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=o;return ule(t,e,d+c,u,h,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[c,d]=a==="beforeChildren"?[s,i]:[i,s];return c().then(()=>d())}else return Promise.all([s(),i(n.delay)])}function ule(t,e,n=0,r=0,o=1,s){const i=[],a=(t.variantChildren.size-1)*r,l=o===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(hle).forEach((c,d)=>{c.notify("AnimationStart",e),i.push(qy(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(i)}function hle(t,e){return t.sortNodePosition(e)}function fle(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(s=>qy(t,s,n));r=Promise.all(o)}else if(typeof e=="string")r=qy(t,e,n);else{const o=typeof e=="function"?vc(t,e,n.custom):e;r=Promise.all($I(t,o,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function HI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const ple=av.length;function FI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?FI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<ple;n++){const r=av[n],o=t.props[r];(gc(o)||o===!1)&&(e[r]=o)}return e}const mle=[...iv].reverse(),gle=iv.length;function yle(t){return e=>Promise.all(e.map(({animation:n,options:r})=>fle(t,n,r)))}function ble(t){let e=yle(t),n=ZS(),r=!0;const o=l=>(c,d)=>{var h;const u=vc(t,d,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(u){const{transition:f,transitionEnd:p,...g}=u;c={...c,...g,...p}}return c};function s(l){e=l(t)}function i(l){const{props:c}=t,d=FI(t.parent)||{},u=[],h=new Set;let f={},p=1/0;for(let y=0;y<gle;y++){const v=mle[y],x=n[v],w=c[v]!==void 0?c[v]:d[v],C=gc(w),k=v===l?x.isActive:null;k===!1&&(p=y);let S=w===d[v]&&w!==c[v]&&C;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...f},!x.isActive&&k===null||!w&&!x.prevProp||np(w)||typeof w=="boolean")continue;const T=vle(x.prevProp,w);let E=T||v===l&&x.isActive&&!S&&C||y>p&&C,M=!1;const P=Array.isArray(w)?w:[w];let B=P.reduce(o(v),{});k===!1&&(B={});const{prevResolvedValues:$={}}=x,W={...$,...B},Y=L=>{E=!0,h.has(L)&&(M=!0,h.delete(L)),x.needsAnimating[L]=!0;const j=t.getValue(L);j&&(j.liveStyle=!1)};for(const L in W){const j=B[L],V=$[L];if(f.hasOwnProperty(L))continue;let ee=!1;Dy(j)&&Dy(V)?ee=!HI(j,V):ee=j!==V,ee?j!=null?Y(L):h.add(L):j!==void 0&&h.has(L)?Y(L):x.protectedKeys[L]=!0}x.prevProp=w,x.prevResolvedValues=B,x.isActive&&(f={...f,...B}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(S&&T)||M)&&u.push(...P.map(L=>({animation:L,options:{type:v}})))}if(h.size){const y={};if(typeof c.initial!="boolean"){const v=vc(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(y.transition=v.transition)}h.forEach(v=>{const x=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),y[v]=x??null}),u.push({animation:y})}let g=!!u.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(u):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)==null||u.forEach(h=>{var f;return(f=h.animationState)==null?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=i(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:i,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=ZS(),r=!0}}}function vle(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!HI(e,t):!1}function ms(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZS(){return{animate:ms(!0),whileInView:ms(),whileHover:ms(),whileTap:ms(),whileDrag:ms(),whileFocus:ms(),exit:ms()}}class as{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wle extends as{constructor(e){super(e),e.animationState||(e.animationState=ble(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();np(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let xle=0;class kle extends as{constructor(){super(...arguments),this.id=xle++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Cle={animation:{Feature:wle},exit:{Feature:kle}};function kc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Ov=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function rd(t){return{point:{x:t.pageX,y:t.pageY}}}const Sle=t=>e=>Ov(e)&&t(e,rd(e));function Ml(t,e,n,r){return kc(t,e,Sle(n),r)}function zI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Tle({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ele(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const UI=1e-4,Mle=1-UI,Ale=1+UI,WI=.01,_le=0-WI,Ple=0+WI;function It(t){return t.max-t.min}function Rle(t,e,n){return Math.abs(t-e)<=n}function JS(t,e,n,r=.5){t.origin=r,t.originPoint=je(e.min,e.max,t.origin),t.scale=It(n)/It(e),t.translate=je(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Mle&&t.scale<=Ale||isNaN(t.scale))&&(t.scale=1),(t.translate>=_le&&t.translate<=Ple||isNaN(t.translate))&&(t.translate=0)}function Al(t,e,n,r){JS(t.x,e.x,n.x,r?r.originX:void 0),JS(t.y,e.y,n.y,r?r.originY:void 0)}function YS(t,e,n){t.min=n.min+e.min,t.max=t.min+It(e)}function Ile(t,e,n){YS(t.x,e.x,n.x),YS(t.y,e.y,n.y)}function XS(t,e,n){t.min=e.min-n.min,t.max=t.min+It(e)}function _l(t,e,n){XS(t.x,e.x,n.x),XS(t.y,e.y,n.y)}const QS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ri=()=>({x:QS(),y:QS()}),e2=()=>({min:0,max:0}),Ge=()=>({x:e2(),y:e2()});function gn(t){return[t("x"),t("y")]}function Wm(t){return t===void 0||t===1}function Ky({scale:t,scaleX:e,scaleY:n}){return!Wm(t)||!Wm(e)||!Wm(n)}function ys(t){return Ky(t)||GI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function GI(t){return t2(t.x)||t2(t.y)}function t2(t){return t&&t!=="0%"}function Lh(t,e,n){const r=t-n,o=e*r;return n+o}function n2(t,e,n,r,o){return o!==void 0&&(t=Lh(t,o,r)),Lh(t,n,r)+e}function Zy(t,e=0,n=1,r,o){t.min=n2(t.min,e,n,r,o),t.max=n2(t.max,e,n,r,o)}function qI(t,{x:e,y:n}){Zy(t.x,e.translate,e.scale,e.originPoint),Zy(t.y,n.translate,n.scale,n.originPoint)}const r2=.999999999999,o2=1.0000000000001;function Nle(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let s,i;for(let a=0;a<o;a++){s=n[a],i=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ni(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,qI(t,i)),r&&ys(s.latestValues)&&Ni(t,s.latestValues))}e.x<o2&&e.x>r2&&(e.x=1),e.y<o2&&e.y>r2&&(e.y=1)}function Ii(t,e){t.min=t.min+e,t.max=t.max+e}function s2(t,e,n,r,o=.5){const s=je(t.min,t.max,o);Zy(t,e,n,s,r)}function Ni(t,e){s2(t.x,e.x,e.scaleX,e.scale,e.originX),s2(t.y,e.y,e.scaleY,e.scale,e.originY)}function KI(t,e){return zI(Ele(t.getBoundingClientRect(),e))}function Dle(t,e,n){const r=KI(t,n),{scroll:o}=e;return o&&(Ii(r.x,o.offset.x),Ii(r.y,o.offset.y)),r}const ZI=({current:t})=>t?t.ownerDocument.defaultView:null,i2=(t,e)=>Math.abs(t-e);function Ole(t,e){const n=i2(t.x,e.x),r=i2(t.y,e.y);return Math.sqrt(n**2+r**2)}class JI{constructor(e,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=qm(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=Ole(u.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=u,{timestamp:g}=at;this.history.push({...p,timestamp:g});const{onStart:y,onMove:v}=this.handlers;h||(y&&y(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Gm(h,this.transformPagePoint),Ve.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=qm(u.type==="pointercancel"?this.lastMoveEventInfo:Gm(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,y),p&&p(u,y)},!Ov(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const i=rd(e),a=Gm(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=at;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,qm(a,this.history)),this.removeListeners=td(Ml(this.contextWindow,"pointermove",this.handlePointerMove),Ml(this.contextWindow,"pointerup",this.handlePointerUp),Ml(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ko(this.updatePoint)}}function Gm(t,e){return e?{point:e(t.point)}:t}function a2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qm({point:t},e){return{point:t,delta:a2(t,YI(e)),offset:a2(t,Lle(e)),velocity:jle(e,.1)}}function Lle(t){return t[0]}function YI(t){return t[t.length-1]}function jle(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=YI(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>fr(e)));)n--;if(!r)return{x:0,y:0};const s=pr(o.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const i={x:(o.x-r.x)/s,y:(o.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Ble(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?je(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?je(n,t,r.max):Math.min(t,n)),t}function l2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Vle(t,{top:e,left:n,bottom:r,right:o}){return{x:l2(t.x,n,o),y:l2(t.y,e,r)}}function c2(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $le(t,e){return{x:c2(t.x,e.x),y:c2(t.y,e.y)}}function Hle(t,e){let n=.5;const r=It(t),o=It(e);return o>r?n=xc(e.min,e.max-r,t.min):r>o&&(n=xc(t.min,t.max-o,e.min)),ro(0,1,n)}function Fle(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Jy=.35;function zle(t=Jy){return t===!1?t=0:t===!0&&(t=Jy),{x:d2(t,"left","right"),y:d2(t,"top","bottom")}}function d2(t,e,n){return{min:u2(t,e),max:u2(t,n)}}function u2(t,e){return typeof t=="number"?t:t[e]||0}const Dn={x:!1,y:!1};function XI(){return Dn.x||Dn.y}function Ule(t){return t==="x"||t==="y"?Dn[t]?null:(Dn[t]=!0,()=>{Dn[t]=!1}):Dn.x||Dn.y?null:(Dn.x=Dn.y=!0,()=>{Dn.x=Dn.y=!1})}const Wle=new WeakMap;class Gle{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ge(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rd(d).point)},s=(d,u)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ule(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gn(y=>{let v=this.getAxisMotionValue(y).get()||0;if(hr.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[y];w&&(v=It(w)*(parseFloat(v)/100))}}this.originPoint[y]=v}),p&&Ve.postRender(()=>p(d,u)),Oy(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(d,u)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:y}=u;if(f&&this.currentDirection===null){this.currentDirection=qle(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,y),this.updateAxis("y",u.point,y),this.visualElement.render(),g&&g(d,u)},a=(d,u)=>this.stop(d,u),l=()=>gn(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)==null?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new JI(e,{onSessionStart:o,onStart:s,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ZI(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&Ve.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!Bd(e,o,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=Ble(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,o=this.constraints;e&&_i(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Vle(r.layoutBox,e):this.constraints=!1,this.elastic=zle(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gn(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Fle(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!_i(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=Dle(r,o.root,this.visualElement.getTransformPagePoint());let i=$le(o.layout.layoutBox,s);if(n){const a=n(Tle(i));this.hasMutatedConstraints=!!a,a&&(i=zI(a))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=gn(d=>{if(!Bd(d,n,this.currentDirection))return;let u=l&&l[d]||{};i&&(u={min:0,max:0});const h=o?200:1e6,f=o?40:1e7,p={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Oy(this.visualElement,e),r.start(Dv(e,r,0,n,this.visualElement,!1))}stopAnimation(){gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){gn(n=>{const{drag:r}=this.getProps();if(!Bd(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:a}=o.layout.layoutBox[n];s.set(e[n]-je(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!_i(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};gn(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();o[i]=Hle({min:l,max:l},this.constraints[i])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gn(i=>{if(!Bd(i,e,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set(je(l,c,o[i]))})}addListeners(){if(!this.visualElement.current)return;Wle.set(this.visualElement,this);const e=this.visualElement.current,n=Ml(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();_i(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Ve.read(r);const i=kc(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(gn(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=l[d].translate,u.set(u.get()+l[d].translate))}),this.visualElement.render())});return()=>{i(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:i=Jy,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function Bd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function qle(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Kle extends as{constructor(e){super(e),this.removeGroupControls=Mn,this.removeListeners=Mn,this.controls=new Gle(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const h2=t=>(e,n)=>{t&&Ve.postRender(()=>t(e,n))};class Zle extends as{constructor(){super(...arguments),this.removePointerDownListener=Mn}onPointerDown(e){this.session=new JI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:h2(e),onStart:h2(n),onMove:r,onEnd:(s,i)=>{delete this.session,o&&Ve.postRender(()=>o(s,i))}}}mount(){this.removePointerDownListener=Ml(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const uu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function f2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(te.test(t))t=parseFloat(t);else return t;const n=f2(t,e.target.x),r=f2(t,e.target.y);return`${n}% ${r}%`}},Jle={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=Zo.parse(t);if(o.length>5)return r;const s=Zo.createTransformer(t),i=typeof o[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;o[0+i]/=a,o[1+i]/=l;const c=je(a,l,.5);return typeof o[2+i]=="number"&&(o[2+i]/=c),typeof o[3+i]=="number"&&(o[3+i]/=c),s(o)}};class Yle extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:s}=e;cie(Xle),s&&(n.group&&n.group.add(s),r&&r.register&&o&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),uu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:s}=this.props,{projection:i}=r;return i&&(i.isPresent=s,o||e.layoutDependency!==n||n===void 0||e.isPresent!==s?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||Ve.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),cv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function QI(t){const[e,n]=K4(),r=b.useContext(tv);return m.jsx(Yle,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(eI),isPresent:e,safeToRemove:n})}const Xle={borderRadius:{...qa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qa,borderTopRightRadius:qa,borderBottomLeftRadius:qa,borderBottomRightRadius:qa,boxShadow:Jle};function Qle(t,e,n){const r=xt(t)?t:aa(t);return r.start(Dv("",r,e,n)),r.animation}const ece=(t,e)=>t.depth-e.depth;class tce{constructor(){this.children=[],this.isDirty=!1}add(e){vv(this.children,e),this.isDirty=!0}remove(e){wv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ece),this.isDirty=!1,this.children.forEach(e)}}function nce(t,e){const n=Gt.now(),r=({timestamp:o})=>{const s=o-n;s>=e&&(Ko(r),t(s-e))};return Ve.setup(r,!0),()=>Ko(r)}const eN=["TopLeft","TopRight","BottomLeft","BottomRight"],rce=eN.length,p2=t=>typeof t=="string"?parseFloat(t):t,m2=t=>typeof t=="number"||te.test(t);function oce(t,e,n,r,o,s){o?(t.opacity=je(0,n.opacity??1,sce(r)),t.opacityExit=je(e.opacity??1,0,ice(r))):s&&(t.opacity=je(e.opacity??1,n.opacity??1,r));for(let i=0;i<rce;i++){const a=`border${eN[i]}Radius`;let l=g2(e,a),c=g2(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||m2(l)===m2(c)?(t[a]=Math.max(je(p2(l),p2(c),r),0),(hr.test(c)||hr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=je(e.rotate||0,n.rotate||0,r))}function g2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sce=tN(0,.5,_I),ice=tN(.5,.95,Mn);function tN(t,e,n){return r=>r<t?0:r>e?1:n(xc(t,e,r))}function y2(t,e){t.min=e.min,t.max=e.max}function pn(t,e){y2(t.x,e.x),y2(t.y,e.y)}function b2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function v2(t,e,n,r,o){return t-=e,t=Lh(t,1/n,r),o!==void 0&&(t=Lh(t,1/o,r)),t}function ace(t,e=0,n=1,r=.5,o,s=t,i=t){if(hr.test(e)&&(e=parseFloat(e),e=je(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=je(s.min,s.max,r);t===s&&(a-=e),t.min=v2(t.min,e,n,a,o),t.max=v2(t.max,e,n,a,o)}function w2(t,e,[n,r,o],s,i){ace(t,e[n],e[r],e[o],e.scale,s,i)}const lce=["x","scaleX","originX"],cce=["y","scaleY","originY"];function x2(t,e,n,r){w2(t.x,e,lce,n?n.x:void 0,r?r.x:void 0),w2(t.y,e,cce,n?n.y:void 0,r?r.y:void 0)}function k2(t){return t.translate===0&&t.scale===1}function nN(t){return k2(t.x)&&k2(t.y)}function C2(t,e){return t.min===e.min&&t.max===e.max}function dce(t,e){return C2(t.x,e.x)&&C2(t.y,e.y)}function S2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function rN(t,e){return S2(t.x,e.x)&&S2(t.y,e.y)}function T2(t){return It(t.x)/It(t.y)}function E2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uce{constructor(){this.members=[]}add(e){vv(this.members,e),e.scheduleRender()}remove(e){if(wv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hce(t,e,n){let r="";const o=t.x.translate/e.x,s=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((o||s||i)&&(r=`translate3d(${o}px, ${s}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:u,rotateY:h,skewX:f,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}function oN(t){return q4(t)&&"ownerSVGElement"in t}function fce(t){return oN(t)&&t.tagName==="svg"}const Km=["","X","Y","Z"],pce={visibility:"hidden"},mce=1e3;let gce=0;function Zm(t,e,n,r){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),r&&(r[t]=0))}function sN(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ve,!(o||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&sN(r)}function iN({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},a=e==null?void 0:e()){this.id=gce++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vce),this.nodes.forEach(Sce),this.nodes.forEach(Tce),this.nodes.forEach(wce)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new tce)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new xv),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=oN(i)&&!fce(i),this.instance=i;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d;const u=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=nce(u,250),uu.hasAnimatedSinceResize&&(uu.hasAnimatedSinceResize=!1,this.nodes.forEach(A2))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||Pce,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=c.getProps(),v=!this.targetLayout||!rN(this.targetLayout,f),x=!u&&h;if(this.options.layoutRoot||this.resumeFrom||x||u&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const w={...kv(p,"layout"),onPlay:g,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else u||A2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ko(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ece),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(M2);return}this.isUpdating||this.nodes.forEach(kce),this.isUpdating=!1,this.nodes.forEach(Cce),this.nodes.forEach(yce),this.nodes.forEach(bce),this.clearAllSnapshots();const a=Gt.now();at.delta=ro(0,1e3/60,a-at.timestamp),at.timestamp=a,at.isProcessing=!0,Hm.update.process(at),Hm.preRender.process(at),Hm.render.process(at),at.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xce),this.sharedNodes.forEach(Mce)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!It(this.snapshot.measuredBox.x)&&!It(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!nN(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;i&&this.instance&&(a||ys(this.latestValues)||d)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),Rce(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:i}=this.options;if(!i)return Ge();const a=i.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Ice))){const{scroll:d}=this.root;d&&(Ii(a.x,d.offset.x),Ii(a.y,d.offset.y))}return a}removeElementScroll(i){var l;const a=Ge();if(pn(a,i),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;d!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&pn(a,i),Ii(a.x,u.offset.x),Ii(a.y,u.offset.y))}return a}applyTransform(i,a=!1){const l=Ge();pn(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ni(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ys(d.latestValues)&&Ni(l,d.latestValues)}return ys(this.latestValues)&&Ni(l,this.latestValues),l}removeTransform(i){const a=Ge();pn(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ys(c.latestValues))continue;Ky(c.latestValues)&&c.updateSnapshot();const d=Ge(),u=c.measurePageBox();pn(d,u),x2(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return ys(this.latestValues)&&x2(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==at.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:u}=this.options;if(!(!this.layout||!(d||u))){if(this.resolvedRelativeTargetAt=at.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),_l(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),pn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ge(),this.targetWithTransforms=Ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ile(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pn(this.target,this.layout.layoutBox),qI(this.target,this.targetDelta)):pn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),_l(this.relativeTargetOrigin,this.target,f.target),pn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ky(this.parent.latestValues)||GI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const i=this.getLead(),a=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===at.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;pn(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,h=this.treeScale.y;Nle(this.layoutCorrected,this.treeScale,this.path,a),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Ge());const{target:f}=i;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(b2(this.prevProjectionDelta.x,this.projectionDelta.x),b2(this.prevProjectionDelta.y,this.projectionDelta.y)),Al(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==h||!E2(this.projectionDelta.x,this.prevProjectionDelta.x)||!E2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ri(),this.projectionDelta=Ri(),this.projectionDeltaWithTransform=Ri()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},u=Ri();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Ge(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,y=this.getStack(),v=!y||y.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(_ce));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const k=C/1e3;_2(u.x,i.x,k),_2(u.y,i.y,k),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_l(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ace(this.relativeTarget,this.relativeTargetOrigin,h,k),w&&dce(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Ge()),pn(w,this.relativeTarget)),g&&(this.animationValues=d,oce(d,c,this.latestValues,k,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(!1),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(!1),this.pendingAnimation&&(Ko(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ve.update(()=>{uu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=aa(0)),this.currentAnimation=Qle(this.motionValue,[0,1e3],{...i,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),i.onUpdate&&i.onUpdate(d)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mce),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&aN(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ge();const u=It(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+u;const h=It(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}pn(a,l),Ni(a,d),Al(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new uce),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var a;const{layoutId:i}=this.options;return i?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:i}=this.options;return i?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Zm("z",i,c,this.animationValues);for(let d=0;d<Km.length;d++)Zm(`rotate${Km[d]}`,i,c,this.animationValues),Zm(`skew${Km[d]}`,i,c,this.animationValues);i.render();for(const d in c)i.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);i.scheduleRender()}getProjectionStyles(i){if(!this.instance||this.isSVG)return;if(!this.isVisible)return pce;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=cu(i==null?void 0:i.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=cu(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!ys(this.latestValues)&&(f.transform=l?l({},""):"none",this.hasProjected=!1),f}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=hce(this.projectionDeltaWithTransform,this.treeScale,d),l&&(a.transform=l(d,a.transform));const{x:u,y:h}=this.projectionDelta;a.transformOrigin=`${u.origin*100}% ${h.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const f in yc){if(d[f]===void 0)continue;const{correct:p,applyTo:g,isCSSVariable:y}=yc[f],v=a.transform==="none"?d[f]:p(d[f],c);if(g){const x=g.length;for(let w=0;w<x;w++)a[g[w]]=v}else y?this.options.visualElement.renderState.vars[f]=v:a[f]=v}return this.options.layoutId&&(a.pointerEvents=c===this?cu(i==null?void 0:i.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)==null?void 0:a.stop(!1)}),this.root.nodes.forEach(M2),this.root.sharedNodes.clear()}}}function yce(t){t.updateLayout()}function bce(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:s}=t.options,i=e.source!==t.layout.source;s==="size"?gn(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],f=It(h);h.min=r[u].min,h.max=h.min+f}):aN(s,e.layoutBox,r)&&gn(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],f=It(r[u]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+f)});const a=Ri();Al(a,r,e.layoutBox);const l=Ri();i?Al(l,t.applyTransform(o,!0),e.measuredBox):Al(l,r,e.layoutBox);const c=!nN(a);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:f}=u;if(h&&f){const p=Ge();_l(p,e.layoutBox,h.layoutBox);const g=Ge();_l(g,r,f.layoutBox),rN(p,g)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function vce(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wce(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function xce(t){t.clearSnapshot()}function M2(t){t.clearMeasurements()}function kce(t){t.isLayoutDirty=!1}function Cce(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function A2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Sce(t){t.resolveTargetDelta()}function Tce(t){t.calcProjection()}function Ece(t){t.resetSkewAndRotation()}function Mce(t){t.removeLeadSnapshot()}function _2(t,e,n){t.translate=je(e.translate,0,n),t.scale=je(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function P2(t,e,n,r){t.min=je(e.min,n.min,r),t.max=je(e.max,n.max,r)}function Ace(t,e,n,r){P2(t.x,e.x,n.x,r),P2(t.y,e.y,n.y,r)}function _ce(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Pce={duration:.45,ease:[.4,0,.1,1]},R2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),I2=R2("applewebkit/")&&!R2("chrome/")?Math.round:Mn;function N2(t){t.min=I2(t.min),t.max=I2(t.max)}function Rce(t){N2(t.x),N2(t.y)}function aN(t,e,n){return t==="position"||t==="preserve-aspect"&&!Rle(T2(e),T2(n),.2)}function Ice(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Nce=iN({attachResizeListener:(t,e)=>kc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jm={current:void 0},lN=iN({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jm.current){const t=new Nce({});t.mount(window),t.setOptions({layoutScroll:!0}),Jm.current=t}return Jm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Dce={pan:{Feature:Zle},drag:{Feature:Kle,ProjectionNode:lN,MeasureLayout:QI}};function Oce(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const o=(n==null?void 0:n[t])??r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function cN(t,e){const n=Oce(t),r=new AbortController,o={passive:!0,...e,signal:r.signal};return[n,o,()=>r.abort()]}function D2(t){return!(t.pointerType==="touch"||XI())}function Lce(t,e,n={}){const[r,o,s]=cN(t,n),i=a=>{if(!D2(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const d=u=>{D2(u)&&(c(u),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,o)};return r.forEach(a=>{a.addEventListener("pointerenter",i,o)}),s}function O2(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,s=r[o];s&&Ve.postRender(()=>s(e,rd(e)))}class jce extends as{mount(){const{current:e}=this.node;e&&(this.unmount=Lce(e,(n,r)=>(O2(this.node,r,"Start"),o=>O2(this.node,o,"End"))))}unmount(){}}class Bce extends as{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=td(kc(this.node.current,"focus",()=>this.onFocus()),kc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const dN=(t,e)=>e?t===e?!0:dN(t,e.parentElement):!1,Vce=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $ce(t){return Vce.has(t.tagName)||t.tabIndex!==-1}const hu=new WeakSet;function L2(t){return e=>{e.key==="Enter"&&t(e)}}function Ym(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Hce=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=L2(()=>{if(hu.has(n))return;Ym(n,"down");const o=L2(()=>{Ym(n,"up")}),s=()=>Ym(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function j2(t){return Ov(t)&&!XI()}function Fce(t,e,n={}){const[r,o,s]=cN(t,n),i=a=>{const l=a.currentTarget;if(!j2(a))return;hu.add(l);const c=e(l,a),d=(f,p)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",h),hu.has(l)&&hu.delete(l),j2(f)&&typeof c=="function"&&c(f,{success:p})},u=f=>{d(f,l===window||l===document||n.useGlobalTarget||dN(l,f.target))},h=f=>{d(f,!1)};window.addEventListener("pointerup",u,o),window.addEventListener("pointercancel",h,o)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",i,o),sv(a)&&(a.addEventListener("focus",c=>Hce(c,o)),!$ce(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function B2(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),s=r[o];s&&Ve.postRender(()=>s(e,rd(e)))}class zce extends as{mount(){const{current:e}=this.node;e&&(this.unmount=Fce(e,(n,r)=>(B2(this.node,r,"Start"),(o,{success:s})=>B2(this.node,o,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Yy=new WeakMap,Xm=new WeakMap,Uce=t=>{const e=Yy.get(t.target);e&&e(t)},Wce=t=>{t.forEach(Uce)};function Gce({root:t,...e}){const n=t||document;Xm.has(n)||Xm.set(n,{});const r=Xm.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(Wce,{root:t,...e})),r[o]}function qce(t,e,n){const r=Gce(e);return Yy.set(t,n),r.observe(t),()=>{Yy.delete(t),r.unobserve(t)}}const Kce={some:0,all:1};class Zce extends as{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:s}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:Kce[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),h=c?d:u;h&&h(l)};return qce(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Jce(e,n))&&this.startObserver()}unmount(){}}function Jce({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Yce={inView:{Feature:Zce},tap:{Feature:zce},focus:{Feature:Bce},hover:{Feature:jce}},Xce={layout:{ProjectionNode:lN,MeasureLayout:QI}},Xy={current:null},uN={current:!1};function Qce(){if(uN.current=!0,!!rv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Xy.current=t.matches;t.addListener(e),e()}else Xy.current=!1}const ede=new WeakMap;function tde(t,e,n){for(const r in e){const o=e[r],s=n[r];if(xt(o))t.addValue(r,o);else if(xt(s))t.addValue(r,aa(o,{owner:t}));else if(s!==o)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=t.getStaticValue(r);t.addValue(r,aa(i!==void 0?i:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const hN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),fN=t=>/^0[^.\s]+$/u.test(t),nde={test:t=>t==="auto",parse:t=>t},pN=t=>e=>e.test(t),mN=[_a,te,hr,wo,uie,die,nde],V2=t=>mN.find(pN(t)),rde=[...mN,bt,Zo],ode=t=>rde.find(pN(t)),sde=new Set(["brightness","contrast","saturate","opacity"]);function ide(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Cv)||[];if(!r)return t;const o=n.replace(r,"");let s=sde.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+o+")"}const ade=/\b([a-z-]*)\(.*?\)/gu,Qy={...Zo,getAnimatableNone:t=>{const e=t.match(ade);return e?e.map(ide).join(" "):t}},lde={...fv,color:bt,backgroundColor:bt,outlineColor:bt,fill:bt,stroke:bt,borderColor:bt,borderTopColor:bt,borderRightColor:bt,borderBottomColor:bt,borderLeftColor:bt,filter:Qy,WebkitFilter:Qy},gN=t=>lde[t];function yN(t,e){let n=gN(t);return n!==Qy&&(n=Zo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class cde{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Iv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Gt.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ve.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=rp(n),this.isVariantNode=X4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in u){const f=u[h];l[h]!==void 0&&xt(f)&&f.set(l[h],!1)}}mount(e){this.current=e,ede.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),uN.current||Qce(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ko(this.notifyUpdate),Ko(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Aa.has(e);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ve.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ia){const n=ia[e];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[e]&&o&&r(this.props)&&(this.features[e]=new o(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ge()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<$2.length;r++){const o=$2[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,i=e[s];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=tde(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=aa(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(hN(r)||fN(r))?r=parseFloat(r):!ode(r)&&Zo.test(n)&&(r=yN(e,n)),this.setBaseTarget(e,xt(r)?r.get():r)),xt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=yv(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);i&&(r=i[e])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!xt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new xv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}const dde=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ude(t){const e=dde.exec(t);if(!e)return[,];const[,n,r,o]=e;return[`--${n??r}`,o]}function bN(t,e,n=1){const[r,o]=ude(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const i=s.trim();return hN(i)?parseFloat(i):i}return hv(o)?bN(o,e,n+1):o}function hde(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||fN(t):!0}const fde=new Set(["auto","none","0"]);function pde(t,e,n){let r=0,o;for(;r<t.length&&!o;){const s=t[r];typeof s=="string"&&!fde.has(s)&&wc(s).values.length&&(o=t[r]),r++}if(o&&n)for(const s of e)t[s]=yN(n,o)}class mde extends Iv{constructor(e,n,r,o,s){super(e,n,r,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),hv(c))){const d=bN(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!VI.has(r)||e.length!==2)return;const[o,s]=e,i=V2(o),a=V2(s);if(i!==a)if(WS(i)&&WS(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Vs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let o=0;o<e.length;o++)(e[o]===null||hde(e[o]))&&r.push(o);r.length&&pde(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(r,o).jump(o,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const s=r.length-1,i=r[s];r[s]=Vs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class vN extends cde{constructor(){super(...arguments),this.KeyframeResolver=mde}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function wN(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function gde(t){return window.getComputedStyle(t)}class yde extends vN{constructor(){super(...arguments),this.type="html",this.renderInstance=wN}readValueFromInstance(e,n){var r;if(Aa.has(n))return(r=this.projection)!=null&&r.isProjecting?Fy(n):$ae(e,n);{const o=gde(e),s=(uv(n)?o.getPropertyValue(n):o[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return KI(e,n)}build(e,n,r){pv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return bv(e,n,r)}}const xN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bde(t,e,n,r){wN(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(xN.has(o)?o:lv(o),e.attrs[o])}class vde extends vN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ge}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Aa.has(n)){const r=gN(n);return r&&r.default||0}return n=xN.has(n)?n:lv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return dI(e,n,r)}build(e,n,r){iI(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,o){bde(e,n,r,o)}mount(e){this.isSVGTag=lI(e.tagName),super.mount(e)}}const wde=(t,e)=>gv(t)?new vde(e):new yde(e,{allowProjection:t!==b.Fragment}),xde=_ie({...Cle,...Yce,...Dce,...Xce},wde),kde=Zse(xde),Cde="_container_jw0vg_2",Sde="_title_jw0vg_8",Tde="_player_jw0vg_12",Ede="_currentContainer_jw0vg_17",Mde="_icon_jw0vg_30",vi={container:Cde,title:Sde,player:Tde,currentContainer:Ede,icon:Mde},Ade=t=>new Date(t.getTime()-24*60*60*1e3),_de=t=>new Date(t.getTime()+24*60*60*1e3),Pde=({date:t,onDateChange:e})=>{const n=new Date(t).toLocaleDateString()===new Date().toLocaleDateString(),r=n?"Tasks Today":"Tasks",o=n?"Today":new Date(t).toLocaleDateString();return m.jsxs("div",{className:vi.container,children:[m.jsx(le.Title,{level:4,noMargin:!0,className:vi.title,children:r}),m.jsxs("div",{className:vi.player,children:[m.jsx(ie,{onClick:()=>e(Ade(t)),width:30,icon:"basil:skip-prev-outline",className:vi.icon}),m.jsx(le.Text,{className:vi.currentContainer,onClick:()=>e(new Date),children:o}),m.jsx(ie,{onClick:()=>e(_de(t)),width:30,icon:"basil:skip-next-outline",className:vi.icon})]})]})},Rde="_container_2mf0w_3",Ide="_checklistItem_2mf0w_9",Nde="_lastChecklistItem_2mf0w_24",Dde="_checkbox_2mf0w_28",Ode="_title_2mf0w_33",Ka={container:Rde,checklistItem:Ide,lastChecklistItem:Nde,checkbox:Dde,title:Ode},Lde=({date:t})=>{const{checklistByGivingDateIds:e,allChecklist:n,getChecklistByGivingDate:r,updateChecklist:o}=zh(),{checklistTemplate:s}=Qr(),i=Yn();return R.useEffect(()=>{r({date:t})},[t]),m.jsx("div",{className:Ka.container,children:e.map((a,l)=>{const c=n[a],d=s[c.checklistTemplateId];return m.jsxs("div",{className:pe(Ka.checklistItem,l===e.length-1&&Ka.lastChecklistItem),children:[m.jsx(ie,{color:(d==null?void 0:d.avatar.color)||"#8A8A8A",width:32,height:32,icon:d==null?void 0:d.avatar.name}),m.jsx(le.Text,{onClick:()=>i(`/task/${c.checklistTemplateId}?currentDay=${t.toISOString()}${c.clientOnly?"":`&checklistId=${c.id}`}`),className:Ka.title,children:d==null?void 0:d.title}),m.jsx(Wf,{checked:!!(c!=null&&c.completedAt),className:Ka.checkbox,onChange:u=>{u.stopPropagation(),o({...c,completedAt:u.target.checked?new Date().toISOString():void 0})}})]},a)})})},jde="_addChecklist_2trfx_1",Bde={addChecklist:jde},Vde=()=>{const t=Bt(),e=Yn();return m.jsx("div",{className:Bde.addChecklist,children:m.jsx(Dt,{onClick:()=>{e("/create-checklist")},type:"dash",size:"md",block:!0,children:t.formatMessage({id:"checklist-create.label-create-checklist",defaultMessage:"Create Task"})})})};function $de(t){return m.jsx("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",...t,children:m.jsx("g",{id:"pause_circle_outline_24px",children:m.jsx("path",{id:"icon/av/pause_circle_outline_24px","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 24C4 12.96 12.96 4 24 4C35.04 4 44 12.96 44 24C44 35.04 35.04 44 24 44C12.96 44 4 35.04 4 24ZM22 30C22 31.1 21.1 32 20 32C18.9 32 18 31.1 18 30V18C18 16.9 18.9 16 20 16C21.1 16 22 16.9 22 18V30ZM24 40C15.18 40 8 32.82 8 24C8 15.18 15.18 8 24 8C32.82 8 40 15.18 40 24C40 32.82 32.82 40 24 40ZM30 30C30 31.1 29.1 32 28 32C26.9 32 26 31.1 26 30V18C26 16.9 26.9 16 28 16C29.1 16 30 16.9 30 18V30Z",fill:"white"})})})}function Hde(t){return m.jsx("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",...t,children:m.jsx("g",{id:"play_circle_filled_24px",children:m.jsx("path",{id:"icon/av/play_circle_filled_24px","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 24C4 12.96 12.96 4 24 4C35.04 4 44 12.96 44 24C44 35.04 35.04 44 24 44C12.96 44 4 35.04 4 24ZM21.6 16.2C20.94 15.7 20 16.18 20 17V31C20 31.82 20.94 32.3 21.6 31.8L30.94 24.8C31.48 24.4 31.48 23.6 30.94 23.2L21.6 16.2Z",fill:"white"})})})}const Fde="_container_n2rya_2",zde="_body_n2rya_6",Ude="_icon_n2rya_18",Wde="_progressContainer_n2rya_22",Gde="_progress_n2rya_22",qde="_pomodoroPhase_n2rya_31",Kde="_pomodoroPhaseText_n2rya_39",Zde="_loadStatus_n2rya_52",Or={container:Fde,body:zde,icon:Ude,progressContainer:Wde,progress:Gde,pomodoroPhase:qde,pomodoroPhaseText:Kde,loadStatus:Zde},Jde={"date-a-live-season-1-ost.mp3":{name:"date a live",id:"date-a-live-season-1-ost.mp3"},"rockabye-baby-twinkle-twinkle.mp3":{name:"rockabye baby twinkle twinkle",id:"rockabye-baby-twinkle-twinkle.mp3"},"twinkle-twinkle-little-star-acoustic-guitar.mp3":{name:"twinkle twinkle little star acoustic guitar",id:"twinkle-twinkle-little-star-acoustic-guitar.mp3"},"einstein-baby-lullaby-academy-brahms.mp3":{name:"Baby Lullaby Music - Einstein Baby Lullaby Academy",id:"einstein-baby-lullaby-academy-brahms.mp3"},"einstein-baby-lullaby.mp3":{name:"Einstein Baby Lullaby",id:"einstein-baby-lullaby.mp3"},"a-whole-new-world.mp3":{id:"a-whole-new-world.mp3",name:"A Whole New World"},"reflection.mp3":{id:"reflection.mp3",name:"Reflection"},"arabesque-piano-relaxation.mp3":{id:"arabesque-piano-relaxation.mp3",name:"Arabesque Piano Relaxation"},"canon-in-d.mp3":{id:"canon-in-d.mp3",name:"Canon in D"},"music-therapy-serenity.mp3":{id:"music-therapy-serenity.mp3",name:"Music Therapy - Serenity"},"prelude-in-c-major.mp3":{id:"prelude-in-c-major.mp3",name:"Prelude in C Major"}},Yde=Hh(t=>({isPlaying:!1,setIsPlaying:e=>t({isPlaying:e}),currentSongIndex:0,setCurrentSongIndex:e=>t({currentSongIndex:e}),songList:[],setSongList:e=>t({songList:e}),currentTime:0,setCurrentTime:e=>t({currentTime:e}),duration:0,setDuration:e=>t({duration:e})})),gs=[];let Lr=null;const kN=({autoPlayDefault:t=!1}={})=>{const{isPlaying:e,songList:n,setSongList:r,setIsPlaying:o,currentSongIndex:s,setCurrentSongIndex:i,currentTime:a,setCurrentTime:l,duration:c,setDuration:d}=Yde(),[u,h]=R.useState(t),f=w=>{console.log("currentSingIndex",s,n.length),Lr&&Lr.pause();let C=(s+1)%n.length;w&&!isNaN(w)&&(C=w),console.log("nextIndex",C),i(C),g(C)},p=()=>{Lr&&Lr.pause();const w=(s-1+n.length)%n.length;g(w),i(w)},g=w=>{if(w<0||w>=n.length)return;const C=n[w];let k;console.log("AUTO PLAY",u,gs[w]),gs[w]?(k=gs[w],k.currentTime=0):k=new Audio(C),Lr=k,k.onended=()=>{console.log("AUDIO END!!!",u),u&&f(w+1)},k.ontimeupdate=()=>{l(k.currentTime),d(k.duration)},k.play().then(()=>{o(!0),l(0)}).catch(console.error)};return{loadSong:g,play:async()=>{if(!Lr)g(s),o(!0);else{const w=gs[s];w&&!e&&w.play().then(()=>o(!0)).catch(console.error)}},pause:()=>{Lr&&e&&(Lr.pause(),o(!1))},isPlaying:e,autoPlay:u,setAutoPlay:w=>h(w),next:f,prev:p,audio:Lr,currentTime:a,duration:c,currentSongIndex:s,loadAllSongs:async({songs:w,callback:C})=>{const k=w.filter(T=>!n.includes(T)),S=[...n,...k];k.length&&r(S);for(let T=0;T<S.length;T++){const E=S[T];if(gs[T]){C(E,T);continue}const M=new Audio(E);gs.push(M),await new Promise((P,B)=>{M.addEventListener("loadedmetadata",()=>{C(E,T),P()}),M.addEventListener("error",$=>{console.error(`Error loading song: ${E}`,$),B($)})})}return gs},songList:n}},Xde=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},Lv=Xde(Object.values(Jde)),Qde=Lv.map(({id:t})=>f5(t)),eue="_container_gxbjv_1",tue="_header_gxbjv_10",nue="_body_gxbjv_23",rue="_card_gxbjv_28",oue="_cardActive_gxbjv_41",sue="_successIcon_gxbjv_47",wi={container:eue,header:tue,body:nue,card:rue,cardActive:oue,successIcon:sue},iue=({visible:t,onClose:e})=>{const{currentSongIndex:n,next:r}=kN(),o=Bt();return m.jsxs(z4,{className:wi.container,visible:t,onBlur:e,children:[m.jsxs("div",{className:wi.header,children:[m.jsx(le.Title,{noMargin:!0,level:2,children:o.formatMessage({id:"audio-song-list-drawer.title",defaultMessage:"Song List"})}),m.jsx(ie,{width:32,icon:"material-symbols:close-rounded",onClick:e})]}),m.jsx("div",{className:wi.body,children:Lv.map(({name:s},i)=>m.jsxs("div",{onClick:()=>r(i),className:pe(wi.card,n===i&&wi.cardActive),children:[m.jsx("span",{children:s}),n===i&&m.jsx(ie,{className:wi.successIcon,icon:"material-symbols:check-circle-rounded"})]},i))})]})},aue=({className:t})=>{const[e,n]=R.useState(0),{play:r,pause:o,isPlaying:s,next:i,prev:a,currentTime:l,currentSongIndex:c,loadAllSongs:d,duration:u,songList:h}=kN({autoPlayDefault:!0}),[f,p]=b.useState(!1),g=async()=>{await d({songs:Qde,callback:()=>{n(v=>v+1)}})};R.useEffect(()=>{g()},[]);const y=()=>{s?o():r()};return m.jsxs("div",{className:pe(Or.container,t),children:[m.jsx(iue,{visible:f,onClose:()=>p(!1)}),e!==h.length&&m.jsxs(le.Text,{className:Or.loadStatus,children:["load song",e,"/",h.length]}),l>0&&m.jsx("div",{className:Or.progressContainer,children:m.jsx("div",{className:Or.progress,style:{width:`${l/u*100}%`}})}),m.jsxs("div",{className:Or.body,children:[m.jsx(ie,{icon:"material-symbols:skip-previous-rounded",height:24,color:"white",onClick:()=>a()}),s?m.jsx($de,{className:Or.icon,width:42,onClick:y}):m.jsx(Hde,{className:Or.icon,onClick:y}),m.jsx(ie,{icon:"material-symbols:skip-next-rounded",height:32,width:32,color:"white",onClick:()=>i()}),m.jsxs("span",{className:Or.pomodoroPhase,children:[m.jsx(le.Text,{onClick:()=>p(!0),className:Or.pomodoroPhaseText,children:`${c+1}. ${Lv[c].name}`}),m.jsx(ie,{color:"white",onClick:()=>p(!0),icon:"material-symbols:library-music-rounded",width:24})]})]})]})},lue="_container_5cdu6_2",cue="_player_5cdu6_17",due="_hr_5cdu6_24",uue="_card_5cdu6_30",Vd={container:lue,player:cue,hr:due,card:uue},hue=()=>{const[t,e]=R.useState(new Date);return m.jsxs("div",{className:Vd.container,children:[m.jsx(Qte,{}),m.jsxs(Wn,{className:Vd.card,children:[m.jsx(Pde,{date:t,onDateChange:e}),m.jsx(Di,{classes:{hr:Vd.hr}}),m.jsx(Lde,{date:t}),m.jsx(Vde,{})]}),m.jsx(aue,{className:Vd.player})]})},nr=({children:t})=>m.jsx(kde.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:t}),fue=()=>{const t=oo();return m.jsx(Fse,{mode:"wait",children:m.jsxs(P3,{location:t,children:[m.jsx(Nn,{path:"/",element:m.jsx(nr,{children:m.jsx(hue,{})})}),m.jsx(Nn,{path:"/task/:id",element:m.jsx(nr,{children:m.jsx(ene,{})})}),m.jsx(Nn,{path:"/create-checklist",element:m.jsx(nr,{children:m.jsx(Doe,{})})}),m.jsx(Nn,{path:"/edit-checklist/:id",element:m.jsx(nr,{children:m.jsx(Loe,{})})}),m.jsx(Nn,{path:"/weight-record",element:m.jsx(nr,{children:m.jsx(sse,{})})}),m.jsx(Nn,{path:"/intro",element:m.jsx(nr,{children:m.jsx(fne,{})})}),m.jsx(Nn,{path:"/checklist-template",element:m.jsx(nr,{children:m.jsx(Ise,{})})}),m.jsx(Nn,{path:"/setting",element:m.jsx(nr,{children:m.jsx(S5,{})})}),m.jsx(Nn,{path:"/story",element:m.jsx(nr,{children:m.jsx(Lse,{})})}),m.jsx(Nn,{path:"/audio",element:m.jsx(nr,{children:m.jsx(jse,{})})})]},t.pathname)})},pue=()=>m.jsx(tD,{children:m.jsx(fue,{})}),mue="_container_1qdlo_1",gue="_toast_1qdlo_8",yue="_toastMessage_1qdlo_22",bue="_toastButton_1qdlo_26",Za={container:mue,toast:gue,toastMessage:yue,toastButton:bue};function vue(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t;let a,l;const c=async(u=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await lt(async()=>{const{Workbox:u}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:u}},[]).then(({Workbox:u})=>new u("/sw.js",{scope:"/",type:"classic"})).catch(u=>{i==null||i(u)}),!a)return;a.addEventListener("activated",u=>{(u.isUpdate||u.isExternal)&&window.location.reload()}),a.addEventListener("installed",u=>{u.isUpdate||r==null||r()}),a.register({immediate:e}).then(u=>{s?s("/sw.js",u):o==null||o(u)}).catch(u=>{i==null||i(u)})}}return l=d(),c}function wue(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t,[a,l]=b.useState(!1),[c,d]=b.useState(!1),[u]=b.useState(()=>vue({immediate:e,onOfflineReady(){d(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:o,onRegisteredSW:s,onRegisterError:i}));return{needRefresh:[a,l],offlineReady:[c,d],updateServiceWorker:u}}function xue(){const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:o}=wue({onRegistered(i){console.log("SW Registered: "+i)},onRegisterError(i){console.log("SW registration error",i)}}),s=()=>{e(!1),r(!1)};return R.useEffect(()=>{n&&o(!0)},[n]),m.jsx("div",{className:Za.container,children:(t||n)&&m.jsxs("div",{className:Za.toast,children:[m.jsx("div",{className:Za.toastMessage,children:t?m.jsx("span",{children:"App ready to work offline"}):m.jsx("span",{children:"New content available, click on reload button to update."})}),n&&m.jsx("button",{className:Za.toastButton,onClick:()=>o(!0),children:"Reload"}),m.jsx("button",{className:Za.toastButton,onClick:()=>s(),children:"Close"})]})})}const kue="_container_y280i_149",Cue="_body_y280i_157",H2={container:kue,body:Cue};function Sue(){const{theme:t}=dT();return m.jsx("div",{className:H2.container,"data-theme":t,children:m.jsxs("div",{className:H2.body,children:[m.jsx(pue,{}),m.jsx(xue,{})]})})}const Tue=m5(h5(Sue));Fn.render(m.jsx(Tue,{}),document.getElementById("app"));
