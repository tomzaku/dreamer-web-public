const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-rjhLG1eB.js","assets/index-D57cUaFw.js","assets/mdxeditor-Cxvfqdhz.js","assets/apexcharts-BnXoAgVT.js","assets/index-DdbShWyY.js","assets/index-nOtcpH01.js","assets/index-uAn85tBp.js","assets/index-D4Wp6AEg.js","assets/index-CWmy4eKR.js","assets/index-CfyObm-o.js","assets/index-yU9Yh-H5.js","assets/index-BdmKeUBW.js","assets/index-DQ-8l3PE.js","assets/index-JH4Gotpn.js","assets/index-FrdabaJ1.js","assets/index-BgBG5lba.js","assets/index-BlSIl150.js","assets/index-BGm_t98o.js"])))=>i.map(i=>d[i]);
import{r as y,j as m,c as le,R as D,_ as kt,k as n3,b as r3,i as o3,a as P0,u as s3,d as Wt,g as Qu,e as i3,f as a3,h as l3,l as kx,m as c3,n as d3,o as St,p as LE,q as u3,s as Kr,t as Vi,v as cr,w as ip,x as h3,y as Cx,z as Ql,A as jE}from"./mdxeditor-Cxvfqdhz.js";import{a as f3,g as p3}from"./apexcharts-BnXoAgVT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Cl={},Sx;function m3(){if(Sx)return Cl;Sx=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.parse=i,Cl.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,s=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function i(h,f){const p=new s,g=h.length;if(g<2)return p;const b=(f==null?void 0:f.decode)||d;let v=0;do{const x=h.indexOf("=",v);if(x===-1)break;const w=h.indexOf(";",v),k=w===-1?g:w;if(x>k){v=h.lastIndexOf(";",x-1)+1;continue}const C=a(h,v,x),S=l(h,x,C),T=h.slice(C,S);if(p[T]===void 0){let E=a(h,x+1,k),M=l(h,k,E);const R=b(h.slice(E,M));p[T]=R}v=k+1}while(v<g);return p}function a(h,f,p){do{const g=h.charCodeAt(f);if(g!==32&&g!==9)return f}while(++f<p);return p}function l(h,f,p){for(;f>p;){const g=h.charCodeAt(--f);if(g!==32&&g!==9)return f+1}return p}function c(h,f,p){const g=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(h))throw new TypeError(`argument name is invalid: ${h}`);const b=g(f);if(!e.test(b))throw new TypeError(`argument val is invalid: ${f}`);let v=h+"="+b;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!u(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function d(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function u(h){return o.call(h)==="[object Date]"}return Cl}m3();var Tx="popstate";function g3(t={}){function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return My("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Mc(o)}return b3(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y3(){return Math.random().toString(36).substring(2,10)}function Ex(t,e){return{usr:t.state,key:t.key,idx:e}}function My(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ka(e):e,state:n,key:e&&e.key||r||y3()}}function Mc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function b3(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a="POP",l=null,c=d();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function d(){return(i.state||{idx:null}).idx}function u(){a="POP";let b=d(),v=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:v})}function h(b,v){a="PUSH";let x=My(g.location,b,v);c=d()+1;let w=Ex(x,c),k=g.createHref(x);try{i.pushState(w,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(k)}s&&l&&l({action:a,location:g.location,delta:1})}function f(b,v){a="REPLACE";let x=My(g.location,b,v);c=d();let w=Ex(x,c),k=g.createHref(x);i.replaceState(w,"",k),s&&l&&l({action:a,location:g.location,delta:0})}function p(b){return v3(b)}let g={get action(){return a},get location(){return t(o,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(Tx,u),l=b,()=>{o.removeEventListener(Tx,u),l=null}},createHref(b){return e(o,b)},createURL:p,encodeLocation(b){let v=p(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(b){return i.go(b)}};return g}function v3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ge(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Mc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function BE(t,e,n="/"){return w3(t,e,n,!1)}function w3(t,e,n,r){let o=typeof e=="string"?Ka(e):e,s=Ro(o.pathname||"/",n);if(s==null)return null;let i=VE(t);x3(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=D3(s);a=_3(i[l],c,r)}return a}function VE(t,e=[],n=[],r=""){let o=(s,i,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(Ge(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=ko([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ge(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),VE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:A3(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let l of $E(s.path))o(s,i,l)}),e}function $E(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=$E(r.join("/")),a=[];return a.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function x3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:R3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var k3=/^:[\w-]+$/,C3=3,S3=2,T3=1,E3=10,M3=-2,Mx=t=>t==="*";function A3(t,e){let n=t.split("/"),r=n.length;return n.some(Mx)&&(r+=M3),e&&(r+=S3),n.filter(o=>!Mx(o)).reduce((o,s)=>o+(k3.test(s)?C3:s===""?T3:E3),r)}function R3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function _3(t,e,n=!1){let{routesMeta:r}=t,o={},s="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",u=Eh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=Eh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(o,u.params),i.push({params:o,pathname:ko([s,u.pathname]),pathnameBase:L3(ko([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=ko([s,u.pathnameBase]))}return i}function Eh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=P3(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:u},h)=>{if(d==="*"){let p=a[h]||"";i=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return u&&!f?c[d]=void 0:c[d]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function P3(t,e=!1,n=!0){dr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function D3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ro(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function I3(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Ka(t):t;return{pathname:n?n.startsWith("/")?n:N3(n,e):e,search:j3(r),hash:B3(o)}}function N3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Im(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function O3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function HE(t){let e=O3(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function FE(t,e,n,r=!1){let o;typeof t=="string"?o=Ka(t):(o={...t},Ge(!o.pathname||!o.pathname.includes("?"),Im("?","pathname","search",o)),Ge(!o.pathname||!o.pathname.includes("#"),Im("#","pathname","hash",o)),Ge(!o.search||!o.search.includes("#"),Im("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let u=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),u-=1;o.pathname=h.join("/")}a=u>=0?e[u]:"/"}let l=I3(o,a),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var ko=t=>t.join("/").replace(/\/\/+/g,"/"),L3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),j3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function V3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var zE=["POST","PUT","PATCH","DELETE"];new Set(zE);var $3=["GET",...zE];new Set($3);var Ya=y.createContext(null);Ya.displayName="DataRouter";var ap=y.createContext(null);ap.displayName="DataRouterState";var UE=y.createContext({isTransitioning:!1});UE.displayName="ViewTransition";var H3=y.createContext(new Map);H3.displayName="Fetchers";var F3=y.createContext(null);F3.displayName="Await";var Yr=y.createContext(null);Yr.displayName="Navigation";var Cd=y.createContext(null);Cd.displayName="Location";var Jr=y.createContext({outlet:null,matches:[],isDataRoute:!1});Jr.displayName="Route";var D0=y.createContext(null);D0.displayName="RouteError";function z3(t,{relative:e}={}){Ge(Sd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(Yr),{hash:o,pathname:s,search:i}=Td(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:ko([n,s])),r.createHref({pathname:a,search:i,hash:o})}function Sd(){return y.useContext(Cd)!=null}function No(){return Ge(Sd(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Cd).location}var WE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GE(t){y.useContext(Yr).static||y.useLayoutEffect(t)}function vr(){let{isDataRoute:t}=y.useContext(Jr);return t?n5():U3()}function U3(){Ge(Sd(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(Ya),{basename:e,navigator:n}=y.useContext(Yr),{matches:r}=y.useContext(Jr),{pathname:o}=No(),s=JSON.stringify(HE(r)),i=y.useRef(!1);return GE(()=>{i.current=!0}),y.useCallback((l,c={})=>{if(dr(i.current,WE),!i.current)return;if(typeof l=="number"){n.go(l);return}let d=FE(l,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ko([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,o,t])}y.createContext(null);function qE(){let{matches:t}=y.useContext(Jr),e=t[t.length-1];return e?e.params:{}}function Td(t,{relative:e}={}){let{matches:n}=y.useContext(Jr),{pathname:r}=No(),o=JSON.stringify(HE(n));return y.useMemo(()=>FE(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function W3(t,e){return KE(t,e)}function KE(t,e,n,r){var x;Ge(Sd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:s}=y.useContext(Yr),{matches:i}=y.useContext(Jr),a=i[i.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",u=a&&a.route;{let w=u&&u.path||"";YE(c,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=No(),f;if(e){let w=typeof e=="string"?Ka(e):e;Ge(d==="/"||((x=w.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=h;let p=f.pathname||"/",g=p;if(d!=="/"){let w=d.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=!s&&n&&n.matches&&n.matches.length>0?n.matches:BE(t,{pathname:g});dr(u||b!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),dr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=J3(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:ko([d,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:ko([d,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&v?y.createElement(Cd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},v):v}function G3(){let t=t5(),e=V3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=y.createElement(y.Fragment,null,y.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:o},n):null,i)}var q3=y.createElement(G3,null),K3=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?y.createElement(Jr.Provider,{value:this.props.routeContext},y.createElement(D0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Y3({routeContext:t,match:e,children:n}){let r=y.useContext(Ya);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Jr.Provider,{value:t},n)}function J3(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let l=o.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Ge(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<o.length;l++){let c=o[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:d,errors:u}=n,h=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!u||u[c.route.id]===void 0);if(c.route.lazy||h){i=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((l,c,d)=>{let u,h=!1,f=null,p=null;n&&(u=s&&c.route.id?s[c.route.id]:void 0,f=c.route.errorElement||q3,i&&(a<0&&d===0?(YE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):a===d&&(h=!0,p=c.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),b=()=>{let v;return u?v=f:h?v=p:c.route.Component?v=y.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=l,y.createElement(Y3,{match:c,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?y.createElement(K3,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function I0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Z3(t){let e=y.useContext(Ya);return Ge(e,I0(t)),e}function X3(t){let e=y.useContext(ap);return Ge(e,I0(t)),e}function Q3(t){let e=y.useContext(Jr);return Ge(e,I0(t)),e}function N0(t){let e=Q3(t),n=e.matches[e.matches.length-1];return Ge(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function e5(){return N0("useRouteId")}function t5(){var r;let t=y.useContext(D0),e=X3("useRouteError"),n=N0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function n5(){let{router:t}=Z3("useNavigate"),e=N0("useNavigate"),n=y.useRef(!1);return GE(()=>{n.current=!0}),y.useCallback(async(o,s={})=>{dr(n.current,WE),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...s}))},[t,e])}var Ax={};function YE(t,e,n){!e&&!Ax[t]&&(Ax[t]=!0,dr(!1,n))}y.memo(r5);function r5({routes:t,future:e,state:n}){return KE(t,void 0,n,e)}function Nn(t){Ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function o5({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:s=!1}){Ge(!Sd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:i,navigator:o,static:s,future:{}}),[i,o,s]);typeof n=="string"&&(n=Ka(n));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=n,f=y.useMemo(()=>{let p=Ro(l,i);return p==null?null:{location:{pathname:p,search:c,hash:d,state:u,key:h},navigationType:r}},[i,l,c,d,u,h,r]);return dr(f!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:y.createElement(Yr.Provider,{value:a},y.createElement(Cd.Provider,{children:e,value:f}))}function s5({children:t,location:e}){return W3(Ay(t),e)}function Ay(t,e=[]){let n=[];return y.Children.forEach(t,(r,o)=>{if(!y.isValidElement(r))return;let s=[...e,o];if(r.type===y.Fragment){n.push.apply(n,Ay(r.props.children,s));return}Ge(r.type===Nn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ge(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Ay(r.props.children,s)),n.push(i)}),n}var eh="get",th="application/x-www-form-urlencoded";function lp(t){return t!=null&&typeof t.tagName=="string"}function i5(t){return lp(t)&&t.tagName.toLowerCase()==="button"}function a5(t){return lp(t)&&t.tagName.toLowerCase()==="form"}function l5(t){return lp(t)&&t.tagName.toLowerCase()==="input"}function c5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function d5(t,e){return t.button===0&&(!e||e==="_self")&&!c5(t)}function Ry(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function u5(t,e){let n=Ry(t);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(s=>{n.append(o,s)})}),n}var mu=null;function h5(){if(mu===null)try{new FormData(document.createElement("form"),0),mu=!1}catch{mu=!0}return mu}var f5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nm(t){return t!=null&&!f5.has(t)?(dr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${th}"`),null):t}function p5(t,e){let n,r,o,s,i;if(a5(t)){let a=t.getAttribute("action");r=a?Ro(a,e):null,n=t.getAttribute("method")||eh,o=Nm(t.getAttribute("enctype"))||th,s=new FormData(t)}else if(i5(t)||l5(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ro(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||eh,o=Nm(t.getAttribute("formenctype"))||Nm(a.getAttribute("enctype"))||th,s=new FormData(a,t),!h5()){let{name:c,type:d,value:u}=t;if(d==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,u)}}else{if(lp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=eh,r=null,o=th,i=t}return s&&o==="text/plain"&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:s,body:i}}function O0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function m5(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function g5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function y5(t,e,n){let r=await Promise.all(t.map(async o=>{let s=e.routes[o.route.id];if(s){let i=await m5(s,n);return i.links?i.links():[]}return[]}));return x5(r.flat(1).filter(g5).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Rx(t,e,n,r,o,s){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>i(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var u;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(i(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((u=n[0])==null?void 0:u.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function b5(t,e,{includeHydrateFallback:n}={}){return v5(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let s=[o.module];return o.clientActionModule&&(s=s.concat(o.clientActionModule)),o.clientLoaderModule&&(s=s.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(s=s.concat(o.hydrateFallbackModule)),o.imports&&(s=s.concat(o.imports)),s}).flat(1))}function v5(t){return[...new Set(t)]}function w5(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function x5(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let s=JSON.stringify(w5(o));return n.has(s)||(n.add(s),r.push({key:s,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var k5=new Set([100,101,204,205]);function C5(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ro(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function JE(){let t=y.useContext(Ya);return O0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function S5(){let t=y.useContext(ap);return O0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var L0=y.createContext(void 0);L0.displayName="FrameworkContext";function ZE(){let t=y.useContext(L0);return O0(t,"You must render this element inside a <HydratedRouter> element"),t}function T5(t,e){let n=y.useContext(L0),[r,o]=y.useState(!1),[s,i]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=e,h=y.useRef(null);y.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let g=v=>{v.forEach(x=>{i(x.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[t]),y.useEffect(()=>{if(r){let g=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(g)}}},[r]);let f=()=>{o(!0)},p=()=>{o(!1),i(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Sl(a,f),onBlur:Sl(l,p),onMouseEnter:Sl(c,f),onMouseLeave:Sl(d,p),onTouchStart:Sl(u,f)}]:[!1,h,{}]}function Sl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function E5({page:t,...e}){let{router:n}=JE(),r=y.useMemo(()=>BE(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(A5,{page:t,matches:r,...e}):null}function M5(t){let{manifest:e,routeModules:n}=ZE(),[r,o]=y.useState([]);return y.useEffect(()=>{let s=!1;return y5(t,e,n).then(i=>{s||o(i)}),()=>{s=!0}},[t,e,n]),r}function A5({page:t,matches:e,...n}){let r=No(),{manifest:o,routeModules:s}=ZE(),{basename:i}=JE(),{loaderData:a,matches:l}=S5(),c=y.useMemo(()=>Rx(t,e,l,o,r,"data"),[t,e,l,o,r]),d=y.useMemo(()=>Rx(t,e,l,o,r,"assets"),[t,e,l,o,r]),u=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(e.forEach(v=>{var w;let x=o.routes[v.route.id];!x||!x.hasLoader||(!c.some(k=>k.route.id===v.route.id)&&v.route.id in a&&((w=s[v.route.id])!=null&&w.shouldRevalidate)||x.hasClientLoader?g=!0:p.add(v.route.id))}),p.size===0)return[];let b=C5(t,i);return g&&p.size>0&&b.searchParams.set("_routes",e.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[b.pathname+b.search]},[i,a,r,o,c,e,t,s]),h=y.useMemo(()=>b5(d,o),[d,o]),f=M5(d);return y.createElement(y.Fragment,null,u.map(p=>y.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>y.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:g})=>y.createElement("link",{key:p,...g})))}function R5(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var XE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XE&&(window.__reactRouterVersion="7.6.0")}catch{}function _5({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=g3({window:n,v5Compat:!0}));let o=r.current,[s,i]=y.useState({action:o.action,location:o.location}),a=y.useCallback(l=>{y.startTransition(()=>i(l))},[i]);return y.useLayoutEffect(()=>o.listen(a),[o,a]),y.createElement(o5,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o})}var QE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eM=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:s,replace:i,state:a,target:l,to:c,preventScrollReset:d,viewTransition:u,...h},f){let{basename:p}=y.useContext(Yr),g=typeof c=="string"&&QE.test(c),b,v=!1;if(typeof c=="string"&&g&&(b=c,XE))try{let M=new URL(window.location.href),R=c.startsWith("//")?new URL(M.protocol+c):new URL(c),P=Ro(R.pathname,p);R.origin===M.origin&&P!=null?c=P+R.search+R.hash:v=!0}catch{dr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=z3(c,{relative:o}),[w,k,C]=T5(r,h),S=N5(c,{replace:i,state:a,target:l,preventScrollReset:d,relative:o,viewTransition:u});function T(M){e&&e(M),M.defaultPrevented||S(M)}let E=y.createElement("a",{...h,...C,href:b||x,onClick:v||s?e:T,ref:R5(f,k),target:l,"data-discover":!g&&n==="render"?"true":void 0});return w&&!g?y.createElement(y.Fragment,null,E,y.createElement(E5,{page:x})):E});eM.displayName="Link";var P5=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:s,to:i,viewTransition:a,children:l,...c},d){let u=Td(i,{relative:c.relative}),h=No(),f=y.useContext(ap),{navigator:p,basename:g}=y.useContext(Yr),b=f!=null&&$5(u)&&a===!0,v=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,x=h.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(x=x.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&g&&(w=Ro(w,g)||w);const k=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let C=x===v||!o&&x.startsWith(v)&&x.charAt(k)==="/",S=w!=null&&(w===v||!o&&w.startsWith(v)&&w.charAt(v.length)==="/"),T={isActive:C,isPending:S,isTransitioning:b},E=C?e:void 0,M;typeof r=="function"?M=r(T):M=[r,C?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(T):s;return y.createElement(eM,{...c,"aria-current":E,className:M,ref:d,style:R,to:i,viewTransition:a},typeof l=="function"?l(T):l)});P5.displayName="NavLink";var D5=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:s,method:i=eh,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:u,...h},f)=>{let p=B5(),g=V5(a,{relative:c}),b=i.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&QE.test(a),x=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let k=w.nativeEvent.submitter,C=(k==null?void 0:k.getAttribute("formmethod"))||i;p(k||w.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:o,state:s,relative:c,preventScrollReset:d,viewTransition:u})};return y.createElement("form",{ref:f,method:b,action:g,onSubmit:r?l:x,...h,"data-discover":!v&&t==="render"?"true":void 0})});D5.displayName="Form";function I5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tM(t){let e=y.useContext(Ya);return Ge(e,I5(t)),e}function N5(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:i}={}){let a=vr(),l=No(),c=Td(t,{relative:s});return y.useCallback(d=>{if(d5(d,e)){d.preventDefault();let u=n!==void 0?n:Mc(l)===Mc(c);a(t,{replace:u,state:r,preventScrollReset:o,relative:s,viewTransition:i})}},[l,a,c,n,r,e,t,o,s,i])}function O5(t){dr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(Ry(t)),n=y.useRef(!1),r=No(),o=y.useMemo(()=>u5(r.search,n.current?null:e.current),[r.search]),s=vr(),i=y.useCallback((a,l)=>{const c=Ry(typeof a=="function"?a(o):a);n.current=!0,s("?"+c,l)},[s,o]);return[o,i]}var L5=0,j5=()=>`__${String(++L5)}__`;function B5(){let{router:t}=tM("useSubmit"),{basename:e}=y.useContext(Yr),n=e5();return y.useCallback(async(r,o={})=>{let{action:s,method:i,encType:a,formData:l,body:c}=p5(r,e);if(o.navigate===!1){let d=o.fetcherKey||j5();await t.fetch(d,n,o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function V5(t,{relative:e}={}){let{basename:n}=y.useContext(Yr),r=y.useContext(Jr);Ge(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s={...Td(t||".",{relative:e})},i=No();if(t==null){s.search=i.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(u=>u).forEach(u=>a.append("index",u));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ko([n,s.pathname])),Mc(s)}function $5(t,e={}){let n=y.useContext(UE);Ge(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tM("useViewTransitionState"),o=Td(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ro(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Ro(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Eh(o.pathname,i)!=null||Eh(o.pathname,s)!=null}[...k5];const H5="_icon_1vtik_1",Ed={icon:H5};function F5({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:le(Ed.icon,t),...e,children:m.jsx("g",{children:m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.855 15.67C12.995 15.31 12.9049 14.9 12.625 14.62L10.5349 12.56L10.5649 12.53C12.3049 10.59 13.5449 8.35999 14.2749 6H16.215C16.755 6 17.205 5.54999 17.205 5.01001V4.98999C17.205 4.45001 16.755 4 16.215 4H10.205V3C10.205 2.45001 9.755 2 9.20496 2C8.65491 2 8.20496 2.45001 8.20496 3V4H2.19495C1.65491 4 1.20496 4.45001 1.20496 4.98999C1.20496 5.53998 1.65491 5.97998 2.19495 5.97998H12.375C11.705 7.91998 10.6449 9.75 9.20496 11.35C8.3949 10.46 7.71497 9.48999 7.1449 8.46997C6.98499 8.17999 6.69495 8 6.36499 8C5.67493 8 5.23499 8.75 5.57495 9.34998C6.20496 10.48 6.97498 11.56 7.875 12.56L3.505 16.87C3.10498 17.26 3.10498 17.9 3.505 18.29C3.8949 18.68 4.5249 18.68 4.92493 18.29L9.20496 14L11.225 16.02C11.735 16.53 12.605 16.34 12.855 15.67ZM17.705 10C17.105 10 16.5649 10.37 16.355 10.94L12.6849 20.74C12.4449 21.35 12.9049 22 13.5549 22C13.9449 22 14.2949 21.76 14.4349 21.39L15.325 19H20.075L20.975 21.39C21.1149 21.75 21.465 22 21.855 22C22.5049 22 22.965 21.35 22.7349 20.74L19.0649 10.94C18.845 10.37 18.3049 10 17.705 10ZM17.705 12.67L16.085 17H19.325L17.705 12.67Z",fillOpacity:"0.54"})})})}const z5="_primary_pdmgw_6",U5="_noMargin_pdmgw_10",Om={default:"_default_pdmgw_1",primary:z5,noMargin:U5};function W5({level:t,children:e,primary:n,noMargin:r,className:o,onClick:s}){const i=[Om.default,n&&Om.primary,r&&Om.noMargin,o];switch(t){case 1:return m.jsx("h1",{onClick:s,className:le(...i),children:e});case 2:return m.jsx("h2",{onClick:s,className:le(...i),children:e});case 3:return m.jsx("h3",{onClick:s,className:le(...i),children:e});case 4:return m.jsx("h4",{onClick:s,className:le(...i),children:e});default:return m.jsx("h5",{onClick:s,className:le(...i),children:e})}}const G5="_description_11sgl_6",q5="_noMargin_11sgl_12",K5="_underline_11sgl_16",Y5="_bold_11sgl_20",as={default:"_default_11sgl_1",description:G5,noMargin:q5,underline:K5,bold:Y5};function J5({children:t,isDescription:e,underline:n,className:r,...o}){return m.jsx("span",{className:le(as.default,e&&as.description,n&&as.underline,r),...o,children:t})}function Z5({children:t,isDescription:e,noMargin:n,underline:r,bold:o,className:s}){return m.jsx("p",{className:le(as.default,e&&as.description,n&&as.noMargin,r&&as.underline,o&&as.bold,s),children:t})}const ie={Title:W5,Paragraph:Z5,Text:J5},X5="_container_1p3r9_2",Q5="_body_1p3r9_14",_x={container:X5,body:Q5};function eL({className:t,title:e,logo:n,description:r,rightComponent:o,onClick:s}){return m.jsxs("div",{className:le(_x.container,t),onClick:s,children:[n,m.jsxs("div",{className:_x.body,children:[m.jsx(ie.Paragraph,{bold:!0,noMargin:!0,children:e}),m.jsx(ie.Paragraph,{noMargin:!0,isDescription:!0,children:r})]}),o]})}const ut={ItemMeta:eL},tL="_ghost_p15d2_12",nL="_sm_p15d2_20",rL="_lg_p15d2_25",oL="_md_p15d2_30",sL="_dash_p15d2_35",iL="_block_p15d2_41",aL="_disabled_p15d2_46",Go={default:"_default_p15d2_1",ghost:tL,sm:nL,lg:rL,md:oL,dash:sL,block:iL,disabled:aL};function ht({onClick:t,disabled:e,children:n,type:r,className:o,block:s,size:i,...a}){return m.jsx("button",{onClick:t,className:le(Go.default,r==="ghost"&&Go.ghost,r==="dash"&&Go.dash,s&&Go.block,i==="sm"&&Go.sm,i==="lg"&&Go.lg,i==="md"&&Go.md,e&&Go.disabled,o),disabled:e,...a,children:n})}const lL="_button_aap0f_1",cL="_firstButton_aap0f_5",dL="_lastButton_aap0f_10",uL="_middleButton_aap0f_14",hL="_active_aap0f_18",fL="_leftActiveBorder_aap0f_24",pL="_rightActiveBorder_aap0f_28",mL="_rightActiveAndLastBorder_aap0f_32",qo={button:lL,firstButton:cL,lastButton:dL,middleButton:uL,active:hL,leftActiveBorder:fL,rightActiveBorder:pL,rightActiveAndLastBorder:mL};function _y({isButton:t,options:e,value:n,onChangeValue:r,classNameOption:o,getClassNameActiveOption:s=()=>""}){return t?m.jsx(m.Fragment,{children:e.map(({label:i,value:a},l)=>{const c=l>e.length-1&&e[l+1].value===n,d=l>0&&e[l-1].value===n;return m.jsx(ht,{type:"ghost",size:"md",onClick:()=>r&&r(a),className:le(qo.button,l===0&&qo.firstButton,l===e.length-1&&qo.lastButton,l!==e.length-1&&l!==0&&qo.middleButton,a===n&&qo.active,a===n&&c&&qo.leftActiveBorder,d&&qo.rightActiveBorder,d&&l===e.length-1&&qo.rightActiveAndLastBorder,o,a===n&&s({label:i,value:a})),children:i},`${n}-${l}`)})}):null}function gL({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:le(Ed.icon,t),...e,children:m.jsx("g",{id:"color_lens_24px",children:m.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 3C7.03003 3 3 7.03 3 12C3 16.97 7.03003 21 12 21C12.83 21 13.5 20.33 13.5 19.5C13.5 19.11 13.35 18.76 13.11 18.49C12.88 18.23 12.73 17.88 12.73 17.5C12.73 16.67 13.4 16 14.23 16H16C18.76 16 21 13.76 21 11C21 6.57999 16.97 3 12 3ZM6.5 12C5.66998 12 5 11.33 5 10.5C5 9.67001 5.66998 9 6.5 9C7.33002 9 8 9.67001 8 10.5C8 11.33 7.33002 12 6.5 12ZM8 6.5C8 7.32999 8.66998 8 9.5 8C10.33 8 11 7.32999 11 6.5C11 5.67001 10.33 5 9.5 5C8.66998 5 8 5.67001 8 6.5ZM14.5 8C13.67 8 13 7.32999 13 6.5C13 5.67001 13.67 5 14.5 5C15.33 5 16 5.67001 16 6.5C16 7.32999 15.33 8 14.5 8ZM16 10.5C16 11.33 16.67 12 17.5 12C18.33 12 19 11.33 19 10.5C19 9.67001 18.33 9 17.5 9C16.67 9 16 9.67001 16 10.5Z","fill-opacity":"0.54"})})})}var Ac=(t=>(t.Vi="vi",t.En="en",t))(Ac||{});const Px=t=>{let e;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(e):c;if(!Object.is(u,e)){const h=e;e=d??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(f=>f(e,h))}},o=()=>e,a={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,o,a);return a},yL=t=>t?Px(t):Px,bL=t=>t;function vL(t,e=bL){const n=D.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return D.useDebugValue(n),n}const Dx=t=>{const e=yL(t),n=r=>vL(e,r);return Object.assign(n,e),n},cp=t=>t?Dx(t):Dx,Lm=new Map;function ur(t,e,{storeOnMount:n}={}){if(!Lm.has(t)){const i=cp(a=>({storedValue:(()=>{if(typeof window>"u")return e;try{const l=window.localStorage.getItem(t);return n&&!l&&e&&window.localStorage.setItem(t,JSON.stringify(e)),l?JSON.parse(l):e}catch(l){return console.log(l),e}})(),setValue:l=>{a(c=>{const d=l instanceof Function?l(c.storedValue):l;try{window.localStorage.setItem(t,JSON.stringify(d))}catch(u){console.log(u)}return{storedValue:d}})}}));Lm.set(t,i)}const r=Lm.get(t),{storedValue:o,setValue:s}=r();return[o,s]}var Ix,Nx;(function(t){t.CANCELED_BY_MOVEMENT="canceled-by-movement",t.CANCELED_BY_TIMEOUT="canceled-by-timeout"})(Ix||(Ix={})),function(t){t.BOTH="both",t.MOUSE="mouse",t.TOUCH="touch"}(Nx||(Nx={}));const nM=6048e5,wL=864e5,Ox=Symbol.for("constructDateFrom");function Vr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Ox in t?t[Ox](e):t instanceof Date?new t.constructor(e):new Date(e)}function Rt(t,e){return Vr(e||t,t)}let xL={};function dp(){return xL}function Rc(t,e){var a,l,c,d;const n=dp(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,o=Rt(t,e==null?void 0:e.in),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function Mh(t,e){return Rc(t,{...e,weekStartsOn:1})}function rM(t,e){const n=Rt(t,e==null?void 0:e.in),r=n.getFullYear(),o=Vr(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const s=Mh(o),i=Vr(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=Mh(i);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Lx(t){const e=Rt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function oM(t,...e){const n=Vr.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Ah(t,e){const n=Rt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function kL(t,e,n){const[r,o]=oM(n==null?void 0:n.in,t,e),s=Ah(r),i=Ah(o),a=+s-Lx(s),l=+i-Lx(i);return Math.round((a-l)/wL)}function CL(t,e){const n=rM(t,e),r=Vr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Mh(r)}function SL(t){return Vr(t,Date.now())}function TL(t,e,n){const[r,o]=oM(n==null?void 0:n.in,t,e);return+Ah(r)==+Ah(o)}function EL(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ML(t){return!(!EL(t)&&typeof t!="number"||isNaN(+Rt(t)))}function sM(t,e){const n=Rt(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function iM(t,e){const n=Rt(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function AL(t,e){const n=Rt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const RL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_L=(t,e,n)=>{let r;const o=RL[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function jm(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const PL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},DL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},IL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NL={date:jm({formats:PL,defaultWidth:"full"}),time:jm({formats:DL,defaultWidth:"full"}),dateTime:jm({formats:IL,defaultWidth:"full"})},OL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},LL=(t,e,n,r)=>OL[t];function Tl(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return o[s]}}const jL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$L={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},HL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},FL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zL=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},UL={ordinalNumber:zL,era:Tl({values:jL,defaultWidth:"wide"}),quarter:Tl({values:BL,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Tl({values:VL,defaultWidth:"wide"}),day:Tl({values:$L,defaultWidth:"wide"}),dayPeriod:Tl({values:HL,defaultWidth:"wide",formattingValues:FL,defaultFormattingWidth:"wide"})};function El(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(o);if(!s)return null;const i=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?GL(a,u=>u.test(i)):WL(a,u=>u.test(i));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(i.length);return{value:c,rest:d}}}function WL(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function GL(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function qL(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(o.length);return{value:i,rest:a}}}const KL=/^(\d+)(th|st|nd|rd)?/i,YL=/\d+/i,JL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZL={any:[/^b/i,/^(a|c)/i]},XL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},QL={any:[/1/i,/2/i,/3/i,/4/i]},ej={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},oj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ij={ordinalNumber:qL({matchPattern:KL,parsePattern:YL,valueCallback:t=>parseInt(t,10)}),era:El({matchPatterns:JL,defaultMatchWidth:"wide",parsePatterns:ZL,defaultParseWidth:"any"}),quarter:El({matchPatterns:XL,defaultMatchWidth:"wide",parsePatterns:QL,defaultParseWidth:"any",valueCallback:t=>t+1}),month:El({matchPatterns:ej,defaultMatchWidth:"wide",parsePatterns:tj,defaultParseWidth:"any"}),day:El({matchPatterns:nj,defaultMatchWidth:"wide",parsePatterns:rj,defaultParseWidth:"any"}),dayPeriod:El({matchPatterns:oj,defaultMatchWidth:"any",parsePatterns:sj,defaultParseWidth:"any"})},aj={code:"en-US",formatDistance:_L,formatLong:NL,formatRelative:LL,localize:UL,match:ij,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lj(t,e){const n=Rt(t,e==null?void 0:e.in);return kL(n,AL(n))+1}function cj(t,e){const n=Rt(t,e==null?void 0:e.in),r=+Mh(n)-+CL(n);return Math.round(r/nM)+1}function aM(t,e){var d,u,h,f;const n=Rt(t,e==null?void 0:e.in),r=n.getFullYear(),o=dp(),s=(e==null?void 0:e.firstWeekContainsDate)??((u=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??o.firstWeekContainsDate??((f=(h=o.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=Vr((e==null?void 0:e.in)||t,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=Rc(i,e),l=Vr((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Rc(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function dj(t,e){var a,l,c,d;const n=dp(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,o=aM(t,e),s=Vr((e==null?void 0:e.in)||t,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),Rc(s,e)}function uj(t,e){const n=Rt(t,e==null?void 0:e.in),r=+Rc(n,e)-+dj(n,e);return Math.round(r/nM)+1}function Me(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ko={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Me(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Me(n+1,2)},d(t,e){return Me(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Me(t.getHours()%12||12,e.length)},H(t,e){return Me(t.getHours(),e.length)},m(t,e){return Me(t.getMinutes(),e.length)},s(t,e){return Me(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Me(o,e.length)}},Zi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jx={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Ko.y(t,e)},Y:function(t,e,n,r){const o=aM(t,r),s=o>0?o:1-o;if(e==="YY"){const i=s%100;return Me(i,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Me(s,e.length)},R:function(t,e){const n=rM(t);return Me(n,e.length)},u:function(t,e){const n=t.getFullYear();return Me(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Me(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Me(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ko.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Me(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=uj(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):Me(o,e.length)},I:function(t,e,n){const r=cj(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Me(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ko.d(t,e)},D:function(t,e,n){const r=lj(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Me(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Me(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Me(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return Me(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=Zi.noon:r===0?o=Zi.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=Zi.evening:r>=12?o=Zi.afternoon:r>=4?o=Zi.morning:o=Zi.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ko.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ko.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Me(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Me(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ko.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ko.s(t,e)},S:function(t,e){return Ko.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Vx(r);case"XXXX":case"XX":return Xs(r);case"XXXXX":case"XXX":default:return Xs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Vx(r);case"xxxx":case"xx":return Xs(r);case"xxxxx":case"xxx":default:return Xs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Bx(r,":");case"OOOO":default:return"GMT"+Xs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Bx(r,":");case"zzzz":default:return"GMT"+Xs(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Me(r,e.length)},T:function(t,e,n){return Me(+t,e.length)}};function Bx(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+e+Me(s,2)}function Vx(t,e){return t%60===0?(t>0?"-":"+")+Me(Math.abs(t)/60,2):Xs(t,e)}function Xs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Me(Math.trunc(r/60),2),s=Me(r%60,2);return n+o+e+s}const $x=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},lM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},hj=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return $x(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",$x(r,e)).replace("{{time}}",lM(o,e))},fj={p:lM,P:hj},pj=/^D+$/,mj=/^Y+$/,gj=["D","DD","YY","YYYY"];function yj(t){return pj.test(t)}function bj(t){return mj.test(t)}function vj(t,e,n){const r=wj(t,e,n);if(console.warn(r),gj.includes(t))throw new RangeError(r)}function wj(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cj=/^'([^]*?)'?$/,Sj=/''/g,Tj=/[a-zA-Z]/;function Ej(t,e,n){var d,u,h,f;const r=dp(),o=r.locale??aj,s=r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,i=r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,a=Rt(t,n==null?void 0:n.in);if(!ML(a))throw new RangeError("Invalid time value");let l=e.match(kj).map(p=>{const g=p[0];if(g==="p"||g==="P"){const b=fj[g];return b(p,o.formatLong)}return p}).join("").match(xj).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:Mj(p)};if(jx[g])return{isToken:!0,value:p};if(g.match(Tj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return l.map(p=>{if(!p.isToken)return p.value;const g=p.value;(bj(g)||yj(g))&&vj(g,e,String(t));const b=jx[g[0]];return b(a,g,o.localize,c)}).join("")}function Mj(t){const e=t.match(Cj);return e?e[1].replace(Sj,"'"):t}function Aj(t,e){return TL(Vr(t,t),SL(t))}function Rj(t,e,n){const r=Rt(t,n==null?void 0:n.in);return r.setHours(e),r}function _j(t,e,n){const r=Rt(t,n==null?void 0:n.in);return r.setMilliseconds(e),r}function Pj(t,e,n){const r=Rt(t,n==null?void 0:n.in);return r.setMinutes(e),r}function Dj(t,e,n){const r=Rt(t,n==null?void 0:n.in);return r.setSeconds(e),r}const Ij="baby",Nj=()=>{const[t,e]=ur(Ij,{});return{baby:t,setBaby:e,calculateStartDateFromDueDate:r=>new Date(new Date(r).getTime()-24192e6).toISOString()}};var bt=[];for(var Bm=0;Bm<256;++Bm)bt.push((Bm+256).toString(16).slice(1));function Oj(t,e=0){return(bt[t[e+0]]+bt[t[e+1]]+bt[t[e+2]]+bt[t[e+3]]+"-"+bt[t[e+4]]+bt[t[e+5]]+"-"+bt[t[e+6]]+bt[t[e+7]]+"-"+bt[t[e+8]]+bt[t[e+9]]+"-"+bt[t[e+10]]+bt[t[e+11]]+bt[t[e+12]]+bt[t[e+13]]+bt[t[e+14]]+bt[t[e+15]]).toLowerCase()}var gu,Lj=new Uint8Array(16);function jj(){if(!gu&&(gu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gu(Lj)}var Bj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Hx={randomUUID:Bj};function sn(t,e,n){if(Hx.randomUUID&&!t)return Hx.randomUUID();t=t||{};var r=t.random||(t.rng||jj)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Oj(r)}const Vj="checklist_template",$j="selected_checklist_templates",Gs={repeat:{minute:"0",hour:"8",dayOfMonth:"*",month:"*",dayOfWeek:"*",startedAt:new Date().toISOString()},createdAt:new Date().toISOString(),records:[],fieldGroups:[]},Hj=[{id:sn(),title:"Drink water",...Gs,avatar:{type:"icon",name:"mdi:water",color:"#00aaff"}},{id:sn(),title:"Drink Orange juice",...Gs,avatar:{type:"icon",name:"noto-v1:tropical-drink",color:"#ff9900"}},{id:sn(),title:"Take vitamin supplement",...Gs,avatar:{type:"icon",name:"game-icons:medicines",color:"#00ff00"}},{id:sn(),title:"Eat fruits(banana, seeds) and vegetables",...Gs,avatar:{type:"icon",name:"twemoji:pot-of-food",color:"#00aaff"}},{id:sn(),title:"Exercise",...Gs,avatar:{type:"icon",name:"healthicons:exercise-yoga-outline"}},{id:sn(),title:"Sleep early",...Gs,avatar:{type:"icon",name:"fxemoji:sleeping"}},{id:sn(),title:"Drink milk",...Gs,avatar:{type:"icon",name:"icon-park-outline:milk",color:"#ff9900"}}],Fj=Hj.reduce((t,e)=>({...t,[e.id]:e}),{}),Ss=()=>{const[t,e]=ur(Vj,Fj,{storeOnMount:!0}),[n,r]=ur($j,[]),o=u=>{const h=sn();return e({...t,[h]:{...u,id:h,createdAt:new Date().toISOString()}}),a([...n,h]),{id:h}},s=u=>{var h;e({...t,[u.id]:{...u,createdAt:((h=t[u.id])==null?void 0:h.createdAt)||new Date().toISOString()}})},i=u=>{const h={...t};delete h[u],e(h),n.includes(u)&&a(n.filter(f=>f!==u))},a=(u=[])=>{r(u)};return{checklistTemplate:t,getChecklistTemplate:u=>t[u],addChecklistTemplate:o,updateChecklistTemplate:s,deleteChecklistTemplate:i,selectedChecklistTemplates:n,updateSelectedChecklistTemplate:a,getRecommendChecklistTemplates:()=>Object.values(t),getChecklistTemplateIdsByGivingDate:({date:u}={date:new Date})=>n.filter(h=>{var p,g;const f=t[h];return((p=f==null?void 0:f.repeat)==null?void 0:p.dayOfWeek.split(",").includes(u.getDay().toString()))||((g=f==null?void 0:f.repeat)==null?void 0:g.dayOfWeek)==="*"})}},zj="checklist",up=()=>{const[t,e]=ur(zj,{}),{getChecklistTemplateIdsByGivingDate:n,checklistTemplate:r}=Ss(),[o,s]=D.useState([]),[i,a]=D.useState({}),l=({date:p}={date:new Date})=>{const g=Object.values(t).filter(x=>new Date(x.startedAt).toLocaleDateString()===p.toLocaleDateString()),v=n({date:p}).map(x=>{const w=g.find(k=>k.checklistTemplateId===x);return w||{id:sn(),clientOnly:!0,title:r[x].title,checklistTemplateId:x,startedAt:new Date(p).toISOString(),endedAt:new Date(new Date().setHours(23,59,59,999)).toISOString()}});return{checklistIds:v.map(x=>x.id),checklist:v.reduce((x,w)=>({...x,[w.id]:w}),{})}},c=p=>{e({...t,[p.id]:{...t[p.id],...p}})},d=p=>{const g=sn(),b={...p,id:g};return e({...t,[g]:b}),b},u=({date:p})=>{const{checklistIds:g,checklist:b}=l({date:p});s(g),a(b)},h=p=>Object.values(t).filter(g=>g.checklistTemplateId===p).sort((g,b)=>new Date(g.startedAt)-new Date(b.startedAt)),f=p=>t[p];return{updateChecklist:c,getChecklistByGivingDate:u,getAllChecklistWithTemplate:h,allChecklist:{...i,...t},addChecklist:d,checklistByGivingDateIds:o,getChecklistDetail:f}},Uj="body_metric",Wj=cp(t=>({chartData:{},setChartData:e=>t({chartData:e})})),Gj=cp(t=>({currentDay:new Date,setCurrentDay:e=>t({currentDay:e}),currentBodyMetric:void 0,setCurrentBodyMetric:e=>t({currentBodyMetric:e})})),j0=()=>{const[t,e]=ur(Uj,{}),{chartData:n,setChartData:r}=Wj(),{currentBodyMetric:o,setCurrentBodyMetric:s,currentDay:i,setCurrentDay:a}=Gj(),l=(h=t)=>{const f=Object.values(h).sort((v,x)=>new Date(v.createdAt).getTime()-new Date(x.createdAt).getTime()),p=f.map(v=>new Date(v.createdAt).toLocaleDateString()),g=f.map(v=>v.weight),b=f.map(v=>v.bellySize);return{categories:p,weights:g,bellySizes:b}},c=h=>{const f=l(h);r(f)},d=h=>{const f=Object.values(t).find(b=>new Date(b.createdAt).toLocaleDateString()===new Date(h.createdAt).toLocaleDateString());let p,g=(f==null?void 0:f.id)||"";f?p={...t,[f.id]:{...f,...h}}:(g=sn(),p={...t,[g]:{...h,id:g}}),e(p),c(p),s(p[g])},u=({date:h})=>{const f=Object.values(t).find(p=>new Date(p.createdAt).toLocaleDateString()===h.toLocaleDateString());return s(f),a(h),f};return D.useEffect(()=>{u({date:new Date})},[]),{addBodyMetric:d,getChartData:l,chartData:n,updateChartDate:c,setChartData:r,currentBodyMetric:o,updateCurrentBodyMetric:u,currentDay:i}};var Ci=(t=>(t.Light="light",t.Dark="dark",t))(Ci||{});const cM=D.createContext({pomodoro:0,setPomodoro:()=>{},shortBreak:0,setShortBreak:()=>{},longBreak:0,setLongBreak:()=>{},theme:Ci.Light,setTheme:()=>{}});var dM=(t=>(t[t.Pomodoro=0]="Pomodoro",t[t.ShortBreak=1]="ShortBreak",t[t.LongBreak=2]="LongBreak",t))(dM||{});const Vm={time:0,isPlaying:!1,pause:()=>{},start:()=>{},stop:()=>{}};D.createContext({pomodoroTimer:Vm,shortBreakTimer:Vm,longBreakTimer:Vm,pomodoroPhase:dM.Pomodoro,setPomodoroPhase:()=>{},autoStartTimerWhenChangePomodoroPhase:()=>{}});const hp=()=>D.useContext(cM),$m=60*1e3,qj=t=>function(e){const[n,r]=ur("pomodoro",{pomodoro:25*$m,shortBreak:5*$m,longBreak:10*$m,theme:Ci.Light});return m.jsx(cM.Provider,{value:{...n,setPomodoro:o=>r({...n,pomodoro:o}),setShortBreak:o=>r({...n,shortBreak:o}),setLongBreak:o=>r({...n,longBreak:o}),setTheme:o=>r({...n,theme:o})},children:m.jsx(t,{...e})})},Kj=t=>`https://raw.githubusercontent.com/zTwist201/audio/main/${t}`;var Py=(t=>(t.MusicBox="mb",t.Chime="ch",t))(Py||{});Py.MusicBox+"",Py.Chime+"";const Yj=(t,e,n)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},uM=D.createContext({messages:{},changeLanguage:()=>{},language:Ac.En,formatMessage:()=>""}),Jj=t=>function(n){const[r,o]=ur("app_language",Ac.En),[s,i]=D.useState({}),a=async c=>{const{default:d}=await Yj(Object.assign({"./language/en.json":()=>kt(()=>import("./en-DO2yRtJc.js"),[]),"./language/vi.json":()=>kt(()=>import("./vi-BU6JAnvG.js"),[])}),`./language/${c}.json`,3);i(d)};D.useEffect(()=>{a(r)},[]);const l=(c,d)=>{const{id:u,defaultMessage:h}=c,f=s[u]||h;return d?Object.entries(d).reduce((p,[g,b])=>p.replace(new RegExp(`{{${g}}}`,"gm"),b),f):f};return m.jsx(uM.Provider,{value:{messages:s,language:r,changeLanguage:async c=>{o(c),a(c)},formatMessage:l},children:m.jsx(t,{...n})})},_t=()=>D.useContext(uM),Zj="_container_uzw7y_2",Xj="_body_uzw7y_9",Qj="_footer_uzw7y_13",eB="_version_uzw7y_19",tB="_link_uzw7y_24",Ml={container:Zj,body:Xj,footer:Qj,version:eB,link:tB},nB="_container_t6uy9_2",rB="_left_t6uy9_15",oB="_right_t6uy9_24",sB="_rightIcon_t6uy9_30",iB="_backIcon_t6uy9_37",hs={container:nB,left:rB,right:oB,rightIcon:sB,backIcon:iB},hM=Object.freeze({left:0,top:0,width:16,height:16}),Rh=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),B0=Object.freeze({...hM,...Rh}),Dy=Object.freeze({...B0,body:"",hidden:!1});function aB(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}function Fx(t,e){const n=aB(t,e);for(const r in Dy)r in Rh?r in t&&!(r in n)&&(n[r]=Rh[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function lB(t,e){const n=t.icons,r=t.aliases||Object.create(null),o=Object.create(null);function s(i){if(n[i])return o[i]=[];if(!(i in o)){o[i]=null;const a=r[i]&&r[i].parent,l=a&&s(a);l&&(o[i]=[a].concat(l))}return o[i]}return Object.keys(n).concat(Object.keys(r)).forEach(s),o}function cB(t,e,n){const r=t.icons,o=t.aliases||Object.create(null);let s={};function i(a){s=Fx(r[a]||o[a],s)}return i(e),n.forEach(i),Fx(t,s)}function fM(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(o=>{e(o,null),n.push(o)});const r=lB(t);for(const o in r){const s=r[o];s&&(e(o,cB(t,o,s)),n.push(o))}return n}const dB={provider:"",aliases:{},not_found:{},...hM};function Hm(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function pM(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!Hm(t,dB))return null;const n=e.icons;for(const o in n){const s=n[o];if(!o||typeof s.body!="string"||!Hm(s,Dy))return null}const r=e.aliases||Object.create(null);for(const o in r){const s=r[o],i=s.parent;if(!o||typeof i!="string"||!n[i]&&!r[i]||!Hm(s,Dy))return null}return e}const mM=/^[a-z0-9]+(-[a-z0-9]+)*$/,fp=(t,e,n,r="")=>{const o=t.split(":");if(t.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;r=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){const a=o.pop(),l=o.pop(),c={provider:o.length>0?o[0]:r,prefix:l,name:a};return e&&!nh(c)?null:c}const s=o[0],i=s.split("-");if(i.length>1){const a={provider:r,prefix:i.shift(),name:i.join("-")};return e&&!nh(a)?null:a}if(n&&r===""){const a={provider:r,prefix:"",name:s};return e&&!nh(a,n)?null:a}return null},nh=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1,zx=Object.create(null);function uB(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Pa(t,e){const n=zx[t]||(zx[t]=Object.create(null));return n[e]||(n[e]=uB(t,e))}function gM(t,e){return pM(e)?fM(e,(n,r)=>{r?t.icons[n]=r:t.missing.add(n)}):[]}function hB(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let _c=!1;function yM(t){return typeof t=="boolean"&&(_c=t),_c}function Ux(t){const e=typeof t=="string"?fp(t,!0,_c):t;if(e){const n=Pa(e.provider,e.prefix),r=e.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function fB(t,e){const n=fp(t,!0,_c);if(!n)return!1;const r=Pa(n.provider,n.prefix);return e?hB(r,n.name,e):(r.missing.add(n.name),!0)}function pB(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),_c&&!e&&!t.prefix){let o=!1;return pM(t)&&(t.prefix="",fM(t,(s,i)=>{fB(s,i)&&(o=!0)})),o}const n=t.prefix;if(!nh({prefix:n,name:"a"}))return!1;const r=Pa(e,n);return!!gM(r,t)}const bM=Object.freeze({width:null,height:null}),vM=Object.freeze({...bM,...Rh}),mB=/(-?[0-9.]*[0-9]+[0-9.]*)/g,gB=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Wx(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const r=t.split(mB);if(r===null||!r.length)return t;const o=[];let s=r.shift(),i=gB.test(s);for(;;){if(i){const a=parseFloat(s);isNaN(a)?o.push(s):o.push(Math.ceil(a*e*n)/n)}else o.push(s);if(s=r.shift(),s===void 0)return o.join("");i=!i}}function yB(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const o=t.indexOf(">",r),s=t.indexOf("</"+e);if(o===-1||s===-1)break;const i=t.indexOf(">",s);if(i===-1)break;n+=t.slice(o+1,s).trim(),t=t.slice(0,r).trim()+t.slice(i+1)}return{defs:n,content:t}}function bB(t,e){return t?"<defs>"+t+"</defs>"+e:e}function vB(t,e,n){const r=yB(t);return bB(r.defs,e+r.content+n)}const wB=t=>t==="unset"||t==="undefined"||t==="none";function xB(t,e){const n={...B0,...t},r={...vM,...e},o={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(g=>{const b=[],v=g.hFlip,x=g.vFlip;let w=g.rotate;v?x?w+=2:(b.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),b.push("scale(-1 1)"),o.top=o.left=0):x&&(b.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),b.push("scale(1 -1)"),o.top=o.left=0);let k;switch(w<0&&(w-=Math.floor(w/4)*4),w=w%4,w){case 1:k=o.height/2+o.top,b.unshift("rotate(90 "+k.toString()+" "+k.toString()+")");break;case 2:b.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:k=o.width/2+o.left,b.unshift("rotate(-90 "+k.toString()+" "+k.toString()+")");break}w%2===1&&(o.left!==o.top&&(k=o.left,o.left=o.top,o.top=k),o.width!==o.height&&(k=o.width,o.width=o.height,o.height=k)),b.length&&(s=vB(s,'<g transform="'+b.join(" ")+'">',"</g>"))});const i=r.width,a=r.height,l=o.width,c=o.height;let d,u;i===null?(u=a===null?"1em":a==="auto"?c:a,d=Wx(u,l/c)):(d=i==="auto"?l:i,u=a===null?Wx(d,c/l):a==="auto"?c:a);const h={},f=(g,b)=>{wB(b)||(h[g]=b.toString())};f("width",d),f("height",u);const p=[o.left,o.top,l,c];return h.viewBox=p.join(" "),{attributes:h,viewBox:p,body:s}}const kB=/\sid="(\S+)"/g,CB="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let SB=0;function TB(t,e=CB){const n=[];let r;for(;r=kB.exec(t);)n.push(r[1]);if(!n.length)return t;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const i=typeof e=="function"?e(s):e+(SB++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+i+o+"$3")}),t=t.replace(new RegExp(o,"g"),""),t}const Iy=Object.create(null);function EB(t,e){Iy[t]=e}function Ny(t){return Iy[t]||Iy[""]}function V0(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const $0=Object.create(null),Al=["https://api.simplesvg.com","https://api.unisvg.com"],rh=[];for(;Al.length>0;)Al.length===1||Math.random()>.5?rh.push(Al.shift()):rh.push(Al.pop());$0[""]=V0({resources:["https://api.iconify.design"].concat(rh)});function MB(t,e){const n=V0(e);return n===null?!1:($0[t]=n,!0)}function H0(t){return $0[t]}const AB=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let Gx=AB();function RB(t,e){const n=H0(t);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let o=0;n.resources.forEach(i=>{o=Math.max(o,i.length)});const s=e+".json?icons=";r=n.maxURL-o-n.path.length-s.length}return r}function _B(t){return t===404}const PB=(t,e,n)=>{const r=[],o=RB(t,e),s="icons";let i={type:s,provider:t,prefix:e,icons:[]},a=0;return n.forEach((l,c)=>{a+=l.length+1,a>=o&&c>0&&(r.push(i),i={type:s,provider:t,prefix:e,icons:[]},a=l.length),i.icons.push(l)}),r.push(i),r};function DB(t){if(typeof t=="string"){const e=H0(t);if(e)return e.path}return"/"}const IB=(t,e,n)=>{if(!Gx){n("abort",424);return}let r=DB(e.provider);switch(e.type){case"icons":{const s=e.prefix,a=e.icons.join(","),l=new URLSearchParams({icons:a});r+=s+".json?"+l.toString();break}case"custom":{const s=e.uri;r+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let o=503;Gx(t+r).then(s=>{const i=s.status;if(i!==200){setTimeout(()=>{n(_B(i)?"abort":"next",i)});return}return o=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?n("abort",s):n("next",o)});return}setTimeout(()=>{n("success",s)})}).catch(()=>{n("next",o)})},NB={prepare:PB,send:IB};function OB(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((o,s)=>o.provider!==s.provider?o.provider.localeCompare(s.provider):o.prefix!==s.prefix?o.prefix.localeCompare(s.prefix):o.name.localeCompare(s.name));let r={provider:"",prefix:"",name:""};return t.forEach(o=>{if(r.name===o.name&&r.prefix===o.prefix&&r.provider===o.provider)return;r=o;const s=o.provider,i=o.prefix,a=o.name,l=n[s]||(n[s]=Object.create(null)),c=l[i]||(l[i]=Pa(s,i));let d;a in c.icons?d=e.loaded:i===""||c.missing.has(a)?d=e.missing:d=e.pending;const u={provider:s,prefix:i,name:a};d.push(u)}),e}function wM(t,e){t.forEach(n=>{const r=n.loaderCallbacks;r&&(n.loaderCallbacks=r.filter(o=>o.id!==e))})}function LB(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const r=t.provider,o=t.prefix;e.forEach(s=>{const i=s.icons,a=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==o)return!0;const c=l.name;if(t.icons[c])i.loaded.push({provider:r,prefix:o,name:c});else if(t.missing.has(c))i.missing.push({provider:r,prefix:o,name:c});else return n=!0,!0;return!1}),i.pending.length!==a&&(n||wM([t],s.id),s.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),s.abort))})}))}let jB=0;function BB(t,e,n){const r=jB++,o=wM.bind(null,n,r);if(!e.pending.length)return o;const s={id:r,icons:e,callback:t,abort:o};return n.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(s)}),o}function VB(t,e=!0,n=!1){const r=[];return t.forEach(o=>{const s=typeof o=="string"?fp(o,e,n):o;s&&r.push(s)}),r}var $B={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function HB(t,e,n,r){const o=t.resources.length,s=t.random?Math.floor(Math.random()*o):t.index;let i;if(t.random){let S=t.resources.slice(0);for(i=[];S.length>1;){const T=Math.floor(Math.random()*S.length);i.push(S[T]),S=S.slice(0,T).concat(S.slice(T+1))}i=i.concat(S)}else i=t.resources.slice(s).concat(t.resources.slice(0,s));const a=Date.now();let l="pending",c=0,d,u=null,h=[],f=[];typeof r=="function"&&f.push(r);function p(){u&&(clearTimeout(u),u=null)}function g(){l==="pending"&&(l="aborted"),p(),h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function b(S,T){T&&(f=[]),typeof S=="function"&&f.push(S)}function v(){return{startTime:a,payload:e,status:l,queriesSent:c,queriesPending:h.length,subscribe:b,abort:g}}function x(){l="failed",f.forEach(S=>{S(void 0,d)})}function w(){h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function k(S,T,E){const M=T!=="success";switch(h=h.filter(R=>R!==S),l){case"pending":break;case"failed":if(M||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){d=E,x();return}if(M){d=E,h.length||(i.length?C():x());return}if(p(),w(),!t.random){const R=t.resources.indexOf(S.resource);R!==-1&&R!==t.index&&(t.index=R)}l="completed",f.forEach(R=>{R(E)})}function C(){if(l!=="pending")return;p();const S=i.shift();if(S===void 0){if(h.length){u=setTimeout(()=>{p(),l==="pending"&&(w(),x())},t.timeout);return}x();return}const T={status:"pending",resource:S,callback:(E,M)=>{k(T,E,M)}};h.push(T),c++,u=setTimeout(C,t.rotate),n(S,e,T.callback)}return setTimeout(C),v}function xM(t){const e={...$B,...t};let n=[];function r(){n=n.filter(a=>a().status==="pending")}function o(a,l,c){const d=HB(e,a,l,(u,h)=>{r(),c&&c(u,h)});return n.push(d),d}function s(a){return n.find(l=>a(l))||null}return{query:o,find:s,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:r}}function qx(){}const Fm=Object.create(null);function FB(t){if(!Fm[t]){const e=H0(t);if(!e)return;const n=xM(e),r={config:e,redundancy:n};Fm[t]=r}return Fm[t]}function zB(t,e,n){let r,o;if(typeof t=="string"){const s=Ny(t);if(!s)return n(void 0,424),qx;o=s.send;const i=FB(t);i&&(r=i.redundancy)}else{const s=V0(t);if(s){r=xM(s);const i=t.resources?t.resources[0]:"",a=Ny(i);a&&(o=a.send)}}return!r||!o?(n(void 0,424),qx):r.query(e,o,n)().abort}function Kx(){}function UB(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,LB(t)}))}function WB(t){const e=[],n=[];return t.forEach(r=>{(r.match(mM)?e:n).push(r)}),{valid:e,invalid:n}}function Rl(t,e,n){function r(){const o=t.pendingIcons;e.forEach(s=>{o&&o.delete(s),t.icons[s]||t.missing.add(s)})}if(n&&typeof n=="object")try{if(!gM(t,n).length){r();return}}catch(o){console.error(o)}r(),UB(t)}function Yx(t,e){t instanceof Promise?t.then(n=>{e(n)}).catch(()=>{e(null)}):e(t)}function GB(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:r}=t,o=t.iconsToLoad;if(delete t.iconsToLoad,!o||!o.length)return;const s=t.loadIcon;if(t.loadIcons&&(o.length>1||!s)){Yx(t.loadIcons(o,r,n),d=>{Rl(t,o,d)});return}if(s){o.forEach(d=>{const u=s(d,r,n);Yx(u,h=>{const f=h?{prefix:r,icons:{[d]:h}}:null;Rl(t,[d],f)})});return}const{valid:i,invalid:a}=WB(o);if(a.length&&Rl(t,a,null),!i.length)return;const l=r.match(mM)?Ny(n):null;if(!l){Rl(t,i,null);return}l.prepare(n,r,i).forEach(d=>{zB(n,d,u=>{Rl(t,d.icons,u)})})}))}const qB=(t,e)=>{const n=VB(t,!0,yM()),r=OB(n);if(!r.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(r.loaded,r.missing,r.pending,Kx)}),()=>{l=!1}}const o=Object.create(null),s=[];let i,a;return r.pending.forEach(l=>{const{provider:c,prefix:d}=l;if(d===a&&c===i)return;i=c,a=d,s.push(Pa(c,d));const u=o[c]||(o[c]=Object.create(null));u[d]||(u[d]=[])}),r.pending.forEach(l=>{const{provider:c,prefix:d,name:u}=l,h=Pa(c,d),f=h.pendingIcons||(h.pendingIcons=new Set);f.has(u)||(f.add(u),o[c][d].push(u))}),s.forEach(l=>{const c=o[l.provider][l.prefix];c.length&&GB(l,c)}),e?BB(e,r,s):Kx};function KB(t,e){const n={...t};for(const r in e){const o=e[r],s=typeof o;r in bM?(o===null||o&&(s==="string"||s==="number"))&&(n[r]=o):s===typeof n[r]&&(n[r]=r==="rotate"?o%4:o)}return n}const YB=/[\s,]+/;function JB(t,e){e.split(YB).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function ZB(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function r(o){for(;o<0;)o+=4;return o%4}if(n===""){const o=parseInt(t);return isNaN(o)?0:r(o)}else if(n!==t){let o=0;switch(n){case"%":o=25;break;case"deg":o=90}if(o){let s=parseFloat(t.slice(0,t.length-n.length));return isNaN(s)?0:(s=s/o,s%1===0?r(s):0)}}return e}function XB(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function QB(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function e9(t){return"data:image/svg+xml,"+QB(t)}function t9(t){return'url("'+e9(t)+'")'}let ec;function n9(){try{ec=window.trustedTypes.createPolicy("iconify",{createHTML:t=>t})}catch{ec=null}}function r9(t){return ec===void 0&&n9(),ec?ec.createHTML(t):t}const kM={...vM,inline:!1},o9={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},s9={display:"inline-block"},Oy={backgroundColor:"currentColor"},CM={backgroundColor:"transparent"},Jx={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Zx={WebkitMask:Oy,mask:Oy,background:CM};for(const t in Zx){const e=Zx[t];for(const n in Jx)e[t+n]=Jx[n]}const i9={...kM,inline:!0};function Xx(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const a9=(t,e,n)=>{const r=e.inline?i9:kM,o=KB(r,e),s=e.mode||"svg",i={},a=e.style||{},l={...s==="svg"?o9:{}};if(n){const b=fp(n,!1,!0);if(b){const v=["iconify"],x=["provider","prefix"];for(const w of x)b[w]&&v.push("iconify--"+b[w]);l.className=v.join(" ")}}for(let b in e){const v=e[b];if(v!==void 0)switch(b){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":break;case"_ref":l.ref=v;break;case"className":l[b]=(l[b]?l[b]+" ":"")+v;break;case"inline":case"hFlip":case"vFlip":o[b]=v===!0||v==="true"||v===1;break;case"flip":typeof v=="string"&&JB(o,v);break;case"color":i.color=v;break;case"rotate":typeof v=="string"?o[b]=ZB(v):typeof v=="number"&&(o[b]=v);break;case"ariaHidden":case"aria-hidden":v!==!0&&v!=="true"&&delete l["aria-hidden"];break;default:r[b]===void 0&&(l[b]=v)}}const c=xB(t,o),d=c.attributes;if(o.inline&&(i.verticalAlign="-0.125em"),s==="svg"){l.style={...i,...a},Object.assign(l,d);let b=0,v=e.id;return typeof v=="string"&&(v=v.replace(/-/g,"_")),l.dangerouslySetInnerHTML={__html:r9(TB(c.body,v?()=>v+"ID"+b++:"iconifyReact"))},y.createElement("svg",l)}const{body:u,width:h,height:f}=t,p=s==="mask"||(s==="bg"?!1:u.indexOf("currentColor")!==-1),g=XB(u,{...d,width:h+"",height:f+""});return l.style={...i,"--svg":t9(g),width:Xx(d.width),height:Xx(d.height),...s9,...p?Oy:CM,...a},y.createElement("span",l)};yM(!0);EB("",NB);if(typeof document<"u"&&typeof window<"u"){const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!pB(r))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const r="IconifyProviders["+n+"] is invalid.";try{const o=e[n];if(typeof o!="object"||!o||o.resources===void 0)continue;MB(n,o)||console.error(r)}catch{console.error(r)}}}}function SM(t){const[e,n]=y.useState(!!t.ssr),[r,o]=y.useState({});function s(f){if(f){const p=t.icon;if(typeof p=="object")return{name:"",data:p};const g=Ux(p);if(g)return{name:p,data:g}}return{name:""}}const[i,a]=y.useState(s(!!t.ssr));function l(){const f=r.callback;f&&(f(),o({}))}function c(f){if(JSON.stringify(i)!==JSON.stringify(f))return l(),a(f),!0}function d(){var f;const p=t.icon;if(typeof p=="object"){c({name:"",data:p});return}const g=Ux(p);if(c({name:p,data:g}))if(g===void 0){const b=qB([p],d);o({callback:b})}else g&&((f=t.onLoad)===null||f===void 0||f.call(t,p))}y.useEffect(()=>(n(!0),l),[]),y.useEffect(()=>{e&&d()},[t.icon,e]);const{name:u,data:h}=i;return h?a9({...B0,...h},t,u):t.children?t.children:t.fallback?t.fallback:y.createElement("span",{})}const l9=y.forwardRef((t,e)=>SM({...t,_ref:e}));y.forwardRef((t,e)=>SM({inline:!0,...t,_ref:e}));const Q=({className:t,...e})=>m.jsx(l9,{className:le(Ed.icon,t),...e}),c9=()=>{const t=vr();return m.jsxs("div",{className:hs.container,children:[m.jsx("div",{className:hs.left,onClick:()=>t("/"),children:"DREAMER"}),m.jsx("div",{className:hs.right,children:m.jsx(Q,{className:hs.rightIcon,width:24,icon:"solar:settings-linear",onClick:()=>{t("/setting")}})})]})},Md=({renderLeftComponent:t,renderRightComponent:e,onClickLeftButton:n})=>{const r=vr();return m.jsxs("div",{className:hs.container,children:[m.jsxs("div",{className:hs.left,onClick:n||(()=>r(-1)),children:[m.jsx(Q,{icon:"solar:arrow-left-outline",width:24,className:hs.backIcon}),t==null?void 0:t()]}),m.jsx("div",{className:hs.right,children:e==null?void 0:e()})]})},d9="1.0.1";function u9(){const{shortBreak:t,setShortBreak:e,pomodoro:n,setPomodoro:r,longBreak:o,setLongBreak:s,theme:i,setTheme:a}=hp(),l=vr(),{language:c,changeLanguage:d,formatMessage:u}=_t();return m.jsxs("div",{className:Ml.container,children:[m.jsx(Md,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:u({id:"setting-page.title",defaultMessage:"Setting"})})}),m.jsxs("div",{className:Ml.body,children:[m.jsx(ut.ItemMeta,{logo:m.jsx(gL,{}),title:u({id:"setting-page.label-theme",defaultMessage:"Theme"}),description:u({id:"setting-page.description-theme",defaultMessage:"Config theme for whole page"}),rightComponent:m.jsx(_y,{isButton:!0,value:i,onChangeValue:h=>a(h),options:[{label:u({id:"setting-page.label-light",defaultMessage:"Light"}),value:Ci.Light},{label:u({id:"setting-page.label-dark",defaultMessage:"Dark"}),value:Ci.Dark}]})}),m.jsx(ut.ItemMeta,{logo:m.jsx(F5,{}),title:"Language",description:"Config language for whole page",rightComponent:m.jsx(_y,{isButton:!0,value:c,onChangeValue:h=>d(h),options:[{label:"VN",value:Ac.Vi},{label:"EN",value:Ac.En}]})}),m.jsx(ut.ItemMeta,{onClick:()=>l("/checklist-template"),logo:m.jsx(Q,{width:24,icon:"proicons:task-list"}),title:"Task Management",description:"Select/ Deselect Tasks"})]}),m.jsxs("a",{href:"https://github.com/tomzaku/dreamer-web-public/issues",className:Ml.footer,children:[m.jsxs(ie.Text,{className:Ml.version,children:["Version: ",d9]}),m.jsx(ie.Text,{className:Ml.link,children:"| Feature Request | Bug Report"})]})]})}const h9="record_field",f9={duration:{id:"duration",title:"Duration",icon:"solar:clock-square-broken",description:"Record duration for tracking purpose",type:"metric",unit:"minutes"},"push-ups":{id:"push-ups",title:"Push-ups",icon:"iconoir:gym",description:"For example: Push-ups, Squats",type:"metric",unit:"reps"},note:{id:"note",title:"Note",icon:"solar:notebook-minimalistic-linear",description:"Note for tracking purpose",type:"note",unit:"words"}},F0=()=>{const[t,e]=ur(h9,f9);return{getAllRecordFields:()=>Object.values(t),getRecordFields:s=>s.map(i=>t[i]),addRecordField:s=>{const i=sn();e(a=>({...a,[i]:{id:i,...s}}))},removeRecordField:s=>{e(i=>{const a={...i};return delete a[s],a})}}},p9="_container_cj2x8_1",m9={container:p9};function $r({children:t,className:e,onClick:n}){return m.jsx("div",{onClick:n,className:le(m9.container,e),children:t})}const g9="_container_yw9a7_2",y9="_title_yw9a7_8",b9="_button_yw9a7_12",v9="_buttonActive_yw9a7_19",w9="_addIcon_yw9a7_23",x9="_icon_yw9a7_27",k9="_iconActive_yw9a7_31",C9="_hr_yw9a7_35",Yo={container:g9,title:y9,button:b9,buttonActive:v9,addIcon:w9,icon:x9,iconActive:k9,hr:C9},S9="_container_ngn4e_1",T9="_hr_ngn4e_11",Qx={container:S9,hr:T9},tc=({classes:t}={})=>m.jsx("div",{className:le(Qx.container,t==null?void 0:t.container),children:m.jsx("div",{className:le(Qx.hr,t==null?void 0:t.hr)})});var Ut=(t=>(t[t.Home=0]="Home",t[t.History=1]="History",t[t.Add=2]="Add",t[t.Metric=3]="Metric",t))(Ut||{});const E9=({onClickHome:t,onClickHistory:e,onClickAdd:n,onClickMetric:r,activeTab:o,renderTitle:s=()=>null})=>{const i=[{icon:"solar:home-2-line-duotone",iconActive:"solar:home-2-bold",onClick:t,isActive:o===0},{icon:"solar:clock-square-broken",iconActive:"solar:clock-square-bold",onClick:e,isActive:o===1},{icon:"solar:chart-square-linear",iconActive:"solar:chart-square-bold",onClick:r,isActive:o===3}],a=_t();return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:Yo.container,children:[m.jsx(ie.Title,{level:4,noMargin:!0,className:Yo.title,children:s()}),i.map(({icon:l,iconActive:c,onClick:d,isActive:u},h)=>m.jsx(Q,{onClick:d,className:le(Yo.icon,u&&Yo.iconActive),width:24,icon:u?c:l},h)),m.jsxs(ht,{className:le(Yo.button,o===2&&Yo.buttonActive),type:"dash",onClick:n,children:[m.jsx(Q,{icon:"material-symbols:add",className:Yo.addIcon}),a.formatMessage({id:"record-header.add-record",defaultMessage:"Add"})]})]}),m.jsx(tc,{classes:{hr:Yo.hr}})]})},M9="_cardContainer_zrk1z_2",A9={cardContainer:M9},R9="_container_udzj2_2",_9="_dash_udzj2_18",P9="_solid_udzj2_22",zm={container:R9,dash:_9,solid:P9},bo=D.forwardRef(({className:t,border:e,...n},r)=>m.jsx("input",{ref:r,className:le(zm.container,e==="dash"&&zm.dash,e==="solid"&&zm.solid,t),...n}));function wt(t){this.content=t}wt.prototype={constructor:wt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new wt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new wt(n)},addToStart:function(t,e){return new wt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new wt(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new wt(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=wt.from(t),t.size?new wt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=wt.from(t),t.size?new wt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=wt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};wt.from=function(t){if(t instanceof wt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new wt(e)};function TM(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=TM(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function EM(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,d=Math.min(i.text.length,a.text.length);for(;c<d&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=EM(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class _{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,o+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new _(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new _(r,o)}cutByIndex(e,n){return e==n?_.empty:e==0&&n==this.content.length?this:new _(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new _(o,s)}addToStart(e){return new _([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return TM(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return EM(this,e,n,r)}findIndex(e,n=-1){if(e==0)return yu(0,e);if(e==this.size)return yu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?yu(r+1,i):yu(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return _.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new _(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new _(n||e,r)}static from(e){if(!e)return _.empty;if(e instanceof _)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_.empty=new _([],0);const Um={index:0,offset:0};function yu(t,e){return Um.index=t,Um.offset=e,Um}function _h(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!_h(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!_h(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ie=class Ly{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&_h(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ly.none;if(e instanceof Ly)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Ie.none=[];class Ph extends Error{}class j{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=AM(this.content,e+this.openStart,n);return r&&new j(r,this.openStart,this.openEnd)}removeBetween(e,n){return new j(MM(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return j.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new j(_.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new j(e,r,o)}}j.empty=new j(_.empty,0,0);function MM(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(MM(s.content,e-o-1,n-o-1)))}function AM(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=AM(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function D9(t,e,n){if(n.openStart>t.depth)throw new Ph("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ph("Inconsistent open depths");return RM(t,e,n,0)}function RM(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=RM(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return pi(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=I9(n,t);return pi(s,PM(t,i,a,e,r))}else return pi(s,Dh(t,e,r))}function _M(t,e){if(!e.type.compatibleContent(t.type))throw new Ph("Cannot join "+e.type.name+" onto "+t.type.name)}function jy(t,e,n){let r=t.node(n);return _M(r,e.node(n)),r}function fi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function nc(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(fi(t.nodeAfter,r),s++));for(let a=s;a<i;a++)fi(o.child(a),r);e&&e.depth==n&&e.textOffset&&fi(e.nodeBefore,r)}function pi(t,e){return t.type.checkContent(e),t.copy(e)}function PM(t,e,n,r,o){let s=t.depth>o&&jy(t,e,o+1),i=r.depth>o&&jy(n,r,o+1),a=[];return nc(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(_M(s,i),fi(pi(s,PM(t,e,n,r,o+1)),a)):(s&&fi(pi(s,Dh(t,e,o+1)),a),nc(e,n,o,a),i&&fi(pi(i,Dh(n,r,o+1)),a)),nc(r,null,o,a),new _(a)}function Dh(t,e,n){let r=[];if(nc(null,t,n,r),t.depth>n){let o=jy(t,e,n+1);fi(pi(o,Dh(t,e,n+1)),r)}return nc(e,null,n,r),new _(r)}function I9(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(_.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class Pc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ie.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ih(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new Pc(n,r,s)}static resolveCached(e,n){let r=ek.get(e);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else ek.set(e,r=new N9);let o=r.elts[r.i]=Pc.resolve(e,n);return r.i=(r.i+1)%O9,o}}class N9{constructor(){this.elts=[],this.i=0}}const O9=12,ek=new WeakMap;class Ih{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const L9=Object.create(null);let Co=class By{constructor(e,n,r,o=Ie.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||_.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&_h(this.attrs,n||e.defaultAttrs||L9)&&Ie.sameSet(this.marks,r||Ie.none)}copy(e=null){return e==this.content?this:new By(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new By(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return j.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new j(c,o.depth-i,s.depth-i)}replace(e,n,r){return D9(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return Pc.resolveCached(this,e)}resolveNoCache(e){return Pc.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),DM(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=_.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ie.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ie.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=_.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};Co.prototype.text=void 0;class Nh extends Co{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):DM(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Nh(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Nh(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function DM(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Si{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new j9(e,n);if(r.next==null)return Si.empty;let o=IM(r);r.next&&r.err("Unexpected trailing text");let s=U9(z9(o));return W9(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return _.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:d,next:u}=i.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(u)==-1){o.push(u);let h=s(u,a.concat(d));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}Si.empty=new Si(!0);class j9{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function IM(t){let e=[];do e.push(B9(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function B9(t){let e=[];do e.push(V9(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function V9(t){let e=F9(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=$9(t,e);else break;return e}function tk(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function $9(t,e){let n=tk(t),r=n;return t.eat(",")&&(t.next!="}"?r=tk(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function H9(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(e)&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function F9(t){if(t.eat("(")){let e=IM(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=H9(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function z9(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let d=n();o(s(i.expr,l),d),l=d}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let d=n();r(l,d),o(s(i.expr,l),d),l=d}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function NM(t,e){return e-t}function nk(t,e){let n=[];return r(e),n.sort(NM);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function U9(t){let e=Object.create(null);return n(nk(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<o.length;d++)o[d][0]==a&&(c=o[d][1]);nk(t,l).forEach(d=>{c||o.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[r.join(",")]=new Si(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(NM);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function W9(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function OM(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function LM(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function jM(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function BM(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new q9(t,r,e[r]);return n}let rk=class VM{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=BM(e,r.attrs),this.defaultAttrs=OM(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Si.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:LM(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Co(this,this.computeAttrs(e),_.from(n),Ie.setFrom(r))}createChecked(e=null,n,r){return n=_.from(n),this.checkContent(n),new Co(this,this.computeAttrs(e),n,Ie.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=_.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(_.empty,!0);return s?new Co(this,e,n.append(s),Ie.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){jM(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ie.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new VM(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function G9(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class q9{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?G9(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class pp{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=BM(e,o.attrs),this.excluded=null;let s=OM(this.attrs);this.instance=s?new Ie(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ie(this,LM(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new pp(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){jM(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class $M{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=wt.from(e.nodes),n.marks=wt.from(e.marks||{}),this.nodes=rk.compile(this.spec.nodes,this),this.marks=pp.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=Si.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?ok(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:ok(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof rk){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Nh(r,r.defaultAttrs,e,Ie.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Co.fromJSON(this,e)}markFromJSON(e){return Ie.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function ok(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function K9(t){return t.tag!=null}function Y9(t){return t.style!=null}let So=class Vy{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(K9(o))this.tags.push(o);else if(Y9(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new ik(this,n,!1);return r.addAll(e,Ie.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new ik(this,n,!0);return r.addAll(e,Ie.none,n.from,n.to),j.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(X9(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=ak(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=ak(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Vy(e,Vy.schemaRules(e)))}};const HM={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},J9={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},FM={ol:!0,ul:!0},Dc=1,$y=2,oh=4;function sk(t,e,n){return e!=null?(e?Dc:0)|(e==="full"?$y:0):t&&t.whitespace=="pre"?Dc|$y:n&-5}class bu{constructor(e,n,r,o,s,i){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=Ie.none,this.match=s||(i&oh?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(_.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Dc)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=_.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(_.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!HM.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ik{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=sk(null,n.preserveWhitespace,0)|(r?oh:0);o?s=new bu(o.type,o.attrs,Ie.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new bu(null,null,Ie.none,!0,null,i):s=new bu(e.schema.topNodeType,null,Ie.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&$y?"full":this.localPreserveWS||(o.options&Dc)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;FM.hasOwnProperty(i)&&this.parser.normalizeLists&&Z9(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:J9.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(HM.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let u=l&&l.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,n);this.findAtPoint(e,s)}findPlace(e,n,r){let o,s;for(let i=this.open,a=0;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(s);for(let i=0;i<o.length;i++)n=this.enterInner(o[i],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=Ie.none;for(let a of o.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):lk(a.type,e.type))&&(i=a.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=sk(e,s,i.options);i.options&oh&&i.content.length==0&&(a|=oh);let l=Ie.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):lk(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new bu(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Dc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let d=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Z9(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&FM.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function X9(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ak(t){let e={};for(let n in t)e[n]=t[n];return e}function lk(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&i(d))return!0}};if(i(o.contentMatch))return!0}}class Oo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Wm(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],d=this.serializeMark(c,i.isInline,n);d&&(s.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=sh(Wm(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&sh(Wm(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return sh(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Oo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=ck(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return ck(e.marks)}}function ck(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Wm(t){return t.document||window.document}const dk=new WeakMap;function Q9(t){let e=dk.get(t);return e===void 0&&dk.set(t,e=e7(t)),e}function e7(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function sh(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Q9(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let u in c)if(c[u]!=null){let h=u.indexOf(" ");h>0?l.setAttributeNS(u.slice(0,h),u.slice(h+1),c[u]):l.setAttribute(u,c[u])}}for(let u=d;u<e.length;u++){let h=e[u];if(h===0){if(u<e.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=sh(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const zM=65535,UM=Math.pow(2,16);function t7(t,e){return t+e*UM}function uk(t){return t&zM}function n7(t){return(t-(t&zM))/UM}const WM=1,GM=2,ih=4,qM=8;class Hy{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&qM)>0}get deletedBefore(){return(this.delInfo&(WM|ih))>0}get deletedAfter(){return(this.delInfo&(GM|ih))>0}get deletedAcross(){return(this.delInfo&ih)>0}}class wn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&wn.empty)return wn.empty}recover(e){let n=0,r=uk(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+n7(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+i],u=l+c;if(e<=u){let h=c?e==l?-1:e==u?1:n:n,f=l+o+(h<0?0:d);if(r)return f;let p=e==(n<0?l:u)?null:t7(a/3,e-l),g=e==l?GM:e==u?WM:ih;return(n<0?e!=l:e!=u)&&(g|=qM),new Hy(f,g,p)}o+=d-c}return r?e+o:new Hy(e+o,0,null)}touches(e,n){let r=0,o=uk(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],d=this.ranges[o+r];e(a,a+c,l,l+d),s+=d-c}}invert(){return new wn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?wn.empty:new wn(e<0?[0,-e,0]:[0,0,e])}}wn.empty=new wn([]);class Da{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Da(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Da;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this._maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Hy(e,o,null)}}const Gm=Object.create(null);class Ht{getMap(){return wn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Gm[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Gm)throw new RangeError("Duplicate use of step JSON ID "+e);return Gm[e]=n,n.prototype.jsonID=e,n}}class st{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new st(e,null)}static fail(e){return new st(null,e)}static fromReplace(e,n,r,o){try{return st.ok(e.replace(n,r,o))}catch(s){if(s instanceof Ph)return st.fail(s.message);throw s}}}function z0(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(z0(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return _.fromArray(r)}class fs extends Ht{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new j(z0(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return st.fromReplace(e,this.from,this.to,s)}invert(){return new Pr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new fs(n.pos,r.pos,this.mark)}merge(e){return e instanceof fs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new fs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new fs(n.from,n.to,e.markFromJSON(n.mark))}}Ht.jsonID("addMark",fs);class Pr extends Ht{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new j(z0(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return st.fromReplace(e,this.from,this.to,r)}invert(){return new fs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Pr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Pr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Pr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Pr(n.from,n.to,e.markFromJSON(n.mark))}}Ht.jsonID("removeMark",Pr);class ps extends Ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return st.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return st.fromReplace(e,this.pos,this.pos+1,new j(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new ps(this.pos,n.marks[o]);return new ps(this.pos,this.mark)}}return new Ti(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ps(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ps(n.pos,e.markFromJSON(n.mark))}}Ht.jsonID("addNodeMark",ps);class Ti extends Ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return st.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return st.fromReplace(e,this.pos,this.pos+1,new j(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ps(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ti(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ti(n.pos,e.markFromJSON(n.mark))}}Ht.jsonID("removeNodeMark",Ti);class ot extends Ht{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Fy(e,this.from,this.to)?st.fail("Structure replace would overwrite content"):st.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new wn([this.from,this.to-this.from,this.slice.size])}invert(e){return new ot(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ot(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ot)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?j.empty:new j(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ot(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?j.empty:new j(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ot(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ot(n.from,n.to,j.fromJSON(e,n.slice),!!n.structure)}}Ht.jsonID("replace",ot);class rt extends Ht{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(Fy(e,this.from,this.gapFrom)||Fy(e,this.gapTo,this.to)))return st.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return st.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?st.fromReplace(e,this.from,this.to,r):st.fail("Content does not fit in gap")}getMap(){return new wn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new rt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new rt(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new rt(n.from,n.to,n.gapFrom,n.gapTo,j.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ht.jsonID("replaceAround",rt);function Fy(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function r7(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let u=l.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(u);for(let g=0;g<u.length;g++)u[g].isInSet(p)||(i&&i.to==h&&i.mark.eq(u[g])?i.to=f:o.push(i=new Pr(h,f,u[g])));a&&a.to==h?a.to=f:s.push(a=new fs(h,f,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function o7(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof pp){let c=i.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let d=0;d<l.length;d++){let u=l[d],h;for(let f=0;f<o.length;f++){let p=o[f];p.step==s-1&&u.eq(o[f].style)&&(h=p)}h?(h.to=c,h.step=s):o.push({style:u,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new Pr(i.from,i.to,i.style)))}function U0(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,u=r.matchType(c.type);if(!u)i.push(new ot(a,d,j.empty));else{r=u;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Pr(a,d,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new j(_.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new ot(a+h.index,a+h.index+h[0].length,p))}}a=d}if(!r.validEnd){let l=r.fillBefore(_.empty,!0);t.replace(a,a,new j(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function s7(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ja(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!s7(o,s,i))break}return null}function i7(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,d=_.empty,u=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,d=_.from(r.node(p).copy(d)),u++):l--;let h=_.empty,f=0;for(let p=s,g=!1;p>n;p--)g||o.after(p+1)<o.end(p)?(g=!0,h=_.from(o.node(p).copy(h)),f++):c++;t.step(new rt(l,c,i,a,new j(d.append(h),u,f),d.size-u,!0))}function KM(t,e,n=null,r=t){let o=a7(t,e),s=o&&l7(r,e);return s?o.map(hk).concat({type:e,attrs:n}).concat(s.map(hk)):null}function hk(t){return{type:t,attrs:null}}function a7(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function l7(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function c7(t,e,n){let r=_.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new rt(o,s,o,s,new j(r,0,0),n.length,!0))}function d7(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&u7(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&JM(t,i,a,s),U0(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let d=t.mapping.slice(s),u=d.map(a,1),h=d.map(a+i.nodeSize,1);return t.step(new rt(u,h,u+1,h-1,new j(_.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&YM(t,i,a,s),!1}})}function YM(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+s+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function JM(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+s);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function u7(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function h7(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new rt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new j(_.from(i),0,0),1,!0))}function To(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=n-2;c>s;c--,d--){let u=o.node(c),h=o.index(c);if(u.type.spec.isolating)return!1;let f=u.content.cutByIndex(h,u.childCount),p=r&&r[d+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[d]||u;if(!u.canReplace(h+1,u.childCount)||!g.type.validContent(f))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function f7(t,e,n=1,r){let o=t.doc.resolve(e),s=_.empty,i=_.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=_.from(o.node(a).copy(s));let d=r&&r[c];i=_.from(d?d.type.create(d.attrs,i):o.node(a).copy(i))}t.step(new ot(e,e,new j(s.append(i),n,n),!0))}function $i(t,e){let n=t.resolve(e),r=n.index();return ZM(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function p7(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),i=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function ZM(t,e){return!!(t&&e&&!t.isLeaf&&p7(t,e))}function mp(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&ZM(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function m7(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),i=s.node().type;if(o&&i.inlineContent){let d=i.whitespace=="pre",u=!!i.contentMatch.matchType(o);d&&!u?r=!1:!d&&u&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);JM(t,d.node(),d.before(),a)}i.inlineContent&&U0(t,e+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new ot(c,l.map(e+n,-1),j.empty,!0)),r===!0){let d=t.doc.resolve(c);YM(t,d.node(),d.before(),t.steps.length)}return t}function g7(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function XM(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),d=!1;if(s==1)d=c.canReplace(l,l,o);else{let u=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=u&&c.canReplaceWith(l,l,u[0])}if(d)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function gp(t,e,n=e,r=j.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return QM(o,s,r)?new ot(e,n,r):new y7(o,s,r).fit()}function QM(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class y7{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=_.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=_.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new j(s,i,a);return e>-1?new rt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ot(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=qm(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,u=null;if(n==1&&(i?c.matchType(i.type)||(u=c.fillBefore(_.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:u};if(n==2&&i&&(d=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=qm(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new j(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=qm(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new j(Ul(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new j(Ul(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,d=[],{match:u,type:h}=this.frontier[n];if(o){for(let g=0;g<o.childCount;g++)d.push(o.child(g));u=u.matchFragment(o)}let f=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let g=a.child(c),b=u.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(u=b,d.push(eA(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Wl(this.placed,n,_.from(d)),this.frontier[n].match=u,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<f;g++){let v=b.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),b=v.content}this.unplaced=p?e==0?j.empty:new j(Ul(i.content,e-1,1),e-1,f<0?i.openEnd:e-1):new j(Ul(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Km(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=Km(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=Km(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Wl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Wl(this.placed,this.depth,_.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(_.empty,!0);n.childCount&&(this.placed=Wl(this.placed,this.frontier.length,n))}}function Ul(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ul(t.firstChild.content,e-1,n)))}function Wl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Wl(t.lastChild.content,e-1,n)))}function qm(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function eA(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,eA(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(_.empty,!0)))),t.copy(r)}function Km(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!b7(n,s.content,i)?a:null}function b7(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function v7(t){return t.spec.defining||t.spec.definingForContent}function w7(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(QM(o,s,r))return t.step(new ot(e,n,r));let i=nA(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let h=o.depth,f=o.pos-1;h>0;h--,f--){let p=o.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;i.indexOf(h)>-1?a=h:o.before(h)==f&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],d=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=d-1;h>=0;h--){let f=c[h],p=v7(f.type);if(p&&!f.sameMarkup(o.node(Math.abs(a)-1)))d=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+d+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<i.length;g++){let b=i[(g+l)%i.length],v=!0;b<0&&(v=!1,b=-b);let x=o.node(b-1),w=o.index(b-1);if(x.canReplaceWith(w,w,p.type,p.marks))return t.replace(o.before(b),v?s.after(b):n,new j(tA(r.content,0,r.openStart,f),f,r.openEnd))}}let u=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>u));h--){let f=i[h];f<0||(e=o.before(f),n=s.after(f))}}function tA(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(tA(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(_.empty,!0))}return t}function x7(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=g7(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new j(_.from(r),0,0))}function k7(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=nA(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function nA(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class wa extends Ht{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return st.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return st.fromReplace(e,this.pos,this.pos+1,new j(_.from(o),0,n.isLeaf?0:1))}getMap(){return wn.empty}invert(e){return new wa(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new wa(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new wa(n.pos,n.attr,n.value)}}Ht.jsonID("attr",wa);class Ic extends Ht{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return st.ok(r)}getMap(){return wn.empty}invert(e){return new Ic(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ic(n.attr,n.value)}}Ht.jsonID("docAttr",Ic);let Ia=class extends Error{};Ia=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ia.prototype=Object.create(Error.prototype);Ia.prototype.constructor=Ia;Ia.prototype.name="TransformError";class W0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Da}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ia(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=j.empty){let o=gp(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new j(_.from(r),0,0))}delete(e,n){return this.replace(e,n,j.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return w7(this,e,n,r),this}replaceRangeWith(e,n,r){return x7(this,e,n,r),this}deleteRange(e,n){return k7(this,e,n),this}lift(e,n){return i7(this,e,n),this}join(e,n=1){return m7(this,e,n),this}wrap(e,n){return c7(this,e,n),this}setBlockType(e,n=e,r,o=null){return d7(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return h7(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new wa(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ic(e,n)),this}addNodeMark(e,n){return this.step(new ps(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ie)n.isInSet(r.marks)&&this.step(new Ti(e,n));else{let o=r.marks,s,i=[];for(;s=n.isInSet(o);)i.push(new Ti(e,s)),o=s.removeFromSet(o);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(e,n=1,r){return f7(this,e,n,r),this}addMark(e,n,r){return r7(this,e,n,r),this}removeMark(e,n,r){return o7(this,e,n,r),this}clearIncompatible(e,n,r){return U0(this,e,n,r),this}}const Ym=Object.create(null);class ee{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new rA(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=j.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?j.empty:n),a==0&&mk(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),mk(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new U(e):la(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?la(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):la(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new un(e.node(0))}static atStart(e){return la(e,e,0,0,1)||new un(e)}static atEnd(e){return la(e,e,e.content.size,e.childCount,-1)||new un(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ym[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ym)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ym[e]=n,n.prototype.jsonID=e,n}getBookmark(){return U.between(this.$anchor,this.$head).getBookmark()}}ee.prototype.visible=!0;class rA{constructor(e,n){this.$from=e,this.$to=n}}let fk=!1;function pk(t){!fk&&!t.parent.inlineContent&&(fk=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class U extends ee{constructor(e,n=e){pk(e),pk(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ee.near(r);let o=e.resolve(n.map(this.anchor));return new U(o.parent.inlineContent?o:r,r)}replace(e,n=j.empty){if(super.replace(e,n),n==j.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof U&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new yp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new U(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=ee.findFrom(n,r,!0)||ee.findFrom(n,-r,!0);if(s)n=s.$head;else return ee.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(ee.findFrom(e,-r,!0)||ee.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new U(e,n)}}ee.jsonID("text",U);class yp{constructor(e,n){this.anchor=e,this.head=n}map(e){return new yp(e.map(this.anchor),e.map(this.head))}resolve(e){return U.between(e.resolve(this.anchor),e.resolve(this.head))}}class q extends ee{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?ee.near(s):new q(s)}content(){return new j(_.from(this.node),0,0)}eq(e){return e instanceof q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new G0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new q(e.resolve(n.anchor))}static create(e,n){return new q(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}q.prototype.visible=!1;ee.jsonID("node",q);class G0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new yp(r,r):new G0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&q.isSelectable(r)?new q(n):ee.near(n)}}class un extends ee{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=j.empty){if(n==j.empty){e.delete(0,e.doc.content.size);let r=ee.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new un(e)}map(e){return new un(e)}eq(e){return e instanceof un}getBookmark(){return C7}}ee.jsonID("all",un);const C7={map(){return this},resolve(t){return new un(t)}};function la(t,e,n,r,o,s=!1){if(e.inlineContent)return U.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&q.isSelectable(a))return q.create(t,n-(o<0?a.nodeSize:0))}else{let l=la(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function mk(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof ot||o instanceof rt))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,d)=>{i==null&&(i=d)}),t.setSelection(ee.near(t.doc.resolve(i),n))}const gk=1,yk=2,bk=4;let S7=class extends W0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|gk)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&gk)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=yk,this}ensureMarks(e){return Ie.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&yk)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ie.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(ee.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=bk,this}get scrolledIntoView(){return(this.updated&bk)>0}};function vk(t,e){return!e||!t?t:t.bind(e)}class Gl{constructor(e,n,r){this.name=e,this.init=vk(n.init,r),this.apply=vk(n.apply,r)}}const T7=[new Gl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Gl("selection",{init(t,e){return t.selection||ee.atStart(e.doc)},apply(t){return t.selection}}),new Gl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Gl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Jm{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=T7.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Gl(r.key,r.spec.state,r))})}}class si{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,i)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let u=0;u<this.config.plugins.length;u++)o.push(u<i?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new si(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new S7(this)}static create(e){let n=new Jm(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new si(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Jm(this.schema,e.plugins),r=n.fields,o=new si(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Jm(e.schema,e.plugins),s=new si(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=Co.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=ee.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function oA(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=oA(o,e,{})),n[r]=o}return n}class me{constructor(e){this.spec=e,this.props={},e.props&&oA(e.props,this,this.props),this.key=e.key?e.key.key:sA("plugin")}getState(e){return e[this.key]}}const Zm=Object.create(null);function sA(t){return t in Zm?t+"$"+ ++Zm[t]:(Zm[t]=0,t+"$")}class Te{constructor(e="key"){this.key=sA(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ct=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Na=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let zy=null;const mo=function(t,e,n){let r=zy||(zy=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},E7=function(){zy=null},Ei=function(t,e,n,r){return n&&(wk(t,e,n,r,-1)||wk(t,e,n,r,1))},M7=/^(img|br|input|textarea|hr)$/i;function wk(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Hn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Ad(t)||M7.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ct(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?Hn(t):0}else return!1}}function Hn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function A7(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Hn(t)}else if(t.parentNode&&!Ad(t))e=Ct(t),t=t.parentNode;else return null}}function R7(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ad(t))e=Ct(t)+1,t=t.parentNode;else return null}}function _7(t,e,n){for(let r=e==0,o=e==Hn(t);r||o;){if(t==n)return!0;let s=Ct(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==Hn(t)}}function Ad(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const bp=function(t){return t.focusNode&&Ei(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ei(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function P7(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function D7(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Hn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Hn(r.startContainer),r.startOffset)}}}const Hr=typeof navigator<"u"?navigator:null,xk=typeof document<"u"?document:null,Ls=Hr&&Hr.userAgent||"",Uy=/Edge\/(\d+)/.exec(Ls),iA=/MSIE \d/.exec(Ls),Wy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ls),hn=!!(iA||Wy||Uy),ws=iA?document.documentMode:Wy?+Wy[1]:Uy?+Uy[1]:0,hr=!hn&&/gecko\/(\d+)/i.test(Ls);hr&&+(/Firefox\/(\d+)/.exec(Ls)||[0,0])[1];const Gy=!hn&&/Chrome\/(\d+)/.exec(Ls),Lt=!!Gy,aA=Gy?+Gy[1]:0,Yt=!hn&&!!Hr&&/Apple Computer/.test(Hr.vendor),Oa=Yt&&(/Mobile\/\w+/.test(Ls)||!!Hr&&Hr.maxTouchPoints>2),Bn=Oa||(Hr?/Mac/.test(Hr.platform):!1),I7=Hr?/Win/.test(Hr.platform):!1,vo=/Android \d/.test(Ls),Rd=!!xk&&"webkitFontSmoothing"in xk.documentElement.style,N7=Rd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function O7(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function so(t,e){return typeof t=="number"?t:t[e]}function L7(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function kk(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;){if(i.nodeType!=1){i=Na(i);continue}let a=i,l=a==s.body,c=l?O7(s):L7(a),d=0,u=0;if(e.top<c.top+so(r,"top")?u=-(c.top-e.top+so(o,"top")):e.bottom>c.bottom-so(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+so(o,"top")-c.top:e.bottom-c.bottom+so(o,"bottom")),e.left<c.left+so(r,"left")?d=-(c.left-e.left+so(o,"left")):e.right>c.right-so(r,"right")&&(d=e.right-c.right+so(o,"right")),d||u)if(l)s.defaultView.scrollBy(d,u);else{let f=a.scrollLeft,p=a.scrollTop;u&&(a.scrollTop+=u),d&&(a.scrollLeft+=d);let g=a.scrollLeft-f,b=a.scrollTop-p;e={left:e.left-g,top:e.top-b,right:e.right-g,bottom:e.bottom-b}}let h=l?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(h))break;i=h=="absolute"?i.offsetParent:Na(i)}}function j7(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:lA(t.dom)}}function lA(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Na(r));return e}function B7({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;cA(n,r==0?0:r-e)}function cA(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Xi=null;function V7(t){if(t.setActive)return t.setActive();if(Xi)return t.focus(Xi);let e=lA(t);t.focus(Xi==null?{get preventScroll(){return Xi={preventScroll:!0},!0}}:void 0),Xi||(Xi=!1,cA(e,0))}function dA(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let d=t.firstChild,u=0;d;d=d.nextSibling,u++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=mo(d).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=i&&p.bottom>=a){i=Math.max(p.bottom,i),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=d,r=g,o=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,d.nodeType==1&&g&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=d,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?$7(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:dA(n,o)}function $7(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=es(r,1);if(s.top!=s.bottom&&q0(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function q0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function H7(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function F7(t,e,n){let{node:r,offset:o}=dA(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function z7(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function uA(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(q0(e,c))return uA(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function U7(t,e){let n=t.dom.ownerDocument,r,o=0,s=D7(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!q0(e,c)||(i=uA(t.dom,e,c),!i))return null}if(Yt)for(let c=i;r&&c;c=Na(c))c.draggable&&(r=void 0);if(i=H7(i,e),r){if(hr&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}let c;Rd&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=z7(t,r,o,e))}a==null&&(a=F7(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Ck(t){return t.top<t.bottom||t.left<t.right}function es(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Ck(r))return r}return Array.prototype.find.call(n,Ck)||t.getBoundingClientRect()}const W7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function hA(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=Rd||hr;if(r.nodeType==3)if(i&&(W7.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=es(mo(r,o,o),n);if(hr&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=es(mo(r,o-1,o-1),-1);if(c.top==l.top){let d=es(mo(r,o,o+1),-1);if(d.top!=l.top)return _l(d,d.left<c.left)}}return l}else{let l=o,c=o,d=n<0?1:-1;return n<0&&!o?(c++,d=-1):n>=0&&o==r.nodeValue.length?(l--,d=1):n<0?l--:c++,_l(es(mo(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==Hn(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return Xm(l.getBoundingClientRect(),!1)}if(s==null&&o<Hn(r)){let l=r.childNodes[o];if(l.nodeType==1)return Xm(l.getBoundingClientRect(),!0)}return Xm(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==Hn(r))){let l=r.childNodes[o-1],c=l.nodeType==3?mo(l,Hn(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return _l(es(c,1),!1)}if(s==null&&o<Hn(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?mo(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return _l(es(c,-1),!0)}return _l(es(r.nodeType==3?mo(r):r,-n),n>=0)}function _l(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Xm(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function fA(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function G7(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return fA(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=hA(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=mo(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?i.top-d.top>(d.bottom-i.top)*2:d.bottom-i.bottom>(i.bottom-d.top)*2))return!1}}return!0})}const q7=/[\u0590-\u08ac]/;function K7(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return a?!q7.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:fA(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:u}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),b=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(d,u),l&&(l!=d||c!=u)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),b}):r.pos==r.start()||r.pos==r.end()}let Sk=null,Tk=null,Ek=!1;function Y7(t,e,n){return Sk==e&&Tk==n?Ek:(Sk=e,Tk=n,Ek=n=="up"||n=="down"?G7(t,e,n):K7(t,e,n))}const Wn=0,Mk=1,ii=2,Fr=3;class _d{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Wn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Ct(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof mA){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof pA&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Ct(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Ct(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let d=i+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=i;for(let u=a;u>0;u--){let h=this.children[u-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=Ct(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=Ct(u.dom);break}n+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],b=p+g.size;if(s>p&&i<b)return g.setSelection(e-p-g.border,n-p-g.border,r,o);p=b}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),u=!1;if((hr||Yt)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(u=!!(p&&f.nodeValue[p-1]==`
`),u&&p==f.nodeValue.length)for(let g=f,b;g;g=g.parentNode){if(b=g.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:Ct(b)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=f.childNodes[p-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(hr&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let f=d.focusNode.childNodes[d.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||u&&Yt)&&Ei(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Ei(l.node,l.offset,d.focusNode,d.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?ii:Mk,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Fr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ii:Fr}r=i}this.dirty=ii}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ii:Mk;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class pA extends _d{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Wn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class J7 extends _d{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Mi extends _d{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=Oo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Mi(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&Fr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Fr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Wn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Wn}}slice(e,n,r){let o=Mi.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=Ky(s,n,i,r)),e>0&&(s=Ky(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class xs extends _d{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),d=c&&c.dom,u=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=Oo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!u&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=bA(d,r,n),c?l=new Z7(e,n,r,o,d,u||null,h,c,s,i+1):n.isText?new vp(e,n,r,o,d,h,s):new xs(e,n,r,o,d,u||null,h,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_.empty)}return e}matchesNode(e,n,r){return this.dirty==Wn&&e.eq(this.node)&&Oh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Q7(this,i&&i.node,e);n8(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&l.syncToMarks(d==this.node.childCount?Ie.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,o)},(c,d,u,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,d,u,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,u,f,e)||l.updateNextNode(c,d,u,e,h,o)||l.addNode(c,d,u,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ii)&&(i&&this.protectLocalComposition(e,i),gA(this.contentDOM,this.children,e),Oa&&r8(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof U)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=o8(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new J7(this,s,n,o);e.input.compositionNodes.push(i),this.children=Ky(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==Fr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Wn}updateOuterDeco(e){if(Oh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=yA(this.dom,this.nodeDOM,qy(this.outerDeco,this.node,n),qy(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ak(t,e,n,r,o){bA(r,e,t);let s=new xs(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class vp extends xs{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Fr||this.dirty!=Wn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Wn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Wn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new vp(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Fr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class mA extends _d{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Wn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Z7 extends xs{constructor(e,n,r,o,s,i,a,l,c,d){super(e,n,r,o,s,i,a,c,d),this.spec=l}update(e,n,r,o){if(this.dirty==Fr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function gA(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=Rk(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof Mi){let l=r?r.previousSibling:t.lastChild;gA(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Rk(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const rc=function(t){t&&(this.nodeName=t)};rc.prototype=Object.create(null);const ai=[new rc];function qy(t,e,n){if(t.length==0)return ai;let r=n?ai[0]:new rc,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new rc(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new rc(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function yA(t,e,n,r){if(n==ai&&r==ai)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=ai[0]),o=l}X7(o,a||ai[0],i)}return o}function X7(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function bA(t,e,n){return yA(t,t,ai,qy(e,n,t.nodeType!=1))}function Oh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Rk(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Q7{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=e8(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Wn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Mi.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==Fr&&i.dom==i.contentDOM&&(i.dirty=ii),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof xs){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,u,h=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Fr&&Oh(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(u=this.recreateWrapper(l,e,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=ii,u.updateChildren(o,i+1),u.dirty=Wn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Oh(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=xs.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=xs.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new pA(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Mi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof vp)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Yt||Lt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new mA(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function e8(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Mi)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function t8(t,e){return t.type.side-e.type.side}function n8(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,o,e.forChild(s,d),c),s+=d.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let d,u;for(;i<o.length&&o[i].to==s;){let b=o[i++];b.widget&&(d?(u||(u=[d])).push(b):d=b)}if(d)if(u){u.sort(t8);for(let b=0;b<u.length;b++)n(u[b],c,!!l)}else n(d,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let p=s+h.nodeSize;if(h.isText){let b=p;i<o.length&&o[i].from<b&&(b=o[i].from);for(let v=0;v<a.length;v++)a[v].to<b&&(b=a[v].to);b<p&&(l=h.cut(b-s),h=h.cut(0,b-s),p=b,f=-1)}else for(;i<o.length&&o[i].to<p;)i++;let g=h.isInline&&!h.isLeaf?a.filter(b=>!b.inline):a.slice();r(h,g,e.forChild(s,h),f),s=p}}function r8(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function o8(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Ky(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,d=a+=l.size;c>=n||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),d>n&&s.push(l.slice(n-c,l.size,r)))}return s}function K0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(bp(n)){for(l=i;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&q.isSelectable(u)&&o.parent&&!(u.isInline&&_7(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new q(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let u=i,h=i;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);u=Math.min(u,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[l,i]=h==t.state.selection.anchor?[h,u]:[u,h],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=Y0(t,d,a,u)}return c}function vA(t){return t.editable?t.hasFocus():xA(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Eo(t,e=!1){let n=t.state.selection;if(wA(t,n),!!vA(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Lt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Ei(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)i8(t);else{let{anchor:r,head:o}=n,s,i;_k&&!(n instanceof U)&&(n.$from.parent.inlineContent||(s=Pk(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=Pk(t,n.to))),t.docView.setSelection(r,o,t,e),_k&&(s&&Dk(s),i&&Dk(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&s8(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const _k=Yt||Lt&&aA<63;function Pk(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Yt&&o&&o.contentEditable=="false")return Qm(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return Qm(o);if(s)return Qm(s)}}function Qm(t){return t.contentEditable="true",Yt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Dk(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function s8(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!vA(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function i8(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Ct(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&hn&&ws<=11&&(r.disabled=!0,r.disabled=!1)}function wA(t,e){if(e instanceof q){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Ik(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Ik(t)}function Ik(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Y0(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||U.between(e,n,r)}function Nk(t){return t.editable&&!t.hasFocus()?!1:xA(t)}function xA(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function a8(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ei(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Yy(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&ee.findFrom(s,e)}function ns(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Ok(t,e,n){let r=t.state.selection;if(r instanceof U)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return ns(t,new U(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=Yy(t.state,e);return o&&o instanceof q?ns(t,o):!1}else if(!(Bn&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?q.isSelectable(s)?ns(t,new q(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Rd?ns(t,new U(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof q&&r.node.isInline)return ns(t,new U(e>0?r.$to:r.$from));{let o=Yy(t.state,e);return o?ns(t,o):!1}}}function Lh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function oc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Qi(t,e){return e<0?l8(t):c8(t)}function l8(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(hr&&n.nodeType==1&&r<Lh(n)&&oc(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(oc(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(kA(n))break;{let a=n.previousSibling;for(;a&&oc(a,-1);)o=n.parentNode,s=Ct(a),a=a.previousSibling;if(a)n=a,r=Lh(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?Jy(t,n,r):o&&Jy(t,o,s)}function c8(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Lh(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(oc(a,1))s=n,i=++r;else break}else{if(kA(n))break;{let a=n.nextSibling;for(;a&&oc(a,1);)s=a.parentNode,i=Ct(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Lh(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&Jy(t,s,i)}function kA(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function d8(t,e){for(;t&&e==t.childNodes.length&&!Ad(t);)e=Ct(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function u8(t,e){for(;t&&!e&&!Ad(t);)e=Ct(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Jy(t,e,n){if(e.nodeType!=3){let s,i;(i=d8(e,n))?(e=i,n=0):(s=u8(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(bp(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Eo(t)},50)}function Lk(t,e){let n=t.state.doc.resolve(e);if(!(Lt||I7)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function jk(t,e,n){let r=t.state.selection;if(r instanceof U&&!r.empty||n.indexOf("s")>-1||Bn&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=Yy(t.state,e);if(i&&i instanceof q)return ns(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof un?ee.near(i,e):ee.findFrom(i,e);return a?ns(t,a):!1}return!1}function Bk(t,e){if(!(t.state.selection instanceof U))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function Vk(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function h8(t){if(!Yt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Vk(t,r,"true"),setTimeout(()=>Vk(t,r,"false"),20)}return!1}function f8(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function p8(t,e){let n=e.keyCode,r=f8(e);if(n==8||Bn&&n==72&&r=="c")return Bk(t,-1)||Qi(t,-1);if(n==46&&!e.shiftKey||Bn&&n==68&&r=="c")return Bk(t,1)||Qi(t,1);if(n==13||n==27)return!0;if(n==37||Bn&&n==66&&r=="c"){let o=n==37?Lk(t,t.state.selection.from)=="ltr"?-1:1:-1;return Ok(t,o,r)||Qi(t,o)}else if(n==39||Bn&&n==70&&r=="c"){let o=n==39?Lk(t,t.state.selection.from)=="ltr"?1:-1:1;return Ok(t,o,r)||Qi(t,o)}else{if(n==38||Bn&&n==80&&r=="c")return jk(t,-1,r)||Qi(t,-1);if(n==40||Bn&&n==78&&r=="c")return h8(t)||jk(t,1,r)||Qi(t,1);if(r==(Bn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function J0(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let i=t.someProp("clipboardSerializer")||Oo.fromSchema(t.state.schema),a=AA(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=MA[c.nodeName.toLowerCase()]);){for(let f=d.length-1;f>=0;f--){let p=a.createElement(d[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${u?` -${u}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function CA(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new j(_.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):j.empty;let u=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(u)a=u;else{let h=o.marks(),{schema:f}=t.state,p=Oo.fromSchema(f);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=i.appendChild(document.createElement("p"));g&&b.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",u=>{n=u(n,t)}),i=b8(n),Rd&&v8(i);let c=i&&i.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||So.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||d),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!m8.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)a=w8($k(a,+d[1],+d[2]),d[4]);else if(a=j.maxOpen(g8(a.content,o),!0),a.openStart||a.openEnd){let u=0,h=0;for(let f=a.content.firstChild;u<a.openStart&&!f.type.spec.isolating;u++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=$k(a,u,h)}return t.someProp("transformPasted",u=>{a=u(a,t)}),a}const m8=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function g8(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&TA(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=EA(i[i.length-1],s.length));let d=SA(a,l);i.push(d),o=o.matchType(d.type),s=l}}),i)return _.from(i)}return t}function SA(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,_.from(t));return t}function TA(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=TA(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(_.from(SA(n,t,o+1))))}}function EA(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,EA(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(_.empty,!0);return t.copy(n.append(r))}function Zy(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=Zy(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(_.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function $k(t,e,n){return e<t.openStart&&(t=new j(Zy(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new j(Zy(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const MA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Hk=null;function AA(){return Hk||(Hk=document.implementation.createHTMLDocument("title"))}let eg=null;function y8(t){let e=window.trustedTypes;return e?(eg||(eg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),eg.createHTML(t)):t}function b8(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=AA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&MA[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=y8(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function v8(t){let e=t.querySelectorAll(Lt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent=="Â "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function w8(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=_.from(l.create(r[a+1],o)),s++,i++}return new j(o,s,i)}const Jt={},Zt={},x8={touchstart:!0,touchmove:!0};class k8{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function C8(t){for(let e in Jt){let n=Jt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{T8(t,r)&&!Z0(t,r)&&(t.editable||!(r.type in Zt))&&n(t,r)},x8[e]?{passive:!0}:void 0)}Yt&&t.dom.addEventListener("input",()=>null),Xy(t)}function ms(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function S8(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Xy(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Z0(t,r))})}function Z0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function T8(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function E8(t,e){!Z0(t,e)&&Jt[e.type]&&(t.editable||!(e.type in Zt))&&Jt[e.type](t,e)}Zt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!_A(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(vo&&Lt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Oa&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,ei(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||p8(t,n)?n.preventDefault():ms(t,"key")};Zt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Zt.keypress=(t,e)=>{let n=e;if(_A(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Bn&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof U)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function wp(t){return{left:t.clientX,top:t.clientY}}function M8(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function X0(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function xa(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function A8(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&q.isSelectable(r)?(xa(t,new q(n)),!0):!1}function R8(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof q&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(q.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(xa(t,q.create(t.state.doc,o)),!0):!1}function _8(t,e,n,r,o){return X0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?R8(t,n):A8(t,n))}function P8(t,e,n,r){return X0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function D8(t,e,n,r){return X0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||I8(t,n,r)}function I8(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(xa(t,U.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)xa(t,U.create(r,a+1,a+1+i.content.size));else if(q.isSelectable(i))xa(t,q.create(r,a));else continue;return!0}}function Q0(t){return jh(t)}const RA=Bn?"metaKey":"ctrlKey";Jt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Q0(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&M8(n,t.input.lastClick)&&!n[RA]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s,button:n.button};let i=t.posAtCoords(wp(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new N8(t,i,n,!!r)):(s=="doubleClick"?P8:D8)(t,i.pos,i.inside,n)?n.preventDefault():ms(t,"pointer"))};class N8{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[RA],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,i=d.depth?d.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof q&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&hr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ms(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Eo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(wp(e))),this.updateAllowDefault(e),this.allowDefault||!n?ms(this.view,"pointer"):_8(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Yt&&this.mightDrag&&!this.mightDrag.node.isAtom||Lt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(xa(this.view,ee.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ms(this.view,"pointer")}move(e){this.updateAllowDefault(e),ms(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Jt.touchstart=t=>{t.input.lastTouch=Date.now(),Q0(t),ms(t,"pointer")};Jt.touchmove=t=>{t.input.lastTouch=Date.now(),ms(t,"pointer")};Jt.contextmenu=t=>Q0(t);function _A(t,e){return t.composing?!0:Yt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const O8=vo?5e3:-1;Zt.compositionstart=Zt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof U&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),jh(t,!0),t.markCursor=null;else if(jh(t,!e.selection.empty),hr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}PA(t,O8)};Zt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,PA(t,20))};function PA(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>jh(t),e))}function DA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=j8());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function L8(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=A7(e.focusNode,e.focusOffset),r=R7(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function j8(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function jh(t,e=!1){if(!(vo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),DA(t),e||t.docView&&t.docView.dirty){let n=K0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function B8(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Nc=hn&&ws<15||Oa&&N7<604;Jt.copy=Zt.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=Nc?null:n.clipboardData,i=r.content(),{dom:a,text:l}=J0(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):B8(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function V8(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function $8(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Oc(t,r.value,null,o,e):Oc(t,r.textContent,r.innerHTML,o,e)},50)}function Oc(t,e,n,r,o){let s=CA(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||j.empty)))return!0;if(!s)return!1;let i=V8(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function IA(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Zt.paste=(t,e)=>{let n=e;if(t.composing&&!vo)return;let r=Nc?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Oc(t,IA(r),r.getData("text/html"),o,n)?n.preventDefault():$8(t,n)};class NA{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const H8=Bn?"altKey":"ctrlKey";function OA(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[H8]}Jt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(wp(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof q?o.to-1:o.to))){if(r&&r.mightDrag)i=q.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(i=q.create(t.state.doc,u.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:d}=J0(t,a);(!n.dataTransfer.files.length||!Lt||aA>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Nc?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Nc||n.dataTransfer.setData("text/plain",c),t.dragging=new NA(d,OA(t,n),i)};Jt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Zt.dragover=Zt.dragenter=(t,e)=>e.preventDefault();Zt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(wp(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t)}):i=CA(t,IA(n.dataTransfer),Nc?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&OA(t,n));if(t.someProp("handleDrop",p=>p(t,n,i||j.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?XM(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(u?c.replaceRangeWith(d,d,i.content.firstChild):c.replaceRange(d,d,i),c.doc.eq(h))return;let f=c.doc.resolve(d);if(u&&q.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new q(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,b,v,x)=>p=x),c.setSelection(Y0(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Jt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Eo(t)},20))};Jt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Jt.beforeinput=(t,e)=>{if(Lt&&vo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,ei(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Zt)Jt[t]=Zt[t];function Lc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Bh{constructor(e,n){this.toDOM=e,this.spec=n||mi,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new Re(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Bh&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Lc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ks{constructor(e,n){this.attrs=e,this.spec=n||mi}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new Re(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ks&&Lc(this.attrs,e.attrs)&&Lc(this.spec,e.spec)}static is(e){return e.type instanceof ks}destroy(){}}class e1{constructor(e,n){this.attrs=e,this.spec=n||mi}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new Re(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof e1&&Lc(this.attrs,e.attrs)&&Lc(this.spec,e.spec)}destroy(){}}class Re{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Re(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Re(e,e,new Bh(n,r))}static inline(e,n,r,o){return new Re(e,n,new ks(r,o))}static node(e,n,r,o){return new Re(e,n,new e1(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof ks}get widget(){return this.type instanceof Bh}}const ca=[],mi={};class be{constructor(e,n){this.local=e.length?e:ca,this.children=n.length?n:ca}static create(e,n){return n.length?Vh(n,e,0,mi):Nt}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==Nt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||mi)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?F8(this.children,i||[],e,n,r,o,s):i?new be(i.sort(gi),ca):Nt}add(e,n){return n.length?this==Nt?be.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,d;if(d=jA(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,d,c+1):o.splice(s,0,l,l+a.nodeSize,Vh(d,a,c+1,mi)),s+=3}});let i=LA(s?BA(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new be(i.length?this.local.concat(i).sort(gi):this.local,o||this.children)}remove(e){return e.length==0||this==Nt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>a&&u.to<l&&(e[d]=null,(i||(i=[])).push(u));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=Nt?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new be(o,r):Nt}forChild(e,n){if(this==Nt)return this;if(n.isLeaf)return be.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof ks){let c=Math.max(s,l.from)-s,d=Math.min(i,l.to)-s;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){let a=new be(o.sort(gi),ca);return r?new ls([a,r]):a}return r||Nt}eq(e){if(this==e)return!0;if(!(e instanceof be)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return t1(this.localsInner(e))}localsInner(e){if(this==Nt)return ca;if(e.inlineContent||!this.local.some(ks.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ks||n.push(this.local[r]);return n}forEachSet(e){e(this)}}be.empty=new be([],[]);be.removeOverlap=t1;const Nt=be.empty;class ls{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,mi));return ls.from(r)}forChild(e,n){if(n.isLeaf)return be.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=Nt&&(s instanceof ls?r=r.concat(s.members):r.push(s))}return ls.from(r)}eq(e){if(!(e instanceof ls)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?t1(r?n:n.sort(gi)):ca}static from(e){switch(e.length){case 0:return Nt;case 1:return e[0];default:return new ls(e.every(n=>n instanceof be)?e:e.reduce((n,r)=>n.concat(r instanceof be?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function F8(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,d=s;c<n.maps.length;c++){let u=0;n.maps[c].forEach((h,f,p,g)=>{let b=g-p-(f-h);for(let v=0;v<a.length;v+=3){let x=a[v+1];if(x<0||h>x+d-u)continue;let w=a[v]+d-u;f>=w?a[v+1]=h<=w?-2:-1:h>=d&&b&&(a[v]+=b,a[v+1]+=b)}u+=b}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+s),u=d-o;if(u<0||u>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),f=h-o,{index:p,offset:g}=r.content.findIndex(u),b=r.maybeChild(p);if(b&&g==u&&g+b.nodeSize==f){let v=a[c+2].mapInner(n,b,d+1,t[c]+s+1,i);v!=Nt?(a[c]=u,a[c+1]=f,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=z8(a,t,e,n,o,s,i),d=Vh(c,r,0,i);e=d.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,h=0;u<d.children.length;u+=3){let f=d.children[u];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,d.children[u],d.children[u+1],d.children[u+2])}}return new be(e.sort(gi),a)}function LA(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Re(o.from+e,o.to+e,o.type))}return n}function z8(t,e,n,r,o,s,i){function a(l,c){for(let d=0;d<l.local.length;d++){let u=l.local[d].map(r,o,c);u?n.push(u):i.onRemove&&i.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function jA(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function BA(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Vh(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=jA(t,a,l+n);if(c){s=!0;let d=Vh(c,a,n+l+1,r);d!=Nt&&o.push(l,l+a.nodeSize,d)}});let i=LA(s?BA(t):t,-n).sort(gi);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new be(i,o):Nt}function gi(t,e){return t.from-e.from||t.to-e.to}function t1(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),Fk(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Fk(e,o,r.copy(s.from,r.to)));break}}}return e}function Fk(t,e,n){for(;e<t.length&&gi(n,t[e])>0;)e++;t.splice(e,0,n)}function tg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Nt&&e.push(r)}),t.cursorWrapper&&e.push(be.create(t.state.doc,[t.cursorWrapper.deco])),ls.from(e)}const U8={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},W8=hn&&ws<=11;class G8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class q8{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new G8,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);hn&&ws<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),W8&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,U8)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Nk(this.view)){if(this.suppressingSelectionUpdates)return Eo(this.view);if(hn&&ws<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ei(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Na(s))n.add(s);for(let s=e.anchorNode;s;s=Na(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Nk(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let u=this.registerMutation(n[d],l);u&&(s=s<0?u.from:Math.min(u.from,s),i=i<0?u.to:Math.max(u.to,i),u.typeOver&&(a=!0))}if(hr&&l.length){let d=l.filter(u=>u.nodeName=="BR");if(d.length==2){let[u,h]=d;u.parentNode&&u.parentNode.parentNode==h.parentNode?h.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let h of d){let f=h.parentNode;f&&f.nodeName=="LI"&&(!u||J8(e,u)!=f)&&h.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&bp(r)&&(c=K0(e))&&c.eq(ee.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Eo(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),K8(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Eo(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let u=e.addedNodes[d];n.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(hn&&ws<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:h}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let i=o&&o.parentNode==e.target?Ct(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?Ct(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let zk=new WeakMap,Uk=!1;function K8(t){if(!zk.has(t)&&(zk.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=hr,Uk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Uk=!0}}function Wk(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return Ei(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function Y8(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return Wk(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Wk(t,n):null}function J8(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Z8(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],bp(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Lt&&t.input.lastKeyCode===8)for(let b=s;b>o;b--){let v=r.childNodes[b-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){s=b;break}if(!x||x.size)break}let u=t.state.doc,h=t.someProp("domParser")||So.fromSchema(t.state.schema),f=u.resolve(i),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:o,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:X8,context:f});if(c&&c[0].pos!=null){let b=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=b),p={anchor:b+i,head:v+i}}return{doc:g,sel:p,from:i,to:a}}function X8(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Yt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Yt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Q8=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function eV(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let M=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,R=K0(t,M);if(R&&!t.state.selection.eq(R)){if(Lt&&vo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",L=>L(t,ei(13,"Enter"))))return;let P=t.state.tr.setSelection(R);M=="pointer"?P.setMeta("pointer",!0):M=="key"&&P.scrollIntoView(),s&&P.setMeta("composition",s),t.dispatch(P)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=Z8(t,e,n),d=t.state.doc,u=d.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=rV(u.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(Oa&&t.input.lastIOSEnter>Date.now()-225||vo)&&o.some(M=>M.nodeType==1&&!Q8.test(M.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",M=>M(t,ei(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof U&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let M=Gk(t,t.state.doc,c.sel);if(M&&!M.eq(t.state.selection)){let R=t.state.tr.setSelection(M);s&&R.setMeta("composition",s),t.dispatch(R)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof U&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),hn&&ws<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" Â "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),b=c.doc.resolveNoCache(p.endB-c.from),v=d.resolve(p.start),x=g.sameParent(b)&&g.parent.inlineContent&&v.end()>=p.endA,w;if((Oa&&t.input.lastIOSEnter>Date.now()-225&&(!x||o.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(b)||!g.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(g.pos,b.pos,"",""))&&(w=ee.findFrom(c.doc.resolve(g.pos+1),1,!0))&&w.head>g.pos)&&t.someProp("handleKeyDown",M=>M(t,ei(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&nV(d,p.start,p.endA,g,b)&&t.someProp("handleKeyDown",M=>M(t,ei(8,"Backspace")))){vo&&Lt&&t.domObserver.suppressSelectionUpdates();return}Lt&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),vo&&!x&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,b=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(M){return M(t,ei(13,"Enter"))})},20));let k=p.start,C=p.endA,S,T,E;if(x){if(g.pos==b.pos)hn&&ws<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Eo(t),20)),S=t.state.tr.delete(k,C),T=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(E=tV(g.parent.content.cut(g.parentOffset,b.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start()))))S=t.state.tr,E.type=="add"?S.addMark(k,C,E.mark):S.removeMark(k,C,E.mark);else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let M=g.parent.textBetween(g.parentOffset,b.parentOffset);if(t.someProp("handleTextInput",R=>R(t,k,C,M)))return;S=t.state.tr.insertText(M,k,C)}}if(S||(S=t.state.tr.replace(k,C,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let M=Gk(t,S.doc,c.sel);M&&!(Lt&&t.composing&&M.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==k||M.head==S.mapping.map(C)-1)||hn&&M.empty&&M.head==k)&&S.setSelection(M)}T&&S.ensureMarks(T),s&&S.setMeta("composition",s),t.dispatch(S.scrollIntoView())}function Gk(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Y0(t,e.resolve(n.anchor),e.resolve(n.head))}function tV(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=d=>d.mark(a.addToSet(d.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(_.from(c).eq(t))return{mark:a,type:i}}function nV(t,e,n,r,o){if(n-e<=o.pos-r.pos||ng(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(ng(s,!0,!0));return!i.parent.isTextblock||i.pos>n||ng(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function ng(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function rV(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<e.size&&qk(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&qk(t.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function qk(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class VA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new k8,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Xk),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Jk(this),Yk(this),this.nodeViews=Zk(this),this.docView=Ak(this.state.doc,Kk(this),tg(this),this.dom,this),this.domObserver=new q8(this,(r,o,s,i)=>eV(this,r,o,s,i)),this.domObserver.start(),C8(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Xy(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Xk),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(DA(this),i=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=Zk(this);sV(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Xy(this),this.editable=Jk(this),Yk(this);let l=tg(this),c=Kk(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(o.selection))&&(i=!0);let h=d=="preserve"&&i&&this.dom.style.overflowAnchor==null&&j7(this);if(i){this.domObserver.stop();let f=u&&(hn||Lt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&oV(o.selection,e.selection);if(u){let p=Lt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=L8(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Ak(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&a8(this))?Eo(this,f):(wA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&B7(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof q){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&kk(this,n.getBoundingClientRect(),e)}else kk(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new NA(e.slice,e.move,o<0?void 0:q.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(hn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&V7(this.dom),Eo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return U7(this,e)}coordsAtPos(e,n=1){return hA(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return Y7(this,n||this.state,e)}pasteHTML(e,n){return Oc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Oc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return J0(this,e)}destroy(){this.docView&&(S8(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],tg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,E7())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return E8(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Yt&&this.root.nodeType===11&&P7(this.dom.ownerDocument)==this.dom&&Y8(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Kk(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Re.node(0,t.state.doc.content.size,e)]}function Yk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Re.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Jk(t){return!t.someProp("editable",e=>e(t.state)===!1)}function oV(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Zk(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function sV(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function Xk(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const iV=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),aV=typeof navigator<"u"&&/Win/.test(navigator.platform);function lV(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))iV?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function cV(t){let e=Object.create(null);for(let n in t)e[lV(n)]=t[n];return e}function rg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function dV(t){return new me({props:{handleKeyDown:n1(t)}})}function n1(t){let e=cV(t);return function(n,r){let o=n3(r),s,i=e[rg(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[rg(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(aV&&r.ctrlKey&&r.altKey)&&(s=r3[r.keyCode])&&s!=o){let a=e[rg(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const r1=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function $A(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const HA=(t,e,n)=>{let r=$A(t,n);if(!r)return!1;let o=o1(r);if(!o){let i=r.blockRange(),a=i&&Ja(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(JA(t,o,e,-1))return!0;if(r.parent.content.size==0&&(La(s,"end")||q.isSelectable(s)))for(let i=r.depth;;i--){let a=gp(t.doc,r.before(i),r.after(i),j.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(La(s,"end")?ee.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):q.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},uV=(t,e,n)=>{let r=$A(t,n);if(!r)return!1;let o=o1(r);return o?FA(t,o,e):!1},hV=(t,e,n)=>{let r=UA(t,n);if(!r)return!1;let o=s1(r);return o?FA(t,o,e):!1};function FA(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=gp(t.doc,s,l,j.empty);if(!c||c.from!=s||c instanceof ot&&c.slice.size>=l-s)return!1;if(n){let d=t.tr.step(c);d.setSelection(U.create(d.doc,s)),n(d.scrollIntoView())}return!0}function La(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const zA=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=o1(r)}let i=s&&s.nodeBefore;return!i||!q.isSelectable(i)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function o1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function UA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const WA=(t,e,n)=>{let r=UA(t,n);if(!r)return!1;let o=s1(r);if(!o)return!1;let s=o.nodeAfter;if(JA(t,o,e,1))return!0;if(r.parent.content.size==0&&(La(s,"start")||q.isSelectable(s))){let i=gp(t.doc,r.before(),r.after(),j.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(La(s,"start")?ee.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):q.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},GA=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=s1(r)}let i=s&&s.nodeAfter;return!i||!q.isSelectable(i)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,s.pos)).scrollIntoView()),!0)};function s1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const fV=(t,e)=>{let n=t.selection,r=n instanceof q,o;if(r){if(n.node.isTextblock||!$i(t.doc,n.from))return!1;o=n.from}else if(o=mp(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(q.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},pV=(t,e)=>{let n=t.selection,r;if(n instanceof q){if(n.node.isTextblock||!$i(t.doc,n.to))return!1;r=n.to}else if(r=mp(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},mV=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&Ja(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},qA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function i1(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const gV=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=i1(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(ee.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},KA=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof un||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=i1(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(U.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},YA=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(To(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Ja(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function yV(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof q&&e.selection.node.isBlock)return!r.parentOffset||!To(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],i,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=i1(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(l&&a?{type:a}:null),i=f;break}else{if(f==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof U||e.selection instanceof un)&&d.deleteSelection();let u=d.mapping.map(r.pos),h=To(d.doc,u,s.length,s);if(h||(s[0]=a?{type:a}:null,h=To(d.doc,u,s.length,s)),!h)return!1;if(d.split(u,s.length,s),!l&&c&&r.node(i).type!=a){let f=d.mapping.map(r.before(i)),p=d.doc.resolve(f);a&&r.node(i-1).canReplaceWith(p.index(),p.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(i)),a)}return n&&n(d.scrollIntoView()),!0}}const bV=yV(),vV=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(q.create(t.doc,o))),!0)};function wV(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||$i(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function JA(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&wV(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=_.empty;for(let v=i.length-1;v>=0;v--)p=_.from(i[v].create(null,p));p=_.from(o.copy(p));let g=t.tr.step(new rt(e.pos-1,f,e.pos,f,new j(p,1,0),i.length,!0)),b=g.doc.resolve(f+2*i.length);b.nodeAfter&&b.nodeAfter.type==o.type&&$i(g.doc,b.pos)&&g.join(b.pos),n(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&l?null:ee.findFrom(e,1),u=d&&d.$from.blockRange(d.$to),h=u&&Ja(u);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(u,h).scrollIntoView()),!0;if(c&&La(s,"start",!0)&&La(o,"end")){let f=o,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,b=1;for(;!g.isTextblock;g=g.firstChild)b++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let v=_.empty;for(let w=p.length-1;w>=0;w--)v=_.from(p[w].copy(v));let x=t.tr.step(new rt(e.pos-p.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new j(v,p.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function ZA(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(U.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const xV=ZA(-1),kV=ZA(1);function CV(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&KM(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function Qk(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let d=n.doc.resolve(c),u=d.index();o=d.parent.canReplaceWith(u,u+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function a1(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}a1(r1,HA,zA);a1(r1,WA,GA);a1(qA,KA,YA,bV);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function SV(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return TV(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function TV(t,e,n,r=null){let o=!1,s=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);s=new Ih(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Ih(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=KM(s,n,r,e);return a?(t&&EV(t,e,a,o,n),!0):!1}function EV(t,e,n,r,o){let s=_.empty;for(let d=n.length-1;d>=0;d--)s=_.from(n[d].type.create(n[d].attrs,s));t.step(new rt(e.start-(r?2:0),e.end,e.start,e.end,new j(s,0,0),n.length,!0));let i=0;for(let d=0;d<n.length;d++)n[d].type==o&&(i=d+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,h=!0;d<u;d++,h=!1)!h&&To(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function MV(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?AV(e,n,t,s):RV(e,n,s):!0:!1}}function AV(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new rt(s-1,i,s,i,new j(_.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ih(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Ja(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(s,-1)-1);return $i(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function RV(t,e,n){let r=t.tr,o=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=o.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,i.content.append(l?_.empty:_.from(o))))return!1;let u=s.pos,h=u+i.nodeSize;return r.step(new rt(u-(a?1:0),h+(l?1:0),u+1,h-1,new j((a?_.empty:_.from(o.copy(_.empty))).append(l?_.empty:_.from(o.copy(_.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function _V(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=_.from(c?t.create():null),u=new j(_.from(t.create(null,_.from(a.type.create(null,d)))),c?3:1,0),h=s.start,f=s.end;n(e.tr.step(new rt(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}function xp(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class kp{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...d)=>{const u=l(...d)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),u={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...g)=>{const b=this.buildProps(c,n),v=f(...g)(b);return a.push(v),u}])),run:d};return u}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a={tr:e,editor:o,view:i,state:xp({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}}class PV{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function W(t,e,n){return t.config[e]===void 0&&t.parent?W(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?W(t.parent,e,n):null}):t.config[e]}function Cp(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function XA(t){const e=[],{nodeExtensions:n,markExtensions:r}=Cp(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=W(i,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([h,f])=>{e.push({type:u,name:h,attribute:{...s,...f}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=W(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const h={...s,...u};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:d,attribute:h})})}),e}function mt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Sn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),a.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=s}),r},{})}function $h(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Sn(n,r),{})}function QA(t){return typeof t=="function"}function ye(t,e=void 0,...n){return QA(t)?e?t.bind(e)(...n):t(...n):t}function DV(t={}){return Object.keys(t).length===0&&t.constructor===Object}function IV(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function eC(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):IV(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function tC(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&DV(n)?!1:n!=null))}function eR(t,e){var n;const r=XA(t),{nodeExtensions:o,markExtensions:s}=Cp(t),i=(n=o.find(c=>W(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const d=r.filter(v=>v.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,x)=>{const w=W(x,"extendNodeSchema",u);return{...v,...w?w(c):{}}},{}),f=tC({...h,content:ye(W(c,"content",u)),marks:ye(W(c,"marks",u)),group:ye(W(c,"group",u)),inline:ye(W(c,"inline",u)),atom:ye(W(c,"atom",u)),selectable:ye(W(c,"selectable",u)),draggable:ye(W(c,"draggable",u)),code:ye(W(c,"code",u)),whitespace:ye(W(c,"whitespace",u)),linebreakReplacement:ye(W(c,"linebreakReplacement",u)),defining:ye(W(c,"defining",u)),isolating:ye(W(c,"isolating",u)),attrs:Object.fromEntries(d.map(v=>{var x;return[v.name,{default:(x=v==null?void 0:v.attribute)===null||x===void 0?void 0:x.default}]}))}),p=ye(W(c,"parseHTML",u));p&&(f.parseDOM=p.map(v=>eC(v,d)));const g=W(c,"renderHTML",u);g&&(f.toDOM=v=>g({node:v,HTMLAttributes:$h(v,d)}));const b=W(c,"renderText",u);return b&&(f.toText=b),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const d=r.filter(b=>b.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,v)=>{const x=W(v,"extendMarkSchema",u);return{...b,...x?x(c):{}}},{}),f=tC({...h,inclusive:ye(W(c,"inclusive",u)),excludes:ye(W(c,"excludes",u)),group:ye(W(c,"group",u)),spanning:ye(W(c,"spanning",u)),code:ye(W(c,"code",u)),attrs:Object.fromEntries(d.map(b=>{var v;return[b.name,{default:(v=b==null?void 0:b.attribute)===null||v===void 0?void 0:v.default}]}))}),p=ye(W(c,"parseHTML",u));p&&(f.parseDOM=p.map(b=>eC(b,d)));const g=W(c,"renderHTML",u);return g&&(f.toDOM=b=>g({mark:b,HTMLAttributes:$h(b,d)})),[c.name,f]}));return new $M({topNode:i,nodes:a,marks:l})}function og(t,e){return e.nodes[t]||e.marks[t]||null}function nC(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function l1(t,e){const n=Oo.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const NV=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const d=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-s))}),n};function c1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Ts{constructor(e){this.find=e.find,this.handler=e.handler}}const OV=(t,e)=>{if(c1(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function vu(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let d=!1;const u=NV(c)+s;return i.forEach(h=>{if(d)return;const f=OV(u,h.find);if(!f)return;const p=l.state.tr,g=xp({state:l.state,transaction:p}),b={from:r-(f[0].length-s.length),to:o},{commands:v,chain:x,can:w}=new kp({editor:n,state:g});h.handler({state:g,range:b,match:f,commands:v,chain:x,can:w})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:o,text:s}),l.dispatch(p),d=!0)}),d}function LV(t){const{editor:e,rules:n}=t,r=new me({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=l1(_.from(d),i.schema);const{from:u}=l,h=u+d.length;vu({editor:e,from:u,to:h,text:d,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return vu({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&vu({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?vu({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function jV(t){return Object.prototype.toString.call(t).slice(8,-1)}function wu(t){return jV(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Sp(t,e){const n={...t};return wu(t)&&wu(e)&&Object.keys(e).forEach(r=>{wu(e[r])&&wu(t[r])?n[r]=Sp(t[r],e[r]):n[r]=e[r]}),n}class Mt{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Sp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Mt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function BV(t){return typeof t=="number"}class VV{constructor(e){this.find=e.find,this.handler=e.handler}}const $V=(t,e,n)=>{if(c1(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function HV(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:d}=new kp({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,o,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const g=Math.max(r,p),b=Math.min(o,p+f.content.size),v=f.textBetween(g-p,b-p,void 0,"ï¿¼");$V(v,s.find,i).forEach(w=>{if(w.index===void 0)return;const k=g+w.index+1,C=k+w[0].length,S={from:n.tr.mapping.map(k),to:n.tr.mapping.map(C)},T=s.handler({state:n,range:S,match:w,commands:l,chain:c,can:d,pasteEvent:i,dropEvent:a});u.push(T)})}),u.every(f=>f!==null)}let xu=null;const FV=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function zV(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:u,to:h,rule:f,pasteEvt:p})=>{const g=d.tr,b=xp({state:d,transaction:g});if(!(!HV({editor:e,state:b,from:Math.max(u-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new me({view(u){const h=p=>{var g;r=!((g=u.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?u.dom.parentElement:null,r&&(xu=e)},f=()=>{xu&&(xu=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(u,h)=>{if(s=r===u.dom.parentElement,a=h,!s){const f=xu;f&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(u,h)=>{var f;const p=(f=h.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return i=h,o=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(u,h,f)=>{const p=u[0],g=p.getMeta("uiEvent")==="paste"&&!o,b=p.getMeta("uiEvent")==="drop"&&!s,v=p.getMeta("applyPasteRules"),x=!!v;if(!g&&!b&&!x)return;if(x){let{text:C}=v;typeof C=="string"?C=C:C=l1(_.from(C),f.schema);const{from:S}=v,T=S+C.length,E=FV(C);return l({rule:d,state:f,from:S,to:{b:T},pasteEvt:E})}const w=h.doc.content.findDiffStart(f.doc.content),k=h.doc.content.findDiffEnd(f.doc.content);if(!(!BV(w)||!k||w===k.b))return l({rule:d,state:f,from:w,to:k,pasteEvt:i})}}))}function UV(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class li{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=li.resolve(e),this.schema=eR(this.extensions,n),this.setupExtensions()}static resolve(e){const n=li.sort(li.flatten(e)),r=UV(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=W(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=W(r,"priority")||100,i=W(o,"priority")||100;return s>i?-1:s<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:og(n.name,this.schema)},o=W(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=li.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:og(i.name,this.schema)},l=[],c=W(i,"addKeyboardShortcuts",a);let d={};if(i.type==="mark"&&W(i,"exitable",a)&&(d.ArrowRight=()=>Mt.handleExit({editor:e,mark:i})),c){const g=Object.fromEntries(Object.entries(c()).map(([b,v])=>[b,()=>v({editor:e})]));d={...d,...g}}const u=dV(d);l.push(u);const h=W(i,"addInputRules",a);nC(i,e.options.enableInputRules)&&h&&r.push(...h());const f=W(i,"addPasteRules",a);nC(i,e.options.enablePasteRules)&&f&&o.push(...f());const p=W(i,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[LV({editor:e,rules:r}),...zV({editor:e,rules:o}),...s]}get attributes(){return XA(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Cp(this.extensions);return Object.fromEntries(n.filter(r=>!!W(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:mt(r.name,this.schema)},i=W(r,"addNodeView",s);if(!i)return[];const a=(l,c,d,u,h)=>{const f=$h(l,o);return i()({node:l,view:c,getPos:d,decorations:u,innerDecorations:h,editor:e,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:og(e.name,this.schema)};e.type==="mark"&&(!((n=ye(W(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=W(e,"onBeforeCreate",r),s=W(e,"onCreate",r),i=W(e,"onUpdate",r),a=W(e,"onSelectionUpdate",r),l=W(e,"onTransaction",r),c=W(e,"onFocus",r),d=W(e,"onBlur",r),u=W(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}}class Ne{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ne(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Sp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ne({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}}function tR(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,d,u)=>{var h;l.isBlock&&c>r&&(a+=s);const f=i==null?void 0:i[l.type.name];if(f)return d&&(a+=f({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function nR(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const rR=Ne.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new me({key:new Te("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=nR(n);return tR(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),WV=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),GV=(t=!1)=>({commands:e})=>e.setContent("",t),qV=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),h=c.resolve(d.map(l+a.nodeSize)),f=u.blockRange(h);if(!f)return;const p=Ja(f);if(a.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},KV=t=>e=>t(e),YV=()=>({state:t,dispatch:e})=>KA(t,e),JV=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,s.content),r.setSelection(new U(r.doc.resolve(i-1))),!0},ZV=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const a=o.before(s),l=o.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},XV=t=>({tr:e,state:n,dispatch:r})=>{const o=mt(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},QV=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},e$=()=>({state:t,dispatch:e})=>r1(t,e),t$=()=>({commands:t})=>t.keyboardShortcut("Enter"),n$=()=>({state:t,dispatch:e})=>gV(t,e);function Hh(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:c1(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function oR(t,e,n={}){return t.find(r=>r.type===e&&Hh(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function rC(t,e,n={}){return!!oR(t,e,n)}function jc(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!oR([...o.node.marks],e,n)))return;let i=o.index,a=t.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&rC([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&rC([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function js(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const r$=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=js(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:d}=a;if(o){const u=jc(l,s,e);if(u&&u.from<=c&&u.to>=d){const h=U.create(i,u.from,u.to);n.setSelection(h)}}return!0},o$=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Tp(t){return t instanceof U}function wo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function sR(t,e=null){if(!e)return null;const n=ee.atStart(t),r=ee.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?U.create(t,wo(0,o,s),wo(t.content.size,o,s)):U.create(t,wo(e,o,s),wo(e,o,s))}function iR(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Ep(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const s$=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{(Ep()||iR())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!Tp(n.state.selection))return i(),!0;const a=sR(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},i$=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),a$=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),aR=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&aR(r)}return t};function ku(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return aR(n)}function Fh(t,e,n){if(t instanceof Co||t instanceof _)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return _.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Fh("",e,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new $M({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?So.fromSchema(l).parseSlice(ku(t),n.parseOptions):So.fromSchema(l).parse(ku(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=So.fromSchema(e);return n.slice?s.parseSlice(ku(t),n.parseOptions).content:s.parse(ku(t),n.parseOptions)}return Fh("",e,n)}function lR(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof ot||o instanceof rt))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,d)=>{i===0&&(i=d)}),t.setSelection(ee.near(t.doc.resolve(i),n))}const l$=t=>!("type"in t),c$=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Fh(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:s.options.enableContentCheck})}catch(p){return s.emit("contentError",{editor:s,error:p,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},d=!0,u=!0;if((l$(a)?a:[a]).forEach(p=>{p.check(),d=d?p.isText&&p.marks.length===0:!1,u=u?p.isBlock:!1}),l===c&&u){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let f;if(d){if(Array.isArray(e))f=e.map(p=>p.text||"").join("");else if(e instanceof _){let p="";e.forEach(g=>{g.text&&(p+=g.text)}),f=p}else typeof e=="object"&&e&&e.text?f=e.text:f=e;r.insertText(f,l,c)}else f=a,r.replaceWith(l,c,f);n.updateSelection&&lR(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:f}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:f})}return!0},d$=()=>({state:t,dispatch:e})=>fV(t,e),u$=()=>({state:t,dispatch:e})=>pV(t,e),h$=()=>({state:t,dispatch:e})=>HA(t,e),f$=()=>({state:t,dispatch:e})=>WA(t,e),p$=()=>({state:t,dispatch:e,tr:n})=>{try{const r=mp(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},m$=()=>({state:t,dispatch:e,tr:n})=>{try{const r=mp(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},g$=()=>({state:t,dispatch:e})=>uV(t,e),y$=()=>({state:t,dispatch:e})=>hV(t,e);function cR(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function b$(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Ep()||cR()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const v$=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=b$(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0};function Bc(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?mt(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(u,h)=>{if(u.isText)return;const f=Math.max(r,h),p=Math.min(o,h+u.nodeSize);a.push({node:u,from:f,to:p})});const l=o-r,c=a.filter(u=>i?i.name===u.node.type.name:!0).filter(u=>Hh(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,h)=>u+h.to-h.from,0)>=l}const w$=(t,e={})=>({state:n,dispatch:r})=>{const o=mt(t,n.schema);return Bc(n,o,e)?mV(n,r):!1},x$=()=>({state:t,dispatch:e})=>YA(t,e),k$=t=>({state:e,dispatch:n})=>{const r=mt(t,e.schema);return MV(r)(e,n)},C$=()=>({state:t,dispatch:e})=>qA(t,e);function Mp(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function oC(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const S$=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Mp(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=mt(t,r.schema)),a==="mark"&&(i=js(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{s&&s===c.type&&n.setNodeMarkup(d,void 0,oC(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(u=>{i===u.type&&n.addMark(d,d+c.nodeSize,i.create(oC(u.attrs,e)))})})}),!0):!1},T$=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),E$=()=>({tr:t,dispatch:e})=>{if(e){const n=new un(t.doc);t.setSelection(n)}return!0},M$=()=>({state:t,dispatch:e})=>zA(t,e),A$=()=>({state:t,dispatch:e})=>GA(t,e),R$=()=>({state:t,dispatch:e})=>vV(t,e),_$=()=>({state:t,dispatch:e})=>kV(t,e),P$=()=>({state:t,dispatch:e})=>xV(t,e);function zh(t,e,n={},r={}){return Fh(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const D$=(t,e=!1,n={},r={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{var l,c;const{doc:d}=s;if(n.preserveWhitespace!=="full"){const u=zh(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return i&&s.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!e),!0}return i&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function dR(t,e){const n=js(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function d1(t,e){const n=new W0(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function I$(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function sC(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function Uh(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function N$(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ap(t){return e=>N$(e.$from,t)}function O$(t,e){const n=li.resolve(t);return eR(n,e)}function L$(t,e){const n={from:0,to:t.content.size};return tR(t,n,e)}function j$(t,e){const n=mt(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function uR(t,e){const n=Mp(typeof e=="string"?e:e.name,t.schema);return n==="node"?j$(t,e):n==="mark"?dR(t,e):{}}function B$(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function V$(t){const e=B$(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,i)=>i!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function u1(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,s)=>{const i=[];if(o.ranges.length)o.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),u=e.invert().map(c,-1),h=e.invert().map(d);r.push({oldRange:{from:u,to:h},newRange:{from:c,to:d}})})}),V$(r)}function h1(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),i=jc(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function ah(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function Qy(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?js(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Hh(u.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:u,$to:h})=>{const f=u.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,b)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(f,b),x=Math.min(p,b+g.nodeSize),w=x-v;i+=w,a.push(...g.marks.map(k=>({mark:k,from:v,to:x})))})}),i===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Hh(u.mark.attrs,n,{strict:!1})).reduce((u,h)=>u+h.to-h.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,h)=>u+h.to-h.from,0);return(l>0?l+c:l)>=i}function $$(t,e,n={}){if(!e)return Bc(t,null,n)||Qy(t,null,n);const r=Mp(e,t.schema);return r==="node"?Bc(t,e,n):r==="mark"?Qy(t,e,n):!1}function iC(t,e){const{nodeExtensions:n}=Cp(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=ye(W(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function f1(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(f1(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function eb(t){return t instanceof q}function Wh(t,e,n){const o=t.state.doc.content.size,s=wo(e,0,o),i=wo(n,0,o),a=t.coordsAtPos(s),l=t.coordsAtPos(i,-1),c=Math.min(a.top,l.top),d=Math.max(a.bottom,l.bottom),u=Math.min(a.left,l.left),h=Math.max(a.right,l.right),f=h-u,p=d-c,v={top:c,bottom:d,left:u,right:h,width:f,height:p,x:u,y:c};return{...v,toJSON:()=>v}}function H$(t,e,n){var r;const{selection:o}=e;let s=null;if(Tp(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,u,h)=>{if(c)return!1;if(d.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=f&&p}return!c}),c})}const F$=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=js(t,r.schema);if(o)if(i){const c=dR(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(h,f)=>{const p=Math.max(f,d),g=Math.min(f+h.nodeSize,u);h.marks.find(v=>v.type===l)?h.marks.forEach(v=>{l===v.type&&n.addMark(p,g,l.create({...v.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return H$(r,n,l)},z$=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),U$=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=mt(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>Qk(s,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Qk(s,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},W$=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=wo(t,0,r.content.size),s=q.create(r,o);e.setSelection(s)}return!0},G$=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=U.atStart(r).from,a=U.atEnd(r).to,l=wo(o,i,a),c=wo(s,i,a),d=U.create(r,l,c);e.setSelection(d)}return!0},q$=t=>({state:e,dispatch:n})=>{const r=mt(t,e.schema);return _V(r)(e,n)};function aC(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const K$=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,d=ah(c,a.node().type.name,a.node().attrs);if(s instanceof q&&s.node.isBlock)return!a.parentOffset||!To(i,a.pos)?!1:(r&&(t&&aC(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:I$(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&h?[{type:h,attrs:d}]:void 0,p=To(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&To(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:d}]:void 0),r){if(p&&(s instanceof U&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!u&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&aC(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return p},Y$=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=mt(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let v=_.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-x;E>=l.depth-3;E-=1)v=_.from(l.node(E).copy(v));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...ah(h,l.node().type.name,l.node().attrs),...e},C=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(k))||void 0;v=v.append(_.from(a.createAndFill(null,C)||void 0));const S=l.before(l.depth-(x-1));n.replace(S,l.after(-w),new j(v,4-x,0));let T=-1;n.doc.nodesBetween(S,n.doc.content.size,(E,M)=>{if(T>-1)return!1;E.isTextblock&&E.content.size===0&&(T=M+1)}),T>-1&&n.setSelection(U.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,p={...ah(h,u.type.name,u.attrs),...e},g={...ah(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const b=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!To(n.doc,l.pos,2))return!1;if(o){const{selection:v,storedMarks:x}=r,{splittableMarks:w}=s.extensionManager,k=x||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,b).scrollIntoView(),!k||!o)return!0;const C=k.filter(S=>w.includes(S.type.name));n.ensureMarks(C)}return!0},sg=(t,e)=>{const n=Ap(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&$i(t.doc,n.pos)&&t.join(n.pos),!0},ig=(t,e)=>{const n=Ap(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&$i(t.doc,r)&&t.join(r),!0},J$=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:h}=o.extensionManager,f=mt(t,i.schema),p=mt(e,i.schema),{selection:g,storedMarks:b}=i,{$from:v,$to:x}=g,w=v.blockRange(x),k=b||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const C=Ap(S=>iC(S.type.name,u))(g);if(w.depth>=1&&C&&w.depth-C.depth<=1){if(C.node.type===f)return c.liftListItem(p);if(iC(C.node.type.name,u)&&f.validContent(C.node.content)&&a)return l().command(()=>(s.setNodeMarkup(C.pos,f),!0)).command(()=>sg(s,f)).command(()=>ig(s,f)).run()}return!n||!k||!a?l().command(()=>d().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>sg(s,f)).command(()=>ig(s,f)).run():l().command(()=>{const S=d().wrapInList(f,r),T=k.filter(E=>h.includes(E.type.name));return s.ensureMarks(T),S?!0:c.clearNodes()}).wrapInList(f,r).command(()=>sg(s,f)).command(()=>ig(s,f)).run()},Z$=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=js(t,r.schema);return Qy(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},X$=(t,e,n={})=>({state:r,commands:o})=>{const s=mt(t,r.schema),i=mt(e,r.schema),a=Bc(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},Q$=(t,e={})=>({state:n,commands:r})=>{const o=mt(t,n.schema);return Bc(n,o,e)?r.lift(o):r.wrapIn(o,e)},e6=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},t6=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},n6=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=js(t,r.schema),{$from:c,empty:d,ranges:u}=a;if(!o)return!0;if(d&&i){let{from:h,to:f}=a;const p=(s=c.marks().find(b=>b.type===l))===null||s===void 0?void 0:s.attrs,g=jc(c,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else u.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},r6=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Mp(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=mt(t,r.schema)),a==="mark"&&(i=js(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let u,h,f,p;n.selection.empty?r.doc.nodesBetween(c,d,(g,b)=>{s&&s===g.type&&(f=Math.max(b,c),p=Math.min(b+g.nodeSize,d),u=b,h=g)}):r.doc.nodesBetween(c,d,(g,b)=>{b<c&&s&&s===g.type&&(f=Math.max(b,c),p=Math.min(b+g.nodeSize,d),u=b,h=g),b>=c&&b<=d&&(s&&s===g.type&&n.setNodeMarkup(b,void 0,{...g.attrs,...e}),i&&g.marks.length&&g.marks.forEach(v=>{if(i===v.type){const x=Math.max(b,c),w=Math.min(b+g.nodeSize,d);n.addMark(x,w,i.create({...v.attrs,...e}))}}))}),h&&(u!==void 0&&n.setNodeMarkup(u,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(g=>{i===g.type&&n.addMark(f,p,i.create({...g.attrs,...e}))}))}),!0):!1},o6=(t,e={})=>({state:n,dispatch:r})=>{const o=mt(t,n.schema);return CV(o,e)(n,r)},s6=(t,e={})=>({state:n,dispatch:r})=>{const o=mt(t,n.schema);return SV(o,e)(n,r)};var i6=Object.freeze({__proto__:null,blur:WV,clearContent:GV,clearNodes:qV,command:KV,createParagraphNear:YV,cut:JV,deleteCurrentNode:ZV,deleteNode:XV,deleteRange:QV,deleteSelection:e$,enter:t$,exitCode:n$,extendMarkRange:r$,first:o$,focus:s$,forEach:i$,insertContent:a$,insertContentAt:c$,joinBackward:h$,joinDown:u$,joinForward:f$,joinItemBackward:p$,joinItemForward:m$,joinTextblockBackward:g$,joinTextblockForward:y$,joinUp:d$,keyboardShortcut:v$,lift:w$,liftEmptyBlock:x$,liftListItem:k$,newlineInCode:C$,resetAttributes:S$,scrollIntoView:T$,selectAll:E$,selectNodeBackward:M$,selectNodeForward:A$,selectParentNode:R$,selectTextblockEnd:_$,selectTextblockStart:P$,setContent:D$,setMark:F$,setMeta:z$,setNode:U$,setNodeSelection:W$,setTextSelection:G$,sinkListItem:q$,splitBlock:K$,splitListItem:Y$,toggleList:J$,toggleMark:Z$,toggleNode:X$,toggleWrap:Q$,undoInputRule:e6,unsetAllMarks:t6,unsetMark:n6,updateAttributes:r6,wrapIn:o6,wrapInList:s6});const hR=Ne.create({name:"commands",addCommands(){return{...i6}}}),fR=Ne.create({name:"drop",addProseMirrorPlugins(){return[new me({key:new Te("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),pR=Ne.create({name:"editable",addProseMirrorPlugins(){return[new me({key:new Te("editable"),props:{editable:()=>this.editor.options.editable}})]}}),mR=new Te("focusEvents"),gR=Ne.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new me({key:mR,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),yR=Ne.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:h,parent:f}=u,p=u.parent.isTextblock&&h>0?a.doc.resolve(h-1):u,g=p.parent.type.spec.isolating,b=u.pos-u.parentOffset,v=g&&p.parent.childCount===1?b===u.pos:ee.atStart(c).from===h;return!d||!f.type.isTextblock||f.textContent.length||!v||v&&u.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Ep()||cR()?s:o},addProseMirrorPlugins(){return[new me({key:new Te("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),o=t.some(g=>g.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=e.selection,l=ee.atStart(e.doc).from,c=ee.atEnd(e.doc).to;if(s||!(i===l&&a===c)||!f1(n.doc))return;const h=n.tr,f=xp({state:n,transaction:h}),{commands:p}=new kp({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),bR=Ne.create({name:"paste",addProseMirrorPlugins(){return[new me({key:new Te("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),vR=Ne.create({name:"tabindex",addProseMirrorPlugins(){return[new me({key:new Te("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Pl=Object.freeze({__proto__:null,ClipboardTextSerializer:rR,Commands:hR,Drop:fR,Editable:pR,FocusEvents:gR,Keymap:yR,Paste:bR,Tabindex:vR,focusEventsPluginKey:mR});class ti{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You canâ€™t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ti(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ti(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ti(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new ti(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new ti(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===e&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const a6=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function l6(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}class c6 extends PV{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=l6(a6,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=QA(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=r.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[pR,rR.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),hR,gR,yR,vR,fR,bR].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new li(o,this)}createCommandManager(){this.commandManager=new kp({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=zh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=zh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=sR(n,this.options.autofocus);this.view=new VA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:si.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return uR(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return $$(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return l1(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return L$(this.state.doc,{blockSeparator:n,textSerializers:{...nR(this.schema),...r}})}get isEmpty(){return f1(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new ti(n,this)}get $doc(){return this.$pos(0)}}function ja(t){return new Ts({find:t.find,handler:({state:e,range:n,match:r})=>{const o=ye(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),d=c+i.length;if(h1(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;d<n.to&&s.delete(d,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+i.length;s.addMark(n.from+l,h,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}let Zr=class tb{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tb(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Sp(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new tb(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}};class d6{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,s,i,a,l;const{view:c}=this.editor,d=e.target,u=d.nodeType===3?(n=d.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):d.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(d)||!u)return;let h=0,f=0;if(this.dom!==u){const x=this.dom.getBoundingClientRect(),w=u.getBoundingClientRect(),k=(o=e.offsetX)!==null&&o!==void 0?o:(s=e.nativeEvent)===null||s===void 0?void 0:s.offsetX,C=(i=e.offsetY)!==null&&i!==void 0?i:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;h=w.x-x.x+k,f=w.y-x.y+C}const p=this.dom.cloneNode(!0);(l=e.dataTransfer)===null||l===void 0||l.setDragImage(p,h,f);const g=this.getPos();if(typeof g!="number")return;const b=q.create(c.state.doc,g),v=c.state.tr.setSelection(b);c.dispatch(v)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const s=e.type.startsWith("drag"),i=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!s)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,d=!!this.node.type.spec.draggable,u=q.isSelectable(this.node),h=e.type==="copy",f=e.type==="paste",p=e.type==="cut",g=e.type==="mousedown";if(!d&&u&&s&&e.target===this.dom&&e.preventDefault(),d&&s&&!c&&e.target===this.dom)return e.preventDefault(),!1;if(d&&l&&!c&&g){const b=r.closest("[data-drag-handle]");b&&(this.dom===b||this.dom.contains(b))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||i||h||f||p||g&&u)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Ep()||iR())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Ai(t){return new VV({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=ye(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),u=n.from+l.indexOf(a),h=u+a.length;if(h1(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(b=>b===t.type&&b!==p.mark.type)).filter(p=>p.to>u).length)return null;h<n.to&&i.delete(h,n.to),u>n.from&&i.delete(n.from+d,u),c=n.from+d+a.length,i.addMark(n.from+d,c,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}var Cu,u6=new Uint8Array(16);function h6(){if(!Cu&&(Cu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Cu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cu(u6)}const f6=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function p6(t){return typeof t=="string"&&f6.test(t)}var vt=[];for(var ag=0;ag<256;++ag)vt.push((ag+256).toString(16).substr(1));function m6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(vt[t[e+0]]+vt[t[e+1]]+vt[t[e+2]]+vt[t[e+3]]+"-"+vt[t[e+4]]+vt[t[e+5]]+"-"+vt[t[e+6]]+vt[t[e+7]]+"-"+vt[t[e+8]]+vt[t[e+9]]+"-"+vt[t[e+10]]+vt[t[e+11]]+vt[t[e+12]]+vt[t[e+13]]+vt[t[e+14]]+vt[t[e+15]]).toLowerCase();if(!p6(n))throw TypeError("Stringified UUID is invalid");return n}function wR(t,e,n){t=t||{};var r=t.random||(t.rng||h6)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,m6(r)}var g6=class xR{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,o){this.remove(e),this.set(n,r,o)}remove(e){this.cache.delete(e)}invalidate(e){const n=new xR(this.cache),r=e.mapping;return this.cache.forEach(([o,s],i)=>{if(i<0)return;const a=r.mapResult(i),l=e.doc.nodeAt(a.pos);if(a.deleted||!(l!=null&&l.eq(o)))n.remove(i);else if(i!==a.pos){const c=s.map(d=>d.map(r,0,0)).filter(d=>d!=null);n.replace(i,a.pos,l,c)}}),n}};function y6({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new Te("prosemirror-highlight");return new me({key:r,state:{init(o,s){const i=new g6,[a,l]=lC(s.doc,t,e,n,i);return{cache:i,decorations:a,promises:l}},apply:(o,s)=>{const i=s.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const d=s.decorations.map(o.mapping,o.doc),u=s.promises;return{cache:i,decorations:d,promises:u}}const[l,c]=lC(o.doc,t,e,n,i);return{cache:i,decorations:l,promises:c}}},view:o=>{const s=new Set,i=()=>{if(s.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const c=r.getState(o.state);for(const d of(l=c==null?void 0:c.promises)!=null?l:[])s.add(d),d.then(()=>{s.delete(d),i()}).catch(()=>{s.delete(d)})};return a(),{update:()=>{a()}}},props:{decorations(o){var s;return(s=this.getState(o))==null?void 0:s.decorations}}})}function lC(t,e,n,r,o){const s=[],i=[];return t.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),d=o.get(l);if(d){const[u,h]=d;s.push(...h)}else{const u=e({content:a.textContent,language:c||void 0,pos:l,size:a.nodeSize});u&&Array.isArray(u)?(o.set(l,a,u),s.push(...u)):u instanceof Promise&&(o.remove(l),i.push(u))}}return!1}),[be.create(t,s),i]}function b6(t,e){return function({content:r,language:o,pos:s,size:i}){var a;const l=[],{tokens:c,fg:d,bg:u,rootStyle:h}=t.codeToTokens(r,{lang:o,theme:t.getLoadedThemes()[0]}),f=h||(d&&u?`--prosemirror-highlight:${d};--prosemirror-highlight-bg:${u}`:"");if(f){const g=Re.node(s,s+i,{style:f});l.push(g)}let p=s+1;for(const g of c){for(const b of g){const v=p+b.content.length,x=Re.inline(p,v,{style:v6((a=b.htmlStyle)!=null?a:`color: ${b.color}`),class:"shiki"});l.push(x),p=v}p+=1}return l}}function v6(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const w6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,x6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,k6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,C6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,S6=Mt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Sn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ja({find:w6,type:this.type}),ja({find:k6,type:this.type})]},addPasteRules(){return[Ai({find:x6,type:this.type}),Ai({find:C6,type:this.type})]}}),T6=/(^|[^`])`([^`]+)`(?!`)/,E6=/(^|[^`])`([^`]+)`(?!`)/g,M6=Mt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Sn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ja({find:T6,type:this.type})]},addPasteRules(){return[Ai({find:E6,type:this.type})]}}),A6=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,R6=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,_6=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,P6=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,D6=Mt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Sn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ja({find:A6,type:this.type}),ja({find:_6,type:this.type})]},addPasteRules(){return[Ai({find:R6,type:this.type}),Ai({find:P6,type:this.type})]}}),I6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,N6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,O6=Mt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Sn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ja({find:I6,type:this.type})]},addPasteRules(){return[Ai({find:N6,type:this.type})]}}),L6=Mt.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Sn(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),j6=Zr.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Sn(this.options.HTMLAttributes,t),0]}}),B6=Zr.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Sn(this.options.HTMLAttributes,t),0]}});var nb,rb;if(typeof WeakMap<"u"){let t=new WeakMap;nb=e=>t.get(e),rb=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;nb=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},rb=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var ze=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let s=r+1,i=o+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;i<this.height&&this.map[e+this.width*a]==n;a++)i++;return{left:r,top:o,right:s,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:i==this.height)?null:this.map[r+this.width*(n<0?s-1:i)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:s}=this.findCell(t),{left:i,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,i),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const s=r*this.width+o,i=this.map[s];n[i]||(n[i]=!0,!(o==t.left&&o&&this.map[s-1]==i||r==t.top&&r&&this.map[s-this.width]==i)&&e.push(i))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==t){let i=e+t*this.width;const a=(t+1)*this.width;for(;i<a&&this.map[i]<o;)i++;return i==a?s-1:this.map[i]}o=s}}static get(t){return nb(t)||rb(t,V6(t))}};function V6(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=$6(t),n=t.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,d=e*n;c<d;c++)r[c]=0;for(let c=0,d=0;c<n;c++){const u=t.child(c);d++;for(let p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==u.childCount)break;const g=u.child(p),{colspan:b,rowspan:v,colwidth:x}=g.attrs;for(let w=0;w<v;w++){if(w+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:v-w});break}const k=o+w*e;for(let C=0;C<b;C++){r[k+C]==0?r[k+C]=d:(s||(s=[])).push({type:"collision",row:c,pos:d,n:b-C});const S=x&&x[C];if(S){const T=(k+C)%e*2,E=i[T];E==null||E!=S&&i[T+1]==1?(i[T]=S,i[T+1]=1):E==S&&i[T+1]++}}}o+=b,d+=g.nodeSize}const h=(c+1)*e;let f=0;for(;o<h;)r[o++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),d++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new ze(e,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&H6(a,i,t),a}function $6(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=t.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function H6(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const d=(o+c)%t.width,u=e[d*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=F6(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function F6(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function $t(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var cs=new Te("selectingCells");function Za(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function z6(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Xr(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function p1(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Za(e.$head)||U6(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function U6(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function ob(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function W6(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function m1(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function kR(t,e,n){const r=t.node(-1),o=ze.get(r),s=t.start(-1),i=o.nextCell(t.pos-s,e,n);return i==null?null:t.node(0).resolve(s+i)}function Ri(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function CR(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function G6(t,e,n){const r=$t(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var _e=class fo extends ee{constructor(e,n=e){const r=e.node(-1),o=ze.get(r),s=e.start(-1),i=o.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=o.cellsInRect(i).filter(d=>d!=n.pos-s);l.unshift(n.pos-s);const c=l.map(d=>{const u=r.nodeAt(d);if(!u)throw RangeError(`No cell with offset ${d} found`);const h=s+d+1;return new rA(a.resolve(h),a.resolve(h+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(ob(r)&&ob(o)&&m1(r,o)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?fo.rowSelection(r,o):s&&this.isColSelection()?fo.colSelection(r,o):new fo(r,o)}return U.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=ze.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},i=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let d=l*n.width+o.left,u=o.left;u<o.right;u++,d++){const h=n.map[d];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const g=o.left-f.left,b=f.right-o.right;if(g>0||b>0){let v=p.attrs;if(g>0&&(v=Ri(v,0,g)),b>0&&(v=Ri(v,v.colspan-b,b)),f.left<o.left){if(p=p.type.createAndFill(v),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else p=p.type.create(v,p.content)}if(f.top<o.top||f.bottom>o.bottom){const v={...p.attrs,rowspan:Math.min(f.bottom,o.bottom)-Math.max(f.top,o.top)};f.top<o.top?p=p.type.createAndFill(v):p=p.type.create(v,p.content)}c.push(p)}i.push(e.child(l).copy(_.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:i;return new j(_.from(a),1,1)}replace(e,n=j.empty){const r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){const{$from:a,$to:l}=o[i],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),i?j.empty:n)}const s=ee.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new j(_.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=ze.get(n),o=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let i=0;i<s.length;i++)e(n.nodeAt(s[i]),o+s[i])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=ze.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.top<=a.top?(i.top>0&&(e=l.resolve(s+o.map[i.left])),a.bottom<o.height&&(n=l.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+o.map[a.left])),i.bottom<o.height&&(e=l.resolve(s+o.map[o.width*(o.height-1)+i.right-1]))),new fo(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=ze.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(o,s)>0)return!1;const i=o+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(e){return e instanceof fo&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=ze.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.left<=a.left?(i.left>0&&(e=l.resolve(s+o.map[i.top*o.width])),a.right<o.width&&(n=l.resolve(s+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+o.map[a.top*o.width])),i.right<o.width&&(e=l.resolve(s+o.map[o.width*(i.top+1)-1]))),new fo(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new fo(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new fo(e.resolve(n),e.resolve(r))}getBookmark(){return new q6(this.$anchorCell.pos,this.$headCell.pos)}};_e.prototype.visible=!1;ee.jsonID("cell",_e);var q6=class SR{constructor(e,n){this.anchor=e,this.head=n}map(e){return new SR(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&m1(n,r)?new _e(n,r):ee.near(r,1)}};function K6(t){if(!(t.selection instanceof _e))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Re.node(r,r+n.nodeSize,{class:"selectedCell"}))}),be.create(t.doc,e)}function Y6({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function J6({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function Z6(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,i;if(r instanceof q&&(i=r.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")s=_e.create(o,r.from);else if(i=="row"){const a=o.resolve(r.from+1);s=_e.rowSelection(a,a)}else if(!n){const a=ze.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=_e.create(o,l+1,c)}}else r instanceof U&&Y6(r)?s=U.create(o,r.from):r instanceof U&&J6(r)&&(s=U.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var X6=new Te("fix-tables");function TR(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let i=0,a=0;i<s;i++){const l=e.child(i);for(let c=a,d=Math.min(o,i+3);c<d;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?TR(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Q6(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=eH(t,o,s,n))};return e?e.doc!=t.doc&&TR(e.doc,t.doc,0,r):t.doc.descendants(r),n}function eH(t,e,n,r){const o=ze.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const d=e.nodeAt(c.pos);if(!d)continue;const u=d.attrs;for(let h=0;h<u.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Ri(u,u.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let i,a;for(let l=0;l<s.length;l++)s[l]&&(i==null&&(i=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const d=e.child(l),u=c+d.nodeSize,h=s[l];if(h>0){let f="cell";d.firstChild&&(f=d.firstChild.type.spec.tableRole);const p=[];for(let b=0;b<h;b++){const v=$t(t.schema)[f].createAndFill();v&&p.push(v)}const g=(l==0||i==l-1)&&a==l?c+1:u-1;r.insert(r.mapping.map(g),p)}c=u}return r.setMeta(X6,{fixTables:!0})}function Qr(t){const e=t.selection,n=p1(t),r=n.node(-1),o=n.start(-1),s=ze.get(r);return{...e instanceof _e?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function ER(t,{map:e,tableStart:n,table:r},o){let s=o>0?-1:0;G6(e,r,o+s)&&(s=o==0||o==e.width?null:0);for(let i=0;i<e.height;i++){const a=i*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,CR(c.attrs,o-e.colCount(l))),i+=c.attrs.rowspan-1}else{const l=s==null?$t(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(i,o,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function tH(t,e){if(!Xr(t))return!1;if(e){const n=Qr(t);e(ER(t.tr,n,n.left))}return!0}function nH(t,e){if(!Xr(t))return!1;if(e){const n=Qr(t);e(ER(t.tr,n,n.right))}return!0}function rH(t,{map:e,table:n,tableStart:r},o){const s=t.mapping.maps.length;for(let i=0;i<e.height;){const a=i*e.width+o,l=e.map[a],c=n.nodeAt(l),d=c.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,Ri(d,o-e.colCount(l)));else{const u=t.mapping.slice(s).map(r+l);t.delete(u,u+c.nodeSize)}i+=d.rowspan}}function oH(t,e){if(!Xr(t))return!1;if(e){const n=Qr(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;rH(r,n,o),o!=n.left;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=ze.get(s)}e(r)}return!0}function sH(t,e,n){var r;const o=$t(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function MR(t,{map:e,tableStart:n,table:r},o){var s;let i=n;for(let c=0;c<o;c++)i+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;sH(e,r,o+l)&&(l=o==0||o==e.height?null:0);for(let c=0,d=e.width*o;c<e.width;c++,d++)if(o>0&&o<e.height&&e.map[d]==e.map[d-e.width]){const u=e.map[d],h=r.nodeAt(u).attrs;t.setNodeMarkup(n+u,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const u=l==null?$t(r.type.schema).cell:(s=r.nodeAt(e.map[d+l*e.width]))==null?void 0:s.type,h=u==null?void 0:u.createAndFill();h&&a.push(h)}return t.insert(i,$t(r.type.schema).row.create(null,a)),t}function iH(t,e){if(!Xr(t))return!1;if(e){const n=Qr(t);e(MR(t.tr,n,n.top))}return!0}function aH(t,e){if(!Xr(t))return!1;if(e){const n=Qr(t);e(MR(t.tr,n,n.bottom))}return!0}function lH(t,{map:e,table:n,tableStart:r},o){let s=0;for(let c=0;c<o;c++)s+=n.child(c).nodeSize;const i=s+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(s+r,i+r);const l=new Set;for(let c=0,d=o*e.width;c<e.width;c++,d++){const u=e.map[d];if(!l.has(u)){if(l.add(u),o>0&&u==e.map[d-e.width]){const h=n.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(o<e.height&&u==e.map[d+e.width]){const h=n.nodeAt(u),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),g=e.positionAt(o+1,c,n);t.insert(t.mapping.slice(a).map(r+g),p),c+=f.colspan-1}}}}function cH(t,e){if(!Xr(t))return!1;if(e){const n=Qr(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;lH(r,n,o),o!=n.top;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=ze.get(n.table)}e(r)}return!0}function cC(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function dH({width:t,height:e,map:n},r){let o=r.top*t+r.left,s=o,i=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[i]==n[i+t])return!0;o++,i++}return!1}function uH(t,e){const n=t.selection;if(!(n instanceof _e)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Qr(t),{map:o}=r;if(dH(o,r))return!1;if(e){const s=t.tr,i={};let a=_.empty,l,c;for(let d=r.top;d<r.bottom;d++)for(let u=r.left;u<r.right;u++){const h=o.map[d*o.width+u],f=r.table.nodeAt(h);if(!(i[h]||!f))if(i[h]=!0,l==null)l=h,c=f;else{cC(f)||(a=a.append(f.content));const p=s.mapping.map(h+r.tableStart);s.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...CR(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const d=l+1+c.content.size,u=cC(c)?l+1:d;s.replaceWith(u+r.tableStart,d+r.tableStart,a)}s.setSelection(new _e(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function hH(t,e){const n=$t(t.schema);return fH(({node:r})=>n[r.type.spec.tableRole])(t,e)}function fH(t){return(e,n)=>{var r;const o=e.selection;let s,i;if(o instanceof _e){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;s=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(s=z6(o.$from),!s)return!1;i=(r=Za(o.$from))==null?void 0:r.pos}if(s==null||i==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const d=Qr(e),u=e.tr;for(let f=0;f<d.right-d.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=d.top;f<d.bottom;f++){let p=d.map.positionAt(f,d.left,d.table);f==d.top&&(p+=s.nodeSize);for(let g=d.left,b=0;g<d.right;g++,b++)g==d.left&&f==d.top||u.insert(h=u.mapping.map(p+d.tableStart,1),t({node:s,row:f,col:g}).createAndFill(l[b]))}u.setNodeMarkup(i,t({node:s,row:d.top,col:d.left}),l[0]),o instanceof _e&&u.setSelection(new _e(u.doc.resolve(o.$anchorCell.pos),h?u.doc.resolve(h):void 0)),n(u)}return!0}}function pH(t){return function(e,n){if(!Xr(e))return!1;if(n){const r=$t(e.schema),o=Qr(e),s=e.tr,i=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function dC(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function g1(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?pH(t):function(n,r){if(!Xr(n))return!1;if(r){const o=$t(n.schema),s=Qr(n),i=n.tr,a=dC("row",s,o),l=dC("column",s,o),d=(t==="column"?a:t==="row"?l:!1)?1:0,u=t=="column"?{left:0,top:d,right:1,bottom:s.map.height}:t=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(u).forEach(f=>{const p=f+s.tableStart,g=i.doc.nodeAt(p);g&&i.setNodeMarkup(p,h,g.attrs)}),r(i)}return!0}}g1("row",{useDeprecatedLogic:!0});g1("column",{useDeprecatedLogic:!0});g1("cell",{useDeprecatedLogic:!0});function mH(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),i=s.lastChild;if(i)return o-1-i.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function uC(t){return function(e,n){if(!Xr(e))return!1;const r=mH(p1(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(U.between(o,W6(o))).scrollIntoView())}return!0}}function Su(t,e){const n=t.selection;if(!(n instanceof _e))return!1;if(e){const r=t.tr,o=$t(t.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new j(o,0,0))}),r.docChanged&&e(r)}return!0}function gH(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,i=o.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const d=l?0:Math.max(0,n-1),u=l<e.childCount-1?0:Math.max(0,r-1);(d||u)&&(c=sb($t(i).row,new j(c,d,u)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?sb($t(i).row,new j(e,n,r)).content:e);else return null;return yH(i,a)}function yH(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let i=s.childCount-1;i>=0;i--){const{rowspan:a,colspan:l}=s.child(i).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(_.empty),n[o]<r){const s=$t(t).cell.createAndFill(),i=[];for(let a=n[o];a<r;a++)i.push(s);e[o]=e[o].append(_.from(i))}return{height:e.length,width:r,rows:e}}function sb(t,e){const n=t.createAndFill();return new W0(n).replace(0,n.content.size,e).doc}function bH({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],i=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let d=s[a]||0,u=0;d<r;u++){let h=l.child(u%l.childCount);d+h.attrs.colspan>r&&(h=h.type.createChecked(Ri(h.attrs,h.attrs.colspan,d+h.attrs.colspan-r),h.content)),c.push(h),d+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}i.push(_.from(c))}n=i,t=r}if(e!=o){const s=[];for(let i=0,a=0;i<o;i++,a++){const l=[],c=n[a%e];for(let d=0;d<c.childCount;d++){let u=c.child(d);i+u.attrs.rowspan>o&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,o-u.attrs.rowspan)},u.content)),l.push(u)}s.push(_.from(l))}n=s,e=o}return{width:t,height:e,rows:n}}function vH(t,e,n,r,o,s,i){const a=t.doc.type.schema,l=$t(a);let c,d;if(o>e.width)for(let u=0,h=0;u<e.height;u++){const f=n.child(u);h+=f.nodeSize;const p=[];let g;f.lastChild==null||f.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=d||(d=l.header_cell.createAndFill());for(let b=e.width;b<o;b++)p.push(g);t.insert(t.mapping.slice(i).map(h-1+r),p)}if(s>e.height){const u=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,o);p++){const b=p>=e.width?!1:n.nodeAt(e.map[g+p]).type==l.header_cell;u.push(b?d||(d=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,_.from(u)),f=[];for(let p=e.height;p<s;p++)f.push(h);t.insert(t.mapping.slice(i).map(r+n.nodeSize-2),f)}return!!(c||d)}function hC(t,e,n,r,o,s,i,a){if(i==0||i==e.height)return!1;let l=!1;for(let c=o;c<s;c++){const d=i*e.width+c,u=e.map[d];if(e.map[d-e.width]==u){l=!0;const h=n.nodeAt(u),{top:f,left:p}=e.findCell(u);t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h.attrs,rowspan:i-f}),t.insert(t.mapping.slice(a).map(e.positionAt(i,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-i})),c+=h.attrs.colspan-1}}return l}function fC(t,e,n,r,o,s,i,a){if(i==0||i==e.width)return!1;let l=!1;for(let c=o;c<s;c++){const d=c*e.width+i,u=e.map[d];if(e.map[d-1]==u){l=!0;const h=n.nodeAt(u),f=e.colCount(u),p=t.mapping.slice(a).map(u+r);t.setNodeMarkup(p,null,Ri(h.attrs,i-f,h.attrs.colspan-(i-f))),t.insert(p+h.nodeSize,h.type.createAndFill(Ri(h.attrs,0,i-f))),c+=h.attrs.rowspan-1}}return l}function pC(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=ze.get(s);const{top:a,left:l}=r,c=l+o.width,d=a+o.height,u=t.tr;let h=0;function f(){if(s=n?u.doc.nodeAt(n-1):u.doc,!s)throw new Error("No table found");i=ze.get(s),h=u.mapping.maps.length}vH(u,i,s,n,c,d,h)&&f(),hC(u,i,s,n,l,c,a,h)&&f(),hC(u,i,s,n,l,c,d,h)&&f(),fC(u,i,s,n,a,d,l,h)&&f(),fC(u,i,s,n,a,d,c,h)&&f();for(let p=a;p<d;p++){const g=i.positionAt(p,l,s),b=i.positionAt(p,c,s);u.replace(u.mapping.slice(h).map(g+n),u.mapping.slice(h).map(b+n),new j(o.rows[p-a],0,0))}f(),u.setSelection(new _e(u.doc.resolve(n+i.positionAt(a,l,s)),u.doc.resolve(n+i.positionAt(d-1,c-1,s)))),e(u)}var wH=n1({ArrowLeft:Tu("horiz",-1),ArrowRight:Tu("horiz",1),ArrowUp:Tu("vert",-1),ArrowDown:Tu("vert",1),"Shift-ArrowLeft":Eu("horiz",-1),"Shift-ArrowRight":Eu("horiz",1),"Shift-ArrowUp":Eu("vert",-1),"Shift-ArrowDown":Eu("vert",1),Backspace:Su,"Mod-Backspace":Su,Delete:Su,"Mod-Delete":Su});function lh(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Tu(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof _e)return lh(n,r,ee.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const i=AR(o,t,e);if(i==null)return!1;if(t=="horiz")return lh(n,r,ee.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(i),l=kR(a,t,e);let c;return l?c=ee.near(l,1):e<0?c=ee.near(n.doc.resolve(a.before(-1)),-1):c=ee.near(n.doc.resolve(a.after(-1)),1),lh(n,r,c)}}}function Eu(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof _e)i=s;else{const l=AR(o,t,e);if(l==null)return!1;i=new _e(n.doc.resolve(l))}const a=kR(i.$headCell,t,e);return a?lh(n,r,new _e(i.$anchorCell,a)):!1}}function xH(t,e){const n=t.state.doc,r=Za(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new _e(r))),!0):!1}function kH(t,e,n){if(!Xr(t.state))return!1;let r=gH(n);const o=t.state.selection;if(o instanceof _e){r||(r={width:1,height:1,rows:[_.from(sb($t(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=ze.get(s).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=bH(r,a.right-a.left,a.bottom-a.top),pC(t.state,t.dispatch,i,a,r),!0}else if(r){const s=p1(t.state),i=s.start(-1);return pC(t.state,t.dispatch,i,ze.get(s.node(-1)).findCell(s.pos-i),r),!0}else return!1}function CH(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=mC(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof _e)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=Za(t.state.selection.$anchor))!=null&&((n=lg(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(l,c){let d=lg(t,c);const u=cs.getState(t.state)==null;if(!d||!m1(l,d))if(u)d=l;else return;const h=new _e(l,d);if(u||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);u&&f.setMeta(cs,l.pos),t.dispatch(f)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),cs.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(cs,-1))}function a(l){const c=l,d=cs.getState(t.state);let u;if(d!=null)u=t.state.doc.resolve(d);else if(mC(t,c.target)!=r&&(u=lg(t,e),!u))return i();u&&s(u,c)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function AR(t,e,n){if(!(t.state.selection instanceof U))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function mC(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function lg(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Za(t.state.doc.resolve(n.pos)):null}var RR=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ib(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,ib(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function ib(t,e,n,r,o,s){var i;let a=0,l=!0,c=e.firstChild;const d=t.firstChild;if(d){for(let u=0,h=0;u<d.childCount;u++){const{colspan:f,colwidth:p}=d.child(u).attrs;for(let g=0;g<f;g++,h++){const b=o==h?s:p&&p[g],v=b?b+"px":"";if(a+=b||r,b||(l=!1),c)c.style.width!=v&&(c.style.width=v),c=c.nextSibling;else{const x=document.createElement("col");x.style.width=v,e.appendChild(x)}}}for(;c;){const u=c.nextSibling;(i=c.parentNode)==null||i.removeChild(c),c=u}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var xn=new Te("tableColumnResizing");function SH({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=RR,lastColumnResizable:o=!0}={}){const s=new me({key:xn,state:{init(i,a){var l,c;const d=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,u=$t(a.schema).table.name;return r&&d&&(d[u]=(h,f)=>new r(h,n,f)),new TH(-1,!1)},apply(i,a){return a.apply(i)}},props:{attributes:i=>{const a=xn.getState(i);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(i,a)=>{EH(i,a,t,o)},mouseleave:i=>{MH(i)},mousedown:(i,a)=>{AH(i,a,e,n)}},decorations:i=>{const a=xn.getState(i);if(a&&a.activeHandle>-1)return IH(i,a.activeHandle)},nodeViews:{}}});return s}var TH=class ch{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(xn);if(r&&r.setHandle!=null)return new ch(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new ch(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return ob(e.doc.resolve(o))||(o=-1),new ch(o,n.dragging)}return n}};function EH(t,e,n,r){if(!t.editable)return;const o=xn.getState(t.state);if(o&&!o.dragging){const s=_H(e.target);let i=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?i=gC(t,e,"left",n):l-e.clientX<=n&&(i=gC(t,e,"right",n))}if(i!=o.activeHandle){if(!r&&i!==-1){const a=t.state.doc.resolve(i),l=a.node(-1),c=ze.get(l),d=a.start(-1);if(c.colCount(a.pos-d)+a.nodeAfter.attrs.colspan-1==c.width-1)return}_R(t,i)}}}function MH(t){if(!t.editable)return;const e=xn.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&_R(t,-1)}function AH(t,e,n,r){var o;if(!t.editable)return!1;const s=(o=t.dom.ownerDocument.defaultView)!=null?o:window,i=xn.getState(t.state);if(!i||i.activeHandle==-1||i.dragging)return!1;const a=t.state.doc.nodeAt(i.activeHandle),l=RH(t,i.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(xn,{setDragging:{startX:e.clientX,startWidth:l}}));function c(u){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",d);const h=xn.getState(t.state);h!=null&&h.dragging&&(PH(t,h.activeHandle,yC(h.dragging,u,n)),t.dispatch(t.state.tr.setMeta(xn,{setDragging:null})))}function d(u){if(!u.which)return c(u);const h=xn.getState(t.state);if(h&&h.dragging){const f=yC(h.dragging,u,n);bC(t,h.activeHandle,f,r)}}return bC(t,i.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",d),e.preventDefault(),!0}function RH(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function _H(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function gC(t,e,n,r){const o=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!s)return-1;const{pos:i}=s,a=Za(t.state.doc.resolve(i));if(!a)return-1;if(n=="right")return a.pos;const l=ze.get(a.node(-1)),c=a.start(-1),d=l.map.indexOf(a.pos-c);return d%l.width==0?-1:c+l.map[d-1]}function yC(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function _R(t,e){t.dispatch(t.state.tr.setMeta(xn,{setHandle:e}))}function PH(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),s=ze.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const d=c*s.width+a;if(c&&s.map[d]==s.map[d-s.width])continue;const u=s.map[d],h=o.nodeAt(u).attrs,f=h.colspan==1?0:a-s.colCount(u);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():DH(h.colspan);p[f]=n,l.setNodeMarkup(i+u,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function bC(t,e,n,r){const o=t.state.doc.resolve(e),s=o.node(-1),i=o.start(-1),a=ze.get(s).colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&ib(s,l.firstChild,l,r,a,n)}function DH(t){return Array(t).fill(0)}function IH(t,e){var n;const r=[],o=t.doc.resolve(e),s=o.node(-1);if(!s)return be.empty;const i=ze.get(s),a=o.start(-1),l=i.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<i.height;c++){const d=l+c*i.width;if((l==i.width-1||i.map[d]!=i.map[d+1])&&(c==0||i.map[d]!=i.map[d-i.width])){const u=i.map[d],h=a+u+s.nodeAt(u).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=xn.getState(t))!=null&&n.dragging&&r.push(Re.node(a+u,a+u+s.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),r.push(Re.widget(h,f))}}return be.create(t.doc,r)}function NH({allowTableNodeSelection:t=!1}={}){return new me({key:cs,state:{init(){return null},apply(e,n){const r=e.getMeta(cs);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:K6,handleDOMEvents:{mousedown:CH},createSelectionBetween(e){return cs.getState(e.state)!=null?e.state.selection:null},handleTripleClick:xH,handleKeyDown:wH,handlePaste:kH},appendTransaction(e,n,r){return Z6(r,Q6(r,n),t)}})}class Qe extends ee{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Qe.valid(r)?new Qe(r):ee.near(r)}content(){return j.empty}eq(e){return e instanceof Qe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Qe(e.resolve(n.pos))}getBookmark(){return new y1(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!OH(e)||!LH(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Qe.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(Qe.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!q.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(Qe.valid(a))return a}return null}}}Qe.prototype.visible=!1;Qe.findFrom=Qe.findGapCursorFrom;ee.jsonID("gapcursor",Qe);class y1{constructor(e){this.pos=e}map(e){return new y1(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Qe.valid(n)?new Qe(n):ee.near(n)}}function OH(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function LH(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function jH(){return new me({props:{decorations:HH,createSelectionBetween(t,e,n){return e.pos==n.pos&&Qe.valid(n)?new Qe(n):null},handleClick:VH,handleKeyDown:BH,handleDOMEvents:{beforeinput:$H}}})}const BH=n1({ArrowLeft:Mu("horiz",-1),ArrowRight:Mu("horiz",1),ArrowUp:Mu("vert",-1),ArrowDown:Mu("vert",1)});function Mu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof U){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Qe.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Qe(c))),!0):!1}}function VH(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Qe.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&q.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Qe(r))),!0)}function $H(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Qe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=_.empty;for(let i=r.length-1;i>=0;i--)o=_.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new j(o,0,0));return s.setSelection(U.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function HH(t){if(!(t.selection instanceof Qe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",be.create(t.doc,[Re.widget(t.selection.head,e,{key:"gapcursor"})])}const FH=Ne.create({name:"gapCursor",addProseMirrorPlugins(){return[jH()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ye(W(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var Gh=200,ft=function(){};ft.prototype.append=function(e){return e.length?(e=ft.from(e),!this.length&&e||e.length<Gh&&this.leafAppend(e)||this.length<Gh&&e.leafPrepend(this)||this.appendInner(e)):this};ft.prototype.prepend=function(e){return e.length?ft.from(e).append(this):this};ft.prototype.appendInner=function(e){return new zH(this,e)};ft.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ft.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ft.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ft.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ft.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};ft.from=function(e){return e instanceof ft?e:e&&e.length?new PR(e):ft.empty};var PR=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Gh)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Gh)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ft);ft.empty=new PR([]);var zH=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ft);const UH=500;class or{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],d=[];return this.items.forEach((u,h)=>{if(!u.step){o||(o=this.remapping(r,h+1),s=o.maps.length),s--,d.push(u);return}if(o){d.push(new Jo(u.map));let f=u.step.map(o.slice(s)),p;f&&i.maybeStep(f).doc&&(p=i.mapping.maps[i.mapping.maps.length-1],c.push(new Jo(p,void 0,void 0,c.length+d.length))),s--,p&&o.appendMap(p,s)}else i.maybeStep(u.step);if(u.selection)return a=o?u.selection.map(o.slice(s)):u.selection,l=new or(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),h=new Jo(e.mapping.maps[d],u,n),f;(f=l&&l.merge(h))&&(h=f,d?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(i++,n=void 0),o||(l=h)}let c=i-r.depth;return c>GH&&(a=WH(a,c),i-=c),new or(a.append(s),i)}remapping(e,n){let r=new Da;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new or(this.items.append(e.map(n=>new Jo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;i=Math.min(i,f);let p=s.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),b=h.selection&&h.selection.map(s.slice(l+1,f));b&&a++,r.push(new Jo(p,g,b))}else r.push(new Jo(p))},o);let c=[];for(let h=n;h<i;h++)c.push(new Jo(s.maps[h]));let d=this.items.slice(0,o).append(c).append(r),u=new or(d,a);return u.emptyItemCount()>UH&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=i.selection&&i.selection.map(n.slice(r));d&&s++;let u=new Jo(c.invert(),l,d),h,f=o.length-1;(h=o.length&&o[f].merge(u))?o[f]=h:o.push(u)}}else i.map&&r--},this.items.length,0),new or(ft.from(o.reverse()),s)}}or.empty=new or(ft.empty,0);function WH(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let Jo=class DR{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new DR(n.getMap().invert(),n,this.selection)}}};class rs{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const GH=20;function qH(t,e,n,r){let o=n.getMeta(yi),s;if(o)return o.historyState;n.getMeta(JH)&&(t=new rs(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(yi))return i.getMeta(yi).redo?new rs(t.done.addTransform(n,void 0,r,dh(e)),t.undone,vC(n.mapping.maps),t.prevTime,t.prevComposition):new rs(t.done,t.undone.addTransform(n,void 0,r,dh(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!KH(n,t.prevRanges)),c=i?cg(t.prevRanges,n.mapping):vC(n.mapping.maps);return new rs(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,dh(e)),or.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new rs(t.done.rebased(n,s),t.undone.rebased(n,s),cg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new rs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),cg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function KH(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function vC(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,i)=>e.push(s,i));return e}function cg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function YH(t,e,n){let r=dh(e),o=yi.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),l=new rs(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(yi,{redo:n,historyState:l})}let dg=!1,wC=null;function dh(t){let e=t.plugins;if(wC!=e){dg=!1,wC=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){dg=!0;break}}return dg}const yi=new Te("history"),JH=new Te("closeHistory");function ZH(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new me({key:yi,state:{init(){return new rs(or.empty,or.empty,null,0,-1)},apply(e,n,r){return qH(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?b1:r=="historyRedo"?v1:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function IR(t,e){return(n,r)=>{let o=yi.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=YH(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const b1=IR(!1,!0),v1=IR(!0,!0),XH=Ne.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>b1(t,e),redo:()=>({state:t,dispatch:e})=>v1(t,e)}},addProseMirrorPlugins(){return[ZH(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Ñ":()=>this.editor.commands.undo(),"Shift-Mod-Ñ":()=>this.editor.commands.redo()}}}),QH="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mÃ¶gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",eF="ÎµÎ»1Ï…2Ð±Ð³1ÐµÐ»3Ð´ÐµÑ‚Ð¸4ÐµÑŽ2ÐºÐ°Ñ‚Ð¾Ð»Ð¸Ðº6Ð¾Ð¼3Ð¼ÐºÐ´2Ð¾Ð½1ÑÐºÐ²Ð°6Ð¾Ð½Ð»Ð°Ð¹Ð½5Ñ€Ð³3Ñ€ÑƒÑ2Ñ„2ÑÐ°Ð¹Ñ‚3Ñ€Ð±3ÑƒÐºÑ€3Ò›Ð°Ð·3Õ°Õ¡Õµ3×™×©×¨××œ5×§×•×3Ø§Ø¨ÙˆØ¸Ø¨ÙŠ5Ø±Ø§Ù…ÙƒÙˆ5Ù„Ø§Ø±Ø¯Ù†4Ø¨Ø­Ø±ÙŠÙ†5Ø¬Ø²Ø§Ø¦Ø±5Ø³Ø¹ÙˆØ¯ÙŠØ©6Ø¹Ù„ÙŠØ§Ù†5Ù…ØºØ±Ø¨5Ù…Ø§Ø±Ø§Øª5ÛŒØ±Ø§Ù†5Ø¨Ø§Ø±Øª2Ø²Ø§Ø±4ÙŠØªÙƒ3Ú¾Ø§Ø±Øª5ØªÙˆÙ†Ø³4Ø³ÙˆØ¯Ø§Ù†3Ø±ÙŠØ©5Ø´Ø¨ÙƒØ©4Ø¹Ø±Ø§Ù‚2Ø¨2Ù…Ø§Ù†4ÙÙ„Ø³Ø·ÙŠÙ†6Ù‚Ø·Ø±3ÙƒØ§Ø«ÙˆÙ„ÙŠÙƒ6ÙˆÙ…3Ù…ØµØ±2Ù„ÙŠØ³ÙŠØ§5ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§7Ù‚Ø¹4Ù‡Ù…Ø±Ø§Ù‡5Ù¾Ø§Ú©Ø³ØªØ§Ù†7Ú€Ø§Ø±Øª4à¤•à¥‰à¤®3à¤¨à¥‡à¤Ÿ3à¤­à¤¾à¤°à¤¤0à¤®à¥3à¥‹à¤¤5à¤¸à¤‚à¤—à¤ à¤¨5à¦¬à¦¾à¦‚à¦²à¦¾5à¦­à¦¾à¦°à¦¤2à§°à¦¤4à¨­à¨¾à¨°à¨¤4àª­àª¾àª°àª¤4à¬­à¬¾à¬°à¬¤4à®‡à®¨à¯à®¤à®¿à®¯à®¾6à®²à®™à¯à®•à¯ˆ6à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯11à°­à°¾à°°à°¤à±5à²­à²¾à²°à²¤4à´­à´¾à´°à´¤à´‚5à¶½à¶‚à¶šà·4à¸„à¸­à¸¡3à¹„à¸—à¸¢3àº¥àº²àº§3áƒ’áƒ”2ã¿ã‚“ãª3ã‚¢ãƒžã‚¾ãƒ³4ã‚¯ãƒ©ã‚¦ãƒ‰4ã‚°ãƒ¼ã‚°ãƒ«4ã‚³ãƒ 2ã‚¹ãƒˆã‚¢3ã‚»ãƒ¼ãƒ«3ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³6ãƒã‚¤ãƒ³ãƒˆ4ä¸–ç•Œ2ä¸­ä¿¡1å›½1åœ‹1æ–‡ç½‘3äºšé©¬é€Š3ä¼ä¸š2ä½›å±±2ä¿¡æ¯2å¥åº·2å…«å¦2å…¬å¸1ç›Š2å°æ¹¾1ç£2å•†åŸŽ1åº—1æ ‡2å˜‰é‡Œ0å¤§é…’åº—5åœ¨çº¿2å¤§æ‹¿2å¤©ä¸»æ•™3å¨±ä¹2å®¶é›»2å¹¿ä¸œ2å¾®åš2æ…ˆå–„2æˆ‘çˆ±ä½ 3æ‰‹æœº2æ‹›è˜2æ”¿åŠ¡1åºœ2æ–°åŠ å¡2é—»2æ—¶å°š2æ›¸ç±2æœºæž„2æ·¡é©¬é”¡3æ¸¸æˆ2æ¾³é–€2ç‚¹çœ‹2ç§»åŠ¨2ç»„ç»‡æœºæž„4ç½‘å€1åº—1ç«™1ç»œ2è”é€š2è°·æ­Œ2è´­ç‰©2é€šè²©2é›†å›¢2é›»è¨Šç›ˆç§‘4é£žåˆ©æµ¦3é£Ÿå“2é¤åŽ…2é¦™æ ¼é‡Œæ‹‰3æ¸¯2ë‹·ë„·1ì»´2ì‚¼ì„±2í•œêµ­2",Ba=(t,e)=>{for(const n in e)t[n]=e[n];return t},ab="numeric",lb="ascii",cb="alpha",sc="asciinumeric",ql="alphanumeric",db="domain",NR="emoji",tF="scheme",nF="slashscheme",ug="whitespace";function rF(t,e){return t in e||(e[t]=[]),e[t]}function ci(t,e,n){e[ab]&&(e[sc]=!0,e[ql]=!0),e[lb]&&(e[sc]=!0,e[cb]=!0),e[sc]&&(e[ql]=!0),e[cb]&&(e[ql]=!0),e[ql]&&(e[db]=!0),e[NR]&&(e[db]=!0);for(const r in e){const o=rF(r,n);o.indexOf(t)<0&&o.push(t)}}function oF(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ln(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ln.groups={};ln.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||ln.groups;let o;return e&&e.j?o=e:(o=new ln(e),n&&r&&ci(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const s=t.length;if(!s)return o;for(let i=0;i<s-1;i++)o=o.tt(t[i]);return o.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||ln.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const s=e;let i,a=o.go(t);if(a?(i=new ln,Ba(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new ln,s){if(r)if(i.t&&typeof i.t=="string"){const l=Ba(oF(i.t,r),n);ci(s,l,r)}else n&&ci(s,n,r);i.t=s}return o.j[t]=i,i}};const fe=(t,e,n,r,o)=>t.ta(e,n,r,o),Ze=(t,e,n,r,o)=>t.tr(e,n,r,o),xC=(t,e,n,r,o)=>t.ts(e,n,r,o),O=(t,e,n,r,o)=>t.tt(e,n,r,o),po="WORD",ub="UWORD",OR="ASCIINUMERICAL",LR="ALPHANUMERICAL",Vc="LOCALHOST",hb="TLD",fb="UTLD",uh="SCHEME",da="SLASH_SCHEME",w1="NUM",pb="WS",x1="NL",ic="OPENBRACE",ac="CLOSEBRACE",qh="OPENBRACKET",Kh="CLOSEBRACKET",Yh="OPENPAREN",Jh="CLOSEPAREN",Zh="OPENANGLEBRACKET",Xh="CLOSEANGLEBRACKET",Qh="FULLWIDTHLEFTPAREN",ef="FULLWIDTHRIGHTPAREN",tf="LEFTCORNERBRACKET",nf="RIGHTCORNERBRACKET",rf="LEFTWHITECORNERBRACKET",of="RIGHTWHITECORNERBRACKET",sf="FULLWIDTHLESSTHAN",af="FULLWIDTHGREATERTHAN",lf="AMPERSAND",cf="APOSTROPHE",df="ASTERISK",ss="AT",uf="BACKSLASH",hf="BACKTICK",ff="CARET",ds="COLON",k1="COMMA",pf="DOLLAR",Mr="DOT",mf="EQUALS",C1="EXCLAMATION",On="HYPHEN",lc="PERCENT",gf="PIPE",yf="PLUS",bf="POUND",cc="QUERY",S1="QUOTE",jR="FULLWIDTHMIDDLEDOT",T1="SEMI",Ar="SLASH",dc="TILDE",vf="UNDERSCORE",BR="EMOJI",wf="SYM";var VR=Object.freeze({__proto__:null,ALPHANUMERICAL:LR,AMPERSAND:lf,APOSTROPHE:cf,ASCIINUMERICAL:OR,ASTERISK:df,AT:ss,BACKSLASH:uf,BACKTICK:hf,CARET:ff,CLOSEANGLEBRACKET:Xh,CLOSEBRACE:ac,CLOSEBRACKET:Kh,CLOSEPAREN:Jh,COLON:ds,COMMA:k1,DOLLAR:pf,DOT:Mr,EMOJI:BR,EQUALS:mf,EXCLAMATION:C1,FULLWIDTHGREATERTHAN:af,FULLWIDTHLEFTPAREN:Qh,FULLWIDTHLESSTHAN:sf,FULLWIDTHMIDDLEDOT:jR,FULLWIDTHRIGHTPAREN:ef,HYPHEN:On,LEFTCORNERBRACKET:tf,LEFTWHITECORNERBRACKET:rf,LOCALHOST:Vc,NL:x1,NUM:w1,OPENANGLEBRACKET:Zh,OPENBRACE:ic,OPENBRACKET:qh,OPENPAREN:Yh,PERCENT:lc,PIPE:gf,PLUS:yf,POUND:bf,QUERY:cc,QUOTE:S1,RIGHTCORNERBRACKET:nf,RIGHTWHITECORNERBRACKET:of,SCHEME:uh,SEMI:T1,SLASH:Ar,SLASH_SCHEME:da,SYM:wf,TILDE:dc,TLD:hb,UNDERSCORE:vf,UTLD:fb,UWORD:ub,WORD:po,WS:pb});const io=/[a-z]/,Dl=new RegExp("\\p{L}","u"),hg=new RegExp("\\p{Emoji}","u"),ao=/\d/,fg=/\s/,kC="\r",pg=`
`,sF="ï¸",iF="â€",mg="ï¿¼";let Au=null,Ru=null;function aF(t=[]){const e={};ln.groups=e;const n=new ln;Au==null&&(Au=CC(QH)),Ru==null&&(Ru=CC(eF)),O(n,"'",cf),O(n,"{",ic),O(n,"}",ac),O(n,"[",qh),O(n,"]",Kh),O(n,"(",Yh),O(n,")",Jh),O(n,"<",Zh),O(n,">",Xh),O(n,"ï¼ˆ",Qh),O(n,"ï¼‰",ef),O(n,"ã€Œ",tf),O(n,"ã€",nf),O(n,"ã€Ž",rf),O(n,"ã€",of),O(n,"ï¼œ",sf),O(n,"ï¼ž",af),O(n,"&",lf),O(n,"*",df),O(n,"@",ss),O(n,"`",hf),O(n,"^",ff),O(n,":",ds),O(n,",",k1),O(n,"$",pf),O(n,".",Mr),O(n,"=",mf),O(n,"!",C1),O(n,"-",On),O(n,"%",lc),O(n,"|",gf),O(n,"+",yf),O(n,"#",bf),O(n,"?",cc),O(n,'"',S1),O(n,"/",Ar),O(n,";",T1),O(n,"~",dc),O(n,"_",vf),O(n,"\\",uf),O(n,"ãƒ»",jR);const r=Ze(n,ao,w1,{[ab]:!0});Ze(r,ao,r);const o=Ze(r,io,OR,{[sc]:!0}),s=Ze(r,Dl,LR,{[ql]:!0}),i=Ze(n,io,po,{[lb]:!0});Ze(i,ao,o),Ze(i,io,i),Ze(o,ao,o),Ze(o,io,o);const a=Ze(n,Dl,ub,{[cb]:!0});Ze(a,io),Ze(a,ao,s),Ze(a,Dl,a),Ze(s,ao,s),Ze(s,io),Ze(s,Dl,s);const l=O(n,pg,x1,{[ug]:!0}),c=O(n,kC,pb,{[ug]:!0}),d=Ze(n,fg,pb,{[ug]:!0});O(n,mg,d),O(c,pg,l),O(c,mg,d),Ze(c,fg,d),O(d,kC),O(d,pg),Ze(d,fg,d),O(d,mg,d);const u=Ze(n,hg,BR,{[NR]:!0});O(u,"#"),Ze(u,hg,u),O(u,sF,u);const h=O(u,iF);O(h,"#"),Ze(h,hg,u);const f=[[io,i],[ao,o]],p=[[io,null],[Dl,a],[ao,s]];for(let g=0;g<Au.length;g++)Zo(n,Au[g],hb,po,f);for(let g=0;g<Ru.length;g++)Zo(n,Ru[g],fb,ub,p);ci(hb,{tld:!0,ascii:!0},e),ci(fb,{utld:!0,alpha:!0},e),Zo(n,"file",uh,po,f),Zo(n,"mailto",uh,po,f),Zo(n,"http",da,po,f),Zo(n,"https",da,po,f),Zo(n,"ftp",da,po,f),Zo(n,"ftps",da,po,f),ci(uh,{scheme:!0,ascii:!0},e),ci(da,{slashscheme:!0,ascii:!0},e),t=t.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<t.length;g++){const b=t[g][0],x=t[g][1]?{[tF]:!0}:{[nF]:!0};b.indexOf("-")>=0?x[db]=!0:io.test(b)?ao.test(b)?x[sc]=!0:x[lb]=!0:x[ab]=!0,xC(n,b,b,x)}return xC(n,"localhost",Vc,{ascii:!0}),n.jd=new ln(wf),{start:n,tokens:Ba({groups:e},VR)}}function $R(t,e){const n=lF(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let s=0,i=0;for(;i<r;){let a=t,l=null,c=0,d=null,u=-1,h=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(u=0,h=0,d=a):u>=0&&(u+=n[i].length,h++),c+=n[i].length,s+=n[i].length,i++;s-=u,i-=h,c-=u,o.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return o}function lF(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),s,i=o<55296||o>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function Zo(t,e,n,r,o){let s;const i=e.length;for(let a=0;a<i-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new ln(r),s.jr=o.slice(),t.j[l]=s),t=s}return s=new ln(n),s.jr=o.slice(),t.j[e[i-1]]=s,s}function CC(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let s=0;for(;o.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+s),10);i>0;i--)n.pop();r+=s}else n.push(t[r]),r++}return e}const $c={defaultProtocol:"http",events:null,format:SC,formatHref:SC,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function E1(t,e=null){let n=Ba({},$c);t&&(n=Ba(n,t instanceof E1?t.o:t));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}E1.prototype={o:$c,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:$c[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function SC(t){return t}function HR(t,e){this.t="token",this.v=t,this.tk=e}HR.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"â€¦":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=$c.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),s=this.toFormattedString(t),i={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),u=t.getObj("events",n,e);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),d&&Ba(i,d),{tagName:o,attributes:i,content:s,eventListeners:u}}};function Rp(t,e){class n extends HR{constructor(o,s){super(o,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const TC=Rp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),EC=Rp("text"),cF=Rp("nl"),_u=Rp("url",{isLink:!0,toHref(t=$c.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Vc&&t[1].t===ds}}),Pn=t=>new ln(t);function dF({groups:t}){const e=t.domain.concat([lf,df,ss,uf,hf,ff,pf,mf,On,w1,lc,gf,yf,bf,Ar,wf,dc,vf]),n=[cf,ds,k1,Mr,C1,lc,cc,S1,T1,Zh,Xh,ic,ac,Kh,qh,Yh,Jh,Qh,ef,tf,nf,rf,of,sf,af],r=[lf,cf,df,uf,hf,ff,pf,mf,On,ic,ac,lc,gf,yf,bf,cc,Ar,wf,dc,vf],o=Pn(),s=O(o,dc);fe(s,r,s),fe(s,t.domain,s);const i=Pn(),a=Pn(),l=Pn();fe(o,t.domain,i),fe(o,t.scheme,a),fe(o,t.slashscheme,l),fe(i,r,s),fe(i,t.domain,i);const c=O(i,ss);O(s,ss,c),O(a,ss,c),O(l,ss,c);const d=O(s,Mr);fe(d,r,s),fe(d,t.domain,s);const u=Pn();fe(c,t.domain,u),fe(u,t.domain,u);const h=O(u,Mr);fe(h,t.domain,u);const f=Pn(TC);fe(h,t.tld,f),fe(h,t.utld,f),O(c,Vc,f);const p=O(u,On);O(p,On,p),fe(p,t.domain,u),fe(f,t.domain,u),O(f,Mr,h),O(f,On,p);const g=O(f,ds);fe(g,t.numeric,TC);const b=O(i,On),v=O(i,Mr);O(b,On,b),fe(b,t.domain,i),fe(v,r,s),fe(v,t.domain,i);const x=Pn(_u);fe(v,t.tld,x),fe(v,t.utld,x),fe(x,t.domain,i),fe(x,r,s),O(x,Mr,v),O(x,On,b),O(x,ss,c);const w=O(x,ds),k=Pn(_u);fe(w,t.numeric,k);const C=Pn(_u),S=Pn();fe(C,e,C),fe(C,n,S),fe(S,e,C),fe(S,n,S),O(x,Ar,C),O(k,Ar,C);const T=O(a,ds),E=O(l,ds),M=O(E,Ar),R=O(M,Ar);fe(a,t.domain,i),O(a,Mr,v),O(a,On,b),fe(l,t.domain,i),O(l,Mr,v),O(l,On,b),fe(T,t.domain,C),O(T,Ar,C),O(T,cc,C),fe(R,t.domain,C),fe(R,e,C),O(R,Ar,C);const P=[[ic,ac],[qh,Kh],[Yh,Jh],[Zh,Xh],[Qh,ef],[tf,nf],[rf,of],[sf,af]];for(let L=0;L<P.length;L++){const[$,F]=P[L],z=O(C,$);O(S,$,z),O(z,F,C);const J=Pn(_u);fe(z,e,J);const N=Pn();fe(z,n),fe(J,e,J),fe(J,n,N),fe(N,e,J),fe(N,n,N),O(J,F,C),O(N,F,C)}return O(o,Vc,x),O(o,x1,cF),{start:o,tokens:VR}}function uF(t,e,n){let r=n.length,o=0,s=[],i=[];for(;o<r;){let a=t,l=null,c=null,d=0,u=null,h=-1;for(;o<r&&!(l=a.go(n[o].t));)i.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(h=0,u=a):h>=0&&h++,o++,d++;if(h<0)o-=d,o<r&&(i.push(n[o]),o++);else{i.length>0&&(s.push(gg(EC,e,i)),i=[]),o-=h,d-=h;const f=u.t,p=n.slice(o-d,o);s.push(gg(f,e,p))}}return i.length>0&&s.push(gg(EC,e,i)),s}function gg(t,e,n){const r=n[0].s,o=n[n.length-1].e,s=e.slice(r,o);return new t(s,n)}const hF=typeof console<"u"&&console&&console.warn||(()=>{}),fF="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",He={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function pF(){return ln.groups={},He.scanner=null,He.parser=null,He.tokenQueue=[],He.pluginQueue=[],He.customSchemes=[],He.initialized=!1,He}function MC(t,e=!1){if(He.initialized&&hF(`linkifyjs: already initialized - will not register custom scheme "${t}" ${fF}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);He.customSchemes.push([t,e])}function mF(){He.scanner=aF(He.customSchemes);for(let t=0;t<He.tokenQueue.length;t++)He.tokenQueue[t][1]({scanner:He.scanner});He.parser=dF(He.scanner.tokens);for(let t=0;t<He.pluginQueue.length;t++)He.pluginQueue[t][1]({scanner:He.scanner,parser:He.parser});return He.initialized=!0,He}function M1(t){return He.initialized||mF(),uF(He.parser.start,t,$R(He.scanner.start,t))}M1.scan=$R;function FR(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new E1(n),o=M1(t),s=[];for(let i=0;i<o.length;i++){const a=o[i];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}function gF(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function yF(t){return new me({key:new Te("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!o||s)return;const{tr:i}=r,a=d1(n.doc,[...e]);if(u1(a).forEach(({newRange:c})=>{const d=Uh(r.doc,c,f=>f.isTextblock);let u,h;if(d.length>1?(u=d[0],h=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ")):d.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(u=d[0],h=r.doc.textBetween(u.pos,c.to,void 0," ")),u&&h){const f=h.split(" ").filter(v=>v!=="");if(f.length<=0)return!1;const p=f[f.length-1],g=u.pos+h.lastIndexOf(p);if(!p)return!1;const b=M1(p).map(v=>v.toObject(t.defaultProtocol));if(!gF(b))return!1;b.filter(v=>v.isLink).map(v=>({...v,from:g+v.start+1,to:g+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{h1(v.from,v.to,r.doc).some(x=>x.mark.type===t.type)||i.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!i.steps.length)return i}})}function bF(t){return new me({key:new Te("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let i=r.target;const a=[];for(;i.nodeName!=="DIV";)a.push(i),i=i.parentNode;if(!a.find(h=>h.nodeName==="A"))return!1;const l=uR(e.state,t.type.name),c=r.target,d=(o=c==null?void 0:c.href)!==null&&o!==void 0?o:l.href,u=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&d?(window.open(d,u),!0):!1}}})}function vF(t){return new me({key:new Te("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:s}=o,{empty:i}=s;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=FR(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}const wF=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function qs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(wF,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const xF=Mt.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){MC(t);return}MC(t.scheme,t.optionalSlashes)})},onDestroy(){pF()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!qs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!qs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!qs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Sn(this.options.HTMLAttributes,t),0]:["a",Sn(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!qs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!qs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ai({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=FR(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:i=>!!qs(i,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(yF({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!qs(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(bF({type:this.type})),this.options.linkOnPaste&&t.push(vF({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),kF=Zr.create({name:"text",group:"inline"}),Gn=()=>new Map,mb=t=>{const e=Gn();return t.forEach((n,r)=>{e.set(r,n)}),e},eo=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},CF=(t,e)=>{const n=[];for(const[r,o]of t)n.push(e(o,r));return n},SF=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},_i=()=>new Set,yg=t=>t[t.length-1],TF=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Pi=Array.from,EF=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},gb=Array.isArray;class zR{constructor(){this._observers=Gn()}on(e,n){return eo(this._observers,e,_i).add(n),n}once(e,n){const r=(...o)=>{this.off(e,r),n(...o)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Pi((this._observers.get(e)||Gn()).values()).forEach(r=>r(...n))}destroy(){this._observers=Gn()}}const _o=Math.floor,hh=Math.abs,Mo=(t,e)=>t<e?t:e,fr=(t,e)=>t>e?t:e,UR=t=>t!==0?t<0:1/t<0,AC=1,RC=2,bg=4,vg=8,Hc=32,Ao=64,Kt=128,MF=1<<29,_p=31,yb=63,bi=127,AF=2147483647,WR=Number.MAX_SAFE_INTEGER,RF=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&_o(t)===t),_F=String.fromCharCode,PF=t=>t.toLowerCase(),DF=/^\s*/g,IF=t=>t.replace(DF,""),NF=/([A-Z])/g,_C=(t,e)=>IF(t.replace(NF,n=>`${e}${PF(n)}`)),OF=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.codePointAt(o);return r},Fc=typeof TextEncoder<"u"?new TextEncoder:null,LF=t=>Fc.encode(t),jF=Fc?LF:OF;let uc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});uc&&uc.decode(new Uint8Array).length===1&&(uc=null);class Pd{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Dd=()=>new Pd,BF=t=>{const e=Dd();return t(e),sr(e)},VF=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},sr=t=>{const e=new Uint8Array(VF(t));let n=0;for(let r=0;r<t.bufs.length;r++){const o=t.bufs[r];e.set(o,n),n+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},$F=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(fr(n,e)*2),t.cpos=0)},ct=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},bb=ct,Se=(t,e)=>{for(;e>bi;)ct(t,Kt|bi&e),e=_o(e/128);ct(t,bi&e)},A1=(t,e)=>{const n=UR(e);for(n&&(e=-e),ct(t,(e>yb?Kt:0)|(n?Ao:0)|yb&e),e=_o(e/64);e>0;)ct(t,(e>bi?Kt:0)|bi&e),e=_o(e/128)},vb=new Uint8Array(3e4),HF=vb.length/3,FF=(t,e)=>{if(e.length<HF){const n=Fc.encodeInto(e,vb).written||0;Se(t,n);for(let r=0;r<n;r++)ct(t,vb[r])}else bn(t,jF(e))},zF=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Se(t,r);for(let o=0;o<r;o++)ct(t,n.codePointAt(o))},ka=Fc&&Fc.encodeInto?FF:zF,Pp=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=Mo(n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(fr(n*2,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},bn=(t,e)=>{Se(t,e.byteLength),Pp(t,e)},R1=(t,e)=>{$F(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},UF=(t,e)=>R1(t,4).setFloat32(0,e,!1),WF=(t,e)=>R1(t,8).setFloat64(0,e,!1),GF=(t,e)=>R1(t,8).setBigInt64(0,e,!1),PC=new DataView(new ArrayBuffer(4)),qF=t=>(PC.setFloat32(0,t),PC.getFloat32(0)===t),Va=(t,e)=>{switch(typeof e){case"string":ct(t,119),ka(t,e);break;case"number":RF(e)&&hh(e)<=AF?(ct(t,125),A1(t,e)):qF(e)?(ct(t,124),UF(t,e)):(ct(t,123),WF(t,e));break;case"bigint":ct(t,122),GF(t,e);break;case"object":if(e===null)ct(t,126);else if(gb(e)){ct(t,117),Se(t,e.length);for(let n=0;n<e.length;n++)Va(t,e[n])}else if(e instanceof Uint8Array)ct(t,116),bn(t,e);else{ct(t,118);const n=Object.keys(e);Se(t,n.length);for(let r=0;r<n.length;r++){const o=n[r];ka(t,o),Va(t,e[o])}}break;case"boolean":ct(t,e?120:121);break;default:ct(t,127)}};class DC extends Pd{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Se(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const IC=t=>{t.count>0&&(A1(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Se(t.encoder,t.count-2))};class fh{constructor(){this.encoder=new Pd,this.s=0,this.count=0}write(e){this.s===e?this.count++:(IC(this),this.count=1,this.s=e)}toUint8Array(){return IC(this),sr(this.encoder)}}const NC=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);A1(t.encoder,e),t.count>1&&Se(t.encoder,t.count-2)}};class wg{constructor(){this.encoder=new Pd,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(NC(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return NC(this),sr(this.encoder)}}class KF{constructor(){this.sarr=[],this.s="",this.lensE=new fh}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Pd;return this.sarr.push(this.s),this.s="",ka(e,this.sarr.join("")),Pp(e,this.lensE.toUint8Array()),sr(e)}}const Es=t=>new Error(t),lr=()=>{throw Es("Method unimplemented")},Tn=()=>{throw Es("Unexpected case")},GR=Es("Unexpected end of array"),qR=Es("Integer out of Range");class Dp{constructor(e){this.arr=e,this.pos=0}}const Xa=t=>new Dp(t),YF=t=>t.pos!==t.arr.length,JF=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},vn=t=>JF(t,ge(t)),$a=t=>t.arr[t.pos++],ge=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const o=t.arr[t.pos++];if(e=e+(o&bi)*n,n*=128,o<Kt)return e;if(e>WR)throw qR}throw GR},_1=t=>{let e=t.arr[t.pos++],n=e&yb,r=64;const o=(e&Ao)>0?-1:1;if((e&Kt)===0)return o*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&bi)*r,r*=128,e<Kt)return o*n;if(n>WR)throw qR}throw GR},ZF=t=>{let e=ge(t);if(e===0)return"";{let n=String.fromCodePoint($a(t));if(--e<100)for(;e--;)n+=String.fromCodePoint($a(t));else for(;e>0;){const r=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,o),e-=r}return decodeURIComponent(escape(n))}},XF=t=>uc.decode(vn(t)),Ca=uc?XF:ZF,P1=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},QF=t=>P1(t,4).getFloat32(0,!1),ez=t=>P1(t,8).getFloat64(0,!1),tz=t=>P1(t,8).getBigInt64(0,!1),nz=[t=>{},t=>null,_1,QF,ez,tz,t=>!1,t=>!0,Ca,t=>{const e=ge(t),n={};for(let r=0;r<e;r++){const o=Ca(t);n[o]=zc(t)}return n},t=>{const e=ge(t),n=[];for(let r=0;r<e;r++)n.push(zc(t));return n},vn],zc=t=>nz[127-$a(t)](t);class OC extends Dp{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),YF(this)?this.count=ge(this)+1:this.count=-1),this.count--,this.s}}class ph extends Dp{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=_1(this);const e=UR(this.s);this.count=1,e&&(this.s=-this.s,this.count=ge(this)+2)}return this.count--,this.s}}class xg extends Dp{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=_1(this),n=e&1;this.diff=_o(e/2),this.count=1,n&&(this.count=ge(this)+2)}return this.s+=this.diff,this.count--,this.s}}class rz{constructor(e){this.decoder=new ph(e),this.str=Ca(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const oz=crypto.getRandomValues.bind(crypto),sz=Math.random,KR=()=>oz(new Uint32Array(1))[0],iz=t=>t[_o(sz()*t.length)],az="10000000-1000-4000-8000"+-1e11,lz=()=>az.replace(/[018]/g,t=>(t^KR()&15>>t/4).toString(16)),cz=Date.now,LC=t=>new Promise(t);Promise.all.bind(Promise);const jC=t=>t===void 0?null:t;class dz{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let YR=new dz,uz=!0;try{typeof localStorage<"u"&&localStorage&&(YR=localStorage,uz=!1)}catch{}const hz=YR,fz=Object.assign,JR=Object.keys,pz=(t,e)=>{for(const n in t)e(t[n],n)},BC=t=>JR(t).length,mz=t=>{for(const e in t)return!1;return!0},ZR=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},gz=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),yz=(t,e)=>t===e||BC(t)===BC(e)&&ZR(t,(n,r)=>(n!==void 0||gz(e,r))&&e[r]===n),bz=Object.freeze,XR=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&XR(t[e])}return bz(t)},D1=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&D1(t,e,n+1)}},vz=t=>t,wz=(t,e)=>e.includes(t);var QR={};const Ha=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",e_=typeof window<"u"&&typeof document<"u"&&!Ha;let Tr;const xz=()=>{if(Tr===void 0)if(Ha){Tr=Gn();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Tr.set(e,""),e=r):e!==null&&(Tr.set(e,r),e=null)}e!==null&&Tr.set(e,"")}else typeof location=="object"?(Tr=Gn(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Tr.set(`--${_C(e,"-")}`,n),Tr.set(`-${_C(e,"-")}`,n)}})):Tr=Gn();return Tr},wb=t=>xz().has(t),xf=t=>jC(Ha?QR[t.toUpperCase().replaceAll("-","_")]:hz.getItem(t)),t_=t=>wb("--"+t)||xf(t)!==null;t_("production");const kz=Ha&&wz(QR.FORCE_COLOR,["true","1","2"]),Cz=kz||!wb("--no-colors")&&!t_("no-color")&&(!Ha||process.stdout.isTTY)&&(!Ha||wb("--color")||xf("COLORTERM")!==null||(xf("TERM")||"").includes("color")),Sz=t=>new Uint8Array(t),Tz=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=_F(t[n]);return btoa(e)},Ez=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Mz=e_?Tz:Ez,Az=t=>{const e=Sz(t.byteLength);return e.set(t),e},Rz=t=>BF(e=>Va(e,t));class _z{constructor(e,n){this.left=e,this.right=n}}const lo=(t,e)=>new _z(t,e),Pz=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const Dz=t=>CF(t,(e,n)=>`${n}:${e};`).join(""),Iz=t=>class{constructor(n){this._=n}destroy(){t(this._)}},Nz=Iz(clearTimeout),I1=(t,e)=>new Nz(setTimeout(e,t)),Lo=Symbol,n_=Lo(),r_=Lo(),Oz=Lo(),Lz=Lo(),jz=Lo(),o_=Lo(),Bz=Lo(),N1=Lo(),Vz=Lo(),$z=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},Hz={[n_]:lo("font-weight","bold"),[r_]:lo("font-weight","normal"),[Oz]:lo("color","blue"),[jz]:lo("color","green"),[Lz]:lo("color","grey"),[o_]:lo("color","red"),[Bz]:lo("color","purple"),[N1]:lo("color","orange"),[Vz]:lo("color","black")},Fz=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[],r=Gn();let o=[],s=0;for(;s<t.length;s++){const a=t[s],l=Hz[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=Dz(r);s>0||c.length>0?(e.push("%c"+a),n.push(c)):e.push(a)}else break}}for(s>0&&(o=n,o.unshift(e.join("")));s<t.length;s++){const a=t[s];a instanceof Symbol||o.push(a)}return o},s_=Cz?Fz:$z,zz=(...t)=>{console.log(...s_(t)),a_.forEach(e=>e.print(t))},i_=(...t)=>{console.warn(...s_(t)),t.unshift(N1),a_.forEach(e=>e.print(t))},a_=_i(),l_=t=>({[Symbol.iterator](){return this},next:t}),Uz=(t,e)=>l_(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),kg=(t,e)=>l_(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class O1{constructor(e,n){this.clock=e,this.len=n}}class Qa{constructor(){this.clients=new Map}}const Ms=(t,e,n)=>e.clients.forEach((r,o)=>{const s=t.doc.store.clients.get(o);if(s!=null){const i=s[s.length-1],a=i.id.clock+i.length;for(let l=0,c=r[l];l<r.length&&c.clock<a;c=r[++l])v_(t,s,c.clock,c.len,n)}}),Wz=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const o=_o((n+r)/2),s=t[o],i=s.clock;if(i<=e){if(e<i+s.len)return o;n=o+1}else r=o-1}return null},el=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Wz(n,e.clock)!==null},L1=t=>{t.clients.forEach(e=>{e.sort((o,s)=>o.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const o=e[r-1],s=e[n];o.clock+o.len>=s.clock?o.len=fr(o.len,s.clock+s.len-o.clock):(r<n&&(e[r]=s),r++)}e.length=r})},xb=t=>{const e=new Qa;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let i=n+1;i<t.length;i++)TF(s,t[i].clients.get(o)||[]);e.clients.set(o,s)}});return L1(e),e},Uc=(t,e,n,r)=>{eo(t.clients,e,()=>[]).push(new O1(n,r))},c_=()=>new Qa,d_=t=>{const e=c_();return t.clients.forEach((n,r)=>{const o=[];for(let s=0;s<n.length;s++){const i=n[s];if(i.deleted){const a=i.id.clock;let l=i.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])l+=c.length;o.push(new O1(a,l))}}o.length>0&&e.clients.set(r,o)}),e},tl=(t,e)=>{Se(t.restEncoder,e.clients.size),Pi(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Se(t.restEncoder,n);const o=r.length;Se(t.restEncoder,o);for(let s=0;s<o;s++){const i=r[s];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},j1=t=>{const e=new Qa,n=ge(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const o=ge(t.restDecoder),s=ge(t.restDecoder);if(s>0){const i=eo(e.clients,o,()=>[]);for(let a=0;a<s;a++)i.push(new O1(t.readDsClock(),t.readDsLen()))}}return e},VC=(t,e,n)=>{const r=new Qa,o=ge(t.restDecoder);for(let s=0;s<o;s++){t.resetDsCurVal();const i=ge(t.restDecoder),a=ge(t.restDecoder),l=n.clients.get(i)||[],c=nt(n,i);for(let d=0;d<a;d++){const u=t.readDsClock(),h=u+t.readDsLen();if(u<c){c<h&&Uc(r,i,c,h-c);let f=Kn(l,u),p=l[f];for(!p.deleted&&p.id.clock<u&&(l.splice(f+1,0,Af(e,p,u-p.id.clock)),f++);f<l.length&&(p=l[f++],p.id.clock<h);)p.deleted||(h<p.id.clock+p.length&&l.splice(f,0,Af(e,p,h-p.id.clock)),p.delete(e))}else Uc(r,i,u,h-u)}}if(r.clients.size>0){const s=new Di;return Se(s.restEncoder,0),tl(s,r),s.toUint8Array()}return null},u_=KR;class Bs extends zR{constructor({guid:e=lz(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:s=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=u_(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new y_,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=LC(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>LC(c=>{const d=u=>{(u===void 0||u===!0)&&(this.off("sync",d),c())};this.on("sync",d)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&De(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Pi(this.subdocs).map(e=>e.guid))}transact(e,n=null){return De(this,e,n)}get(e,n=pt){const r=eo(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),o=r.constructor;if(n!==pt&&o!==n)if(o===pt){const s=new n;s._map=r._map,r._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=s}),s._start=r._start;for(let i=s._start;i!==null;i=i.right)i.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Ea)}getText(e=""){return this.get(e,As)}getMap(e=""){return this.get(e,za)}getXmlElement(e=""){return this.get(e,Gt)}getXmlFragment(e=""){return this.get(e,Ii)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Pi(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Bs({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,De(e.parent.doc,r=>{const o=n.doc;e.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class h_{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ge(this.restDecoder)}readDsLen(){return ge(this.restDecoder)}}class f_ extends h_{readLeftID(){return de(ge(this.restDecoder),ge(this.restDecoder))}readRightID(){return de(ge(this.restDecoder),ge(this.restDecoder))}readClient(){return ge(this.restDecoder)}readInfo(){return $a(this.restDecoder)}readString(){return Ca(this.restDecoder)}readParentInfo(){return ge(this.restDecoder)===1}readTypeRef(){return ge(this.restDecoder)}readLen(){return ge(this.restDecoder)}readAny(){return zc(this.restDecoder)}readBuf(){return Az(vn(this.restDecoder))}readJSON(){return JSON.parse(Ca(this.restDecoder))}readKey(){return Ca(this.restDecoder)}}class Gz{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ge(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ge(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Fa extends Gz{constructor(e){super(e),this.keys=[],ge(e),this.keyClockDecoder=new xg(vn(e)),this.clientDecoder=new ph(vn(e)),this.leftClockDecoder=new xg(vn(e)),this.rightClockDecoder=new xg(vn(e)),this.infoDecoder=new OC(vn(e),$a),this.stringDecoder=new rz(vn(e)),this.parentInfoDecoder=new OC(vn(e),$a),this.typeRefDecoder=new ph(vn(e)),this.lenDecoder=new ph(vn(e))}readLeftID(){return new Sa(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Sa(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return zc(this.restDecoder)}readBuf(){return vn(this.restDecoder)}readJSON(){return zc(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class qz{constructor(){this.restEncoder=Dd()}toUint8Array(){return sr(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Se(this.restEncoder,e)}writeDsLen(e){Se(this.restEncoder,e)}}class Id extends qz{writeLeftID(e){Se(this.restEncoder,e.client),Se(this.restEncoder,e.clock)}writeRightID(e){Se(this.restEncoder,e.client),Se(this.restEncoder,e.clock)}writeClient(e){Se(this.restEncoder,e)}writeInfo(e){bb(this.restEncoder,e)}writeString(e){ka(this.restEncoder,e)}writeParentInfo(e){Se(this.restEncoder,e?1:0)}writeTypeRef(e){Se(this.restEncoder,e)}writeLen(e){Se(this.restEncoder,e)}writeAny(e){Va(this.restEncoder,e)}writeBuf(e){bn(this.restEncoder,e)}writeJSON(e){ka(this.restEncoder,JSON.stringify(e))}writeKey(e){ka(this.restEncoder,e)}}class Kz{constructor(){this.restEncoder=Dd(),this.dsCurrVal=0}toUint8Array(){return sr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Se(this.restEncoder,n)}writeDsLen(e){e===0&&Tn(),Se(this.restEncoder,e-1),this.dsCurrVal+=e}}class Di extends Kz{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new wg,this.clientEncoder=new fh,this.leftClockEncoder=new wg,this.rightClockEncoder=new wg,this.infoEncoder=new DC(bb),this.stringEncoder=new KF,this.parentInfoEncoder=new DC(bb),this.typeRefEncoder=new fh,this.lenEncoder=new fh}toUint8Array(){const e=Dd();return Se(e,0),bn(e,this.keyClockEncoder.toUint8Array()),bn(e,this.clientEncoder.toUint8Array()),bn(e,this.leftClockEncoder.toUint8Array()),bn(e,this.rightClockEncoder.toUint8Array()),bn(e,sr(this.infoEncoder)),bn(e,this.stringEncoder.toUint8Array()),bn(e,sr(this.parentInfoEncoder)),bn(e,this.typeRefEncoder.toUint8Array()),bn(e,this.lenEncoder.toUint8Array()),Pp(e,sr(this.restEncoder)),sr(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Va(this.restEncoder,e)}writeBuf(e){bn(this.restEncoder,e)}writeJSON(e){Va(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const Yz=(t,e,n,r)=>{r=fr(r,e[0].id.clock);const o=Kn(e,r);Se(t.restEncoder,e.length-o),t.writeClient(n),Se(t.restEncoder,r);const s=e[o];s.write(t,r-s.id.clock);for(let i=o+1;i<e.length;i++)e[i].write(t,0)},B1=(t,e,n)=>{const r=new Map;n.forEach((o,s)=>{nt(e,s)>o&&r.set(s,o)}),Ip(e).forEach((o,s)=>{n.has(s)||r.set(s,0)}),Se(t.restEncoder,r.size),Pi(r.entries()).sort((o,s)=>s[0]-o[0]).forEach(([o,s])=>{Yz(t,e.clients.get(o),o,s)})},Jz=(t,e)=>{const n=Gn(),r=ge(t.restDecoder);for(let o=0;o<r;o++){const s=ge(t.restDecoder),i=new Array(s),a=t.readClient();let l=ge(t.restDecoder);n.set(a,{i:0,refs:i});for(let c=0;c<s;c++){const d=t.readInfo();switch(_p&d){case 0:{const u=t.readLen();i[c]=new Fn(de(a,l),u),l+=u;break}case 10:{const u=ge(t.restDecoder);i[c]=new zn(de(a,l),u),l+=u;break}default:{const u=(d&(Ao|Kt))===0,h=new Ae(de(a,l),null,(d&Kt)===Kt?t.readLeftID():null,null,(d&Ao)===Ao?t.readRightID():null,u?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,u&&(d&Hc)===Hc?t.readString():null,H_(t,d));i[c]=h,l+=h.length}}}}return n},Zz=(t,e,n)=>{const r=[];let o=Pi(n.keys()).sort((f,p)=>f-p);if(o.length===0)return null;const s=()=>{if(o.length===0)return null;let f=n.get(o[o.length-1]);for(;f.refs.length===f.i;)if(o.pop(),o.length>0)f=n.get(o[o.length-1]);else return null;return f};let i=s();if(i===null)return null;const a=new y_,l=new Map,c=(f,p)=>{const g=l.get(f);(g==null||g>p)&&l.set(f,p)};let d=i.refs[i.i++];const u=new Map,h=()=>{for(const f of r){const p=f.id.client,g=n.get(p);g?(g.i--,a.clients.set(p,g.refs.slice(g.i)),n.delete(p),g.i=0,g.refs=[]):a.clients.set(p,[f]),o=o.filter(b=>b!==p)}r.length=0};for(;;){if(d.constructor!==zn){const p=eo(u,d.id.client,()=>nt(e,d.id.client))-d.id.clock;if(p<0)r.push(d),c(d.id.client,d.id.clock-1),h();else{const g=d.getMissing(t,e);if(g!==null){r.push(d);const b=n.get(g)||{refs:[],i:0};if(b.refs.length===b.i)c(g,nt(e,g)),h();else{d=b.refs[b.i++];continue}}else(p===0||p<d.length)&&(d.integrate(t,p),u.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(i!==null&&i.i<i.refs.length)d=i.refs[i.i++];else{if(i=s(),i===null)break;d=i.refs[i.i++]}}if(a.clients.size>0){const f=new Di;return B1(f,a,new Map),Se(f.restEncoder,0),{missing:l,update:f.toUint8Array()}}return null},Xz=(t,e)=>B1(t,e.doc.store,e.beforeState),Qz=(t,e,n,r=new Fa(t))=>De(e,o=>{o.local=!1;let s=!1;const i=o.doc,a=i.store,l=Jz(r,i),c=Zz(o,a,l),d=a.pendingStructs;if(d){for(const[h,f]of d.missing)if(f<nt(a,h)){s=!0;break}if(c){for(const[h,f]of c.missing){const p=d.missing.get(h);(p==null||p>f)&&d.missing.set(h,f)}d.update=Cf([d.update,c.update])}}else a.pendingStructs=c;const u=VC(r,o,a);if(a.pendingDs){const h=new Fa(Xa(a.pendingDs));ge(h.restDecoder);const f=VC(h,o,a);u&&f?a.pendingDs=Cf([u,f]):a.pendingDs=u||f}else a.pendingDs=u;if(s){const h=a.pendingStructs.update;a.pendingStructs=null,kf(o.doc,h)}},n,!1),kf=(t,e,n,r=Fa)=>{const o=Xa(e);Qz(o,t,n,new r(o))},$C=(t,e,n)=>kf(t,e,n,f_),eU=(t,e,n=new Map)=>{B1(t,e.store,n),tl(t,d_(e.store))},tU=(t,e=new Uint8Array([0]),n=new Di)=>{const r=p_(e);eU(n,t,r);const o=[n.toUint8Array()];if(t.store.pendingDs&&o.push(t.store.pendingDs),t.store.pendingStructs&&o.push(yU(t.store.pendingStructs.update,e)),o.length>1){if(n.constructor===Id)return mU(o.map((s,i)=>i===0?s:vU(s)));if(n.constructor===Di)return Cf(o)}return o[0]},HC=(t,e)=>tU(t,e,new Id),nU=t=>{const e=new Map,n=ge(t.restDecoder);for(let r=0;r<n;r++){const o=ge(t.restDecoder),s=ge(t.restDecoder);e.set(o,s)}return e},p_=t=>nU(new h_(Xa(t)));class rU{constructor(){this.l=[]}}const FC=()=>new rU,zC=(t,e)=>t.l.push(e),UC=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(o=>e!==o),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},m_=(t,e,n)=>D1(t.l,[e,n]);class Sa{constructor(e,n){this.client=e,this.clock=n}}const ha=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,de=(t,e)=>new Sa(t,e),Wc=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Tn()},Gc=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class qc{constructor(e,n,r,o=0){this.type=e,this.tname=n,this.item=r,this.assoc=o}}const hc=t=>new qc(t.type==null?null:de(t.type.client,t.type.clock),t.tname??null,t.item==null?null:de(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class oU{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const sU=(t,e,n=0)=>new oU(t,e,n),Pu=(t,e,n)=>{let r=null,o=null;return t._item===null?o=Wc(t):r=de(t._item.id.client,t._item.id.clock),new qc(r,o,e,n)},Cg=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return Pu(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return Pu(t,de(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return Pu(t,r.lastId,n);r=r.right}return Pu(t,null,n)},iU=(t,e)=>{const n=Ta(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},aU=(t,e,n=!0)=>{const r=e.store,o=t.item,s=t.type,i=t.tname,a=t.assoc;let l=null,c=0;if(o!==null){if(nt(r,o.client)<=o.clock)return null;const d=n?Tb(r,o):iU(r,o),u=d.item;if(!(u instanceof Ae))return null;if(l=u.parent,l._item===null||!l._item.deleted){c=u.deleted||!u.countable?0:d.diff+(a>=0?0:1);let h=u.left;for(;h!==null;)!h.deleted&&h.countable&&(c+=h.length),h=h.left}}else{if(i!==null)l=e.get(i);else if(s!==null){if(nt(r,s.client)<=s.clock)return null;const{item:d}=n?Tb(r,s):{item:Ta(r,s)};if(d instanceof Ae&&d.content instanceof wr)l=d.content.type;else return null}else throw Tn();a>=0?c=l._length:c=0}return sU(l,c,t.assoc)},WC=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&ha(t.item,e.item)&&ha(t.type,e.type)&&t.assoc===e.assoc;class V1{constructor(e,n){this.ds=e,this.sv=n}}const g_=(t,e)=>new V1(t,e),Sg=t=>g_(d_(t.store),Ip(t.store)),ni=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!el(e.ds,t.id),kb=(t,e)=>{const n=eo(t.meta,kb,_i),r=t.doc.store;n.has(e)||(e.sv.forEach((o,s)=>{o<nt(r,s)&&cn(t,de(s,o))}),Ms(t,e.ds,o=>{}),n.add(e))};class y_{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Ip=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const o=n[n.length-1];e.set(r,o.id.clock+o.length)}),e},nt=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},b_=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Tn()}n.push(e)},Kn=(t,e)=>{let n=0,r=t.length-1,o=t[r],s=o.id.clock;if(s===e)return r;let i=_o(e/(s+o.length-1)*r);for(;n<=r;){if(o=t[i],s=o.id.clock,s<=e){if(e<s+o.length)return i;n=i+1}else r=i-1;i=_o((n+r)/2)}throw Tn()},lU=(t,e)=>{const n=t.clients.get(e.client);return n[Kn(n,e.clock)]},Ta=lU,Cb=(t,e,n)=>{const r=Kn(e,n),o=e[r];return o.id.clock<n&&o instanceof Ae?(e.splice(r+1,0,Af(t,o,n-o.id.clock)),r+1):r},cn=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Cb(t,n,e.clock)]},GC=(t,e,n)=>{const r=e.clients.get(n.client),o=Kn(r,n.clock),s=r[o];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Fn&&r.splice(o+1,0,Af(t,s,n.clock-s.id.clock+1)),s},cU=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Kn(r,e.id.clock)]=n},v_=(t,e,n,r,o)=>{if(r===0)return;const s=n+r;let i=Cb(t,e,n),a;do a=e[i++],s<a.id.clock+a.length&&Cb(t,e,s),o(a);while(i<e.length&&e[i].id.clock<s)};class dU{constructor(e,n,r){this.doc=e,this.deleteSet=new Qa,this.beforeState=Ip(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const qC=(t,e)=>e.deleteSet.clients.size===0&&!SF(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(L1(e.deleteSet),Xz(t,e),tl(t,e.deleteSet),!0),KC=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&eo(t.changed,e,_i).add(n)},mh=(t,e)=>{let n=t[e],r=t[e-1],o=e;for(;o>0;n=r,r=t[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ae&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-o;return s&&t.splice(e+1-s,s),s},uU=(t,e,n)=>{for(const[r,o]of t.clients.entries()){const s=e.clients.get(r);for(let i=o.length-1;i>=0;i--){const a=o[i],l=a.clock+a.len;for(let c=Kn(s,a.clock),d=s[c];c<s.length&&d.id.clock<l;d=s[++c]){const u=s[c];if(a.clock+a.len<=u.id.clock)break;u instanceof Ae&&u.deleted&&!u.keep&&n(u)&&u.gc(e,!1)}}}},hU=(t,e)=>{t.clients.forEach((n,r)=>{const o=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const i=n[s],a=Mo(o.length-1,1+Kn(o,i.clock+i.len-1));for(let l=a,c=o[l];l>0&&c.id.clock>=i.clock;c=o[l])l-=1+mh(o,l)}})},w_=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,o=r.store,s=n.deleteSet,i=n._mergeStructs;try{L1(s),n.afterState=Ip(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=c,d._path=null}),l.sort((d,u)=>d.path.length-u.path.length),m_(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),D1(a,[]),n._needFormattingCleanup&&IU(n)}finally{r.gc&&uU(s,o,r.gcFilter),hU(s,o),n.afterState.forEach((d,u)=>{const h=n.beforeState.get(u)||0;if(h!==d){const f=o.clients.get(u),p=fr(Kn(f,h),1);for(let g=f.length-1;g>=p;)g-=1+mh(f,g)}});for(let d=i.length-1;d>=0;d--){const{client:u,clock:h}=i[d].id,f=o.clients.get(u),p=Kn(f,h);p+1<f.length&&mh(f,p+1)>1||p>0&&mh(f,p)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(zz(N1,n_,"[yjs] ",r_,o_,"Changed the client-id because another client seems to be using it."),r.clientID=u_()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new Id;qC(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new Di;qC(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),c.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):w_(t,e+1)}}},De=(t,e,n=null,r=!0)=>{const o=t._transactionCleanups;let s=!1,i=null;t._transaction===null&&(s=!0,t._transaction=new dU(t,n,r),o.push(t._transaction),o.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(s){const a=t._transaction===o[0];t._transaction=null,a&&w_(o,0)}}return i};class fU{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const YC=(t,e,n)=>{Ms(t,n.deletions,r=>{r instanceof Ae&&e.scope.some(o=>o===t.doc||Gc(o,r))&&q1(r,!1)})},JC=(t,e,n)=>{let r=null;const o=t.doc,s=t.scope;De(o,a=>{for(;e.length>0&&t.currStackItem===null;){const l=o.store,c=e.pop(),d=new Set,u=[];let h=!1;Ms(a,c.insertions,f=>{if(f instanceof Ae){if(f.redone!==null){let{item:p,diff:g}=Tb(l,f.id);g>0&&(p=cn(a,de(p.id.client,p.id.clock+g))),f=p}!f.deleted&&s.some(p=>p===a.doc||Gc(p,f))&&u.push(f)}}),Ms(a,c.deletions,f=>{f instanceof Ae&&s.some(p=>p===a.doc||Gc(p,f))&&!el(c.insertions,f.id)&&d.add(f)}),d.forEach(f=>{h=$_(a,f,d,c.insertions,t.ignoreRemoteMapChanges,t)!==null||h});for(let f=u.length-1;f>=0;f--){const p=u[f];t.deleteFilter(p)&&(p.delete(a),h=!0)}t.currStackItem=h?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},t);const i=t.currStackItem;if(i!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:i,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return i};class x_ extends zR{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=gb(e)?e[0].doc:e instanceof Bs?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=o,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(b=>l.changedParentTypes.has(b)||b===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,d=this.redoing,u=c?this.redoStack:this.undoStack;c?this.stopCapturing():d||this.clear(!1,!0);const h=new Qa;l.afterState.forEach((b,v)=>{const x=l.beforeState.get(v)||0,w=b-x;w>0&&Uc(h,v,x,w)});const f=cz();let p=!1;if(this.lastChange>0&&f-this.lastChange<this.captureTimeout&&u.length>0&&!c&&!d){const b=u[u.length-1];b.deletions=xb([b.deletions,l.deleteSet]),b.insertions=xb([b.insertions,h])}else u.push(new fU(l.deleteSet,h)),p=!0;!c&&!d&&(this.lastChange=f),Ms(l,l.deleteSet,b=>{b instanceof Ae&&this.scope.some(v=>v===l.doc||Gc(v,b))&&q1(b,!0)});const g=[{stackItem:u[u.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];p?this.emit("stack-item-added",g):this.emit("stack-item-updated",g)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=gb(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof pt?r.doc!==this.doc:r!==this.doc)&&i_("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(o=>YC(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>YC(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=JC(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=JC(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*pU(t){const e=ge(t.restDecoder);for(let n=0;n<e;n++){const r=ge(t.restDecoder),o=t.readClient();let s=ge(t.restDecoder);for(let i=0;i<r;i++){const a=t.readInfo();if(a===10){const l=ge(t.restDecoder);yield new zn(de(o,s),l),s+=l}else if((_p&a)!==0){const l=(a&(Ao|Kt))===0,c=new Ae(de(o,s),null,(a&Kt)===Kt?t.readLeftID():null,null,(a&Ao)===Ao?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&Hc)===Hc?t.readString():null,H_(t,a));yield c,s+=c.length}else{const l=t.readLen();yield new Fn(de(o,s),l),s+=l}}}}class $1{constructor(e,n){this.gen=pU(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===zn);return this.curr}}class H1{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const mU=t=>Cf(t,f_,Id),gU=(t,e)=>{if(t.constructor===Fn){const{client:n,clock:r}=t.id;return new Fn(de(n,r+e),t.length-e)}else if(t.constructor===zn){const{client:n,clock:r}=t.id;return new zn(de(n,r+e),t.length-e)}else{const n=t,{client:r,clock:o}=n.id;return new Ae(de(r,o+e),null,de(r,o+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Cf=(t,e=Fa,n=Di)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(Xa(d)));let o=r.map(d=>new $1(d,!0)),s=null;const i=new n,a=new H1(i);for(;o=o.filter(h=>h.curr!==null),o.sort((h,f)=>{if(h.curr.id.client===f.curr.id.client){const p=h.curr.id.clock-f.curr.id.clock;return p===0?h.curr.constructor===f.curr.constructor?0:h.curr.constructor===zn?1:-1:p}else return f.curr.id.client-h.curr.id.client}),o.length!==0;){const d=o[0],u=d.curr.id.client;if(s!==null){let h=d.curr,f=!1;for(;h!==null&&h.id.clock+h.length<=s.struct.id.clock+s.struct.length&&h.id.client>=s.struct.id.client;)h=d.next(),f=!0;if(h===null||h.id.client!==u||f&&h.id.clock>s.struct.id.clock+s.struct.length)continue;if(u!==s.struct.id.client)us(a,s.struct,s.offset),s={struct:h,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<h.id.clock)if(s.struct.constructor===zn)s.struct.length=h.id.clock+h.length-s.struct.id.clock;else{us(a,s.struct,s.offset);const p=h.id.clock-s.struct.id.clock-s.struct.length;s={struct:new zn(de(u,s.struct.id.clock+s.struct.length),p),offset:0}}else{const p=s.struct.id.clock+s.struct.length-h.id.clock;p>0&&(s.struct.constructor===zn?s.struct.length-=p:h=gU(h,p)),s.struct.mergeWith(h)||(us(a,s.struct,s.offset),s={struct:h,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let h=d.curr;h!==null&&h.id.client===u&&h.id.clock===s.struct.id.clock+s.struct.length&&h.constructor!==zn;h=d.next())us(a,s.struct,s.offset),s={struct:h,offset:0}}s!==null&&(us(a,s.struct,s.offset),s=null),F1(a);const l=r.map(d=>j1(d)),c=xb(l);return tl(i,c),i.toUint8Array()},yU=(t,e,n=Fa,r=Di)=>{const o=p_(e),s=new r,i=new H1(s),a=new n(Xa(t)),l=new $1(a,!1);for(;l.curr;){const d=l.curr,u=d.id.client,h=o.get(u)||0;if(l.curr.constructor===zn){l.next();continue}if(d.id.clock+d.length>h)for(us(i,d,fr(h-d.id.clock,0)),l.next();l.curr&&l.curr.id.client===u;)us(i,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===u&&l.curr.id.clock+l.curr.length<=h;)l.next()}F1(i);const c=j1(a);return tl(s,c),s.toUint8Array()},k_=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:sr(t.encoder.restEncoder)}),t.encoder.restEncoder=Dd(),t.written=0)},us=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&k_(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Se(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},F1=t=>{k_(t);const e=t.encoder.restEncoder;Se(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Se(e,r.written),Pp(e,r.restEncoder)}},bU=(t,e,n,r)=>{const o=new n(Xa(t)),s=new $1(o,!1),i=new r,a=new H1(i);for(let c=s.curr;c!==null;c=s.next())us(a,e(c),0);F1(a);const l=j1(o);return tl(i,l),i.toUint8Array()},vU=t=>bU(t,vz,Fa,Id),ZC="You must not compute changes after the event-handler fired.";class Np{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=wU(this.currentTarget,this.target))}deletes(e){return el(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Es(ZC);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const s=n._map.get(o);let i,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))i="delete",a=yg(l.content.getContent());else return;else l!==null&&this.deletes(l)?(i="update",a=yg(l.content.getContent())):(i="add",a=void 0)}else if(this.deletes(s))i="delete",a=yg(s.content.getContent());else return;e.set(o,{action:i,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Es(ZC);const n=this.target,r=_i(),o=_i(),s=[];if(e={added:r,deleted:o,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,o.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const wU=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,o=e._item.parent._start;for(;o!==e._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}e=e._item.parent}return n},Bt=()=>{i_("Invalid access: Add Yjs type to a document before reading data.")},C_=80;let z1=0;class xU{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=z1++}}const kU=t=>{t.timestamp=z1++},S_=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=z1++},CU=(t,e,n)=>{if(t.length>=C_){const r=t.reduce((o,s)=>o.timestamp<s.timestamp?o:s);return S_(r,e,n),r}else{const r=new xU(e,n);return t.push(r),r}},Op=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,i)=>hh(e-s.index)<hh(e-i.index)?s:i);let r=t._start,o=0;for(n!==null&&(r=n.p,o=n.index,kU(n));r.right!==null&&o<e;){if(!r.deleted&&r.countable){if(e<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>e;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&hh(n.index-o)<r.parent.length/C_?(S_(n,r,o),n):CU(t._searchMarker,r,o)},Kc=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const o=t[r];if(n>0){let s=o.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(o.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}o.p=s,s.marker=!0}(e<o.index||n>0&&e===o.index)&&(o.index=fr(e,o.index+n))}},Lp=(t,e,n)=>{const r=t,o=e.changedParentTypes;for(;eo(o,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;m_(r._eH,n,e)};class pt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=FC(),this._dEH=FC(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw lr()}clone(){throw lr()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){zC(this._eH,e)}observeDeep(e){zC(this._dEH,e)}unobserve(e){UC(this._eH,e)}unobserveDeep(e){UC(this._dEH,e)}toJSON(){}}const T_=(t,e,n)=>{t.doc??Bt(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const o=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const i=s.content.getContent();if(i.length<=e)e-=i.length;else{for(let a=e;a<i.length&&r>0;a++)o.push(i[a]),r--;e=0}}s=s.right}return o},E_=t=>{t.doc??Bt();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)e.push(r[o])}n=n.right}return e},M_=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&ni(r,e)){const o=r.content.getContent();for(let s=0;s<o.length;s++)n.push(o[s])}r=r.right}return n},Yc=(t,e)=>{let n=0,r=t._start;for(t.doc??Bt();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let s=0;s<o.length;s++)e(o[s],n++,t)}r=r.right}},A_=(t,e)=>{const n=[];return Yc(t,(r,o)=>{n.push(e(r,o,t))}),n},SU=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},R_=(t,e)=>{t.doc??Bt();const n=Op(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Sf=(t,e,n,r)=>{let o=n;const s=t.doc,i=s.clientID,a=s.store,l=n===null?e._start:n.right;let c=[];const d=()=>{c.length>0&&(o=new Ae(de(i,nt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Ni(c)),o.integrate(t,0),c=[])};r.forEach(u=>{if(u===null)c.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(u);break;default:switch(d(),u.constructor){case Uint8Array:case ArrayBuffer:o=new Ae(de(i,nt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Nd(new Uint8Array(u))),o.integrate(t,0);break;case Bs:o=new Ae(de(i,nt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Od(u)),o.integrate(t,0);break;default:if(u instanceof pt)o=new Ae(de(i,nt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new wr(u)),o.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},__=()=>Es("Length exceeded!"),P_=(t,e,n,r)=>{if(n>e._length)throw __();if(n===0)return e._searchMarker&&Kc(e._searchMarker,n,r.length),Sf(t,e,null,r);const o=n,s=Op(e,n);let i=e._start;for(s!==null&&(i=s.p,n-=s.index,n===0&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&cn(t,de(i.id.client,i.id.clock+n));break}n-=i.length}return e._searchMarker&&Kc(e._searchMarker,o,r.length),Sf(t,e,i,r)},TU=(t,e,n)=>{let o=(e._searchMarker||[]).reduce((s,i)=>i.index>s.index?i:s,{index:0,p:e._start}).p;if(o)for(;o.right;)o=o.right;return Sf(t,e,o,n)},D_=(t,e,n,r)=>{if(r===0)return;const o=n,s=r,i=Op(e,n);let a=e._start;for(i!==null&&(a=i.p,n-=i.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&cn(t,de(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&cn(t,de(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw __();e._searchMarker&&Kc(e._searchMarker,o,-s+r)},Tf=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},U1=(t,e,n,r)=>{const o=e._map.get(n)||null,s=t.doc,i=s.clientID;let a;if(r==null)a=new Ni([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Ni([r]);break;case Uint8Array:a=new Nd(r);break;case Bs:a=new Od(r);break;default:if(r instanceof pt)a=new wr(r);else throw new Error("Unexpected content type")}new Ae(de(i,nt(s.store,i)),o,o&&o.lastId,null,null,e,n,a).integrate(t,0)},W1=(t,e)=>{t.doc??Bt();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},I_=t=>{const e={};return t.doc??Bt(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},N_=(t,e)=>{t.doc??Bt();const n=t._map.get(e);return n!==void 0&&!n.deleted},EU=(t,e)=>{const n={};return t._map.forEach((r,o)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&ni(s,e)&&(n[o]=s.content.getContent()[s.length-1])}),n},Du=t=>(t.doc??Bt(),Uz(t._map.entries(),e=>!e[1].deleted));class MU extends Np{}class Ea extends pt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Ea;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ea}clone(){const e=new Ea;return e.insert(0,this.toArray().map(n=>n instanceof pt?n.clone():n)),e}get length(){return this.doc??Bt(),this._length}_callObserver(e,n){super._callObserver(e,n),Lp(this,e,new MU(this,e))}insert(e,n){this.doc!==null?De(this.doc,r=>{P_(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?De(this.doc,n=>{TU(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?De(this.doc,r=>{D_(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return R_(this,e)}toArray(){return E_(this)}slice(e=0,n=this.length){return T_(this,e,n)}toJSON(){return this.map(e=>e instanceof pt?e.toJSON():e)}map(e){return A_(this,e)}forEach(e){Yc(this,e)}[Symbol.iterator](){return SU(this)}_write(e){e.writeTypeRef(XU)}}const AU=t=>new Ea;class RU extends Np{constructor(e,n,r){super(e,n),this.keysChanged=r}}class za extends pt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new za}clone(){const e=new za;return this.forEach((n,r)=>{e.set(r,n instanceof pt?n.clone():n)}),e}_callObserver(e,n){Lp(this,e,new RU(this,e,n))}toJSON(){this.doc??Bt();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];e[r]=o instanceof pt?o.toJSON():o}}),e}get size(){return[...Du(this)].length}keys(){return kg(Du(this),e=>e[0])}values(){return kg(Du(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return kg(Du(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Bt(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?De(this.doc,n=>{Tf(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?De(this.doc,r=>{U1(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return W1(this,e)}has(e){return N_(this,e)}clear(){this.doc!==null?De(this.doc,e=>{this.forEach(function(n,r,o){Tf(e,o,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(QU)}}const _U=t=>new za,gs=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&yz(t,e);class Sb{constructor(e,n,r,o){this.left=e,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&Tn(),this.right.content.constructor){case at:this.right.deleted||nl(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const XC=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case at:e.right.deleted||nl(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&cn(t,de(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Iu=(t,e,n,r)=>{const o=new Map,s=r?Op(e,n):null;if(s){const i=new Sb(s.p.left,s.p,s.index,o);return XC(t,i,n-s.index)}else{const i=new Sb(null,e._start,0,o);return XC(t,i,n)}},O_=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===at&&gs(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=t.doc,s=o.clientID;r.forEach((i,a)=>{const l=n.left,c=n.right,d=new Ae(de(s,nt(o.store,s)),l,l&&l.lastId,c,c&&c.id,e,null,new at(a,i));d.integrate(t,0),n.right=d,n.forward()})},nl=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},L_=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===at&&gs(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},j_=(t,e,n,r)=>{const o=t.doc,s=o.clientID,i=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!gs(c,l)){i.set(a,c);const{left:d,right:u}=n;n.right=new Ae(de(s,nt(o.store,s)),d,d&&d.lastId,u,u&&u.id,e,null,new at(a,l)),n.right.integrate(t,0),n.forward()}}return i},Tg=(t,e,n,r,o)=>{n.currentAttributes.forEach((h,f)=>{o[f]===void 0&&(o[f]=null)});const s=t.doc,i=s.clientID;L_(n,o);const a=j_(t,e,n,o),l=r.constructor===String?new pr(r):r instanceof pt?new wr(r):new Hi(r);let{left:c,right:d,index:u}=n;e._searchMarker&&Kc(e._searchMarker,n.index,l.getLength()),d=new Ae(de(i,nt(s.store,i)),c,c&&c.lastId,d,d&&d.id,e,null,l),d.integrate(t,0),n.right=d,n.index=u,n.forward(),O_(t,e,n,a)},QC=(t,e,n,r,o)=>{const s=t.doc,i=s.clientID;L_(n,o);const a=j_(t,e,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===at));){if(!n.right.deleted)switch(n.right.content.constructor){case at:{const{key:l,value:c}=n.right.content,d=o[l];if(d!==void 0){if(gs(d,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&cn(t,de(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Ae(de(i,nt(s.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new pr(l)),n.right.integrate(t,0),n.forward()}O_(t,e,n,a)},B_=(t,e,n,r,o)=>{let s=e;const i=Gn();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===at){const c=s.content;i.set(c.key,c)}s=s.right}let a=0,l=!1;for(;e!==s;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case at:{const{key:d,value:u}=c,h=r.get(d)??null;(i.get(d)!==c||h===u)&&(e.delete(t),a++,!l&&(o.get(d)??null)===u&&h!==u&&(h===null?o.delete(d):o.set(d,h))),!l&&!e.deleted&&nl(o,c);break}}}e=e.right}return a},PU=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===at){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},DU=t=>{let e=0;return De(t.doc,n=>{let r=t._start,o=t._start,s=Gn();const i=mb(s);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case at:nl(i,o.content);break;default:e+=B_(n,r,o,s,i),s=mb(i),r=o;break}o=o.right}}),e},IU=t=>{const e=new Set,n=t.doc;for(const[r,o]of t.afterState.entries()){const s=t.beforeState.get(r)||0;o!==s&&v_(t,n.store.clients.get(r),s,o,i=>{!i.deleted&&i.content.constructor===at&&i.constructor!==Fn&&e.add(i.parent)})}De(n,r=>{Ms(t,t.deleteSet,o=>{if(o instanceof Fn||!o.parent._hasFormatting||e.has(o.parent))return;const s=o.parent;o.content.constructor===at?e.add(s):PU(r,o)});for(const o of e)DU(o)})},eS=(t,e,n)=>{const r=n,o=mb(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case wr:case Hi:case pr:n<e.right.length&&cn(t,de(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&B_(t,s,e.right,o,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&Kc(i._searchMarker,e.index,-r+n),e};class NU extends Np{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];De(e,r=>{const o=new Map,s=new Map;let i=this.target._start,a=null;const l={};let c="",d=0,u=0;const h=()=>{if(a!==null){let f=null;switch(a){case"delete":u>0&&(f={delete:u}),u=0;break;case"insert":(typeof c=="object"||c.length>0)&&(f={insert:c},o.size>0&&(f.attributes={},o.forEach((p,g)=>{p!==null&&(f.attributes[g]=p)}))),c="";break;case"retain":d>0&&(f={retain:d},mz(l)||(f.attributes=fz({},l))),d=0;break}f&&n.push(f),a=null}};for(;i!==null;){switch(i.content.constructor){case wr:case Hi:this.adds(i)?this.deletes(i)||(h(),a="insert",c=i.content.getContent()[0],h()):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),u+=1):i.deleted||(a!=="retain"&&(h(),a="retain"),d+=1);break;case pr:this.adds(i)?this.deletes(i)||(a!=="insert"&&(h(),a="insert"),c+=i.content.str):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),u+=i.length):i.deleted||(a!=="retain"&&(h(),a="retain"),d+=i.length);break;case at:{const{key:f,value:p}=i.content;if(this.adds(i)){if(!this.deletes(i)){const g=o.get(f)??null;gs(g,p)?p!==null&&i.delete(r):(a==="retain"&&h(),gs(p,s.get(f)??null)?delete l[f]:l[f]=p)}}else if(this.deletes(i)){s.set(f,p);const g=o.get(f)??null;gs(g,p)||(a==="retain"&&h(),l[f]=g)}else if(!i.deleted){s.set(f,p);const g=l[f];g!==void 0&&(gs(g,p)?g!==null&&i.delete(r):(a==="retain"&&h(),p===null?delete l[f]:l[f]=p))}i.deleted||(a==="insert"&&h(),nl(o,i.content));break}}i=i.right}for(h();n.length>0;){const f=n[n.length-1];if(f.retain!==void 0&&f.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class As extends pt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Bt(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new As}clone(){const e=new As;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new NU(this,e,n);Lp(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Bt();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===pr&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?De(this.doc,r=>{const o=new Sb(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const i=e[s];if(i.insert!==void 0){const a=!n&&typeof i.insert=="string"&&s===e.length-1&&o.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof a!="string"||a.length>0)&&Tg(r,this,o,a,i.attributes||{})}else i.retain!==void 0?QC(r,this,o,i.retain,i.attributes||{}):i.delete!==void 0&&eS(r,o,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??Bt();const o=[],s=new Map,i=this.doc;let a="",l=this._start;function c(){if(a.length>0){const u={};let h=!1;s.forEach((p,g)=>{h=!0,u[g]=p});const f={insert:a};h&&(f.attributes=u),o.push(f),a=""}}const d=()=>{for(;l!==null;){if(ni(l,e)||n!==void 0&&ni(l,n))switch(l.content.constructor){case pr:{const u=s.get("ychange");e!==void 0&&!ni(l,e)?(u===void 0||u.user!==l.id.client||u.type!=="removed")&&(c(),s.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!ni(l,n)?(u===void 0||u.user!==l.id.client||u.type!=="added")&&(c(),s.set("ychange",r?r("added",l.id):{type:"added"})):u!==void 0&&(c(),s.delete("ychange")),a+=l.content.str;break}case wr:case Hi:{c();const u={insert:l.content.getContent()[0]};if(s.size>0){const h={};u.attributes=h,s.forEach((f,p)=>{h[p]=f})}o.push(u);break}case at:ni(l,e)&&(c(),nl(s,l.content));break}l=l.right}c()};return e||n?De(i,u=>{e&&kb(u,e),n&&kb(u,n),d()},"cleanup"):d(),o}insert(e,n,r){if(n.length<=0)return;const o=this.doc;o!==null?De(o,s=>{const i=Iu(s,this,e,!r);r||(r={},i.currentAttributes.forEach((a,l)=>{r[l]=a})),Tg(s,this,i,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const o=this.doc;o!==null?De(o,s=>{const i=Iu(s,this,e,!r);Tg(s,this,i,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?De(r,o=>{eS(o,Iu(o,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const o=this.doc;o!==null?De(o,s=>{const i=Iu(s,this,e,!1);i.right!==null&&QC(s,this,i,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?De(this.doc,n=>{Tf(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?De(this.doc,r=>{U1(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return W1(this,e)}getAttributes(){return I_(this)}_write(e){e.writeTypeRef(eW)}}const OU=t=>new As;class Eg{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Bt()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Gt||n.constructor===Ii)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Ii extends pt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ii}clone(){const e=new Ii;return e.insert(0,this.toArray().map(n=>n instanceof pt?n.clone():n)),e}get length(){return this.doc??Bt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Eg(this,e)}querySelector(e){e=e.toUpperCase();const r=new Eg(this,o=>o.nodeName&&o.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Pi(new Eg(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Lp(this,e,new BU(this,n,e))}toString(){return A_(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const o=e.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),Yc(this,s=>{o.insertBefore(s.toDOM(e,n,r),null)}),o}insert(e,n){this.doc!==null?De(this.doc,r=>{P_(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)De(this.doc,r=>{const o=e&&e instanceof pt?e._item:e;Sf(r,this,o,n)});else{const r=this._prelimContent,o=e===null?0:r.findIndex(s=>s===e)+1;if(o===0&&e!==null)throw Es("Reference item not found");r.splice(o,0,...n)}}delete(e,n=1){this.doc!==null?De(this.doc,r=>{D_(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return E_(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return R_(this,e)}slice(e=0,n=this.length){return T_(this,e,n)}forEach(e){Yc(this,e)}_write(e){e.writeTypeRef(nW)}}const LU=t=>new Ii;class Gt extends Ii{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new Gt(this.nodeName)}clone(){const e=new Gt(this.nodeName),n=this.getAttributes();return pz(n,(r,o)=>{typeof r=="string"&&e.setAttribute(o,r)}),e.insert(0,this.toArray().map(r=>r instanceof pt?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),i=n.length>0?" "+n.join(" "):"";return`<${s}${i}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?De(this.doc,n=>{Tf(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?De(this.doc,r=>{U1(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return W1(this,e)}hasAttribute(e){return N_(this,e)}getAttributes(e){return e?EU(this,e):I_(this)}toDOM(e=document,n={},r){const o=e.createElement(this.nodeName),s=this.getAttributes();for(const i in s){const a=s[i];typeof a=="string"&&o.setAttribute(i,a)}return Yc(this,i=>{o.appendChild(i.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(tW),e.writeKey(this.nodeName)}}const jU=t=>new Gt(t.readKey());class BU extends Np{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class Ef extends za{constructor(e){super(),this.hookName=e}_copy(){return new Ef(this.hookName)}clone(){const e=new Ef(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const o=n[this.hookName];let s;return o!==void 0?s=o.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(rW),e.writeKey(this.hookName)}}const VU=t=>new Ef(t.readKey());class Cn extends As{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Cn}clone(){const e=new Cn;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const o=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(e=>{const n=[];for(const o in e.attributes){const s=[];for(const i in e.attributes[o])s.push({key:i,value:e.attributes[o][i]});s.sort((i,a)=>i.key<a.key?-1:1),n.push({nodeName:o,attrs:s})}n.sort((o,s)=>o.nodeName<s.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const s=n[o];r+=`<${s.nodeName}`;for(let i=0;i<s.attrs.length;i++){const a=s.attrs[i];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(oW)}}const $U=t=>new Cn;class G1{constructor(e,n){this.id=e,this.length=n}get deleted(){throw lr()}mergeWith(e){return!1}write(e,n,r){throw lr()}integrate(e,n){throw lr()}}const HU=0;class Fn extends G1{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),b_(e.doc.store,this)}write(e,n){e.writeInfo(HU),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Nd{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Nd(this.content)}splice(e){throw lr()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const FU=t=>new Nd(t.readBuf());class Jc{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Jc(this.len)}splice(e){const n=new Jc(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Uc(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const zU=t=>new Jc(t.readLen()),V_=(t,e)=>new Bs({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Od{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Od(V_(this.doc.guid,this.opts))}splice(e){throw lr()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const UU=t=>new Od(V_(t.readString(),t.readAny()));class Hi{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Hi(this.embed)}splice(e){throw lr()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const WU=t=>new Hi(t.readJSON());class at{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new at(this.key,this.value)}splice(e){throw lr()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const GU=t=>new at(t.readKey(),t.readJSON());class Mf{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Mf(this.arr)}splice(e){const n=new Mf(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const qU=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const o=t.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new Mf(n)},KU=xf("node_env")==="development";class Ni{constructor(e){this.arr=e,KU&&XR(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ni(this.arr)}splice(e){const n=new Ni(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeAny(s)}}getRef(){return 8}}const YU=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Ni(n)};class pr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new pr(this.str)}splice(e){const n=new pr(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"ï¿½",n.str="ï¿½"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const JU=t=>new pr(t.readString()),ZU=[AU,_U,OU,jU,LU,VU,$U],XU=0,QU=1,eW=2,tW=3,nW=4,rW=5,oW=6;class wr{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new wr(this.type._copy())}splice(e){throw lr()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const sW=t=>new wr(ZU[t.readTypeRef()](t)),Tb=(t,e)=>{let n=e,r=0,o;do r>0&&(n=de(n.client,n.clock+r)),o=Ta(t,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof Ae);return{item:o,diff:r}},q1=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},Af=(t,e,n)=>{const{client:r,clock:o}=e.id,s=new Ae(de(r,o+n),e,de(r,o+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=de(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},tS=(t,e)=>EF(t,n=>el(n.deletions,e)),$_=(t,e,n,r,o,s)=>{const i=t.doc,a=i.store,l=i.clientID,c=e.redone;if(c!==null)return cn(t,c);let d=e.parent._item,u=null,h;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||$_(t,d,n,r,o,s)===null))return null;for(;d.redone!==null;)d=cn(t,d.redone)}const f=d===null?e.parent:d.content.type;if(e.parentSub===null){for(u=e.left,h=e;u!==null;){let v=u;for(;v!==null&&v.parent._item!==d;)v=v.redone===null?null:cn(t,v.redone);if(v!==null&&v.parent._item===d){u=v;break}u=u.left}for(;h!==null;){let v=h;for(;v!==null&&v.parent._item!==d;)v=v.redone===null?null:cn(t,v.redone);if(v!==null&&v.parent._item===d){h=v;break}h=h.right}}else if(h=null,e.right&&!o){for(u=e;u!==null&&u.right!==null&&(u.right.redone||el(r,u.right.id)||tS(s.undoStack,u.right.id)||tS(s.redoStack,u.right.id));)for(u=u.right;u.redone;)u=cn(t,u.redone);if(u&&u.right!==null)return null}else u=f._map.get(e.parentSub)||null;const p=nt(a,l),g=de(l,p),b=new Ae(g,u,u&&u.lastId,h,h&&h.id,f,e.parentSub,e.content.copy());return e.redone=g,q1(b,!0),b.integrate(t,0),b};class Ae extends G1{constructor(e,n,r,o,s,i,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=s,this.parent=i,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?RC:0}set marker(e){(this.info&vg)>0!==e&&(this.info^=vg)}get marker(){return(this.info&vg)>0}get keep(){return(this.info&AC)>0}set keep(e){this.keep!==e&&(this.info^=AC)}get countable(){return(this.info&RC)>0}get deleted(){return(this.info&bg)>0}set deleted(e){this.deleted!==e&&(this.info^=bg)}markDeleted(){this.info|=bg}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=nt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=nt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Sa&&this.id.client!==this.parent.client&&this.parent.clock>=nt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=GC(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=cn(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Fn||this.right&&this.right.constructor===Fn)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ae?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ae&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Sa){const r=Ta(n,this.parent);r.constructor===Fn?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=GC(e,e.doc.store,de(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const s=new Set,i=new Set;for(;o!==null&&o!==this.right;){if(i.add(o),s.add(o),ha(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,s.clear();else if(ha(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&i.has(Ta(e.doc.store,o.origin)))s.has(Ta(e.doc.store,o.origin))||(r=o,s.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),b_(e.doc.store,this),this.content.integrate(e,this),KC(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Fn(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:de(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&ha(e.origin,this.lastId)&&this.right===e&&ha(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Uc(e.deleteSet,this.id.client,this.id.clock,this.length),KC(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Tn();this.content.gc(e),n?cU(e,this,new Fn(this.id,this.length)):this.content=new Jc(this.length)}write(e,n){const r=n>0?de(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,s=this.parentSub,i=this.content.getRef()&_p|(r===null?0:Kt)|(o===null?0:Ao)|(s===null?0:Hc);if(e.writeInfo(i),r!==null&&e.writeLeftID(r),o!==null&&e.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=Wc(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Sa?(e.writeParentInfo(!1),e.writeLeftID(a)):Tn();s!==null&&e.writeString(s)}this.content.write(e,n)}}const H_=(t,e)=>iW[e&_p](t),iW=[()=>{Tn()},zU,qU,FU,JU,WU,GU,sW,YU,UU,()=>{Tn()}],aW=10;class zn extends G1{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Tn()}write(e,n){e.writeInfo(aW),Se(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const F_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},z_="__ $YJS$ __";F_[z_]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");F_[z_]=!0;const lW=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},cW=/[\uD800-\uDBFF]/,dW=/[\uDC00-\uDFFF]/,uW=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&cW.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&dW.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},hW=uW,Ee=new Te("y-sync"),Ir=new Te("y-undo"),Kl=new Te("yjs-cursor"),Nr=(t,e)=>t>>>e|t<<32-e,fW=t=>Nr(t,2)^Nr(t,13)^Nr(t,22),pW=t=>Nr(t,6)^Nr(t,11)^Nr(t,25),mW=t=>Nr(t,7)^Nr(t,18)^t>>>3,gW=t=>Nr(t,17)^Nr(t,19)^t>>>10,yW=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bW=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class vW{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(bW),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let u=16;u<64;u++)n[u]=gW(n[u-2])+n[u-7]+mW(n[u-15])+n[u-16];let r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],l=e[5],c=e[6],d=e[7];for(let u=0,h,f;u<64;u++)h=d+pW(a)+(a&l^~a&c)+yW[u]+n[u]>>>0,f=fW(r)+(r&o^r&s^o&s)>>>0,d=c,c=l,l=a,a=i+h>>>0,i=s,s=o,o=r,r=h+f>>>0;e[0]+=r,e[1]+=o,e[2]+=s,e[3]+=i,e[4]+=a,e[5]+=l,e[6]+=c,e[7]+=d}digest(e){let n=0;for(;n+56<=e.length;){let i=0;for(;i<16&&n+3<e.length;i++)this._W[i]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,i,16);n<e.length;)this._W[i]|=e[n]<<(3-n%4)*8,n++;this._W[i]|=Kt<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<e.length;o++)for(let i=3;i>=0&&n<e.length;i--)this._W[o]|=e[n++]<<i*8;r||(this._W[o-(n%4===0?0:1)]|=Kt<<(3-n%4)*8),this._W[14]=e.byteLength/MF,this._W[15]=e.byteLength*8,this._updateHash();const s=new Uint8Array(32);for(let i=0;i<this._H.length;i++)for(let a=0;a<4;a++)s[i*4+a]=this._H[i]>>>(3-a)*8;return s}}const wW=t=>new vW().digest(t),xW=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},kW=t=>Mz(xW(wW(Rz(t)))),Rf=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!el(e.ds,t.id),CW=[{light:"#ecd44433",dark:"#ecd444"}],SW=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=_i();t.forEach(o=>r.add(o)),e=e.filter(o=>!r.has(o))}t.set(n,iz(e))}return t.get(n)},TW=(t,{colors:e=CW,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:s}={})=>{let i=!1;const a=new MW(t,s),l=new me({props:{editable:c=>{const d=Ee.getState(c);return d.snapshot==null&&d.prevSnapshot==null}},key:Ee,state:{init:(c,d)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,d)=>{const u=c.getMeta(Ee);if(u!==void 0){d=Object.assign({},d);for(const h in u)d[h]=u[h]}return d.addToHistory=c.getMeta("addToHistory")!==!1,d.isChangeOrigin=u!==void 0&&!!u.isChangeOrigin,d.isUndoRedoOperation=u!==void 0&&!!u.isChangeOrigin&&!!u.isUndoRedoOperation,a.prosemirrorView!==null&&u!==void 0&&(u.snapshot!=null||u.prevSnapshot!=null)&&I1(0,()=>{a.prosemirrorView!=null&&(u.restore==null?a._renderSnapshot(u.snapshot,u.prevSnapshot,d):(a._renderSnapshot(u.snapshot,u.snapshot,d),delete d.restore,delete d.snapshot,delete d.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),d}},view:c=>(a.initView(c),s==null&&a._forceRerender(),o(),{update:()=>{const d=l.getState(c.state);if(d.snapshot==null&&d.prevSnapshot==null&&(i||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(i=!0,d.addToHistory===!1&&!d.isChangeOrigin){const u=Ir.getState(c.state),h=u&&u.undoManager;h&&h.stopCapturing()}a.mux(()=>{d.doc.transact(u=>{u.meta.set("addToHistory",d.addToHistory),a._prosemirrorChanged(c.state.doc)},Ee)})}},destroy:()=>{a.destroy()}})});return l},EW=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new un(t.doc));else if(e.type==="node"){const r=vi(n.doc,n.type,e.anchor,n.mapping);t.setSelection(q.create(t.doc,r))}else{const r=vi(n.doc,n.type,e.anchor,n.mapping),o=vi(n.doc,n.type,e.head,n.mapping);r!==null&&o!==null&&t.setSelection(U.between(t.doc.resolve(r),t.doc.resolve(o)))}},_f=(t,e)=>({type:e.selection.jsonID,anchor:Xc(e.selection.anchor,t.type,t.mapping),head:Xc(e.selection.head,t.type,t.mapping)});class MW{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=lW(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=_f(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(e_&&this._domSelectionInView===null&&(I1(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),s=Pz.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||s.clientWidth||0)&&o.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,n){n||(n=g_(c_(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Ee,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>gh(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(_.from(e),0,0));n.setMeta(Ee,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>gh(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(_.from(n),0,0));if(e){const o=Mo(fr(e.anchor,0),r.doc.content.size),s=Mo(fr(e.head,0),r.doc.content.size);r.setSelection(U.create(r.doc,o,s))}this.prosemirrorView.dispatch(r.setMeta(Ee,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let o=this.doc,s=this.type;if(e||(e=Sg(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&Tn(),o=new Bs({gc:!1}),kf(o,n),n=Sg(o),kf(o,e),e=Sg(o),s._item===null){const i=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);s=o.getXmlFragment(i)}else{const i=o.store.clients.get(s._item.id.client)??[],a=Kn(i,s._item.id.clock);s=i[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(i=>{const a=r.permanentUserData;a&&a.dss.forEach(u=>{Ms(i,u,h=>{})});const l=(u,h)=>{const f=u==="added"?a.getUserByClientId(h.client):a.getUserByDeletedId(h);return{user:f,type:u,color:SW(r.colorMapping,r.colors,f)}},c=M_(s,new V1(n.ds,e.sv)).map(u=>!u._item.deleted||Rf(u._item,e)||Rf(u._item,n)?gh(u,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(u=>u!==null),d=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(_.from(c),0,0));this.prosemirrorView.dispatch(d.setMeta(Ee,{isChangeOrigin:!0}))},Ee)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=Ee.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);Ms(n,n.deleteSet,a=>{if(a.constructor===Ae){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const s=this.type.toArray().map(a=>U_(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let i=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(_.from(s),0,0));EW(i,this.beforeTransactionSelection,this),i=i.setMeta(Ee,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof x_}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&i.scrollIntoView(),this.prosemirrorView.dispatch(i)})}_prosemirrorChanged(e){this.doc.transact(()=>{Mb(this.doc,this.type,e,this),this.beforeTransactionSelection=_f(this,this.prosemirrorView.state)},Ee)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const U_=(t,e,n,r,o,s)=>{const i=n.mapping.get(t);if(i===void 0){if(t instanceof Gt)return gh(t,e,n,r,o,s);throw lr()}return i},gh=(t,e,n,r,o,s)=>{const i=[],a=l=>{var c,d;if(l instanceof Gt){const u=U_(l,e,n,r,o,s);u!==null&&i.push(u)}else{const u=(d=(c=l._item.right)==null?void 0:c.content)==null?void 0:d.type;u instanceof As&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(l.applyDelta([{retain:l.length},...u.toDelta()]),u.doc.transact(f=>{u._item.delete(f)}));const h=AW(l,e,n,r,o,s);h!==null&&h.forEach(f=>{f!==null&&i.push(f)})}};r===void 0||o===void 0?t.toArray().forEach(a):M_(t,new V1(o.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(Rf(t._item,r)?Rf(t._item,o)||(l.ychange=s?s("added",t._item.id):{type:"added"}):l.ychange=s?s("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,l,i);return n.mapping.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},Ee),n.mapping.delete(t),null}},AW=(t,e,n,r,o,s)=>{const i=[],a=t.toDelta(r,o,s);try{for(let l=0;l<a.length;l++){const c=a[l];i.push(e.text(c.insert,NW(c.attributes,e)))}}catch{return t.doc.transact(c=>{t._item.delete(c)},Ee),null}return i},RW=(t,e)=>{const n=new Cn,r=t.map(o=>({insert:o.text,attributes:q_(o.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},_W=(t,e)=>{const n=new Gt(t.type.name);for(const r in t.attrs){const o=t.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,jp(t).map(r=>Eb(r,e))),e.mapping.set(n,t),n},Eb=(t,e)=>t instanceof Array?RW(t,e):_W(t,e),nS=t=>typeof t=="object"&&t!==null,K1=(t,e)=>{const n=Object.keys(t).filter(o=>t[o]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(o=>e[o]!==null).length);for(let o=0;o<n.length&&r;o++){const s=n[o],i=t[s],a=e[s];r=s==="ychange"||i===a||nS(i)&&nS(a)&&K1(i,a)}return r},jp=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.isText){const s=[];for(let i=e[r];r<e.length&&i.isText;i=e[++r])s.push(i);r--,n.push(s)}else n.push(o)}return n},W_=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,o)=>r.insert===e[o].text&&JR(r.attributes||{}).length===e[o].marks.length&&ZR(r.attributes,(s,i)=>{var c;const a=G_(i),l=e[o].marks;return K1(s,(c=l.find(d=>d.type.name===a))==null?void 0:c.attrs)}))},Zc=(t,e)=>{if(t instanceof Gt&&!(e instanceof Array)&&Ab(t,e)){const n=jp(e);return t._length===n.length&&K1(t.getAttributes(),e.attrs)&&t.toArray().every((r,o)=>Zc(r,n[o]))}return t instanceof Cn&&e instanceof Array&&W_(t,e)},Pf=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),rS=(t,e,n)=>{const r=t.toArray(),o=jp(e),s=o.length,i=r.length,a=Mo(i,s);let l=0,c=0,d=!1;for(;l<a;l++){const u=r[l],h=o[l];if(Pf(n.mapping.get(u),h))d=!0;else if(!Zc(u,h))break}for(;l+c<a;c++){const u=r[i-c-1],h=o[s-c-1];if(Pf(n.mapping.get(u),h))d=!0;else if(!Zc(u,h))break}return{equalityFactor:l+c,foundMappedChild:d}},PW=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof pr?e+=n.content.str:n.content instanceof at&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},DW=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:o}=PW(t),s=e.map(c=>({insert:c.text,attributes:Object.assign({},r,q_(c.marks,n))})),{insert:i,remove:a,index:l}=hW(o,s.map(c=>c.insert).join(""));t.delete(l,a),t.insert(l,i),t.applyDelta(s.map(c=>({retain:c.insert.length,attributes:c.attributes})))},IW=/(.*)(--[a-zA-Z0-9+/=]{8})$/,G_=t=>{var e;return((e=IW.exec(t))==null?void 0:e[1])??t},NW=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(G_(r),t[r]));return n},q_=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const o=eo(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${kW(r.toJSON())}`:r.type.name]=r.attrs}}),n},Mb=(t,e,n,r)=>{if(e instanceof Gt&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Gt){const u=e.getAttributes(),h=n.attrs;for(const f in h)h[f]!==null?u[f]!==h[f]&&f!=="ychange"&&e.setAttribute(f,h[f]):e.removeAttribute(f);for(const f in u)h[f]===void 0&&e.removeAttribute(f)}const o=jp(n),s=o.length,i=e.toArray(),a=i.length,l=Mo(s,a);let c=0,d=0;for(;c<l;c++){const u=i[c],h=o[c];if(!Pf(r.mapping.get(u),h))if(Zc(u,h))r.mapping.set(u,h);else break}for(;d+c+1<l;d++){const u=i[a-d-1],h=o[s-d-1];if(!Pf(r.mapping.get(u),h))if(Zc(u,h))r.mapping.set(u,h);else break}t.transact(()=>{for(;a-c-d>0&&s-c-d>0;){const h=i[c],f=o[c],p=i[a-d-1],g=o[s-d-1];if(h instanceof Cn&&f instanceof Array)W_(h,f)||DW(h,f,r),c+=1;else{let b=h instanceof Gt&&Ab(h,f),v=p instanceof Gt&&Ab(p,g);if(b&&v){const x=rS(h,f,r),w=rS(p,g,r);x.foundMappedChild&&!w.foundMappedChild?v=!1:!x.foundMappedChild&&w.foundMappedChild||x.equalityFactor<w.equalityFactor?b=!1:v=!1}b?(Mb(t,h,f,r),c+=1):v?(Mb(t,p,g,r),d+=1):(r.mapping.delete(e.get(c)),e.delete(c,1),e.insert(c,[Eb(f,r)]),c+=1)}}const u=a-c-d;if(a===1&&s===0&&i[0]instanceof Cn?(r.mapping.delete(i[0]),i[0].delete(0,i[0].length)):u>0&&(e.slice(c,c+u).forEach(h=>r.mapping.delete(h)),e.delete(c,u)),c+d<s){const h=[];for(let f=c;f<s-d;f++)h.push(Eb(o[f],r));e.insert(c,h)}},Ee)},Ab=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let fc=null;const OW=()=>{const t=fc;fc=null,t.forEach((e,n)=>{const r=n.state.tr,o=Ee.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((s,i)=>{r.setMeta(i,s)}),n.dispatch(r))})},LW=(t,e,n)=>{fc||(fc=new Map,I1(0,OW)),eo(fc,t,Gn).set(e,n)},Xc=(t,e,n)=>{if(t===0)return Cg(e,0,-1);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof Cn){if(r._length>=t)return Cg(r,t,-1);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<o)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&o>1)return new qc(r._item===null?null:r._item.id,r._item===null?Wc(r):null,null);if(t-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new qc(r._item===null?null:r._item.id,r._item===null?Wc(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw Tn();if(t===0&&r.constructor!==Cn&&r!==e)return jW(r._item.parent,r._item)}return Cg(e,e._length,-1)},jW=(t,e)=>{let n=null,r=null;return t._item===null?r=Wc(t):n=de(t._item.id.client,t._item.id.clock),new qc(n,r,e.id)},vi=(t,e,n,r)=>{const o=aU(n,t);if(o===null||o.type!==e&&!Gc(e,o.type._item))return null;let s=o.type,i=0;if(s.constructor===Cn)i=o.index;else if(s._item===null||!s._item.deleted){let a=s._first,l=0;for(;l<s._length&&l<o.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof Cn?i+=c._length:i+=r.get(c).nodeSize}a=a.right}i+=1}for(;s!==e&&s._item!==null;){const a=s._item.parent;if(a._item===null||!a._item.deleted){i+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===s)break;l.deleted||(c instanceof Cn?i+=c._length:i+=r.get(c).nodeSize),l=l.right}}s=a}return i-1},BW=(t,e,n)=>t!==e,VW=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("â "),o=document.createTextNode("â ");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(o,null),e},K_=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),$W=/^#[0-9a-fA-F]{6}$/,oS=(t,e,n,r,o)=>{const s=Ee.getState(t),i=s.doc,a=[];return s.snapshot!=null||s.prevSnapshot!=null||s.binding.mapping.size===0?be.create(t.doc,[]):(e.getStates().forEach((l,c)=>{if(n(i.clientID,c,l)&&l.cursor!=null){const d=l.user||{};d.color==null?d.color="#ffa500":$W.test(d.color)||console.warn("A user uses an unsupported color format",d),d.name==null&&(d.name=`User: ${c}`);let u=vi(i,s.type,hc(l.cursor.anchor),s.binding.mapping),h=vi(i,s.type,hc(l.cursor.head),s.binding.mapping);if(u!==null&&h!==null){const f=fr(t.doc.content.size-1,0);u=Mo(u,f),h=Mo(h,f),a.push(Re.widget(h,()=>r(d,c),{key:c+"",side:10}));const p=Mo(u,h),g=fr(u,h);a.push(Re.inline(p,g,o(d,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),be.create(t.doc,a))},HW=(t,{awarenessStateFilter:e=BW,cursorBuilder:n=VW,selectionBuilder:r=K_,getSelection:o=i=>i.selection}={},s="cursor")=>new me({key:Kl,state:{init(i,a){return oS(a,t,e,n,r)},apply(i,a,l,c){const d=Ee.getState(c),u=i.getMeta(Kl);return d&&d.isChangeOrigin||u&&u.awarenessUpdated?oS(c,t,e,n,r):a.map(i.mapping,i.doc)}},props:{decorations:i=>Kl.getState(i)},view:i=>{const a=()=>{i.docView&&LW(i,Kl,{awarenessUpdated:!0})},l=()=>{const c=Ee.getState(i.state),d=t.getLocalState()||{};if(i.hasFocus()){const u=o(i.state),h=Xc(u.anchor,c.type,c.binding.mapping),f=Xc(u.head,c.type,c.binding.mapping);(d.cursor==null||!WC(hc(d.cursor.anchor),h)||!WC(hc(d.cursor.head),f))&&t.setLocalStateField(s,{anchor:h,head:f})}else d.cursor!=null&&vi(c.doc,c.type,hc(d.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(s,null)};return t.on("change",a),i.dom.addEventListener("focusin",l),i.dom.addEventListener("focusout",l),{update:l,destroy:()=>{i.dom.removeEventListener("focusin",l),i.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(s,null)}}}}),FW=t=>{var e,n;return((n=(e=Ir.getState(t))==null?void 0:e.undoManager)==null?void 0:n.undo())!=null},zW=t=>{var e,n;return((n=(e=Ir.getState(t))==null?void 0:e.undoManager)==null?void 0:n.redo())!=null},UW=(t,e)=>{var n,r;return e==null?(r=(n=Ir.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canUndo():FW(t)},WW=(t,e)=>{var n,r;return e==null?(r=(n=Ir.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canRedo():zW(t)},GW=new Set(["paragraph"]),qW=(t,e)=>!(t instanceof Ae)||!(t.content instanceof wr)||!(t.content.type instanceof As||t.content.type instanceof Gt&&e.has(t.content.type.nodeName))||t.content.type._length===0,KW=({protectedNodes:t=GW,trackedOrigins:e=[],undoManager:n=null}={})=>new me({key:Ir,state:{init:(r,o)=>{const s=Ee.getState(o),i=n||new x_(s.type,{trackedOrigins:new Set([Ee].concat(e)),deleteFilter:a=>qW(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:(r,o,s,i)=>{const a=Ee.getState(i).binding,l=o.undoManager,c=l.undoStack.length>0,d=l.redoStack.length>0;return a?{undoManager:l,prevSel:_f(a,s),hasUndoOps:c,hasRedoOps:d}:c!==o.hasUndoOps||d!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=Ee.getState(r.state),s=Ir.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:i})=>{const a=o.binding;a&&i.meta.set(a,Ir.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:i})=>{const a=o.binding;a&&(a.beforeTransactionSelection=i.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}});function YW(t={}){return new me({view(e){return new JW(e,t)}})}class JW{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,s=o.getBoundingClientRect(),i=s.width/o.offsetWidth,a=s.height/o.offsetHeight;if(n){let u=e.nodeBefore,h=e.nodeAfter;if(u||h){let f=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=u?p.bottom:p.top;u&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;r={left:p.left,right:p.right,top:g-b,bottom:g+b}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*i;r={left:u.left-h,right:u.left+h,top:u.top,bottom:u.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let u=l.getBoundingClientRect(),h=u.width/l.offsetWidth,f=u.height/l.offsetHeight;c=u.left-l.scrollLeft*h,d=u.top-l.scrollTop*f}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=XM(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const ZW={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var XW=Object.defineProperty,QW=(t,e,n)=>e in t?XW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A=(t,e,n)=>QW(t,typeof e!="symbol"?e+"":e,n);function eG(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function tG(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return eG(e)}const Bp=Ne.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return wR()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new me({key:new Te("uniqueID"),appendTransaction:(n,r,o)=>{const s=n.some(f=>f.docChanged)&&!r.doc.eq(o.doc),i=this.options.filterTransaction&&n.some(f=>{let p,g;return!(!((g=(p=this.options).filterTransaction)===null||g===void 0)&&g.call(p,f))});if(!s||i)return;const{tr:a}=o,{types:l,attributeName:c,generateID:d}=this.options,u=d1(r.doc,n),{mapping:h}=u;if(u1(u).forEach(({newRange:f})=>{const p=Uh(o.doc,f,v=>l.includes(v.type.name)),g=p.map(({node:v})=>v.attrs[c]).filter(v=>v!==null),b=tG(g);p.forEach(({node:v,pos:x})=>{let w;const k=(w=a.doc.nodeAt(x))===null||w===void 0?void 0:w.attrs[c];if(k===null){const S=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(S)===null){const T=JSON.parse(JSON.stringify(o.doc.toJSON()));if(T.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(T.content)===JSON.stringify(S.toJSON())){a.setNodeMarkup(x,void 0,{...v.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(x,void 0,{...v.attrs,[c]:d()});return}const{deleted:C}=h.invert().mapResult(x);C&&b.includes(k)&&a.setNodeMarkup(x,void 0,{...v.attrs,[c]:d()})})}),!!a.steps.length)return a},view(n){const r=o=>{let s;t=!((s=n.dom.parentElement)===null||s===void 0)&&s.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return t!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:o}=this.options,s=i=>{const a=[];return i.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(s(l.content)));return}const c=l.type.create({...l.attrs,[o]:null},s(l.content),l.marks);a.push(c)}),_.from(a)};return e=!1,new j(s(n.content),n.openStart,n.openEnd)}}})]}});function sS(t){return t.type==="link"}function Y_(t){return typeof t!="string"&&t.type==="link"}function Oi(t){return typeof t!="string"&&t.type==="text"}function Rs(t){var e,n,r,o,s;return _s(t)?{...t}:Qc(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((o=t.props)==null?void 0:o.colspan)??1,rowspan:((s=t.props)==null?void 0:s.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function Qc(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function _s(t){return Qc(t)&&t.props!==void 0&&t.content!==void 0}function Li(t){return _s(t)?t.props.colspan??1:1}function ed(t){return _s(t)?t.props.rowspan??1:1}class zr extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function he(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}const nG=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function jn(t,e="Ctrl"){return nG()?t.replace("Mod","âŒ˜"):t.replace("Mod",e)}function Be(...t){return t.filter(e=>e).join(" ")}const Rb=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Ur(t,e,n,r){const o=document.createElement("div");o.className=Be("bn-block-content",n.class),o.setAttribute("data-content-type",t);for(const[i,a]of Object.entries(n))i!=="class"&&o.setAttribute(i,a);const s=document.createElement(e);s.className=Be("bn-inline-content",r.class);for(const[i,a]of Object.entries(r))i!=="class"&&s.setAttribute(i,a);return o.appendChild(s),{dom:o,contentDOM:s}}const iS=(t,e)=>{let n=Fi(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},it={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},Y1=["backgroundColor","textColor"];function Df(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function aS(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function Ld(t){const e={};return Object.entries(t).filter(([n,r])=>!Y1.includes(n)).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const s=o.getAttribute(Df(n));if(s===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return s==="true"?!0:s==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const i=parseFloat(s);return!Number.isNaN(i)&&Number.isFinite(i)?i:null}return s},renderHTML:o=>o[n]!==r.default?{[Df(n)]:o[n]}:{}}}),e}function J_(t,e,n,r){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=t(),s=n.state.doc.resolve(o).node().attrs.id;if(!s)throw new Error("Block doesn't have id");const i=e.getBlock(s);if(i.type!==r)throw new Error("Block type does not match");return i}function Yl(t,e,n,r,o=!1,s){const i=document.createElement("div");if(s!==void 0)for(const[a,l]of Object.entries(s))a!=="class"&&i.setAttribute(a,l);i.className=Be("bn-block-content",(s==null?void 0:s.class)||""),i.setAttribute("data-content-type",e);for(const[a,l]of Object.entries(n)){const c=r[a].default;!Y1.includes(a)&&l!==c&&i.setAttribute(Df(a),l)}return o&&i.setAttribute("data-file-block",""),i.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=Be("bn-inline-content",t.contentDOM.className)),{...t,dom:i}}function Yn(t){return Zr.create(t)}function J1(t,e){return{config:t,implementation:e}}function jo(t,e,n){return J1({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:n,toInternalHTML:iS,toExternalHTML:iS})}function Z_(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function X_(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function Q_(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=e==null?void 0:e(r);return o===void 0?!1:o}}),n}function jd(t,e){const n=Yn({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return Ld(t.propSchema)},parseHTML(){return Q_(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Yl({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const s=this.options.editor,i=J_(r,s,this.editor,t.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=e.render(i,s),c=Yl(l,i.type,i.props,t.propSchema,a);return t.isSelectable===!1&&X_(c,this.editor),c}}});if(n.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return J1(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render(r,o);return Yl(a,r.type,r.props,t.propSchema,t.isFileBlock,i)},toExternalHTML:(r,o)=>{var s,i;const a=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{};let l=(i=e.toExternalHTML)==null?void 0:i.call(e,r,o);return l===void 0&&(l=e.render(r,o)),Yl(l,r.type,r.props,t.propSchema,a)}})}function Po(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const s=[];t.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&s.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const i=t.resolve(s.find(a=>a>=e)||s[s.length-1]);return{posBeforeNode:i.pos,node:i.nodeAfter}}function Z1(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,o=r+n.nodeSize,s={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let i,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const d=l,u=r+c+1,h=u+l.nodeSize;i={node:d,beforePos:u,afterPos:h}}else if(l.type.name==="blockGroup"){const d=l,u=r+c+1,h=u+l.nodeSize;a={node:d,beforePos:u,afterPos:h}}}),!i)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:s,blockContent:i,childContainer:a,blockNoteType:i.node.type.name}}else{if(!s.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${s.node}`);return{isBlockContainer:!1,bnBlock:s,childContainer:s,blockNoteType:s.node.type.name}}}function Ps(t){return Z1(t.node,t.posBeforeNode)}function Bd(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return Z1(t.nodeAfter,t.pos)}function Le(t){const e=Po(t.doc,t.selection.anchor);return Ps(e)}function Vp(t){const e=Po(t.doc,t.selection.anchor);return Ps(e)}function gt(t){return"doc"in t?t.doc.type.schema:t.type.schema}function eP(t){return t.cached.blockNoteEditor}function Vd(t){return eP(t).schema}function X1(t){return Vd(t).blockSchema}function Q1(t){return Vd(t).inlineContentSchema}function rl(t){return Vd(t).styleSchema}function ev(t){return eP(t).blockCache}function tP(t,e,n){var r,o;const s={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},i=[];t.content.forEach((a,l,c)=>{const d={cells:[]};c===0&&a.content.forEach(u=>{let h=u.attrs.colwidth;h==null&&(h=new Array(u.attrs.colspan??1).fill(void 0)),s.columnWidths.push(...h)}),d.cells=a.content.content.map((u,h)=>(i[c]||(i[c]=[]),i[c][h]=u.type.name==="tableHeader",{type:"tableCell",content:u.content.content.map(f=>$p(f,e,n)).reduce((f,p)=>{if(!f.length)return p;const g=f[f.length-1],b=p[0];return b&&Oi(g)&&Oi(b)&&JSON.stringify(g.styles)===JSON.stringify(b.styles)?(g.text+=`
`+b.text,f.push(...p.slice(1)),f):(f.push(...p),f)},[]),props:{colspan:u.attrs.colspan,rowspan:u.attrs.rowspan,backgroundColor:u.attrs.backgroundColor,textColor:u.attrs.textColor,textAlignment:u.attrs.textAlignment}})),s.rows.push(d)});for(let a=0;a<i.length;a++)(r=i[a])!=null&&r.every(l=>l)&&(s.headerRows=(s.headerRows??0)+1);for(let a=0;a<((o=i[0])==null?void 0:o.length);a++)i!=null&&i.every(l=>l[a])&&(s.headerCols=(s.headerCols??0)+1);return s}function $p(t,e,n){const r=[];let o;return t.content.forEach(s=>{if(s.type.name==="hardBreak"){if(o)if(Oi(o))o.text+=`
`;else if(sS(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(s.type.name!=="link"&&s.type.name!=="text"){if(!e[s.type.name]){console.warn("unrecognized inline content type",s.type.name);return}o&&(r.push(o),o=void 0),r.push(rG(s,e,n));return}const i={};let a;for(const l of s.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(c.propSchema==="boolean")i[c.type]=!0;else if(c.propSchema==="string")i[c.type]=l.attrs.stringValue;else throw new zr(c.propSchema)}o?Oi(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):JSON.stringify(o.styles)===JSON.stringify(i)?o.text+=s.textContent:(r.push(o),o={type:"text",text:s.textContent,styles:i}):sS(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(i)?o.content[o.content.length-1].text+=s.textContent:o.content.push({type:"text",text:s.textContent,styles:i}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):(r.push(o),o={type:"text",text:s.textContent,styles:i})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}:o={type:"text",text:s.textContent,styles:i}}),o&&r.push(o),r}function rG(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},o=e[t.type.name];for(const[i,a]of Object.entries(t.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=o.propSchema;i in l&&(r[i]=a)}let s;return o.content==="styled"?s=$p(t,e,n):s=void 0,{type:t.type.name,props:r,content:s}}function Ue(t,e,n=X1(e),r=Q1(e),o=rl(e),s=ev(e)){var i;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const a=s==null?void 0:s.get(t);if(a)return a;const l=Z1(t,0);let c=l.bnBlock.node.attrs.id;c===null&&(c=Bp.options.generateID());const d=n[l.blockNoteType];if(!d)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const u={};for(const[b,v]of Object.entries({...t.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const x=d.propSchema;b in x&&!(x[b].default===void 0&&v===void 0)&&(u[b]=v)}const h=n[l.blockNoteType],f=[];(i=l.childContainer)==null||i.node.forEach(b=>{f.push(Ue(b,e,n,r,o,s))});let p;if(h.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");p=$p(l.blockContent.node,r,o)}else if(h.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");p=tP(l.blockContent.node,r,o)}else if(h.content==="none")p=void 0;else throw new zr(h.content);const g={id:c,type:h.type,props:u,content:p,children:f};return s==null||s.set(t,g),g}function oG(t,e,n=X1(e),r=Q1(e),o=rl(e),s=ev(e)){const i=[];return t.firstChild.descendants(a=>(i.push(Ue(a,e,n,r,o,s)),!1)),i}function sG(t,e,n=X1(e),r=Q1(e),o=rl(e),s=ev(e)){function i(a,l,c){if(a.type.name!=="blockGroup")throw new Error("unexpected");const d=[];let u,h;return a.forEach((f,p,g)=>{if(f.type.name!=="blockContainer")throw new Error("unexpected");if(f.childCount===0)return;if(f.childCount===0||f.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+f.childCount);const b=g===0,v=g===a.childCount-1;if(f.firstChild.type.name==="blockGroup"){if(!b)throw new Error("unexpected");const C=i(f.firstChild,Math.max(0,l-1),v?Math.max(0,c-1):0);u=C.blockCutAtStart,v&&(h=C.blockCutAtEnd),d.push(...C.blocks);return}const x=Ue(f,e,n,r,o,s),w=f.childCount>1?f.child(1):void 0;let k=[];if(w){const C=i(w,0,v?Math.max(0,c-1):0);k=C.blocks,v&&(h=C.blockCutAtEnd)}v&&!w&&c>1&&(h=x.id),b&&l>1&&(u=x.id),d.push({...x,children:k})}),{blocks:d,blockCutAtStart:u,blockCutAtEnd:h}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return i(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function nP(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function iG(t,e){return{config:t,implementation:e}}function ri(t,e){return iG({type:t.name,propSchema:e},{mark:t})}function rP(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function Vs(t){const{height:e,width:n}=tv(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),o=(s,i)=>{for(let a=s;a<e;a++)for(let l=i;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let s=0;s<t.content.rows.length;s++)for(let i=0;i<t.content.rows[s].cells.length;i++){const a=Rs(t.content.rows[s].cells[i]),l=ed(a),c=Li(a),{row:d,col:u}=o(s,i);for(let h=d;h<d+l;h++)for(let f=u;f<u+c;f++){if(r[h][f])throw new Error(`Unable to create occupancy grid for table, cell at ${h},${f} is already occupied`);r[h][f]={row:s,col:i,rowspan:l,colspan:c,cell:a}}}return r}function td(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function ji(t,e,n=Vs(e)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const s=n[r][o];if(s.row===t.row&&s.col===t.col)return{row:r,col:o,cell:s.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function tv(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let o=0;r.cells.forEach(s=>{o+=Li(s)}),n=Math.max(n,o)}),{height:e,width:n}}function oP(t,e,n=Vs(e)){var r;const o=(r=n[t.row])==null?void 0:r[t.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function _b(t,e){var n;const r=Vs(t);if(e<0||e>=r.length)return[];let o=0;for(let i=0;i<e;i++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const s=new Array(r[0].length).fill(!1).map((i,a)=>oP({row:o,col:a},t,r)).filter(i=>i!==void 0);return s.filter((i,a)=>s.findIndex(l=>l.row===i.row&&l.col===i.col)===a)}function Pb(t,e){var n;const r=Vs(t);if(e<0||e>=r[0].length)return[];let o=0;for(let i=0;i<e;i++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const s=new Array(r.length).fill(!1).map((i,a)=>oP({row:a,col:o},t,r)).filter(i=>i!==void 0);return s.filter((i,a)=>s.findIndex(l=>l.row===i.row&&l.col===i.col)===a)}function aG(t,e,n,r=Vs(t)){const{col:o}=ji({row:0,col:e},t,r),{col:s}=ji({row:0,col:n},t,r);return r.forEach(i=>{const[a]=i.splice(o,1);i.splice(s,0,a)}),td(r)}function lG(t,e,n,r=Vs(t)){const{row:o}=ji({row:e,col:0},t,r),{row:s}=ji({row:n,col:0},t,r),[i]=r.splice(o,1);return r.splice(s,0,i),td(r)}function Db(t){return t?Qc(t)?Db(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:Oi(e)?e.text.length===0:Y_(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function cG(t,e,n=Vs(t)){if(e==="columns"){let s=0;for(let i=n[0].length-1;i>=0&&n.every(a=>Db(a[i].cell)&&a[i].colspan===1);i--)s++;for(let i=n.length-1;i>=0;i--){const a=Math.max(n[i].length-s,1);n[i]=n[i].slice(0,a)}return td(n)}let r=0;for(let s=n.length-1;s>=0&&n[s].every(i=>Db(i.cell)&&i.rowspan===1);s--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),td(n)}function dG(t,e,n,r=Vs(t)){const{width:o,height:s}=tv(t);if(e==="columns")r.forEach((i,a)=>{if(n>=0)for(let l=0;l<n;l++)i.push({row:a,col:Math.max(...i.map(c=>c.col))+1,rowspan:1,colspan:1,cell:Rs("")});else i.splice(o+n,-1*n)});else if(n>0)for(let i=0;i<n;i++){const a=new Array(o).fill(null).map((l,c)=>({row:s+i,col:c,rowspan:1,colspan:1,cell:Rs("")}));r.push(a)}else n<0&&r.splice(s+n,-1*n);return td(r)}function sP(t,e,n){const r=_b(t,n);if(!r.some(i=>ed(i.cell)>1))return!0;let o=n,s=n;return r.forEach(i=>{const a=ed(i.cell);o=Math.max(o,i.row+a-1),s=Math.min(s,i.row)}),e<n?n===o:n===s}function iP(t,e,n){const r=Pb(t,n);if(!r.some(i=>Li(i.cell)>1))return!0;let o=n,s=n;return r.forEach(i=>{const a=Li(i.cell);o=Math.max(o,i.col+a-1),s=Math.min(s,i.col)}),e<n?n===o:n===s}function uG(t,e,n){const r=ji(t,n),o=ji(e,n);return r.col===o.col}function lS(t,e,n,r){const o=[];for(const[s,i]of Object.entries(t.styles||{})){const a=n[s];if(!a)throw new Error(`style ${s} not found in styleSchema`);if(a.propSchema==="boolean")o.push(e.mark(s));else if(a.propSchema==="string")o.push(e.mark(s,{stringValue:i}));else throw new zr(a.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(s=>s.length>0).map(s=>s===`
`?e.nodes.hardBreak.createChecked():e.text(s,o)):t.text.length>0?[e.text(t.text,o)]:[]}function hG(t,e,n){const r=e.marks.link.create({href:t.href});return Ib(t.content,e,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function Ib(t,e,n,r){const o=[];if(typeof t=="string")return o.push(...lS({text:t,styles:{}},e,n,r)),o;for(const s of t)o.push(...lS(s,e,n,r));return o}function mr(t,e,n,r=rl(e)){const o=[];for(const s of t)typeof s=="string"?o.push(...Ib(s,e,r,n)):Y_(s)?o.push(...hG(s,e,r)):Oi(s)?o.push(...Ib([s],e,r,n)):o.push(aP(s,e,r));return o}function Hp(t,e,n=rl(e)){const r=[],o=new Array(t.headerRows??0).fill(!0),s=new Array(t.headerCols??0).fill(!0),i=t.columnWidths??[];for(let a=0;a<t.rows.length;a++){const l=t.rows[a],c=[],d=o[a];for(let h=0;h<l.cells.length;h++){const f=l.cells[h],p=s[h],g=void 0;let b=null;const v=ji({row:a,col:h},{content:t});let x=i[v.col]?[i[v.col]]:null;if(f)if(typeof f=="string")b=e.text(f);else if(Qc(f)){f.content&&(b=mr(f.content,e,"tableParagraph",n));const k=Li(f);k>1&&(x=new Array(k).fill(!1).map((C,S)=>i[v.col+S]??void 0))}else b=mr(f,e,"tableParagraph",n);const w=e.nodes[p||d?"tableHeader":"tableCell"].createChecked({...Qc(f)?f.props:{},colwidth:x},e.nodes.tableParagraph.createChecked(g,b));c.push(w)}const u=e.nodes.tableRow.createChecked({},c);r.push(u)}return r}function aP(t,e,n){let r,o=t.type;if(o===void 0&&(o="paragraph"),!e.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!t.content)r=e.nodes[o].createChecked(t.props);else if(typeof t.content=="string"){const s=mr([t.content],e,o,n);r=e.nodes[o].createChecked(t.props,s)}else if(Array.isArray(t.content)){const s=mr(t.content,e,o,n);r=e.nodes[o].createChecked(t.props,s)}else if(t.content.type==="tableContent"){const s=Hp(t.content,e,n);r=e.nodes[o].createChecked(t.props,s)}else throw new zr(t.content.type);return r}function Fi(t,e,n=rl(e)){let r=t.id;r===void 0&&(r=Bp.options.generateID());const o=[];if(t.children)for(const s of t.children)o.push(Fi(s,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const s=aP(t,e,n),i=o.length>0?e.nodes.blockGroup.createChecked({},o):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},i?[s,i]:s)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},o);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function En(t,e){let n,r;if(e.firstChild.descendants((o,s)=>n?!1:!Nb(o)||o.attrs.id!==t?!0:(n=o,r=s+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function Nb(t){return t.type.isInGroup("bnBlock")}function fG(t,e){return t.id!==e.id||t.type!==e.type||JSON.stringify(t.props)!==JSON.stringify(e.props)||JSON.stringify(t.content)!==JSON.stringify(e.content)}function pG(t,e=[]){let n={type:"local"};t.getMeta("paste")?n={type:"paste"}:t.getMeta("uiEvent")==="drop"?n={type:"drop"}:t.getMeta("history$")?n={type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")&&(t.getMeta("y-sync$").isUndoRedoOperation?n={type:"undo-redo"}:n={type:"yjs-remote"});const r=gt(t),o=d1(t.before,[t,...e]),s=u1(o),i=s.flatMap(u=>Uh(o.before,u.oldRange,Nb)).map(({node:u})=>Ue(u,r)),a=s.flatMap(u=>Uh(o.doc,u.newRange,Nb)).map(({node:u})=>Ue(u,r)),l=new Map(a.map(u=>[u.id,u])),c=new Map(i.map(u=>[u.id,u])),d=[];for(const[u,h]of l)c.has(u)||d.push({type:"insert",block:h,source:n,prevBlock:void 0});for(const[u,h]of c)l.has(u)||d.push({type:"delete",block:h,source:n,prevBlock:void 0});for(const[u,h]of l)if(c.has(u)){const f=c.get(u);fG(f,h)&&d.push({type:"update",block:h,prevBlock:f,source:n})}return d}function mG(t,e,n,r="before"){const o=typeof n=="string"?n:n.id,s=gt(t),i=e.map(c=>Fi(c,s)),a=En(o,t.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),t.step(new ot(l,l,new j(_.from(i),0,0))),i.map(c=>Ue(c,s))}function cS(t,e,n){const r=gt(t),o=n.map(c=>Fi(c,r)),s=new Set(e.map(c=>typeof c=="string"?c:c.id)),i=[],a=typeof e[0]=="string"?e[0]:e[0].id;let l=0;if(t.doc.descendants((c,d)=>{if(s.size===0)return!1;if(!c.type.isInGroup("bnBlock")||!s.has(c.attrs.id))return!0;if(i.push(Ue(c,r)),s.delete(c.attrs.id),n.length>0&&c.attrs.id===a){const p=t.doc.nodeSize;t.insert(d,o);const g=t.doc.nodeSize;l+=p-g}const u=t.doc.nodeSize,h=t.doc.resolve(d-l);h.node().type.name==="blockGroup"&&h.node(h.depth-1).type.name!=="doc"&&h.node().childCount===1?t.delete(h.before(),h.after()):t.delete(d-l,d-l+c.nodeSize);const f=t.doc.nodeSize;return l+=u-f,!1}),s.size>0){const c=[...s].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+c)}return{insertedBlocks:o.map(c=>Ue(c,r)),removedBlocks:i}}const Tt=(t,e)=>({tr:n,dispatch:r})=>(r&&lP(n,t,e),!0);function lP(t,e,n,r,o){const s=Bd(t.doc.resolve(e)),i=gt(t),a=i.nodes[s.blockNoteType],l=i.nodes[n.type||s.blockNoteType],c=l.isInGroup("bnBlock")?l:i.nodes.blockContainer;if(s.isBlockContainer&&l.isInGroup("blockContent"))dS(n,t,s),gG(n,t,a,l,s);else if(!s.isBlockContainer&&l.isInGroup("bnBlock"))dS(n,t,s);else{const d=Ue(s.bnBlock.node,i);t.replaceWith(s.bnBlock.beforePos,s.bnBlock.afterPos,Fi({children:d.children,...n},i));return}t.setNodeMarkup(s.bnBlock.beforePos,c,{...s.bnBlock.node.attrs,...n.props})}function gG(t,e,n,r,o,s,i){const a=gt(e);let l="keep";if(t.content)if(typeof t.content=="string")l=mr([t.content],a,r.name);else if(Array.isArray(t.content))l=mr(t.content,a,r.name);else if(t.content.type==="tableContent")l=Hp(t.content,a);else throw new zr(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);l==="keep"?e.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...t.props}):e.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...t.props},l))}function dS(t,e,n){const r=gt(e);if(t.children!==void 0&&t.children.length>0){const o=t.children.map(s=>Fi(s,r));if(n.childContainer)e.step(new ot(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new j(_.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function yG(t,e,n,r,o){const s=typeof e=="string"?e:e.id,i=En(s,t.doc);if(!i)throw new Error(`Block with ID ${s} not found`);lP(t,i.posBeforeNode,n);const a=t.doc.resolve(i.posBeforeNode+1).node(),l=gt(t);return Ue(a,l)}function cP(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function dP(t,e,n,r){let o;if(e)if(typeof e=="string")o=mr([e],t.pmSchema);else if(Array.isArray(e))o=mr(e,t.pmSchema);else if(e.type==="tableContent")o=Hp(e,t.pmSchema);else throw new zr(e.type);else throw new Error("blockContent is required");const s=n.serializeFragment(_.from(o),r);return s.nodeType===1&&cP(s),s}function bG(t,e,n,r,o,s,i){var a,l,c,d,u,h,f,p;const g=(i==null?void 0:i.document)??document,b=e.pmSchema.nodes.blockContainer;let v=n.props;if(!n.props){v={};for(const[T,E]of Object.entries(e.schema.blockSchema[n.type].propSchema))E.default!==void 0&&(v[T]=E.default)}const x=(l=(a=b.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,b.create({id:n.id,...v})),w=Array.from(x.dom.attributes),k=e.blockImplementations[n.type].implementation.toExternalHTML({...n,props:v},e),C=g.createDocumentFragment();if(k.dom.classList.contains("bn-block-content")){const T=[...w,...Array.from(k.dom.attributes)].filter(E=>E.name.startsWith("data")&&E.name!=="data-content-type"&&E.name!=="data-file-block"&&E.name!=="data-node-view-wrapper"&&E.name!=="data-node-type"&&E.name!=="data-id"&&E.name!=="data-index"&&E.name!=="data-editable");for(const E of T)k.dom.firstChild.setAttribute(E.name,E.value);cP(k.dom.firstChild),C.append(...Array.from(k.dom.childNodes))}else C.append(k.dom);if(k.contentDOM&&n.content){const T=dP(e,n.content,r,i);k.contentDOM.appendChild(T)}let S;if(o.has(n.type)?S="OL":s.has(n.type)&&(S="UL"),S){if(((c=t.lastChild)==null?void 0:c.nodeName)!==S){const E=g.createElement(S);S==="OL"&&v!=null&&v.start&&(v==null?void 0:v.start)!==1&&E.setAttribute("start",v.start+""),t.append(E)}const T=g.createElement("li");T.append(C),t.lastChild.appendChild(T)}else t.append(C);if(n.children&&n.children.length>0){const T=g.createDocumentFragment();if(uP(T,e,n.children,r,o,s,i),((d=t.lastChild)==null?void 0:d.nodeName)==="UL"||((u=t.lastChild)==null?void 0:u.nodeName)==="OL")for(;((h=T.firstChild)==null?void 0:h.nodeName)==="UL"||((f=T.firstChild)==null?void 0:f.nodeName)==="OL";)t.lastChild.lastChild.appendChild(T.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(T):(p=k.contentDOM)==null||p.append(T)}}const uP=(t,e,n,r,o,s,i)=>{for(const a of n)bG(t,e,a,r,o,s,i)},vG=(t,e,n,r,o,s)=>{const i=((s==null?void 0:s.document)??document).createDocumentFragment();return uP(i,t,e,n,r,o,s),i},Fp=(t,e)=>{const n=Oo.fromSchema(t);return{exportBlocks:(r,o)=>{const s=vG(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),i=document.createElement("div");return i.append(s),i.innerHTML},exportInlineContent:(r,o)=>{const s=dP(e,r,n,o),i=document.createElement("div");return i.append(s.cloneNode(!0)),i.innerHTML}}};function wG(t,e,n,r,o){let s;if(e)if(typeof e=="string")s=mr([e],t.pmSchema,r);else if(Array.isArray(e))s=mr(e,t.pmSchema,r);else if(e.type==="tableContent")s=Hp(e,t.pmSchema);else throw new zr(e.type);else throw new Error("blockContent is required");return n.serializeFragment(_.from(s),o)}function xG(t,e,n,r,o){var s,i,a,l,c;const d=t.pmSchema.nodes.blockContainer;let u=e.props;if(!e.props){u={};for(const[p,g]of Object.entries(t.schema.blockSchema[e.type].propSchema))g.default!==void 0&&(u[p]=g.default)}const h=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:u},t);if(e.type==="numberedListItem"&&h.dom.setAttribute("data-index",r.toString()),h.contentDOM&&e.content){const p=wG(t,e.content,n,e.type,o);h.contentDOM.appendChild(p)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const p=hP(t,e.children,n,o);(s=h.contentDOM)==null||s.append(p)}return h.dom}const f=(a=(i=d.spec)==null?void 0:i.toDOM)==null?void 0:a.call(i,d.create({id:e.id,...u}));return(l=f.contentDOM)==null||l.appendChild(h.dom),e.children&&e.children.length>0&&((c=f.contentDOM)==null||c.appendChild(fP(t,e.children,n,o))),f.dom}function hP(t,e,n,r){const o=((r==null?void 0:r.document)??document).createDocumentFragment();let s=0;for(const i of e){i.type==="numberedListItem"?s++:s=0;const a=xG(t,i,n,s,r);o.appendChild(a)}return o}const fP=(t,e,n,r)=>{var o;const s=t.pmSchema.nodes.blockGroup,i=s.spec.toDOM(s.create({})),a=hP(t,e,n,r);return(o=i.contentDOM)==null||o.appendChild(a),i.dom},kG=(t,e)=>{const n=Oo.fromSchema(t);return{serializeBlocks:(r,o)=>fP(e,r,n,o).outerHTML}},zp=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),o=(r==null?void 0:r.textContent)??void 0;return{targetElement:n,caption:o}},CG=(t,e,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const s=document.createElement("div");s.className="bn-add-file-button-icon",r?s.appendChild(r):s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(s);const i=document.createElement("p");i.className="bn-add-file-button-text",i.innerHTML=n||e.dictionary.file_blocks.file.add_button_text,o.appendChild(i);const a=c=>{c.preventDefault()},l=()=>{e.transact(c=>c.setMeta(e.filePanel.plugins[0],{block:t}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},SG='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',TG=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=SG,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},nv=(t,e,n,r,o)=>{const s=document.createElement("div");if(s.className="bn-file-block-content-wrapper",t.props.url===""){const a=CG(t,e,r,o);s.appendChild(a.dom);const l=e.onUploadStart(c=>{if(c===t.id){s.removeChild(a.dom);const d=document.createElement("div");d.className="bn-file-loading-preview",d.textContent="Loading...",s.appendChild(d)}});return{dom:s,destroy:()=>{l(),a.destroy()}}}const i={dom:s};if(t.props.showPreview===!1||!n){const a=TG(t);s.appendChild(a.dom),i.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else s.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,s.appendChild(a)}return i},rv=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},Up=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},uS=t=>({url:t.src||void 0}),EG='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',MG={backgroundColor:it.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},pP={type:"audio",propSchema:MG,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},AG=(t,e)=>{const n=document.createElement("div");n.innerHTML=EG;const r=document.createElement("audio");return r.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(o=>{r.src=o}):r.src=t.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,nv(t,e,{dom:r},e.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},mP=t=>{if(t.tagName==="AUDIO")return t.closest("figure")?void 0:uS(t);if(t.tagName==="FIGURE"){const e=zp(t,"audio");if(!e)return;const{targetElement:n,caption:r}=e;return{...uS(n),caption:r}}},RG=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?rv(e,t.props.caption):Up(e,t.props.caption):{dom:e}},_G=jd(pP,{render:AG,parse:mP,toExternalHTML:RG}),hS=Symbol.for("blocknote.shikiParser"),Mg=Symbol.for("blocknote.shikiHighlighterPromise"),PG={language:{default:"text"}},DG=Yn({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const t=this.options;return{language:{default:t.editor.settings.codeBlock.defaultLanguage,parseHTML:e=>{let n=e,r=null;(n==null?void 0:n.tagName)==="DIV"&&(n==null?void 0:n.dataset.contentType)==="codeBlock"&&(n=n.children[0]),(n==null?void 0:n.tagName)==="PRE"&&(n=n==null?void 0:n.children[0]);const o=n==null?void 0:n.getAttribute("data-language");if(o)r=o.toLowerCase();else{const s=[...(n==null?void 0:n.className.split(" "))||[]].filter(i=>i.startsWith("language-")).map(i=>i.replace("language-",""));s.length>0&&(r=s[0].toLowerCase())}return r?Ag(t.editor.settings.codeBlock,r)??r:null},renderHTML:e=>e.language?{class:`language-${e.language}`,"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,n;const r=document.createElement("pre"),{dom:o,contentDOM:s}=Ur(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...t});return o.removeChild(s),o.appendChild(r),r.appendChild(s),{dom:o,contentDOM:s}},addNodeView(){const t=this.options;return({editor:e,node:n,getPos:r,HTMLAttributes:o})=>{var s,i;const a=document.createElement("pre"),l=document.createElement("select"),c=document.createElement("div"),{dom:d,contentDOM:u}=Ur(this.name,"code",{...((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},...o},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{}),h=f=>{const p=f.target.value;e.commands.command(({tr:g})=>(g.setNodeAttribute(r(),"language",p),!0))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach(([f,{name:p}])=>{const g=document.createElement("option");g.value=f,g.text=p,l.appendChild(g)}),c.contentEditable="false",l.value=n.attrs.language||t.editor.settings.codeBlock.defaultLanguage,d.removeChild(u),d.appendChild(c),d.appendChild(a),a.appendChild(u),c.appendChild(l),l.addEventListener("change",h),{dom:d,contentDOM:u,update:f=>f.type===this.type,destroy:()=>{l.removeEventListener("change",h)}}}},addProseMirrorPlugins(){const t=this.options,e=globalThis;let n,r;return[y6({parser:o=>{if(!t.editor.settings.codeBlock.createHighlighter)return[];if(!n)return e[Mg]=e[Mg]||t.editor.settings.codeBlock.createHighlighter(),e[Mg].then(i=>{n=i});const s=Ag(t.editor.settings.codeBlock,o.language);return!s||s==="text"||s==="none"||s==="plaintext"||s==="txt"?[]:n.getLoadedLanguages().includes(s)?(r||(r=e[hS]||b6(n),e[hS]=r),r(o)):n.loadLanguage(s)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options;return[new Ts({find:/^```(.*?)\s$/,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=r[1].trim(),i={language:Ag(t.editor.settings.codeBlock,s)??s};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,i).setSelection(U.create(e.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:n}=e;if(t.isActive(this.name)&&!n.parent.textContent&&Tp(e)){const r=n.pos-n.parentOffset-2;return t.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const n=e.parentOffset===e.parent.nodeSize-2,r=e.parent.textContent.endsWith(`

`);return!n||!r?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:o})=>(o.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),IG=jo(DG,PG);function Ag(t,e){var n;return(n=Object.entries(t.supportedLanguages).find(([r,{aliases:o}])=>(o==null?void 0:o.includes(e))||r===e))==null?void 0:n[0]}const NG=Mt.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),OG=ri(NG,"string"),LG=Mt.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),jG=ri(LG,"string"),fS=t=>({url:t.src||void 0}),BG={backgroundColor:it.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},gP={type:"file",propSchema:BG,content:"none",isFileBlock:!0},VG=(t,e)=>nv(t,e),yP=t=>{if(t.tagName==="EMBED")return t.closest("figure")?void 0:fS(t);if(t.tagName==="FIGURE"){const e=zp(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e;return{...fS(n),caption:r}}},$G=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?Up(e,t.props.caption):{dom:e}},HG=jd(gP,{render:VG,parse:yP,toExternalHTML:$G}),bP={...it,level:{default:1,values:[1,2,3]}},FG=Yn({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return Ld(bP)},addInputRules(){return[...[1,2,3].map(t=>new Ts({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:n,range:r})=>{const o=Le(e);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(Tt(o.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){return{"Mod-Alt-1":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;return Ur(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),zG=jo(FG,bP),vP=(t,e,n,r,o,s)=>{const{dom:i,destroy:a}=nv(t,e,n,o,s),l=i;t.props.url&&t.props.showPreview&&(t.props.previewWidth?l.style.width=`${t.props.previewWidth}px`:l.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const d=document.createElement("div");d.className="bn-resize-handle",d.style.right="4px";let u,h=t.props.previewWidth;const f=w=>{var k,C;if(!u){!e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d));return}let S;t.props.textAlignment==="center"?u.handleUsed==="left"?S=u.initialWidth+(u.initialClientX-w.clientX)*2:S=u.initialWidth+(w.clientX-u.initialClientX)*2:u.handleUsed==="left"?S=u.initialWidth+u.initialClientX-w.clientX:S=u.initialWidth+w.clientX-u.initialClientX,h=Math.min(Math.max(S,64),((C=(k=e.domElement)==null?void 0:k.firstElementChild)==null?void 0:C.clientWidth)||Number.MAX_VALUE),l.style.width=`${h}px`},p=w=>{(!w.target||!l.contains(w.target)||!e.isEditable)&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d)),u&&(u=void 0,e.updateBlock(t,{props:{previewWidth:h}}))},g=()=>{e.isEditable&&(r.appendChild(c),r.appendChild(d))},b=w=>{w.relatedTarget===c||w.relatedTarget===d||u||e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},v=w=>{w.preventDefault(),u={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:w.clientX}},x=w=>{w.preventDefault(),u={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:w.clientX}};return window.addEventListener("mousemove",f),window.addEventListener("mouseup",p),l.addEventListener("mouseenter",g),l.addEventListener("mouseleave",b),c.addEventListener("mousedown",v),d.addEventListener("mousedown",x),{dom:l,destroy:()=>{a==null||a(),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p),l.removeEventListener("mouseenter",g),l.removeEventListener("mouseleave",b),c.removeEventListener("mousedown",v),d.removeEventListener("mousedown",x)}}},pS=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},UG='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',WG={textAlignment:it.textAlignment,backgroundColor:it.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},wP={type:"image",propSchema:WG,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},GG=(t,e)=>{const n=document.createElement("div");n.innerHTML=UG;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),vP(t,e,{dom:r},r,e.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},xP=t=>{if(t.tagName==="IMG")return t.closest("figure")?void 0:pS(t);if(t.tagName==="FIGURE"){const e=zp(t,"img");if(!e)return;const{targetElement:n,caption:r}=e;return{...pS(n),caption:r}}},qG=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?rv(e,t.props.caption):Up(e,t.props.caption):{dom:e}},KG=jd(wP,{render:GG,parse:xP,toExternalHTML:qG});function ov(t,e,n){var r,o,s;const i=So.fromSchema(e),a=t,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const f of Array.from(a.childNodes))l.appendChild(f.cloneNode(!0));let c=i.parse(l,{topNode:e.nodes.blockGroup.create()});((o=(r=c.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const d=(s=c.firstChild)==null?void 0:s.firstChild;if(!(d!=null&&d.isTextblock))return _.from(c);const u=e.nodes[n].create({},d.content),h=c.content.cut(d.nodeSize+2);if(h.size>0){const f=c.copy(h);return u.content.addToEnd(f)}return u.content}const kP=(t,e,n)=>({state:r,dispatch:o})=>{const s=Po(r.doc,t),i=Ps(s);if(!i.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const a=[{type:i.bnBlock.node.type,attrs:n?{...i.bnBlock.node.attrs,id:void 0}:{}},{type:e?i.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...i.blockContent.node.attrs}:{}}];return o&&r.tr.split(t,2,a),!0},sv=t=>{const{blockInfo:e,selectionEmpty:n}=t.transact(s=>({blockInfo:Vp(s),selectionEmpty:s.selection.anchor===s.selection.head}));if(!e.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=e;return!(o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:t._tiptapEditor.commands.first(({state:s,chain:i,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(Tt(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(i().deleteSelection().command(kP(s.selection.from,!0)).run(),!0):!1)])},YG={...it},JG=Yn({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new Ts({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Le(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Tt(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>sv(this.options.editor),"Mod-Shift-8":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"?{}:!1},getContent:(t,e)=>ov(t,e,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Ur(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),ZG=jo(JG,YG),CP={...it,checked:{default:!1}},XG=Yn({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return Ld(CP)},addInputRules(){return[new Ts({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Le(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Tt(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new Ts({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Le(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Tt(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>sv(this.options.editor),"Mod-Shift-9":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:t=>typeof t=="string"||t.closest("[data-content-type]")||t.closest("li")?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"){const r=t.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(t,e)=>ov(t,e,this.name),node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=t.attrs.checked,t.attrs.checked&&o.setAttribute("checked","");const{dom:s,contentDOM:i}=Ur(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return s.insertBefore(o,i),{dom:s,contentDOM:i}},addNodeView(){return({node:t,getPos:e,editor:n,HTMLAttributes:r})=>{var o,s;const i=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=t.attrs.checked,t.attrs.checked&&l.setAttribute("checked","");const c=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof e!="boolean"){const h=Po(n.state.doc,e());if(h.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${h.node.type.name}`);this.editor.commands.command(Tt(h.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",c);const{dom:d,contentDOM:u}=Ur(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{});if(typeof e!="boolean"){const h="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;l.setAttribute("aria-labelledby",h),u.id=h}return d.removeChild(u),d.appendChild(i),i.appendChild(a),i.appendChild(u),a.appendChild(l),{dom:d,contentDOM:u,destroy:()=>{l.removeEventListener("change",c)}}}}}),QG=jo(XG,CP),eq=new Te("numbered-list-indexing"),tq=()=>new me({key:eq,appendTransaction:(t,e,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((s,i)=>{var a;if(s.type.name==="blockContainer"&&s.firstChild.type.name==="numberedListItem"){let l=`${s.firstChild.attrs.start||1}`;const c=Ps({posBeforeNode:i,node:s});if(!c.isBlockContainer)throw new Error("impossible");const d=r.doc.resolve(c.bnBlock.beforePos).nodeBefore;if(d){const p=Ps({posBeforeNode:c.bnBlock.beforePos-d.nodeSize,node:d});if(p.blockNoteType==="numberedListItem"){if(!p.isBlockContainer)throw new Error("impossible");const g=p.blockContent.node.attrs.index;l=(parseInt(g)+1).toString()}}const u=c.blockContent.node,h=u.attrs.index,f=((a=d==null?void 0:d.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(h!==l||u.attrs.start&&!f){o=!0;const{start:p,...g}=u.attrs;r.setNodeMarkup(c.blockContent.beforePos,void 0,{...g,index:l,...typeof p=="number"&&f&&{start:p}})}}}),o?r:null}}),SP={...it,start:{default:void 0,type:"number"}},nq=Yn({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...Ld(SP),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new Ts({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:n,match:r})=>{const o=Le(t);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem")return;const s=parseInt(r[1]);e().command(Tt(o.bnBlock.beforePos,{type:"numberedListItem",props:s===1&&{}||{start:s}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>sv(this.options.editor),"Mod-Shift-7":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[tq()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return t.previousSibling||r===1?{}:{start:r}}return!1},getContent:(t,e)=>ov(t,e,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Ur(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),rq=jo(nq,SP),oq={...it},sq=Yn({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,n;return Ur(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),iq=jo(sq,oq),aq={...it},lq=Yn({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new Ts({find:new RegExp("^>\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Le(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Tt(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML({HTMLAttributes:t}){var e,n;return Ur(this.name,"blockquote",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),cq=jo(lq,aq),dq=35,iv=120,uq=31,hq=Ne.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[SH({cellMinWidth:dq,defaultCellMinWidth:iv,View:null}),NH()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>uC(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>uC(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:ye(W(t,"tableRole",e))}}}),fq={textColor:it.textColor},pq=Yn({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){var e,n;return Ur(this.name,"table",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends RR{constructor(s,i,a){super(s,i),this.node=s,this.cellMinWidth=i,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=Be("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[h,f]of Object.entries(a))h!=="class"&&l.setAttribute(h,f);const c=this.dom,d=document.createElement("div");d.className="tableWrapper-inner",d.appendChild(c.firstChild),c.appendChild(d),l.appendChild(c);const u=document.createElement("div");u.className="table-widgets-container",u.style.position="relative",c.appendChild(u),this.dom=l}ignoreMutation(s){return!s.target.closest(".tableWrapper-inner")||super.ignoreMutation(s)}}return new r(t,iv,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),mq=Yn({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),gq=Zr.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Sn(this.options.HTMLAttributes,t),0]}});function mS(t,e){const n=So.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),_.fromArray(r)}const yq=jo(pq,fq,[hq,mq,B6.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(t,e)=>mS(t,e)}]}}),j6.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(t,e)=>mS(t,e)}]}}),gq]),gS=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},bq='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',vq={textAlignment:it.textAlignment,backgroundColor:it.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},TP={type:"video",propSchema:vq,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},wq=(t,e)=>{const n=document.createElement("div");n.innerHTML=bq;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,r.appendChild(o),vP(t,e,{dom:r},r,e.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},EP=t=>{if(t.tagName==="VIDEO")return t.closest("figure")?void 0:gS(t);if(t.tagName==="FIGURE"){const e=zp(t,"video");if(!e)return;const{targetElement:n,caption:r}=e;return{...gS(n),caption:r}}},xq=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?rv(e,t.props.caption):Up(e,t.props.caption):{dom:e}},kq=jd(TP,{render:wq,parse:EP,toExternalHTML:xq}),av={paragraph:iq,heading:zG,quote:cq,codeBlock:IG,bulletListItem:ZG,numberedListItem:rq,checkListItem:QG,table:yq,file:HG,image:KG,video:kq,audio:_G},Cq=Z_(av),lv={bold:ri(S6,"boolean"),italic:ri(D6,"boolean"),underline:ri(L6,"boolean"),strike:ri(O6,"boolean"),code:ri(M6,"boolean"),textColor:jG,backgroundColor:OG};rP(lv);const MP={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},Sq=nP(MP);function rn(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===Cq[t]}function Tq(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===Sq[t]}function Eq(t,e,n){return e.type===t&&e.type in n.schema.blockSchema&&rn(e.type,n)}function $d(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function Mq(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function Hd(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function fa(t,e,n){return e in n.schema.blockSchema&&t in n.schema.blockSchema[e].propSchema&&n.schema.blockSchema[e].propSchema[t]===it[t]}function Ob(t,e,n){return fa(t,e.type,n)}function Lb(t){return t instanceof _e}function Aq(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function nn(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&Oi(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),Aq(t),r}function Rq(t){const e=[];return rn("heading",t)&&e.push({onItemClick:()=>{nn(t,{type:"heading",props:{level:1}})},badge:jn("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{nn(t,{type:"heading",props:{level:2}})},badge:jn("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{nn(t,{type:"heading",props:{level:3}})},badge:jn("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),rn("quote",t)&&e.push({onItemClick:()=>{nn(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),rn("numberedListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"numberedListItem"})},badge:jn("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),rn("bulletListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"bulletListItem"})},badge:jn("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),rn("checkListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"checkListItem"})},badge:jn("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),rn("paragraph",t)&&e.push({onItemClick:()=>{nn(t,{type:"paragraph"})},badge:jn("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),rn("codeBlock",t)&&e.push({onItemClick:()=>{nn(t,{type:"codeBlock"})},badge:jn("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),rn("table",t)&&e.push({onItemClick:()=>{nn(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),rn("image",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"image"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"image",...t.dictionary.slash_menu.image}),rn("video",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"video"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"video",...t.dictionary.slash_menu.video}),rn("audio",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"audio"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"audio",...t.dictionary.slash_menu.audio}),rn("file",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"file"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"file",...t.dictionary.slash_menu.file}),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function _q(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(e.toLowerCase())).length!==0)}function Rg(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let cv=class AP{constructor(e){A(this,"blockSpecs"),A(this,"inlineContentSpecs"),A(this,"styleSpecs"),A(this,"blockSchema"),A(this,"inlineContentSchema"),A(this,"styleSchema"),A(this,"BlockNoteEditor","only for types"),A(this,"Block","only for types"),A(this,"PartialBlock","only for types"),this.blockSpecs=Rg(e==null?void 0:e.blockSpecs)||av,this.inlineContentSpecs=Rg(e==null?void 0:e.inlineContentSpecs)||MP,this.styleSpecs=Rg(e==null?void 0:e.styleSpecs)||lv,this.blockSchema=Z_(this.blockSpecs),this.inlineContentSchema=nP(this.inlineContentSpecs),this.styleSchema=rP(this.styleSpecs)}static create(e){return new AP(e)}};const Pq={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},Dq=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},Iq=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},Nq=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},Oq=jd(Pq,{render:Dq,parse:Iq,toExternalHTML:Nq});cv.create({blockSpecs:{pageBreak:Oq}});function Lq(t){return t.transact(e=>{const n=Po(e.doc,e.selection.anchor);if(e.selection instanceof _e)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof q)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=Po(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function jq(t,e){var n,r;const o=(n=En(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let s;if(e.type==="cell")s=_e.create(t.doc,o+e.anchorCellOffset,o+e.headCellOffset);else if(e.type==="node")s=q.create(t.doc,o+1);else{const i=(r=En(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(i===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);s=U.create(t.doc,o+e.anchorOffset,i+e.headOffset)}t.setSelection(s)}function jb(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>jb(n.children)).flat():{...e,children:jb(e.children)}).flat()}function RP(t,e,n){t.transact(r=>{var o;const s=((o=t.getSelection())==null?void 0:o.blocks)||[t.getTextCursorPosition().block],i=Lq(t);t.removeBlocks(s),t.insertBlocks(jb(s),e,n),jq(r,i)})}function _P(t){return!t||t.type!=="columnList"}function PP(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[e.children.length-1],o="after"):(r=e,o="before"):n&&(r=n,o="before"),!r||!o)return;const s=t.getParentBlock(r);return _P(s)?{referenceBlock:r,placement:o}:PP(t,o==="after"?r:t.getPrevBlock(r),s)}function DP(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[0],o="before"):(r=e,o="after"):n&&(r=n,o="after"),!r||!o)return;const s=t.getParentBlock(r);return _P(s)?{referenceBlock:r,placement:o}:DP(t,o==="before"?r:t.getNextBlock(r),s)}function Bq(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[0])||t.getTextCursorPosition().block,r=PP(t,t.getPrevBlock(n),t.getParentBlock(n));r&&RP(t,r.referenceBlock,r.placement)})}function Vq(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[(e==null?void 0:e.blocks.length)-1])||t.getTextCursorPosition().block,r=DP(t,t.getNextBlock(n),t.getParentBlock(n));r&&RP(t,r.referenceBlock,r.placement)})}function $q(t,e){return function(n,r){const{$from:o,$to:s}=n.selection,i=o.blockRange(s,c=>c.childCount>0&&(c.type.name==="blockGroup"||c.type.name==="column"));if(!i)return!1;const a=i.startIndex;if(a===0)return!1;const l=i.parent.child(a-1);if(l.type!==t)return!1;if(r){const c=l.lastChild&&l.lastChild.type===e,d=_.from(c?t.create():null),u=new j(_.from(t.create(null,_.from(e.create(null,d)))),c?3:1,0),h=i.start,f=i.end;r(n.tr.step(new rt(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}function IP(t){return t.exec((e,n)=>$q(e.schema.nodes.blockContainer,e.schema.nodes.blockGroup)(e,n))}function Hq(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function Fq(t){return t.transact(e=>{const{bnBlock:n}=Vp(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function zq(t){return t.transact(e=>{const{bnBlock:n}=Vp(e);return e.doc.resolve(n.beforePos).depth>1})}function Uq(t,e){const n=typeof e=="string"?e:e.id,r=gt(t),o=En(n,t);if(o)return Ue(o.node,r)}function Wq(t,e){const n=typeof e=="string"?e:e.id,r=En(n,t),o=gt(t);if(!r)return;const s=t.resolve(r.posBeforeNode).nodeBefore;if(s)return Ue(s,o)}function Gq(t,e){const n=typeof e=="string"?e:e.id,r=En(n,t),o=gt(t);if(!r)return;const s=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(s)return Ue(s,o)}function qq(t,e){const n=typeof e=="string"?e:e.id,r=gt(t),o=En(n,t);if(!o)return;const s=t.resolve(o.posBeforeNode),i=s.node(),a=s.node(-1),l=a.type.name!=="doc"?i.type.name==="blockGroup"?a:i:void 0;if(l)return Ue(l,r)}function Kq(t,e,n,r={updateSelection:!0}){let{from:o,to:s}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},i=!0,a=!0,l="";if(n.forEach(c=>{c.check(),i&&c.isText&&c.marks.length===0?l+=c.text:i=!1,a=a?c.isBlock:!1}),o===s&&a){const{parent:c}=t.doc.resolve(o);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(o-=1,s+=1)}return i?t.insertText(l,o,s):t.replaceWith(o,s,n),r.updateSelection&&lR(t,t.steps.length-1,-1),!0}function Yq(t){const e=gt(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(Po(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(Po(t.doc,t.selection.to).posBeforeNode),o=(c,d)=>{const u=n.posAtIndex(c,d),h=t.doc.resolve(u).nodeAfter;if(!h)throw new Error(`Error getting selection - node not found at position ${u}`);return Ue(h,e)},s=[],i=n.sharedDepth(r.pos),a=n.index(i),l=r.index(i);if(n.depth>i){s.push(Ue(n.nodeAfter,e));for(let c=n.depth;c>i;c--)if(n.node(c).type.isInGroup("childContainer")){const d=n.index(c)+1,u=n.node(c).childCount;for(let h=d;h<u;h++)s.push(o(h,c))}}else s.push(o(a,i));for(let c=a+1;c<=l;c++)s.push(o(c,i));if(s.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:s}}function Jq(t,e,n){const r=typeof e=="string"?e:e.id,o=typeof n=="string"?n:n.id,s=gt(t),i=Vd(s);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=En(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=En(o,t.doc);if(!l)throw new Error(`Block with ID ${o} not found`);const c=Ps(a),d=Ps(l),u=i.blockSchema[c.blockNoteType],h=i.blockSchema[d.blockNoteType];if(!c.isBlockContainer||u.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!d.isBlockContainer||h.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let f,p;if(u.content==="table"){const g=ze.get(c.blockContent.node);f=c.blockContent.beforePos+g.positionAt(0,0,c.blockContent.node)+1+2}else f=c.blockContent.beforePos+1;if(h.content==="table"){const g=ze.get(d.blockContent.node),b=d.blockContent.beforePos+g.positionAt(g.height-1,g.width-1,d.blockContent.node)+1,v=t.doc.resolve(b).nodeAfter.nodeSize;p=b+v-2}else p=d.blockContent.afterPos-1;t.setSelection(U.create(t.doc,f,p))}function Zq(t){const e=gt(t);let n=t.selection.$from,r=t.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=t.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=t.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=t.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=t.doc.resolve(n.pos+1);const o=sG(t.doc.slice(n.pos,r.pos,!0),e);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function Xq(t){const{bnBlock:e}=Vp(t),n=gt(t.doc),r=t.doc.resolve(e.beforePos),o=r.nodeBefore,s=t.doc.resolve(e.afterPos).nodeAfter;let i;return r.depth>1&&(i=r.node(),i.type.isInGroup("bnBlock")||(i=r.node(r.depth-1))),{block:Ue(e.node,n),prevBlock:o===null?void 0:Ue(o,n),nextBlock:s===null?void 0:Ue(s,n),parentBlock:i===void 0?void 0:Ue(i,n)}}function NP(t,e,n="start"){const r=typeof e=="string"?e:e.id,o=gt(t.doc),s=Vd(o),i=En(r,t.doc);if(!i)throw new Error(`Block with ID ${r} not found`);const a=Ps(i),l=s.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const c=a.blockContent;if(l==="none"){t.setSelection(q.create(t.doc,c.beforePos));return}if(l==="inline")n==="start"?t.setSelection(U.create(t.doc,c.beforePos+1)):t.setSelection(U.create(t.doc,c.afterPos-1));else if(l==="table")n==="start"?t.setSelection(U.create(t.doc,c.beforePos+4)):t.setSelection(U.create(t.doc,c.afterPos-4));else throw new zr(l)}else{const c=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;NP(t,c.attrs.id,n)}}let pa;async function dv(){if(pa)return pa;const t=await Promise.all([kt(()=>import("./index-rjhLG1eB.js"),__vite__mapDeps([0,1,2,3,4,5])),kt(()=>import("./index-uAn85tBp.js"),__vite__mapDeps([6,4,2,3,7])),kt(()=>import("./index-CWmy4eKR.js"),__vite__mapDeps([8,3,1,2])),kt(()=>import("./index-CfyObm-o.js"),__vite__mapDeps([9,5,4])),kt(()=>import("./index-yU9Yh-H5.js"),__vite__mapDeps([10,11,12,2,3,7])),kt(()=>import("./index-JH4Gotpn.js"),__vite__mapDeps([13,2,3])),kt(()=>import("./index-FrdabaJ1.js"),__vite__mapDeps([14,2,3])),kt(()=>import("./index-BgBG5lba.js"),__vite__mapDeps([15,2,3])),kt(()=>import("./index-BlSIl150.js"),__vite__mapDeps([16,11,2,3])),kt(()=>import("./index-BGm_t98o.js"),__vite__mapDeps([17,12,2,3,7]))]);return pa={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},pa}function Qq(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const o=e.children[r];if(o.type==="element"&&(t(o),o.tagName==="u"))if(o.children.length>0){e.children.splice(r,1,...o.children);const s=o.children.length-1;n+=s,r+=s}else e.children.splice(r,1),n--,r--}};return t}function eK(){const t=pa;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const s=n.children[o],i=o+1<n.children.length?n.children[o+1]:void 0;s.type==="element"&&s.tagName==="input"&&((r=s.properties)==null?void 0:r.type)==="checkbox"&&(i==null?void 0:i.type)==="element"&&i.tagName==="p"?(i.tagName="span",i.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(s)}};return e}function uv(t){const e=pa;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(Qq).use(eK).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(t).value}async function tK(t,e,n,r){await dv();const o=Fp(e,n).exportBlocks(t,r);return uv(o)}function nK(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function rK(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function oK(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=nK(e),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(s=>{s.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(s=>{if(rK(s))return;const i=document.createElement("li");i.append(s),e.insertAdjacentElement("afterend",i)}),r.childNodes.length===0&&r.remove()})}function sK(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const o=e.previousElementSibling,s=document.createElement("div");o.insertAdjacentElement("afterend",s),s.append(o);const i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),s.append(i);((n=s.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=s.nextElementSibling)==null?void 0:r.nodeName)==="OL";)i.append(s.nextElementSibling)})}let yS=null;function iK(){return yS||(yS=document.implementation.createHTMLDocument("title"))}function OP(t){if(typeof t=="string"){const e=iK().createElement("div");e.innerHTML=t,t=e}return oK(t),sK(t),t}async function LP(t,e){const n=OP(t),r=So.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),o=[];for(let s=0;s<r.childCount;s++)o.push(Ue(r.child(s),e));return o}function aK(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}async function jP(t){const e=await dv();return e.unified.unified().use(e.remarkParse.default).use(e.remarkGfm.default).use(e.remarkRehype.default,{handlers:{...e.remarkRehype.defaultHandlers,code:aK}}).use(e.rehypeStringify.default).processSync(t).value}async function lK(t,e){const n=await jP(t);return LP(n,e)}const hv=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function cK(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function dK(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function bS(t,e,n){let r;return Array.isArray(e.content)&&e.content.length===0?r=t.updateBlock(e,n).id:r=t.insertBlocks([n],e,"after")[0].id,r}async function BP(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let o=null;for(const a of hv)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const s=r.items;if(!s)return;t.preventDefault();const i=Object.values(e.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<s.length;a++){let l="file";for(const d of i)for(const u of d.fileBlockAccept||[]){const h=u.startsWith("."),f=s[a].getAsFile();if(f&&(!h&&f.type&&dK(s[a].type,u)||h&&cK("."+f.name.split(".").pop(),u))){l=d.type;break}}const c=s[a].getAsFile();if(c){const d={type:l,props:{name:c.name}};let u;if(t.type==="paste"){const p=e.getTextCursorPosition().block;u=bS(e,p,d)}else if(t.type==="drop"){const p={left:t.clientX,top:t.clientY},g=(n=e.prosemirrorView)==null?void 0:n.posAtCoords(p);if(!g)return;u=e.transact(b=>{const v=Po(b.doc,g.pos);return bS(e,e.getBlock(v.node.attrs.id),d)})}else return;const h=await e.uploadFile(c,u),f=typeof h=="string"?{props:{url:h}}:{...h};e.updateBlock(u,f)}}}const uK=t=>Ne.create({name:"dropFile",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const o of hv)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(BP(n,t),!0):!1}}}})]}}),hK=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,fK=new RegExp("(?:\\s|^)(_|__|\\*|\\*\\*|~~|==|\\+\\+)(?!\\s).{1,64}(?<!\\s)(?=\\1)"),pK=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,mK=new RegExp("(?:\\s|^)`(?!\\s)[^`]{1,48}(?<!\\s)`([^\\w]|$)"),gK=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,yK=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,bK=/\n{2} {0,3}-{2,48}\n{2}/,vK=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,wK=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,xK=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,kK=/^\s*\|(.+\|)+\s*$/m,CK=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,SK=/^\s*\|(.+\|)+\s*$/m,TK=t=>hK.test(t)||fK.test(t)||pK.test(t)||mK.test(t)||gK.test(t)||yK.test(t)||bK.test(t)||vK.test(t)||wK.test(t)||xK.test(t)||kK.test(t)||CK.test(t)||SK.test(t);async function EK(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const o=t.clipboardData.getData("vscode-editor-data"),s=o?JSON.parse(o):void 0,i=s==null?void 0:s.mode;return i?(e.pasteHTML(`<pre><code class="language-${i}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function MK({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(e.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(a)return e.pasteText(a),!0}let s;for(const a of hv)if(t.clipboardData.types.includes(a)){s=a;break}if(!s)return!0;if(s==="vscode-editor-data")return EK(t,e.prosemirrorView),!0;if(s==="Files")return BP(t,e),!0;const i=t.clipboardData.getData(s);if(s==="blocknote/html")return e.pasteHTML(i,!0),!0;if(s==="text/markdown")return e.pasteMarkdown(i),!0;if(n){const a=t.clipboardData.getData("text/plain");if(TK(a))return e.pasteMarkdown(a),!0}return s==="text/html"?(e.pasteHTML(i),!0):r?(e.pasteMarkdown(i),!0):(e.pasteText(i),!0)}const AK=(t,e)=>Ne.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:s=!0}={})=>MK({event:r,editor:t,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:s})})}}}})]}});function VP(t){const e=[];return t.descendants(n=>{var r,o;const s=gt(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(i=>{e.push(Ue(i,s))}),!1):n.type.isInGroup("bnBlock")?(e.push(Ue(n,s)),!1):!0}),e}function RK(t,e,n){var r;let o=!1;const s=t.state.selection instanceof _e;if(!s){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,c=[];for(let d=0;d<l.childCount;d++)c.push(l.child(d));o=c.find(d=>d.type.isInGroup("bnBlock")||d.type.name==="blockGroup"||d.type.spec.group==="blockContent")===void 0,o&&(e=l)}let i;const a=Fp(t.state.schema,n);if(s){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=tP(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=$p(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=a.exportInlineContent(l,{})}else{const l=VP(e);i=a.exportBlocks(l,{})}return i}function $P(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(i=>i.setSelection(new q(i.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,o=RK(t,r,e),s=uv(o);return{clipboardHTML:n,externalHTML:o,markdown:s}}const vS=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},wS=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=$P(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",s)},_K=t=>Ne.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{copy(e,n){return vS()||wS(t,e,n),!0},cut(e,n){return vS()||(wS(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(i=>i.setSelection(new q(i.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=$P(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",s),!0}}}})]}}),PK=Ne.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:it.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):it.backgroundColor.default,renderHTML:t=>t.backgroundColor===it.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});let fv=class{constructor(){A(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(o=>o.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}},At=class extends fv{constructor(...e){super(),A(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}};const HP=class FP extends At{constructor(e){super(),A(this,"provider"),A(this,"recentlyUpdatedCursors"),A(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const s=(this.collaboration.renderCursor??FP.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(s.addEventListener("mouseenter",()=>{const i=this.recentlyUpdatedCursors.get(r);i.element.setAttribute("data-active",""),i.hideTimeout&&(clearTimeout(i.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:void 0}))}),s.addEventListener("mouseleave",()=>{const i=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:setTimeout(()=>{i.element.removeAttribute("data-active")},2e3)})})),o={element:s,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),A(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=e,this.provider=e.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",e.user),e.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(HW(this.provider.awareness,{selectionBuilder:K_,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}};A(HP,"defaultCursorRender",t=>{const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode("â "),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode("â "),null),e});let zP=HP,Bb=class extends At{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(TW(e))}get priority(){return 1001}},Vb=class extends At{static key(){return"yUndoPlugin"}constructor(){super(),this.addProsemirrorPlugin(KW())}get priority(){return 1e3}};const UP=Mt.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",Sn(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});class DK extends fv{constructor(e){super(),A(this,"userCache",new Map),A(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const Nu=new Te("blocknote-comments"),IK="SET_SELECTED_THREAD_ID";function NK(t,e){const n=new Map;return t.descendants((r,o)=>{r.marks.forEach(s=>{if(s.type.name===e){const i=s.attrs.threadId;if(!i)return;const a=o,l=a+r.nodeSize,c=n.get(i)??{from:1/0,to:0};n.set(i,{from:Math.min(a,c.from),to:Math.max(l,c.to)})}})}),n}class OK extends At{constructor(e,n,r){if(super(),A(this,"userStore"),A(this,"pendingComment",!1),A(this,"selectedThreadId"),A(this,"threadPositions",new Map),A(this,"updateMarksFromThreads",s=>{this.editor.transact(i=>{i.doc.descendants((a,l)=>{a.marks.forEach(c=>{if(c.type.name===this.markType){const d=c.type,u=c.attrs.threadId,h=s.get(u),f=!!(!h||h.resolved||h.deletedAt);if(f!==c.attrs.orphan){const p=Math.max(l,0),g=Math.min(l+a.nodeSize,i.doc.content.size-1,i.doc.content.size-1);i.removeMark(p,g,c),i.addMark(p,g,d.create({...c.attrs,orphan:f})),f&&this.selectedThreadId===u&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=n,this.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new DK(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new me({key:Nu,state:{init(){return{decorations:be.empty}},apply(s,i){const a=s.getMeta(Nu);if(!s.docChanged&&!a)return i;const l=s.docChanged?NK(s.doc,o.markType):o.threadPositions;(l.size>0||o.threadPositions.size>0)&&(o.threadPositions=l,o.emitStateUpdate());const c=[];if(o.selectedThreadId){const d=l.get(o.selectedThreadId);d&&c.push(Re.inline(d.from,d.to,{class:"bn-thread-mark-selected"}))}return{decorations:be.create(s.doc,c)}}},props:{decorations(s){var i;return((i=Nu.getState(s))==null?void 0:i.decorations)??be.empty},handleClick:(s,i,a)=>{if(a.button!==0)return;const l=s.state.doc.nodeAt(i);if(!l){o.selectThread(void 0);return}const c=l.marks.find(u=>u.type.name===r&&u.attrs.orphan!==!0),d=c==null?void 0:c.attrs.threadId;o.selectThread(d,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e,n=!0){var r,o;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(s=>s.setMeta(Nu,{name:IK})),e&&n)){const s=this.threadPositions.get(e);if(!s)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(s.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const n=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,s=Ee.getState(r.state),i={prosemirror:{head:o.head,anchor:o.anchor},yjs:s?_f(s.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:i})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class LK{constructor(e,n,r,o){A(this,"state"),A(this,"emitUpdate"),A(this,"mouseDownHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"dragstartHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var s;if((s=this.state)!=null&&s.show){const i=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!i)return;this.state.referencePos=i.getBoundingClientRect(),this.emitUpdate()}}),A(this,"closeMenu",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const s=this.pluginKey.getState(e.state),i=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&s!=null&&s.block&&this.editor.isEditable){const c=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${s.block.id}"]`);if(!c)return;this.state={show:!0,referencePos:c.getBoundingClientRect(),block:s.block},this.emitUpdate();return}const a=(s==null?void 0:s.block)&&!(i!=null&&i.block),l=!(s!=null&&s.block)&&(i==null?void 0:i.block);a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const _g=new Te("FilePanelPlugin");class jK extends At{constructor(e){super(),A(this,"view"),A(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new me({key:_g,view:n=>(this.view=new LK(e,_g,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(_g)||(!n.getMeta(Ee)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}class BK{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"preventHide",!1),A(this,"preventShow",!1),A(this,"shouldShow",({view:o,state:s,from:i,to:a})=>{const{doc:l,selection:c}=s,{empty:d}=c,u=!l.textBetween(i,a).length&&Tp(s.selection);if(c.$from.parent.type.spec.code||eb(c)&&c.node.type.spec.code||d||u)return!1;const h=document.activeElement;return!(!this.isElementWithinEditorWrapper(h)&&o.editable)}),A(this,"blurHandler",o=>{var s;if(this.preventHide){this.preventHide=!1;return}const i=this.pmView.dom.parentElement;o&&o.relatedTarget&&(i===o.relatedTarget||i.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const s=this.pmView.dom.parentElement;return s?s.contains(o):!1}),A(this,"viewMousedownHandler",o=>{this.isElementWithinEditorWrapper(o.target)||(this.preventShow=!0)}),A(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),A(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),A(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o,s;const{state:i,composing:a}=e,{doc:l,selection:c}=i,d=n&&n.doc.eq(l)&&n.selection.eq(c);if(a||d)return;const{ranges:u}=c,h=Math.min(...u.map(b=>b.$from.pos)),f=Math.max(...u.map(b=>b.$to.pos)),p=this.shouldShow({view:e,state:i,from:h,to:f}),g=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(p||this.preventHide)&&!g){const b={show:!0,referencePos:this.getSelectionBoundingBox()};(b.show!==((r=this.state)==null?void 0:r.show)||b.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=b,this.emitUpdate());return}if((s=this.state)!=null&&s.show&&!this.preventHide&&(!p||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:n}=e,{ranges:r}=n,o=Math.min(...r.map(i=>i.$from.pos)),s=Math.max(...r.map(i=>i.$to.pos));if(eb(n)){const i=this.pmView.nodeDOM(o);if(i)return i.getBoundingClientRect()}return Wh(this.pmView,o,s)}}const VK=new Te("FormattingToolbarPlugin");class $K extends At{constructor(e){super(),A(this,"view"),A(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new me({key:VK,view:n=>(this.view=new BK(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}const HK=Zr.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Sn(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),xS=(t,e)=>{const n=t.resolve(e);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return Bd(t.resolve(r))},yh=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return Bd(t.resolve(o))},WP=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=Bd(t.resolve(r))}return e},FK=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",zK=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=t.doc.resolve(r.childContainer.beforePos+1),s=t.doc.resolve(r.childContainer.afterPos-1),i=o.blockRange(s);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(i,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},kS=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),o=Bd(r),s=yh(e.doc,o.bnBlock.beforePos);if(!s)return!1;const i=WP(e.doc,s);return FK(i,o)?zK(e,n,i,o):!1},UK=Ne.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;const a=s.selection.from===i.blockContent.beforePos+1,l=i.blockContent.node.type.name==="paragraph";return a&&!l?o.command(Tt(i.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;const{blockContent:a}=i;return s.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=i,c=s.selection.from===l.beforePos+1,d=s.selection.empty,u=a.beforePos;return c&&d?r().command(kS(u)).scrollIntoView().run():!1}),()=>o.command(({state:s,dispatch:i})=>{const a=Le(s);if(!a.isBlockContainer||s.selection.from!==a.blockContent.beforePos+1||yh(s.doc,a.bnBlock.beforePos))return!1;const l=xS(s.doc,a.bnBlock.beforePos);if((l==null?void 0:l.blockNoteType)!=="column")return!1;const c=l,d=xS(s.doc,c.bnBlock.beforePos);if((d==null?void 0:d.blockNoteType)!=="columnList")throw new Error("parent of column is not a column list");const u=c.childContainer.node.childCount===1,h=u&&d.childContainer.node.childCount===2,f=d.childContainer.node.firstChild===c.bnBlock.node;if(i){const p=s.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(h)if(f){s.tr.step(new rt(d.bnBlock.beforePos,d.bnBlock.afterPos,c.bnBlock.afterPos+1,d.bnBlock.afterPos-2,p,p.size,!1));const g=s.tr.doc.resolve(c.bnBlock.beforePos);s.tr.setSelection(U.between(g,g))}else{s.tr.step(new rt(d.bnBlock.beforePos,d.bnBlock.afterPos,d.bnBlock.beforePos+2,c.bnBlock.beforePos-1,p,0,!1));const g=s.tr.doc.resolve(s.tr.mapping.map(c.bnBlock.beforePos-1));s.tr.setSelection(U.between(g,g))}else if(u)if(f){s.tr.delete(c.bnBlock.beforePos,c.bnBlock.afterPos),s.tr.insert(d.bnBlock.beforePos,p.content);const g=s.tr.doc.resolve(d.bnBlock.beforePos);s.tr.setSelection(U.between(g,g))}else s.tr.delete(c.bnBlock.beforePos-1,c.bnBlock.beforePos+1);else{s.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),f?s.tr.insert(d.bnBlock.beforePos-1,p.content):s.tr.insert(c.bnBlock.beforePos-1,p.content);const g=s.tr.doc.resolve(c.bnBlock.beforePos-1);s.tr.setSelection(U.between(g,g))}}return!0}),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;if(i.blockContent.node.childCount===0&&i.blockContent.node.type.spec.content==="inline*"){const a=yh(s.doc,i.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const c=i.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(c)}else if(a.blockContent.node.type.spec.content===""){const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(c)}else{const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(c)}return l.deleteRange({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)throw new Error("todo");const a=s.selection.from===i.blockContent.beforePos+1,l=s.selection.empty,c=yh(s.doc,i.bnBlock.beforePos);if(c&&a&&l){const d=WP(s.doc,c);if(!d.isBlockContainer)throw new Error("todo");if(d.blockContent.node.type.spec.content===""||d.blockContent.node.type.spec.content==="inline*"&&d.blockContent.node.childCount===0)return r().cut({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos},d.bnBlock.afterPos).deleteRange({from:d.bnBlock.beforePos,to:d.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const s=Le(o);if(!s.isBlockContainer)return!1;const{bnBlock:i,blockContent:a,childContainer:l}=s,{depth:c}=o.doc.resolve(i.beforePos),d=i.afterPos===o.doc.nodeSize-3,u=o.selection.from===a.afterPos-1,h=o.selection.empty;if(!d&&u&&h&&l===void 0){let f=c,p=i.afterPos+1,g=o.doc.resolve(p).depth;for(;g<f;)f=g,p+=2,g=o.doc.resolve(p).depth;return r.command(kS(p-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o})=>[()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=i,{depth:c}=s.doc.resolve(a.beforePos),d=s.selection.$anchor.parentOffset===0,u=s.selection.anchor===s.selection.head,h=l.node.childCount===0,f=c>1;return d&&u&&h&&f?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const i=Le(s),a=this.options.editor.schema.blockSchema[i.blockNoteType].hardBreakShortcut??"shift+enter";return a==="none"?!1:a==="shift+enter"&&r||a==="enter"?o.insertContent({type:"hardBreak"}):!1}),()=>o.command(({state:s,dispatch:i})=>{const a=Le(s);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=a,d=s.selection.$anchor.parentOffset===0,u=s.selection.anchor===s.selection.head,h=c.node.childCount===0;if(d&&u&&h){const f=l.afterPos,p=f+2;if(i){const g=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(f,g).scrollIntoView(),s.tr.setSelection(new U(s.doc.resolve(p)))}return!0}return!1}),()=>o.command(({state:s,chain:i})=>{const a=Le(s);if(!a.isBlockContainer)return!1;const{blockContent:l}=a,c=s.selection.$anchor.parentOffset===0;return l.node.childCount===0?!1:(i().deleteSelection().command(kP(s.selection.from,c,c)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(s=this.options.editor.filePanel)!=null&&s.shown)?!1:IP(this.options.editor)},"Shift-Tab":()=>{var r,o,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(s=this.options.editor.filePanel)!=null&&s.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class WK{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"menuUpdateTimer"),A(this,"startMenuUpdateTimer"),A(this,"stopMenuUpdateTimer"),A(this,"mouseHoveredLinkMark"),A(this,"mouseHoveredLinkMarkRange"),A(this,"keyboardHoveredLinkMark"),A(this,"keyboardHoveredLinkMarkRange"),A(this,"linkMark"),A(this,"linkMarkRange"),A(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const s=o.target,i=this.pmView.posAtDOM(s,0)+1,a=this.pmView.state.doc.resolve(i),l=a.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=c,this.mouseHoveredLinkMarkRange=jc(a,c.type,c.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),A(this,"clickHandler",o=>{var s;const i=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(i===o.target||i.contains(o.target))&&(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=Wh(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),A(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,n){var r;this.editor.transact(o=>{const s=gt(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,s.mark("link",{href:e}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,n,r=!1){var o;const{state:s}=e;if(n&&n.selection.from===s.selection.from&&n.selection.to===s.selection.to||!this.pmView.hasFocus())return;const i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const l of a)if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=jc(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:Wh(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&i&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const GK=new Te("LinkToolbarPlugin");class qK extends At{constructor(e){super(),A(this,"view"),A(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),A(this,"deleteLink",()=>{this.view.deleteLink()}),A(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),A(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),A(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new me({key:GK,view:n=>(this.view=new WK(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const GP=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],qP="https",KK=new Te("node-selection-keyboard");class YK extends At{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new me({key:KK,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=e.state.tr;return e.dispatch(r.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new U(r.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const JK=new Te("blocknote-placeholder");class ZK extends At{static key(){return"placeholder"}constructor(e,n){super(),this.addProsemirrorPlugin(new me({key:JK,view:r=>{var o,s;const i=`placeholder-selector-${wR()}`;r.dom.classList.add(i);const a=document.createElement("style"),l=e._tiptapEditor.options.injectNonce;l&&a.setAttribute("nonce",l),((o=e.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):(s=e.prosemirrorView)==null||s.root.head.appendChild(a);const c=a.sheet,d=(u="")=>`.${i} .bn-block-content${u} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:u,emptyDocument:h,...f}=n;for(const[b,v]of Object.entries(f)){const x=`[data-content-type="${b}"]`;c.insertRule(`${d(x)} { content: ${JSON.stringify(v)}; }`)}c.insertRule(`${d("[data-is-only-empty-block]")} { content: ${JSON.stringify(h)}; }`),c.insertRule(`${d("[data-is-empty-and-focused]")} { content: ${JSON.stringify(u)}; }`)}catch(u){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",u)}return{destroy:()=>{var u,h;((u=e.prosemirrorView)==null?void 0:u.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):(h=e.prosemirrorView)==null||h.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:s}=r;if(!e.isEditable||!s.empty||s.$from.parent.type.spec.code)return;const i=[];r.doc.content.size===6&&i.push(Re.node(2,4,{"data-is-only-empty-block":"true"}));const a=s.$anchor,l=a.parent;if(l.content.size===0){const c=a.before();i.push(Re.node(c,c+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return be.create(o,i)}}}))}}const CS=new Te("previous-blocks"),XK={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class QK extends At{static key(){return"previousBlockType"}constructor(){super();let e;this.addProsemirrorPlugin(new me({key:CS,view(n){return{update:async(r,o)=>{var s;((s=this.key)==null?void 0:s.getState(r.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(CS,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,s){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(s.doc))return r;const i={},a=sC(o.doc,d=>d.attrs.id),l=new Map(a.map(d=>[d.node.attrs.id,d])),c=sC(s.doc,d=>d.attrs.id);for(const d of c){const u=l.get(d.node.attrs.id),h=u==null?void 0:u.node.firstChild,f=d.node.firstChild;if(u&&h&&f){const p={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:s.doc.resolve(d.pos).depth};let g={index:h.attrs.index,level:h.attrs.level,type:h.type.name,depth:o.doc.resolve(u.pos).depth};i[d.node.attrs.id]=g,n.getMeta("numberedListIndexing")&&(d.node.attrs.id in r.prevTransactionOldBlockAttrs&&(g=r.prevTransactionOldBlockAttrs[d.node.attrs.id]),p.type==="numberedListItem"&&(g.index=p.index)),r.currentTransactionOldBlockAttrs[d.node.attrs.id]=g,JSON.stringify(g)!==JSON.stringify(p)&&(g["depth-change"]=g.depth-p.depth,r.updatedBlocks.add(d.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=i,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((s,i)=>{if(!s.attrs.id||!r.updatedBlocks.has(s.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[s.attrs.id],l={};for(const[d,u]of Object.entries(a))l["data-prev-"+XK[d]]=u||"none";const c=Re.node(i,i+s.nodeSize,{...l});o.push(c)}),be.create(n.doc,o)}}}))}}const SS=new Te("blocknote-show-selection");class eY extends At{constructor(e){super(),A(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new me({key:SS,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return be.empty;const s=Re.inline(o.from,o.to,{"data-show-selection":"true"});return be.create(r,[s])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(n=>n.setMeta(SS,{})))}getEnabled(){return this.enabled}}function KP(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}class wi extends ee{constructor(e,n){super(e,n),A(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(o,s,i)=>{if(i!==null&&i.eq(r))return this.nodes.push(o),!1})}static create(e,n,r=n){return new wi(e.resolve(n),e.resolve(r))}content(){return new j(_.from(this.nodes),0,0)}eq(e){if(!(e instanceof wi)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?ee.near(e.resolve(r.pos)):r.deleted?ee.near(e.resolve(o.pos)):new wi(e.resolve(r.pos),e.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}ee.jsonID("multiple-node",wi);let nr;function tY(t,e){let n,r;const o=e.resolve(t.from).node().type.spec.group==="blockContent",s=e.resolve(t.to).node().type.spec.group==="blockContent",i=Math.min(t.$anchor.depth,t.$head.depth);if(o&&s){const a=t.$from.start(i-1),l=t.$to.end(i-1);n=e.resolve(a-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function TS(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),o=t.domAtPos(e).node,s=(d,u)=>Array.prototype.indexOf.call(d.children,u),i=s(o,t.domAtPos(e+1).node.parentElement),a=s(o,t.domAtPos(n-1).node.parentElement);for(let d=o.childElementCount-1;d>=0;d--)(d>a||d<i)&&r.removeChild(r.children[d]);YP(t.root),nr=r;const l=nr.getElementsByTagName("iframe");for(let d=0;d<l.length;d++){const u=l[d],h=u.parentElement;h&&h.removeChild(u)}const c=t.dom.className.split(" ").filter(d=>d!=="ProseMirror"&&d!=="bn-root"&&d!=="bn-editor").join(" ");nr.className=nr.className+" bn-drag-preview "+c,t.root instanceof ShadowRoot?t.root.appendChild(nr):t.root.body.appendChild(nr)}function YP(t){nr!==void 0&&(t instanceof ShadowRoot?t.removeChild(nr):t.body.removeChild(nr),nr=void 0)}function nY(t,e,n){if(!t.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=En(e.id,r.state.doc);if(!o)throw new Error(`Block with ID ${e.id} not found`);const s=o.posBeforeNode;if(s!=null){const i=r.state.selection,a=r.state.doc,{from:l,to:c}=tY(i,a),d=l<=s&&s<c,u=i.$anchor.node()!==i.$head.node()||i instanceof wi;d&&u?(r.dispatch(r.state.tr.setSelection(wi.create(a,l,c))),TS(r,l,c)):(r.dispatch(r.state.tr.setSelection(q.create(r.state.doc,s))),TS(r,s));const h=r.state.selection.content(),f=n.pmSchema,p=r.serializeForClipboard(h).dom.innerHTML,g=Fp(f,n),b=VP(h.content),v=g.exportBlocks(b,{}),x=uv(v);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",p),t.dataTransfer.setData("text/html",v),t.dataTransfer.setData("text/plain",x),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(nr,0,0)}}const Il=.1;function $b(t,e,n,r=!0){const o=t.root.elementsFromPoint(e.left+(n==="editor"?50:0),e.top);for(const s of o)if(t.dom.contains(s))return r&&s.closest("[data-node-type=columnList]")?$b(t,{left:e.left+50,top:e.top},n,!1):KP(s,t)}function rY(t,e,n){if(!e.dom.firstChild)return;const r=e.dom.firstChild.getBoundingClientRect(),o={left:t.x,top:t.y},s=o.left<r.left,i=o.left>r.right;n==="viewport"&&(s&&(o.left=r.left+10),i&&(o.left=r.right-10));let a=$b(e,o,n);if(!i&&a){const l=a.node.getBoundingClientRect();o.left=l.right-10,a=$b(e,o,"viewport",!1)}return a}class oY{constructor(e,n,r,o){A(this,"state"),A(this,"emitUpdate"),A(this,"mousePos"),A(this,"hoveredBlock"),A(this,"menuFrozen",!1),A(this,"isDragOrigin",!1),A(this,"updateState",s=>{this.state=s,this.emitUpdate(this.state)}),A(this,"updateStateFromMousePos",()=>{var s,i,a,l;if(this.menuFrozen||!this.mousePos)return;const c=rY(this.mousePos,this.pmView,this.sideMenuDetection);if(!c||!this.editor.isEditable){(s=this.state)!=null&&s.show&&(this.state.show=!1,this.updateState(this.state));return}if((i=this.state)!=null&&i.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===c.id)return;this.hoveredBlock=c.node;const d=c.node.firstChild;if(d&&this.editor.isEditable){const u=d.getBoundingClientRect(),h=c.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(h?h.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,u.y,u.width,u.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),A(this,"onDrop",s=>{var i,a;if(this.pmView.dragging===null)return;this.editor._tiptapEditor.commands.blur();const l=s.target instanceof Node&&((i=s.target instanceof HTMLElement?s.target:s.target.parentElement)==null?void 0:i.closest(".bn-editor"))||null;if(l&&(!this.isDragOrigin&&this.pmView.dom===l?this.pmView.dispatch(this.pmView.state.tr.setSelection(U.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.to))):this.isDragOrigin&&this.pmView.dom!==l&&setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0)),this.sideMenuDetection==="editor"||s.synthetic||!((a=s.dataTransfer)!=null&&a.types.includes("blocknote/html")))return;const c=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!c||c.inside===-1){const d=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(d)}}),A(this,"onDragEnd",()=>{this.pmView.dragging=null}),A(this,"onDragStart",s=>{var i;const a=(i=s.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!a)return;if(this.pmView.dragging)throw new Error("New drag was started while an existing drag is ongoing");const l=document.createElement("div");l.innerHTML=a;const c=So.fromSchema(this.pmView.state.schema).parse(l,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new j(c.content,0,0),move:!0}}),A(this,"onDragOver",s=>{var i;if(this.sideMenuDetection==="editor"||s.synthetic||!((i=s.dataTransfer)!=null&&i.types.includes("blocknote/html")))return;const a=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!a||a.inside===-1&&this.pmView.dom.firstChild){const l=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(l)}}),A(this,"onKeyDown",s=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),A(this,"onMouseMove",s=>{var i;if(this.menuFrozen)return;this.mousePos={x:s.clientX,y:s.clientY};const a=this.pmView.dom.getBoundingClientRect(),l=this.mousePos.x>a.left&&this.mousePos.x<a.right&&this.mousePos.y>a.top&&this.mousePos.y<a.bottom,c=this.pmView.dom.parentElement;if(l&&s&&s.target&&!(c===s.target||c.contains(s.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),A(this,"onScroll",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state))}),this.editor=e,this.sideMenuDetection=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");o(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),dv(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}createSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();return n.clientX=e.clientX,n.clientY=e.clientY,e.clientX<r.left&&e.clientX>r.left-r.width*Il?n.clientX=r.left+r.width*Il/2:e.clientX>r.right&&e.clientX<r.right+r.width*Il?n.clientX=r.right-r.width*Il/2:(e.clientX<r.left||e.clientX>r.right)&&(n.clientX=r.left+Il*r.width*2),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,n}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const sY=new Te("SideMenuPlugin");class iY extends At{constructor(e,n){super(),A(this,"view"),A(this,"blockDragStart",(r,o)=>{this.view&&(this.view.isDragOrigin=!0),nY(r,o,this.editor)}),A(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&YP(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),A(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),A(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new me({key:sY,view:r=>(this.view=new oY(e,n,r,o=>{this.emit("update",o)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const Ou=new Map;function aY(t){if(Ou.has(t))return Ou.get(t);const e=new Da;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{Ou.delete(t)}),Ou.set(t,e),e}function lY(t,e,n="left"){const r=Ee.getState(t._tiptapEditor.state);if(!r){const s=aY(t),i=s.maps.length;return()=>s.slice(i).map(e,n==="left"?-1:1)}const o=Xc(e+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const s=Ee.getState(t._tiptapEditor.state),i=vi(s.doc,s.binding.type,o,s.binding.mapping);if(i===null)throw new Error("Position not found, cannot track positions");return i+(n==="right"?-1:0)}}const cY=Ap(t=>t.type.name==="blockContainer");class dY{constructor(e,n){A(this,"state"),A(this,"emitUpdate"),A(this,"rootEl"),A(this,"pluginState"),A(this,"handleScroll",()=>{var s,i;if((s=this.state)!=null&&s.show){const a=(i=this.rootEl)==null?void 0:i.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),A(this,"closeMenu",()=>{this.editor.transact(s=>s.setMeta(Ma,null))}),A(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(s=>s.selection.from)}).run()});var r,o;this.editor=e,this.pluginState=void 0,this.emitUpdate=s=>{var i;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(s,{...this.state,ignoreQueryLength:(i=this.pluginState)==null?void 0:i.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const o=Ma.getState(n),s=Ma.getState(e.state),i=o===void 0&&s!==void 0,a=o!==void 0&&s===void 0;if(!i&&!(o!==void 0&&s!==void 0)&&!a)return;if(this.pluginState=a?o:s,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const Ma=new Te("SuggestionMenuPlugin");class uY extends At{constructor(e){super(),A(this,"view"),A(this,"triggerCharacters",[]),A(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),A(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),A(this,"closeMenu",()=>this.view.closeMenu()),A(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new me({key:Ma,view:()=>(this.view=new dY(e,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,s,i)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(Ma);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const c=lY(e,i.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>c()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a==null?void 0:a.ignoreQueryLength}}if(o===void 0)return o;if(i.selection.from!==i.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&i.selection.from<o.queryStartPos()||!i.selection.$from.sameParent(i.doc.resolve(o.queryStartPos())))return;const l={...o};return l.query=i.doc.textBetween(o.queryStartPos(),i.selection.from),l}},props:{handleTextInput(r,o,s,i){return n.includes(i)?(r.dispatch(r.state.tr.insertText(i)),r.dispatch(r.state.tr.setMeta(Ma,{triggerCharacter:i}).scrollIntoView()),!0):!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const s=cY(r.selection);if(s)return be.create(r.doc,[Re.node(s.pos,s.pos+s.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return be.create(r.doc,[Re.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,n){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,n)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const hY=Mt.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),fY=Mt.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),pY=Mt.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}});let on;function ES(t){on||(on=document.createElement("div"),on.innerHTML="_",on.style.opacity="0",on.style.height="1px",on.style.width="1px",t instanceof Document?t.body.appendChild(on):t.appendChild(on))}function mY(t){on&&(t instanceof Document?t.body.removeChild(on):t.removeChild(on),on=void 0)}function Lu(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function gY(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function yY(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class bY{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"tableId"),A(this,"tablePos"),A(this,"tableElement"),A(this,"menuFrozen",!1),A(this,"mouseState","up"),A(this,"prevWasEditable",null),A(this,"viewMousedownHandler",()=>{this.mouseState="down"}),A(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),A(this,"mouseMoveHandler",o=>{var s,i,a,l,c,d,u;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const h=gY(o.target);if((h==null?void 0:h.type)==="cell"&&this.mouseState==="down"&&!((s=this.state)!=null&&s.draggingState)){this.mouseState="selecting",(i=this.state)!=null&&i.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!h||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!h.tbodyNode)return;const f=h.tbodyNode.getBoundingClientRect(),p=KP(h.domNode,this.pmView);if(!p)return;this.tableElement=p.node;let g;const b=this.editor.transact(w=>En(p.id,w.doc));if(!b)throw new Error(`Block with ID ${p.id} not found`);const v=Ue(b.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(Eq("table",v,this.editor)&&(this.tablePos=b.posBeforeNode+1,g=v),!g)return;this.tableId=p.id;const x=(l=h.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if((h==null?void 0:h.type)==="wrapper"){const w=o.clientY>=f.bottom-1&&o.clientY<f.bottom+20,k=o.clientX>=f.right-1&&o.clientX<f.right+20,C=o.clientX>f.right||o.clientY>f.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:w,showAddOrRemoveColumnsButton:k,referencePosTable:f,block:g,widgetContainer:x,colIndex:C||(c=this.state)==null?void 0:c.colIndex,rowIndex:C||(d=this.state)==null?void 0:d.rowIndex,referencePosCell:C||(u=this.state)==null?void 0:u.referencePosCell}}else{const w=Lu(h.domNode),k=Lu(h.domNode.parentElement),C=h.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===p.id&&this.state.rowIndex===k&&this.state.colIndex===w)return;this.state={show:!0,showAddOrRemoveColumnsButton:w===g.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:k===g.content.rows.length-1,referencePosTable:f,block:g,draggingState:void 0,referencePosCell:C,colIndex:w,rowIndex:k,widgetContainer:x}}return this.emitUpdate(),!1}),A(this,"dragOverHandler",o=>{var s;if(((s=this.state)==null?void 0:s.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",yY(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const i={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(i.left,i.top).filter(g=>g.tagName==="TD"||g.tagName==="TH");if(a.length===0)return;const l=a[0];let c=!1;const d=Lu(l.parentElement),u=Lu(l),h=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,f=(this.state.draggingState.draggedCellOrientation==="row"?d:u)!==h;(this.state.rowIndex!==d||this.state.colIndex!==u)&&(this.state.rowIndex=d,this.state.colIndex=u,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const p=this.state.draggingState.draggedCellOrientation==="row"?i.top:i.left;this.state.draggingState.mousePos!==p&&(this.state.draggingState.mousePos=p,c=!0),c&&this.emitUpdate(),f&&this.editor.transact(g=>g.setMeta(Jl,!0))}),A(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:s,colIndex:i,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(s.draggedCellOrientation==="row"){if(!sP(this.state.block,s.originalIndex,a))return!1;const c=lG(this.state.block,s.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:c}})}else{if(!iP(this.state.block,s.originalIndex,i))return!1;const c=aG(this.state.block,s.originalIndex,i),[d]=l.splice(s.originalIndex,1);l.splice(i,0,d),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:c}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=tv(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const s=o.children[this.state.rowIndex].children[this.state.colIndex];s?this.state.referencePosCell=s.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const Jl=new Te("TableHandlesPlugin");class vY extends At{constructor(e){super(),A(this,"view"),A(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Jl,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");ES(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(on,0,0),n.dataTransfer.effectAllowed="move"}),A(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Jl,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");ES(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(on,0,0),n.dataTransfer.effectAllowed="copyMove"}),A(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(Jl,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");mY(this.editor.prosemirrorView.root)}),A(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),A(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),A(this,"getCellsAtRowHandle",(n,r)=>_b(n,r)),A(this,"getCellsAtColumnHandle",(n,r)=>Pb(n,r)),A(this,"setCellSelection",(n,r,o=r)=>{const s=this.view;if(!s)throw new Error("Table handles view not initialized");const i=n.doc.resolve(s.tablePos+1),a=n.doc.resolve(i.posAtIndex(r.row)+1),l=n.doc.resolve(a.posAtIndex(r.col)),c=n.doc.resolve(i.posAtIndex(o.row)+1),d=n.doc.resolve(c.posAtIndex(o.col)),u=n.tr;return u.setSelection(new _e(l,d)),n.apply(u)}),A(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,s)=>{const i=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?iH(i,s):aH(i,s):r.side==="left"?tH(i,s):nH(i,s)})}),A(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,s)=>{const i=this.setCellSelection(o,{row:n,col:0});return cH(i,s)}):this.editor.exec((o,s)=>{const i=this.setCellSelection(o,{row:0,col:n});return oH(i,s)})),A(this,"mergeCells",n=>this.editor.exec((r,o)=>{const s=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return uH(s,o)})),A(this,"splitCell",n=>this.editor.exec((r,o)=>{const s=n?this.setCellSelection(r,n):r;return hH(s,o)})),A(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,s=r.$to;if(Lb(r)){const{ranges:p}=r;p.forEach(g=>{o=g.$from.min(o??g.$from),s=g.$to.max(s??g.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),s=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||s.pos===0)return;const i=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(s.pos-s.parentOffset-1),l=n.doc.resolve(i.pos-i.parentOffset-1),c=o.index(i.depth),d=i.index(l.depth),u=s.index(a.depth),h=a.index(l.depth),f=[];for(let p=d;p<=h;p++)for(let g=c;g<=u;g++)f.push({row:p,col:g});return{from:{row:d,col:c},to:{row:h,col:u},cells:f}})),A(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=Lb(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const s=this.getCellSelection();if(s)return uG(s.from,s.to,n)?"vertical":"horizontal"})),A(this,"cropEmptyRowsOrColumns",(n,r)=>cG(n,r)),A(this,"addRowsOrColumns",(n,r,o)=>dG(n,r,o)),this.editor=e,this.addProsemirrorPlugin(new me({key:Jl,view:n=>(this.view=new bY(e,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:s,draggingState:i}=this.view.state,{originalIndex:a,draggedCellOrientation:l}=i;if(r===a||!s||l==="row"&&!sP(s,a,r)||l==="col"&&!iP(s,a,r))return be.create(n.doc,o);const c=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?_b(this.view.state.block,r).forEach(({row:d,col:u})=>{const h=n.doc.resolve(c.posAtIndex(d)+1),f=n.doc.resolve(h.posAtIndex(u)+1),p=f.node(),g=f.pos+(r>a?p.nodeSize-2:0);o.push(Re.widget(g,()=>{const b=document.createElement("div");return b.className="bn-table-drop-cursor",b.style.left="0",b.style.right="0",r>a?b.style.bottom="-2px":b.style.top="-3px",b.style.height="4px",b}))}):Pb(this.view.state.block,r).forEach(({row:d,col:u})=>{const h=n.doc.resolve(c.posAtIndex(d)+1),f=n.doc.resolve(h.posAtIndex(u)+1),p=f.node(),g=f.pos+(r>a?p.nodeSize-2:0);o.push(Re.widget(g,()=>{const b=document.createElement("div");return b.className="bn-table-drop-cursor",b.style.top="0",b.style.bottom="0",r>a?b.style.right="-2px":b.style.left="-3px",b.style.width="4px",b}))}),be.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const wY=Ne.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),xY=Ne.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:it.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):it.textColor.default,renderHTML:t=>t.textColor===it.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),kY=Ne.create({name:"trailingNode",addProseMirrorPlugins(){const t=new Te(this.name);return[new me({key:t,appendTransaction:(e,n,r)=>{const{doc:o,tr:s,schema:i}=r,a=t.getState(r),l=o.content.size-2,c=i.nodes.blockContainer,d=i.nodes.paragraph;if(a)return s.insert(l,c.create(void 0,d.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let r=e.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),CY={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},SY=Zr.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(CY))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[s,i]of Object.entries(t))s!=="class"&&n.setAttribute(s,i);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},o=document.createElement("div");o.className=Be("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[s,i]of Object.entries(r))s!=="class"&&o.setAttribute(s,i);return n.appendChild(o),{dom:n,contentDOM:o}}}),TY=Zr.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=Be("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,s]of Object.entries(n))o!=="class"&&r.setAttribute(o,s);return{dom:r,contentDOM:r}}}),EY=Zr.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class MY extends At{constructor({editor:e,collaboration:n}){super(e),A(this,"editor"),A(this,"collaboration"),A(this,"forkedState"),this.editor=e,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,n){const r=e.doc;if(e._item===null){const o=Array.from(r.share.keys()).find(s=>r.share.get(s)===e);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,e.constructor)}else{const o=e._item,s=n.store.clients.get(o.id.client)??[],i=Kn(s,o.id.clock);return s[i].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){if(this.isForkedFromRemote)return;const e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");const n=new Bs;$C(n,HC(e.doc));const r=this.findTypeInOtherYdoc(e,n);this.forkedState={originalFragment:e,forkedFragment:r},this.editor._tiptapEditor.unregisterPlugin([Kl,Ir,Ee]),this.editor._tiptapEditor.registerPlugin(new Bb(r).plugins[0]),this.editor._tiptapEditor.registerPlugin(new Vb().plugins[0]),this.emit("forked",!0)}merge({keepChanges:e}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(Ee),this.editor._tiptapEditor.unregisterPlugin(Ir);const{originalFragment:n,forkedFragment:r}=this.forkedState;if(e){const o=HC(r.doc);$C(n.doc,o)}this.editor.extensions.ySyncPlugin=new Bb(n),this.editor.extensions.yCursorPlugin=new zP(this.collaboration),this.editor.extensions.yUndoPlugin=new Vb,this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),this.forkedState=void 0,this.emit("forked",!1)}}const AY=t=>{var e;const n={},r=RY(t);for(const s of r)n[s.name]=s;t.collaboration&&(n.ySyncPlugin=new Bb(t.collaboration.fragment),n.yUndoPlugin=new Vb,(e=t.collaboration.provider)!=null&&e.awareness&&(n.yCursorPlugin=new zP(t.collaboration)),n.forkYDocPlugin=new MY({editor:t.editor,collaboration:t.collaboration})),n.formattingToolbar=new $K(t.editor),n.linkToolbar=new qK(t.editor),n.sideMenu=new iY(t.editor,t.sideMenuDetection),n.suggestionMenus=new uY(t.editor),n.filePanel=new jK(t.editor),n.placeholder=new ZK(t.editor,t.placeholders),(t.animations??!0)&&(n.animations=new QK),t.tableHandles&&(n.tableHandles=new vY(t.editor)),n.nodeSelectionKeyboard=new YK,n.showSelection=new eY(t.editor),t.comments&&(n.comments=new OK(t.editor,t.comments.threadStore,UP.name));const o=t.disableExtensions||[];for(const s of o)delete n[s];return n};let MS=!1;const RY=t=>{const e=[Pl.ClipboardTextSerializer,Pl.Commands,Pl.Editable,Pl.FocusEvents,Pl.Tabindex,FH,Ne.create({name:"dropCursor",addProseMirrorPlugins:()=>[t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})]}),Bp.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),HK,kF,hY,fY,pY,xF.extend({inclusive:!1}).configure({defaultProtocol:qP,protocols:MS?[]:GP}),...Object.values(t.styleSpecs).map(n=>n.implementation.mark.configure({editor:t.editor})),xY,PK,wY,Ne.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),EY,SY.configure({editor:t.editor,domAttributes:t.domAttributes}),UK.configure({editor:t.editor,tabBehavior:t.tabBehavior}),TY.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:t.editor,domAttributes:t.domAttributes})),n.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),_K(t.editor),AK(t.editor,t.pasteHandler||(n=>n.defaultPasteHandler())),uK(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[kY]:[],...t.comments?[UP]:[]];return MS=!0,t.collaboration||e.push(XH),e};function _Y(t,e){const n=[];return t.forEach((r,o,s)=>{s!==e&&n.push(r)}),_.from(n)}function PY(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],s=o.copy(o.content.addToEnd(t.child(r)));n[n.length-1]=s}else{const o=e.nodes.table.createChecked(void 0,t.child(r));n.push(o)}else n.push(t.child(r));return t=_.from(n),t}function DY(t,e){let n=_.from(t.content);if(n=PY(n,e.state.schema),!IY(n,e))return new j(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const i=n.child(r+1).child(0).child(0);(i.type.name==="bulletListItem"||i.type.name==="numberedListItem"||i.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=_Y(n,r+1))}const s=e.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,s)}return new j(n,t.openStart,t.openEnd)}function IY(t,e){var n,r;const o=t.childCount===1,s=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",i=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(s)return!1;if(i){const a=Le(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const Hb=class extends c6{constructor(e,n){super({...e,content:void 0}),A(this,"_state"),A(this,"mount",(a,l,c)=>{l?(this.options.element=l,this.createViewAlternative(a,c)):this.destroy()});const r=this.schema;let o;const s=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=s.apply(r.nodes.doc,a),c=JSON.parse(JSON.stringify(l.toJSON()));return c.content[0].content[0].attrs.id="initialBlockId",o=Co.fromJSON(r,c),o};let i;try{const a=e==null?void 0:e.content.map(l=>Fi(l,this.schema,n).toJSON());i=zh({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=si.create({doc:i,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view){this._state=this.state.apply(e),this.emit("transaction",{editor:this,transaction:e});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(e);return}const{state:n,transactions:r}=this.state.applyTransaction(e),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(s=>{s.type==="mark"&&s.config.addMarkView&&(r[s.name]=s.config.addMarkView(e))}),this.view=new VA({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};A(Hb,"create",(t,e)=>{var n,r;const o=(n=globalThis==null?void 0:globalThis.window)==null?void 0:n.setTimeout;typeof((r=globalThis==null?void 0:globalThis.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new Hb(t,e)}finally{o&&(globalThis.window.setTimeout=o)}});let JP=Hb;JP.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const NY={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let OY=class ZP extends fv{constructor(e){var n,r,o,s,i,a,l,c,d,u,h,f,p,g,b;super(),A(this,"pmSchema"),A(this,"extensions",{}),A(this,"headless",!1),A(this,"_tiptapEditor"),A(this,"elementRenderer",null),A(this,"blockCache",new WeakMap),A(this,"dictionary"),A(this,"schema"),A(this,"blockImplementations"),A(this,"inlineContentImplementations"),A(this,"styleImplementations"),A(this,"formattingToolbar"),A(this,"linkToolbar"),A(this,"sideMenu"),A(this,"suggestionMenus"),A(this,"filePanel"),A(this,"tableHandles"),A(this,"comments"),A(this,"showSelectionPlugin"),A(this,"forkYDocPlugin"),A(this,"uploadFile"),A(this,"onUploadStartCallbacks",[]),A(this,"onUploadEndCallbacks",[]),A(this,"resolveFileUrl"),A(this,"resolveUsers"),A(this,"settings"),A(this,"activeTransaction",null),A(this,"mount",(T,E)=>{this._tiptapEditor.mount(this,T,E)}),this.options=e;const v=e;if(v.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(v.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(v.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(v.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||ZW,this.settings={tables:{splitCells:((n=e==null?void 0:e.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e==null?void 0:e.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=e==null?void 0:e.tables)==null?void 0:o.cellTextColor)??!1,headers:((s=e==null?void 0:e.tables)==null?void 0:s.headers)??!1},codeBlock:{indentLineWithTab:((i=e==null?void 0:e.codeBlock)==null?void 0:i.indentLineWithTab)??!0,defaultLanguage:((a=e==null?void 0:e.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((l=e==null?void 0:e.codeBlock)==null?void 0:l.supportedLanguages)??{},createHighlighter:((c=e==null?void 0:e.codeBlock)==null?void 0:c.createHighlighter)??void 0}};const x={defaultStyles:!0,schema:e.schema||cv.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(x.comments&&!x.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=x.resolveUsers,this.schema=x.schema,this.blockImplementations=x.schema.blockSpecs,this.inlineContentImplementations=x.schema.inlineContentSpecs,this.styleImplementations=x.schema.styleSpecs,this.extensions=AY({editor:this,domAttributes:x.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:x.collaboration,trailingBlock:x.trailingBlock,disableExtensions:x.disableExtensions,setIdAttribute:x.setIdAttribute,animations:x.animations??!0,tableHandles:rn("table",this),dropCursor:this.options.dropCursor??YW,placeholders:x.placeholders,tabBehavior:x.tabBehavior,sideMenuDetection:x.sideMenuDetection||"viewport",comments:x.comments,pasteHandler:x.pasteHandler}),(((d=x._tiptapOptions)==null?void 0:d.extensions)||[]).forEach(T=>{this.extensions[T.name]=T});for(let T of x.extensions||[]){typeof T=="function"&&(T=T(this));const E=T.constructor.key();if(!E)throw new Error(`Extension ${T.constructor.name} does not have a key method`);if(this.extensions[E])throw new Error(`Extension ${T.constructor.name} already exists with key ${E}`);this.extensions[E]=T}if(Object.entries(x._extensions||{}).forEach(([T,E])=>{const M=typeof E=="function"?E(this):E;if(!("plugin"in M)){this.extensions[T]=M;return}this.extensions[T]=new class extends At{static key(){return T}constructor(){super(),this.addProsemirrorPlugin(M.plugin)}get priority(){return M.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,x.uploadFile){const T=x.uploadFile;this.uploadFile=async(E,M)=>{this.onUploadStartCallbacks.forEach(R=>R.apply(this,[M]));try{return await T(E,M)}finally{this.onUploadEndCallbacks.forEach(R=>R.apply(this,[M]))}}}this.resolveFileUrl=x.resolveFileUrl,this.headless=x._headless;const w="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;w&&x.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const k=x.initialContent||(w?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:Bp.options.generateID()}]);if(!Array.isArray(k)||k.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+k);const C=[...Object.entries(this.extensions).map(([T,E])=>{if(E instanceof Ne||E instanceof Zr||E instanceof Mt)return E;if(!(E instanceof At&&!E.plugins.length))return Ne.create({name:T,priority:E.priority,addProseMirrorPlugins:()=>E.plugins})})].filter(T=>T!==void 0),S={...NY,...x._tiptapOptions,content:k,extensions:C,editorProps:{...(u=x._tiptapOptions)==null?void 0:u.editorProps,attributes:{tabIndex:"0",...(f=(h=x._tiptapOptions)==null?void 0:h.editorProps)==null?void 0:f.attributes,...(p=x.domAttributes)==null?void 0:p.editor,class:Be("bn-editor",x.defaultStyles?"bn-default-styles":"",((b=(g=x.domAttributes)==null?void 0:g.editor)==null?void 0:b.class)||"")},transformPasted:DY}};this.headless?this.pmSchema=O$(S.extensions):(this._tiptapEditor=JP.create(S,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(e={}){return new ZP(e)}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(e,n=e.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>oG(e.doc,this.pmSchema))}getBlock(e){return this.transact(n=>Uq(n.doc,e))}getPrevBlock(e){return this.transact(n=>Wq(n.doc,e))}getNextBlock(e){return this.transact(n=>Gq(n.doc,e))}getParentBlock(e){return this.transact(n=>qq(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function o(s){for(const i of s){if(e(i)===!1)return!1;const a=n?i.children.slice().reverse():i.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>Xq(e))}setTextCursorPosition(e,n="start"){return this.transact(r=>NP(r,e,n))}getSelection(){return this.transact(e=>Yq(e))}getSelectionCutBlocks(){return this.transact(e=>Zq(e))}setSelection(e,n){return this.transact(r=>Jq(r,e,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,n,r="before"){return this.transact(o=>mG(o,e,n,r))}updateBlock(e,n){return this.transact(r=>yG(r,e,n))}removeBlocks(e){return this.transact(n=>cS(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.transact(r=>cS(r,e,n))}undo(){return this.options.collaboration?this.exec(UW):this.exec(b1)}redo(){return this.options.collaboration?this.exec(WW):this.exec(v1)}insertInlineContent(e,{updateSelection:n=!1}={}){const r=mr(e,this.pmSchema);this.transact(o=>{Kq(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(e=>{const n={},r=e.selection.$to.marks();for(const o of r){const s=this.schema.styleSchema[o.type.name];if(!s){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}s.propSchema==="boolean"?n[s.type]=!0:n[s.type]=o.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new zr(o.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new zr(o.propSchema)}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.pmSchema.mark("link",{href:e});this.transact(o=>{const{from:s,to:i}=o.selection;n?o.insertText(n,s,i).addMark(s,s+n.length,r):o.setSelection(U.create(o.doc,i)).addMark(s,i,r)})}canNestBlock(){return Fq(this)}nestBlock(){IP(this)}canUnnestBlock(){return zq(this)}unnestBlock(){Hq(this)}moveBlocksUp(){return Bq(this)}moveBlocksDown(){return Vq(this)}async blocksToHTMLLossy(e=this.document){return Fp(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return kG(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return LP(e,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return tK(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return lK(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}onChange(e){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{e(this,{getChanges:()=>pG(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(e,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(Ee)&&!n||e(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(s=>s.$from.pos)),o=Math.max(...n.map(s=>s.$to.pos));if(eb(e)){const s=this.prosemirrorView.nodeDOM(r);if(s)return s.getBoundingClientRect()}return Wh(this.prosemirrorView,r,o)}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}openSuggestionMenu(e,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:(n==null?void 0:n.deleteTriggerCharacter)||!1,ignoreQueryLength:(n==null?void 0:n.ignoreQueryLength)||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return OP(e.trim()).innerHTML}pasteHTML(e,n=!1){var r;let o=e;n||(o=this.convertHtmlToBlockNoteHtml(e)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(e){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await jP(e))}},Pg;async function LY(){return Pg||(Pg=(async()=>{const[t,e]=await Promise.all([kt(()=>import("./module-BvCTiNll.js"),[]),kt(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),Pg)}async function jY(t,e){if(!Tq("text",t))return[];const{emojiData:n,emojiMart:r}=await LY();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(o=>({id:o.skins[0].native,onItemClick:()=>t.insertInlineContent(o.skins[0].native+" ")}))}function Fb(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Ua(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&o3(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function XP(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function QP(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function BY(t){return $Y()?!1:!AS()&&t.width===0&&t.height===0||AS()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function eD(){return/apple/i.test(navigator.vendor)}function AS(){const t=/android/i;return t.test(XP())||t.test(QP())}function VY(){return XP().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function $Y(){return QP().includes("jsdom/")}function zb(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function HY(t){return"nativeEvent"in t}function FY(t){return t.matches("html,body")}function ys(t){return(t==null?void 0:t.ownerDocument)||document}function Dg(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function ua(t){return"composedPath"in t?t.composedPath()[0]:t.target}const zY="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function UY(t){return P0(t)&&t.matches(zY)}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var WY=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ub=WY.join(","),tD=typeof Element>"u",nd=tD?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,If=!tD&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Nf=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",i=s||n&&e&&t(e.parentNode);return i},GY=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},qY=function(e,n,r){if(Nf(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(Ub));return n&&nd.call(e,Ub)&&o.unshift(e),o=o.filter(r),o},KY=function t(e,n,r){for(var o=[],s=Array.from(e);s.length;){var i=s.shift();if(!Nf(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,c=t(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else{var d=nd.call(i,Ub);d&&r.filter(i)&&(n||!e.includes(i))&&o.push(i);var u=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),h=!Nf(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(u&&h){var f=t(u===!0?i.children:u.children,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:i,candidates:f})}else s.unshift.apply(s,i.children)}}return o},nD=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},rD=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||GY(e))&&!nD(e)?0:e.tabIndex},YY=function(e,n){var r=rD(e);return r<0&&n&&!nD(e)?0:r},JY=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},oD=function(e){return e.tagName==="INPUT"},ZY=function(e){return oD(e)&&e.type==="hidden"},XY=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},QY=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},eJ=function(e){if(!e.name)return!0;var n=e.form||If(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=QY(o,e.form);return!s||s===e},tJ=function(e){return oD(e)&&e.type==="radio"},nJ=function(e){return tJ(e)&&!eJ(e)},rJ=function(e){var n,r=e&&If(e),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var i,a,l;for(s=!!((i=o)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&o;){var c,d,u;r=If(o),o=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=o)!==null&&d!==void 0&&(u=d.ownerDocument)!==null&&u!==void 0&&u.contains(o))}}return s},RS=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},oJ=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=nd.call(e,"details>summary:first-of-type"),i=s?e.parentElement:e;if(nd.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var l=e.parentElement,c=If(e);if(l&&!l.shadowRoot&&o(l)===!0)return RS(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(rJ(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return RS(e);return!1},sJ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return nd.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},iJ=function(e,n){return!(n.disabled||Nf(n)||ZY(n)||oJ(n,e)||XY(n)||sJ(n))},_S=function(e,n){return!(nJ(n)||rD(n)<0||!iJ(e,n))},aJ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},lJ=function t(e){var n=[],r=[];return e.forEach(function(o,s){var i=!!o.scopeParent,a=i?o.scopeParent:o,l=YY(a,i),c=i?t(o.candidates):a;l===0?i?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:c})}),r.sort(JY).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},sD=function(e,n){n=n||{};var r;return n.getShadowRoot?r=KY([e],n.includeContainer,{filter:_S.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:aJ}):r=qY(e,n.includeContainer,_S.bind(null,n)),lJ(r)};const iD={...a3},cJ=iD.useInsertionEffect,dJ=cJ||(t=>t());function yo(t){const e=y.useRef(()=>{});return dJ(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var Vt=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Wb(){return Wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wb.apply(this,arguments)}let PS=!1,uJ=0;const DS=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+uJ++;function hJ(){const[t,e]=y.useState(()=>PS?DS():void 0);return Vt(()=>{t==null&&e(DS())},[]),y.useEffect(()=>{PS=!0},[]),t}const fJ=iD.useId,pv=fJ||hJ;function pJ(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const mJ=y.createContext(null),gJ=y.createContext(null),mv=()=>{var t;return((t=y.useContext(mJ))==null?void 0:t.id)||null},gv=()=>y.useContext(gJ);function Fd(t){return"data-floating-ui-"+t}function di(t){const e=y.useRef(t);return Vt(()=>{e.current=t}),e}const IS=Fd("safe-polygon");function bh(t,e,n){return n&&!zb(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function yJ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:i}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:u=0,move:h=!0}=e,f=gv(),p=mv(),g=di(c),b=di(l),v=di(n),x=y.useRef(),w=y.useRef(-1),k=y.useRef(),C=y.useRef(-1),S=y.useRef(!0),T=y.useRef(!1),E=y.useRef(()=>{}),M=y.useRef(!1),R=y.useCallback(()=>{var N;const B=(N=o.current.openEvent)==null?void 0:N.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[o]);y.useEffect(()=>{if(!a)return;function N(B){let{open:H}=B;H||(clearTimeout(w.current),clearTimeout(C.current),S.current=!0,M.current=!1)}return s.on("openchange",N),()=>{s.off("openchange",N)}},[a,s]),y.useEffect(()=>{if(!a||!g.current||!n)return;function N(H){R()&&r(!1,H,"hover")}const B=ys(i.floating).documentElement;return B.addEventListener("mouseleave",N),()=>{B.removeEventListener("mouseleave",N)}},[i.floating,n,r,a,g,R]);const P=y.useCallback(function(N,B,H){B===void 0&&(B=!0),H===void 0&&(H="hover");const Z=bh(b.current,"close",x.current);Z&&!k.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,N,H),Z)):B&&(clearTimeout(w.current),r(!1,N,H))},[b,r]),L=yo(()=>{E.current(),k.current=void 0}),$=yo(()=>{if(T.current){const N=ys(i.floating).body;N.style.pointerEvents="",N.removeAttribute(IS),T.current=!1}}),F=yo(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);y.useEffect(()=>{if(!a)return;function N(G){if(clearTimeout(w.current),S.current=!1,d&&!zb(x.current)||u>0&&!bh(b.current,"open"))return;const X=bh(b.current,"open",x.current);X?w.current=window.setTimeout(()=>{v.current||r(!0,G,"hover")},X):n||r(!0,G,"hover")}function B(G){if(F())return;E.current();const X=ys(i.floating);if(clearTimeout(C.current),M.current=!1,g.current&&o.current.floatingContext){n||clearTimeout(w.current),k.current=g.current({...o.current.floatingContext,tree:f,x:G.clientX,y:G.clientY,onClose(){$(),L(),F()||P(G,!0,"safe-polygon")}});const Fe=k.current;X.addEventListener("mousemove",Fe),E.current=()=>{X.removeEventListener("mousemove",Fe)};return}(x.current==="touch"?!Ua(i.floating,G.relatedTarget):!0)&&P(G)}function H(G){F()||o.current.floatingContext&&(g.current==null||g.current({...o.current.floatingContext,tree:f,x:G.clientX,y:G.clientY,onClose(){$(),L(),F()||P(G)}})(G))}if(Wt(i.domReference)){var Z;const G=i.domReference;return n&&G.addEventListener("mouseleave",H),(Z=i.floating)==null||Z.addEventListener("mouseleave",H),h&&G.addEventListener("mousemove",N,{once:!0}),G.addEventListener("mouseenter",N),G.addEventListener("mouseleave",B),()=>{var X;n&&G.removeEventListener("mouseleave",H),(X=i.floating)==null||X.removeEventListener("mouseleave",H),h&&G.removeEventListener("mousemove",N),G.removeEventListener("mouseenter",N),G.removeEventListener("mouseleave",B)}}},[i,a,t,d,u,h,P,L,$,r,n,v,f,b,g,o,F]),Vt(()=>{var N;if(a&&n&&(N=g.current)!=null&&N.__options.blockPointerEvents&&R()){T.current=!0;const H=i.floating;if(Wt(i.domReference)&&H){var B;const Z=ys(i.floating).body;Z.setAttribute(IS,"");const G=i.domReference,X=f==null||(B=f.nodesRef.current.find(pe=>pe.id===p))==null||(B=B.context)==null?void 0:B.elements.floating;return X&&(X.style.pointerEvents=""),Z.style.pointerEvents="none",G.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{Z.style.pointerEvents="",G.style.pointerEvents="",H.style.pointerEvents=""}}}},[a,n,p,i,f,g,R]),Vt(()=>{n||(x.current=void 0,M.current=!1,L(),$())},[n,L,$]),y.useEffect(()=>()=>{L(),clearTimeout(w.current),clearTimeout(C.current),$()},[a,i.domReference,L,$]);const z=y.useMemo(()=>{function N(B){x.current=B.pointerType}return{onPointerDown:N,onPointerEnter:N,onMouseMove(B){const{nativeEvent:H}=B;function Z(){!S.current&&!v.current&&r(!0,H,"hover")}d&&!zb(x.current)||n||u===0||M.current&&B.movementX**2+B.movementY**2<2||(clearTimeout(C.current),x.current==="touch"?Z():(M.current=!0,C.current=window.setTimeout(Z,u)))}}},[d,r,n,v,u]),J=y.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(N){F()||P(N.nativeEvent,!1)}}),[P,F]);return y.useMemo(()=>a?{reference:z,floating:J}:{},[a,z,J])}const Gb=()=>{},aD=y.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Gb,setState:Gb,isInstantPhase:!1}),bJ=()=>y.useContext(aD);function vJ(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,s]=y.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),i=y.useRef(null),a=y.useCallback(l=>{s({currentId:l})},[]);return Vt(()=>{o.currentId?i.current===null?i.current=o.currentId:o.isInstantPhase||s({isInstantPhase:!0}):(o.isInstantPhase&&s({isInstantPhase:!1}),i.current=null)},[o.currentId,o.isInstantPhase]),y.createElement(aD.Provider,{value:y.useMemo(()=>({...o,setState:s,setCurrentId:a}),[o,a])},e)}function wJ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:s,enabled:i=!0}=e,a=s??o,l=bJ(),{currentId:c,setCurrentId:d,initialDelay:u,setState:h,timeoutMs:f}=l;return Vt(()=>{i&&c&&(h({delay:{open:1,close:bh(u,"close")}}),c!==a&&r(!1))},[i,a,r,h,c,u]),Vt(()=>{function p(){r(!1),h({delay:u,currentId:null})}if(i&&c&&!n&&c===a){if(f){const g=window.setTimeout(p,f);return()=>{clearTimeout(g)}}p()}},[i,n,h,c,a,r,u,f]),Vt(()=>{i&&(d===Gb||!n||d(a))},[i,n,d,a]),l}function Ig(t,e){let n=t.filter(o=>{var s;return o.parentId===e&&((s=o.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(o=>{var s;return(s=r)==null?void 0:s.some(i=>{var a;return o.parentId===i.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const lD=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function cD(t,e){const n=sD(t,lD());e==="prev"&&n.reverse();const r=n.indexOf(Fb(ys(t)));return n.slice(r+1)[0]}function xJ(){return cD(document.body,"next")}function kJ(){return cD(document.body,"prev")}function Ng(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Ua(n,r)}function CJ(t){sD(t,lD()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function NS(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const dD={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let SJ;function OS(t){t.key==="Tab"&&(t.target,clearTimeout(SJ))}const LS=y.forwardRef(function(e,n){const[r,o]=y.useState();Vt(()=>(eD()&&o("button"),document.addEventListener("keydown",OS),()=>{document.removeEventListener("keydown",OS)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Fd("focus-guard")]:"",style:dD};return y.createElement("span",Wb({},e,s))}),uD=y.createContext(null),jS=Fd("portal");function TJ(t){t===void 0&&(t={});const{id:e,root:n}=t,r=pv(),o=MJ(),[s,i]=y.useState(null),a=y.useRef(null);return Vt(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),Vt(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(jS,""),l.appendChild(c),a.current=c,i(c)},[e,r]),Vt(()=>{if(n===null||!r||a.current)return;let l=n||(o==null?void 0:o.portalNode);l&&!Wt(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const d=document.createElement("div");d.id=r,d.setAttribute(jS,""),l=c||l,l.appendChild(d),a.current=d,i(d)},[e,n,r,o]),s}function EJ(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,s=TJ({id:n,root:r}),[i,a]=y.useState(null),l=y.useRef(null),c=y.useRef(null),d=y.useRef(null),u=y.useRef(null),h=i==null?void 0:i.modal,f=i==null?void 0:i.open,p=!!i&&!i.modal&&i.open&&o&&!!(r||s);return y.useEffect(()=>{if(!s||!o||h)return;function g(b){s&&Ng(b)&&(b.type==="focusin"?NS:CJ)(s)}return s.addEventListener("focusin",g,!0),s.addEventListener("focusout",g,!0),()=>{s.removeEventListener("focusin",g,!0),s.removeEventListener("focusout",g,!0)}},[s,o,h]),y.useEffect(()=>{s&&(f||NS(s))},[f,s]),y.createElement(uD.Provider,{value:y.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:u,portalNode:s,setFocusManagerState:a}),[o,s])},p&&s&&y.createElement(LS,{"data-type":"outside",ref:l,onFocus:g=>{if(Ng(g,s)){var b;(b=d.current)==null||b.focus()}else{const v=kJ()||(i==null?void 0:i.refs.domReference.current);v==null||v.focus()}}}),p&&s&&y.createElement("span",{"aria-owns":s.id,style:dD}),s&&St.createPortal(e,s),p&&s&&y.createElement(LS,{"data-type":"outside",ref:c,onFocus:g=>{if(Ng(g,s)){var b;(b=u.current)==null||b.focus()}else{const v=xJ()||(i==null?void 0:i.refs.domReference.current);v==null||v.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,g.nativeEvent,"focus-out"))}}}))}const MJ=()=>y.useContext(uD),AJ="data-floating-ui-focusable",RJ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},_J={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},BS=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function hD(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=t,{enabled:i=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:u="pointerdown",ancestorScroll:h=!1,bubbles:f,capture:p}=e,g=gv(),b=yo(typeof l=="function"?l:()=>!1),v=typeof l=="function"?b:l,x=y.useRef(!1),w=y.useRef(!1),{escapeKey:k,outsidePress:C}=BS(f),{escapeKey:S,outsidePress:T}=BS(p),E=y.useRef(!1),M=yo(z=>{var J;if(!n||!i||!a||z.key!=="Escape"||E.current)return;const N=(J=s.current.floatingContext)==null?void 0:J.nodeId,B=g?Ig(g.nodesRef.current,N):[];if(!k&&(z.stopPropagation(),B.length>0)){let H=!0;if(B.forEach(Z=>{var G;if((G=Z.context)!=null&&G.open&&!Z.context.dataRef.current.__escapeKeyBubbles){H=!1;return}}),!H)return}r(!1,HY(z)?z.nativeEvent:z,"escape-key")}),R=yo(z=>{var J;const N=()=>{var B;M(z),(B=ua(z))==null||B.removeEventListener("keydown",N)};(J=ua(z))==null||J.addEventListener("keydown",N)}),P=yo(z=>{var J;const N=x.current;x.current=!1;const B=w.current;if(w.current=!1,c==="click"&&B||N||typeof v=="function"&&!v(z))return;const H=ua(z),Z="["+Fd("inert")+"]",G=ys(o.floating).querySelectorAll(Z);let X=Wt(H)?H:null;for(;X&&!kx(X);){const ve=c3(X);if(kx(ve)||!Wt(ve))break;X=ve}if(G.length&&Wt(H)&&!FY(H)&&!Ua(H,o.floating)&&Array.from(G).every(ve=>!Ua(X,ve)))return;if(P0(H)&&F){const ve=H.clientWidth>0&&H.scrollWidth>H.clientWidth,Oe=H.clientHeight>0&&H.scrollHeight>H.clientHeight;let Ye=Oe&&z.offsetX>H.clientWidth;if(Oe&&d3(H).direction==="rtl"&&(Ye=z.offsetX<=H.offsetWidth-H.clientWidth),Ye||ve&&z.offsetY>H.clientHeight)return}const pe=(J=s.current.floatingContext)==null?void 0:J.nodeId,Fe=g&&Ig(g.nodesRef.current,pe).some(ve=>{var Oe;return Dg(z,(Oe=ve.context)==null?void 0:Oe.elements.floating)});if(Dg(z,o.floating)||Dg(z,o.domReference)||Fe)return;const Ke=g?Ig(g.nodesRef.current,pe):[];if(Ke.length>0){let ve=!0;if(Ke.forEach(Oe=>{var Ye;if((Ye=Oe.context)!=null&&Ye.open&&!Oe.context.dataRef.current.__outsidePressBubbles){ve=!1;return}}),!ve)return}r(!1,z,"outside-press")}),L=yo(z=>{var J;const N=()=>{var B;P(z),(B=ua(z))==null||B.removeEventListener(c,N)};(J=ua(z))==null||J.addEventListener(c,N)});y.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=k,s.current.__outsidePressBubbles=C;let z=-1;function J(G){r(!1,G,"ancestor-scroll")}function N(){window.clearTimeout(z),E.current=!0}function B(){z=window.setTimeout(()=>{E.current=!1},l3()?5:0)}const H=ys(o.floating);a&&(H.addEventListener("keydown",S?R:M,S),H.addEventListener("compositionstart",N),H.addEventListener("compositionend",B)),v&&H.addEventListener(c,T?L:P,T);let Z=[];return h&&(Wt(o.domReference)&&(Z=Qu(o.domReference)),Wt(o.floating)&&(Z=Z.concat(Qu(o.floating))),!Wt(o.reference)&&o.reference&&o.reference.contextElement&&(Z=Z.concat(Qu(o.reference.contextElement)))),Z=Z.filter(G=>{var X;return G!==((X=H.defaultView)==null?void 0:X.visualViewport)}),Z.forEach(G=>{G.addEventListener("scroll",J,{passive:!0})}),()=>{a&&(H.removeEventListener("keydown",S?R:M,S),H.removeEventListener("compositionstart",N),H.removeEventListener("compositionend",B)),v&&H.removeEventListener(c,T?L:P,T),Z.forEach(G=>{G.removeEventListener("scroll",J)}),window.clearTimeout(z)}},[s,o,a,v,c,n,r,h,i,k,C,M,S,R,P,T,L]),y.useEffect(()=>{x.current=!1},[v,c]);const $=y.useMemo(()=>({onKeyDown:M,[RJ[u]]:z=>{d&&r(!1,z.nativeEvent,"reference-press")}}),[M,r,d,u]),F=y.useMemo(()=>({onKeyDown:M,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[_J[c]]:()=>{x.current=!0}}),[M,c]);return y.useMemo(()=>i?{reference:$,floating:F}:{},[i,$,F])}function PJ(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=pv(),s=y.useRef({}),[i]=y.useState(()=>pJ()),a=mv()!=null,[l,c]=y.useState(r.reference),d=yo((f,p,g)=>{s.current.openEvent=f?p:void 0,i.emit("openchange",{open:f,event:p,reason:g,nested:a}),n==null||n(f,p,g)}),u=y.useMemo(()=>({setPositionReference:c}),[]),h=y.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return y.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:h,events:i,floatingId:o,refs:u}),[e,d,h,i,o,u])}function ol(t){t===void 0&&(t={});const{nodeId:e}=t,n=PJ({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[s,i]=y.useState(null),[a,l]=y.useState(null),d=(o==null?void 0:o.domReference)||s,u=y.useRef(null),h=gv();Vt(()=>{d&&(u.current=d)},[d]);const f=s3({...t,elements:{...o,...a&&{reference:a}}}),p=y.useCallback(w=>{const k=Wt(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;l(k),f.refs.setReference(k)},[f.refs]),g=y.useCallback(w=>{(Wt(w)||w===null)&&(u.current=w,i(w)),(Wt(f.refs.reference.current)||f.refs.reference.current===null||w!==null&&!Wt(w))&&f.refs.setReference(w)},[f.refs]),b=y.useMemo(()=>({...f.refs,setReference:g,setPositionReference:p,domReference:u}),[f.refs,g,p]),v=y.useMemo(()=>({...f.elements,domReference:d}),[f.elements,d]),x=y.useMemo(()=>({...f,...r,refs:b,elements:v,nodeId:e}),[f,b,v,e,r]);return Vt(()=>{r.dataRef.current.floatingContext=x;const w=h==null?void 0:h.nodesRef.current.find(k=>k.id===e);w&&(w.context=x)}),y.useMemo(()=>({...f,context:x,refs:b,elements:v}),[f,b,v,x])}function DJ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:s,elements:i}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=y.useRef(!1),d=y.useRef(),u=y.useRef(!0);y.useEffect(()=>{if(!a)return;const f=i3(i.domReference);function p(){!n&&P0(i.domReference)&&i.domReference===Fb(ys(i.domReference))&&(c.current=!0)}function g(){u.current=!0}return f.addEventListener("blur",p),f.addEventListener("keydown",g,!0),()=>{f.removeEventListener("blur",p),f.removeEventListener("keydown",g,!0)}},[i.domReference,n,a]),y.useEffect(()=>{if(!a)return;function f(p){let{reason:g}=p;(g==="reference-press"||g==="escape-key")&&(c.current=!0)}return o.on("openchange",f),()=>{o.off("openchange",f)}},[o,a]),y.useEffect(()=>()=>{clearTimeout(d.current)},[]);const h=y.useMemo(()=>({onPointerDown(f){BY(f.nativeEvent)||(u.current=!1)},onMouseLeave(){c.current=!1},onFocus(f){if(c.current)return;const p=ua(f.nativeEvent);if(l&&Wt(p))try{if(eD()&&VY())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!u.current&&!UY(p))return}r(!0,f.nativeEvent,"focus")},onBlur(f){c.current=!1;const p=f.relatedTarget,g=f.nativeEvent,b=Wt(p)&&p.hasAttribute(Fd("focus-guard"))&&p.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var v;const x=Fb(i.domReference?i.domReference.ownerDocument:document);!p&&x===i.domReference||Ua((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,x)||Ua(i.domReference,x)||b||r(!1,g,"focus")})}}),[s,i.domReference,r,l]);return y.useMemo(()=>a?{reference:h}:{},[a,h])}const VS="active",$S="selected";function Og(t,e,n){const r=new Map,o=n==="item";let s=t;if(o&&t){const{[VS]:i,[$S]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[AJ]:""},...s,...e.map(i=>{const a=i?i[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((i,a)=>(a&&Object.entries(a).forEach(l=>{let[c,d]=l;if(!(o&&[VS,$S].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var u;(u=r.get(c))==null||u.push(d),i[c]=function(){for(var h,f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];return(h=r.get(c))==null?void 0:h.map(b=>b(...p)).find(b=>b!==void 0)}}}else i[c]=d}),i),{})}}function fD(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),o=y.useCallback(a=>Og(a,t,"reference"),e),s=y.useCallback(a=>Og(a,t,"floating"),n),i=y.useCallback(a=>Og(a,t,"item"),r);return y.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const IJ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function NJ(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:s=!0,role:i="dialog"}=e,a=(n=IJ.get(i))!=null?n:i,l=pv(),d=mv()!=null,u=y.useMemo(()=>a==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&d&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[a,o,d,r,l,i]),h=y.useMemo(()=>{const p={id:o,...a&&{role:a}};return a==="tooltip"||i==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,i]),f=y.useCallback(p=>{let{active:g,selected:b}=p;const v={role:"option",...g&&{id:o+"-option"}};switch(i){case"select":return{...v,"aria-selected":g&&b};case"combobox":return{...v,...g&&{"aria-selected":!0}}}return{}},[o,i]);return y.useMemo(()=>s?{reference:u,floating:h,item:f}:{},[s,u,h,f])}const HS=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function ea(t,e){return typeof t=="function"?t(e):t}function OJ(t,e){const[n,r]=y.useState(t);return t&&!n&&r(!0),y.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function LJ(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,i=(typeof o=="number"?o:o.close)||0,[a,l]=y.useState("unmounted"),c=OJ(n,i);return!c&&a==="close"&&l("unmounted"),Vt(()=>{if(r){if(n){l("initial");const d=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(d)}}l("close")}},[n,r]),{isMounted:c,status:a}}function yv(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:s,duration:i=250}=e,a=t.placement,l=a.split("-")[0],c=y.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof i=="number",u=(d?i:i.open)||0,h=(d?i:i.close)||0,[f,p]=y.useState(()=>({...ea(s,c),...ea(n,c)})),{isMounted:g,status:b}=LJ(t,{duration:i}),v=di(n),x=di(r),w=di(o),k=di(s);return Vt(()=>{const C=ea(v.current,c),S=ea(w.current,c),T=ea(k.current,c),E=ea(x.current,c)||Object.keys(C).reduce((M,R)=>(M[R]="",M),{});if(b==="initial"&&p(M=>({transitionProperty:M.transitionProperty,...T,...C})),b==="open"&&p({transitionProperty:Object.keys(E).map(HS).join(","),transitionDuration:u+"ms",...T,...E}),b==="close"){const M=S||C;p({transitionProperty:Object.keys(M).map(HS).join(","),transitionDuration:h+"ms",...T,...M})}},[h,w,v,x,k,u,b,c]),{isMounted:g,styles:f}}var pD={exports:{}},Lg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS;function jJ(){if(FS)return Lg;FS=1;var t=D;function e(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function a(u,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,b=p[1];return s(function(){g.value=f,g.getSnapshot=h,l(g)&&b({inst:g})},[u,f,h]),o(function(){return l(g)&&b({inst:g}),u(function(){l(g)&&b({inst:g})})},[u]),i(f),f}function l(u){var h=u.getSnapshot;u=u.value;try{var f=h();return!n(u,f)}catch{return!0}}function c(u,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Lg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,Lg}pD.exports=jJ();var mD=pD.exports;const BJ=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},VJ=({contentComponent:t})=>{const e=mD.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return D.createElement(D.Fragment,null,Object.values(e))};function $J(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:LE.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class HJ extends D.Component{constructor(e){var n;super(e),this.editorContentRef=D.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=$J(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return D.createElement(D.Fragment,null,D.createElement("div",{ref:BJ(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&D.createElement(VJ,{contentComponent:e.contentComponent}))}}const FJ=y.forwardRef((t,e)=>{const n=D.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return D.createElement(HJ,{key:n,innerRef:e,...t})});D.memo(FJ);var jg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function zJ(){if(zS)return jg;zS=1;var t=D,e=mD;function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return jg.useSyncExternalStoreWithSelector=function(c,d,u,h,f){var p=s(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function v(S){if(!x){if(x=!0,w=S,S=h(S),f!==void 0&&g.hasValue){var T=g.value;if(f(T,S))return k=T}return k=S}if(T=k,r(w,S))return T;var E=h(S);return f!==void 0&&f(T,E)?T:(w=S,k=E)}var x=!1,w,k,C=u===void 0?null:u;return[function(){return v(d())},C===null?void 0:function(){return v(C())}]},[d,u,h,f]);var b=o(c,p[0],p[1]);return i(function(){g.hasValue=!0,g.value=b},[b]),l(b),b},jg}zJ();const UJ=y.createContext({editor:null});UJ.Consumer;const gD=y.createContext({onDragStart:void 0}),yD=()=>y.useContext(gD),WJ=D.forwardRef((t,e)=>{const{onDragStart:n}=yD(),r=t.as||"div";return D.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function GJ(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function qJ(t){var e;return typeof t=="object"&&((e=t.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class KJ{constructor(e,{editor:n,props:r={},as:o="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?St.flushSync(()=>{this.render()}):this.render()}render(){var e;const n=this.component,r=this.props,o=this.editor;(GJ(n)||qJ(n))&&(r.ref=s=>{this.ref=s}),this.reactElement=D.createElement(n,{...r}),(e=o==null?void 0:o.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n==null?void 0:n.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class YJ extends d6{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const c=d=>d.charAt(0).toUpperCase()+d.substring(1);this.component.displayName=c(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&c.appendChild(this.contentDOMElement)}},s=this.component,i=D.memo(c=>D.createElement(gD.Provider,{value:o},D.createElement(s,c)));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new KJ(i,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const o=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,i=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:s,oldDecorations:i,newNode:e,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,o({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=$h(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function JJ(t,e){return n=>n.editor.contentComponent?new YJ(t,n,e):{}}var ju={},US;function ZJ(){if(US)return ju;US=1;var t=u3();return ju.createRoot=t.createRoot,ju.hydrateRoot=t.hydrateRoot,ju}var XJ=ZJ();const bD=y.createContext(void 0);function to(t){return y.useContext(bD)}function te(t){const e=to();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function bv(t,e,n){const r=to();e||(e=r==null?void 0:r.editor),y.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}function QJ(t,e){const n=te();e=e||n;const[r,o]=y.useState(()=>{if(t)return e.getSelectionBoundingBox()}),s=y.useCallback(()=>{if(!t)return;const i=e.getSelectionBoundingBox();o(i)},[e,t]);return bv(s,e,!0),y.useEffect(()=>{o(t?e.getSelectionBoundingBox():void 0)},[t,e]),r}function eZ(t){return t.getBoundingClientRect!==void 0}function $s(t,e,n,r){const{refs:o,update:s,context:i,floatingStyles:a,isPositioned:l}=ol({open:t,...r}),{isMounted:c,styles:d}=yv(i),u=typeof(r==null?void 0:r.canDismiss)=="object"?r.canDismiss:{enabled:r==null?void 0:r.canDismiss},h=hD(i,u),{getReferenceProps:f,getFloatingProps:p}=fD([h]);return y.useEffect(()=>{s()},[e,s]),y.useEffect(()=>{e!==null&&(e instanceof HTMLElement||eZ(e)?o.setReference(e):o.setReference({getBoundingClientRect:()=>e}))},[e,o]),y.useMemo(()=>({isMounted:c,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...d,...a,zIndex:n},getFloatingProps:p,getReferenceProps:f,isPositioned:l}),[l,a,c,o.setFloating,o.setReference,d,n,p,f])}function Bo(t){const[e,n]=y.useState();return y.useEffect(()=>t(r=>{n({...r})}),[t]),e}const vD=y.createContext(void 0);function Y(){return y.useContext(vD)}const Wp=(t={},e=[])=>y.useMemo(()=>{const n=OY.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e);function ue(){return to().editor.dictionary}function vv(t,e){const n=to();e||(e=n==null?void 0:n.editor),y.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}const wv=t=>{const[e,n]=y.useState(!1),[r,o]=y.useState(t.editor.isEmpty),s=Y();vv(()=>{o(t.editor.isEmpty)},t.editor);const i=y.useCallback(()=>{n(!0)},[]),a=y.useCallback(()=>{n(!1)},[]);return y.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),m.jsxs(m.Fragment,{children:[m.jsx(s.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:i,onBlur:a,editable:t.editable}),t.actions&&m.jsx("div",{className:"bn-comment-actions-wrapper",children:m.jsx(t.actions,{isFocused:e,isEmpty:r})})]})},tZ=jo(Yn(av.paragraph.implementation.node.config),{}),{textColor:kye,backgroundColor:Cye,...nZ}=lv,xv=cv.create({blockSpecs:{paragraph:tZ},styleSpecs:nZ});function rZ(){const t=te();if(!t.comments)throw new Error("Comments plugin not found");const e=t.comments,n=Y(),r=ue(),o=Wp({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:xv,sideMenuDetection:"editor"});return m.jsx(n.Comments.Card,{className:"bn-thread",children:m.jsx(wv,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:s})=>m.jsx(n.Generic.Toolbar.Root,{className:Be("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:m.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:s,onClick:async()=>{await e.createThread({initialComment:{body:o.document}}),e.stopPendingComment()},children:"Save"})})})})}const oZ=t=>{const e=te();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=e.comments;y.useEffect(()=>{const d=n.onUpdate(u=>e.setForceSelectionVisible(u.pendingComment));return()=>d()},[n,e]);const r=Bo(n.onUpdate.bind(n)),o=QJ(r==null?void 0:r.pendingComment),{isMounted:s,ref:i,style:a,getFloatingProps:l}=$s((r==null?void 0:r.pendingComment)||!1,o||null,5e3,{placement:"bottom",middleware:[Kr(10),Vi(),cr()],onOpenChange:d=>{d||(n.stopPendingComment(),e.focus())},...t.floatingOptions});if(!s||!r)return null;const c=t.floatingComposer||rZ;return m.jsx("div",{ref:i,style:a,...l(),children:m.jsx(c,{})})};var wD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},WS=D.createContext&&D.createContext(wD),sZ=["attr","size","title"];function iZ(t,e){if(t==null)return{};var n=aZ(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Of.apply(this,arguments)}function GS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Lf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GS(Object(n),!0).forEach(function(r){lZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lZ(t,e,n){return e=cZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cZ(t){var e=dZ(t,"string");return typeof e=="symbol"?e:e+""}function dZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xD(t){return t&&t.map((e,n)=>D.createElement(e.tag,Lf({key:n},e.attr),xD(e.child)))}function ne(t){return e=>D.createElement(uZ,Of({attr:Lf({},t.attr)},e),xD(t.child))}function uZ(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=iZ(t,sZ),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),D.createElement("svg",Of({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:Lf(Lf({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&D.createElement("title",null,s),t.children)};return WS!==void 0?D.createElement(WS.Consumer,null,n=>e(n)):e(wD)}function hZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function kD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function fZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function pZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function kv(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function mZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function gZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function yZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function bZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function vZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function wZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function qS(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function CD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function SD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function TD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function xZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function kZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function KS(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function CZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function SZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function ED(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function MD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function AD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function RD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function TZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function EZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function _D(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function MZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function AZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function Cv(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function RZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function _Z(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function PD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function PZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function DZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function IZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function DD(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function NZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function OZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function LZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function jZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function BZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function VZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function $Z(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function HZ(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function YS(t){return ne({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}let Bg;async function FZ(){return Bg||(Bg=(async()=>{const[t,e]=await Promise.all([kt(()=>import("./module-BvCTiNll.js"),[]),kt(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),Bg)}function zZ(t){const e=y.useRef(null),n=y.useRef(null);return n.current&&n.current.update(t),y.useEffect(()=>((async()=>{const{emojiMart:r}=await FZ();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),D.createElement("div",{ref:e})}const JS=t=>{const[e,n]=y.useState(!1),r=Y(),o=to();return m.jsxs(r.Generic.Popover.Root,{opened:e,children:[m.jsx(r.Generic.Popover.Trigger,{children:m.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),n(!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),m.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:m.jsx(zZ,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:s=>{t.onEmojiSelect(s),n(!1)},theme:o==null?void 0:o.colorSchemePreference})})]})};function UZ(t,e){return Sv(t,[e]).get(e)}function Sv(t,e){const n=t.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=y.useCallback(()=>{const a=new Map;for(const l of e){const c=r.getUser(l);c&&a.set(l,c)}return a},[r,e]),s=y.useMemo(()=>({current:o()}),[o]),i=y.useCallback(a=>{const l=r.subscribe(c=>{s.current=o(),a()});return r.loadUsers(e),l},[r,o,e,s]);return y.useSyncExternalStore(i,()=>s.current)}const WZ=t=>{const e=Y(),n=ue(),r=te();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=t.comment.reactions.find(l=>l.emoji===t.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[s,i]=y.useState([]),a=Sv(r,s);return m.jsx(e.Generic.Badge.Root,{className:Be("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(t.comment,o.emoji),onClick:()=>t.onReactionSelect(o.emoji),onMouseEnter:()=>i(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},o.emoji)},GZ=({comment:t,thread:e,showResolveButton:n})=>{const r=ue(),o=Wp({initialContent:t.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:xv,sideMenuDetection:"editor"},[t.body]),s=Y(),[i,a]=y.useState(!1),l=te();if(!l.comments)throw new Error("Comments plugin not found");const c=l.comments.threadStore,d=y.useCallback(()=>{a(!0)},[]),u=y.useCallback(()=>{o.replaceBlocks(o.document,t.body),a(!1)},[o,t.body]),h=y.useCallback(async E=>{await c.updateComment({commentId:t.id,comment:{body:o.document},threadId:e.id}),a(!1)},[t,e.id,o,c]),f=y.useCallback(async()=>{await c.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,c]),p=y.useCallback(async E=>{c.auth.canAddReaction(t,E)?await c.addReaction({threadId:e.id,commentId:t.id,emoji:E}):c.auth.canDeleteReaction(t,E)&&await c.deleteReaction({threadId:e.id,commentId:t.id,emoji:E})},[c,t,e.id]),g=y.useCallback(async()=>{await c.resolveThread({threadId:e.id})},[e.id,c]),b=y.useCallback(async()=>{await c.unresolveThread({threadId:e.id})},[e.id,c]),v=UZ(l,t.userId);if(!t.body)return null;let x;const w=c.auth.canAddReaction(t),k=c.auth.canDeleteComment(t),C=c.auth.canUpdateComment(t),S=n&&(e.resolved?c.auth.canUnresolveThread(e):c.auth.canResolveThread(e));i||(x=m.jsxs(s.Generic.Toolbar.Root,{className:Be("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[w&&m.jsx(JS,{onEmojiSelect:E=>p(E.native),children:m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:m.jsx(YS,{size:16})},"add-reaction")}),S&&(e.resolved?m.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:b,children:m.jsx(hZ,{size:16})},"reopen"):m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:g,children:m.jsx(OZ,{size:16})},"resolve")),(k||C)&&m.jsxs(s.Generic.Menu.Root,{position:"bottom-start",children:[m.jsx(s.Generic.Menu.Trigger,{children:m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:m.jsx($Z,{size:16})},"more-actions")}),m.jsxs(s.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[C&&m.jsx(s.Generic.Menu.Item,{icon:m.jsx(fZ,{}),onClick:d,children:r.comments.actions.edit_comment},"edit-comment"),k&&m.jsx(s.Generic.Menu.Item,{icon:m.jsx(jZ,{}),onClick:f,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const T=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return m.jsx(s.Comments.Comment,{authorInfo:v??"loading",timeString:T,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:x,className:"bn-thread-comment",children:m.jsx(wv,{autoFocus:i,editor:o,editable:i,actions:t.reactions.length>0||i?({isEmpty:E})=>m.jsxs(m.Fragment,{children:[t.reactions.length>0&&!i&&m.jsxs(s.Generic.Badge.Group,{className:Be("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(M=>m.jsx(WZ,{comment:t,emoji:M.emoji,onReactionSelect:p},M.emoji)),m.jsx(JS,{onEmojiSelect:M=>p(M.native),children:m.jsx(s.Generic.Badge.Root,{className:Be("bn-badge","bn-comment-add-reaction"),text:"+",icon:m.jsx(YS,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),i&&m.jsxs(s.Generic.Toolbar.Root,{variant:"action-toolbar",className:Be("bn-action-toolbar","bn-comment-actions"),children:[m.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",onClick:h,isDisabled:E,children:"Save"}),m.jsx(s.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Cancel",variant:"compact",onClick:u,children:"Cancel"})]})]}):void 0})})},qZ=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=Y(),r=ue(),o=te(),s=Sv(o,t.resolvedBy?[t.resolvedBy]:[]),i=t.comments.map((a,l)=>m.jsx(GZ,{thread:t,comment:a,showResolveButton:l===0},a.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!s.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const a=t.comments.findLastIndex(l=>t.resolvedUpdatedAt.getTime()>l.createdAt.getTime())+1;i.splice(a,0,m.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&s.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:m.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&i.length>e&&i.splice(1,i.length-2,m.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),i},ID=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:s,tabIndex:i})=>{const a=Y(),l=ue(),c=te().comments;if(!c)throw new Error("Comments plugin not found");const d=Wp({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:xv,sideMenuDetection:"editor"}),u=y.useCallback(async()=>{await c.threadStore.addComment({comment:{body:d.document},threadId:t.id}),d.removeBlocks(d.document)},[c,d,t.id]);return m.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:s,selected:e,tabIndex:i,children:[m.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:m.jsx(qZ,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&m.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:m.jsx(wv,{autoFocus:!1,editable:!0,editor:d,actions:({isEmpty:h})=>h?null:m.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Be("bn-action-toolbar","bn-comment-actions"),children:m.jsx(a.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",isDisabled:h,onClick:u,children:"Save"})})})})]})};function KZ(t){const e=t.comments;if(!e)throw new Error("Comments plugin not found");const n=e.threadStore,r=y.useRef();r.current||(r.current=n.getThreads());const o=y.useCallback(s=>n.subscribe(i=>{r.current=i,s()}),[n]);return y.useSyncExternalStore(o,()=>r.current)}const YZ=t=>{const e=te();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=Bo(e.comments.onUpdate.bind(e.comments)),{isMounted:r,ref:o,style:s,getFloatingProps:i,setReference:a}=$s(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[Kr(10),Vi(),cr()],onOpenChange:u=>{var h;u||((h=e.comments)==null||h.selectThread(void 0),e.focus())},...t.floatingOptions}),l=y.useCallback(()=>{var u;if(!(n!=null&&n.selectedThreadId))return;const h=(u=e.domElement)==null?void 0:u.querySelector(`[data-bn-thread-id="${n==null?void 0:n.selectedThreadId}"]`);h&&a(h)},[a,e,n==null?void 0:n.selectedThreadId]);y.useEffect(()=>{if(n!=null&&n.selectedThreadId)return e.onChange(()=>{l()})},[e,l,n==null?void 0:n.selectedThreadId]),y.useLayoutEffect(l,[l]);const c=KZ(e);if(!r||!n||!n.selectedThreadId)return null;const d=t.floatingThread||ID;return m.jsx("div",{ref:o,style:s,...i(),children:m.jsx(d,{thread:c.get(n.selectedThreadId),selected:!0})})},JZ=t=>{const e=Y(),n=ue(),{block:r}=t,o=te(),[s,i]=y.useState(""),a=y.useCallback(d=>{i(d.currentTarget.value)},[]),l=y.useCallback(d=>{d.key==="Enter"&&(d.preventDefault(),o.updateBlock(r,{props:{name:aS(s),url:s}}))},[o,r,s]),c=y.useCallback(()=>{o.updateBlock(r,{props:{name:aS(s),url:s}})},[o,r,s]);return m.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[m.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:s,onChange:a,onKeyDown:l,"data-test":"embed-input"}),m.jsx(e.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},ZZ=t=>{var e;const n=Y(),r=ue(),{block:o,setLoading:s}=t,i=te(),[a,l]=y.useState(!1);y.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const c=y.useCallback(h=>{if(h===null)return;async function f(p){if(s(!0),i.uploadFile!==void 0)try{let g=await i.uploadFile(p,o.id);typeof g=="string"&&(g={props:{name:p.name,url:g}}),i.updateBlock(o,g)}catch{l(!0)}finally{s(!1)}}f(h)},[o,i,s]),d=i.schema.blockSchema[o.type],u=d.isFileBlock&&(e=d.fileBlockAccept)!=null&&e.length?d.fileBlockAccept.join(","):"*/*";return m.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[m.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:u,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),a&&m.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},ND=t=>{const e=Y(),n=ue(),r=te(),[o,s]=y.useState(!1),i=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:m.jsx(ZZ,{block:t.block,setLoading:s})}]:[],{name:n.file_panel.embed.title,tabPanel:m.jsx(JZ,{block:t.block})}],[a,l]=y.useState(t.defaultOpenTab||i[0].name);return m.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:i,loading:o})},XZ=t=>{const e=te();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=Bo(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:r,ref:o,style:s,getFloatingProps:i}=$s((n==null?void 0:n.show)||!1,(n==null?void 0:n.referencePos)||null,5e3,{placement:"bottom",middleware:[Kr(10),cr()],onOpenChange:u=>{u||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...c}=n,d=t.filePanel||ND;return m.jsx("div",{ref:o,style:s,...i(),children:m.jsx(d,{...c})})};function Hs(t,e){vv(t,e),bv(t,e)}function Tv(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function pn(t){const e=to();if(t||(t=e==null?void 0:e.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=t,[r,o]=y.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]});return Hs(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},n),r}const QZ={bold:vZ,italic:CZ,underline:RZ,strike:MZ,code:pZ};function eX(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const Bu=t=>{const e=ue(),n=Y(),r=te(),o=eX(t.basicTextStyle,r),s=pn(r),[i,a]=y.useState(t.basicTextStyle in r.getActiveStyles());Hs(()=>{o&&a(t.basicTextStyle in r.getActiveStyles())},r);const l=d=>{if(r.focus(),!!o){if(r.schema.styleSchema[d].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[d]:!0})}};if(!y.useMemo(()=>o?!!s.find(d=>d.content!==void 0):!1,[o,s])||!r.isEditable)return null;const c=QZ[t.basicTextStyle];return m.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>l(t.basicTextStyle),isSelected:i,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:jn(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:m.jsx(c,{})})},qb=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,o=y.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return m.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:o,children:"A"})},ZS=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],Gp=t=>{const e=Y(),n=ue();return m.jsxs(m.Fragment,{children:[m.jsx(()=>t.text?m.jsxs(m.Fragment,{children:[m.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),ZS.map(r=>m.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:m.jsx(qb,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),m.jsx(()=>t.background?m.jsxs(m.Fragment,{children:[m.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),ZS.map(r=>m.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:m.jsx(qb,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function XS(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const tX=()=>{const t=Y(),e=ue(),n=te(),r=XS("text",n),o=XS("background",n),s=pn(n),[i,a]=y.useState(r&&n.getActiveStyles().textColor||"default"),[l,c]=y.useState(o&&n.getActiveStyles().backgroundColor||"default");Hs(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&c(n.getActiveStyles().backgroundColor||"default")},n);const d=y.useCallback(h=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");h==="default"?n.removeStyles({textColor:h}):n.addStyles({textColor:h}),setTimeout(()=>{n.focus()})},[n,r]),u=y.useCallback(h=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");h==="default"?n.removeStyles({backgroundColor:h}):n.addStyles({backgroundColor:h}),setTimeout(()=>{n.focus()})},[o,n]);return!y.useMemo(()=>{if(!r&&!o)return!1;for(const h of s)if(h.content!==void 0)return!0;return!1},[o,s,r])||!n.isEditable?null:m.jsxs(t.Generic.Menu.Root,{children:[m.jsx(t.Generic.Menu.Trigger,{children:m.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:m.jsx(qb,{textColor:i,backgroundColor:l,size:20})})}),m.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Gp,{text:r?{color:i,setColor:d}:void 0,background:o?{color:l,setColor:u}:void 0})})]})},QS=t=>{for(const e of GP)if(t.startsWith(e))return t;return`${qP}://${t}`},OD=t=>{const e=Y(),n=ue(),{url:r,text:o,editLink:s,showTextField:i}=t,[a,l]=y.useState(r),[c,d]=y.useState(o);y.useEffect(()=>{l(r),d(o)},[o,r]);const u=y.useCallback(g=>{g.key==="Enter"&&(g.preventDefault(),s(QS(a),c))},[s,a,c]),h=y.useCallback(g=>l(g.currentTarget.value),[]),f=y.useCallback(g=>d(g.currentTarget.value),[]),p=y.useCallback(()=>s(QS(a),c),[s,a,c]);return m.jsxs(e.Generic.Form.Root,{children:[m.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:m.jsx(ED,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:u,onChange:h,onSubmit:p}),i!==!1&&m.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:m.jsx(Cv,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:u,onChange:f,onSubmit:p})]})};function nX(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const rX=()=>{var t;const e=te(),n=Y(),r=ue(),o=nX(e),s=pn(e),[i,a]=y.useState(!1),[l,c]=y.useState(e.getSelectedLinkUrl()||""),[d,u]=y.useState(e.getSelectedText());Hs(()=>{u(e.getSelectedText()||""),c(e.getSelectedLinkUrl()||"")},e),y.useEffect(()=>{var p;const g=b=>{(b.ctrlKey||b.metaKey)&&b.key==="k"&&(a(!0),b.preventDefault())};return(p=e.prosemirrorView)==null||p.dom.addEventListener("keydown",g),()=>{var b;(b=e.prosemirrorView)==null||b.dom.removeEventListener("keydown",g)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const h=y.useCallback(p=>{e.createLink(p),e.focus()},[e]),f=e.transact(p=>Lb(p.selection));return!y.useMemo(()=>{if(!o)return!1;for(const p of s)if(p.content===void 0)return!1;return!f},[o,s,f])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:m.jsxs(n.Generic.Popover.Root,{opened:i,children:[m.jsx(n.Generic.Popover.Trigger,{children:m.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:jn(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:m.jsx(ED,{}),onClick:()=>a(!0)})}),m.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(OD,{url:l,text:d,editLink:h,showTextField:!1})})]})},oX=()=>{const t=ue(),e=Y(),n=te(),[r,o]=y.useState(),s=pn(n),i=y.useMemo(()=>{if(s.length!==1)return;const c=s[0];if($d(c,n))return o(c.props.caption),c},[n,s]),a=y.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{caption:r}}))},[r,n,i]),l=y.useCallback(c=>o(c.currentTarget.value),[]);return!i||Hd(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:m.jsx(KS,{}),isSelected:i.props.caption!==""})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(e.Generic.Form.Root,{children:m.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:m.jsx(KS,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},sX=()=>{const t=ue(),e=Y(),n=te(),r=pn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if($d(i,n))return i},[n,r]),s=y.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||Hd(o,n)||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:m.jsx(LZ,{}),onClick:s})},iX=()=>{const t=ue(),e=Y(),n=te(),[r,o]=y.useState(),s=pn(n),i=y.useMemo(()=>{if(s.length!==1)return;const c=s[0];if($d(c,n))return o(c.props.name),c},[n,s]),a=y.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{name:r}}))},[r,n,i]),l=y.useCallback(c=>o(c.currentTarget.value),[]);return!i||Hd(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:m.jsx(qS,{})})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(e.Generic.Form.Root,{children:m.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:m.jsx(qS,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[i.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},aX=()=>{const t=ue(),e=Y(),n=te(),r=pn(n),[o,s]=y.useState(!1);y.useEffect(()=>{s(!1)},[r]);const i=r.length===1?r[0]:void 0;return i===void 0||!$d(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{opened:o,position:"bottom",children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>s(!o),isSelected:o,mainTooltip:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:m.jsx(DZ,{})})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:m.jsx(ND,{block:i})})]})},lX=()=>{const t=ue(),e=Y(),n=te(),r=pn(n),[o,s]=y.useState(()=>n.canNestBlock());Hs(()=>{s(n.canNestBlock())},n);const i=y.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!y.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:jn(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:m.jsx(kZ,{})})},cX=()=>{const t=ue(),e=Y(),n=te(),r=pn(n),[o,s]=y.useState(()=>n.canUnnestBlock());Hs(()=>{s(n.canUnnestBlock())},n);const i=y.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!y.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:jn(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:m.jsx(xZ,{})})},dX=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:Cv,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:CD,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:SD,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:TD,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.quote.title,type:"quote",icon:_D,isSelected:e=>e.type==="quote"},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:RD,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:AD,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:MD,isSelected:e=>e.type==="checkListItem"}],uX=t=>{const e=Y(),n=ue(),r=te(),o=pn(r),[s,i]=y.useState(r.getTextCursorPosition().block),a=y.useMemo(()=>(t.items||dX(n)).filter(d=>d.type in r.schema.blockSchema),[r,n,t.items]),l=y.useMemo(()=>a.find(d=>d.type===s.type)!==void 0,[s.type,a]),c=y.useMemo(()=>{const d=u=>{r.focus(),r.transact(()=>{for(const h of o)r.updateBlock(h,{type:u.type,props:u.props})})};return a.map(u=>{const h=u.icon;return{text:u.name,icon:m.jsx(h,{size:16}),onClick:()=>d(u),isSelected:u.isSelected(s)}})},[s,a,r,o]);return Hs(()=>{i(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:m.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:c})},hX=()=>{const t=ue(),e=Y(),n=te(),r=y.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:m.jsx(kD,{}),onClick:r}):null},fX=()=>{const t=ue(),e=Y(),n=te(),r=y.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:m.jsx(kD,{}),onClick:r})};function Kb(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const pX=()=>{const t=ue(),e=Y(),n=te(),r=pn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if($d(i,n))return i},[n,r]),s=y.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(i=>window.open(Kb(i,window.location.href))):window.open(Kb(o.props.url,window.location.href)))},[n,o]);return!o||Hd(o,n)?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,icon:m.jsx(BZ,{}),onClick:s})},mX=()=>{const t=ue(),e=Y(),n=te(),r=pn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(Mq(i,n))return i},[n,r]),s=y.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||Hd(o,n)||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:m.jsx(PZ,{}),isSelected:o.props.showPreview,onClick:s})},gX=()=>{const t=ue(),e=Y(),n=te(),r=pn(n),o=y.useMemo(()=>{var i;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(i=n.tableHandles)==null?void 0:i.getMergeDirection(a)},[n,r]),s=y.useCallback(()=>{var i;(i=n.tableHandles)==null||i.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?m.jsx(TZ,{}):m.jsx(EZ,{}),onClick:s})},yX={left:yZ,center:mZ,right:bZ,justify:gZ},Vg=t=>{const e=Y(),n=ue(),r=te(),o=pn(r),s=y.useMemo(()=>{var l;const c=o[0];if(Ob("textAlignment",c,r))return c.props.textAlignment;if(c.type==="table"){const d=(l=r.tableHandles)==null?void 0:l.getCellSelection();if(!d)return;const u=d.cells.map(({row:f,col:p})=>Rs(c.content.rows[f].cells[p]).props.textAlignment),h=u[0];if(u.every(f=>f===h))return h}},[r,o]),i=y.useCallback(l=>{var c;r.focus();for(const d of o)if(fa("textAlignment",d.type,r))r.updateBlock(d,{props:{textAlignment:l}});else if(d.type==="table"){const u=(c=r.tableHandles)==null?void 0:c.getCellSelection();if(!u)continue;const h=d.content.rows.map(f=>({...f,cells:f.cells.map(p=>Rs(p))}));u.cells.forEach(({row:f,col:p})=>{h[f].cells[p].props.textAlignment=l}),r.updateBlock(d,{type:"table",content:{...d.content,type:"tableContent",rows:h}}),r.setTextCursorPosition(d)}},[r,o]);if(!y.useMemo(()=>!!o.find(l=>"textAlignment"in l.props||l.type==="table"&&l.children),[o])||!r.isEditable)return null;const a=yX[t.textAlignment];return m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>i(t.textAlignment),isSelected:s===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:m.jsx(a,{})})},LD=t=>[m.jsx(uX,{items:t},"blockTypeSelect"),m.jsx(gX,{},"tableCellMergeButton"),m.jsx(oX,{},"fileCaptionButton"),m.jsx(aX,{},"replaceFileButton"),m.jsx(iX,{},"fileRenameButton"),m.jsx(sX,{},"fileDeleteButton"),m.jsx(pX,{},"fileDownloadButton"),m.jsx(mX,{},"filePreviewButton"),m.jsx(Bu,{basicTextStyle:"bold"},"boldStyleButton"),m.jsx(Bu,{basicTextStyle:"italic"},"italicStyleButton"),m.jsx(Bu,{basicTextStyle:"underline"},"underlineStyleButton"),m.jsx(Bu,{basicTextStyle:"strike"},"strikeStyleButton"),m.jsx(Vg,{textAlignment:"left"},"textAlignLeftButton"),m.jsx(Vg,{textAlignment:"center"},"textAlignCenterButton"),m.jsx(Vg,{textAlignment:"right"},"textAlignRightButton"),m.jsx(tX,{},"colorStyleButton"),m.jsx(lX,{},"nestBlockButton"),m.jsx(cX,{},"unnestBlockButton"),m.jsx(rX,{},"createLinkButton"),m.jsx(hX,{},"addCommentButton"),m.jsx(fX,{},"addTiptapCommentButton")],jD=t=>{const e=Y();return m.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||LD(t.blockTypeSelectItems)})},e2=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},BD=t=>{const e=y.useRef(null),n=te(),[r,o]=y.useState(()=>{const h=n.getTextCursorPosition().block;return"textAlignment"in h.props?e2(h.props.textAlignment):"top-start"});Hs(()=>{const h=n.getTextCursorPosition().block;"textAlignment"in h.props?o(e2(h.props.textAlignment)):o("top-start")},n);const s=Bo(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:i,ref:a,style:l,getFloatingProps:c}=$s((s==null?void 0:s.show)||!1,(s==null?void 0:s.referencePos)||null,3e3,{placement:r,middleware:[Kr(10),Vi(),cr()],onOpenChange:(h,f)=>{h||(n.formattingToolbar.closeMenu(),n.focus())},...t.floatingOptions}),d=y.useMemo(()=>Tv([e,a]),[e,a]);if(!i||!s)return null;if(!s.show&&e.current)return m.jsx("div",{ref:d,style:l,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const u=t.formattingToolbar||jD;return m.jsx("div",{ref:d,style:l,...c(),children:m.jsx(u,{})})},bX=t=>{const e=Y(),n=ue();return m.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:m.jsx(SZ,{})})},vX=t=>{const e=Y(),n=ue();return m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(OD,{...t})})]})},wX=t=>{const e=Y(),n=ue();return m.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(Kb(t.url,window.location.href),"_blank")},icon:m.jsx(VZ,{})})},xX=t=>{const e=Y();return t.children?m.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children}):m.jsxs(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:[m.jsx(vX,{url:t.url,text:t.text,editLink:t.editLink}),m.jsx(wX,{url:t.url}),m.jsx(bX,{deleteLink:t.deleteLink})]})},kX=t=>{const e=te(),n={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},r=Bo(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=$s((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,4e3,{placement:"top-start",middleware:[Kr(10),cr()],onOpenChange:h=>{h||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.linkToolbar||xX;return m.jsx("div",{ref:s,style:i,...a(),children:m.jsx(u,{...d,...n})})};function CX(t){return ne({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const SX=t=>{const e=Y(),n=ue(),r=te(),o=y.useCallback(()=>{const s=t.block.content;if(s!==void 0&&Array.isArray(s)&&s.length===0)r.setTextCursorPosition(t.block),r.openSuggestionMenu("/");else{const i=r.insertBlocks([{type:"paragraph"}],t.block,"after")[0];r.setTextCursorPosition(i),r.openSuggestionMenu("/")}},[r,t.block]);return m.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:m.jsx(CX,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function VD(t){return ne({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function TX(t){return ne({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const EX=t=>{const e=Y(),n=te();return!fa("textColor",t.block.type,n)&&!fa("backgroundColor",t.block.type,n)?null:m.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(e.Generic.Menu.Trigger,{sub:!0,children:m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),m.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Gp,{iconSize:18,text:fa("textColor",t.block.type,n)&&Ob("textColor",t.block,n)?{color:t.block.props.textColor,setColor:r=>n.updateBlock(t.block,{type:t.block.type,props:{textColor:r}})}:void 0,background:fa("backgroundColor",t.block.type,n)&&Ob("backgroundColor",t.block,n)?{color:t.block.props.backgroundColor,setColor:r=>n.updateBlock(t.block,{props:{backgroundColor:r}})}:void 0})})]})},MX=t=>{const e=Y(),n=te();return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([t.block]),children:t.children})},AX=t=>{const e=Y(),n=te();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerRows;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(t.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:t.children})},RX=t=>{const e=Y(),n=te();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerCols;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(t.block,{type:"table",content:{...t.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:t.children})},_X=t=>{const e=Y(),n=ue();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(MX,{...t,children:n.drag_handle.delete_menuitem}),m.jsx(EX,{...t,children:n.drag_handle.colors_menuitem}),m.jsx(AX,{...t,children:n.drag_handle.header_row_menuitem}),m.jsx(RX,{...t,children:n.drag_handle.header_column_menuitem})]})})},PX=t=>{const e=Y(),n=ue(),r=t.dragHandleMenu||_X;return m.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>t.blockDragStart(o,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:m.jsx(VD,{size:24,"data-test":"dragHandle"})})}),m.jsx(r,{block:t.block,children:t.children})]})},DX=t=>{const e=Y(),n=y.useMemo(()=>{const r={"data-block-type":t.block.type};return t.block.type==="heading"&&(r["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[t.block,t.editor.schema.blockSchema]);return m.jsx(e.SideMenu.Root,{className:"bn-side-menu",...n,children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(SX,{...t}),m.jsx(PX,{...t})]})})},IX=t=>{const e=te(),n={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},r=Bo(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=$s((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,1e3,{placement:"left-start",...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.sideMenu||DX;return m.jsx("div",{ref:s,style:i,...a(),children:m.jsx(u,{...d,...n,editor:e})})};async function NX(t,e){return(await jY(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function OX(t){const e=Y(),n=ue(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i,columns:a}=t,l=o==="loading-initial"||o==="loading"?m.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,c=y.useMemo(()=>{const d=[];for(let u=0;u<r.length;u++){const h=r[u];d.push(m.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:h,id:`bn-grid-suggestion-menu-item-${u}`,isSelected:u===s,onClick:()=>i==null?void 0:i(h)},h.id))}return d},[e,r,i,s]);return m.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&t.loadingState==="loaded"&&m.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function $D(t,e,n,r=3){const o=y.useRef(0);y.useEffect(()=>{e!==void 0&&(t.length>0?o.current=e.length:e.length-o.current>r&&n())},[n,r,t.length,e])}function HD(t,e){const[n,r]=y.useState([]),[o,s]=y.useState(!1),i=y.useRef(),a=y.useRef();return y.useEffect(()=>{const l=t;i.current=t,s(!0),e(t).then(c=>{i.current===l&&(r(c),s(!1),a.current=l)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function LX(t,e,n,r,o){const[s,i]=y.useState(0),a=r!==void 0&&r>1;return y.useEffect(()=>{var l;const c=d=>(d.key==="ArrowLeft"&&(d.preventDefault(),n.length&&i((s-1+n.length)%n.length)),d.key==="ArrowRight"&&(d.preventDefault(),n.length&&i((s+1+n.length)%n.length)),d.key==="ArrowUp"?(d.preventDefault(),n.length&&i((s-r+n.length)%n.length),!0):d.key==="ArrowDown"?(d.preventDefault(),n.length&&i((s+r)%n.length),!0):d.key==="Enter"&&!d.isComposing?(d.stopPropagation(),d.preventDefault(),n.length&&(o==null||o(n[s])),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",c,!0)}},[t.domElement,n,s,o,r,a]),y.useEffect(()=>{i(0)},[e]),{selectedIndex:n.length===0?void 0:s}}function jX(t){const e=to().setContentEditableProps,n=te(),{getItems:r,gridSuggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l,columns:c}=t,d=y.useCallback(g=>{a(),i(),l==null||l(g)},[l,a,i]),{items:u,usedQuery:h,loadingState:f}=HD(s,r);$D(u,h,a);const{selectedIndex:p}=LX(n,s,u,c,d);return y.useEffect(()=>(e(g=>({...g,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(g=>({...g,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),y.useEffect(()=>(e(g=>({...g,"aria-activedescendant":p?"bn-suggestion-menu-item-"+p:void 0})),()=>{e(g=>({...g,"aria-activedescendant":void 0}))}),[e,p]),m.jsx(o,{items:u,onItemClick:d,loadingState:f,selectedIndex:p,columns:c})}function BX(t){const e=te(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:s,onItemClick:i,getItems:a,floatingOptions:l}=t,c=y.useMemo(()=>i||(x=>{x.onItemClick(e)}),[e,i]),d=y.useMemo(()=>a||(async x=>await NX(e,x)),[e,a]),u={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},h=y.useCallback(x=>e.suggestionMenus.onUpdate(n,x),[e.suggestionMenus,n]),f=Bo(h),{isMounted:p,ref:g,style:b,getFloatingProps:v}=$s((f==null?void 0:f.show)||!1,(f==null?void 0:f.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Kr(10),cr(),ip({apply({availableHeight:x,elements:w}){Object.assign(w.floating.style,{maxHeight:`${x-10}px`})}})],onOpenChange(x){x||e.suggestionMenus.closeMenu()},...l});return!p||!f||!(f!=null&&f.ignoreQueryLength)&&s&&(f.query.startsWith(" ")||f.query.length<s)?null:m.jsx("div",{ref:g,style:b,...v(),children:m.jsx(jX,{query:f.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:d,columns:o,gridSuggestionMenuComponent:r||OX,onItemClick:c})})}function VX(t){const e=Y(),n=ue(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i}=t,a=o==="loading-initial"||o==="loading"?m.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=y.useMemo(()=>{let c;const d=[];for(let u=0;u<r.length;u++){const h=r[u];h.group!==c&&(c=h.group,d.push(m.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),d.push(m.jsx(e.SuggestionMenu.Item,{className:Be("bn-suggestion-menu-item",h.size==="small"?"bn-suggestion-menu-item-small":""),item:h,id:`bn-suggestion-menu-item-${u}`,isSelected:u===s,onClick:()=>i==null?void 0:i(h)},h.title))}return d},[e,r,i,s]);return m.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&m.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function $X(t,e){const[n,r]=y.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),t.length&&r((n+1)%t.length),!0;const s=HX(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!s?(o.preventDefault(),o.stopPropagation(),t.length&&(e==null||e(t[n])),!0):!1}}}function HX(t){return t.nativeEvent!==void 0}function FX(t,e,n,r,o){const{selectedIndex:s,setSelectedIndex:i,handler:a}=$X(n,r);return y.useEffect(()=>{var l;return(l=t.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var c;(c=t.domElement)==null||c.removeEventListener("keydown",a,!0)}},[t.domElement,n,s,r,o,a]),y.useEffect(()=>{i(0)},[e,i]),{selectedIndex:n.length===0?void 0:s}}function zX(t){const e=to().setContentEditableProps,n=te(),{getItems:r,suggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l}=t,c=y.useCallback(p=>{a(),i(),l==null||l(p)},[l,a,i]),{items:d,usedQuery:u,loadingState:h}=HD(s,r);$D(d,u,a);const{selectedIndex:f}=FX(n,s,d,c);return y.useEffect(()=>(e(p=>({...p,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(p=>({...p,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),y.useEffect(()=>(e(p=>({...p,"aria-activedescendant":f?"bn-suggestion-menu-item-"+f:void 0})),()=>{e(p=>({...p,"aria-activedescendant":void 0}))}),[e,f]),m.jsx(o,{items:d,onItemClick:c,loadingState:h,selectedIndex:f})}const UX={heading:CD,heading_2:SD,heading_3:TD,quote:_D,numbered_list:AD,bullet_list:RD,check_list:MD,paragraph:Cv,table:AZ,image:PD,video:_Z,audio:DD,file:kv,emoji:HZ,code_block:wZ};function WX(t){return Rq(t).map(e=>{const n=UX[e.key];return{...e,icon:m.jsx(n,{size:18})}})}function GX(t){const e=te(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:s,getItems:i,floatingOptions:a}=t,l=y.useMemo(()=>s||(v=>{v.onItemClick(e)}),[e,s]),c=y.useMemo(()=>i||(async v=>_q(WX(e),v)),[e,i]),d={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},u=y.useCallback(v=>e.suggestionMenus.onUpdate(n,v),[e.suggestionMenus,n]),h=Bo(u),{isMounted:f,ref:p,style:g,getFloatingProps:b}=$s((h==null?void 0:h.show)||!1,(h==null?void 0:h.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Kr(10),cr({mainAxis:!0,crossAxis:!1}),Vi(),ip({apply({availableHeight:v,elements:x}){Object.assign(x.floating.style,{maxHeight:`${v-10}px`})}})],onOpenChange(v){v||e.suggestionMenus.closeMenu()},...a});return!f||!h||!(h!=null&&h.ignoreQueryLength)&&o&&(h.query.startsWith(" ")||h.query.length<o)?null:m.jsx("div",{ref:p,style:g,...b(),children:m.jsx(zX,{query:h.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:c,suggestionMenuComponent:r||VX,onItemClick:l})})}const qX=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},KX=t=>{const e=Y(),n=y.useRef(!1),[r,o]=y.useState(),s=y.useCallback(a=>{t.onMouseDown(),o({originalContent:t.block.content,originalCroppedContent:{rows:t.editor.tableHandles.cropEmptyRowsOrColumns(t.block,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[t]),i=y.useCallback(()=>{n.current||t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns(t.block,"columns",1):t.editor.tableHandles.addRowsOrColumns(t.block,"rows",1)}})},[t.block,t.orientation,t.editor]);return y.useEffect(()=>{const a=l=>{var c,d;if(!r)throw new Error("editingState is undefined");n.current=!0;const u=(t.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,h=t.orientation==="addOrRemoveColumns"?((c=r.originalCroppedContent.rows[0])==null?void 0:c.cells.length)??0:r.originalCroppedContent.rows.length,f=t.orientation==="addOrRemoveColumns"?((d=r.originalContent.rows[0])==null?void 0:d.cells.length)??0:r.originalContent.rows.length,p=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,g=f+qX(u/(t.orientation==="addOrRemoveColumns"?iv:uq),.3);g>=h&&g>0&&g!==p&&(t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",g-h):t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",g-h)}}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,t.block,t.editor,t.orientation]),y.useEffect(()=>{const a=t.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,t.onMouseUp]),m.jsx(e.TableHandle.ExtendButton,{className:Be("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:i,onMouseDown:s,children:t.children||m.jsx(NZ,{size:18,"data-test":"extendButton"})})},t2=t=>{const e=Y(),n=ue(),r=te().tableHandles;return r?m.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(t.index,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]}):null},YX=t=>{const e=Y(),n=ue(),r=te().tableHandles;return r?m.jsx(e.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(t.index,t.orientation)},children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},JX=t=>{const e=Y(),n=ue(),r=te(),o=r.tableHandles,s=y.useMemo(()=>!o||!t.block?[]:t.orientation==="row"?o.getCellsAtRowHandle(t.block,t.index):o.getCellsAtColumnHandle(t.block,t.index),[t.block,t.index,t.orientation,o]),i=(l,c)=>{const d=t.block.content.rows.map(u=>({...u,cells:u.cells.map(h=>Rs(h))}));s.forEach(({row:u,col:h})=>{c==="text"?d[u].cells[h].props.textColor=l:d[u].cells[h].props.backgroundColor=l}),r.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),r.setTextCursorPosition(t.block)};if(!s||!s[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=Rs(s[0].cell);return m.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(e.Generic.Menu.Trigger,{sub:!0,children:m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),m.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Gp,{iconSize:18,text:r.settings.tables.cellTextColor?{color:s.every(({cell:l})=>_s(l)&&l.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:l=>{i(l,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:s.every(({cell:l})=>_s(l)&&l.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:l=>i(l,"background")}:void 0})})]})},ZX=t=>{const e=Y(),n=ue(),r=te();if(!r.tableHandles||t.index!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerRows;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},XX=t=>{const e=Y(),n=ue(),r=te();if(!r.tableHandles||t.index!==0||t.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerCols;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},QX=t=>{const e=Y();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(YX,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(t2,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),m.jsx(t2,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"}),m.jsx(ZX,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(XX,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(JX,{orientation:t.orientation,block:t.block,index:t.index})]})})},eQ=t=>{const e=Y(),[n,r]=y.useState(!1),o=t.tableHandleMenu||QX,s=y.useMemo(()=>{const i=t.editor.tableHandles;return!i||!t.block||t.block.type!=="table"?!1:t.orientation==="column"?i.getCellsAtColumnHandle(t.block,t.index).every(({cell:a})=>Li(a)===1):i.getCellsAtRowHandle(t.block,t.index).every(({cell:a})=>ed(a)===1)},[t.block,t.editor.tableHandles,t.index,t.orientation]);return m.jsxs(e.Generic.Menu.Root,{onOpenChange:i=>{i?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.TableHandle.Root,{className:Be("bn-table-handle",n?"bn-table-handle-dragging":"",s?"":"bn-table-handle-not-draggable"),draggable:s,onDragStart:i=>{r(!0),t.dragStart(i)},onDragEnd:()=>{t.dragEnd(),r(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||m.jsx(VD,{size:24,"data-test":"tableHandle"})})}),St.createPortal(m.jsx(o,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function n2(t,e,n){const{refs:r,update:o,context:s,floatingStyles:i}=ol({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[ip({apply({rects:c,elements:d}){Object.assign(d.floating.style,t==="addOrRemoveColumns"?{height:`${c.reference.height}px`}:{width:`${c.reference.width}px`})}})]}),{isMounted:a,styles:l}=yv(s);return y.useEffect(()=>{o()},[n,o]),y.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[t,n,r]),y.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...i}}),[i,a,r.setFloating,l])}function tQ(t,e,n){const r=n2("addOrRemoveRows",e,n),o=n2("addOrRemoveColumns",t,n);return y.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function nQ(t,e,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(e.x,n.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function rQ(t,e,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function oQ(t){return new DOMRect(t.x,t.y,t.width,0)}function $g(t,e,n,r,o){const{refs:s,update:i,context:a,floatingStyles:l}=ol({open:e,placement:t==="row"?"left":t==="col"?"top":"bottom-end",middleware:[Kr(t==="row"?-10:t==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:c,styles:d}=yv(a);return y.useEffect(()=>{i()},[n,r,i]),y.useEffect(()=>{n===null||r===null||o&&t==="cell"||s.setReference({getBoundingClientRect:()=>(t==="row"?nQ:t==="col"?rQ:oQ)(n,r,o)})},[o,t,n,r,s]),y.useMemo(()=>({isMounted:c,ref:s.setFloating,style:{display:"flex",...d,...l}}),[l,c,s.setFloating,d])}function sQ(t,e,n,r){const o=$g("row",t,e,n,r),s=$g("col",t,e,n,r),i=$g("cell",t,e,n,r);return y.useMemo(()=>({rowHandle:o,colHandle:s,cellHandle:i}),[s,o,i])}const iQ=t=>{var e,n;const r=Y(),o=ue(),s=te(),i=(l,c)=>{const d=t.block.content.rows.map(u=>({...u,cells:u.cells.map(h=>Rs(h))}));c==="text"?d[t.rowIndex].cells[t.colIndex].props.textColor=l:d[t.rowIndex].cells[t.colIndex].props.backgroundColor=l,s.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),s.setTextCursorPosition(t.block)},a=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!a||s.settings.tables.cellTextColor===!1&&s.settings.tables.cellBackgroundColor===!1?null:m.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(r.Generic.Menu.Trigger,{sub:!0,children:m.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||o.drag_handle.colors_menuitem})}),m.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Gp,{iconSize:18,text:s.settings.tables.cellTextColor?{color:_s(a)?a.props.textColor:"default",setColor:l=>i(l,"text")}:void 0,background:s.settings.tables.cellBackgroundColor?{color:_s(a)?a.props.backgroundColor:"default",setColor:l=>i(l,"background")}:void 0})})]})},aQ=t=>{var e,n;const r=Y(),o=ue(),s=te(),i=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!i||!_s(i)||ed(i)===1&&Li(i)===1||!s.settings.tables.splitCells?null:m.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=s.tableHandles)==null||a.splitCell({row:t.rowIndex,col:t.colIndex})},children:o.table_handle.split_cell_menuitem})},lQ=t=>{const e=Y();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(aQ,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),m.jsx(iQ,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex})]})})},cQ=t=>{const e=Y(),n=t.tableCellMenu||lQ;return!t.editor.settings.tables.splitCells&&!t.editor.settings.tables.cellBackgroundColor&&!t.editor.settings.tables.cellTextColor?null:m.jsxs(e.Generic.Menu.Root,{onOpenChange:r=>{r?t.freezeHandles():(t.unfreezeHandles(),t.editor.focus())},position:"right",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||m.jsx(TX,{size:12,"data-test":"tableCellHandle"})})}),St.createPortal(m.jsx(n,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),t.menuContainer)]})},dQ=t=>{var e,n;const r=te(),[o,s]=y.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const i={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=i,c=y.useCallback(()=>{a(),C(!0),w(!0)},[a]),d=y.useCallback(()=>{l(),C(!1),w(!1)},[l]),u=Bo(r.tableHandles.onUpdate.bind(r.tableHandles)),h=y.useMemo(()=>{var M,R;return u!=null&&u.draggingState?{draggedCellOrientation:(M=u==null?void 0:u.draggingState)==null?void 0:M.draggedCellOrientation,mousePos:(R=u==null?void 0:u.draggingState)==null?void 0:R.mousePos}:void 0},[u==null?void 0:u.draggingState,(e=u==null?void 0:u.draggingState)==null?void 0:e.draggedCellOrientation,(n=u==null?void 0:u.draggingState)==null?void 0:n.mousePos]),{rowHandle:f,colHandle:p,cellHandle:g}=sQ((u==null?void 0:u.show)||!1,(u==null?void 0:u.referencePosCell)||null,(u==null?void 0:u.referencePosTable)||null,h),{addOrRemoveColumnsButton:b,addOrRemoveRowsButton:v}=tQ((u==null?void 0:u.showAddOrRemoveColumnsButton)||!1,(u==null?void 0:u.showAddOrRemoveRowsButton)||!1,(u==null?void 0:u.referencePosTable)||null),[x,w]=y.useState(!1),[k,C]=y.useState(!1);if(!u)return null;const S=t.tableHandle||eQ,T=t.extendButton||KX,E=t.tableCellHandle||cQ;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:s}),m.jsxs(EJ,{root:u.widgetContainer,children:[!x&&o&&f.isMounted&&u.rowIndex!==void 0&&m.jsx("div",{ref:f.ref,style:f.style,children:m.jsx(S,{editor:r,orientation:"row",showOtherSide:()=>C(!1),hideOtherSide:()=>C(!0),index:u.rowIndex,block:u.block,dragStart:i.rowDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),!k&&o&&p.isMounted&&u.colIndex!==void 0&&m.jsx("div",{ref:p.ref,style:p.style,children:m.jsx(S,{editor:r,orientation:"column",showOtherSide:()=>w(!1),hideOtherSide:()=>w(!0),index:u.colIndex,block:u.block,dragStart:i.colDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),o&&g.isMounted&&u.colIndex!==void 0&&u.rowIndex!==void 0&&m.jsx("div",{ref:g.ref,style:g.style,children:m.jsx(E,{editor:r,block:u.block,rowIndex:u.rowIndex,colIndex:u.colIndex,menuContainer:o,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles})}),m.jsx("div",{ref:v.ref,style:v.style,children:m.jsx(T,{editor:r,orientation:"addOrRemoveRows",block:u.block,onMouseDown:c,onMouseUp:d})}),m.jsx("div",{ref:b.ref,style:b.style,children:m.jsx(T,{editor:r,orientation:"addOrRemoveColumns",block:u.block,onMouseDown:c,onMouseUp:d})})]})]})};function uQ(t){const e=te();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return m.jsxs(m.Fragment,{children:[t.formattingToolbar!==!1&&m.jsx(BD,{}),t.linkToolbar!==!1&&m.jsx(kX,{}),t.slashMenu!==!1&&m.jsx(GX,{triggerCharacter:"/"}),t.emojiPicker!==!1&&m.jsx(BX,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&m.jsx(IX,{}),e.filePanel&&t.filePanel!==!1&&m.jsx(XZ,{}),e.tableHandles&&t.tableHandles!==!1&&m.jsx(dQ,{}),e.comments&&t.comments!==!1&&m.jsxs(m.Fragment,{children:[m.jsx(oZ,{}),m.jsx(YZ,{})]})]})}const FD=()=>{const t=y.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)")},[]),e=y.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: light)")},[]),n=t==null?void 0:t.matches,r=e==null?void 0:e.matches,[o,s]=y.useState(n?"dark":r?"light":"no-preference");return y.useEffect(()=>{s(n?"dark":r?"light":"no-preference")},[n,r]),y.useEffect(()=>{if(typeof(t==null?void 0:t.addEventListener)=="function"){const i=({matches:l})=>l&&s("dark"),a=({matches:l})=>l&&s("light");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",a),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",a)}}else{const i=()=>s(t.matches?"dark":e.matches?"light":"no-preference");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",i),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",i)}}},[t,e]),o},zD=y.createContext(void 0);function hQ(){return y.useContext(zD)}function fQ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:St.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}const pQ=({contentComponent:t})=>{const e=y.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(e)})},mQ=y.forwardRef((t,e)=>{const[n,r]=y.useState();return y.useImperativeHandle(e,()=>(o,s)=>{St.flushSync(()=>{r({node:o,container:s})}),r(void 0)},[]),m.jsx(m.Fragment,{children:n&&St.createPortal(n.node,n.container)})}),r2=()=>{};function gQ(t,e){const{editor:n,className:r,theme:o,children:s,editable:i,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:d,slashMenu:u,emojiPicker:h,sideMenu:f,filePanel:p,tableHandles:g,comments:b,autoFocus:v,renderEditor:x=!n.headless,...w}=t,[k,C]=y.useState(),S=to(),T=FD(),E=(S==null?void 0:S.colorSchemePreference)||T,M=o||(E==="dark"?"dark":"light");vv(l||r2,n),bv(a||r2,n),y.useEffect(()=>{n.isEditable=i!==!1},[i,n]);const R=y.useCallback(F=>{n.elementRenderer=F},[n]),P=y.useMemo(()=>({...S,editor:n,setContentEditableProps:C}),[S,n]),L={formattingToolbar:c,linkToolbar:d,slashMenu:u,emojiPicker:h,sideMenu:f,filePanel:p,tableHandles:g,comments:b},$={autoFocus:v,contentEditableProps:k};return m.jsx(bD.Provider,{value:P,children:m.jsxs(zD.Provider,{value:{editorProps:$,defaultUIProps:L},children:[m.jsx(mQ,{ref:R}),m.jsx(yQ,{className:r,renderEditor:x,editorColorScheme:M,ref:e,...w,children:s})]})})}const yQ=D.forwardRef(({className:t,renderEditor:e,editorColorScheme:n,children:r,...o},s)=>m.jsx("div",{className:Be("bn-container",n,t),"data-color-scheme":n,...o,ref:s,children:e?m.jsx(vQ,{children:r}):r})),bQ=D.forwardRef(gQ),vQ=t=>{const e=hQ(),n=te(),r=y.useMemo(()=>fQ(),[]),o=y.useCallback(s=>{n.mount(s,r)},[n,r]);return m.jsxs(m.Fragment,{children:[m.jsx(pQ,{contentComponent:r}),m.jsx(wQ,{...e.editorProps,...t,mount:o}),m.jsx(uQ,{...e.defaultUIProps}),t.children]})},wQ=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return m.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})};function o2(t,e){let n;const r=document.createElement("div");let o;if(e!=null&&e.elementRenderer)e.elementRenderer(t(l=>n=l||void 0),r);else{if(!(e!=null&&e.headless))throw new Error("elementRenderer not available, expected headless editor");o=XJ.createRoot(r),St.flushSync(()=>{o.render(t(l=>n=l||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n==null||n.setAttribute("data-tmp-find","true");const s=r.cloneNode(!0),i=s.firstElementChild,a=s.querySelector("[data-tmp-find]");return a==null||a.removeAttribute("data-tmp-find"),o==null||o.unmount(),{dom:i,contentDOM:a||void 0}}function Hg(t){var e;return m.jsx(WJ,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([n])=>n!=="class")),className:Be("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([n,r])=>{const o=t.propSchema[n];return!Y1.includes(n)&&r!==o.default}).map(([n,r])=>[Df(n),r])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function qp(t,e){const n=Yn({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return Ld(t.propSchema)},parseHTML(){return Q_(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Yl({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return r=>{const o=JJ(s=>{var i;const a=this.options.editor,l=J_(s.getPos,a,this.editor,t.type),c=((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},d=yD().nodeViewContentRef;if(!d)throw new Error("nodeViewContentRef is not set");const u=e.render;return m.jsx(Hg,{blockType:l.type,blockProps:l.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:c,children:m.jsx(u,{block:l,editor:a,contentRef:h=>{d(h),h&&(h.className=Be("bn-inline-content",h.className))}})})},{className:"bn-react-node-view-renderer"})(r);return t.isSelectable===!1&&X_(o,this.editor),o}}});return J1(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render;return o2(l=>m.jsx(Hg,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:i,children:m.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Be("bn-inline-content",c.className))}})}),o)},toExternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.toExternalHTML||e.render;return o2(l=>m.jsx(Hg,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:i,children:m.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Be("bn-inline-content",c.className))}})}),o)}})}function Ev(t){const e=te(),[n,r]=y.useState("loading"),[o,s]=y.useState();if(y.useEffect(()=>{let i=!0;return(async()=>{let a="";r("loading");try{a=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{r("error");return}i&&(r("loaded"),s(a))})(),()=>{i=!1}},[e,t]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const Mv=t=>m.jsxs("figure",{children:[t.children,m.jsx("figcaption",{children:t.caption})]});function xQ(t){const e=te();y.useEffect(()=>e.onUploadEnd(t),[t,e])}function kQ(t){const e=te();y.useEffect(()=>e.onUploadStart(t),[t,e])}function UD(t){const[e,n]=y.useState(!1);return kQ(r=>{r===t&&n(!0)}),xQ(r=>{r===t&&n(!1)}),e}const CQ=t=>{const e=ue(),n=y.useCallback(o=>{o.preventDefault()},[]),r=y.useCallback(()=>{t.editor.transact(o=>o.setMeta(t.editor.filePanel.plugins[0],{block:t.block}))},[t.block,t.editor]);return m.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[m.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||m.jsx(kv,{size:24})}),m.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},SQ=t=>m.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[m.jsx("div",{className:"bn-file-icon",children:m.jsx(kv,{size:24})}),m.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),Av=t=>{const e=UD(t.block.id);return m.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?m.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?m.jsx(CQ,{...t}):m.jsxs(m.Fragment,{children:[t.block.props.showPreview===!1||!t.children?m.jsx(SQ,{...t}):t.children,t.block.props.caption&&m.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},Kp=t=>m.jsxs("div",{children:[t.children,m.jsx("p",{children:t.caption})]}),TQ=t=>{const e=Ev(t.block.props.url);return m.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},EQ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?m.jsx("audio",{src:t.block.props.url}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(Mv,{caption:t.block.props.caption,children:e}):m.jsx(Kp,{caption:t.block.props.caption,children:e}):e},MQ=t=>m.jsx(Av,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:m.jsx(DD,{size:24}),children:m.jsx(TQ,{...t})});qp(pP,{render:MQ,parse:mP,toExternalHTML:EQ});const AQ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add file"});const e=m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?m.jsx(Kp,{caption:t.block.props.caption,children:e}):e},RQ=t=>m.jsx(Av,{...t});qp(gP,{render:RQ,parse:yP,toExternalHTML:AQ});const WD=t=>{const[e,n]=y.useState(void 0),[r,o]=y.useState(t.block.props.previewWidth),[s,i]=y.useState(!1),a=y.useRef(null);y.useEffect(()=>{const f=g=>{var b,v;let x;t.block.props.textAlignment==="center"?e.handleUsed==="left"?x=e.initialWidth+(e.initialClientX-g.clientX)*2:x=e.initialWidth+(g.clientX-e.initialClientX)*2:e.handleUsed==="left"?x=e.initialWidth+e.initialClientX-g.clientX:x=e.initialWidth+g.clientX-e.initialClientX,o(Math.min(Math.max(x,64),((v=(b=t.editor.domElement)==null?void 0:b.firstElementChild)==null?void 0:v.clientWidth)||Number.MAX_VALUE))},p=()=>{n(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:r}})};return e&&(window.addEventListener("mousemove",f),window.addEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p)}},[t,e,r]);const l=y.useCallback(()=>{t.editor.isEditable&&i(!0)},[t.editor.isEditable]),c=y.useCallback(()=>{i(!1)},[]),d=y.useCallback(f=>{f.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:f.clientX})},[]),u=y.useCallback(f=>{f.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:f.clientX})},[]),h=UD(t.block.id);return m.jsx(Av,{...t,onMouseEnter:l,onMouseLeave:c,style:t.block.props.url&&!h&&t.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:m.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[t.children,(s||e)&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:d}),m.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:u})]})]})})},_Q=t=>{const e=Ev(t.block.props.url);return m.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},PQ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?m.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(Mv,{caption:t.block.props.caption,children:e}):m.jsx(Kp,{caption:t.block.props.caption,children:e}):e},DQ=t=>m.jsx(WD,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:m.jsx(PD,{size:24}),children:m.jsx(_Q,{...t})});qp(wP,{render:DQ,parse:xP,toExternalHTML:PQ});const IQ=t=>{const e=Ev(t.block.props.url);return m.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},NQ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?m.jsx("video",{src:t.block.props.url}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(Mv,{caption:t.block.props.caption,children:e}):m.jsx(Kp,{caption:t.block.props.caption,children:e}):e},OQ=t=>m.jsx(WD,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:m.jsx(IZ,{size:24}),children:m.jsx(IQ,{...t})});qp(TP,{render:OQ,parse:EP,toExternalHTML:NQ});D.memo(({thread:t,selectedThreadId:e,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const s=y.useCallback(a=>{var l;a.target.closest(".bn-action-toolbar")||(l=n.comments)==null||l.selectThread(t.id)},[n.comments,t.id]),i=y.useCallback(a=>{var l;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const c=a.target instanceof Node?a.target:null,d=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!c||!d||!d.contains(c))&&((l=n.comments)==null||l.selectThread(void 0))},[n.comments]);return m.jsx(ID,{thread:t,selected:t.id===e,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:s,onBlur:i,tabIndex:0})});function GD(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top<r.top,s=n.bottom>r.bottom;return o&&s?"both":o?"top":s?"bottom":"none"}function Or(t){return Object.keys(t)}function Fg(t){return t&&typeof t=="object"&&!Array.isArray(t)}function Rv(t,e){const n={...t},r=e;return Fg(t)&&Fg(e)&&Object.keys(e).forEach(o=>{Fg(r[o])&&o in t?n[o]=Rv(n[o],r[o]):n[o]=r[o]}),n}function LQ(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function jQ(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function BQ(t){const e=jQ(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function zg(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function qD(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?zg(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(t))return e?zg(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const s=`${Number(o)/16}${t}`;return e?zg(s):s}}return r}return n}const I=qD("rem",{shouldScale:!0}),s2=qD("em");function Yp(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function KD(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function zd(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==y.Fragment:!1}function Jp(t){const e=y.createContext(null);return[({children:o,value:s})=>m.jsx(e.Provider,{value:s,children:o}),()=>{const o=y.useContext(e);if(o===null)throw new Error(t);return o}]}function _v(t=null){const e=y.createContext(t);return[({children:o,value:s})=>m.jsx(e.Provider,{value:s,children:o}),()=>y.useContext(e)]}function i2(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function jf(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function VQ(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function $Q(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function HQ(t,e,n){return jf(t,n)===jf(e,n)}function YD({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:s="rtl",orientation:i}){return a=>{var p;n==null||n(a);const l=Array.from(((p=jf(a.currentTarget,t))==null?void 0:p.querySelectorAll(e))||[]).filter(g=>HQ(a.currentTarget,g,t)),c=l.findIndex(g=>a.currentTarget===g),d=$Q(c,l,r),u=VQ(c,l,r),h=s==="rtl"?u:d,f=s==="rtl"?d:u;switch(a.key){case"ArrowRight":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),o&&l[h].click());break}case"ArrowLeft":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"ArrowUp":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[u].focus(),o&&l[u].click());break}case"ArrowDown":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),o&&l[d].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const g=l.length-1;!l[g].disabled&&l[g].focus();break}}}}const FQ={app:100,modal:200,popover:300,overlay:400,max:9999};function Ud(t){return FQ[t]}const zQ=()=>{};function UQ(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||zQ:n=>{var r;n.key==="Escape"&&(t(n),(r=e.onTrigger)==null||r.call(e))}}function je(t,e="size",n=!0){if(t!==void 0)return KD(t)?n?I(t):t:`var(--${e}-${t})`}function Wd(t){return je(t,"mantine-spacing")}function Ft(t){return t===void 0?"var(--mantine-radius-default)":je(t,"mantine-radius")}function fn(t){return je(t,"mantine-font-size")}function WQ(t){return je(t,"mantine-line-height",!1)}function JD(t){if(t)return je(t,"mantine-shadow",!1)}function Dr(t,e){return n=>{t==null||t(n),e==null||e(n)}}function GQ(t,e,n){var r;return n?Array.from(((r=jf(n,e))==null?void 0:r.querySelectorAll(t))||[]).findIndex(o=>o===n):null}function qQ(){const[t,e]=y.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function KQ(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const a2=["mousedown","touchstart"];function YQ(t,e,n){const r=y.useRef(null);return y.useEffect(()=>{const o=s=>{const{target:i}=s??{};if(Array.isArray(n)){const a=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";n.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&t()}else r.current&&!r.current.contains(i)&&t()};return(e||a2).forEach(s=>document.addEventListener(s,o)),()=>{(e||a2).forEach(s=>document.removeEventListener(s,o))}},[r,t,n]),r}function JQ(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function ZQ(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function XQ(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=y.useState(n?e:ZQ(t)),s=y.useRef(null);return y.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(t),o(s.current.matches),JQ(s.current,i=>o(i.matches))},[t]),r}const Zp=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Ds(t,e){const n=y.useRef(!1);y.useEffect(()=>()=>{n.current=!1},[]),y.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function QQ({opened:t,shouldReturnFocus:e=!0}){const n=y.useRef(null),r=()=>{var o;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((o=n.current)==null||o.focus({preventScroll:!0}))};return Ds(()=>{let o=-1;const s=i=>{i.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",s),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",s)}},[t,e]),r}const eee=/input|select|textarea|button|object/,ZD="a, input, select, textarea, button, object, [tabindex]";function tee(t){return t.style.display==="none"}function nee(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(tee(n))return!1;n=n.parentNode}return!0}function XD(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function Yb(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(XD(t));return(eee.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&nee(t)}function QD(t){const e=XD(t);return(Number.isNaN(e)||e>=0)&&Yb(t)}function ree(t){return Array.from(t.querySelectorAll(ZD)).filter(QD)}function oee(t,e){const n=ree(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let s=r===o.activeElement||t===o.activeElement;const i=o.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(s=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===i.getAttribute("name")).includes(r)),!s)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function eI(t=!0){const e=y.useRef(null),n=o=>{let s=o.querySelector("[data-autofocus]");if(!s){const i=Array.from(o.querySelectorAll(ZD));s=i.find(QD)||i.find(Yb)||null,!s&&Yb(o)&&(s=o)}s&&s.focus({preventScroll:!0})},r=y.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return y.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=s=>{s.key==="Tab"&&e.current&&oee(e.current,s)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const see=D.useId||(()=>{});function iee(){const t=see();return t?`mantine-${t.replace(/:/g,"")}`:""}function Gd(t){const e=iee(),[n,r]=y.useState(e);return Zp(()=>{r(KQ())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function Bf(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function qd(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=Bf(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o?o():Bf(r,null)}),e.clear()}}}function Vo(...t){return y.useCallback(qd(...t),t)}function sl({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,s]=y.useState(e!==void 0?e:n),i=(a,...l)=>{s(a),r==null||r(a,...l)};return t!==void 0?[t,r,!0]:[o,i,!1]}function aee(t,e){return XQ("(prefers-reduced-motion: reduce)",t,e)}function lee(){const[t,e]=y.useState(!1),n=y.useRef(null),r=y.useCallback(()=>e(!0),[]),o=y.useCallback(()=>e(!1),[]);return y.useEffect(()=>{const s=n.current;if(s)return s.addEventListener("mouseenter",r),s.addEventListener("mouseleave",o),()=>{s==null||s.removeEventListener("mouseenter",r),s==null||s.removeEventListener("mouseleave",o)}},[n.current]),{ref:n,hovered:t}}function cee(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function tI({onBlur:t,onFocus:e}={}){const n=y.useRef(null),[r,o]=y.useState(!1),s=y.useRef(!1),i=c=>{o(c),s.current=c},a=c=>{s.current||(i(!0),e==null||e(c))},l=c=>{s.current&&!cee(c)&&(i(!1),t==null||t(c))};return y.useEffect(()=>{const c=n.current;if(c)return c.addEventListener("focusin",a),c.addEventListener("focusout",l),()=>{c==null||c.removeEventListener("focusin",a),c==null||c.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function Pv(t){var n;const e=D.version;return typeof D.version!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(n=t==null?void 0:t.props)==null?void 0:n.ref}function nI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=nI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $o(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=nI(t))&&(r&&(r+=" "),r+=e);return r}const dee={};function uee(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=$o(e[r],o):e[r]=o})}),e}function Xp({theme:t,classNames:e,props:n,stylesCtx:r}){const s=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(t,n,r):i||dee);return uee(s)}function Vf({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((s,i)=>typeof i=="function"?{...s,...i(t,n,r)}:{...s,...i},{})}const rI=y.createContext(null);function Fs(){const t=y.useContext(rI);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function hee(){return Fs().cssVariablesResolver}function fee(){return Fs().classNamesPrefix}function Dv(){return Fs().getStyleNonce}function pee(){return Fs().withStaticClasses}function mee(){return Fs().headless}function gee(){var t;return(t=Fs().stylesTransform)==null?void 0:t.sx}function yee(){var t;return(t=Fs().stylesTransform)==null?void 0:t.styles}function oI(){return Fs().env||"default"}function bee(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function vee(t){let e=t.replace("#","");if(e.length===3){const i=e.split("");e=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(e.length===8){const i=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:i}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,s=n&255;return{r,g:o,b:s,a:1}}function wee(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o||1}}function xee(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,i=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),d=s-a/2;let u,h,f;return l>=0&&l<1?(u=a,h=c,f=0):l>=1&&l<2?(u=c,h=a,f=0):l>=2&&l<3?(u=0,h=a,f=c):l>=3&&l<4?(u=0,h=c,f=a):l>=4&&l<5?(u=c,h=0,f=a):(u=a,h=0,f=c),{r:Math.round((u+d)*255),g:Math.round((h+d)*255),b:Math.round((f+d)*255),a:i||1}}function Iv(t){return bee(t)?vee(t):t.startsWith("rgb")?wee(t):t.startsWith("hsl")?xee(t):{r:0,g:0,b:0,a:1}}function Vu(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a:s}=Iv(t),i=1-e,a=l=>Math.round(l*i);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${s})`}function rd(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function Ug(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function kee(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function Cee(t){if(t.startsWith("oklch("))return(kee(t)||0)/100;const{r:e,g:n,b:r}=Iv(t),o=e/255,s=n/255,i=r/255,a=Ug(o),l=Ug(s),c=Ug(i);return .2126*a+.7152*l+.0722*c}function Nl(t,e=.179){return t.startsWith("var(")?!1:Cee(t)>e}function il({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Nl(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Nl(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Nl(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),s=o?Number(o):void 0,i=r in e.colors;if(i){const a=s!==void 0?e.colors[r][s]:e.colors[r][rd(e,n||"light")];return{color:r,value:a,shade:s,isThemeColor:i,isLight:Nl(a,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:i,isLight:Nl(t,e.luminanceThreshold),shade:s,variable:void 0}}function Wr(t,e){const n=il({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function Jb(t,e){const n={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)??e.defaultGradient.deg??0},r=Wr(n.from,e),o=Wr(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function Rr(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const s=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${s}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=Iv(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const ta=Rr,See=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const s=il({color:t,theme:e}),i=typeof o=="boolean"?o:e.autoContrast;if(n==="filled"){const a=i&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${I(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${I(1)} solid transparent`}:{background:t,hover:Vu(t,.1),color:a,border:`${I(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${I(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:Rr(a,.1),hover:Rr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${I(1)} solid transparent`}}return{background:Rr(t,.1),hover:Rr(t,.12),color:t,border:`${I(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${I(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Rr(e.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${I(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Rr(t,.05),color:t,border:`${I(1)} solid ${t}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${I(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:"transparent",hover:Rr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${I(1)} solid transparent`}}return{background:"transparent",hover:Rr(t,.12),color:t,border:`${I(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${I(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${I(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${I(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:Vu(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${I(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Vu(e.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${I(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Vu(e.white,.01),color:t,border:`${I(1)} solid transparent`}:n==="gradient"?{background:Jb(r,e),hover:Jb(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${I(1)} solid var(--mantine-color-default-border)`}:{}},Tee={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},l2="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Nv={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Tee,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:See,autoContrast:!1,luminanceThreshold:.3,fontFamily:l2,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:l2,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:I(34),lineHeight:"1.3"},h2:{fontSize:I(26),lineHeight:"1.35"},h3:{fontSize:I(22),lineHeight:"1.4"},h4:{fontSize:I(18),lineHeight:"1.45"},h5:{fontSize:I(16),lineHeight:"1.5"},h6:{fontSize:I(14),lineHeight:"1.5"}}},fontSizes:{xs:I(12),sm:I(14),md:I(16),lg:I(18),xl:I(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:I(2),sm:I(4),md:I(8),lg:I(16),xl:I(32)},spacing:{xs:I(10),sm:I(12),md:I(16),lg:I(20),xl:I(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), 0 ${I(1)} ${I(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${I(10)} ${I(15)} ${I(-5)}, rgba(0, 0, 0, 0.04) 0 ${I(7)} ${I(7)} ${I(-5)}`,md:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${I(20)} ${I(25)} ${I(-5)}, rgba(0, 0, 0, 0.04) 0 ${I(10)} ${I(10)} ${I(-5)}`,lg:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${I(28)} ${I(23)} ${I(-7)}, rgba(0, 0, 0, 0.04) 0 ${I(12)} ${I(12)} ${I(-7)}`,xl:`0 ${I(1)} ${I(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${I(36)} ${I(28)} ${I(-7)}, rgba(0, 0, 0, 0.04) 0 ${I(17)} ${I(17)} ${I(-7)}`},other:{},components:{}};function c2(t){return t==="auto"||t==="dark"||t==="light"}function Eee({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return c2(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&c2(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const Mee="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more â€“ https://mantine.dev/theming/colors/#primary-color",d2="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Wg(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function u2(t){if(!(t.primaryColor in t.colors))throw new Error(Mee);if(typeof t.primaryShade=="object"&&(!Wg(t.primaryShade.dark)||!Wg(t.primaryShade.light)))throw new Error(d2);if(typeof t.primaryShade=="number"&&!Wg(t.primaryShade))throw new Error(d2)}function Aee(t,e){var r;if(!e)return u2(t),t;const n=Rv(t,e);return e.fontFamily&&!((r=e.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=e.fontFamily),u2(n),n}const Ov=y.createContext(null),Ree=()=>y.useContext(Ov)||Nv;function An(){const t=y.useContext(Ov);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function sI({theme:t,children:e,inherit:n=!0}){const r=Ree(),o=y.useMemo(()=>Aee(n?r:Nv,t),[t,r,n]);return m.jsx(Ov.Provider,{value:o,children:e})}sI.displayName="@mantine/core/MantineThemeProvider";function _ee(){const t=An(),e=Dv(),n=Or(t.breakpoints).reduce((r,o)=>{const s=t.breakpoints[o].includes("px"),i=BQ(t.breakpoints[o]),a=s?`${i-.1}px`:s2(i-.1),l=s?`${i}px`:s2(i);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return m.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:n}})}function Gg(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Ol(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function Pee(t,e){const n=Gg(t.variables),r=n?Ol(e,n):"",o=Gg(t.dark),s=Gg(t.light),i=o?Ol(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",a=s?Ol(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,s):"";return`${r}${i}${a}`}function iI({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&il({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function h2(t,e){return iI({color:t.colors[t.primaryColor][rd(t,e)],theme:t,autoContrast:null})}function $u({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const a=rd(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:ta(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:ta(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:ta(t.colors[e][a],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const s=rd(t,"dark"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:ta(t.colors[e][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:ta(t.colors[e][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:ta(t.colors[e][Math.max(s-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...i}:i}function Dee(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function na(t,e,n){Or(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const aI=t=>{const e=rd(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:I(t.defaultRadius),r={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":h2(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":h2(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};na(r.variables,t.breakpoints,"breakpoint"),na(r.variables,t.spacing,"spacing"),na(r.variables,t.fontSizes,"font-size"),na(r.variables,t.lineHeights,"line-height"),na(r.variables,t.shadows,"shadow"),na(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((s,i)=>{r.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${t.primaryColor}-${i})`}),Or(t.colors).forEach(s=>{const i=t.colors[s];if(Dee(i)){Object.assign(r.light,$u({theme:t,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,$u({theme:t,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,$u({theme:t,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,$u({theme:t,color:s,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return Or(o).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=o[s].fontSize,r.variables[`--mantine-${s}-line-height`]=o[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=o[s].fontWeight||t.headings.fontWeight}),r};function Iee({theme:t,generator:e}){const n=aI(t),r=e==null?void 0:e(t);return r?Rv(n,r):n}const qg=aI(Nv);function Nee(t){const e={variables:{},light:{},dark:{}};return Or(t.variables).forEach(n=>{qg.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Or(t.light).forEach(n=>{qg.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Or(t.dark).forEach(n=>{qg.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function Oee(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function lI({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=An(),r=Dv(),o=hee(),s=Iee({theme:n,generator:o}),i=t===":root"&&e,a=i?Nee(s):s,l=Pee(a,t);return l?m.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${i?"":Oee(t)}`}}):null}lI.displayName="@mantine/CssVariables";function Lee(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function ra(t,e){var o,s;const n=typeof window<"u"&&"matchMedia"in window&&((o=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:o.matches),r=t!=="auto"?t:n?"dark":"light";(s=e())==null||s.setAttribute("data-mantine-color-scheme",r)}function jee({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=y.useRef(null),[s,i]=y.useState(()=>t.get(e)),a=r||s,l=y.useCallback(d=>{r||(ra(d,n),i(d),t.set(d))},[t.set,a,r]),c=y.useCallback(()=>{i(e),ra(e,n),t.clear()},[t.clear,e]);return y.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),Zp(()=>{ra(t.get(e),n)},[]),y.useEffect(()=>{var u;if(r)return ra(r,n),()=>{};r===void 0&&ra(s,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=h=>{s==="auto"&&ra(h.matches?"dark":"light",n)};return(u=o.current)==null||u.addEventListener("change",d),()=>{var h;return(h=o.current)==null?void 0:h.removeEventListener("change",d)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function Bee({respectReducedMotion:t,getRootElement:e}){Zp(()=>{var n;t&&((n=e())==null||n.setAttribute("data-respect-reduced-motion","true"))},[t])}Lee();function cI({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:s=!0,withCssVariables:i=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=Eee(),defaultColorScheme:d="light",getRootElement:u=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:f,stylesTransform:p,env:g}){const{colorScheme:b,setColorScheme:v,clearColorScheme:x}=jee({defaultColorScheme:d,forceColorScheme:f,manager:c,getRootElement:u});return Bee({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:u}),m.jsx(rI.Provider,{value:{colorScheme:b,setColorScheme:v,clearColorScheme:x,getRootElement:u,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:h,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p,env:g},children:m.jsxs(sI,{theme:t,children:[i&&m.jsx(lI,{cssVariablesSelector:a,deduplicateCssVariables:s}),o&&m.jsx(_ee,{}),e]})})}cI.displayName="@mantine/core/MantineProvider";function Qp({classNames:t,styles:e,props:n,stylesCtx:r}){const o=An();return{resolvedClassNames:Xp({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:Vf({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const Vee={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function $ee({theme:t,options:e,unstyled:n}){return $o((e==null?void 0:e.focusable)&&!n&&(t.focusClassName||Vee[t.focusRing]),(e==null?void 0:e.active)&&!n&&t.activeClassName)}function Hee({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return Xp({theme:o,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:e})[t]}function f2({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return Xp({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function Fee({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function zee({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function Uee({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function Wee({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(s=>{var i,a;return(a=Xp({theme:e,classNames:(i=e.components[s])==null?void 0:i.classNames,props:r,stylesCtx:o}))==null?void 0:a[n]})}function Gee({options:t,classes:e,selector:n,unstyled:r}){return t!=null&&t.variant&&!r?e[`${n}--${t.variant}`]:void 0}function qee({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:s,classes:i,unstyled:a,className:l,rootSelector:c,props:d,stylesCtx:u,withStaticClasses:h,headless:f,transformedStyles:p}){return $o($ee({theme:t,options:e,unstyled:a||f}),Wee({theme:t,themeName:n,selector:r,props:d,stylesCtx:u}),Gee({options:e,classes:i,selector:r,unstyled:a}),f2({selector:r,stylesCtx:u,theme:t,classNames:s,props:d}),f2({selector:r,stylesCtx:u,theme:t,classNames:p,props:d}),Hee({selector:r,stylesCtx:u,options:e,props:d,theme:t}),Fee({rootSelector:c,selector:r,className:l}),zee({selector:r,classes:i,unstyled:a||f}),h&&!f&&Uee({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function Kee({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(s=>{var i;return Vf({theme:t,styles:(i=t.components[s])==null?void 0:i.styles,props:n,stylesCtx:r})[o]}).reduce((s,i)=>({...s,...i}),{})}function Zb({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Zb({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function Yee(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...Yp(n[r])}}),e),{})}function Jee({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:s,themeName:i,headless:a}){var l;return(l=Yee([a?{}:e==null?void 0:e(n,r,o),...i.map(c=>{var d,u,h;return(h=(u=(d=n.components)==null?void 0:d[c])==null?void 0:u.vars)==null?void 0:h.call(u,n,r,o)}),t==null?void 0:t(n,r,o)]))==null?void 0:l[s]}function Zee({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:s,rootSelector:i,styles:a,style:l,vars:c,varsResolver:d,headless:u,withStylesTransform:h}){return{...!h&&Kee({theme:t,themeName:e,props:o,stylesCtx:s,selector:n}),...!h&&Vf({theme:t,styles:a,props:o,stylesCtx:s})[n],...!h&&Vf({theme:t,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||o,stylesCtx:s})[n],...Jee({theme:t,props:o,stylesCtx:s,vars:c,varsResolver:d,selector:n,themeName:e,headless:u}),...i===n?Zb({style:l,theme:t}):null,...Zb({style:r==null?void 0:r.style,theme:t})}}function Xee({props:t,stylesCtx:e,themeName:n}){var i;const r=An(),o=(i=yee())==null?void 0:i();return{getTransformedStyles:a=>o?[...a.map(c=>o(c,{props:t,theme:r,ctx:e})),...n.map(c=>{var d;return o((d=r.components[c])==null?void 0:d.styles,{props:t,theme:r,ctx:e})})].filter(Boolean):[],withStylesTransform:!!o}}function ke({name:t,classes:e,props:n,stylesCtx:r,className:o,style:s,rootSelector:i="root",unstyled:a,classNames:l,styles:c,vars:d,varsResolver:u}){const h=An(),f=fee(),p=pee(),g=mee(),b=(Array.isArray(t)?t:[t]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:x}=Xee({props:n,stylesCtx:r,themeName:b});return(w,k)=>({className:qee({theme:h,options:k,themeName:b,selector:w,classNamesPrefix:f,classNames:l,classes:e,unstyled:a,className:o,rootSelector:i,props:n,stylesCtx:r,withStaticClasses:p,headless:g,transformedStyles:x([k==null?void 0:k.styles,c])}),style:Zee({theme:h,themeName:b,selector:w,options:k,props:n,stylesCtx:r,rootSelector:i,styles:c,style:s,vars:d,varsResolver:u,headless:g,withStylesTransform:v})})}function Qee(t,e){return typeof t=="boolean"?t:e.autoContrast}function K(t,e,n){var i;const r=An(),o=(i=r.components[t])==null?void 0:i.defaultProps,s=typeof o=="function"?o(r):o;return{...e,...s,...Yp(n)}}function Kg(t){return Or(t).reduce((e,n)=>t[n]!==void 0?`${e}${LQ(n)}:${t[n]};`:e,"").trim()}function ete({selector:t,styles:e,media:n,container:r}){const o=e?Kg(e):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${Kg(a.styles)}}}`):[],i=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${Kg(a.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${s.join("")}${i.join("")}`.trim()}function dI(t){const e=Dv();return m.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:ete(t)}})}function em(t){const{m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:g,pr:b,pe:v,ps:x,bd:w,bg:k,c:C,opacity:S,ff:T,fz:E,fw:M,lts:R,ta:P,lh:L,fs:$,tt:F,td:z,w:J,miw:N,maw:B,h:H,mih:Z,mah:G,bgsz:X,bgp:pe,bgr:Fe,bga:Ke,pos:ve,top:Oe,left:Ye,bottom:Ve,right:ae,inset:en,display:Pt,flex:tn,hiddenFrom:Dt,visibleFrom:Rn,lightHidden:kr,darkHidden:Gi,sx:qi,...Ho}=t;return{styleProps:Yp({m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:g,pr:b,pe:v,ps:x,bd:w,bg:k,c:C,opacity:S,ff:T,fz:E,fw:M,lts:R,ta:P,lh:L,fs:$,tt:F,td:z,w:J,miw:N,maw:B,h:H,mih:Z,mah:G,bgsz:X,bgp:pe,bgr:Fe,bga:Ke,pos:ve,top:Oe,left:Ye,bottom:Ve,right:ae,inset:en,display:Pt,flex:tn,hiddenFrom:Dt,visibleFrom:Rn,lightHidden:kr,darkHidden:Gi,sx:qi}),rest:Ho}}const tte={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Lv(t,e){const n=il({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function nte(t,e){const n=il({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Lv(t,e)}function rte(t,e){if(typeof t=="number")return I(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(i=>i.trim()!=="");let s=`${I(n)}`;return r&&(s+=` ${r}`),o.length>0&&(s+=` ${Lv(o.join(" "),e)}`),s.trim()}return t}const p2={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function ote(t){return typeof t=="string"&&t in p2?p2[t]:t}const ste=["h1","h2","h3","h4","h5","h6"];function ite(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&ste.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?I(t):t}function ate(t){return t}const lte=["h1","h2","h3","h4","h5","h6"];function cte(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&lte.includes(t)?`var(--mantine-${t}-line-height)`:t}function dte(t){return typeof t=="number"?I(t):t}function ute(t,e){if(typeof t=="number")return I(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return I(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const Yg={color:Lv,textColor:nte,fontSize:ite,spacing:ute,identity:ate,size:dte,lineHeight:cte,fontFamily:ote,border:rte};function m2(t){return t.replace("(min-width: ","").replace("em)","")}function hte({media:t,...e}){const r=Object.keys(t).sort((o,s)=>Number(m2(o))-Number(m2(s))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function fte(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function pte(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function mte(t){return typeof t=="object"&&t!==null?Or(t).filter(e=>e!=="base"):[]}function gte(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function uI({styleProps:t,data:e,theme:n}){return hte(Or(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const s=e[o],i=Array.isArray(s.property)?s.property:[s.property],a=pte(t[o]);if(!fte(t[o]))return i.forEach(c=>{r.inlineStyles[c]=Yg[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=mte(t[o]);return i.forEach(c=>{a&&(r.styles[c]=Yg[s.type](a,n)),l.forEach(d=>{const u=`(min-width: ${n.breakpoints[d]})`;r.media[u]={...r.media[u],[c]:Yg[s.type](gte(t[o],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function hI(){return`__m__-${y.useId().replace(/:/g,"")}`}function fI(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...fI(r,e)}),{}):typeof t=="function"?t(e):t??{}}function pI(t){return t.startsWith("data-")?t:`data-${t}`}function yte(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[pI(n)]=t[n]),e},{})}function mI(t){return t?typeof t=="string"?{[pI(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...mI(n)}),{}):yte(t):null}function Xb(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Xb(r,e)}),{}):typeof t=="function"?t(e):t??{}}function bte({theme:t,style:e,vars:n,styleProps:r}){const o=Xb(e,t),s=Xb(n,t);return{...o,...s,...r}}const gI=y.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:s,size:i,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:d,renderRoot:u,__size:h,...f},p)=>{var E;const g=An(),b=t||"div",{styleProps:v,rest:x}=em(f),w=gee(),k=(E=w==null?void 0:w())==null?void 0:E(v.sx),C=hI(),S=uI({styleProps:v,theme:g,data:tte}),T={ref:p,style:bte({theme:g,style:e,vars:n,styleProps:S.inlineStyles}),className:$o(r,k,{[C]:S.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":d,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":KD(i)?void 0:i||void 0,size:h,...mI(s),...x};return m.jsxs(m.Fragment,{children:[S.hasResponsiveStyles&&m.jsx(dI,{selector:`.${C}`,styles:S.styles,media:S.media}),typeof u=="function"?u(T):m.jsx(b,{...T})]})});gI.displayName="@mantine/core/Box";const oe=gI;function yI(t){return t}function vte(t){const e=t;return n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function Ce(t){const e=y.forwardRef(t);return e.extend=yI,e.withProps=n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function Xt(t){const e=y.forwardRef(t);return e.withProps=n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=yI,e}const wte=y.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Kd(){return y.useContext(wte)}var bI={root:"m_87cf2631"};const xte={__staticSelector:"UnstyledButton"},zi=Xt((t,e)=>{const n=K("UnstyledButton",xte,t),{className:r,component:o="button",__staticSelector:s,unstyled:i,classNames:a,styles:l,style:c,...d}=n,u=ke({name:s,props:n,classes:bI,className:r,style:c,classNames:a,styles:l,unstyled:i});return m.jsx(oe,{...u("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...d})});zi.classes=bI;zi.displayName="@mantine/core/UnstyledButton";var vI={root:"m_515a97f8"};const kte={},jv=Ce((t,e)=>{const n=K("VisuallyHidden",kte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,...c}=n,d=ke({name:"VisuallyHidden",classes:vI,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a});return m.jsx(oe,{component:"span",ref:e,...d("root"),...c})});jv.classes=vI;jv.displayName="@mantine/core/VisuallyHidden";var wI={root:"m_1b7284a3"};const Cte={},Ste=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:Ft(e),"--paper-shadow":JD(n)}}),Bv=Xt((t,e)=>{const n=K("Paper",Cte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,withBorder:l,vars:c,radius:d,shadow:u,variant:h,mod:f,...p}=n,g=ke({name:"Paper",props:n,classes:wI,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:c,varsResolver:Ste});return m.jsx(oe,{ref:e,mod:[{"data-with-border":l},f],...g("root"),variant:h,...p})});Bv.classes=wI;Bv.displayName="@mantine/core/Paper";function xI(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}function g2(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function y2(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const Tte={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Ete({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:s,arrowY:i,dir:a}){const[l,c="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[Tte[l]]:r},u=-e/2;return l==="left"?{...d,...g2(c,i,n,o),right:u,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...d,...g2(c,i,n,o),left:u,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...d,...y2(c,s,n,o,a),bottom:u,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...d,...y2(c,s,n,o,a),top:u,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const Vv=y.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:s,arrowX:i,arrowY:a,style:l,...c},d)=>{const{dir:u}=Kd();return s?m.jsx("div",{...c,ref:d,style:{...l,...Ete({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:u,arrowX:i,arrowY:a})}}):null});Vv.displayName="@mantine/core/FloatingArrow";var kI={root:"m_9814e45f"};const Mte={zIndex:Ud("modal")},Ate=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:s,zIndex:i})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&Rr(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${I(o)})`:void 0,"--overlay-radius":s===void 0?void 0:Ft(s),"--overlay-z-index":i==null?void 0:i.toString()}}),od=Xt((t,e)=>{const n=K("Overlay",Mte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,fixed:c,center:d,children:u,radius:h,zIndex:f,gradient:p,blur:g,color:b,backgroundOpacity:v,mod:x,...w}=n,k=ke({name:"Overlay",props:n,classes:kI,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Ate});return m.jsx(oe,{ref:e,...k("root"),mod:[{center:d,fixed:c},x],...w,children:u})});od.classes=kI;od.displayName="@mantine/core/Overlay";function Jg(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function Rte({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||Jg(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=Jg(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return Jg(n)}const _te={},CI=Ce((t,e)=>{const{children:n,target:r,reuseTargetNode:o,...s}=K("Portal",_te,t),[i,a]=y.useState(!1),l=y.useRef(null);return Zp(()=>(a(!0),l.current=Rte({target:r,reuseTargetNode:o,...s}),Bf(e,l.current),!r&&!o&&l.current&&document.body.appendChild(l.current),()=>{!r&&!o&&l.current&&document.body.removeChild(l.current)}),[r]),!i||!l.current?null:St.createPortal(m.jsx(m.Fragment,{children:n}),l.current)});CI.displayName="@mantine/core/Portal";const Yd=Ce(({withinPortal:t=!0,children:e,...n},r)=>oI()==="test"||!t?m.jsx(m.Fragment,{children:e}):m.jsx(CI,{ref:r,...n,children:e}));Yd.displayName="@mantine/core/OptionalPortal";const Ll=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Hu={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Ll("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Ll("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Ll("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Ll("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Ll("top"),common:{transformOrigin:"top right"}}},b2={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Pte({transition:t,state:e,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in Hu?{transitionProperty:Hu[t].transitionProperty,...o,...Hu[t].common,...Hu[t][b2[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[b2[e]]}}function Dte({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:s,onEntered:i,onExited:a,enterDelay:l,exitDelay:c}){const d=An(),u=aee(),h=d.respectReducedMotion?u:!1,[f,p]=y.useState(h?0:t),[g,b]=y.useState(r?"entered":"exited"),v=y.useRef(-1),x=y.useRef(-1),w=y.useRef(-1),k=S=>{const T=S?o:s,E=S?i:a;window.clearTimeout(v.current);const M=h?0:S?t:e;p(M),M===0?(typeof T=="function"&&T(),typeof E=="function"&&E(),b(S?"entered":"exited")):w.current=requestAnimationFrame(()=>{LE.flushSync(()=>{b(S?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof T=="function"&&T(),b(S?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof E=="function"&&E(),b(S?"entered":"exited")},M)})})},C=S=>{if(window.clearTimeout(x.current),typeof(S?l:c)!="number"){k(S);return}x.current=window.setTimeout(()=>{k(S)},S?l:c)};return Ds(()=>{C(r)},[r]),y.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:f,transitionStatus:g,transitionTimingFunction:n||"ease"}}function Ui({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:s,timingFunction:i="ease",onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h}){const f=oI(),{transitionDuration:p,transitionStatus:g,transitionTimingFunction:b}=Dte({mounted:o,exitDuration:r,duration:n,timingFunction:i,onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h});return p===0||f==="test"?o?m.jsx(m.Fragment,{children:s({})}):t?s({display:"none"}):null:g==="exited"?t?s({display:"none"}):null:m.jsx(m.Fragment,{children:s(Pte({transition:e,duration:p,state:g,timingFunction:b}))})}Ui.displayName="@mantine/core/Transition";const[Ite,SI]=Jp("Popover component was not found in the tree");function $v({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=eI(e),s=Vo(o,r);return zd(t)?y.cloneElement(t,{[n]:s}):t}function TI(t){return m.jsx(jv,{tabIndex:-1,"data-autofocus":!0,...t})}$v.displayName="@mantine/core/FocusTrap";TI.displayName="@mantine/core/FocusTrapInitialFocus";$v.InitialFocus=TI;var EI={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const Nte={},tm=Ce((t,e)=>{var b,v,x,w;const n=K("PopoverDropdown",Nte,t),{className:r,style:o,vars:s,children:i,onKeyDownCapture:a,variant:l,classNames:c,styles:d,...u}=n,h=SI(),f=QQ({opened:h.opened,shouldReturnFocus:h.returnFocus}),p=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=Vo(e,h.floating);return h.disabled?null:m.jsx(Yd,{...h.portalProps,withinPortal:h.withinPortal,children:m.jsx(Ui,{mounted:h.opened,...h.transitionProps,transition:((b=h.transitionProps)==null?void 0:b.transition)||"fade",duration:((v=h.transitionProps)==null?void 0:v.duration)??150,keepMounted:h.keepMounted,exitDuration:typeof((x=h.transitionProps)==null?void 0:x.exitDuration)=="number"?h.transitionProps.exitDuration:(w=h.transitionProps)==null?void 0:w.duration,children:k=>m.jsx($v,{active:h.trapFocus&&h.opened,innerRef:g,children:m.jsxs(oe,{...p,...u,variant:l,onKeyDownCapture:UQ(()=>{var C,S;(C=h.onClose)==null||C.call(h),(S=h.onDismiss)==null||S.call(h)},{active:h.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":h.placement,"data-fixed":h.floatingStrategy==="fixed"||void 0,...h.getStyles("dropdown",{className:r,props:n,classNames:c,styles:d,style:[{...k,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:I(h.width)},h.resolvedStyles.dropdown,d==null?void 0:d.dropdown,o]}),children:[i,m.jsx(Vv,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:n,classNames:c,styles:d})})]})})})})});tm.classes=EI;tm.displayName="@mantine/core/PopoverDropdown";const Ote={refProp:"ref",popupType:"dialog"},Hv=Ce((t,e)=>{const{children:n,refProp:r,popupType:o,...s}=K("PopoverTarget",Ote,t);if(!zd(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=s,a=SI(),l=Vo(a.reference,Pv(n),e),c=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return y.cloneElement(n,{...i,...c,...a.targetProps,className:$o(a.targetProps.className,i.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});Hv.displayName="@mantine/core/PopoverTarget";function MI({opened:t,floating:e,position:n,positionDependencies:r}){const[o,s]=y.useState(0);y.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return h3(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,o,n]),Ds(()=>{e.update()},r),Ds(()=>{s(i=>i+1)},[t])}function Lte(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function jte(t,e){const n=Lte(t.middlewares),r=[Kr(t.offset)];return n.shift&&r.push(Vi(typeof n.shift=="boolean"?{limiter:Cx(),padding:5}:{limiter:Cx(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?cr():cr(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?Ql():Ql(n.inline)),r.push(jE({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&r.push(ip({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:s,availableHeight:i,...a}){var d;const c=((d=e().refs.floating.current)==null?void 0:d.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:s,availableHeight:i,...a}):Object.assign(c,{maxWidth:`${s}px`,maxHeight:`${i}px`})),t.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),r}function Bte(t){const[e,n]=sl({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=y.useRef(e),o=()=>{e&&n(!1)},s=()=>n(!e),i=ol({strategy:t.strategy,placement:t.position,middleware:jte(t,()=>i)});return MI({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:i}),Ds(()=>{var a;(a=t.onPositionChange)==null||a.call(t,i.placement)},[i.placement]),Ds(()=>{var a,l;e!==r.current&&(e?(l=t.onOpen)==null||l.call(t):(a=t.onClose)==null||a.call(t)),r.current=e},[e,t.onClose,t.onOpen]),{floating:i,controlled:typeof t.opened=="boolean",opened:e,onClose:o,onToggle:s}}const Vte={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ud("popover"),__staticSelector:"Popover",width:"max-content"},$te=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:Ft(e),"--popover-shadow":JD(n)}});function zs(t){var fu,pu,no,ro,Fo,vl;const e=K("Popover",Vte,t),{children:n,position:r,offset:o,onPositionChange:s,positionDependencies:i,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:d,width:u,middlewares:h,withArrow:f,arrowSize:p,arrowOffset:g,arrowRadius:b,arrowPosition:v,unstyled:x,classNames:w,styles:k,closeOnClickOutside:C,withinPortal:S,portalProps:T,closeOnEscape:E,clickOutsideEvents:M,trapFocus:R,onClose:P,onDismiss:L,onOpen:$,onChange:F,zIndex:z,radius:J,shadow:N,id:B,defaultOpened:H,__staticSelector:Z,withRoles:G,disabled:X,returnFocus:pe,variant:Fe,keepMounted:Ke,vars:ve,floatingStrategy:Oe,withOverlay:Ye,overlayProps:Ve,...ae}=e,en=ke({name:Z,props:e,classes:EI,classNames:w,styles:k,unstyled:x,rootSelector:"dropdown",vars:ve,varsResolver:$te}),{resolvedStyles:Pt}=Qp({classNames:w,styles:k,props:e}),tn=y.useRef(null),[Dt,Rn]=y.useState(null),[kr,Gi]=y.useState(null),{dir:qi}=Kd(),Ho=Gd(B),$e=Bte({middlewares:h,width:u,position:xI(qi,r),offset:typeof o=="number"?o+(f?p/2:0):o,arrowRef:tn,arrowOffset:g,onPositionChange:s,positionDependencies:i,opened:a,defaultOpened:H,onChange:F,onOpen:$,onClose:P,onDismiss:L,strategy:Oe});YQ(()=>{C&&($e.onClose(),L==null||L())},M,[Dt,kr]);const Ki=y.useCallback(Je=>{Rn(Je),$e.floating.refs.setReference(Je)},[$e.floating.refs.setReference]),Yi=y.useCallback(Je=>{Gi(Je),$e.floating.refs.setFloating(Je)},[$e.floating.refs.setFloating]),uu=y.useCallback(()=>{var Je;(Je=l==null?void 0:l.onExited)==null||Je.call(l),c==null||c()},[l==null?void 0:l.onExited,c]),hu=y.useCallback(()=>{var Je;(Je=l==null?void 0:l.onEntered)==null||Je.call(l),d==null||d()},[l==null?void 0:l.onEntered,d]);return m.jsxs(Ite,{value:{returnFocus:pe,disabled:X,controlled:$e.controlled,reference:Ki,floating:Yi,x:$e.floating.x,y:$e.floating.y,arrowX:(no=(pu=(fu=$e.floating)==null?void 0:fu.middlewareData)==null?void 0:pu.arrow)==null?void 0:no.x,arrowY:(vl=(Fo=(ro=$e.floating)==null?void 0:ro.middlewareData)==null?void 0:Fo.arrow)==null?void 0:vl.y,opened:$e.opened,arrowRef:tn,transitionProps:{...l,onExited:uu,onEntered:hu},width:u,withArrow:f,arrowSize:p,arrowOffset:g,arrowRadius:b,arrowPosition:v,placement:$e.floating.placement,trapFocus:R,withinPortal:S,portalProps:T,zIndex:z,radius:J,shadow:N,closeOnEscape:E,onDismiss:L,onClose:$e.onClose,onToggle:$e.onToggle,getTargetId:()=>`${Ho}-target`,getDropdownId:()=>`${Ho}-dropdown`,withRoles:G,targetProps:ae,__staticSelector:Z,classNames:w,styles:k,unstyled:x,variant:Fe,keepMounted:Ke,getStyles:en,resolvedStyles:Pt,floatingStrategy:Oe},children:[n,Ye&&m.jsx(Ui,{transition:"fade",mounted:$e.opened,duration:(l==null?void 0:l.duration)||250,exitDuration:(l==null?void 0:l.exitDuration)||250,children:Je=>m.jsx(Yd,{withinPortal:S,children:m.jsx(od,{...Ve,...en("overlay",{className:Ve==null?void 0:Ve.className,style:[Je,Ve==null?void 0:Ve.style]})})})})]})}zs.Target=Hv;zs.Dropdown=tm;zs.displayName="@mantine/core/Popover";zs.extend=t=>t;var ir={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const AI=y.forwardRef(({className:t,...e},n)=>m.jsxs(oe,{component:"span",className:$o(ir.barsLoader,t),...e,ref:n,children:[m.jsx("span",{className:ir.bar}),m.jsx("span",{className:ir.bar}),m.jsx("span",{className:ir.bar})]}));AI.displayName="@mantine/core/Bars";const RI=y.forwardRef(({className:t,...e},n)=>m.jsxs(oe,{component:"span",className:$o(ir.dotsLoader,t),...e,ref:n,children:[m.jsx("span",{className:ir.dot}),m.jsx("span",{className:ir.dot}),m.jsx("span",{className:ir.dot})]}));RI.displayName="@mantine/core/Dots";const _I=y.forwardRef(({className:t,...e},n)=>m.jsx(oe,{component:"span",className:$o(ir.ovalLoader,t),...e,ref:n}));_I.displayName="@mantine/core/Oval";const PI={bars:AI,oval:_I,dots:RI},Hte={loaders:PI,type:"oval"},Fte=(t,{size:e,color:n})=>({root:{"--loader-size":je(e,"loader-size"),"--loader-color":n?Wr(n,t):void 0}}),Us=Ce((t,e)=>{const n=K("Loader",Hte,t),{size:r,color:o,type:s,vars:i,className:a,style:l,classNames:c,styles:d,unstyled:u,loaders:h,variant:f,children:p,...g}=n,b=ke({name:"Loader",props:n,classes:ir,className:a,style:l,classNames:c,styles:d,unstyled:u,vars:i,varsResolver:Fte});return p?m.jsx(oe,{...b("root"),ref:e,...g,children:p}):m.jsx(oe,{...b("root"),ref:e,component:h[s],variant:f,size:r,...g})});Us.defaultLoaders=PI;Us.classes=ir;Us.displayName="@mantine/core/Loader";var al={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const v2={orientation:"horizontal"},zte=(t,{borderWidth:e})=>({group:{"--ai-border-width":I(e)}}),Fv=Ce((t,e)=>{const n=K("ActionIconGroup",v2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=K("ActionIconGroup",v2,t),p=ke({name:"ActionIconGroup",props:n,classes:al,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:zte,rootSelector:"group"});return m.jsx(oe,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});Fv.classes=al;Fv.displayName="@mantine/core/ActionIconGroup";const w2={},Ute=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":je(i,"section-height"),"--section-padding-x":je(i,"section-padding-x"),"--section-fz":fn(i),"--section-radius":e===void 0?void 0:Ft(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},zv=Ce((t,e)=>{const n=K("ActionIconGroupSection",w2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=K("ActionIconGroupSection",w2,t),p=ke({name:"ActionIconGroupSection",props:n,classes:al,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:Ute,rootSelector:"groupSection"});return m.jsx(oe,{...p("groupSection"),ref:e,variant:c,...f})});zv.classes=al;zv.displayName="@mantine/core/ActionIconGroupSection";const Wte={},Gte=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i})=>{const a=t.variantColorResolver({color:s||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ai-size":je(e,"ai-size"),"--ai-radius":n===void 0?void 0:Ft(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Wi=Xt((t,e)=>{const n=K("ActionIcon",Wte,t),{className:r,unstyled:o,variant:s,classNames:i,styles:a,style:l,loading:c,loaderProps:d,size:u,color:h,radius:f,__staticSelector:p,gradient:g,vars:b,children:v,disabled:x,"data-disabled":w,autoContrast:k,mod:C,...S}=n,T=ke({name:["ActionIcon",p],props:n,className:r,style:l,classes:al,classNames:i,styles:a,unstyled:o,vars:b,varsResolver:Gte});return m.jsxs(zi,{...T("root",{active:!x&&!c&&!w}),...S,unstyled:o,variant:s,size:u,disabled:x||c,ref:e,mod:[{loading:c,disabled:x||w},C],children:[m.jsx(Ui,{mounted:!!c,transition:"slide-down",duration:150,children:E=>m.jsx(oe,{component:"span",...T("loader",{style:E}),"aria-hidden":!0,children:m.jsx(Us,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),m.jsx(oe,{component:"span",mod:{loading:c},...T("icon"),children:v})]})});Wi.classes=al;Wi.displayName="@mantine/core/ActionIcon";Wi.Group=Fv;Wi.GroupSection=zv;const DI=y.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>m.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:m.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));DI.displayName="@mantine/core/CloseIcon";var II={root:"m_86a44da5","root--subtle":"m_220c80f2"};const qte={variant:"subtle"},Kte=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":je(e,"cb-size"),"--cb-radius":n===void 0?void 0:Ft(n),"--cb-icon-size":I(r)}}),nm=Xt((t,e)=>{const n=K("CloseButton",qte,t),{iconSize:r,children:o,vars:s,radius:i,className:a,classNames:l,style:c,styles:d,unstyled:u,"data-disabled":h,disabled:f,variant:p,icon:g,mod:b,__staticSelector:v,...x}=n,w=ke({name:v||"CloseButton",props:n,className:a,style:c,classes:II,classNames:l,styles:d,unstyled:u,vars:s,varsResolver:Kte});return m.jsxs(zi,{ref:e,...x,unstyled:u,variant:p,disabled:f,mod:[{disabled:f||h},b],...w("root",{variant:p,active:!f&&!h}),children:[g||m.jsx(DI,{}),o]})});nm.classes=II;nm.displayName="@mantine/core/CloseButton";function Yte(t){return y.Children.toArray(t).filter(Boolean)}var NI={root:"m_4081bf90"};const Jte={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Zte=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:s,wrap:i},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":Wd(r),"--group-align":o,"--group-justify":s,"--group-wrap":i}}),Et=Ce((t,e)=>{const n=K("Group",Jte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,children:l,gap:c,align:d,justify:u,wrap:h,grow:f,preventGrowOverflow:p,vars:g,variant:b,__size:v,mod:x,...w}=n,k=Yte(l),C=k.length,S=Wd(c??"md"),E={childWidth:`calc(${100/C}% - (${S} - ${S} / ${C}))`},M=ke({name:"Group",props:n,stylesCtx:E,className:o,style:s,classes:NI,classNames:r,styles:i,unstyled:a,vars:g,varsResolver:Zte});return m.jsx(oe,{...M("root"),ref:e,variant:b,mod:[{grow:f},x],size:v,...w,children:k})});Et.classes=NI;Et.displayName="@mantine/core/Group";const[Xte,Qte]=_v({size:"sm"}),ene={},OI=Ce((t,e)=>{const n=K("InputClearButton",ene,t),{size:r,variant:o,vars:s,classNames:i,styles:a,...l}=n,c=Qte(),{resolvedClassNames:d,resolvedStyles:u}=Qp({classNames:i,styles:a,props:n});return m.jsx(nm,{variant:o||"transparent",ref:e,size:r||(c==null?void 0:c.size)||"sm",classNames:d,styles:u,__staticSelector:"InputClearButton",...l})});OI.displayName="@mantine/core/InputClearButton";const[tne,rm]=_v({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Jn={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const x2={},nne=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${fn(e)} - ${I(2)})`}}),om=Ce((t,e)=>{const n=K("InputDescription",x2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=K("InputDescription",x2,n),p=rm(),g=ke({name:["InputWrapper",d],props:n,classes:Jn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"description",vars:l,varsResolver:nne}),b=u&&(p==null?void 0:p.getStyles)||g;return m.jsx(oe,{component:"p",ref:e,variant:h,size:c,...b("description",p!=null&&p.getStyles?{className:o,style:s}:void 0),...f})});om.classes=Jn;om.displayName="@mantine/core/InputDescription";const rne={},one=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${fn(e)} - ${I(2)})`}}),sm=Ce((t,e)=>{const n=K("InputError",rne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=n,p=ke({name:["InputWrapper",d],props:n,classes:Jn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"error",vars:l,varsResolver:one}),g=rm(),b=u&&(g==null?void 0:g.getStyles)||p;return m.jsx(oe,{component:"p",ref:e,variant:h,size:c,...b("error",g!=null&&g.getStyles?{className:o,style:s}:void 0),...f})});sm.classes=Jn;sm.displayName="@mantine/core/InputError";const k2={labelElement:"label"},sne=(t,{size:e})=>({label:{"--input-label-size":fn(e),"--input-asterisk-color":void 0}}),im=Ce((t,e)=>{const n=K("InputLabel",k2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,labelElement:c,size:d,required:u,htmlFor:h,onMouseDown:f,children:p,__staticSelector:g,variant:b,mod:v,...x}=K("InputLabel",k2,n),w=ke({name:["InputWrapper",g],props:n,classes:Jn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"label",vars:l,varsResolver:sne}),k=rm(),C=(k==null?void 0:k.getStyles)||w;return m.jsxs(oe,{...C("label",k!=null&&k.getStyles?{className:o,style:s}:void 0),component:c,variant:b,size:d,ref:e,htmlFor:c==="label"?h:void 0,mod:[{required:u},v],onMouseDown:S=>{f==null||f(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...x,children:[p,u&&m.jsx("span",{...C("required"),"aria-hidden":!0,children:" *"})]})});im.classes=Jn;im.displayName="@mantine/core/InputLabel";const C2={},Uv=Ce((t,e)=>{const n=K("InputPlaceholder",C2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,__staticSelector:c,variant:d,error:u,mod:h,...f}=K("InputPlaceholder",C2,n),p=ke({name:["InputPlaceholder",c],props:n,classes:Jn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"placeholder"});return m.jsx(oe,{...p("placeholder"),mod:[{error:!!u},h],component:"span",variant:d,ref:e,...f})});Uv.classes=Jn;Uv.displayName="@mantine/core/InputPlaceholder";function ine(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),o=t.slice(0,r),s=t.slice(r+1),i=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&s.includes("description")||n&&s.includes("error"),offsetTop:i}}const ane={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},lne=(t,{size:e})=>({label:{"--input-label-size":fn(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${fn(e)} - ${I(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${fn(e)} - ${I(2)})`}}),Wv=Ce((t,e)=>{const n=K("InputWrapper",ane,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,variant:d,__staticSelector:u,inputContainer:h,inputWrapperOrder:f,label:p,error:g,description:b,labelProps:v,descriptionProps:x,errorProps:w,labelElement:k,children:C,withAsterisk:S,id:T,required:E,__stylesApiProps:M,mod:R,...P}=n,L=ke({name:["InputWrapper",u],props:M||n,classes:Jn,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:lne}),$={size:c,variant:d,__staticSelector:u},F=Gd(T),z=typeof S=="boolean"?S:E,J=(w==null?void 0:w.id)||`${F}-error`,N=(x==null?void 0:x.id)||`${F}-description`,B=F,H=!!g&&typeof g!="boolean",Z=!!b,G=`${H?J:""} ${Z?N:""}`,X=G.trim().length>0?G.trim():void 0,pe=(v==null?void 0:v.id)||`${F}-label`,Fe=p&&m.jsx(im,{labelElement:k,id:pe,htmlFor:B,required:z,...$,...v,children:p},"label"),Ke=Z&&m.jsx(om,{...x,...$,size:(x==null?void 0:x.size)||$.size,id:(x==null?void 0:x.id)||N,children:b},"description"),ve=m.jsx(y.Fragment,{children:h(C)},"input"),Oe=H&&y.createElement(sm,{...w,...$,size:(w==null?void 0:w.size)||$.size,key:"error",id:(w==null?void 0:w.id)||J},g),Ye=f.map(Ve=>{switch(Ve){case"label":return Fe;case"input":return ve;case"description":return Ke;case"error":return Oe;default:return null}});return m.jsx(tne,{value:{getStyles:L,describedBy:X,inputId:B,labelId:pe,...ine(f,{hasDescription:Z,hasError:H})},children:m.jsx(oe,{ref:e,variant:d,size:c,mod:[{error:!!g},R],...L("root"),...P,children:Ye})})});Wv.classes=Jn;Wv.displayName="@mantine/core/InputWrapper";const cne={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},dne=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":je(e.size,"input-height"),"--input-fz":fn(e.size),"--input-radius":e.radius===void 0?void 0:Ft(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?I(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?I(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?je(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Mn=Xt((t,e)=>{const n=K("Input",cne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:d,size:u,wrapperProps:h,error:f,disabled:p,leftSection:g,leftSectionProps:b,leftSectionWidth:v,rightSection:x,rightSectionProps:w,rightSectionWidth:k,rightSectionPointerEvents:C,leftSectionPointerEvents:S,variant:T,vars:E,pointer:M,multiline:R,radius:P,id:L,withAria:$,withErrorStyles:F,mod:z,inputSize:J,__clearSection:N,__clearable:B,__defaultRightSection:H,...Z}=n,{styleProps:G,rest:X}=em(Z),pe=rm(),Fe={offsetBottom:pe==null?void 0:pe.offsetBottom,offsetTop:pe==null?void 0:pe.offsetTop},Ke=ke({name:["Input",c],props:d||n,classes:Jn,className:o,style:s,classNames:r,styles:i,unstyled:a,stylesCtx:Fe,rootSelector:"wrapper",vars:E,varsResolver:dne}),ve=$?{required:l,disabled:p,"aria-invalid":!!f,"aria-describedby":pe==null?void 0:pe.describedBy,id:(pe==null?void 0:pe.inputId)||L}:{},Oe=x||B&&N||H;return m.jsx(Xte,{value:{size:u||"sm"},children:m.jsxs(oe,{...Ke("wrapper"),...G,...h,mod:[{error:!!f&&F,pointer:M,disabled:p,multiline:R,"data-with-right-section":!!Oe,"data-with-left-section":!!g},z],variant:T,size:u,children:[g&&m.jsx("div",{...b,"data-position":"left",...Ke("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:g}),m.jsx(oe,{component:"input",...X,...ve,ref:e,required:l,mod:{disabled:p,error:!!f&&F},variant:T,__size:J,...Ke("input")}),Oe&&m.jsx("div",{...w,"data-position":"right",...Ke("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:Oe})]})})});Mn.classes=Jn;Mn.Wrapper=Wv;Mn.Label=im;Mn.Error=sm;Mn.Description=om;Mn.Placeholder=Uv;Mn.ClearButton=OI;Mn.displayName="@mantine/core/Input";function une(t,e,n){const r=K(t,e,n),{label:o,description:s,error:i,required:a,classNames:l,styles:c,className:d,unstyled:u,__staticSelector:h,__stylesApiProps:f,errorProps:p,labelProps:g,descriptionProps:b,wrapperProps:v,id:x,size:w,style:k,inputContainer:C,inputWrapperOrder:S,withAsterisk:T,variant:E,vars:M,mod:R,...P}=r,{styleProps:L,rest:$}=em(P),F={label:o,description:s,error:i,required:a,classNames:l,className:d,__staticSelector:h,__stylesApiProps:f||r,errorProps:p,labelProps:g,descriptionProps:b,unstyled:u,styles:c,size:w,style:k,inputContainer:C,inputWrapperOrder:S,withAsterisk:T,variant:E,id:x,mod:R,...v};return{...$,classNames:l,styles:c,unstyled:u,wrapperProps:{...F,...L},inputProps:{required:a,classNames:l,styles:c,unstyled:u,size:w,__staticSelector:h,__stylesApiProps:f||r,error:i,variant:E,id:x}}}const hne={__staticSelector:"InputBase",withAria:!0},ll=Xt((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=une("InputBase",hne,t);return m.jsx(Mn.Wrapper,{...r,children:m.jsx(Mn,{...n,...o,ref:e})})});ll.classes={...Mn.classes,...Mn.Wrapper.classes};ll.displayName="@mantine/core/InputBase";const fne={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var LI={root:"m_8bffd616"};const pne={},Gv=Xt((t,e)=>{const n=K("Flex",pne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:g,...b}=n,v=ke({name:"Flex",classes:LI,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l}),x=An(),w=hI(),k=uI({styleProps:{gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:g},theme:x,data:fne});return m.jsxs(m.Fragment,{children:[k.hasResponsiveStyles&&m.jsx(dI,{selector:`.${w}`,styles:k.styles,media:k.media}),m.jsx(oe,{ref:e,...v("root",{className:w,style:Yp(k.inlineStyles)}),...b})]})});Gv.classes=LI;Gv.displayName="@mantine/core/Flex";var jI={root:"m_b6d8b162"};function mne(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const gne={inherit:!1},yne=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:s})=>({root:{"--text-fz":fn(o),"--text-lh":WQ(o),"--text-gradient":e==="gradient"?Jb(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Wr(s,t):void 0}}),Gr=Xt((t,e)=>{const n=K("Text",gne,t),{lineClamp:r,truncate:o,inline:s,inherit:i,gradient:a,span:l,__staticSelector:c,vars:d,className:u,style:h,classNames:f,styles:p,unstyled:g,variant:b,mod:v,size:x,...w}=n,k=ke({name:["Text",c],props:n,classes:jI,className:u,style:h,classNames:f,styles:p,unstyled:g,vars:d,varsResolver:yne});return m.jsx(oe,{...k("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:b,mod:[{"data-truncate":mne(o),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":i},v],size:x,...w})});Gr.classes=jI;Gr.displayName="@mantine/core/Text";function qv({size:t,style:e,...n}){const r=t!==void 0?{width:I(t),height:I(t),...e}:e;return m.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:m.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const BI=y.createContext(null),bne=BI.Provider;function vne(){return{withinGroup:!!y.useContext(BI)}}var am={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const wne={},xne=(t,{spacing:e})=>({group:{"--ag-spacing":Wd(e)}}),Kv=Ce((t,e)=>{const n=K("AvatarGroup",wne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,spacing:c,...d}=n,u=ke({name:"AvatarGroup",classes:am,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:xne,rootSelector:"group"});return m.jsx(bne,{value:!0,children:m.jsx(oe,{ref:e,...u("group"),...d})})});Kv.classes=am;Kv.displayName="@mantine/core/AvatarGroup";function kne(t){return m.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Cne(t){let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}const Sne=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function Tne(t,e=Sne){const n=Cne(t),r=Math.abs(n)%e.length;return e[r]}function Ene(t,e=2){const n=t.split(" ");return n.length===1?t.slice(0,e).toUpperCase():n.map(r=>r[0]).slice(0,e).join("").toUpperCase()}const Mne={},Ane=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i,name:a,allowedInitialsColors:l})=>{const c=s==="initials"&&typeof a=="string"?Tne(a,l):s,d=t.variantColorResolver({color:c||"gray",theme:t,gradient:o,variant:r||"light",autoContrast:i});return{root:{"--avatar-size":je(e,"avatar-size"),"--avatar-radius":n===void 0?void 0:Ft(n),"--avatar-bg":c||r?d.background:void 0,"--avatar-color":c||r?d.color:void 0,"--avatar-bd":c||r?d.border:void 0}}},lm=Xt((t,e)=>{const n=K("Avatar",Mne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,src:c,alt:d,radius:u,color:h,gradient:f,imageProps:p,children:g,autoContrast:b,mod:v,name:x,allowedInitialsColors:w,...k}=n,C=vne(),[S,T]=y.useState(!c),E=ke({name:"Avatar",props:n,classes:am,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Ane});return y.useEffect(()=>T(!c),[c]),m.jsx(oe,{...E("root"),mod:[{"within-group":C.withinGroup},v],ref:e,...k,children:S?m.jsx("span",{...E("placeholder"),title:d,children:g||typeof x=="string"&&Ene(x)||m.jsx(kne,{})}):m.jsx("img",{...p,...E("image"),src:c,alt:d,onError:M=>{var R;T(!0),(R=p==null?void 0:p.onError)==null||R.call(p,M)}})})});lm.classes=am;lm.displayName="@mantine/core/Avatar";lm.Group=Kv;var VI={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Rne={},_ne=(t,{radius:e,color:n,gradient:r,variant:o,size:s,autoContrast:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{root:{"--badge-height":je(s,"badge-height"),"--badge-padding-x":je(s,"badge-padding-x"),"--badge-fz":je(s,"badge-fz"),"--badge-radius":e===void 0?void 0:Ft(e),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?Wr(n,t):void 0}}},Yv=Xt((t,e)=>{const n=K("Badge",Rne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,radius:c,color:d,gradient:u,leftSection:h,rightSection:f,children:p,variant:g,fullWidth:b,autoContrast:v,circle:x,mod:w,...k}=n,C=ke({name:"Badge",props:n,classes:VI,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:_ne});return m.jsxs(oe,{variant:g,mod:[{block:b,circle:x,"with-right-section":!!f,"with-left-section":!!h},w],...C("root",{variant:g}),ref:e,...k,children:[h&&m.jsx("span",{...C("section"),"data-position":"left",children:h}),m.jsx("span",{...C("label"),children:p}),f&&m.jsx("span",{...C("section"),"data-position":"right",children:f})]})});Yv.classes=VI;Yv.displayName="@mantine/core/Badge";var cl={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const S2={orientation:"horizontal"},Pne=(t,{borderWidth:e})=>({group:{"--button-border-width":I(e)}}),Jv=Ce((t,e)=>{const n=K("ButtonGroup",S2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=K("ButtonGroup",S2,t),p=ke({name:"ButtonGroup",props:n,classes:cl,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:Pne,rootSelector:"group"});return m.jsx(oe,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});Jv.classes=cl;Jv.displayName="@mantine/core/ButtonGroup";const T2={},Dne=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":je(i,"section-height"),"--section-padding-x":je(i,"section-padding-x"),"--section-fz":i!=null&&i.includes("compact")?fn(i.replace("compact-","")):fn(i),"--section-radius":e===void 0?void 0:Ft(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},Zv=Ce((t,e)=>{const n=K("ButtonGroupSection",T2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=K("ButtonGroupSection",T2,t),p=ke({name:"ButtonGroupSection",props:n,classes:cl,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:Dne,rootSelector:"groupSection"});return m.jsx(oe,{...p("groupSection"),ref:e,variant:c,...f})});Zv.classes=cl;Zv.displayName="@mantine/core/ButtonGroupSection";const Ine={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${I(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Nne={},One=(t,{radius:e,color:n,gradient:r,variant:o,size:s,justify:i,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":i,"--button-height":je(s,"button-height"),"--button-padding-x":je(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?fn(s.replace("compact-","")):fn(s),"--button-radius":e===void 0?void 0:Ft(e),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},xr=Xt((t,e)=>{const n=K("Button",Nne,t),{style:r,vars:o,className:s,color:i,disabled:a,children:l,leftSection:c,rightSection:d,fullWidth:u,variant:h,radius:f,loading:p,loaderProps:g,gradient:b,classNames:v,styles:x,unstyled:w,"data-disabled":k,autoContrast:C,mod:S,...T}=n,E=ke({name:"Button",props:n,classes:cl,className:s,style:r,classNames:v,styles:x,unstyled:w,vars:o,varsResolver:One}),M=!!c,R=!!d;return m.jsxs(zi,{ref:e,...E("root",{active:!a&&!p&&!k}),unstyled:w,variant:h,disabled:a||p,mod:[{disabled:a||k,loading:p,block:u,"with-left-section":M,"with-right-section":R},S],...T,children:[m.jsx(Ui,{mounted:!!p,transition:Ine,duration:150,children:P=>m.jsx(oe,{component:"span",...E("loader",{style:P}),"aria-hidden":!0,children:m.jsx(Us,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),m.jsxs("span",{...E("inner"),children:[c&&m.jsx(oe,{component:"span",...E("section"),mod:{position:"left"},children:c}),m.jsx(oe,{component:"span",mod:{loading:p},...E("label"),children:l}),d&&m.jsx(oe,{component:"span",...E("section"),mod:{position:"right"},children:d})]})]})});xr.classes=cl;xr.displayName="@mantine/core/Button";xr.Group=Jv;xr.GroupSection=Zv;const[Lne,jne]=Jp("Card component was not found in tree");var Xv={root:"m_e615b15f",section:"m_599a2148"};const Bne={},cm=Xt((t,e)=>{const n=K("CardSection",Bne,t),{classNames:r,className:o,style:s,styles:i,vars:a,withBorder:l,inheritPadding:c,mod:d,...u}=n,h=jne();return m.jsx(oe,{ref:e,mod:[{"with-border":l,"inherit-padding":c},d],...h.getStyles("section",{className:o,style:s,styles:i,classNames:r}),...u})});cm.classes=Xv;cm.displayName="@mantine/core/CardSection";const Vne={},$ne=(t,{padding:e})=>({root:{"--card-padding":Wd(e)}}),Jd=Xt((t,e)=>{const n=K("Card",Vne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,children:c,padding:d,...u}=n,h=ke({name:"Card",props:n,classes:Xv,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:$ne}),f=y.Children.toArray(c),p=f.map((g,b)=>typeof g=="object"&&g&&"type"in g&&g.type===cm?y.cloneElement(g,{"data-first-section":b===0||void 0,"data-last-section":b===f.length-1||void 0}):g);return m.jsx(Lne,{value:{getStyles:h},children:m.jsx(Bv,{ref:e,unstyled:a,...h("root"),...u,children:p})})});Jd.classes=Xv;Jd.displayName="@mantine/core/Card";Jd.Section=cm;const[Hne,Fne]=_v(),zne={};function $I(t){const{value:e,defaultValue:n,onChange:r,multiple:o,children:s}=K("ChipGroup",zne,t),[i,a]=sl({value:e,defaultValue:n,finalValue:o?[]:null,onChange:r}),l=d=>Array.isArray(i)?i.includes(d):d===i,c=d=>{const u=d.currentTarget.value;Array.isArray(i)?a(i.includes(u)?i.filter(h=>h!==u):[...i,u]):a(u)};return m.jsx(Hne,{value:{isChipSelected:l,onChange:c,multiple:o},children:s})}$I.displayName="@mantine/core/ChipGroup";var HI={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const Une={type:"checkbox"},Wne=(t,{size:e,radius:n,variant:r,color:o,autoContrast:s})=>{const i=t.variantColorResolver({color:o||t.primaryColor,theme:t,variant:r||"filled",autoContrast:s});return{root:{"--chip-fz":fn(e),"--chip-size":je(e,"chip-size"),"--chip-radius":n===void 0?void 0:Ft(n),"--chip-checked-padding":je(e,"chip-checked-padding"),"--chip-padding":je(e,"chip-padding"),"--chip-icon-size":je(e,"chip-icon-size"),"--chip-bg":o||r?i.background:void 0,"--chip-hover":o||r?i.hover:void 0,"--chip-color":o||r?i.color:void 0,"--chip-bd":o||r?i.border:void 0,"--chip-spacing":je(e,"chip-spacing")}}},dm=Ce((t,e)=>{const n=K("Chip",Une,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,id:c,checked:d,defaultChecked:u,onChange:h,value:f,wrapperProps:p,type:g,disabled:b,children:v,size:x,variant:w,icon:k,rootRef:C,autoContrast:S,mod:T,...E}=n,M=ke({name:"Chip",classes:HI,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Wne}),R=Fne(),P=Gd(c),{styleProps:L,rest:$}=em(E),[F,z]=sl({value:d,defaultValue:u,finalValue:!1,onChange:h}),J=R?{checked:R.isChipSelected(f),onChange:B=>{R.onChange(B),h==null||h(B.currentTarget.checked)},type:R.multiple?"checkbox":"radio"}:{},N=J.checked||F;return m.jsxs(oe,{size:x,variant:w,ref:C,mod:T,...M("root"),...L,...p,children:[m.jsx("input",{type:g,...M("input"),checked:N,onChange:B=>z(B.currentTarget.checked),id:P,disabled:b,ref:e,value:f,...J,...$}),m.jsxs("label",{htmlFor:P,"data-checked":N||void 0,"data-disabled":b||void 0,...M("label",{variant:w||"filled"}),children:[N&&m.jsx("span",{...M("iconWrapper"),children:k||m.jsx(qv,{...M("checkIcon")})}),m.jsx("span",{children:v})]})]})});dm.classes=HI;dm.displayName="@mantine/core/Chip";dm.Group=$I;var FI={root:"m_3eebeb36",label:"m_9e365f20"};const Gne={orientation:"horizontal"},qne=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?Wr(e,t):void 0,"--divider-border-style":n,"--divider-size":je(r,"divider-size")}}),Qv=Ce((t,e)=>{const n=K("Divider",Gne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,color:c,orientation:d,label:u,labelPosition:h,mod:f,...p}=n,g=ke({name:"Divider",classes:FI,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:qne});return m.jsx(oe,{ref:e,mod:[{orientation:d,"with-label":!!u},f],...g("root"),...p,role:"separator",children:u&&m.jsx(oe,{component:"span",mod:{position:h},...g("label"),children:u})})});Qv.classes=FI;Qv.displayName="@mantine/core/Divider";const Kne={multiple:!1},zI=y.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:s,name:i,form:a,resetRef:l,disabled:c,capture:d,inputProps:u,...h}=K("FileButton",Kne,t),f=y.useRef(null),p=()=>{var v;!c&&((v=f.current)==null||v.click())},g=v=>{n(o?Array.from(v.currentTarget.files):v.currentTarget.files[0]||null)};return Bf(l,()=>{f.current&&(f.current.value="")}),m.jsxs(m.Fragment,{children:[r({onClick:p,...h}),m.jsx("input",{style:{display:"none"},type:"file",accept:s,multiple:o,onChange:g,ref:Vo(e,f),name:i,form:a,capture:d,...u})]})});zI.displayName="@mantine/core/FileButton";const Yne=({value:t})=>m.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t==null?void 0:t.name}),Jne={valueComponent:Yne},ew=Ce((t,e)=>{const n=K("FileInput",Jne,t),{unstyled:r,vars:o,onChange:s,value:i,defaultValue:a,multiple:l,accept:c,name:d,form:u,valueComponent:h,clearable:f,clearButtonProps:p,readOnly:g,capture:b,fileInputProps:v,rightSection:x,size:w,placeholder:k,component:C,resetRef:S,classNames:T,styles:E,...M}=n,R=y.useRef(null),{resolvedClassNames:P,resolvedStyles:L}=Qp({classNames:T,styles:E,props:n}),[$,F]=sl({value:i,defaultValue:a,onChange:s,finalValue:l?[]:null}),z=Array.isArray($)?$.length!==0:$!==null,J=x||(f&&z&&!g?m.jsx(nm,{...p,variant:"subtle",onClick:()=>F(l?[]:null),size:w,unstyled:r}):null);y.useEffect(()=>{var B;(Array.isArray($)&&$.length===0||$===null)&&((B=R.current)==null||B.call(R))},[$]);const N=h;return m.jsx(zI,{onChange:F,multiple:l,accept:c,name:d,form:u,resetRef:Vo(R,S),disabled:g,capture:b,inputProps:v,children:B=>m.jsx(ll,{component:C||"button",ref:e,rightSection:J,...B,...M,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:w,classNames:T,styles:E,children:z?m.jsx(N,{value:$}):m.jsx(Mn.Placeholder,{__staticSelector:"FileInput",classNames:P,styles:L,children:k})})})});ew.classes=ll.classes;ew.displayName="@mantine/core/FileInput";const Zne=ew;function Xne({open:t,close:e,openDelay:n,closeDelay:r}){const o=y.useRef(-1),s=y.useRef(-1),i=()=>{window.clearTimeout(o.current),window.clearTimeout(s.current)},a=()=>{i(),n===0||n===void 0?t():o.current=window.setTimeout(t,n)},l=()=>{i(),r===0||r===void 0?e():s.current=window.setTimeout(e,r)};return y.useEffect(()=>i,[]),{openDropdown:a,closeDropdown:l}}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qb.apply(null,arguments)}function Qne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ere=y.useLayoutEffect,tre=function(e){var n=y.useRef(e);return ere(function(){n.current=e}),n},E2=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},nre=function(e,n){var r=y.useRef();return y.useCallback(function(o){e.current=o,r.current&&E2(r.current,null),r.current=n,n&&E2(n,o)},[n])},M2={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},rre=function(e){Object.keys(M2).forEach(function(n){e.style.setProperty(n,M2[n],"important")})},A2=rre,zt=null,R2=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function ore(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),zt||(zt=document.createElement("textarea"),zt.setAttribute("tabindex","-1"),zt.setAttribute("aria-hidden","true"),A2(zt)),zt.parentNode===null&&document.body.appendChild(zt);var o=t.paddingSize,s=t.borderSize,i=t.sizingStyle,a=i.boxSizing;Object.keys(i).forEach(function(h){var f=h;zt.style[f]=i[f]}),A2(zt),zt.value=e;var l=R2(zt,t);zt.value=e,l=R2(zt,t),zt.value="x";var c=zt.scrollHeight-o,d=c*n;a==="border-box"&&(d=d+o+s),l=Math.max(d,l);var u=c*r;return a==="border-box"&&(u=u+o+s),l=Math.min(u,l),[l,c]}var _2=function(){},sre=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},ire=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],are=!!document.documentElement.currentStyle,lre=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=sre(ire,n),o=r.boxSizing;if(o==="")return null;are&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:i}},cre=lre;function tw(t,e,n){var r=tre(n);y.useLayoutEffect(function(){var o=function(i){return r.current(i)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var dre=function(e,n){tw(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},ure=function(e){tw(window,"resize",e)},hre=function(e){tw(document.fonts,"loadingdone",e)},fre=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],pre=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,s=e.minRows,i=e.onChange,a=i===void 0?_2:i,l=e.onHeightChange,c=l===void 0?_2:l,d=Qne(e,fre),u=d.value!==void 0,h=y.useRef(null),f=nre(h,n),p=y.useRef(0),g=y.useRef(),b=function(){var w=h.current,k=r&&g.current?g.current:cre(w);if(k){g.current=k;var C=ore(k,w.value||w.placeholder||"x",s,o),S=C[0],T=C[1];p.current!==S&&(p.current=S,w.style.setProperty("height",S+"px","important"),c(S,{rowHeight:T}))}},v=function(w){u||b(),a(w)};return y.useLayoutEffect(b),dre(h,function(){if(!u){var x=h.current.value;requestAnimationFrame(function(){var w=h.current;w&&x!==w.value&&b()})}}),ure(b),hre(b),y.createElement("textarea",Qb({},d,{onChange:v,ref:f}))},mre=y.forwardRef(pre),UI={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const P2={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Ud("overlay")},gre=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),nw=Ce((t,e)=>{const n=K("LoadingOverlay",P2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,transitionProps:c,loaderProps:d,overlayProps:u,visible:h,zIndex:f,...p}=n,g=An(),b=ke({name:"LoadingOverlay",classes:UI,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:gre}),v={...P2.overlayProps,...u};return m.jsx(Ui,{transition:"fade",...c,mounted:!!h,children:x=>m.jsxs(oe,{...b("root",{style:x}),ref:e,...p,children:[m.jsx(Us,{...b("loader"),unstyled:a,...d}),m.jsx(od,{...v,...b("overlay"),darkHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||g.white}),m.jsx(od,{...v,...b("overlay"),lightHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||g.colors.dark[5]})]})})});nw.classes=UI;nw.displayName="@mantine/core/LoadingOverlay";const[yre,Zd]=Jp("Menu component was not found in the tree");var dl={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const bre={},rw=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=K("MenuDivider",bre,t),l=Zd();return m.jsx(oe,{ref:e,...l.getStyles("divider",{className:r,style:o,styles:s,classNames:n}),...a})});rw.classes=dl;rw.displayName="@mantine/core/MenuDivider";const vre={},ow=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:d,...u}=K("MenuDropdown",vre,t),h=y.useRef(null),f=Zd(),p=Dr(c,v=>{var x,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(x=h.current)==null?void 0:x.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),g=Dr(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),b=Dr(l,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return m.jsxs(zs.Dropdown,{...u,onMouseEnter:g,onMouseLeave:b,role:"menu","aria-orientation":"vertical",ref:Vo(e,h),...f.getStyles("dropdown",{className:r,style:o,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[f.withInitialFocusPlaceholder&&m.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),d]})});ow.classes=dl;ow.displayName="@mantine/core/MenuDropdown";const wre={},sw=Xt((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,color:a,closeMenuOnClick:l,leftSection:c,rightSection:d,children:u,disabled:h,"data-disabled":f,...p}=K("MenuItem",wre,t),g=Zd(),b=An(),{dir:v}=Kd(),x=y.useRef(null),w=g.getItemIndex(x.current),k=p,C=Dr(k.onMouseLeave,()=>g.setHovered(-1)),S=Dr(k.onMouseEnter,()=>g.setHovered(g.getItemIndex(x.current))),T=Dr(k.onClick,()=>{f||(typeof l=="boolean"?l&&g.closeDropdownImmediately():g.closeOnItemClick&&g.closeDropdownImmediately())}),E=Dr(k.onFocus,()=>g.setHovered(g.getItemIndex(x.current))),M=a?b.variantColorResolver({color:a,theme:b,variant:"light"}):void 0,R=a?il({color:a,theme:b}):null;return m.jsxs(zi,{...p,unstyled:g.unstyled,tabIndex:g.menuItemTabIndex,onFocus:E,...g.getStyles("item",{className:r,style:o,styles:s,classNames:n}),ref:Vo(x,e),role:"menuitem",disabled:h,"data-menu-item":!0,"data-disabled":h||f||void 0,"data-hovered":g.hovered===w?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:S,onMouseLeave:C,onClick:T,onKeyDown:YD({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:g.loop,dir:v,orientation:"vertical",onKeyDown:k.onKeyDown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:M==null?void 0:M.color,"--menu-item-hover":M==null?void 0:M.hover},children:[c&&m.jsx("div",{...g.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:c}),u&&m.jsx("div",{...g.getStyles("itemLabel",{styles:s,classNames:n}),children:u}),d&&m.jsx("div",{...g.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:d})]})});sw.classes=dl;sw.displayName="@mantine/core/MenuItem";const xre={},iw=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=K("MenuLabel",xre,t),l=Zd();return m.jsx(oe,{ref:e,...l.getStyles("label",{className:r,style:o,styles:s,classNames:n}),...a})});iw.classes=dl;iw.displayName="@mantine/core/MenuLabel";const kre={refProp:"ref"},WI=y.forwardRef((t,e)=>{const{children:n,refProp:r,...o}=K("MenuTarget",kre,t);if(!zd(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=Zd(),i=n.props,a=Dr(i.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),l=Dr(i.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),c=Dr(i.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return m.jsx(zs.Target,{refProp:r,popupType:"menu",ref:e,...o,children:y.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:c,"data-expanded":s.opened?!0:void 0})})});WI.displayName="@mantine/core/MenuTarget";const Cre={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function et(t){const e=K("Menu",Cre,t),{children:n,onOpen:r,onClose:o,opened:s,defaultOpened:i,trapFocus:a,onChange:l,closeOnItemClick:c,loop:d,closeOnEscape:u,trigger:h,openDelay:f,closeDelay:p,classNames:g,styles:b,unstyled:v,variant:x,vars:w,menuItemTabIndex:k,keepMounted:C,withInitialFocusPlaceholder:S,...T}=e,E=ke({name:"Menu",classes:dl,props:e,classNames:g,styles:b,unstyled:v}),[M,{setHovered:R,resetHovered:P}]=qQ(),[L,$]=sl({value:s,defaultValue:i,finalValue:!1,onChange:l}),[F,z]=y.useState(!1),J=()=>{$(!1),z(!1),L&&(o==null||o())},N=()=>{$(!0),!L&&(r==null||r())},B=()=>{L?J():N()},{openDropdown:H,closeDropdown:Z}=Xne({open:N,close:J,closeDelay:p,openDelay:f}),G=Fe=>GQ("[data-menu-item]","[data-menu-dropdown]",Fe),{resolvedClassNames:X,resolvedStyles:pe}=Qp({classNames:g,styles:b,props:e});return Ds(()=>{P()},[L]),m.jsx(yre,{value:{getStyles:E,opened:L,toggleDropdown:B,getItemIndex:G,hovered:M,setHovered:R,openedViaClick:F,setOpenedViaClick:z,closeOnItemClick:c,closeDropdown:h==="click"?J:Z,openDropdown:h==="click"?N:H,closeDropdownImmediately:J,loop:d,trigger:h,unstyled:v,menuItemTabIndex:k,withInitialFocusPlaceholder:S},children:m.jsx(zs,{...T,opened:L,onChange:B,defaultOpened:i,trapFocus:C?!1:a,closeOnEscape:u,__staticSelector:"Menu",classNames:X,styles:pe,unstyled:v,variant:x,keepMounted:C,children:n})})}et.extend=t=>t;et.withProps=vte(et);et.classes=dl;et.displayName="@mantine/core/Menu";et.Item=sw;et.Label=iw;et.Dropdown=ow;et.Target=WI;et.Divider=rw;const Sre={duration:100,transition:"fade"};function Tre(t,e){return{...Sre,...e,...t}}function Ere({offset:t,position:e,defaultOpened:n}){const[r,o]=y.useState(n),s=y.useRef(null),{x:i,y:a,elements:l,refs:c,update:d,placement:u}=ol({placement:e,middleware:[Vi({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=u.includes("right")?t:e.includes("left")?t*-1:0,f=u.includes("bottom")?t:e.includes("top")?t*-1:0,p=y.useCallback(({clientX:g,clientY:b})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:g,y:b,left:g+h,top:b+f,right:g,bottom:b}}})},[l.reference]);return y.useEffect(()=>{if(c.floating.current){const g=s.current;g.addEventListener("mousemove",p);const b=Qu(c.floating.current);return b.forEach(v=>{v.addEventListener("scroll",d)}),()=>{g.removeEventListener("mousemove",p),b.forEach(v=>{v.removeEventListener("scroll",d)})}}},[l.reference,c.floating.current,d,p,r]),{handleMouseMove:p,x:i,y:a,opened:r,setOpened:o,boundaryRef:s,floating:c.setFloating}}var um={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Mre={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Ud("popover")},Are=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Ft(e),"--tooltip-bg":n?Wr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),aw=Ce((t,e)=>{const n=K("TooltipFloating",Mre,t),{children:r,refProp:o,withinPortal:s,style:i,className:a,classNames:l,styles:c,unstyled:d,radius:u,color:h,label:f,offset:p,position:g,multiline:b,zIndex:v,disabled:x,defaultOpened:w,variant:k,vars:C,portalProps:S,...T}=n,E=An(),M=ke({name:"TooltipFloating",props:n,classes:um,className:a,style:i,classNames:l,styles:c,unstyled:d,rootSelector:"tooltip",vars:C,varsResolver:Are}),{handleMouseMove:R,x:P,y:L,opened:$,boundaryRef:F,floating:z,setOpened:J}=Ere({offset:p,position:g,defaultOpened:w});if(!zd(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const N=Vo(F,Pv(r),e),B=r.props,H=G=>{var X;(X=B.onMouseEnter)==null||X.call(B,G),R(G),J(!0)},Z=G=>{var X;(X=B.onMouseLeave)==null||X.call(B,G),J(!1)};return m.jsxs(m.Fragment,{children:[m.jsx(Yd,{...S,withinPortal:s,children:m.jsx(oe,{...T,...M("tooltip",{style:{...fI(i,E),zIndex:v,display:!x&&$?"block":"none",top:(L&&Math.round(L))??"",left:(P&&Math.round(P))??""}}),variant:k,ref:z,mod:{multiline:b},children:f})}),y.cloneElement(r,{...B,[o]:N,onMouseEnter:H,onMouseLeave:Z})]})});aw.classes=um;aw.displayName="@mantine/core/TooltipFloating";const GI=y.createContext(!1),Rre=GI.Provider,_re=()=>y.useContext(GI),Pre={openDelay:0,closeDelay:0};function lw(t){const{openDelay:e,closeDelay:n,children:r}=K("TooltipGroup",Pre,t);return m.jsx(Rre,{value:!0,children:m.jsx(vJ,{delay:{open:e,close:n},children:r})})}lw.displayName="@mantine/core/TooltipGroup";lw.extend=t=>t;function Dre(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function Ire(t){const e=Dre(t.middlewares),n=[Kr(t.offset)];return e.shift&&n.push(Vi(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?cr():cr(e.flip)),n.push(jE({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?Ql():Ql(e.inline)):t.inline&&n.push(Ql()),n}function Nre(t){var S,T,E;const[e,n]=y.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,s=_re(),i=Gd(),a=y.useCallback(M=>{n(M),M&&x(i)},[i]),{x:l,y:c,context:d,refs:u,update:h,placement:f,middlewareData:{arrow:{x:p,y:g}={}}}=ol({strategy:t.strategy,placement:t.position,open:o,onOpenChange:a,middleware:Ire(t)}),{delay:b,currentId:v,setCurrentId:x}=wJ(d,{id:i}),{getReferenceProps:w,getFloatingProps:k}=fD([yJ(d,{enabled:(S=t.events)==null?void 0:S.hover,delay:s?b:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((T=t.events)!=null&&T.touch)}),DJ(d,{enabled:(E=t.events)==null?void 0:E.focus,visibleOnly:!0}),NJ(d,{role:"tooltip"}),hD(d,{enabled:typeof t.opened>"u"})]);MI({opened:o,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:u,update:h}}),Ds(()=>{var M;(M=t.onPositionChange)==null||M.call(t,f)},[f]);const C=o&&v&&v!==i;return{x:l,y:c,arrowX:p,arrowY:g,reference:u.setReference,floating:u.setFloating,getFloatingProps:k,getReferenceProps:w,isGroupPhase:C,opened:o,placement:f}}const D2={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Ud("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},Ore=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Ft(e),"--tooltip-bg":n?Wr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ul=Ce((t,e)=>{const n=K("Tooltip",D2,t),{children:r,position:o,refProp:s,label:i,openDelay:a,closeDelay:l,onPositionChange:c,opened:d,defaultOpened:u,withinPortal:h,radius:f,color:p,classNames:g,styles:b,unstyled:v,style:x,className:w,withArrow:k,arrowSize:C,arrowOffset:S,arrowRadius:T,arrowPosition:E,offset:M,transitionProps:R,multiline:P,events:L,zIndex:$,disabled:F,positionDependencies:z,onClick:J,onMouseEnter:N,onMouseLeave:B,inline:H,variant:Z,keepMounted:G,vars:X,portalProps:pe,mod:Fe,floatingStrategy:Ke,middlewares:ve,...Oe}=K("Tooltip",D2,n),{dir:Ye}=Kd(),Ve=y.useRef(null),ae=Nre({position:xI(Ye,o),closeDelay:l,openDelay:a,onPositionChange:c,opened:d,defaultOpened:u,events:L,arrowRef:Ve,arrowOffset:S,offset:typeof M=="number"?M+(k?C/2:0):M,positionDependencies:[...z,r],inline:H,strategy:Ke,middlewares:ve}),en=ke({name:"Tooltip",props:n,classes:um,className:w,style:x,classNames:g,styles:b,unstyled:v,rootSelector:"tooltip",vars:X,varsResolver:Ore});if(!zd(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Pt=Vo(ae.reference,Pv(r),e),tn=Tre(R,{duration:100,transition:"fade"}),Dt=r.props;return m.jsxs(m.Fragment,{children:[m.jsx(Yd,{...pe,withinPortal:h,children:m.jsx(Ui,{...tn,keepMounted:G,mounted:!F&&!!ae.opened,duration:ae.isGroupPhase?10:tn.duration,children:Rn=>m.jsxs(oe,{...Oe,"data-fixed":Ke==="fixed"||void 0,variant:Z,mod:[{multiline:P},Fe],...ae.getFloatingProps({ref:ae.floating,className:en("tooltip").className,style:{...en("tooltip").style,...Rn,zIndex:$,top:ae.y??0,left:ae.x??0}}),children:[i,m.jsx(Vv,{ref:Ve,arrowX:ae.arrowX,arrowY:ae.arrowY,visible:k,position:ae.placement,arrowSize:C,arrowOffset:S,arrowRadius:T,arrowPosition:E,...en("arrow")})]})})}),y.cloneElement(r,ae.getReferenceProps({onClick:J,onMouseEnter:N,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:$o(w,Dt.className),...Dt,[s]:Pt}))]})});ul.classes=um;ul.displayName="@mantine/core/Tooltip";ul.Floating=aw;ul.Group=lw;var qI={root:"m_18320242","skeleton-fade":"m_299c329c"};const Lre={visible:!0,animate:!0},jre=(t,{width:e,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":I(n),"--skeleton-width":I(o?n:e),"--skeleton-radius":o?"1000px":r===void 0?void 0:Ft(r)}}),$f=Ce((t,e)=>{const n=K("Skeleton",Lre,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,width:c,height:d,circle:u,visible:h,radius:f,animate:p,mod:g,...b}=n,v=ke({name:"Skeleton",classes:qI,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:jre});return m.jsx(oe,{ref:e,...v("root"),mod:[{visible:h,animate:p},g],...b})});$f.classes=qI;$f.displayName="@mantine/core/Skeleton";var KI={root:"m_6d731127"};const Bre={gap:"md",align:"stretch",justify:"flex-start"},Vre=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":Wd(e),"--stack-align":n,"--stack-justify":r}}),Xd=Ce((t,e)=>{const n=K("Stack",Bre,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,align:c,justify:d,gap:u,variant:h,...f}=n,p=ke({name:"Stack",props:n,classes:KI,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Vre});return m.jsx(oe,{ref:e,...p("root"),variant:h,...f})});Xd.classes=KI;Xd.displayName="@mantine/core/Stack";const[$re,cw]=Jp("Tabs component was not found in the tree");var Qd={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Hre={},dw=Ce((t,e)=>{const n=K("TabsList",Hre,t),{children:r,className:o,grow:s,justify:i,classNames:a,styles:l,style:c,mod:d,...u}=n,h=cw();return m.jsx(oe,{...u,...h.getStyles("list",{className:o,style:c,classNames:a,styles:l,props:n,variant:h.variant}),ref:e,role:"tablist",variant:h.variant,mod:[{grow:s,orientation:h.orientation,placement:h.orientation==="vertical"&&h.placement,inverted:h.inverted},d],"aria-orientation":h.orientation,__vars:{"--tabs-justify":i},children:r})});dw.classes=Qd;dw.displayName="@mantine/core/TabsList";const Fre={},uw=Ce((t,e)=>{const n=K("TabsPanel",Fre,t),{children:r,className:o,value:s,classNames:i,styles:a,style:l,mod:c,keepMounted:d,...u}=n,h=cw(),f=h.value===s,p=h.keepMounted||d||f?r:null;return m.jsx(oe,{...u,...h.getStyles("panel",{className:o,classNames:i,styles:a,style:[l,f?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:h.orientation},c],role:"tabpanel",id:h.getPanelId(s),"aria-labelledby":h.getTabId(s),children:p})});uw.classes=Qd;uw.displayName="@mantine/core/TabsPanel";const zre={},hw=Ce((t,e)=>{const n=K("TabsTab",zre,t),{className:r,children:o,rightSection:s,leftSection:i,value:a,onClick:l,onKeyDown:c,disabled:d,color:u,style:h,classNames:f,styles:p,vars:g,mod:b,tabIndex:v,...x}=n,w=An(),{dir:k}=Kd(),C=cw(),S=a===C.value,T=M=>{C.onChange(C.allowTabDeactivation&&a===C.value?null:a),l==null||l(M)},E={classNames:f,styles:p,props:n};return m.jsxs(zi,{...x,...C.getStyles("tab",{className:r,style:h,variant:C.variant,...E}),disabled:d,unstyled:C.unstyled,variant:C.variant,mod:[{active:S,disabled:d,orientation:C.orientation,inverted:C.inverted,placement:C.orientation==="vertical"&&C.placement},b],ref:e,role:"tab",id:C.getTabId(a),"aria-selected":S,tabIndex:v!==void 0?v:S||C.value===null?0:-1,"aria-controls":C.getPanelId(a),onClick:T,__vars:{"--tabs-color":u?Wr(u,w):void 0},onKeyDown:YD({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:C.activateTabWithKeyboard,loop:C.loop,orientation:C.orientation||"horizontal",dir:k,onKeyDown:c}),children:[i&&m.jsx("span",{...C.getStyles("tabSection",E),"data-position":"left",children:i}),o&&m.jsx("span",{...C.getStyles("tabLabel",E),children:o}),s&&m.jsx("span",{...C.getStyles("tabSection",E),"data-position":"right",children:s})]})});hw.classes=Qd;hw.displayName="@mantine/core/TabsTab";const I2="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Ure={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Wre=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ft(e),"--tabs-color":Wr(n,t),"--tabs-text-color":Qee(r,t)?iI({color:n,theme:t,autoContrast:r}):void 0}}),xo=Ce((t,e)=>{const n=K("Tabs",Ure,t),{defaultValue:r,value:o,onChange:s,orientation:i,children:a,loop:l,id:c,activateTabWithKeyboard:d,allowTabDeactivation:u,variant:h,color:f,radius:p,inverted:g,placement:b,keepMounted:v,classNames:x,styles:w,unstyled:k,className:C,style:S,vars:T,autoContrast:E,mod:M,...R}=n,P=Gd(c),[L,$]=sl({value:o,defaultValue:r,finalValue:null,onChange:s}),F=ke({name:"Tabs",props:n,classes:Qd,className:C,style:S,classNames:x,styles:w,unstyled:k,vars:T,varsResolver:Wre});return m.jsx($re,{value:{placement:b,value:L,orientation:i,id:P,loop:l,activateTabWithKeyboard:d,getTabId:i2(`${P}-tab`,I2),getPanelId:i2(`${P}-panel`,I2),onChange:$,allowTabDeactivation:u,variant:h,color:f,radius:p,inverted:g,keepMounted:v,unstyled:k,getStyles:F},children:m.jsx(oe,{ref:e,id:P,variant:h,mod:[{orientation:i,inverted:i==="horizontal"&&g,placement:i==="vertical"&&b},M],...F("root"),...R,children:a})})});xo.classes=Qd;xo.displayName="@mantine/core/Tabs";xo.Tab=hw;xo.Panel=uw;xo.List=dw;const Gre={},hm=Ce((t,e)=>{const n=K("TextInput",Gre,t);return m.jsx(ll,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});hm.classes=ll.classes;hm.displayName="@mantine/core/TextInput";const YI=(t,e,n=!1)=>{const r=[];function o(s,i="--bn"){for(const a in s){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${i}-${l}`;typeof s[a]!="object"?(typeof s[a]=="number"&&(s[a]=`${s[a]}px`),n?e.style.removeProperty(c):e.style.setProperty(c,s[a].toString())):o(s[a],c)}}return o(t),r},N2=(t,e)=>YI(t,e),qre={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},Kre=t=>YI(qre,t,!0),JI=t=>m.jsxs(Xd,{gap:0,className:"bn-tooltip",children:[m.jsx(Gr,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&m.jsx(Gr,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),Zg=y.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:s,icon:i,isSelected:a,isDisabled:l,onClick:c,label:d,variant:u,...h}=t;he(h,!1);const[f,p]=y.useState(!1),g=r?m.jsx(xr,{"aria-label":d,className:n,onMouseDown:b=>{Rb()&&b.currentTarget.focus()},onClick:b=>{p(!0),c==null||c(b)},onPointerLeave:()=>p(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:u==="compact"?"compact-xs":"xs",disabled:l||!1,ref:e,...h,children:r}):m.jsx(Wi,{className:n,"aria-label":d,onMouseDown:b=>{Rb()&&b.currentTarget.focus()},onClick:b=>{p(!0),c==null||c(b)},onPointerLeave:()=>p(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:u==="compact"?20:30,disabled:l||!1,ref:e,...h,children:i});return o?m.jsx(ul,{disabled:f,withinPortal:!1,label:m.jsx(JI,{mainTooltip:o,secondaryTooltip:s}),children:g}):g}),Yre=y.forwardRef((t,e)=>{const{className:n,text:r,icon:o,isSelected:s,mainTooltip:i,secondaryTooltip:a,onClick:l,onMouseEnter:c,...d}=t;he(d,!1);const[u,h]=y.useState(!1),f=m.jsxs(dm,{className:n,checked:s===!0,wrapperProps:{onMouseEnter:c,onMouseLeave:()=>h(!1),onClick:p=>{h(!0),l==null||l(p)}},variant:"light",icon:null,ref:e,children:[m.jsx("span",{children:o}),m.jsx("span",{children:r})]});return!i||u?f:m.jsx(ul,{refProp:"rootRef",withinPortal:!1,label:m.jsx(JI,{mainTooltip:i,secondaryTooltip:a}),children:f})}),Jre=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Et,{className:n,ref:e,children:r})}),Zre=y.forwardRef((t,e)=>{const{className:n,children:r,headerText:o,selected:s,onFocus:i,onBlur:a,tabIndex:l,...c}=t;he(c,!1);const d=y.useRef(null);return y.useEffect(()=>{var u;s&&((u=d.current)==null||u.scrollIntoView({behavior:"smooth",block:"center"}))},[s]),m.jsxs(Jd,{className:Be(n,s?"selected":""),onFocus:i,onBlur:a,tabIndex:l,ref:Tv([e,d]),children:[o&&m.jsx(Gr,{className:"bn-header-text",children:o}),r]})}),Xre=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(Jd.Section,{className:n,ref:e,children:r})}),Qre=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(Qv,{className:n,label:m.jsx(Gr,{children:r}),ref:e})}),eoe=y.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:o,...s}=t;return he(s,!1),n==="loading"?m.jsxs(Et,{children:[m.jsx($f,{height:24,width:24}),m.jsx("div",{children:m.jsx($f,{height:12,width:100})})]}):m.jsxs(Et,{children:[m.jsx(lm,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),m.jsxs(Gr,{fz:"sm",fw:"bold",children:[n.username,m.jsxs(Gr,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&"(edited)"]})]})]})}),toe=y.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:o,timeString:s,edited:i,actions:a,children:l,...c}=t,{hovered:d,ref:u}=lee(),{focused:h,ref:f}=tI(),p=Tv([e,u]);return he(c,!1),m.jsxs(Et,{pos:"relative",ref:p,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&d||h)?m.jsx(Et,{ref:f,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,m.jsx(eoe,{...t}),l]})}),noe=y.forwardRef((t,e)=>{const{className:n,autoFocus:r,onFocus:o,onBlur:s,editor:i,editable:a,...l}=t;return he(l,!1),m.jsx(tN,{autoFocus:r,className:n,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:e,onFocus:o,onBlur:s,children:m.jsx(BD,{formattingToolbar:roe})})}),roe=()=>{const t=LD([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return m.jsx(jD,{blockTypeSelectItems:[],children:t})},ooe=y.forwardRef((t,e)=>{const{className:n,name:r,label:o,variant:s,icon:i,value:a,autoFocus:l,placeholder:c,disabled:d,onKeyDown:u,onChange:h,onSubmit:f,autoComplete:p,rightSection:g,...b}=t;return he(b),m.jsx(hm,{size:"xs",className:Be(n||"",s==="large"?"bn-mt-input-large":""),ref:e,name:r,label:o,leftSection:i,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:g,placeholder:c,disabled:d,onKeyDown:u,onChange:h,onSubmit:f,autoComplete:p})});var ZI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},O2=D.createContext&&D.createContext(ZI),soe=["attr","size","title"];function ioe(t,e){if(t==null)return{};var n=aoe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aoe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(this,arguments)}function L2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ff(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L2(Object(n),!0).forEach(function(r){loe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function loe(t,e,n){return e=coe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function coe(t){var e=doe(t,"string");return typeof e=="symbol"?e:e+""}function doe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XI(t){return t&&t.map((e,n)=>D.createElement(e.tag,Ff({key:n},e.attr),XI(e.child)))}function QI(t){return e=>D.createElement(uoe,Hf({attr:Ff({},t.attr)},e),XI(t.child))}function uoe(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=ioe(t,soe),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),D.createElement("svg",Hf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:Ff(Ff({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&D.createElement("title",null,s),t.children)};return O2!==void 0?D.createElement(O2.Consumer,null,n=>e(n)):e(ZI)}function hoe(t){return QI({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function foe(t){return QI({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}const eN=y.createContext(void 0),poe=y.forwardRef((t,e)=>{const{children:n,onOpenChange:r,position:o,sub:s,...i}=t;he(i);const[a,l]=y.useState(!1),c=y.useRef(null),d=y.useRef(),u=y.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{l(!1)},250)},[]),h=y.useCallback(()=>{d.current&&clearTimeout(d.current),l(!0)},[]);return m.jsx(eN.Provider,{value:{onMenuMouseOver:h,onMenuMouseLeave:u},children:m.jsx(et.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:qd(e,c),onMouseOver:h,onMouseLeave:u,children:m.jsx(et,{portalProps:{target:c.current?c.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})}),moe=t=>{const{children:e,onOpenChange:n,position:r,sub:o,...s}=t;return he(s),o?m.jsx(poe,{...t}):m.jsx(et,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e})},goe=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,checked:s,subTrigger:i,onClick:a,...l}=t;return he(l,!1),i?m.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation()},ref:e,...l,children:[r,m.jsx(foe,{size:15})]}):m.jsx(et.Item,{className:n,ref:e,leftSection:o,rightSection:s?m.jsx(qv,{size:10}):s===!1?m.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),yoe=t=>{const{children:e,sub:n,...r}=t;return he(r),m.jsx(et.Target,{children:e})},boe=y.forwardRef((t,e)=>{const{className:n,children:r,sub:o,...s}=t;he(s);const i=y.useContext(eN);return m.jsx(et.Dropdown,{className:n,ref:e,onMouseOver:i==null?void 0:i.onMenuMouseOver,onMouseLeave:i==null?void 0:i.onMenuMouseLeave,children:r})}),voe=y.forwardRef((t,e)=>{const{className:n,...r}=t;return he(r),m.jsx(et.Divider,{className:n,ref:e})}),woe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(et.Label,{className:n,ref:e,children:r})}),xoe=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...d}=t;return he(d,!1),o?m.jsx(Wi,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):m.jsx(xr,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),koe=y.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:s,setOpenTab:i,loading:a,...l}=t;return he(l),m.jsx(Et,{className:n,ref:e,children:m.jsxs(xo,{value:s,defaultValue:o,onChange:i,children:[a&&m.jsx(nw,{visible:a}),m.jsx(xo.List,{children:r.map(c=>m.jsx(xo.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>m.jsx(xo.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),Coe=y.forwardRef((t,e)=>{const{className:n,children:r,onClick:o,label:s,...i}=t;return he(i),m.jsx(xr,{size:"xs","aria-label":s,className:n,ref:e,onClick:o,...i,children:r})}),Soe=y.forwardRef((t,e)=>{const{className:n,accept:r,value:o,placeholder:s,onChange:i,...a}=t;return he(a),m.jsx(Zne,{size:"xs",className:n,ref:e,accept:r,value:o,placeholder:s,onChange:i,...a})}),Toe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx("div",{className:n,ref:e,children:r})}),Eoe=y.forwardRef((t,e)=>{const{className:n,value:r,placeholder:o,onKeyDown:s,onChange:i,...a}=t;return he(a),m.jsx(hm,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:o,onKeyDown:s,onChange:i})}),Moe=t=>{const{opened:e,position:n,children:r,...o}=t;return he(o),m.jsx(zs,{withinPortal:!1,opened:e,position:n,children:r})},Aoe=t=>{const{children:e,...n}=t;return he(n),m.jsx(Hv,{children:e})},Roe=y.forwardRef((t,e)=>{const{className:n,children:r,variant:o,...s}=t;return he(s),m.jsx(tm,{className:n,ref:e,children:r})}),_oe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(Et,{align:"center",gap:0,className:n,ref:e,...o,children:r})}),Poe=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...d}=t;return he(d,!1),o?m.jsx(Wi,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):m.jsx(xr,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),Doe=y.forwardRef((t,e)=>{const{className:n,children:r,id:o,...s}=t;return he(s),m.jsx(Xd,{gap:0,className:n,ref:e,id:o,role:"listbox",children:r})}),Ioe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Et,{className:n,ref:e,children:m.jsx(Et,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),Noe=y.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;he(a);const l=y.useRef(null);return y.useEffect(()=>{if(!l.current||!r)return;const c=GD(l.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),m.jsxs(Et,{gap:0,className:n,ref:qd(e,l),id:i,role:"option",onMouseDown:c=>c.preventDefault(),onClick:o,"aria-selected":r||void 0,children:[s.icon&&m.jsx(Et,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:s.icon}),m.jsxs(Xd,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[m.jsx(Gr,{className:"bn-mt-suggestion-menu-item-title",children:s.title}),m.jsx(Gr,{className:"bn-mt-suggestion-menu-item-subtitle",children:s.subtext})]}),s.badge&&m.jsx(Et,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:m.jsx(Yv,{size:"xs",children:s.badge})})]})}),Ooe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Et,{className:n,ref:e,children:r})}),Loe=y.forwardRef((t,e)=>{const{className:n,...r}=t;return he(r),m.jsx(Us,{className:n,type:"dots",size:16,ref:e})}),joe=y.forwardRef((t,e)=>{const{className:n,children:r,id:o,columns:s,...i}=t;return he(i),m.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${s}, 1fr)`},ref:e,id:o,role:"grid",children:r})}),Boe=y.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return he(s),m.jsx(Et,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:m.jsx(Et,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),Voe=y.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;he(a);const l=y.useRef(null);return y.useEffect(()=>{if(!l.current||!r)return;const c=GD(l.current,document.querySelector(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),m.jsx("div",{className:n,ref:qd(e,l),id:i,role:"option",onClick:o,"aria-selected":r||void 0,children:s.icon})}),$oe=y.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return he(s),m.jsx(Us,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:e})}),Hoe=y.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:o,onClick:s,...i}=t;return he(i,!1),m.jsx(xr,{className:r,ref:e,onMouseDown:o,onClick:s,...i,children:n})}),Foe=y.forwardRef((t,e)=>{const{className:n,children:r,draggable:o,onDragStart:s,onDragEnd:i,style:a,label:l,...c}=t;return he(c,!1),m.jsx(xr,{className:n,ref:e,"aria-label":l,draggable:o,onDragStart:s,onDragEnd:i,style:a,...c,children:r})}),Xg=y.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:s,variant:i,...a}=t;he(a);const{ref:l,focused:c}=tI(),d=eI(c),u=qd(e,l,d);return m.jsx(Gv,{className:n,ref:u,role:"toolbar",onMouseEnter:o,onMouseLeave:s,gap:i==="action-toolbar"?2:void 0,children:r})}),Qg=y.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:o,...s}=t;he(s);const i=r.filter(a=>a.isSelected)[0];return i?m.jsxs(et,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[m.jsx(et.Target,{children:m.jsx(xr,{onMouseDown:a=>{Rb()&&a.currentTarget.focus()},leftSection:i.icon,rightSection:m.jsx(hoe,{}),size:"xs",variant:"subtle",disabled:o,children:i.text})}),m.jsx(et.Dropdown,{className:n,ref:e,children:r.map(a=>m.jsx(et.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?m.jsx(qv,{size:10,className:"bn-tick-icon"}):m.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),zoe={FormattingToolbar:{Root:Xg,Button:Zg,Select:Qg},FilePanel:{Root:koe,Button:Coe,FileInput:Soe,TabPanel:Toe,TextInput:Eoe},GridSuggestionMenu:{Root:joe,Item:Voe,EmptyItem:Boe,Loader:$oe},LinkToolbar:{Root:Xg,Button:Zg,Select:Qg},SideMenu:{Root:_oe,Button:Poe},SuggestionMenu:{Root:Doe,Item:Noe,EmptyItem:Ioe,Label:Ooe,Loader:Loe},TableHandle:{Root:Foe,ExtendButton:Hoe},Generic:{Badge:{Root:Yre,Group:Jre},Form:{Root:t=>m.jsx("div",{children:t.children}),TextInput:ooe},Menu:{Root:moe,Trigger:yoe,Dropdown:boe,Divider:voe,Label:woe,Item:goe,Button:xoe},Popover:{Root:Moe,Trigger:Aoe,Content:Roe},Toolbar:{Root:Xg,Button:Zg,Select:Qg}},Comments:{Comment:toe,Editor:noe,Card:Zre,CardSection:Xre,ExpandSectionsPrompt:Qre}},Uoe={activeClassName:""},tN=t=>{const{className:e,theme:n,...r}=t,o=to(),s=FD(),i=(o==null?void 0:o.colorSchemePreference)||s,a=y.useCallback(c=>{if(c&&(Kre(c),typeof n=="object")){if("light"in n&&"dark"in n){N2(n[i==="dark"?"dark":"light"],c);return}N2(n,c);return}},[i,n]),l=typeof n=="string"?n:i!=="no-preference"?i:"light";return m.jsx(vD.Provider,{value:zoe,children:m.jsx(cI,{theme:Uoe,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:m.jsx(bQ,{"data-mantine-color-scheme":l,className:Be("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})},Woe="_container_1bxwl_2",Goe="_editIcon_1bxwl_9",qoe="_saveButton_1bxwl_16",Koe="_editor_1bxwl_23",Yoe="_withoutBorder_1bxwl_28",oa={container:Woe,editIcon:Goe,saveButton:qoe,editor:Koe,withoutBorder:Yoe};function zf({value:t,setValue:e,readOnly:n,classes:r,showEditIcon:o,onClickEdit:s,onClickSave:i,shouldShowSaveButton:a,withoutBorder:l}){const c=Wp({domAttributes:{editor:{class:oa.editor}},initialContent:t}),{theme:d}=hp();return m.jsxs("div",{className:le(oa.container,r==null?void 0:r.container,l&&oa.withoutBorder),children:[n&&o&&m.jsx(Q,{onClick:s,className:oa.editIcon,icon:"solar:pen-new-square-outline",width:24,height:24}),m.jsx(tN,{className:oa.editor,editable:!n,theme:d===Ci.Dark?"dark":"light",editor:c,onChange:()=>e(c.document)}),a&&!n&&m.jsx(ht,{onClick:i,className:oa.saveButton,children:"Save"})]})}const Joe="_input_1uklv_2",Zoe="_unit_1uklv_8",Xoe="_footerCenter_1uklv_13",Qoe="_submitBtn_1uklv_19",Fu={input:Joe,unit:Zoe,footerCenter:Xoe,submitBtn:Qoe},ese="checklist_record",eu=()=>{const[t,e]=ur(ese,{});return{addChecklistRecord:s=>{s.records.length&&e(i=>({...i,[s.checklistTemplateId]:[...i[s.checklistTemplateId]||[],...s.records.map(a=>({id:sn(),...a,checklistId:s.checklistId,checklistTemplateId:s.checklistTemplateId,createdAt:s.createdAt}))]}))},getChecklistRecords:(s,{rangeDate:i,type:a="date",fieldIds:l,sortBy:c,sortDirection:d="asc"})=>{const u=t[s]||[];let h=u;if(i&&(h=u.filter(p=>{const g=new Date(p.createdAt);return g>=new Date(i.from)&&g<=new Date(i.to)})),l&&l.length&&(h=h.filter(p=>l.includes(p.fieldId))),c)switch(c){case"createdAt":{h=h.sort((p,g)=>{const b=new Date(p.createdAt),v=new Date(g.createdAt);return b.getTime()-v.getTime()});break}}return d==="desc"&&(h=h.reverse()),h.reduce((p,g)=>{const b=new Date(g.createdAt),v=a==="date"?Ej(b,"yyyy-MM-dd"):b.toISOString();return p[v]||(p[v]=[]),p[v].push(g),p},{})},updateChecklistRecord:(s,{value:i,checklistTemplateId:a})=>{e(l=>{const d=(l[a]||[]).map(u=>u.id===s?{...u,value:i}:u);return{...l,[a]:d}})},deleteChecklistRecord:(s,{checklistTemplateId:i})=>{e(a=>{const c=(a[i]||[]).filter(d=>d.id!==s);return{...a,[i]:c}})}}},tse=({fields:t,checklistTemplate:e,checklist:n,currentDay:r,onSubmit:o})=>{const[s,i]=D.useState(t.reduce((l,{id:c})=>({...l,[c]:void 0}),{})),{addChecklistRecord:a}=eu();return m.jsxs(m.Fragment,{children:[t.map(l=>{switch(l==null?void 0:l.type){case"metric":return m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:l.icon}),title:l.title,rightComponent:m.jsxs(m.Fragment,{children:[m.jsx(bo,{onChange:c=>{i({...s,[l.id]:Number(c.target.value)})},border:"dash",className:Fu.input,type:"number"}),m.jsx(ie.Text,{className:Fu.unit,children:l.unit})]})});case"note":return m.jsxs(m.Fragment,{children:[m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:l.icon}),title:l.title}),m.jsx(zf,{withoutBorder:!0,value:s==null?void 0:s[l.id],setValue:c=>{i({...s,[l.id]:c})}})]})}}),m.jsx("div",{className:Fu.footerCenter,children:m.jsx(ht,{size:"lg",className:Fu.submitBtn,onClick:()=>{if(e){const l=new Date,c=Rj(Pj(Dj(_j(new Date(r),l.getMilliseconds()),l.getSeconds()),l.getMinutes()),l.getHours());a({checklistId:n.id,checklistTemplateId:e.id,createdAt:c.toISOString(),records:Object.entries(s).map(([d,u])=>({fieldId:d,value:u}))}),o==null||o()}},children:"Submit"})})]})},nse="_iconEdit_1c1sv_6",rse="_icon_1c1sv_6",ose="_successIcon_1c1sv_14",sse="_input_1c1sv_18",ise="_editButton_1c1sv_24",ase="_editIcon_1c1sv_30",lse="_highlight_1c1sv_34",Zn={iconEdit:nse,icon:rse,successIcon:ose,input:sse,editButton:ise,editIcon:ase,highlight:lse},cse=({record:t,fields:e,setRecord:n})=>{const{updateChecklistRecord:r}=eu(),o=e.find(l=>l.id===t.fieldId);if(!o)return;const[s,i]=D.useState(),a=D.useRef(null);switch(o.type){case"metric":return m.jsx(m.Fragment,{children:m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:o.icon}),title:o.title,rightComponent:(s==null?void 0:s.id)===t.id?m.jsxs(m.Fragment,{children:[m.jsx(bo,{value:s.value,ref:a,autoFocus:!0,border:"dash",className:Zn.input,onChange:l=>{i({...t,value:Number(l.target.value)})}}),m.jsx(Q,{width:24,className:Zn.icon,onClick:()=>{i(void 0)},icon:"proicons:cancel"}),m.jsx(Q,{width:24,className:Zn.icon,onClick:()=>{var l,c;r(t.id,{checklistTemplateId:t.checklistTemplateId,value:Number((l=a.current)==null?void 0:l.value)}),n({...t,value:Number((c=a.current)==null?void 0:c.value)}),i(void 0)},icon:"material-symbols:check"})]}):m.jsxs(m.Fragment,{children:[m.jsxs(ie.Text,{children:[" ",t.value]}),m.jsx(Q,{width:24,className:Zn.iconEdit,onClick:()=>{i(t),setTimeout(()=>{var l;return(l=a==null?void 0:a.current)==null?void 0:l.focus()},100)},icon:"solar:pen-2-line-duotone"})]})})});case"note":default:return m.jsxs("div",{children:[m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:o.icon}),title:o.title,rightComponent:(s==null?void 0:s.id)!==t.id?m.jsx(m.Fragment,{children:m.jsxs(ht,{type:"dash",size:"sm",className:Zn.editButton,onClick:()=>{i(t)},children:[m.jsx(Q,{icon:"solar:pen-new-square-linear",className:Zn.editIcon}),"Edit"]})}):m.jsxs(m.Fragment,{children:[m.jsxs(ht,{type:"dash",size:"sm",className:Zn.editButton,onClick:()=>{i(void 0)},children:[m.jsx(Q,{width:12,className:Zn.icon,icon:"proicons:cancel"}),"Cancel"]}),m.jsxs(ht,{type:"dash",size:"sm",className:le(Zn.editButton,Zn.highlight),onClick:()=>{r(t.id,{checklistTemplateId:t.checklistTemplateId,value:s.value}),n({...t,value:s.value}),i(void 0)},children:[m.jsx(Q,{width:12,className:Zn.successIcon,icon:"material-symbols:check"}),"Save"]})]})}),(s==null?void 0:s.id)===t.id&&m.jsx(zf,{withoutBorder:!0,value:(s==null?void 0:s.id)!==t.id?t.value:s.value,setValue:l=>{i({...t,value:l})}}),(s==null?void 0:s.id)!==t.id&&m.jsx(zf,{value:t.value,withoutBorder:!0,readOnly:!0})]})}},dse="_recordSection_icmxe_2",use="_hr_icmxe_6",hse="_hrSide_icmxe_13",fse="_hrContainer_icmxe_18",pse="_dateText_icmxe_28",mse="_deleteButton_icmxe_36",gse="_deleteIcon_icmxe_43",Xn={recordSection:dse,hr:use,hrSide:hse,hrContainer:fse,dateText:pse,deleteButton:mse,deleteIcon:gse},yse=({checklistTemplate:t,fields:e})=>{const{getChecklistRecords:n,deleteChecklistRecord:r}=eu(),[o,s]=D.useState({});return D.useEffect(()=>{const i=n(t.id,{rangeDate:{from:iM(new Date).toISOString(),to:sM(new Date).toISOString()},type:"time",fieldIds:e.map(a=>a.id),sortDirection:"desc"});s(i)},[]),m.jsx("div",{className:Xn.recordSection,children:Object.entries(o).map(([i,a],l)=>m.jsxs("div",{children:[m.jsxs("div",{className:Xn.hrContainer,children:[m.jsx("div",{className:le(Xn.hrSide,l===0&&Xn.noHr)}),m.jsx(ie.Text,{className:Xn.dateText,children:new Date(i).toLocaleString()}),m.jsx("div",{className:le(Xn.hr,l===0&&Xn.noHr)}),m.jsxs(ht,{type:"dash",size:"sm",className:Xn.deleteButton,onClick:()=>{a.forEach(d=>{r(d.id,{checklistTemplateId:d.checklistTemplateId})});const c={...o};delete c[i],s(c)},children:[m.jsx(Q,{icon:"solar:trash-bin-trash-outline",className:Xn.deleteIcon}),"Delete"]}),m.jsx("div",{className:le(Xn.hrSide,l===0&&Xn.noHr)})]}),a.map(c=>m.jsx(cse,{record:c,setRecord:d=>{s({...o,[i]:o[i].map(u=>u.id===d.id?d:u)})},fields:e}))]}))})},bse="_container_1i269_2",vse="_iconSuccess_1i269_7",wse="_emptyContainer_1i269_13",xse="_iconEmpty_1i269_22",zu={container:bse,iconSuccess:vse,emptyContainer:wse,iconEmpty:xse},kse=t=>t.reduce((e,n)=>e+n,0),Cse=({checklist:t,checklistTemplate:e,fields:n,currentDay:r})=>{const o=_t(),{getChecklistRecords:s}=eu(),[i,a]=D.useState([]),l=()=>{const c=s(e.id,{rangeDate:{from:new Date(new Date(r).setHours(0,0,0,0)).toISOString(),to:new Date(new Date(r).setHours(23,59,59,999)).toISOString()},fieldIds:n.map(d=>d.id),sortDirection:"desc"});return a(Object.values(c)),c};return D.useEffect(()=>{l()},[]),i.length===0?m.jsxs("div",{className:zu.emptyContainer,children:[m.jsx(Q,{width:80,icon:"clarity:sad-face-line",className:zu.iconEmpty}),m.jsx(ie.Title,{level:3,noMargin:!0,children:o.formatMessage({id:"ChecklistFieldGroupView.noRecord",defaultMessage:"No record found"})}),m.jsx(ie.Paragraph,{noMargin:!0,children:o.formatMessage({id:"ChecklistFieldGroupView.noRecordDescription",defaultMessage:"Submit your record to keep track of your progress"})})]}):m.jsxs("div",{className:zu.container,children:[m.jsx(Q,{width:100,color:"rgba(16,154,0,0.16)",icon:"ion:checkmark-done-circle-outline",className:zu.iconSuccess}),n.map(c=>{if(c.type==="metric"){const d=Object.values(i).flat().filter(h=>h.fieldId===c.id),u=kse(d.map(h=>h.value));return m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:c.icon}),title:c.title,rightComponent:m.jsx(m.Fragment,{children:m.jsxs(ie.Text,{children:[u," ",c.unit]})})})}else{const d=Object.values(i).flat().find(u=>u.fieldId===c.id);return d?m.jsxs(m.Fragment,{children:[m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:c.icon}),title:c.title}),m.jsx(zf,{value:d.value,readOnly:!0,withoutBorder:!0})]}):null}})]})},Sse=t=>t.reduce((e,n)=>e+n,0),Tse=({checklistTemplateId:t,fields:e})=>{const{theme:n}=hp(),{getChecklistRecords:r}=eu(),[o,s]=D.useState({});D.useEffect(()=>{const l=r(t,{rangeDate:{from:iM(new Date).toISOString(),to:sM(new Date).toISOString()},sortBy:"createdAt",fieldIds:e.filter(h=>h.type==="metric").map(h=>h.id)}),c=Object.keys(l),d=Object.values(l),u=e.reduce((h,f,p)=>{const g=d.map(b=>{const v=b.filter(x=>x.fieldId===f.id).map(x=>x.value);return Sse(v)});return{...h,[f.id]:g}},{});s({categories:c,seriesValues:u})},[]);const i=e.map(l=>{var c;return{name:l.title,data:(c=o==null?void 0:o.seriesValues)==null?void 0:c[l.id]}}),a={...n===Ci.Dark?{theme:{mode:"dark"},chart:{background:"#162033"}}:{},xaxis:{categories:o.categories}};return{series:i,options:a}};var Ese=f3();const nN=p3(Ese),Mse=({checklistTemplateId:t,fields:e})=>{const{options:n,series:r}=Tse({checklistTemplateId:t,fields:e});return m.jsx(nN,{options:n,series:r,type:"bar"})},Ase=({checklist:t,checklistTemplate:e,fields:n,currentDay:r})=>{const o=Aj(r),{updateChecklist:s}=up(),[i,a]=D.useState(e.fieldGroups.reduce((d,u)=>({...d,[u.id]:Ut.Home}),{})),l=d=>({[Ut.Home]:`${o?"Today":new Date(r).toLocaleDateString()}`,[Ut.History]:"Record History",[Ut.Add]:"Add Record",[Ut.Metric]:"Metric"})[i[d.id]],c=({fieldGroup:d,fieldDetails:u})=>{switch(i[d.id]){case Ut.Home:return m.jsx(Cse,{fields:u,checklistTemplate:e,checklist:t,currentDay:r});case Ut.History:return m.jsx(yse,{fields:u,checklistTemplate:e});case Ut.Metric:return m.jsx(Mse,{fields:n,checklistTemplateId:e.id});case Ut.Add:return m.jsx(tse,{fields:u,checklistTemplate:e,checklist:t,currentDay:r,onSubmit:()=>{a({...i,[d.id]:Ut.Home}),s({id:t.id,completedAt:new Date().toISOString()})}})}};return e.fieldGroups.map(d=>{const u=d.fields.map(h=>n.find(f=>f.id===h));return m.jsxs($r,{className:A9.cardContainer,children:[m.jsx(E9,{activeTab:i[d.id],onClickHome:()=>a({...i,[d.id]:Ut.Home}),onClickHistory:()=>a({...i,[d.id]:Ut.History}),onClickAdd:()=>a({...i,[d.id]:Ut.Add}),onClickMetric:()=>a({...i,[d.id]:Ut.Metric}),renderTitle:()=>l(d)}),c({fieldGroup:d,fieldDetails:u})]})})},Rse=()=>{const{id:t}=qE(),[e,n]=O5(),{getChecklistTemplate:r}=Ss(),{addChecklist:o,getChecklistDetail:s}=up(),{getRecordFields:i}=F0(),a=e.get("checklistId"),l=e.get("currentDay"),[c,d]=D.useState(),[u,h]=D.useState(),[f,p]=D.useState([]);if(!t||!l)return;D.useEffect(()=>{var x;const b=r(t);if(d(b),!b)return;const v=i((x=b.fieldGroups)==null?void 0:x.map(w=>w.fields).flat());if(p(v),a){const w=s(a);h(w)}else{const w=o({title:b.title,checklistTemplateId:t,startedAt:new Date(l).toISOString(),endedAt:new Date(l).toISOString()});n({...Object.fromEntries(e),checklistId:w.id}),h(w)}},[a]);const g=vr();return!a||!u||!c?null:m.jsxs(m.Fragment,{children:[m.jsx(Md,{renderLeftComponent:()=>m.jsx("div",{children:c==null?void 0:c.title}),renderRightComponent:()=>m.jsx(Q,{onClick:()=>{g(`/edit-checklist/${t}`)},width:24,icon:"solar:pen-new-square-linear"}),onClickLeftButton:()=>g("/")}),m.jsx(Ase,{checklist:u,checklistTemplate:c,fields:f,currentDay:l})]})},_se="_input_1t6d7_1",Pse={input:_se},Dse=t=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},rN=({value:t,onChange:e,className:n})=>m.jsx("input",{className:le(Pse.input,n),type:"date",value:t?Dse(new Date(t)):"",onChange:e}),Ise="_container_1ew1v_1",Nse="_lg_1ew1v_6",j2={container:Ise,lg:Nse};function fw({size:t,className:e,disabled:n,...r}){return m.jsx("input",{className:le(j2.container,t==="lg"&&j2.lg,e),type:"checkbox",disabled:n,...r})}const Ose="_container_a6kby_1",Lse="_label_a6kby_7",jse="_card_a6kby_16",Bse="_datePicker_a6kby_21",Vse="_datePickerContainer_a6kby_27",$se="_checklistItem_a6kby_34",Hse="_checklistBody_a6kby_40",Fse="_checkbox_a6kby_45",zse="_footer_a6kby_50",Qn={container:Ose,label:Lse,card:jse,datePicker:Bse,datePickerContainer:Vse,checklistItem:$se,checklistBody:Hse,checkbox:Fse,footer:zse},Use=()=>{var d;const[t,e]=ur("user_new",!1),n=_t(),{baby:r,setBaby:o,calculateStartDateFromDueDate:s}=Nj(),{getRecommendChecklistTemplates:i,selectedChecklistTemplates:a,updateSelectedChecklistTemplate:l}=Ss(),c=()=>{e(!1),window.location.reload()};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:Qn.container,children:[m.jsx($r,{className:Qn.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:Qn.label,children:n.formatMessage({id:"PregnantIntro.label-enter-the-due-date",defaultMessage:"When's the little one's due date?"})}),m.jsx("div",{className:Qn.datePickerContainer,children:m.jsx(rN,{value:((d=r==null?void 0:r.dueDate)==null?void 0:d.split("T")[0])||new Date(new Date().getTime()+40*7*24*60*60*1e3).toISOString().split("T")[0],onChange:u=>o({...r,dueDate:u.target.value,startDate:s(u.target.value)}),className:Qn.datePicker})})]})}),m.jsx($r,{className:Qn.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:Qn.label,children:n.formatMessage({id:"PregnantIntro.checklists",defaultMessage:"Pick the tasks you'd love to do every day!"})}),i().map(({id:u,title:h,avatar:f})=>m.jsxs("div",{className:Qn.checklistItem,children:[m.jsx(Q,{color:f.color||"#8A8A8A",width:32,height:32,icon:f.name}),m.jsx("p",{className:Qn.checklistBody,children:h}),m.jsx(fw,{checked:a.includes(u),onChange:p=>{const g=p.target.checked;l(g?[...a,u]:a.filter(b=>b!==u))},className:Qn.checkbox})]},u))]})})]}),m.jsx("div",{className:Qn.footer,onClick:c,children:m.jsx(ht,{size:"lg",children:"Submit"})})]})},Wse="_input_k71ix_2",Gse={input:Wse},qse=({date:t,setDate:e})=>{const n=_t();return m.jsx("div",{children:m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"solar:calendar-date-line-duotone"}),title:n.formatMessage({defaultMessage:"Start Day",id:"label-start-day.label"}),description:n.formatMessage({defaultMessage:"Select the first day",id:"label-start-day.description"}),rightComponent:m.jsx(rN,{value:t,onChange:r=>e(r.target.value),className:Gse.input})})})};function Kse({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#00000075",className:le(Ed.icon,t),...e,children:m.jsx("g",{id:"done_24px",children:m.jsx("path",{id:"icon/action/done_24px",d:"M8.80004 15.905L5.30004 12.405C5.11519 12.2178 4.86309 12.1125 4.60004 12.1125C4.33699 12.1125 4.0849 12.2178 3.90004 12.405C3.51004 12.795 3.51004 13.415 3.90004 13.805L8.09004 17.995C8.48004 18.385 9.11004 18.385 9.50004 17.995L20.1 7.40499C20.49 7.01499 20.49 6.39499 20.1 6.00499C19.9152 5.81784 19.6631 5.71251 19.4 5.71251C19.137 5.71251 18.8849 5.81784 18.7 6.00499L8.80004 15.905Z"})})})}const Yse="_container_jx4ao_2",Jse="_button_jx4ao_11",Zse="_icon_jx4ao_19",Xse="_activeIcon_jx4ao_25",Qse="_activeButton_jx4ao_29",jl={container:Yse,button:Jse,icon:Zse,activeIcon:Xse,activeButton:Qse};function eie({options:t,values:e=[],setValues:n=()=>{}}){return m.jsx("div",{className:jl.container,children:t.map(r=>{const o=e.includes(r.value);return m.jsxs(ht,{type:"ghost",className:le(jl.button,o&&jl.activeButton),onClick:()=>{n(o?e.filter(s=>s!==r.value):[...e,r.value])},children:[m.jsx(Kse,{className:le(jl.icon,o&&jl.activeIcon)}),r.label]},`${r.label}-${r.value}`)})})}var pw=nu(),ce=t=>tu(t,pw),mw=nu();ce.write=t=>tu(t,mw);var fm=nu();ce.onStart=t=>tu(t,fm);var gw=nu();ce.onFrame=t=>tu(t,gw);var yw=nu();ce.onFinish=t=>tu(t,yw);var Aa=[];ce.setTimeout=(t,e)=>{const n=ce.now()+e,r=()=>{const s=Aa.findIndex(i=>i.cancel==r);~s&&Aa.splice(s,1),vs-=~s?1:0},o={time:n,handler:t,cancel:r};return Aa.splice(oN(n),0,o),vs+=1,sN(),o};var oN=t=>~(~Aa.findIndex(e=>e.time>t)||~Aa.length);ce.cancel=t=>{fm.delete(t),gw.delete(t),yw.delete(t),pw.delete(t),mw.delete(t)};ce.sync=t=>{e0=!0,ce.batchedUpdates(t),e0=!1};ce.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...o){e=o,ce.onStart(n)}return r.handler=t,r.cancel=()=>{fm.delete(n),e=null},r};var bw=typeof window<"u"?window.requestAnimationFrame:()=>{};ce.use=t=>bw=t;ce.now=typeof performance<"u"?()=>performance.now():Date.now;ce.batchedUpdates=t=>t();ce.catch=console.error;ce.frameLoop="always";ce.advance=()=>{ce.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):aN()};var bs=-1,vs=0,e0=!1;function tu(t,e){e0?(e.delete(t),t(0)):(e.add(t),sN())}function sN(){bs<0&&(bs=0,ce.frameLoop!=="demand"&&bw(iN))}function tie(){bs=-1}function iN(){~bs&&(bw(iN),ce.batchedUpdates(aN))}function aN(){const t=bs;bs=ce.now();const e=oN(bs);if(e&&(lN(Aa.splice(0,e),n=>n.handler()),vs-=e),!vs){tie();return}fm.flush(),pw.flush(t?Math.min(64,bs-t):16.667),gw.flush(),mw.flush(),yw.flush()}function nu(){let t=new Set,e=t;return{add(n){vs+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return vs-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,vs-=e.size,lN(e,r=>r(n)&&t.add(r)),vs+=t.size,e=t)}}}function lN(t,e){t.forEach(n=>{try{e(n)}catch(r){ce.catch(r)}})}var nie=Object.defineProperty,rie=(t,e)=>{for(var n in e)nie(t,n,{get:e[n],enumerable:!0})},gr={};rie(gr,{assign:()=>sie,colors:()=>Cs,createStringInterpolator:()=>ww,skipAnimation:()=>dN,to:()=>cN,willAdvance:()=>xw});function t0(){}var oie=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),V={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function go(t,e){if(V.arr(t)){if(!V.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var xe=(t,e)=>t.forEach(e);function qr(t,e,n){if(V.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var kn=t=>V.und(t)?[]:V.arr(t)?t:[t];function pc(t,e){if(t.size){const n=Array.from(t);t.clear(),xe(n,e)}}var Zl=(t,...e)=>pc(t,n=>n(...e)),vw=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ww,cN,Cs=null,dN=!1,xw=t0,sie=t=>{t.to&&(cN=t.to),t.now&&(ce.now=t.now),t.colors!==void 0&&(Cs=t.colors),t.skipAnimation!=null&&(dN=t.skipAnimation),t.createStringInterpolator&&(ww=t.createStringInterpolator),t.requestAnimationFrame&&ce.use(t.requestAnimationFrame),t.batchedUpdates&&(ce.batchedUpdates=t.batchedUpdates),t.willAdvance&&(xw=t.willAdvance),t.frameLoop&&(ce.frameLoop=t.frameLoop)},mc=new Set,Un=[],ey=[],Uf=0,pm={get idle(){return!mc.size&&!Un.length},start(t){Uf>t.priority?(mc.add(t),ce.onStart(iie)):(uN(t),ce(n0))},advance:n0,sort(t){if(Uf)ce.onFrame(()=>pm.sort(t));else{const e=Un.indexOf(t);~e&&(Un.splice(e,1),hN(t))}},clear(){Un=[],mc.clear()}};function iie(){mc.forEach(uN),mc.clear(),ce(n0)}function uN(t){Un.includes(t)||hN(t)}function hN(t){Un.splice(aie(Un,e=>e.priority>t.priority),0,t)}function n0(t){const e=ey;for(let n=0;n<Un.length;n++){const r=Un[n];Uf=r.priority,r.idle||(xw(r),r.advance(t),r.idle||e.push(r))}return Uf=0,ey=Un,ey.length=0,Un=e,Un.length>0}function aie(t,e){const n=t.findIndex(e);return n<0?t.length:n}var lie={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ar="[-+]?\\d*\\.?\\d+",Wf=ar+"%";function mm(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var cie=new RegExp("rgb"+mm(ar,ar,ar)),die=new RegExp("rgba"+mm(ar,ar,ar,ar)),uie=new RegExp("hsl"+mm(ar,Wf,Wf)),hie=new RegExp("hsla"+mm(ar,Wf,Wf,ar)),fie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,pie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mie=/^#([0-9a-fA-F]{6})$/,gie=/^#([0-9a-fA-F]{8})$/;function yie(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=mie.exec(t))?parseInt(e[1]+"ff",16)>>>0:Cs&&Cs[t]!==void 0?Cs[t]:(e=cie.exec(t))?(sa(e[1])<<24|sa(e[2])<<16|sa(e[3])<<8|255)>>>0:(e=die.exec(t))?(sa(e[1])<<24|sa(e[2])<<16|sa(e[3])<<8|$2(e[4]))>>>0:(e=fie.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=gie.exec(t))?parseInt(e[1],16)>>>0:(e=pie.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=uie.exec(t))?(B2(V2(e[1]),Uu(e[2]),Uu(e[3]))|255)>>>0:(e=hie.exec(t))?(B2(V2(e[1]),Uu(e[2]),Uu(e[3]))|$2(e[4]))>>>0:null}function ty(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function B2(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,o=2*n-r,s=ty(o,r,t+1/3),i=ty(o,r,t),a=ty(o,r,t-1/3);return Math.round(s*255)<<24|Math.round(i*255)<<16|Math.round(a*255)<<8}function sa(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function V2(t){return(parseFloat(t)%360+360)%360/360}function $2(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Uu(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function H2(t){let e=yie(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,o=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${o}, ${s})`}var sd=(t,e,n)=>{if(V.fun(t))return t;if(V.arr(t))return sd({range:t,output:e,extrapolate:n});if(V.str(t.output[0]))return ww(t);const r=t,o=r.output,s=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const d=vie(c,s);return bie(c,s[d],s[d+1],o[d],o[d+1],l,i,a,r.map)}};function bie(t,e,n,r,o,s,i,a,l){let c=l?l(t):t;if(c<e){if(i==="identity")return c;i==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===o?r:e===n?t<=e?r:o:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:o===1/0?c=c+r:c=c*(o-r)+r,c)}function vie(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var wie={linear:t=>t},id=Symbol.for("FluidValue.get"),Wa=Symbol.for("FluidValue.observers"),$n=t=>!!(t&&t[id]),an=t=>t&&t[id]?t[id]():t,F2=t=>t[Wa]||null;function xie(t,e){t.eventObserved?t.eventObserved(e):t(e)}function ad(t,e){const n=t[Wa];n&&n.forEach(r=>{xie(r,e)})}var fN=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");kie(this,t)}},kie=(t,e)=>pN(t,id,e);function hl(t,e){if(t[id]){let n=t[Wa];n||pN(t,Wa,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function ld(t,e){const n=t[Wa];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[Wa]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var pN=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),vh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Cie=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,z2=new RegExp(`(${vh.source})(%|[a-z]+)`,"i"),Sie=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,gm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,mN=t=>{const[e,n]=Tie(t);if(!e||vw())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(n);return o||t}else{if(n&&gm.test(n))return mN(n);if(n)return n}return t},Tie=t=>{const e=gm.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},ny,Eie=(t,e,n,r,o)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,gN=t=>{ny||(ny=Cs?new RegExp(`(${Object.keys(Cs).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>an(s).replace(gm,mN).replace(Cie,H2).replace(ny,H2)),n=e.map(s=>s.match(vh).map(Number)),o=n[0].map((s,i)=>n.map(a=>{if(!(i in a))throw Error('The arity of each "output" value must be equal');return a[i]})).map(s=>sd({...t,output:s}));return s=>{var l;const i=!z2.test(e[0])&&((l=e.find(c=>z2.test(c)))==null?void 0:l.replace(vh,""));let a=0;return e[0].replace(vh,()=>`${o[a++](s)}${i||""}`).replace(Sie,Eie)}},kw="react-spring: ",yN=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${kw}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Mie=yN(console.warn);function Aie(){Mie(`${kw}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Rie=yN(console.warn);function _ie(){Rie(`${kw}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ym(t){return V.str(t)&&(t[0]=="#"||/\d/.test(t)||!vw()&&gm.test(t)||t in(Cs||{}))}var Cw=vw()?y.useEffect:y.useLayoutEffect,Pie=()=>{const t=y.useRef(!1);return Cw(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function bN(){const t=y.useState()[1],e=Pie();return()=>{e.current&&t(Math.random())}}var vN=t=>y.useEffect(t,Die),Die=[];function U2(t){const e=y.useRef(void 0);return y.useEffect(()=>{e.current=t}),e.current}var cd=Symbol.for("Animated:node"),Iie=t=>!!t&&t[cd]===t,_r=t=>t&&t[cd],Sw=(t,e)=>oie(t,cd,e),bm=t=>t&&t[cd]&&t[cd].getPayload(),wN=class{constructor(){Sw(this,this)}getPayload(){return this.payload||[]}},vm=class xN extends wN{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,V.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new xN(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return V.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,V.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Gf=class kN extends vm{constructor(e){super(0),this._string=null,this._toString=sd({output:[e,e]})}static create(e){return new kN(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(V.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=sd({output:[this.getValue(),e]})),this._value=0,super.reset()}},qf={dependencies:null},wm=class extends wN{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return qr(this.source,(n,r)=>{Iie(n)?e[r]=n.getValue(t):$n(n)?e[r]=an(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&xe(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return qr(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){qf.dependencies&&$n(t)&&qf.dependencies.add(t);const e=bm(t);e&&xe(e,n=>this.add(n))}},Nie=class CN extends wm{constructor(e){super(e)}static create(e){return new CN(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((r,o)=>r.setValue(e[o])).some(Boolean):(super.setValue(e.map(Oie)),!0)}};function Oie(t){return(ym(t)?Gf:vm).create(t)}function r0(t){const e=_r(t);return e?e.constructor:V.arr(t)?Nie:ym(t)?Gf:vm}var W2=(t,e)=>{const n=!V.fun(t)||t.prototype&&t.prototype.isReactComponent;return y.forwardRef((r,o)=>{const s=y.useRef(null),i=n&&y.useCallback(p=>{s.current=Bie(o,p)},[o]),[a,l]=jie(r,e),c=bN(),d=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},u=new Lie(d,l),h=y.useRef(void 0);Cw(()=>(h.current=u,xe(l,p=>hl(p,u)),()=>{h.current&&(xe(h.current.deps,p=>ld(p,h.current)),ce.cancel(h.current.update))})),y.useEffect(d,[]),vN(()=>()=>{const p=h.current;xe(p.deps,g=>ld(g,p))});const f=e.getComponentProps(a.getValue());return y.createElement(t,{...f,ref:i})})},Lie=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ce.write(this.update)}};function jie(t,e){const n=new Set;return qf.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new wm(t),qf.dependencies=null,[t,n]}function Bie(t,e){return t&&(V.fun(t)?t(e):t.current=e),e}var G2=Symbol.for("AnimatedComponent"),Vie=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=o=>new wm(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=i=>{const a=q2(i)||"Anonymous";return V.str(i)?i=s[i]||(s[i]=W2(i,o)):i=i[G2]||(i[G2]=W2(i,o)),i.displayName=`Animated(${a})`,i};return qr(t,(i,a)=>{V.arr(t)&&(a=q2(i)),s[a]=s(i)}),{animated:s}},q2=t=>V.str(t)?t:t&&V.str(t.displayName)?t.displayName:V.fun(t)&&t.name||null;function oi(t,...e){return V.fun(t)?t(...e):t}var gc=(t,e)=>t===!0||!!(e&&t&&(V.fun(t)?t(e):kn(t).includes(e))),SN=(t,e)=>V.obj(t)?e&&t[e]:t,TN=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,$ie=t=>t,Tw=(t,e=$ie)=>{let n=Hie;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const o of n){const s=e(t[o],o);V.und(s)||(r[o]=s)}return r},Hie=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Fie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function zie(t){const e={};let n=0;if(qr(t,(r,o)=>{Fie[o]||(e[o]=r,n++)}),n)return e}function EN(t){const e=zie(t);if(e){const n={to:e};return qr(t,(r,o)=>o in e||(n[o]=r)),n}return{...t}}function dd(t){return t=an(t),V.arr(t)?t.map(dd):ym(t)?gr.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Uie(t){for(const e in t)return!0;return!1}function o0(t){return V.fun(t)||V.arr(t)&&V.obj(t[0])}function Wie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Gie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var qie={default:{tension:170,friction:26}},s0={...qie.default,mass:1,damping:1,easing:wie.linear,clamp:!1},Kie=class{constructor(){this.velocity=0,Object.assign(this,s0)}};function Yie(t,e,n){n&&(n={...n},K2(n,e),e={...n,...e}),K2(t,e),Object.assign(t,e);for(const i in s0)t[i]==null&&(t[i]=s0[i]);let{frequency:r,damping:o}=t;const{mass:s}=t;return V.und(r)||(r<.01&&(r=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*o*s/r),t}function K2(t,e){if(!V.und(e.decay))t.duration=void 0;else{const n=!V.und(e.tension)||!V.und(e.friction);(n||!V.und(e.frequency)||!V.und(e.damping)||!V.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var Y2=[],Jie=class{constructor(){this.changed=!1,this.values=Y2,this.toValues=null,this.fromValues=Y2,this.config=new Kie,this.immediate=!1}};function MN(t,{key:e,props:n,defaultProps:r,state:o,actions:s}){return new Promise((i,a)=>{let l,c,d=gc(n.cancel??(r==null?void 0:r.cancel),e);if(d)f();else{V.und(n.pause)||(o.paused=gc(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=o.paused||gc(p,e)),l=oi(n.delay||0,e),p?(o.resumeQueue.add(h),s.pause()):(s.resume(),h())}function u(){o.resumeQueue.add(h),o.timeouts.delete(c),c.cancel(),l=c.time-ce.now()}function h(){l>0&&!gr.skipAnimation?(o.delayed=!0,c=ce.setTimeout(f,l),o.pauseQueue.add(u),o.timeouts.add(c)):f()}function f(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(u),o.timeouts.delete(c),t<=(o.cancelId||0)&&(d=!0);try{s.start({...n,callId:t,cancel:d},i)}catch(p){a(p)}}})}var Ew=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Ra(t.get()):e.every(n=>n.noop)?AN(t.get()):rr(t.get(),e.every(n=>n.finished)),AN=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),rr=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Ra=t=>({value:t,cancelled:!0,finished:!1});function RN(t,e,n,r){const{callId:o,parentId:s,onRest:i}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=o,n.asyncTo=t;const c=Tw(e,(b,v)=>v==="onRest"?void 0:b);let d,u;const h=new Promise((b,v)=>(d=b,u=v)),f=b=>{const v=o<=(n.cancelId||0)&&Ra(r)||o!==n.asyncId&&rr(r,!1);if(v)throw b.result=v,u(b),b},p=(b,v)=>{const x=new J2,w=new Z2;return(async()=>{if(gr.skipAnimation)throw ud(n),w.result=rr(r,!1),u(w),w;f(x);const k=V.obj(b)?{...b}:{...v,to:b};k.parentId=o,qr(c,(S,T)=>{V.und(k[T])&&(k[T]=S)});const C=await r.start(k);return f(x),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),C})()};let g;if(gr.skipAnimation)return ud(n),rr(r,!1);try{let b;V.arr(t)?b=(async v=>{for(const x of v)await p(x)})(t):b=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([b.then(d),h]),g=rr(r.get(),!0,!1)}catch(b){if(b instanceof J2)g=b.result;else if(b instanceof Z2)g=b.result;else throw b}finally{o==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return V.fun(i)&&ce.batchedUpdates(()=>{i(g,r,r.item)}),g})()}function ud(t,e){pc(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var J2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Z2=class extends Error{constructor(){super("SkipAnimationSignal")}},i0=t=>t instanceof Mw,Zie=1,Mw=class extends fN{constructor(){super(...arguments),this.id=Zie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=_r(this);return t&&t.getValue()}to(...t){return gr.to(this,t)}interpolate(...t){return Aie(),gr.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){ad(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||pm.sort(this),ad(this,{type:"priority",parent:this,priority:t})}},Bi=Symbol.for("SpringPhase"),_N=1,PN=2,DN=4,ry=t=>(t[Bi]&_N)>0,Xo=t=>(t[Bi]&PN)>0,Bl=t=>(t[Bi]&DN)>0,X2=(t,e)=>e?t[Bi]|=PN|_N:t[Bi]&=-3,Q2=(t,e)=>e?t[Bi]|=DN:t[Bi]&=-5,Xie=class extends Mw{constructor(t,e){if(super(),this.animation=new Jie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!V.und(t)||!V.und(e)){const n=V.obj(t)?{...t}:{...e,from:t};V.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Xo(this)||this._state.asyncTo)||Bl(this)}get goal(){return an(this.animation.to)}get velocity(){const t=_r(this);return t instanceof vm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return ry(this)}get isAnimating(){return Xo(this)}get isPaused(){return Bl(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:o}=r;const{config:s}=r,i=bm(r.to);!i&&$n(r.to)&&(o=kn(an(r.to))),r.values.forEach((c,d)=>{if(c.done)return;const u=c.constructor==Gf?1:i?i[d].lastPosition:o[d];let h=r.immediate,f=u;if(!h){if(f=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const g=r.fromValues[d],b=c.v0!=null?c.v0:c.v0=V.arr(s.velocity)?s.velocity[d]:s.velocity;let v;const x=s.precision||(g==u?.005:Math.min(1,Math.abs(u-g)*.001));if(V.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,k=Math.exp(-(1-w)*p);f=g+b/(1-w)*(1-k),h=Math.abs(c.lastPosition-f)<=x,v=b*k}else{v=c.lastVelocity==null?b:c.lastVelocity;const w=s.restVelocity||x/10,k=s.clamp?0:s.bounce,C=!V.und(k),S=g==u?c.v0>0:g<u;let T,E=!1;const M=1,R=Math.ceil(t/M);for(let P=0;P<R&&(T=Math.abs(v)>w,!(!T&&(h=Math.abs(u-f)<=x,h)));++P){C&&(E=f==u||f>u==S,E&&(v=-v*k,f=u));const L=-s.tension*1e-6*(f-u),$=-s.friction*.001*v,F=(L+$)/s.mass;v=v+F*M,f=f+v*M}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),f=g+s.easing(w)*(u-g),v=(f-c.lastPosition)/t,h=w==1}c.lastVelocity=v,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}i&&!i[d].done&&(h=!1),h?c.done=!0:e=!1,c.setValue(f,s.round)&&(n=!0)});const a=_r(this),l=a.getValue();if(e){const c=an(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return ce.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Xo(this)){const{to:t,config:e}=this.animation;ce.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return V.und(t)?(n=this.queue||[],this.queue=[]):n=[V.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>Ew(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),ud(this._state,t&&this._lastCallId),ce.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=V.obj(n)?n[e]:n,(n==null||o0(n))&&(n=void 0),r=V.obj(r)?r[e]:r,r==null&&(r=void 0);const o={to:n,from:r};return ry(this)||(t.reverse&&([n,r]=[r,n]),r=an(r),V.und(r)?_r(this)||this._set(n):this._set(r)),o}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,Tw(t,(i,a)=>/^on/.test(a)?SN(i,n):i)),tT(this,t,"onProps"),$l(this,"onProps",t,this);const o=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return MN(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Bl(this)||(Q2(this,!0),Zl(s.pauseQueue),$l(this,"onPause",rr(this,Vl(this,this.animation.to)),this))},resume:()=>{Bl(this)&&(Q2(this,!1),Xo(this)&&this._resume(),Zl(s.resumeQueue),$l(this,"onResume",rr(this,Vl(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(i=>{if(t.loop&&i.finished&&!(e&&i.noop)){const a=IN(t);if(a)return this._update(a,!0)}return i})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Ra(this));const r=!V.und(t.to),o=!V.und(t.from);if(r||o)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Ra(this));const{key:s,defaultProps:i,animation:a}=this,{to:l,from:c}=a;let{to:d=l,from:u=c}=t;o&&!r&&(!e.default||V.und(d))&&(d=u),e.reverse&&([d,u]=[u,d]);const h=!go(u,c);h&&(a.from=u),u=an(u);const f=!go(d,l);f&&this._focus(d);const p=o0(e.to),{config:g}=a,{decay:b,velocity:v}=g;(r||o)&&(g.velocity=0),e.config&&!p&&Yie(g,oi(e.config,s),e.config!==i.config?oi(i.config,s):void 0);let x=_r(this);if(!x||V.und(d))return n(rr(this,!0));const w=V.und(e.reset)?o&&!e.default:!V.und(u)&&gc(e.reset,s),k=w?u:this.get(),C=dd(d),S=V.num(C)||V.arr(C)||ym(C),T=!p&&(!S||gc(i.immediate||e.immediate,s));if(f){const P=r0(d);if(P!==x.constructor)if(T)x=this._set(C);else throw Error(`Cannot animate between ${x.constructor.name} and ${P.name}, as the "to" prop suggests`)}const E=x.constructor;let M=$n(d),R=!1;if(!M){const P=w||!ry(this)&&h;(f||P)&&(R=go(dd(k),C),M=!R),(!go(a.immediate,T)&&!T||!go(g.decay,b)||!go(g.velocity,v))&&(M=!0)}if(R&&Xo(this)&&(a.changed&&!w?M=!0:M||this._stop(l)),!p&&((M||$n(l))&&(a.values=x.getPayload(),a.toValues=$n(d)?null:E==Gf?[1]:kn(C)),a.immediate!=T&&(a.immediate=T,!T&&!w&&this._set(l)),M)){const{onRest:P}=a;xe(eae,$=>tT(this,e,$));const L=rr(this,Vl(this,l));Zl(this._pendingCalls,L),this._pendingCalls.add(n),a.changed&&ce.batchedUpdates(()=>{var $;a.changed=!w,P==null||P(L,this),w?oi(i.onRest,L):($=a.onStart)==null||$.call(a,L,this)})}w&&this._set(k),p?n(RN(e.to,e,this._state,this)):M?this._start():Xo(this)&&!f?this._pendingCalls.add(n):n(AN(k))}_focus(t){const e=this.animation;t!==e.to&&(F2(this)&&this._detach(),e.to=t,F2(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;$n(e)&&(hl(e,this),i0(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;$n(t)&&ld(t,this)}_set(t,e=!0){const n=an(t);if(!V.und(n)){const r=_r(this);if(!r||!go(n,r.getValue())){const o=r0(n);!r||r.constructor!=o?Sw(this,o.create(n)):r.setValue(n),r&&ce.batchedUpdates(()=>{this._onChange(n,e)})}}return _r(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,$l(this,"onStart",rr(this,Vl(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),oi(this.animation.onChange,t,this)),oi(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;_r(this).reset(an(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Xo(this)||(X2(this,!0),Bl(this)||this._resume())}_resume(){gr.skipAnimation?this.finish():pm.start(this)}_stop(t,e){if(Xo(this)){X2(this,!1);const n=this.animation;xe(n.values,o=>{o.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),ad(this,{type:"idle",parent:this});const r=e?Ra(this.get()):rr(this.get(),Vl(this,t??n.to));Zl(this._pendingCalls,r),n.changed&&(n.changed=!1,$l(this,"onRest",r,this))}}};function Vl(t,e){const n=dd(e),r=dd(t.get());return go(r,n)}function IN(t,e=t.loop,n=t.to){const r=oi(e);if(r){const o=r!==!0&&EN(r),s=(o||t).reverse,i=!o||o.reset;return hd({...t,loop:e,default:!1,pause:void 0,to:!s||o0(n)?n:void 0,from:i?t.from:void 0,reset:i,...o})}}function hd(t){const{to:e,from:n}=t=EN(t),r=new Set;return V.obj(e)&&eT(e,r),V.obj(n)&&eT(n,r),t.keys=r.size?Array.from(r):null,t}function Qie(t){const e=hd(t);return V.und(e.default)&&(e.default=Tw(e)),e}function eT(t,e){qr(t,(n,r)=>n!=null&&e.add(r))}var eae=["onStart","onRest","onChange","onPause","onResume"];function tT(t,e,n){t.animation[n]=e[n]!==TN(e,n)?SN(e[n],t.key):void 0}function $l(t,e,...n){var r,o,s,i;(o=(r=t.animation)[e])==null||o.call(r,...n),(i=(s=t.defaultProps)[e])==null||i.call(s,...n)}var tae=["onStart","onChange","onRest"],nae=1,rae=class{constructor(t,e){this.id=nae++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];V.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(hd(t)),this}start(t){let{queue:e}=this;return t?e=kn(t).map(hd):this.queue=[],this._flush?this._flush(this,e):(BN(this,e),a0(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;xe(kn(e),r=>n[r].stop(!!t))}else ud(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(V.und(t))this.start({pause:!0});else{const e=this.springs;xe(kn(t),n=>e[n].pause())}return this}resume(t){if(V.und(t))this.start({pause:!1});else{const e=this.springs;xe(kn(t),n=>e[n].resume())}return this}each(t){qr(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,o=this._changed.size>0;(r&&!this._started||o&&!this._started)&&(this._started=!0,pc(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,i=o||s&&n.size?this.get():null;o&&e.size&&pc(e,([a,l])=>{l.value=i,a(l,this,this._item)}),s&&(this._started=!1,pc(n,([a,l])=>{l.value=i,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ce.onFrame(this._onFrame)}};function a0(t,e){return Promise.all(e.map(n=>NN(t,n))).then(n=>Ew(t,n))}async function NN(t,e,n){const{keys:r,to:o,from:s,loop:i,onRest:a,onResolve:l}=e,c=V.obj(e.default)&&e.default;i&&(e.loop=!1),o===!1&&(e.to=null),s===!1&&(e.from=null);const d=V.arr(o)||V.fun(o)?o:void 0;d?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):xe(tae,g=>{const b=e[g];if(V.fun(b)){const v=t._events[g];e[g]=({finished:x,cancelled:w})=>{const k=v.get(b);k?(x||(k.finished=!1),w&&(k.cancelled=!0)):v.set(b,{value:null,finished:x||!1,cancelled:w||!1})},c&&(c[g]=e[g])}});const u=t._state;e.pause===!u.paused?(u.paused=e.pause,Zl(e.pause?u.pauseQueue:u.resumeQueue)):u.paused&&(e.pause=!0);const h=(r||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),f=e.cancel===!0||TN(e,"cancel")===!0;(d||f&&u.asyncId)&&h.push(MN(++t._lastAsyncId,{props:e,state:u,actions:{pause:t0,resume:t0,start(g,b){f?(ud(u,t._lastAsyncId),b(Ra(t))):(g.onRest=a,b(RN(d,g,u,t)))}}})),u.paused&&await new Promise(g=>{u.resumeQueue.add(g)});const p=Ew(t,await Promise.all(h));if(i&&p.finished&&!(n&&p.noop)){const g=IN(e,i,o);if(g)return BN(t,[g]),NN(t,g,!0)}return l&&ce.batchedUpdates(()=>l(p,t,t.item)),p}function nT(t,e){const n={...t.springs};return e&&xe(kn(e),r=>{V.und(r.keys)&&(r=hd(r)),V.obj(r.to)||(r={...r,to:void 0}),jN(n,r,o=>LN(o))}),ON(t,n),n}function ON(t,e){qr(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,hl(n,t))})}function LN(t,e){const n=new Xie;return n.key=t,e&&hl(n,e),n}function jN(t,e,n){e.keys&&xe(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function BN(t,e){xe(e,n=>{jN(t.springs,n,r=>LN(r,t))})}var oae=y.createContext({pause:!1,immediate:!1}),sae=()=>{const t=[],e=function(r){_ie();const o=[];return xe(t,(s,i)=>{if(V.und(r))o.push(s.start());else{const a=n(r,s,i);a&&o.push(s.start(a))}}),o};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const o=t.indexOf(r);~o&&t.splice(o,1)},e.pause=function(){return xe(t,r=>r.pause(...arguments)),this},e.resume=function(){return xe(t,r=>r.resume(...arguments)),this},e.set=function(r){xe(t,(o,s)=>{const i=V.fun(r)?r(s,o):r;i&&o.set(i)})},e.start=function(r){const o=[];return xe(t,(s,i)=>{if(V.und(r))o.push(s.start());else{const a=this._getProps(r,s,i);a&&o.push(s.start(a))}}),o},e.stop=function(){return xe(t,r=>r.stop(...arguments)),this},e.update=function(r){return xe(t,(o,s)=>o.update(this._getProps(r,o,s))),this};const n=function(r,o,s){return V.fun(r)?r(s,o):r};return e._getProps=n,e};function iae(t,e,n){const r=V.fun(e)&&e;r&&!n&&(n=[]);const o=y.useMemo(()=>r||arguments.length==3?sae():void 0,[]),s=y.useRef(0),i=bN(),a=y.useMemo(()=>({ctrls:[],queue:[],flush(v,x){const w=nT(v,x);return s.current>0&&!a.queue.length&&!Object.keys(w).some(C=>!v.springs[C])?a0(v,x):new Promise(C=>{ON(v,w),a.queue.push(()=>{C(a0(v,x))}),i()})}}),[]),l=y.useRef([...a.ctrls]),c=y.useRef([]);c.current??(c.current=[]);const d=U2(t)||0;y.useMemo(()=>{xe(l.current.slice(t,d),v=>{Wie(v,o),v.stop(!0)}),l.current.length=t,u(d,t)},[t]),y.useMemo(()=>{u(0,Math.min(d,t))},n);function u(v,x){for(let w=v;w<x;w++){const k=l.current[w]||(l.current[w]=new rae(null,a.flush)),C=r?r(w,k):e[w];C&&(c.current[w]=Qie(C))}}const h=l.current.map((v,x)=>nT(v,c.current[x])),f=y.useContext(oae),p=U2(f),g=f!==p&&Uie(f);Cw(()=>{s.current++,a.ctrls=l.current;const{queue:v}=a;v.length&&(a.queue=[],xe(v,x=>x())),xe(l.current,(x,w)=>{o==null||o.add(x),g&&x.start({default:f});const k=c.current[w];k&&(Gie(x,k.ref),x.ref?x.queue.push(k):x.start(k)),c.current[w]=null})}),vN(()=>()=>{xe(a.ctrls,v=>v.stop(!0))});const b=h.map(v=>({...v}));return o?[b,o]:b}function Aw(t,e){const n=V.fun(t),[[r],o]=iae(1,n?t:[t],n?[]:e);return n||arguments.length==2?[r,o]:r}var aae=class extends Mw{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=sd(...e);const n=this._get(),r=r0(n);Sw(this,r.create(n))}advance(t){const e=this._get(),n=this.get();go(e,n)||(_r(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&rT(this._active)&&oy(this)}_get(){const t=V.arr(this.source)?this.source.map(an):kn(an(this.source));return this.calc(...t)}_start(){this.idle&&!rT(this._active)&&(this.idle=!1,xe(bm(this),t=>{t.done=!1}),gr.skipAnimation?(ce.batchedUpdates(()=>this.advance()),oy(this)):pm.start(this))}_attach(){let t=1;xe(kn(this.source),e=>{$n(e)&&hl(e,this),i0(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){xe(kn(this.source),t=>{$n(t)&&ld(t,this)}),this._active.clear(),oy(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=kn(this.source).reduce((e,n)=>Math.max(e,(i0(n)?n.priority:0)+1),0))}};function lae(t){return t.idle!==!1}function rT(t){return!t.size||Array.from(t).every(lae)}function oy(t){t.idle||(t.idle=!0,xe(bm(t),e=>{e.done=!0}),ad(t,{type:"idle",parent:t}))}gr.assign({createStringInterpolator:gN,to:(t,e)=>new aae(t,e)});var VN=/^--/;function cae(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!VN.test(t)&&!(yc.hasOwnProperty(t)&&yc[t])?e+"px":(""+e).trim()}var oT={};function dae(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:r,style:o,children:s,scrollTop:i,scrollLeft:a,viewBox:l,...c}=e,d=Object.values(c),u=Object.keys(c).map(h=>n||t.hasAttribute(h)?h:oT[h]||(oT[h]=h.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in o)if(o.hasOwnProperty(h)){const f=cae(h,o[h]);VN.test(h)?t.style.setProperty(h,f):t.style[h]=f}u.forEach((h,f)=>{t.setAttribute(h,d[f])}),r!==void 0&&(t.className=r),i!==void 0&&(t.scrollTop=i),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var yc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uae=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),hae=["Webkit","Ms","Moz","O"];yc=Object.keys(yc).reduce((t,e)=>(hae.forEach(n=>t[uae(n,e)]=t[e]),t),yc);var fae=/^(matrix|translate|scale|rotate|skew)/,pae=/^(translate)/,mae=/^(rotate|skew)/,sy=(t,e)=>V.num(t)&&t!==0?t+e:t,wh=(t,e)=>V.arr(t)?t.every(n=>wh(n,e)):V.num(t)?t===e:parseFloat(t)===e,gae=class extends wm{constructor({x:t,y:e,z:n,...r}){const o=[],s=[];(t||e||n)&&(o.push([t||0,e||0,n||0]),s.push(i=>[`translate3d(${i.map(a=>sy(a,"px")).join(",")})`,wh(i,0)])),qr(r,(i,a)=>{if(a==="transform")o.push([i||""]),s.push(l=>[l,l===""]);else if(fae.test(a)){if(delete r[a],V.und(i))return;const l=pae.test(a)?"px":mae.test(a)?"deg":"";o.push(kn(i)),s.push(a==="rotate3d"?([c,d,u,h])=>[`rotate3d(${c},${d},${u},${sy(h,l)})`,wh(h,0)]:c=>[`${a}(${c.map(d=>sy(d,l)).join(",")})`,wh(c,a.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new yae(o,s)),super(r)}},yae=class extends fN{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return xe(this.inputs,(n,r)=>{const o=an(n[0]),[s,i]=this.transforms[r](V.arr(o)?o:n.map(an));t+=" "+s,e=e&&i}),e?"none":t}observerAdded(t){t==1&&xe(this.inputs,e=>xe(e,n=>$n(n)&&hl(n,this)))}observerRemoved(t){t==0&&xe(this.inputs,e=>xe(e,n=>$n(n)&&ld(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),ad(this,t)}},bae=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];gr.assign({batchedUpdates:St.unstable_batchedUpdates,createStringInterpolator:gN,colors:lie});var vae=Vie(bae,{applyAnimatedValues:dae,createAnimatedStyle:t=>new gae(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Kf=vae.animated;const wae="_container_32ncs_1",xae="_checkedContainer_32ncs_14",kae="_handle_32ncs_18",iy={container:wae,checkedContainer:xae,handle:kae},Cae=26;function Sae({checked:t,onChange:e}){const n=Aw({translateX:t?Cae:0});return m.jsx("div",{className:le(iy.container,t&&iy.checkedContainer),onClick:()=>e(!t),children:m.jsx(Kf.div,{style:{transform:n.translateX.to(r=>`translateX(${r}px)`)},className:iy.handle})})}function Tae(t){return m.jsx("svg",{width:"24",height:"24",fill:"#00000075",viewBox:"0 0 448 512",className:Ed.icon,...t,children:m.jsx("path",{d:"M224 232C237.3 232 248 242.7 248 256V304H296C309.3 304 320 314.7 320 328C320 341.3 309.3 352 296 352H248V400C248 413.3 237.3 424 224 424C210.7 424 200 413.3 200 400V352H152C138.7 352 128 341.3 128 328C128 314.7 138.7 304 152 304H200V256C200 242.7 210.7 232 224 232zM152 64H296V24C296 10.75 306.7 0 320 0C333.3 0 344 10.75 344 24V64H384C419.3 64 448 92.65 448 128V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V128C0 92.65 28.65 64 64 64H104V24C104 10.75 114.7 0 128 0C141.3 0 152 10.75 152 24V64zM48 448C48 456.8 55.16 464 64 464H384C392.8 464 400 456.8 400 448V192H48V448z"})})}const Eae="_container_16drl_1",Mae={container:Eae};var se=(t=>(t.Mon="mon",t.Tue="tue",t.Thu="thu",t.Wed="wed",t.Fri="fri",t.Sat="sat",t.Sun="sun",t))(se||{});D.createContext({createTask:()=>{},changeTaskStatus:()=>{},deleteTask:()=>{},updateTask:()=>{},currentTaskIds:[],setCurrentTaskIds:()=>{},getTaskDetail:()=>{},cancelProcessingTask:()=>{},createTaskFromWeeklyHobby:()=>{},getRecommendedTasks:()=>[],filter:{showDoneTask:!1,disableAddProgressTaskAtTop:!1,showAllTask:!1},setFilter:()=>{}});se.Mon,se.Tue,se.Thu,se.Wed,se.Fri,se.Sat,se.Sun;const Aae=({className:t,values:e,setValues:n})=>{const r=_t(),o=Aw({maxHeight:!e||e.length===0?0:80});return m.jsxs(m.Fragment,{children:[m.jsx(ut.ItemMeta,{className:t,logo:m.jsx(Tae,{}),title:r.formatMessage({defaultMessage:"Build Hobby",id:"label-build-Hobby"}),description:r.formatMessage({defaultMessage:"Select days to achieve a good hobby",id:"build-weekly-hobby-subtitle"}),rightComponent:m.jsx(Sae,{checked:e?e.length!==0:!1,onChange:s=>{n(s?[se.Mon]:[])}})}),m.jsx(Kf.div,{className:Mae.container,style:{maxHeight:o.maxHeight},children:m.jsx(eie,{values:e,setValues:n,options:[{label:"Mon",value:se.Mon},{label:"Tue",value:se.Tue},{label:"Thu",value:se.Thu},{label:"Wed",value:se.Wed},{label:"Fri",value:se.Fri},{label:"Sat",value:se.Sat},{label:"Sun",value:se.Sun}]})})]})},Rae="_color_11daa_2",_ae="_selected_11daa_8",Pae="_container_11daa_14",bc={color:Rae,selected:_ae,container:Pae},Dae=({value:t,onClick:e,className:n})=>m.jsx("div",{onClick:e,className:le(bc.color,bc.selected,n),style:{backgroundColor:t}}),Iae=({value:t,setValue:e,className:n})=>{const r=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"];return m.jsx("div",{className:le(bc.container,n),children:r.map((o,s)=>m.jsx("div",{className:le(bc.color,t===o&&bc.selected),style:{backgroundColor:o},onClick:()=>e(o)},s))})},Nae="_iconSearchInput_ov9nt_2",Oae="_inputContainer_ov9nt_9",Lae="_container_ov9nt_14",jae="_rightContainer_ov9nt_25",Bae="_colorView_ov9nt_31",Vae="_colorPicker_ov9nt_51",ia={iconSearchInput:Nae,inputContainer:Oae,container:Lae,rightContainer:jae,colorView:Bae,colorPicker:Vae},$N=({selectedIcon:t,setSelectedIcon:e,className:n,selectedColor:r,setSelectedColor:o})=>{const[s,i]=y.useState(""),[a,l]=y.useState([]),[c,d]=y.useState(2),u=_t(),h=async p=>{var v;const b=await(await fetch(`https://api.iconify.design/search?query=${p}`)).json();((v=b==null?void 0:b.icons)==null?void 0:v.length)>0&&l(b.icons)},f=p=>{e(p),d(2)};return m.jsxs("div",{className:le(n,ia.container),children:[m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"tdesign:icon"}),title:u.formatMessage({defaultMessage:"Icons",id:"icon-picker.title"}),rightComponent:m.jsx("div",{className:ia.rightContainer,children:m.jsx(Q,{width:24,icon:t,color:r})})}),m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:ia.inputContainer,children:[m.jsx(bo,{placeholder:"Search icons",border:"dash",value:s,onChange:p=>{i(p.target.value),h(p.target.value),c!==1&&d(1)},className:ia.iconSearchInput}),m.jsx(Dae,{value:r,className:ia.colorView,onClick:()=>{d(0)}})]}),c===1&&m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",maxHeight:"300px",overflowY:"scroll"},children:a.map(p=>m.jsx("div",{onClick:()=>f(p),style:{padding:"10px",border:"2px solid transparent",cursor:"pointer"},children:m.jsx(Q,{icon:p,width:"24",height:"24",color:r})},p))}),c===0&&m.jsx(Iae,{value:r,setValue:p=>{o(p),d(2)},className:ia.colorPicker})]})]})},$ae="_selectWrapper_63tzz_1",Hae="_selectLabel_63tzz_5",Fae="_selectElement_63tzz_9",zae="_open_63tzz_22",Uae="_selectedValue_63tzz_26",Wae="_optionsList_63tzz_34",Gae="_option_63tzz_34",Ks={selectWrapper:$ae,selectLabel:Hae,selectElement:Fae,open:zae,selectedValue:Uae,optionsList:Wae,option:Gae},qae=({options:t,onChange:e,disabled:n=!1,label:r,renderOption:o,renderLabel:s,renderInput:i,renderOptionFooter:a,classes:l={}})=>{const[c,d]=y.useState(!1),u=y.useRef(null),h=()=>d(!1);return y.useEffect(()=>{const f=p=>{u.current&&!u.current.contains(p.target)&&h()};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),m.jsxs("div",{className:le(Ks.selectWrapper,l.container),ref:u,children:[s?s():r&&m.jsx("label",{className:Ks.selectLabel,children:r}),m.jsxs("div",{className:`${Ks.selectElement} ${c?Ks.open:""}`,role:"button",tabIndex:0,children:[m.jsx("div",{className:Ks.selectedValue,onClick:()=>!n&&d(!0),children:i?i():"Select..."}),c&&m.jsxs("div",{className:Ks.optionsList,children:[t.map(f=>m.jsx("div",{className:Ks.option,onClick:()=>{e(f,{close:h})},children:o?o(f,{close:h}):f.label},f.value)),a&&a({close:h})]})]})]})};function Kae(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>r=>{e.forEach(o=>o(r))},e)}const xm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function fl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Rw(t){return"nodeType"in t}function Qt(t){var e,n;return t?fl(t)?t:Rw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function _w(t){const{Document:e}=Qt(t);return t instanceof e}function ru(t){return fl(t)?!1:t instanceof Qt(t).HTMLElement}function HN(t){return t instanceof Qt(t).SVGElement}function pl(t){return t?fl(t)?t.document:Rw(t)?_w(t)?t:ru(t)||HN(t)?t.ownerDocument:document:document:document}const yr=xm?y.useLayoutEffect:y.useEffect;function km(t){const e=y.useRef(t);return yr(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function Yae(){const t=y.useRef(null),e=y.useCallback((r,o)=>{t.current=setInterval(r,o)},[]),n=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function fd(t,e){e===void 0&&(e=[t]);const n=y.useRef(t);return yr(()=>{n.current!==t&&(n.current=t)},e),n}function ou(t,e){const n=y.useRef();return y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Yf(t){const e=km(t),n=y.useRef(null),r=y.useCallback(o=>{o!==n.current&&(e==null||e(o,n.current)),n.current=o},[]);return[n,r]}function Jf(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let ay={};function su(t,e){return y.useMemo(()=>{if(e)return e;const n=ay[t]==null?0:ay[t]+1;return ay[t]=n,t+"-"+n},[t,e])}function FN(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[l,c]of a){const d=s[l];d!=null&&(s[l]=d+t*c)}return s},{...e})}}const _a=FN(1),pd=FN(-1);function Jae(t){return"clientX"in t&&"clientY"in t}function Cm(t){if(!t)return!1;const{KeyboardEvent:e}=Qt(t.target);return e&&t instanceof e}function Zae(t){if(!t)return!1;const{TouchEvent:e}=Qt(t.target);return e&&t instanceof e}function Zf(t){if(Zae(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Jae(t)?{x:t.clientX,y:t.clientY}:null}const Is=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Is.Translate.toString(t),Is.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),sT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Xae(t){return t.matches(sT)?t:t.querySelector(sT)}const Qae={display:"none"};function ele(t){let{id:e,value:n}=t;return D.createElement("div",{id:e,style:Qae},n)}function tle(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return D.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function nle(){const[t,e]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const zN=y.createContext(null);function rle(t){const e=y.useContext(zN);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function ole(){const[t]=y.useState(()=>new Set),e=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:o,event:s}=r;t.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[t]),e]}const sle={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ile={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function ale(t){let{announcements:e=ile,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=sle}=t;const{announce:s,announcement:i}=nle(),a=su("DndLiveRegion"),[l,c]=y.useState(!1);if(y.useEffect(()=>{c(!0)},[]),rle(y.useMemo(()=>({onDragStart(u){let{active:h}=u;s(e.onDragStart({active:h}))},onDragMove(u){let{active:h,over:f}=u;e.onDragMove&&s(e.onDragMove({active:h,over:f}))},onDragOver(u){let{active:h,over:f}=u;s(e.onDragOver({active:h,over:f}))},onDragEnd(u){let{active:h,over:f}=u;s(e.onDragEnd({active:h,over:f}))},onDragCancel(u){let{active:h,over:f}=u;s(e.onDragCancel({active:h,over:f}))}}),[s,e])),!l)return null;const d=D.createElement(D.Fragment,null,D.createElement(ele,{id:r,value:o.draggable}),D.createElement(tle,{id:a,announcement:i}));return n?St.createPortal(d,n):d}var lt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(lt||(lt={}));function Xf(){}function iT(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function lle(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const br=Object.freeze({x:0,y:0});function UN(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function cle(t,e){const n=Zf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function WN(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function dle(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function aT(t){let{left:e,top:n,height:r,width:o}=t;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+r},{x:e+o,y:n+r}]}function GN(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function lT(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const ule=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=lT(e,e.left,e.top),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=UN(lT(l),o);s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(WN)},hle=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=aT(e),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=aT(l),d=o.reduce((h,f,p)=>h+UN(c[p],f),0),u=Number((d/4).toFixed(4));s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(WN)};function fle(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),i=o-r,a=s-n;if(r<o&&n<s){const l=e.width*e.height,c=t.width*t.height,d=i*a,u=d/(l+c-d);return Number(u.toFixed(4))}return 0}const ple=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const l=fle(a,e);l>0&&o.push({id:i,data:{droppableContainer:s,value:l}})}}return o.sort(dle)};function mle(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function qN(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:br}function gle(t){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+t*a.y,bottom:i.bottom+t*a.y,left:i.left+t*a.x,right:i.right+t*a.x}),{...n})}}const yle=gle(1);function KN(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ble(t,e,n){const r=KN(e);if(!r)return t;const{scaleX:o,scaleY:s,x:i,y:a}=r,l=t.left-i-(1-o)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?t.width/o:t.width,u=s?t.height/s:t.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}const vle={ignoreTransform:!1};function ml(t,e){e===void 0&&(e=vle);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=Qt(t).getComputedStyle(t);c&&(n=ble(n,c,d))}const{top:r,left:o,width:s,height:i,bottom:a,right:l}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:l}}function cT(t){return ml(t,{ignoreTransform:!0})}function wle(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function xle(t,e){return e===void 0&&(e=Qt(t).getComputedStyle(t)),e.position==="fixed"}function kle(t,e){e===void 0&&(e=Qt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=e[o];return typeof s=="string"?n.test(s):!1})}function Sm(t,e){const n=[];function r(o){if(e!=null&&n.length>=e||!o)return n;if(_w(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!ru(o)||HN(o)||n.includes(o))return n;const s=Qt(t).getComputedStyle(o);return o!==t&&kle(o,s)&&n.push(o),xle(o,s)?n:r(o.parentNode)}return t?r(t):n}function YN(t){const[e]=Sm(t,1);return e??null}function ly(t){return!xm||!t?null:fl(t)?t:Rw(t)?_w(t)||t===pl(t).scrollingElement?window:ru(t)?t:null:null}function JN(t){return fl(t)?t.scrollX:t.scrollLeft}function ZN(t){return fl(t)?t.scrollY:t.scrollTop}function l0(t){return{x:JN(t),y:ZN(t)}}var dt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(dt||(dt={}));function XN(t){return!xm||!t?!1:t===document.scrollingElement}function QN(t){const e={x:0,y:0},n=XN(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},o=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,i=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:e}}const Cle={x:.2,y:.2};function Sle(t,e,n,r,o){let{top:s,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=Cle);const{isTop:c,isBottom:d,isLeft:u,isRight:h}=QN(t),f={x:0,y:0},p={x:0,y:0},g={height:e.height*o.y,width:e.width*o.x};return!c&&s<=e.top+g.height?(f.y=dt.Backward,p.y=r*Math.abs((e.top+g.height-s)/g.height)):!d&&l>=e.bottom-g.height&&(f.y=dt.Forward,p.y=r*Math.abs((e.bottom-g.height-l)/g.height)),!h&&a>=e.right-g.width?(f.x=dt.Forward,p.x=r*Math.abs((e.right-g.width-a)/g.width)):!u&&i<=e.left+g.width&&(f.x=dt.Backward,p.x=r*Math.abs((e.left+g.width-i)/g.width)),{direction:f,speed:p}}function Tle(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:e,left:n,right:r,bottom:o}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:o,width:t.clientWidth,height:t.clientHeight}}function e4(t){return t.reduce((e,n)=>_a(e,l0(n)),br)}function Ele(t){return t.reduce((e,n)=>e+JN(n),0)}function Mle(t){return t.reduce((e,n)=>e+ZN(n),0)}function t4(t,e){if(e===void 0&&(e=ml),!t)return;const{top:n,left:r,bottom:o,right:s}=e(t);YN(t)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Ale=[["x",["left","right"],Ele],["y",["top","bottom"],Mle]];class Pw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Sm(n),o=e4(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,i,a]of Ale)for(const l of i)Object.defineProperty(this,l,{get:()=>{const c=a(r),d=o[s]-c;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class vc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var o;(o=this.target)==null||o.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Rle(t){const{EventTarget:e}=Qt(t);return t instanceof e?t:pl(t)}function cy(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Vn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Vn||(Vn={}));function dT(t){t.preventDefault()}function _le(t){t.stopPropagation()}var we;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(we||(we={}));const n4={start:[we.Space,we.Enter],cancel:[we.Esc],end:[we.Space,we.Enter,we.Tab]},Ple=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case we.Right:return{...n,x:n.x+25};case we.Left:return{...n,x:n.x-25};case we.Down:return{...n,y:n.y+25};case we.Up:return{...n,y:n.y-25}}};class Dw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new vc(pl(n)),this.windowListeners=new vc(Qt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&t4(r),n(br)}handleKeyDown(e){if(Cm(e)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=n4,coordinateGetter:i=Ple,scrollBehavior:a="smooth"}=o,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:br;this.referenceCoordinates||(this.referenceCoordinates=d);const u=i(e,{active:n,context:r.current,currentCoordinates:d});if(u){const h=pd(u,d),f={x:0,y:0},{scrollableAncestors:p}=r.current;for(const g of p){const b=e.code,{isTop:v,isRight:x,isLeft:w,isBottom:k,maxScroll:C,minScroll:S}=QN(g),T=Tle(g),E={x:Math.min(b===we.Right?T.right-T.width/2:T.right,Math.max(b===we.Right?T.left:T.left+T.width/2,u.x)),y:Math.min(b===we.Down?T.bottom-T.height/2:T.bottom,Math.max(b===we.Down?T.top:T.top+T.height/2,u.y))},M=b===we.Right&&!x||b===we.Left&&!w,R=b===we.Down&&!k||b===we.Up&&!v;if(M&&E.x!==u.x){const P=g.scrollLeft+h.x,L=b===we.Right&&P<=C.x||b===we.Left&&P>=S.x;if(L&&!h.y){g.scrollTo({left:P,behavior:a});return}L?f.x=g.scrollLeft-P:f.x=b===we.Right?g.scrollLeft-C.x:g.scrollLeft-S.x,f.x&&g.scrollBy({left:-f.x,behavior:a});break}else if(R&&E.y!==u.y){const P=g.scrollTop+h.y,L=b===we.Down&&P<=C.y||b===we.Up&&P>=S.y;if(L&&!h.x){g.scrollTo({top:P,behavior:a});return}L?f.y=g.scrollTop-P:f.y=b===we.Down?g.scrollTop-C.y:g.scrollTop-S.y,f.y&&g.scrollBy({top:-f.y,behavior:a});break}}this.handleMove(e,_a(pd(u,this.referenceCoordinates),f))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dw.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=n4,onActivation:o}=e,{active:s}=n;const{code:i}=t.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),o==null||o({event:t.nativeEvent}),!0)}return!1}}];function uT(t){return!!(t&&"distance"in t)}function hT(t){return!!(t&&"delay"in t)}class Iw{constructor(e,n,r){var o;r===void 0&&(r=Rle(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:i}=s;this.props=e,this.events=n,this.document=pl(i),this.documentListeners=new vc(this.document),this.listeners=new vc(r),this.windowListeners=new vc(Qt(i)),this.initialCoordinates=(o=Zf(s))!=null?o:br,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.DragStart,dT),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),this.windowListeners.add(Vn.ContextMenu,dT),this.documentListeners.add(Vn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(uT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vn.Click,_le,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const l=(n=Zf(e))!=null?n:br,c=pd(o,l);if(!r&&a){if(uT(a)){if(a.tolerance!=null&&cy(c,a.tolerance))return this.handleCancel();if(cy(c,a.distance))return this.handleStart()}if(hT(a)&&cy(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===we.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Dle={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Nw extends Iw{constructor(e){const{event:n}=e,r=pl(n.target);super(e,Dle,r)}}Nw.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Ile={move:{name:"mousemove"},end:{name:"mouseup"}};var c0;(function(t){t[t.RightClick=2]="RightClick"})(c0||(c0={}));class Nle extends Iw{constructor(e){super(e,Ile,pl(e.event.target))}}Nle.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===c0.RightClick?!1:(r==null||r({event:n}),!0)}}];const dy={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ole extends Iw{constructor(e){super(e,dy)}static setup(){return window.addEventListener(dy.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(dy.move.name,e)};function e(){}}}Ole.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var wc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(wc||(wc={}));var Qf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Qf||(Qf={}));function Lle(t){let{acceleration:e,activator:n=wc.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=Qf.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:u,threshold:h}=t;const f=Ble({delta:u,disabled:!s}),[p,g]=Yae(),b=y.useRef({x:0,y:0}),v=y.useRef({x:0,y:0}),x=y.useMemo(()=>{switch(n){case wc.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case wc.DraggableRect:return o}},[n,o,l]),w=y.useRef(null),k=y.useCallback(()=>{const S=w.current;if(!S)return;const T=b.current.x*v.current.x,E=b.current.y*v.current.y;S.scrollBy(T,E)},[]),C=y.useMemo(()=>a===Qf.TreeOrder?[...c].reverse():c,[a,c]);y.useEffect(()=>{if(!s||!c.length||!x){g();return}for(const S of C){if((r==null?void 0:r(S))===!1)continue;const T=c.indexOf(S),E=d[T];if(!E)continue;const{direction:M,speed:R}=Sle(S,E,x,e,h);for(const P of["x","y"])f[P][M[P]]||(R[P]=0,M[P]=0);if(R.x>0||R.y>0){g(),w.current=S,p(k,i),b.current=R,v.current=M;return}}b.current={x:0,y:0},v.current={x:0,y:0},g()},[e,k,r,g,s,i,JSON.stringify(x),JSON.stringify(f),p,c,C,d,JSON.stringify(h)])}const jle={x:{[dt.Backward]:!1,[dt.Forward]:!1},y:{[dt.Backward]:!1,[dt.Forward]:!1}};function Ble(t){let{delta:e,disabled:n}=t;const r=Jf(e);return ou(o=>{if(n||!r||!o)return jle;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[dt.Backward]:o.x[dt.Backward]||s.x===-1,[dt.Forward]:o.x[dt.Forward]||s.x===1},y:{[dt.Backward]:o.y[dt.Backward]||s.y===-1,[dt.Forward]:o.y[dt.Forward]||s.y===1}}},[n,e,r])}function Vle(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ou(o=>{var s;return e==null?null:(s=r??o)!=null?s:null},[r,e])}function $le(t,e){return y.useMemo(()=>t.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:e(i.handler,r)}));return[...n,...s]},[]),[t,e])}var md;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(md||(md={}));var d0;(function(t){t.Optimized="optimized"})(d0||(d0={}));const fT=new Map;function Hle(t,e){let{dragging:n,dependencies:r,config:o}=e;const[s,i]=y.useState(null),{frequency:a,measure:l,strategy:c}=o,d=y.useRef(t),u=b(),h=fd(u),f=y.useCallback(function(v){v===void 0&&(v=[]),!h.current&&i(x=>x===null?v:x.concat(v.filter(w=>!x.includes(w))))},[h]),p=y.useRef(null),g=ou(v=>{if(u&&!n)return fT;if(!v||v===fT||d.current!==t||s!=null){const x=new Map;for(let w of t){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const k=w.node.current,C=k?new Pw(l(k),k):null;w.rect.current=C,C&&x.set(w.id,C)}return x}return v},[t,s,n,u,l]);return y.useEffect(()=>{d.current=t},[t]),y.useEffect(()=>{u||f()},[n,u]),y.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),y.useEffect(()=>{u||typeof a!="number"||p.current!==null||(p.current=setTimeout(()=>{f(),p.current=null},a))},[a,u,f,...r]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:s!=null};function b(){switch(c){case md.Always:return!1;case md.BeforeDragging:return n;default:return!n}}}function Ow(t,e){return ou(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Fle(t,e){return Ow(t,e)}function zle(t){let{callback:e,disabled:n}=t;const r=km(e),o=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return y.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Tm(t){let{callback:e,disabled:n}=t;const r=km(e),o=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return y.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Ule(t){return new Pw(ml(t),t)}function pT(t,e,n){e===void 0&&(e=Ule);const[r,o]=y.useState(null);function s(){o(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const i=zle({callback(l){if(t)for(const c of l){const{type:d,target:u}=c;if(d==="childList"&&u instanceof HTMLElement&&u.contains(t)){s();break}}}}),a=Tm({callback:s});return yr(()=>{s(),t?(a==null||a.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[t]),r}function Wle(t){const e=Ow(t);return qN(t,e)}const mT=[];function Gle(t){const e=y.useRef(t),n=ou(r=>t?r&&r!==mT&&t&&e.current&&t.parentNode===e.current.parentNode?r:Sm(t):mT,[t]);return y.useEffect(()=>{e.current=t},[t]),n}function qle(t){const[e,n]=y.useState(null),r=y.useRef(t),o=y.useCallback(s=>{const i=ly(s.target);i&&n(a=>a?(a.set(i,l0(i)),new Map(a)):null)},[]);return y.useEffect(()=>{const s=r.current;if(t!==s){i(s);const a=t.map(l=>{const c=ly(l);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,l0(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{i(t),i(s)};function i(a){a.forEach(l=>{const c=ly(l);c==null||c.removeEventListener("scroll",o)})}},[o,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,i)=>_a(s,i),br):e4(t):br,[t,e])}function gT(t,e){e===void 0&&(e=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},e),y.useEffect(()=>{const r=t!==br;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?pd(t,n.current):br}function Kle(t){y.useEffect(()=>{if(!xm)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Yle(t,e){return y.useMemo(()=>t.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,e)},n},{}),[t,e])}function r4(t){return y.useMemo(()=>t?wle(t):null,[t])}const yT=[];function Jle(t,e){e===void 0&&(e=ml);const[n]=t,r=r4(n?Qt(n):null),[o,s]=y.useState(yT);function i(){s(()=>t.length?t.map(l=>XN(l)?r:new Pw(e(l),l)):yT)}const a=Tm({callback:i});return yr(()=>{a==null||a.disconnect(),i(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),o}function o4(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ru(e)?e:t}function Zle(t){let{measure:e}=t;const[n,r]=y.useState(null),o=y.useCallback(c=>{for(const{target:d}of c)if(ru(d)){r(u=>{const h=e(d);return u?{...u,width:h.width,height:h.height}:h});break}},[e]),s=Tm({callback:o}),i=y.useCallback(c=>{const d=o4(c);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?e(d):null)},[e,s]),[a,l]=Yf(i);return y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Xle=[{sensor:Nw,options:{}},{sensor:Dw,options:{}}],Qle={current:{}},xh={draggable:{measure:cT},droppable:{measure:cT,strategy:md.WhileDragging,frequency:d0.Optimized},dragOverlay:{measure:ml}};class xc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const ece={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new xc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Xf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xh,measureDroppableContainers:Xf,windowRect:null,measuringScheduled:!1},s4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Xf,draggableNodes:new Map,over:null,measureDroppableContainers:Xf},iu=y.createContext(s4),i4=y.createContext(ece);function tce(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new xc}}}function nce(t,e){switch(e.type){case lt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case lt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case lt.DragEnd:case lt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case lt.RegisterDroppable:{const{element:n}=e,{id:r}=n,o=new xc(t.droppable.containers);return o.set(r,n),{...t,droppable:{...t.droppable,containers:o}}}case lt.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new xc(t.droppable.containers);return i.set(n,{...s,disabled:o}),{...t,droppable:{...t.droppable,containers:i}}}case lt.UnregisterDroppable:{const{id:n,key:r}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const s=new xc(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function rce(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:o}=y.useContext(iu),s=Jf(r),i=Jf(n==null?void 0:n.id);return y.useEffect(()=>{if(!e&&!r&&s&&i!=null){if(!Cm(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[l.current,c.current]){if(!d)continue;const u=Xae(d);if(u){u.focus();break}}})}},[r,e,o,i,s]),null}function a4(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((o,s)=>s({transform:o,...r}),n):n}function oce(t){return y.useMemo(()=>({draggable:{...xh.draggable,...t==null?void 0:t.draggable},droppable:{...xh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...xh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function sce(t){let{activeNode:e,measure:n,initialRect:r,config:o=!0}=t;const s=y.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;yr(()=>{if(!i&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const d=n(c),u=qN(d,r);if(i||(u.x=0),a||(u.y=0),s.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const h=YN(c);h&&h.scrollBy({top:u.y,left:u.x})}},[e,i,a,r,n])}const Em=y.createContext({...br,scaleX:1,scaleY:1});var is;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(is||(is={}));const ice=y.memo(function(e){var n,r,o,s;let{id:i,accessibility:a,autoScroll:l=!0,children:c,sensors:d=Xle,collisionDetection:u=ple,measuring:h,modifiers:f,...p}=e;const g=y.useReducer(nce,void 0,tce),[b,v]=g,[x,w]=ole(),[k,C]=y.useState(is.Uninitialized),S=k===is.Initialized,{draggable:{active:T,nodes:E,translate:M},droppable:{containers:R}}=b,P=T!=null?E.get(T):null,L=y.useRef({initial:null,translated:null}),$=y.useMemo(()=>{var It;return T!=null?{id:T,data:(It=P==null?void 0:P.data)!=null?It:Qle,rect:L}:null},[T,P]),F=y.useRef(null),[z,J]=y.useState(null),[N,B]=y.useState(null),H=fd(p,Object.values(p)),Z=su("DndDescribedBy",i),G=y.useMemo(()=>R.getEnabled(),[R]),X=oce(h),{droppableRects:pe,measureDroppableContainers:Fe,measuringScheduled:Ke}=Hle(G,{dragging:S,dependencies:[M.x,M.y],config:X.droppable}),ve=Vle(E,T),Oe=y.useMemo(()=>N?Zf(N):null,[N]),Ye=t3(),Ve=Fle(ve,X.draggable.measure);sce({activeNode:T!=null?E.get(T):null,config:Ye.layoutShiftCompensation,initialRect:Ve,measure:X.draggable.measure});const ae=pT(ve,X.draggable.measure,Ve),en=pT(ve?ve.parentElement:null),Pt=y.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),tn=R.getNodeFor((n=Pt.current.over)==null?void 0:n.id),Dt=Zle({measure:X.dragOverlay.measure}),Rn=(r=Dt.nodeRef.current)!=null?r:ve,kr=S?(o=Dt.rect)!=null?o:ae:null,Gi=!!(Dt.nodeRef.current&&Dt.rect),qi=Wle(Gi?null:ae),Ho=r4(Rn?Qt(Rn):null),$e=Gle(S?tn??ve:null),Ki=Jle($e),Yi=a4(f,{transform:{x:M.x-qi.x,y:M.y-qi.y,scaleX:1,scaleY:1},activatorEvent:N,active:$,activeNodeRect:ae,containerNodeRect:en,draggingNodeRect:kr,over:Pt.current.over,overlayNodeRect:Dt.rect,scrollableAncestors:$e,scrollableAncestorRects:Ki,windowRect:Ho}),uu=Oe?_a(Oe,M):null,hu=qle($e),fu=gT(hu),pu=gT(hu,[ae]),no=_a(Yi,fu),ro=kr?yle(kr,Yi):null,Fo=$&&ro?u({active:$,collisionRect:ro,droppableRects:pe,droppableContainers:G,pointerCoordinates:uu}):null,vl=GN(Fo,"id"),[Je,vx]=y.useState(null),JO=Gi?Yi:_a(Yi,pu),ZO=mle(JO,(s=Je==null?void 0:Je.rect)!=null?s:null,ae),Pm=y.useRef(null),wx=y.useCallback((It,mn)=>{let{sensor:gn,options:zo}=mn;if(F.current==null)return;const _n=E.get(F.current);if(!_n)return;const yn=It.nativeEvent,Cr=new gn({active:F.current,activeNode:_n,event:yn,options:zo,context:Pt,onAbort(yt){if(!E.get(yt))return;const{onDragAbort:Sr}=H.current,oo={id:yt};Sr==null||Sr(oo),x({type:"onDragAbort",event:oo})},onPending(yt,Uo,Sr,oo){if(!E.get(yt))return;const{onDragPending:xl}=H.current,Wo={id:yt,constraint:Uo,initialCoordinates:Sr,offset:oo};xl==null||xl(Wo),x({type:"onDragPending",event:Wo})},onStart(yt){const Uo=F.current;if(Uo==null)return;const Sr=E.get(Uo);if(!Sr)return;const{onDragStart:oo}=H.current,wl={activatorEvent:yn,active:{id:Uo,data:Sr.data,rect:L}};St.unstable_batchedUpdates(()=>{oo==null||oo(wl),C(is.Initializing),v({type:lt.DragStart,initialCoordinates:yt,active:Uo}),x({type:"onDragStart",event:wl}),J(Pm.current),B(yn)})},onMove(yt){v({type:lt.DragMove,coordinates:yt})},onEnd:Ji(lt.DragEnd),onCancel:Ji(lt.DragCancel)});Pm.current=Cr;function Ji(yt){return async function(){const{active:Sr,collisions:oo,over:wl,scrollAdjustedTranslate:xl}=Pt.current;let Wo=null;if(Sr&&xl){const{cancelDrop:kl}=H.current;Wo={activatorEvent:yn,active:Sr,collisions:oo,delta:xl,over:wl},yt===lt.DragEnd&&typeof kl=="function"&&await Promise.resolve(kl(Wo))&&(yt=lt.DragCancel)}F.current=null,St.unstable_batchedUpdates(()=>{v({type:yt}),C(is.Uninitialized),vx(null),J(null),B(null),Pm.current=null;const kl=yt===lt.DragEnd?"onDragEnd":"onDragCancel";if(Wo){const Dm=H.current[kl];Dm==null||Dm(Wo),x({type:kl,event:Wo})}})}}},[E]),XO=y.useCallback((It,mn)=>(gn,zo)=>{const _n=gn.nativeEvent,yn=E.get(zo);if(F.current!==null||!yn||_n.dndKit||_n.defaultPrevented)return;const Cr={active:yn};It(gn,mn.options,Cr)===!0&&(_n.dndKit={capturedBy:mn.sensor},F.current=zo,wx(gn,mn))},[E,wx]),xx=$le(d,XO);Kle(d),yr(()=>{ae&&k===is.Initializing&&C(is.Initialized)},[ae,k]),y.useEffect(()=>{const{onDragMove:It}=H.current,{active:mn,activatorEvent:gn,collisions:zo,over:_n}=Pt.current;if(!mn||!gn)return;const yn={active:mn,activatorEvent:gn,collisions:zo,delta:{x:no.x,y:no.y},over:_n};St.unstable_batchedUpdates(()=>{It==null||It(yn),x({type:"onDragMove",event:yn})})},[no.x,no.y]),y.useEffect(()=>{const{active:It,activatorEvent:mn,collisions:gn,droppableContainers:zo,scrollAdjustedTranslate:_n}=Pt.current;if(!It||F.current==null||!mn||!_n)return;const{onDragOver:yn}=H.current,Cr=zo.get(vl),Ji=Cr&&Cr.rect.current?{id:Cr.id,rect:Cr.rect.current,data:Cr.data,disabled:Cr.disabled}:null,yt={active:It,activatorEvent:mn,collisions:gn,delta:{x:_n.x,y:_n.y},over:Ji};St.unstable_batchedUpdates(()=>{vx(Ji),yn==null||yn(yt),x({type:"onDragOver",event:yt})})},[vl]),yr(()=>{Pt.current={activatorEvent:N,active:$,activeNode:ve,collisionRect:ro,collisions:Fo,droppableRects:pe,draggableNodes:E,draggingNode:Rn,draggingNodeRect:kr,droppableContainers:R,over:Je,scrollableAncestors:$e,scrollAdjustedTranslate:no},L.current={initial:kr,translated:ro}},[$,ve,Fo,ro,E,Rn,kr,pe,R,Je,$e,no]),Lle({...Ye,delta:M,draggingRect:ro,pointerCoordinates:uu,scrollableAncestors:$e,scrollableAncestorRects:Ki});const QO=y.useMemo(()=>({active:$,activeNode:ve,activeNodeRect:ae,activatorEvent:N,collisions:Fo,containerNodeRect:en,dragOverlay:Dt,draggableNodes:E,droppableContainers:R,droppableRects:pe,over:Je,measureDroppableContainers:Fe,scrollableAncestors:$e,scrollableAncestorRects:Ki,measuringConfiguration:X,measuringScheduled:Ke,windowRect:Ho}),[$,ve,ae,N,Fo,en,Dt,E,R,pe,Je,Fe,$e,Ki,X,Ke,Ho]),e3=y.useMemo(()=>({activatorEvent:N,activators:xx,active:$,activeNodeRect:ae,ariaDescribedById:{draggable:Z},dispatch:v,draggableNodes:E,over:Je,measureDroppableContainers:Fe}),[N,xx,$,ae,v,Z,E,Je,Fe]);return D.createElement(zN.Provider,{value:w},D.createElement(iu.Provider,{value:e3},D.createElement(i4.Provider,{value:QO},D.createElement(Em.Provider,{value:ZO},c)),D.createElement(rce,{disabled:(a==null?void 0:a.restoreFocus)===!1})),D.createElement(ale,{...a,hiddenTextDescribedById:Z}));function t3(){const It=(z==null?void 0:z.autoScrollEnabled)===!1,mn=typeof l=="object"?l.enabled===!1:l===!1,gn=S&&!It&&!mn;return typeof l=="object"?{...l,enabled:gn}:{enabled:gn}}}),ace=y.createContext(null),bT="button",lce="Draggable";function cce(t){let{id:e,data:n,disabled:r=!1,attributes:o}=t;const s=su(lce),{activators:i,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=y.useContext(iu),{role:f=bT,roleDescription:p="draggable",tabIndex:g=0}=o??{},b=(l==null?void 0:l.id)===e,v=y.useContext(b?Em:ace),[x,w]=Yf(),[k,C]=Yf(),S=Yle(i,e),T=fd(n);yr(()=>(u.set(e,{id:e,key:s,node:x,activatorNode:k,data:T}),()=>{const M=u.get(e);M&&M.key===s&&u.delete(e)}),[u,e]);const E=y.useMemo(()=>({role:f,tabIndex:g,"aria-disabled":r,"aria-pressed":b&&f===bT?!0:void 0,"aria-roledescription":p,"aria-describedby":d.draggable}),[r,f,g,b,p,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:E,isDragging:b,listeners:r?void 0:S,node:x,over:h,setNodeRef:w,setActivatorNodeRef:C,transform:v}}function l4(){return y.useContext(i4)}const dce="Droppable",uce={timeout:25};function c4(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:o}=t;const s=su(dce),{active:i,dispatch:a,over:l,measureDroppableContainers:c}=y.useContext(iu),d=y.useRef({disabled:n}),u=y.useRef(!1),h=y.useRef(null),f=y.useRef(null),{disabled:p,updateMeasurementsFor:g,timeout:b}={...uce,...o},v=fd(g??r),x=y.useCallback(()=>{if(!u.current){u.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),f.current=null},b)},[b]),w=Tm({callback:x,disabled:p||!i}),k=y.useCallback((E,M)=>{w&&(M&&(w.unobserve(M),u.current=!1),E&&w.observe(E))},[w]),[C,S]=Yf(k),T=fd(e);return y.useEffect(()=>{!w||!C.current||(w.disconnect(),u.current=!1,w.observe(C.current))},[C,w]),y.useEffect(()=>(a({type:lt.RegisterDroppable,element:{id:r,key:s,disabled:n,node:C,rect:h,data:T}}),()=>a({type:lt.UnregisterDroppable,key:s,id:r})),[r]),y.useEffect(()=>{n!==d.current.disabled&&(a({type:lt.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,a]),{active:i,rect:h,isOver:(l==null?void 0:l.id)===r,node:C,over:l,setNodeRef:S}}function hce(t){let{animation:e,children:n}=t;const[r,o]=y.useState(null),[s,i]=y.useState(null),a=Jf(n);return!n&&!r&&a&&o(a),yr(()=>{if(!s)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){o(null);return}Promise.resolve(e(c,s)).then(()=>{o(null)})},[e,r,s]),D.createElement(D.Fragment,null,n,r?y.cloneElement(r,{ref:i}):null)}const fce={x:0,y:0,scaleX:1,scaleY:1};function pce(t){let{children:e}=t;return D.createElement(iu.Provider,{value:s4},D.createElement(Em.Provider,{value:fce},e))}const mce={position:"fixed",touchAction:"none"},gce=t=>Cm(t)?"transform 250ms ease":void 0,yce=y.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:i,rect:a,style:l,transform:c,transition:d=gce}=t;if(!a)return null;const u=o?c:{...c,scaleX:1,scaleY:1},h={...mce,width:a.width,height:a.height,top:a.top,left:a.left,transform:Is.Transform.toString(u),transformOrigin:o&&r?cle(r,a):void 0,transition:typeof d=="function"?d(r):d,...l};return D.createElement(n,{className:i,style:h,ref:e},s)}),bce=t=>e=>{let{active:n,dragOverlay:r}=e;const o={},{styles:s,className:i}=t;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,c]of Object.entries(o))n.node.style.setProperty(l,c);i!=null&&i.active&&n.node.classList.remove(i.active)}},vce=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Is.Transform.toString(e)},{transform:Is.Transform.toString(n)}]},wce={duration:250,easing:"ease",keyframes:vce,sideEffects:bce({styles:{active:{opacity:"0"}}})};function xce(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=t;return km((s,i)=>{if(e===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const c=o4(i);if(!c)return;const{transform:d}=Qt(i).getComputedStyle(i),u=KN(d);if(!u)return;const h=typeof e=="function"?e:kce(e);return t4(l,o.draggable.measure),h({active:{id:s,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:o,transform:u})})}function kce(t){const{duration:e,easing:n,sideEffects:r,keyframes:o}={...wce,...t};return s=>{let{active:i,dragOverlay:a,transform:l,...c}=s;if(!e)return;const d={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},u={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/a.rect.height:1},h={x:l.x-d.x,y:l.y-d.y,...u},f=o({...c,active:i,dragOverlay:a,transform:{initial:l,final:h}}),[p]=f,g=f[f.length-1];if(JSON.stringify(p)===JSON.stringify(g))return;const b=r==null?void 0:r({active:i,dragOverlay:a,...c}),v=a.node.animate(f,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{v.onfinish=()=>{b==null||b(),x()}})}}let vT=0;function Cce(t){return y.useMemo(()=>{if(t!=null)return vT++,vT},[t])}const Sce=D.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:i,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:d,active:u,activeNodeRect:h,containerNodeRect:f,draggableNodes:p,droppableContainers:g,dragOverlay:b,over:v,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:k,windowRect:C}=l4(),S=y.useContext(Em),T=Cce(u==null?void 0:u.id),E=a4(i,{activatorEvent:d,active:u,activeNodeRect:h,containerNodeRect:f,draggingNodeRect:b.rect,over:v,overlayNodeRect:b.rect,scrollableAncestors:w,scrollableAncestorRects:k,transform:S,windowRect:C}),M=Ow(h),R=xce({config:r,draggableNodes:p,droppableContainers:g,measuringConfiguration:x}),P=M?b.setRef:void 0;return D.createElement(pce,null,D.createElement(hce,{animation:R},u&&T?D.createElement(yce,{key:T,id:u.id,ref:P,as:a,activatorEvent:d,adjustScale:e,className:l,transition:s,rect:M,style:{zIndex:c,...o},transform:E},n):null))});function Lw(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function Tce(t,e){return t.reduce((n,r,o)=>{const s=e.get(r);return s&&(n[o]=s),n},Array(t.length))}function Wu(t){return t!==null&&t>=0}function Ece(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Mce(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const d4=t=>{let{rects:e,activeIndex:n,overIndex:r,index:o}=t;const s=Lw(e,r,n),i=e[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},Gu={scaleX:1,scaleY:1},Ace=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(o===n){const c=s[i];return c?{x:0,y:n<i?c.top+c.height-(a.top+a.height):c.top-a.top,...Gu}:null}const l=Rce(s,o,n);return o>n&&o<=i?{x:0,y:-a.height-l,...Gu}:o<n&&o>=i?{x:0,y:a.height+l,...Gu}:{x:0,y:0,...Gu}};function Rce(t,e,n){const r=t[e],o=t[e-1],s=t[e+1];return r?n<e?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const u4="Sortable",h4=D.createContext({activeIndex:-1,containerId:u4,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:d4,disabled:{draggable:!1,droppable:!1}});function _ce(t){let{children:e,id:n,items:r,strategy:o=d4,disabled:s=!1}=t;const{active:i,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:d}=l4(),u=su(u4,n),h=a.rect!==null,f=y.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),p=i!=null,g=i?f.indexOf(i.id):-1,b=c?f.indexOf(c.id):-1,v=y.useRef(f),x=!Ece(f,v.current),w=b!==-1&&g===-1||x,k=Mce(s);yr(()=>{x&&p&&d(f)},[x,f,p,d]),y.useEffect(()=>{v.current=f},[f]);const C=y.useMemo(()=>({activeIndex:g,containerId:u,disabled:k,disableTransforms:w,items:f,overIndex:b,useDragOverlay:h,sortedRects:Tce(f,l),strategy:o}),[g,u,k.draggable,k.droppable,w,f,b,l,h,o]);return D.createElement(h4.Provider,{value:C},e)}const Pce=t=>{let{id:e,items:n,activeIndex:r,overIndex:o}=t;return Lw(n,r,o).indexOf(e)},Dce=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==s&&o===i?!1:n?!0:i!==o&&e===l},Ice={duration:200,easing:"ease"},f4="transform",Nce=Is.Transition.toString({property:f4,duration:0,easing:"linear"}),Oce={roleDescription:"sortable"};function Lce(t){let{disabled:e,index:n,node:r,rect:o}=t;const[s,i]=y.useState(null),a=y.useRef(n);return yr(()=>{if(!e&&n!==a.current&&r.current){const l=o.current;if(l){const c=ml(r.current,{ignoreTransform:!0}),d={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(d.x||d.y)&&i(d)}}n!==a.current&&(a.current=n)},[e,n,r,o]),y.useEffect(()=>{s&&i(null)},[s]),s}function jce(t){let{animateLayoutChanges:e=Dce,attributes:n,disabled:r,data:o,getNewIndex:s=Pce,id:i,strategy:a,resizeObserverConfig:l,transition:c=Ice}=t;const{items:d,containerId:u,activeIndex:h,disabled:f,disableTransforms:p,sortedRects:g,overIndex:b,useDragOverlay:v,strategy:x}=y.useContext(h4),w=Bce(r,f),k=d.indexOf(i),C=y.useMemo(()=>({sortable:{containerId:u,index:k,items:d},...o}),[u,o,k,d]),S=y.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:T,node:E,isOver:M,setNodeRef:R}=c4({id:i,data:C,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:P,activatorEvent:L,activeNodeRect:$,attributes:F,setNodeRef:z,listeners:J,isDragging:N,over:B,setActivatorNodeRef:H,transform:Z}=cce({id:i,data:C,attributes:{...Oce,...n},disabled:w.draggable}),G=Kae(R,z),X=!!P,pe=X&&!p&&Wu(h)&&Wu(b),Fe=!v&&N,Ke=Fe&&pe?Z:null,Oe=pe?Ke??(a??x)({rects:g,activeNodeRect:$,activeIndex:h,overIndex:b,index:k}):null,Ye=Wu(h)&&Wu(b)?s({id:i,items:d,activeIndex:h,overIndex:b}):k,Ve=P==null?void 0:P.id,ae=y.useRef({activeId:Ve,items:d,newIndex:Ye,containerId:u}),en=d!==ae.current.items,Pt=e({active:P,containerId:u,isDragging:N,isSorting:X,id:i,index:k,items:d,newIndex:ae.current.newIndex,previousItems:ae.current.items,previousContainerId:ae.current.containerId,transition:c,wasDragging:ae.current.activeId!=null}),tn=Lce({disabled:!Pt,index:k,node:E,rect:T});return y.useEffect(()=>{X&&ae.current.newIndex!==Ye&&(ae.current.newIndex=Ye),u!==ae.current.containerId&&(ae.current.containerId=u),d!==ae.current.items&&(ae.current.items=d)},[X,Ye,u,d]),y.useEffect(()=>{if(Ve===ae.current.activeId)return;if(Ve!=null&&ae.current.activeId==null){ae.current.activeId=Ve;return}const Rn=setTimeout(()=>{ae.current.activeId=Ve},50);return()=>clearTimeout(Rn)},[Ve]),{active:P,activeIndex:h,attributes:F,data:C,rect:T,index:k,newIndex:Ye,items:d,isOver:M,isSorting:X,isDragging:N,listeners:J,node:E,overIndex:b,over:B,setNodeRef:G,setActivatorNodeRef:H,setDroppableNodeRef:R,setDraggableNodeRef:z,transform:tn??Oe,transition:Dt()};function Dt(){if(tn||en&&ae.current.newIndex===k)return Nce;if(!(Fe&&!Cm(L)||!c)&&(X||Pt))return Is.Transition.toString({...c,property:f4})}}function Bce(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function ep(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Vce=[we.Down,we.Right,we.Up,we.Left],$ce=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:a}}=e;if(Vce.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const h=o.get(u.id);if(h)switch(t.code){case we.Down:r.top<h.top&&l.push(u);break;case we.Up:r.top>h.top&&l.push(u);break;case we.Left:r.left>h.left&&l.push(u);break;case we.Right:r.left<h.left&&l.push(u);break}});const c=hle({collisionRect:r,droppableRects:o,droppableContainers:l});let d=GN(c,"id");if(d===(i==null?void 0:i.id)&&c.length>1&&(d=c[1].id),d!=null){const u=s.get(n.id),h=s.get(d),f=h?o.get(h.id):null,p=h==null?void 0:h.node.current;if(p&&f&&u&&h){const b=Sm(p).some((S,T)=>a[T]!==S),v=p4(u,h),x=Hce(u,h),w=b||!v?{x:0,y:0}:{x:x?r.width-f.width:0,y:x?r.height-f.height:0},k={x:f.left,y:f.top};return w.x&&w.y?k:pd(k,w)}}}};function p4(t,e){return!ep(t)||!ep(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function Hce(t,e){return!ep(t)||!ep(e)||!p4(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Fce="_selectorCard_1ju1l_2",zce="_selected_1ju1l_6",Uce="_closeIcon_1ju1l_16",Wce="_resultInput_1ju1l_20",Gce="_addCustomField_1ju1l_24",qce="_selector_1ju1l_2",Kce="_listItemMeta_1ju1l_35",Yce="_item_1ju1l_42",co={selectorCard:Fce,selected:zce,closeIcon:Uce,resultInput:Wce,addCustomField:Gce,selector:qce,listItemMeta:Kce,item:Yce},Jce="_blurContainer_dfxrr_2",Zce="_visible_dfxrr_18",Xce="_container_dfxrr_22",uy={blurContainer:Jce,visible:Zce,container:Xce};function m4({children:t,visible:e,className:n,onBlur:r}){const[o,s]=y.useState(e);y.useEffect(()=>{e&&s(!0)},[e]);const i=Aw({translateX:e?-100:0,opacity:e?1:0,onRest:()=>{e||s(!1)}});return!e&&!o?null:St.createPortal(m.jsx(Kf.div,{className:le(uy.blurContainer,e&&uy.visible),onClick:r,style:{visibility:o?"visible":"hidden",opacity:i.opacity},children:m.jsx(Kf.div,{className:le(uy.container,n),onClick:a=>a.stopPropagation(),style:{transform:i.translateX.to(a=>`translateY(${a}%)`),opacity:i.opacity},children:t})}),document.getElementById("drawer-global-root"))}const Qce="_customeFieldInput_x2u4g_2",ede="_addFieldButtonContainer_x2u4g_12",hy={customeFieldInput:Qce,addFieldButtonContainer:ede},tde=({className:t,onSubmit:e})=>{const n=_t(),[r,o]=D.useState({icon:"octicon:goal-24",selectedIconColor:"#607d8b",type:"metric",title:"",unit:"",description:""}),{addRecordField:s}=F0();return m.jsxs("div",{className:le(t),children:[m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Field Name",id:"label-record-custom.name.label"}),description:n.formatMessage({defaultMessage:"Ex: Push-ups, Squats",id:"label-record-custom.name.description"}),rightComponent:m.jsx(bo,{value:r.title,onChange:i=>o({...r,title:i.target.value}),border:"dash",className:hy.customeFieldInput})}),m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{value:r.unit,width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Field Unit",id:"label-record-custom.unit.label"}),description:n.formatMessage({defaultMessage:"Ex: minutes, hours, reps, kg",id:"label-record-custom.unit.description"}),rightComponent:m.jsx(bo,{border:"dash",onChange:i=>o({...r,unit:i.target.value}),className:hy.customeFieldInput})}),m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Type",id:"label-record-custom.type.label"}),rightComponent:m.jsx(_y,{isButton:!0,value:r.type,onChangeValue:i=>o({...r,type:i}),options:[{label:"Metric",value:"metric"},{label:"Note",value:"note"}]})}),m.jsx($N,{selectedIcon:r.icon,setSelectedIcon:i=>o({...r,icon:i}),selectedColor:r.selectedIconColor,setSelectedColor:i=>o({...r,selectedIconColor:i})}),m.jsx("div",{className:hy.addFieldButtonContainer,children:m.jsx(ht,{block:!0,size:"lg",type:"primary",onClick:()=>{s(r),e==null||e()},children:n.formatMessage({defaultMessage:"Save",id:"label-record-custom.save"})})})]})},nde="_container_1bkp1_2",rde="_drawer_1bkp1_6",ode="_header_1bkp1_14",fy={container:nde,drawer:rde,header:ode},sde=({visible:t,onClose:e})=>{const n=_t();return m.jsxs(m4,{className:fy.drawer,visible:t,onBlur:e,children:[m.jsxs("div",{className:fy.header,children:[m.jsx(ie.Title,{noMargin:!0,level:3,children:n.formatMessage({defaultMessage:"Add more field to record",id:"label-record-custom.title"})}),m.jsx(Q,{width:32,icon:"material-symbols:close-rounded",onClick:e})]}),m.jsx(tde,{className:fy.container,onSubmit:e})]})},ide="_groupContainer_1700i_2",ade="_groupOver_1700i_12",lde="_groupTitle_1700i_17",py={groupContainer:ide,groupOver:ade,groupTitle:lde},cde=({id:t,title:e,items:n,children:r})=>{const{setNodeRef:o,isOver:s}=c4({id:t,data:{type:"Group",items:n}});return m.jsxs("div",{ref:o,className:le(py.groupContainer,s&&py.groupOver),children:[m.jsx(ie.Title,{noMargin:!0,level:4,className:py.groupTitle,children:e}),m.jsx(_ce,{items:n,strategy:Ace,children:r})]})},dde=({id:t,children:e,isDragging:n})=>{const{attributes:r,listeners:o,setNodeRef:s,transform:i,transition:a}=jce({id:t}),l={transform:Is.Transform.toString(i),transition:a,opacity:n?0:1};return m.jsx("div",{ref:s,style:l,...r,...o,children:e})},ude=({selectedRecords:t=[],setSelectedRecords:e,fieldGroups:n,setFieldGroups:r})=>{const{getAllRecordFields:o}=F0(),s=_t(),[i,a]=D.useState(!1),[l,c]=D.useState(o()),[d,u]=D.useState(null);D.useEffect(()=>{c(o())},[]);const h=lle(iT(Nw),iT(Dw,{coordinateGetter:$ce})),f=k=>{if(k in n)return k;for(const C of n)if(C.fields.includes(k))return C.id;return null},p=k=>l.find(C=>C.id===k),g=k=>{u(k.active.id)},b=k=>{var M,R;const{active:C,over:S}=k;if(u(null),!S)return;const T=f(C.id),E=f(S.id);if(T&&E&&T===E){const P=[...n],L=P.findIndex($=>$.id===T);if(L!==-1){const $=P[L].fields.indexOf(C.id),F=P[L].fields.indexOf(S.id);P[L].fields=Lw(P[L].fields,$,F)}r(P)}else if(T&&E&&T!==E){const P=[...n],L=P.findIndex(F=>F.id===T),$=P.findIndex(F=>F.id===E);if(L!==-1&&$!==-1){const[F]=P[L].fields.splice(P[L].fields.indexOf(C.id),1),z=P[$].fields.indexOf(S.id);z!==-1?P[$].fields.splice(z,0,F):P[$].fields.push(F)}r(P)}else if(T&&((R=(M=S.data)==null?void 0:M.current)==null?void 0:R.type)==="Group"&&T!==S.id){const P=[...n],L=P.findIndex(F=>F.id===T),$=P.findIndex(F=>F.id===S.id);if(L!==-1&&$!==-1){const[F]=P[L].fields.splice(P[L].fields.indexOf(C.id),1);P[$].fields.push(F)}r(P)}},v=({id:k})=>{const C=new Set([...t,k]);e([...C]);const S=[...n];S.some(E=>E.fields.includes(k))||r([...S,{id:sn(),title:s.formatMessage({id:"label-group",defaultMessage:"Group"})+` ${S.length+1}`,fields:[k]}])},x=k=>{e(t.filter(S=>S!==k));const C=n.map(S=>({...S,fields:S.fields.filter(T=>T!==k)})).filter(S=>S.fields.length>0);r(C)},w=d?p(d):null;return m.jsxs("div",{children:[m.jsx(sde,{visible:i,onClose:()=>a(!1)}),m.jsx(qae,{options:l.map(k=>({...k,label:k.title,value:k.id})),classes:{container:co.selector},renderInput:()=>t.length===0?m.jsx(ie.Text,{children:"Record & Metric"}):m.jsx("div",{className:co.resultInput,children:t.map(k=>{const C=l.find(S=>S.id===k);return m.jsxs("div",{className:co.selected,children:[m.jsx(ie.Text,{children:C==null?void 0:C.title}),m.jsx(Q,{icon:"material-symbols:close-rounded",width:16,height:16,className:co.closeIcon,onClick:()=>x(k)})]},k)})}),renderOptionFooter:({close:k})=>m.jsx("div",{onClick:()=>{a(!0),k()},className:co.addCustomField,children:m.jsx(ie.Text,{children:s.formatMessage({id:"label-add-custom-field",defaultMessage:"Add custom field"})})}),onChange:({id:k},{close:C})=>{C(),v({id:k})},renderOption:k=>m.jsx(ut.ItemMeta,{className:co.selectorCard,logo:m.jsx(Q,{width:24,icon:k.icon}),title:k.title,description:k.description})}),m.jsxs(ice,{sensors:h,collisionDetection:ule,onDragStart:g,onDragEnd:b,children:[m.jsx("div",{className:co.groupsContainer,children:n.map(k=>m.jsx(cde,{id:k.id,title:k.title,items:k.fields,children:k.fields.map(C=>{const S=p(C);return S?m.jsx(dde,{id:C,children:m.jsx(ut.ItemMeta,{logo:m.jsx(Q,{width:24,icon:"ci:drag-vertical"}),className:co.item,title:S.title,description:S.description})},C):null})},k.id))}),m.jsx(Sce,{children:d&&w?m.jsx(ut.ItemMeta,{className:co.listItemMeta,logo:m.jsx(Q,{width:24,icon:"ci:drag-vertical"}),title:w.title,description:w.description,style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.15)",padding:"15px",width:"300px"}}):null})]})]})},hde="_menu_18w8r_2",fde="_input_18w8r_7",pde="_container_18w8r_27",mde="_submitButton_18w8r_31",gde="_deleteButton_18w8r_48",yde="_footer_18w8r_63",bde="_footerCenter_18w8r_75",Qo={menu:hde,input:fde,container:pde,submitButton:mde,deleteButton:gde,footer:yde,footerCenter:bde},g4=({initialValues:t,onSubmit:e,onClickDeleteButton:n})=>{const[r,o]=D.useState(t),{selectedRecords:s,checklistText:i,weeklyHobbies:a,startedAt:l,selectedIcon:c,selectedColor:d,fieldGroups:u}=r,h=k=>{o(C=>({...C,selectedRecords:k}))},f=k=>{o(C=>({...C,checklistText:k}))},p=k=>{o(C=>({...C,weeklyHobbies:k}))},g=k=>{o(C=>({...C,startedAt:k}))},b=k=>{o(C=>({...C,selectedIcon:k}))},v=k=>{o(C=>({...C,selectedColor:k}))},x=k=>{o(C=>({...C,fieldGroups:k}))},w=_t();return m.jsxs("div",{className:Qo.container,children:[m.jsxs($r,{className:Qo.container,children:[m.jsx("div",{className:Qo.menu}),m.jsx(mre,{placeholder:w.formatMessage({id:"CreateChecklist.label-create-checklist-input-placeholder",defaultMessage:"Write your task here"}),className:Qo.input,maxRows:3,autoFocus:!0,onChange:k=>{f(k.currentTarget.value)},value:i}),m.jsx(Aae,{values:a,setValues:p}),m.jsx(tc,{}),m.jsx($N,{selectedIcon:c,setSelectedIcon:b,selectedColor:d,setSelectedColor:v}),m.jsx(tc,{}),m.jsx(qse,{date:l,setDate:g}),m.jsx(tc,{}),m.jsx(ude,{selectedRecords:s,setSelectedRecords:h,fieldGroups:u,setFieldGroups:x})]}),m.jsx("div",{className:Qo.footer,children:m.jsxs("div",{className:Qo.footerCenter,children:[n&&m.jsx(ht,{onClick:n,className:Qo.deleteButton,children:w.formatMessage({id:"CreateChecklist.label-delete",defaultMessage:"DELETE"})}),m.jsx(ht,{type:"primary",className:Qo.submitButton,onClick:()=>{const k=u.filter(C=>C.fields.length>0);e({...r,fieldGroups:k})},children:w.formatMessage({id:"CreateChecklist.label-submit",defaultMessage:"SUBMIT"})})]})})]})},y4=({weeklyHobbies:t})=>{if(!(!t||t.length===0))return t.length===7?{startedAt:new Date().toISOString(),dayOfWeek:"*",minute:"0",hour:"8",dayOfMonth:"*",month:"*"}:{startedAt:new Date().toISOString(),minute:"0",hour:"8",dayOfMonth:"*",month:"*",dayOfWeek:t.map(e=>{switch(e){case se.Mon:return"1";case se.Tue:return"2";case se.Wed:return"3";case se.Thu:return"4";case se.Fri:return"5";case se.Sat:return"6";case se.Sun:return"0"}}).join(",")}},vde=()=>{const t=new Date;return[se.Sun,se.Mon,se.Tue,se.Wed,se.Thu,se.Fri,se.Sat][t.getDay()]},wde=()=>{const{addChecklistTemplate:t}=Ss(),{addChecklist:e}=up(),n=vr(),r=({startedAt:o,selectedRecords:s,selectedColor:i,selectedIcon:a,checklistText:l,weeklyHobbies:c,fieldGroups:d})=>{const u=y4({weeklyHobbies:c}),{id:h}=t({title:l,repeat:u,avatar:{type:"icon",name:a,color:i},records:s,fieldGroups:d});u||e({title:l,checklistTemplateId:h,startedAt:o,endedAt:new Date(new Date(o).setHours(23,59,59,999)).toISOString()}),n("/")};return m.jsxs(m.Fragment,{children:[m.jsx(Md,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Create Task"}),onClickLeftButton:()=>n("/")}),m.jsx(g4,{onSubmit:r,initialValues:{selectedRecords:[],checklistText:"",weeklyHobbies:[vde()],startedAt:new Date().toISOString().split("T")[0],selectedIcon:"material-symbols:checklist",selectedColor:"#607d8b",fieldGroups:[]}})]})};function xde(t){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...t,children:m.jsx("g",{id:"warning_amber_24px",children:m.jsx("path",{id:"icon/alert/warning_amber_24px",fillRule:"evenodd",clipRule:"evenodd",d:"M4.46999 20.5037C2.93001 20.5037 1.96999 18.8337 2.74001 17.5037L10.27 4.49374C11.04 3.16375 12.96 3.16375 13.73 4.49374L21.26 17.5037C22.03 18.8337 21.07 20.5037 19.53 20.5037H4.46999ZM19.53 18.5037L12 5.49374L4.46999 18.5037H19.53ZM11 10.5037V12.5037C11 13.0537 11.45 13.5037 12 13.5037C12.55 13.5037 13 13.0537 13 12.5037V10.5037C13 9.95376 12.55 9.50375 12 9.50375C11.45 9.50375 11 9.95376 11 10.5037ZM13 17.5037V15.5037H11V17.5037H13Z"})})})}const kde="_container_1avzj_1",Cde={container:kde};function Sde(){return m.jsx("hr",{className:Cde.container})}const Tde="_overlay_1ach8_2",Ede="_container_1ach8_17",Mde="_content_1ach8_29",Ade="_footer_1ach8_34",Rde="_header_1ach8_44",_de="_logo_1ach8_49",Pde="_icon_1ach8_64",Dde="_title_1ach8_70",Ide="_primaryButton_1ach8_74",Nde="_secondaryButton_1ach8_81",Er={overlay:Tde,container:Ede,content:Mde,footer:Ade,header:Rde,logo:_de,icon:Pde,title:Dde,primaryButton:Ide,secondaryButton:Nde};function b4({visible:t,primaryButtonText:e,secondaryButtonText:n,primaryButtonOnClick:r,secondaryButtonClick:o,content:s,title:i}){return t?m.jsx("div",{className:Er.overlay,children:m.jsxs("div",{className:Er.container,children:[m.jsxs("div",{className:Er.header,children:[m.jsx("div",{className:Er.logo,children:m.jsx(xde,{className:Er.icon})}),m.jsx(ie.Title,{className:Er.title,level:3,noMargin:!0,children:i})]}),m.jsx(Sde,{}),m.jsx("div",{className:Er.content,children:s}),m.jsxs("div",{className:Er.footer,children:[m.jsx(ht,{size:"lg",type:"ghost",className:Er.secondaryButton,onClick:o,children:n}),m.jsx(ht,{onClick:r,size:"lg",className:Er.primaryButton,children:e})]})]})}):null}const Ode=t=>t!=null&&t.dayOfWeek?t.dayOfWeek==="*"?[se.Sun,se.Mon,se.Tue,se.Wed,se.Thu,se.Fri,se.Sat]:t.dayOfWeek.split(",").map(e=>{switch(e){case"0":return se.Sun;case"1":return se.Mon;case"2":return se.Tue;case"3":return se.Wed;case"4":return se.Thu;case"5":return se.Fri;case"6":return se.Sat;default:return se.Sun}}):[new Date().getDay()],Lde=()=>{var f,p,g;const{checklistTemplate:t,deleteChecklistTemplate:e}=Ss(),{id:n}=qE(),r=t[n||""],{updateChecklistTemplate:o}=Ss(),s=vr(),i=_t(),a=({startedAt:b,selectedRecords:v,selectedColor:x,selectedIcon:w,checklistText:k,weeklyHobbies:C,fieldGroups:S})=>{const T=y4({weeklyHobbies:C});o({id:r.id,records:v,title:k,repeat:T,avatar:{type:"icon",name:w,color:x},fieldGroups:S}),s("/")},[l,c]=D.useState(!1),d=()=>{c(!0)},u=()=>{n&&(e(n),c(!1),s("/"))},h=()=>{c(!1)};return r?m.jsxs(m.Fragment,{children:[m.jsx(Md,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Edit Task"}),onClickLeftButton:()=>s("/")}),m.jsx(b4,{visible:l,title:i.formatMessage({id:"EditChecklistTemplate.delete-confirm-title",defaultMessage:"Delete Checklist Template"}),primaryButtonText:i.formatMessage({id:"EditChecklistTemplate..delete-confirm-ok",defaultMessage:"Delete"}),primaryButtonOnClick:u,secondaryButtonText:i.formatMessage({id:"EditChecklistTemplate..delete-confirm-cancel",defaultMessage:"Cancel"}),secondaryButtonClick:h,content:m.jsx(ie.Text,{children:i.formatMessage({id:"ChecklistTemplate.delete-confirm-message",defaultMessage:"Are you sure you want to delete this checklist template? This action cannot be undone."})})}),m.jsx(g4,{onClickDeleteButton:d,onSubmit:a,initialValues:{selectedRecords:r.records,checklistText:r.title,weeklyHobbies:Ode(r.repeat),startedAt:(f=r==null?void 0:r.repeat)!=null&&f.startedAt?new Date(r.repeat.startedAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],selectedIcon:(p=r==null?void 0:r.avatar)==null?void 0:p.name,selectedColor:((g=r==null?void 0:r.avatar)==null?void 0:g.color)||"#607d8b",fieldGroups:r.fieldGroups}})]}):null},jde="_container_1czko_1",Bde={container:jde},Vde=()=>{const{chartData:t,updateChartDate:e}=j0();D.useEffect(()=>{e()},[]);const n={stroke:{curve:"smooth"},fill:{type:"gradient"},xaxis:{categories:t==null?void 0:t.categories}},r=[{name:"weight",data:t==null?void 0:t.weights},{name:"belly's size",data:t==null?void 0:t.bellySizes}];return!t||!t.categories||(t==null?void 0:t.categories.length)===0||(t==null?void 0:t.weights.length)===0||(t==null?void 0:t.bellySizes.length)===0?null:m.jsxs($r,{className:Bde.container,children:[m.jsx(ie.Title,{level:3,noMargin:!0,children:"Timeline"}),m.jsx(nN,{options:n,series:r,type:"line"})]})},$de="_header_1oykc_1",Hde="_iconSuccess_1oykc_7",Fde="_numberInput_1oykc_13",zde="_kgText_1oykc_21",Ude="_titleAnswer_1oykc_27",Wde="_iconAnswerContainer_1oykc_33",Gde="_inputContainer_1oykc_37",qde="_questionTitle_1oykc_44",Kde="_divider_1oykc_48",Yde="_editFooter_1oykc_54",Pe={header:$de,iconSuccess:Hde,numberInput:Fde,kgText:zde,titleAnswer:Ude,iconAnswerContainer:Wde,inputContainer:Gde,questionTitle:qde,divider:Kde,editFooter:Yde},Jde="_player_109l2_14",Zde="_currentContainer_109l2_19",Xde="_icon_109l2_33",qu={player:Jde,currentContainer:Zde,icon:Xde},Qde=t=>new Date(t.getTime()-24*60*60*1e3),eue=t=>new Date(t.getTime()+24*60*60*1e3),tue=({date:t,onDateChange:e,getText:n})=>{const r=new Date(t).toLocaleDateString()===new Date().toLocaleDateString();return m.jsxs("div",{className:qu.player,children:[m.jsx(Q,{onClick:()=>e(Qde(t)),width:30,icon:"basil:skip-prev-outline",className:qu.icon}),m.jsx("div",{className:qu.currentContainer,onClick:()=>e(new Date),children:n({isToday:r})}),m.jsx(Q,{onClick:()=>e(eue(t)),width:30,icon:"basil:skip-next-outline",className:qu.icon})]})},nue="_container_fgz2s_1",rue={container:nue},wT=()=>{const[t,e]=D.useState(new Date),{updateCurrentBodyMetric:n}=j0(),r=o=>{e(o),n({date:o})};return m.jsx("div",{className:rue.container,children:m.jsx(tue,{date:t,onDateChange:r,getText:({isToday:o})=>o?"Today":new Date(t).toLocaleDateString()})})},oue=()=>{const[t,e]=D.useState(40),[n,r]=D.useState(50),{addBodyMetric:o,currentBodyMetric:s,currentDay:i}=j0(),[a,l]=D.useState(!!s);D.useEffect(()=>{l(!!s)},[s]),D.useEffect(()=>{s&&(e(s.weight),r(s.bellySize))},[s]);const c=_t();return a&&s?m.jsxs($r,{children:[m.jsx(wT,{}),m.jsxs("div",{className:Pe.header,children:[m.jsx(Q,{width:100,color:"rgba(16,154,0,0.16)",icon:"ion:checkmark-done-circle-outline",className:Pe.iconSuccess}),m.jsx(ie.Title,{level:3,className:Pe.questionTitle,children:c.formatMessage({id:"pregnant-weight-record.label-recorded",defaultMessage:"You've already recorded your weight and belly's size."})})]}),m.jsx("div",{className:Pe.divider}),m.jsxs("div",{className:Pe.inputContainer,children:[m.jsxs("div",{className:Pe.iconAnswerContainer,children:[m.jsx(Q,{width:24,icon:"icon-park-outline:industrial-scales"}),m.jsx(ie.Text,{className:Pe.titleAnswer,children:"Weight"})]}),m.jsx(bo,{type:"number",readOnly:!0,className:Pe.numberInput,value:s.weight,step:"0.01",min:20,max:120}),m.jsx(ie.Text,{className:Pe.kgText,children:"Kg"})]}),m.jsxs("div",{className:Pe.inputContainer,children:[m.jsxs("div",{className:Pe.iconAnswerContainer,children:[m.jsx(Q,{width:24,icon:"twemoji:straight-ruler"}),m.jsx(ie.Text,{className:Pe.titleAnswer,children:"Belly's Size"})]}),m.jsx(bo,{type:"number",readOnly:!0,className:Pe.numberInput,value:s.bellySize,step:"0.01",min:20,max:120}),m.jsx(ie.Text,{className:Pe.kgText,children:"Cm"})]}),m.jsx("div",{className:Pe.editFooter,children:m.jsx(ht,{onClick:()=>{l(!1)},children:"EDIT"})})]}):m.jsxs($r,{children:[m.jsx(wT,{}),m.jsx("div",{children:m.jsx(ie.Title,{level:3,className:Pe.questionTitle,children:c.formatMessage({id:"pregnant-weight-record.label-pregnant-weight",defaultMessage:"What's your weight {{day}}? And how's your belly growing, mama?"},{day:new Date(i).toLocaleDateString()===new Date().toLocaleDateString()?"today":new Date(i).toLocaleDateString()})})}),m.jsx("div",{className:Pe.divider}),m.jsxs("div",{className:Pe.inputContainer,children:[m.jsxs("div",{className:Pe.iconAnswerContainer,children:[m.jsx(Q,{width:24,icon:"icon-park-outline:industrial-scales"}),m.jsx(ie.Text,{className:Pe.titleAnswer,children:"Weight"})]}),m.jsx(bo,{type:"number",border:"dash",className:Pe.numberInput,onChange:d=>e(Number(d.target.value)),value:t,step:"0.01",min:20,max:120}),m.jsx(ie.Text,{className:Pe.kgText,children:"Kg"})]}),m.jsxs("div",{className:Pe.inputContainer,children:[m.jsxs("div",{className:Pe.iconAnswerContainer,children:[m.jsx(Q,{width:24,icon:"twemoji:straight-ruler"}),m.jsx(ie.Text,{className:Pe.titleAnswer,children:"Belly's Size"})]}),m.jsx(bo,{type:"number",border:"dash",className:Pe.numberInput,value:n,onChange:d=>r(Number(d.target.value)),step:"0.01",min:20,max:120}),m.jsx(ie.Text,{className:Pe.kgText,children:"Cm"})]}),m.jsx(ht,{onClick:()=>{o({weight:t,bellySize:n,createdAt:i.toISOString()}),l(!0)},children:"SUBMIT"})]})},sue=()=>m.jsxs("div",{children:[m.jsx(oue,{}),m.jsx(Vde,{})]}),iue="_card_1reeb_1",aue="_checklistItem_1reeb_6",lue="_checklistTemplateContainer_1reeb_11",cue="_checklistBody_1reeb_16",due="_text_1reeb_21",uue="_checkbox_1reeb_26",hue="_label_1reeb_31",fue="_enabled_1reeb_40",pue="_footer_1reeb_45",mue="_editIcon_1reeb_49",gue="_deleteIcon_1reeb_60",Dn={card:iue,checklistItem:aue,checklistTemplateContainer:lue,checklistBody:cue,text:due,checkbox:uue,label:hue,enabled:fue,footer:pue,editIcon:mue,deleteIcon:gue},yue=()=>{const{getRecommendChecklistTemplates:t,selectedChecklistTemplates:e,updateSelectedChecklistTemplate:n,deleteChecklistTemplate:r}=Ss(),o=_t(),s=vr(),[i,a]=D.useState(!1),[l,c]=D.useState(null),d=p=>{var v;const g=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],b=((v=p==null?void 0:p.dayOfWeek)==null?void 0:v.split(","))||[];return b.includes("*")?[{enabled:!0,text:o.formatMessage({id:"PregnantIntro.repeat.everyday",defaultMessage:"Every day"})}]:[0,1,2,3,4,5,6].map(x=>({day:x,enabled:b.includes(x.toString())||b.includes("*"),text:o.formatMessage({id:`PregnantIntro.repeat.${x}`,defaultMessage:g[x]})}))},u=p=>{c(p),a(!0)},h=()=>{l&&(r(l),a(!1),c(null))},f=()=>{a(!1),c(null)};return m.jsxs(m.Fragment,{children:[m.jsx(Md,{renderLeftComponent:()=>o.formatMessage({id:"ChecklistTemplatePageInfo.back",defaultMessage:"Back"})}),m.jsx($r,{className:Dn.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:Dn.label,children:o.formatMessage({id:"PregnantIntro.checklists-management",defaultMessage:"Checklist Template Management"})}),t().map(({id:p,title:g,avatar:b,repeat:v})=>m.jsxs("div",{className:Dn.checklistTemplateContainer,children:[m.jsxs("div",{className:Dn.checklistItem,children:[m.jsx(Q,{color:b.color||"#8A8A8A",width:32,height:32,icon:b.name}),m.jsx("div",{className:Dn.checklistBody,children:m.jsx(ie.Text,{className:Dn.text,children:g})}),m.jsx(Q,{className:Dn.editIcon,width:24,height:24,icon:"material-symbols:edit-outline",onClick:()=>s(`/edit-checklist/${p}`)}),m.jsx(Q,{className:Dn.deleteIcon,width:24,height:24,icon:"material-symbols:delete-outline",onClick:()=>u(p)}),m.jsx(fw,{checked:e.includes(p),onChange:x=>{const w=x.target.checked;n(w?[...e,p]:e.filter(k=>k!==p))},className:Dn.checkbox})]}),m.jsx("div",{className:Dn.footer,children:d(v).map(({enabled:x,text:w})=>m.jsx(ie.Text,{className:le(Dn.text,{[Dn.enabled]:x}),children:w},w))})]},p))]})}),m.jsx(b4,{visible:i,title:o.formatMessage({id:"ChecklistTemplate.delete-confirm-title",defaultMessage:"Delete Checklist Template"}),primaryButtonText:o.formatMessage({id:"ChecklistTemplate.delete-confirm-ok",defaultMessage:"Delete"}),primaryButtonOnClick:h,secondaryButtonText:o.formatMessage({id:"ChecklistTemplate.delete-confirm-cancel",defaultMessage:"Cancel"}),secondaryButtonClick:f,content:m.jsx(ie.Text,{children:o.formatMessage({id:"ChecklistTemplate.delete-confirm-message",defaultMessage:"Are you sure you want to delete this checklist template? This action cannot be undone."})})})]})},bue=JSON.parse(`[{"identify_key":"the_golden_heart","name":"The Golden Heart","detail":"In a small village nestled between rolling hills and a dense forest, there lived a young girl named Lily. Unlike other children who spent their days playing games, Lily spent her time helping others. She would carry water for the elderly, gather firewood for widows, and share her lunch with those who had none.\\n\\nOne particularly harsh winter, when food was scarce and the cold was unbearable, Lily noticed that many villagers were suffering. Despite having little herself, she decided to venture into the forest to find food and supplies for everyone. The forest was known to be dangerous, especially in winter, but Lily's heart was set on helping others.\\n\\nAs she wandered deeper into the forest, she came across an injured fox caught in a hunter's trap. While others might have passed by, Lily stopped to help. She carefully freed the fox, bandaged its wound, and shared her last piece of bread with it. To her surprise, the fox spoke to her in a gentle voice.\\n\\n'I am the Guardian of the Forest,' the fox said. 'Your kindness has touched my heart. I will help you find what you seek.' The fox led Lily to a hidden grove where magical plants grew year-round. There, she found enough food and medicinal herbs to help the entire village.\\n\\nBut the fox had one more gift. It touched Lily's chest with its paw, and her heart began to glow with a golden light. 'This is the mark of true kindness,' the fox explained. 'As long as you continue to help others, this light will guide you and protect you.'\\n\\nLily returned to the village with the supplies, and her golden heart became a beacon of hope. The villagers, inspired by her selflessness, began to help each other more. The village flourished, and Lily's story spread far and wide, teaching everyone that true wealth lies not in gold or possessions, but in the kindness we show to others.\\n\\nYears passed, and Lily grew into a wise woman. Her golden heart continued to glow, becoming brighter with each act of kindness she performed. The village became known as the Village of the Golden Heart, a place where people lived in harmony and helped one another without hesitation.","lesson":"True wealth and happiness come from helping others. Kindness is a gift that grows stronger the more you share it, and it has the power to transform not just individuals, but entire communities. When we put others before ourselves, we create a world where everyone can thrive."},{"identify_key":"the_patient_gardener","name":"The Patient Gardener","detail":"In a bustling city, there lived an old gardener named Mr. Chen. His small garden was the most beautiful in the neighborhood, filled with flowers that bloomed in perfect harmony. People often asked him his secret, but he would just smile and say, 'Patience and care.'\\n\\nOne spring, a young boy named Tom moved next door. He was eager to grow his own garden and asked Mr. Chen for help. The old gardener gave him some seeds and basic instructions, but Tom wanted results immediately. He watered the seeds too much, dug them up to check their progress, and became frustrated when nothing grew.\\n\\nMr. Chen watched quietly, then invited Tom to help in his garden. Day by day, he taught the boy about the importance of patience. 'Plants, like people, need time to grow,' he explained. 'You cannot rush nature.'\\n\\nAs the weeks passed, Tom learned to observe the subtle changes in his plants. He discovered that growth happens slowly, often when we're not looking. His garden began to flourish, and he found joy in the process of nurturing life.\\n\\nYears later, Tom became a successful botanist, known for his innovative methods. But he always credited Mr. Chen for teaching him the most important lesson: that true growth comes from patience and consistent care.","lesson":"Patience is a virtue that leads to lasting success. Growth takes time, and rushing the process often leads to failure. By learning to wait and nurture things properly, we can achieve beautiful results that last."},{"identify_key":"the_honest_merchant","name":"The Honest Merchant","detail":"In a busy marketplace, there was a merchant named Sarah who ran a small shop selling handmade crafts. While other merchants would sometimes exaggerate the quality of their goods to make sales, Sarah always told the truth about her products.\\n\\nOne day, a wealthy customer came to her shop looking for a special gift. Sarah showed her a beautiful vase, but honestly pointed out a small flaw that others might have hidden. The customer was surprised by her honesty and bought the vase anyway.\\n\\nWord of Sarah's integrity spread, and soon her shop became the most trusted in the market. People knew they could rely on her to tell the truth, even if it meant losing a sale. Her business grew steadily, while other merchants who had been dishonest found their customers leaving.\\n\\nYears later, when the market faced tough times, Sarah's shop remained strong. Her loyal customers supported her because they knew they could trust her completely. She became known as the merchant who proved that honesty is not just the best policy, but the most profitable one too.","lesson":"Honesty builds trust and lasting relationships. While it might seem easier to tell small lies for immediate gain, the truth always leads to better long-term success. Integrity is the foundation of any lasting business or relationship."},{"identify_key":"the_brave_little_turtle","name":"The Brave Little Turtle","detail":"In a peaceful pond, there lived a small turtle named Timmy. Unlike other turtles who spent their days basking in the sun, Timmy dreamed of exploring the world beyond the pond. The other turtles warned him about the dangers outside, but Timmy's curiosity grew stronger each day.\\n\\nOne morning, Timmy decided to venture beyond the pond's edge. The journey was difficult - he had to climb steep banks, cross a busy road, and face many challenges. But Timmy's determination never wavered.\\n\\nAlong the way, he met a lost baby bird who had fallen from its nest. Despite being small and slow, Timmy helped the bird find its way home. This act of kindness earned him the respect of the forest animals, who helped him on his journey.\\n\\nWhen Timmy finally reached the ocean, he discovered a whole new world of possibilities. He learned that being brave doesn't mean being fearless, but rather facing your fears and moving forward despite them. Timmy's adventures taught him that the world is full of wonder for those who dare to explore it.","lesson":"Courage is not the absence of fear, but the willingness to face it. By stepping out of our comfort zones, we discover new possibilities and grow stronger. Every challenge we overcome makes us more capable of handling future obstacles."},{"identify_key":"the_sharing_tree","name":"The Sharing Tree","detail":"In a magical forest, there stood an ancient tree that bore the most delicious fruits. The tree had a special rule: it would only give fruit to those who shared with others. Many animals came to the tree, but only those who understood the value of sharing received its gifts.\\n\\nOne summer, a young squirrel named Sammy discovered the tree. He was hungry and wanted to keep all the fruit for himself. But the tree remained silent, its branches empty. Sammy tried everything to get the fruit, but nothing worked.\\n\\nOne day, Sammy noticed a hungry bird nearby. Remembering his own hunger, he shared his last acorn with the bird. To his surprise, the tree suddenly bore fruit, and Sammy received more than he could have imagined.\\n\\nAs time passed, Sammy became known as the most generous squirrel in the forest. He learned that the more he shared, the more the tree gave him. The forest became a happier place as animals learned from Sammy's example, understanding that sharing brings abundance to everyone.","lesson":"Sharing creates abundance for everyone. When we give freely to others, we often receive more in return. Generosity creates a cycle of giving and receiving that benefits the entire community."},{"identify_key":"the_persistent_ant","name":"The Persistent Ant","detail":"In a vast garden, there lived a tiny ant named Andy. While other ants worked together in large groups, Andy preferred to work alone. He was determined to build the biggest anthill in the garden, despite being told it was impossible for one ant.\\n\\nDay after day, Andy carried grains of sand and small pebbles, building his hill one piece at a time. Other ants laughed at his efforts, but Andy never gave up. When storms came and destroyed his work, he simply started again.\\n\\nOne particularly bad storm left many ants homeless. Andy, who had built his hill strong and tall, opened his home to those in need. The other ants were amazed by his achievement and his kindness.\\n\\nThrough his persistence, Andy proved that even the smallest creature can achieve great things. His story taught the other ants that determination and hard work can overcome any obstacle, and that helping others makes success even sweeter.","lesson":"Persistence and determination can overcome any obstacle. Even the smallest efforts, when continued consistently, can lead to great achievements. Never underestimate the power of steady, focused work."},{"identify_key":"the_wise_owl","name":"The Wise Owl","detail":"In a tall oak tree, there lived an old owl named Oliver. He was known throughout the forest for his wisdom and ability to solve problems. Animals would come to him with their troubles, and he would listen carefully before offering advice.\\n\\nOne day, a group of young animals came to Oliver with a problem: they couldn't agree on how to share the forest's resources. Each wanted what was best for their own kind, leading to constant arguments.\\n\\nInstead of telling them what to do, Oliver asked them to look at the forest from his high perch. From there, they could see how everything was connected - how the trees provided homes for birds, how the streams watered the plants, and how each creature played a vital role.\\n\\nThe young animals realized that working together would benefit everyone. They learned that true wisdom comes from understanding how all parts of a system work together, and that cooperation leads to better solutions than competition.","lesson":"Wisdom comes from seeing the bigger picture and understanding how everything is connected. By working together and considering different perspectives, we can find solutions that benefit everyone."},{"identify_key":"the_grateful_rabbit","name":"The Grateful Rabbit","detail":"In a beautiful meadow, there lived a rabbit named Rosie who always found something to be grateful for, even on the darkest days. When it rained, she was thankful for the water that helped the flowers grow. When it was cold, she appreciated her warm burrow.\\n\\nOne winter, a terrible storm destroyed many animals' homes. While others complained about their losses, Rosie focused on what she still had - her family, her health, and her ability to help others.\\n\\nRosie organized the animals to help each other rebuild. She showed them how to find joy in small things, like a warm ray of sunshine or a shared meal. Her positive attitude inspired others to look for the good in every situation.\\n\\nAs the meadow recovered, the animals realized that Rosie's gratitude had helped them all survive the hard times. They learned that being thankful for what we have makes us stronger and helps us face life's challenges with hope.","lesson":"Gratitude transforms our perspective and helps us find joy in every situation. By focusing on what we have rather than what we lack, we can maintain hope and strength even in difficult times."},{"identify_key":"the_creative_caterpillar","name":"The Creative Caterpillar","detail":"In a colorful garden, there lived a caterpillar named Clara who saw the world differently from others. While other caterpillars followed the same paths and ate the same leaves, Clara explored new places and tried different foods.\\n\\nSome caterpillars thought Clara was strange, but she didn't mind. She believed that being different was a gift. She used her unique perspective to solve problems in new ways, like finding alternative food sources when the usual leaves were scarce.\\n\\nWhen it was time to build her cocoon, Clara chose a special spot that others had never considered. Her transformation was different too - she emerged as a butterfly with the most beautiful and unique pattern in the garden.\\n\\nClara's story taught the other creatures that being different is not a weakness but a strength. Her creativity and willingness to try new things led to discoveries that benefited the entire garden.","lesson":"Creativity and being different are strengths, not weaknesses. By embracing our uniqueness and thinking outside the box, we can find new solutions and create beautiful things that others might never imagine."},{"identify_key":"the_friendly_dragon","name":"The Friendly Dragon","detail":"In a kingdom surrounded by mountains, there lived a dragon named Drake. Unlike other dragons who hoarded gold and scared villagers, Drake was kind and helpful. He used his fire breath to light the town's lamps and his wings to create gentle breezes for the crops.\\n\\nAt first, the villagers were afraid of Drake, but he patiently showed them that he meant no harm. He helped build bridges, cleared paths through the mountains, and even babysat the children when their parents were busy.\\n\\nOne day, a group of knights came to slay the dragon, believing all dragons were dangerous. The villagers stood up for Drake, explaining how he had helped them. The knights were amazed to see a dragon who used his powers for good.\\n\\nDrake's story spread throughout the kingdom, teaching everyone that we shouldn't judge others by their appearance or what we've heard about them. True character is shown through actions, not stereotypes.","lesson":"Don't judge others by their appearance or what you've heard about them. Everyone deserves a chance to show their true character through their actions. Kindness and understanding can break down even the strongest prejudices."},{"identify_key":"the_determined_seed","name":"The Determined Seed","detail":"In a dry, rocky field, there was a tiny seed that dreamed of growing into a great tree. The other seeds told it that the soil was too poor and the conditions too harsh, but this seed refused to give up.\\n\\nDay after day, the seed pushed its roots deeper into the ground, searching for water and nutrients. It faced many challenges - scorching sun, strong winds, and hungry animals. But each obstacle made it stronger.\\n\\nYears passed, and the seed grew into a magnificent tree. Its roots had broken through the rocks, creating paths for water to flow. Its shade provided shelter for animals, and its leaves enriched the soil. The once-barren field became a thriving ecosystem.\\n\\nThe tree's story inspired other seeds to try growing in difficult places. They learned that challenges can be opportunities for growth, and that determination can transform even the harshest conditions into something beautiful.","lesson":"Challenges can be opportunities for growth. With determination and perseverance, we can overcome even the most difficult circumstances and create something beautiful that benefits others."},{"identify_key":"the_musical_stream","name":"The Musical Stream","detail":"In a quiet valley, there flowed a stream that had lost its song. Once, it had been known for its beautiful melodies as it danced over rocks and through meadows. But over time, it had become silent and still.\\n\\nOne day, a young girl named Melody came to the stream. She noticed its silence and decided to help it find its music again. She started by clearing away the fallen leaves and branches that had blocked its path. Then, she carefully placed small stones in patterns that would create gentle ripples.\\n\\nAs the water began to flow freely again, it started to make soft sounds. Melody added more stones, each placed with care to create different notes. Soon, the stream was singing a beautiful melody that echoed through the valley.\\n\\nThe stream's music attracted birds and animals, who added their own voices to the symphony. The valley became alive with sound, and people came from far and wide to hear the stream's song. Melody had shown that sometimes, all it takes is a little care and attention to bring back the music in our lives.","lesson":"Beauty and joy can be found in the simplest things. By taking care of our surroundings and adding our own creative touch, we can bring harmony and music to the world around us."},{"identify_key":"the_colorful_chameleon","name":"The Colorful Chameleon","detail":"In a vibrant jungle, there lived a chameleon named Charlie who was different from other chameleons. While his friends changed colors to blend in with their surroundings, Charlie loved to stand out with bright, bold colors.\\n\\nAt first, the other chameleons thought Charlie was strange. They believed that blending in was the only way to be safe. But Charlie showed them that being different could be beautiful and useful too.\\n\\nOne day, a group of lost butterflies flew into the jungle. They were tired and couldn't find their way home. Charlie used his bright colors to create a path of light through the dark jungle, guiding the butterflies to safety.\\n\\nThe other chameleons learned that sometimes, standing out and being different can help others. They began to appreciate their ability to change colors not just for hiding, but for creating beauty and helping those in need.","lesson":"Being different is a gift that can be used to help others. Sometimes, standing out and being unique is more valuable than blending in with the crowd."},{"identify_key":"the_dreaming_star","name":"The Dreaming Star","detail":"High in the night sky, there was a small star named Stella who had big dreams. While other stars were content to simply shine, Stella wanted to learn about the world below. She watched the Earth with wonder, curious about everything she saw.\\n\\nOne night, Stella noticed a little girl named Luna looking up at the stars. Luna was feeling sad and alone. Stella decided to shine extra bright, creating a special pattern of light just for Luna.\\n\\nLuna saw the star's special message and smiled. She started to write stories about the stars, imagining their adventures and dreams. Her stories brought joy to many children, and soon, people all over the world were looking up at the stars with wonder.\\n\\nStella learned that even though she couldn't visit Earth, she could still touch people's lives through her light. Her dreams of connecting with the world below came true in a way she never expected.","lesson":"Dreams can come true in unexpected ways. Even when we can't achieve our goals exactly as we planned, we can still make a difference and touch others' lives in meaningful ways."},{"identify_key":"the_helping_hands","name":"The Helping Hands","detail":"In a busy city, there was a small community garden where people from different backgrounds came together. Each person had their own plot, but they all shared tools and knowledge. The garden was a place of peace and cooperation.\\n\\nOne summer, a terrible storm damaged many of the garden plots. Some people lost their entire crops, while others had minor damage. Instead of focusing on their own losses, everyone came together to help each other rebuild.\\n\\nThey shared seeds, tools, and time. Those with undamaged plots offered space to those who had lost everything. They worked together to make the garden stronger than before, adding better drainage and wind protection.\\n\\nThe garden became a symbol of community strength. People learned that by helping others, they created a stronger, more resilient community. The garden flourished, and so did the friendships that grew there.","lesson":"Community strength comes from helping each other. When we work together and support one another, we can overcome any challenge and create something beautiful that benefits everyone."},{"identify_key":"the_wise_mountain","name":"The Wise Mountain","detail":"In a distant land, there stood an ancient mountain that had watched over the valley for thousands of years. The mountain had seen many changes - seasons coming and going, rivers changing course, and civilizations rising and falling.\\n\\nPeople would come to the mountain seeking wisdom, but the mountain never spoke. Instead, it taught through its presence. It showed that true strength comes from standing firm in the face of change, that beauty can be found in every season, and that perspective changes everything.\\n\\nOne day, a young shepherd named Kira came to the mountain, troubled by the changes in her village. She sat quietly, watching the mountain's shadow move across the valley. As she observed, she began to understand that change is natural and necessary.\\n\\nThe mountain taught Kira that wisdom comes from observation and patience. She returned to her village with a new understanding of how to face change with grace and strength.","lesson":"True wisdom comes from observation and patience. By learning to see the bigger picture and understanding that change is natural, we can face life's challenges with grace and strength."},{"identify_key":"the_dancing_clouds","name":"The Dancing Clouds","detail":"In the vast sky, there lived a group of clouds who loved to dance. They would swirl and twirl, creating beautiful patterns that delighted everyone who looked up. But one cloud, named Cirrus, was different. She preferred to stay still and watch the others dance.\\n\\nThe other clouds tried to convince Cirrus to join them, but she was afraid of making mistakes. She thought her movements wouldn't be as graceful as the others. One day, a strong wind came and forced all the clouds to move.\\n\\nTo her surprise, Cirrus discovered that she could dance too. Her movements were unique and beautiful in their own way. The other clouds were amazed by her style and began to incorporate her moves into their dances.\\n\\nThe sky became more beautiful than ever, with each cloud adding its own special touch to the dance. Cirrus learned that everyone has their own unique way of moving and that the beauty of dance comes from the combination of different styles.","lesson":"Everyone has their own unique talents and ways of expression. By embracing our individuality and sharing it with others, we can create something more beautiful than we could ever achieve alone."},{"identify_key":"the_healing_garden","name":"The Healing Garden","detail":"In a hospital courtyard, there was a neglected garden that had once been beautiful. The plants were wilted, the paths were overgrown, and no one visited anymore. But a young patient named Maya saw its potential.\\n\\nDespite being in a wheelchair, Maya started to care for the garden. She planted flowers that could grow in shade, added herbs with healing properties, and created paths that were accessible to everyone. Other patients began to help, each adding their own touch to the garden.\\n\\nAs the garden grew, it became a place of healing and hope. Patients would come to sit among the flowers, finding peace and strength in nature's beauty. Doctors noticed that patients who spent time in the garden recovered faster.\\n\\nThe garden taught everyone that healing comes in many forms. Sometimes, the act of creating something beautiful can be the best medicine of all.","lesson":"Healing can come from unexpected places. By creating beauty and nurturing life, we can bring hope and strength to ourselves and others."},{"identify_key":"the_singing_stones","name":"The Singing Stones","detail":"On a remote beach, there were special stones that could sing when the waves touched them. Each stone had its own unique sound, creating a beautiful symphony when the tide came in. But the stones were scattered and disorganized, their music chaotic.\\n\\nA young musician named Rio discovered the stones and decided to organize them. He spent days listening to each stone's sound, then arranged them in a pattern that created harmonious melodies. The stones' music became more beautiful than ever.\\n\\nPeople came from far and wide to hear the stones' song. They would sit on the beach, letting the music wash over them like the waves. The stones taught them that even the most ordinary things can create extraordinary beauty when they work together in harmony.","lesson":"Harmony comes from working together. When we organize our talents and work in concert with others, we can create something more beautiful than we could ever achieve alone."},{"identify_key":"the_light_bearer","name":"The Light Bearer","detail":"In a village that had lost its way, there lived a young girl named Lucia who carried a special lantern. The lantern's light was different from ordinary light - it could show people their true paths when they were lost.\\n\\nAt first, the villagers were afraid of the light. They had grown comfortable in their darkness and didn't want to see the truth. But Lucia was patient. She would sit with people, sharing her light gently until they were ready to see.\\n\\nOne by one, the villagers began to accept the light. They discovered new paths and possibilities they had never imagined. The village transformed, becoming a place of hope and growth.\\n\\nLucia's lantern taught everyone that sometimes, we need someone to show us the way, but we must be ready to see the light for ourselves.","lesson":"True guidance comes from within, but sometimes we need help to find our way. By being patient and gentle, we can help others discover their own path to light and truth."},{"identify_key":"the_whispering_wind","name":"The Whispering Wind","detail":"In a quiet valley, there was a special wind that could carry messages between people. It would whisper secrets, share stories, and bring comfort to those who were lonely. But the wind was shy and would only speak to those who truly listened.\\n\\nA young boy named Echo learned to listen to the wind. He would sit still for hours, hearing its stories and messages. The wind taught him about the valley's history, about the people who lived there, and about the importance of listening.\\n\\nEcho began to share the wind's messages with others. He helped people connect with each other, carrying their words and feelings through the valley. The community grew stronger as people learned to listen and understand each other better.\\n\\nThe wind's whispers taught everyone that true communication requires both speaking and listening, and that sometimes the most important messages are the ones we hear in the silence.","lesson":"True communication requires both speaking and listening. By learning to listen carefully, we can understand others better and create stronger connections in our community."}]`),vue="_container_fe1o7_1",wue="_header_fe1o7_7",xT={container:vue,header:wue},xue=()=>{const[t,e]=ur("story_key",{story:{},seen:[]}),n=i=>{t.seen.includes(i)||e({...t,seen:[...t.seen,i]})},[r,o]=D.useState(""),s=i=>{o(r===i?"":i),n(i)};return m.jsx("div",{children:bue.map(({name:i,detail:a,identify_key:l,lesson:c})=>{var d;return m.jsxs($r,{onClick:()=>{s(l)},className:xT.container,children:[m.jsxs("div",{className:xT.header,children:[m.jsx(ie.Title,{level:3,noMargin:!0,children:i}),m.jsx(ie.Text,{children:((d=t.seen)==null?void 0:d.includes(l))&&"Seen"})]}),r===l&&m.jsxs("div",{children:[m.jsx(ie.Title,{level:4,noMargin:!0,children:"Detail"}),m.jsx(ie.Paragraph,{children:a}),m.jsx(ie.Title,{level:4,noMargin:!0,children:"Lesson"}),m.jsx(ie.Paragraph,{children:c})]})]},l)})})},kue=()=>null,jw=y.createContext({});function Bw(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Vw=typeof window<"u",v4=Vw?y.useLayoutEffect:y.useEffect,Mm=y.createContext(null),$w=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function w4(t){return typeof t=="object"&&t!==null}function Hw(t){return w4(t)&&"offsetHeight"in t}class Cue extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=Hw(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=o-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Sue({children:t,isPresent:e,anchorX:n}){const r=y.useId(),o=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=y.useContext($w);return y.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:d,right:u}=s.current;if(e||!o.current||!a||!l)return;const h=n==="left"?`left: ${d}`:`right: ${u}`;o.current.dataset.motionPopId=r;const f=document.createElement("style");return i&&(f.nonce=i),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[e]),m.jsx(Cue,{isPresent:e,childRef:o,sizeRef:s,children:y.cloneElement(t,{ref:o})})}const Tue=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:s,mode:i,anchorX:a})=>{const l=Bw(Eue),c=y.useId();let d=!0,u=y.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:o,onExitComplete:h=>{l.set(h,!0);for(const f of l.values())if(!f)return;r&&r()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[n,l,r]);return s&&d&&(u={...u}),y.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[n]),y.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),i==="popLayout"&&(t=m.jsx(Sue,{isPresent:n,anchorX:a,children:t})),m.jsx(Mm.Provider,{value:u,children:t})};function Eue(){return new Map}function x4(t=!0){const e=y.useContext(Mm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=e,s=y.useId();y.useEffect(()=>{if(t)return o(s)},[t]);const i=y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,i]:[!0]}const Ku=t=>t.key||"";function kT(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const Mue=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:s="sync",propagate:i=!1,anchorX:a="left"})=>{const[l,c]=x4(i),d=y.useMemo(()=>kT(t),[t]),u=i&&!l?[]:d.map(Ku),h=y.useRef(!0),f=y.useRef(d),p=Bw(()=>new Map),[g,b]=y.useState(d),[v,x]=y.useState(d);v4(()=>{h.current=!1,f.current=d;for(let C=0;C<v.length;C++){const S=Ku(v[C]);u.includes(S)?p.delete(S):p.get(S)!==!0&&p.set(S,!1)}},[v,u.length,u.join("-")]);const w=[];if(d!==g){let C=[...d];for(let S=0;S<v.length;S++){const T=v[S],E=Ku(T);u.includes(E)||(C.splice(S,0,T),w.push(T))}return s==="wait"&&w.length&&(C=w),x(kT(C)),b(d),null}const{forceRender:k}=y.useContext(jw);return m.jsx(m.Fragment,{children:v.map(C=>{const S=Ku(C),T=i&&!l?!1:d===v||u.includes(S),E=()=>{if(p.has(S))p.set(S,!0);else return;let M=!0;p.forEach(R=>{R||(M=!1)}),M&&(k==null||k(),x(f.current),i&&(c==null||c()),r&&r())};return m.jsx(Tue,{isPresent:T,initial:!h.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:s,onExitComplete:T?void 0:E,anchorX:a,children:C},S)})})},Yu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],CT={value:null};function Aue(t,e){let n=new Set,r=new Set,o=!1,s=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(u){i.has(u)&&(d.schedule(u),t()),l++,u(a)}const d={schedule:(u,h=!1,f=!1)=>{const g=f&&o?n:r;return h&&i.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),i.delete(u)},process:u=>{if(a=u,o){s=!0;return}o=!0,[n,r]=[r,n],n.forEach(c),e&&CT.value&&CT.value.frameloop[e].push(l),l=0,n.clear(),o=!1,s&&(s=!1,d.process(u))}};return d}const Do={},Rue=40;function k4(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=Yu.reduce((w,k)=>(w[k]=Aue(s,e?k:void 0),w),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:f,postRender:p}=i,g=()=>{const w=Do.useManualTiming?o.timestamp:performance.now();n=!1,Do.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,Rue),1)),o.timestamp=w,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),d.process(o),u.process(o),h.process(o),f.process(o),p.process(o),o.isProcessing=!1,n&&e&&(r=!1,t(g))},b=()=>{n=!0,r=!0,o.isProcessing||t(g)};return{schedule:Yu.reduce((w,k)=>{const C=i[k];return w[k]=(S,T=!1,E=!1)=>(n||b(),C.schedule(S,T,E)),w},{}),cancel:w=>{for(let k=0;k<Yu.length;k++)i[Yu[k]].cancel(w)},state:o,steps:i}}const qn=t=>t,{schedule:qe,cancel:Ns,state:xt,steps:my}=k4(typeof requestAnimationFrame<"u"?requestAnimationFrame:qn,!0),C4=y.createContext({strict:!1}),ST={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ga={};for(const t in ST)Ga[t]={isEnabled:e=>ST[t].some(n=>!!e[n])};function _ue(t){for(const e in t)Ga[e]={...Ga[e],...t[e]}}const Pue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function tp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Pue.has(t)}let S4=t=>!tp(t);function Due(t){t&&(S4=e=>e.startsWith("on")?!tp(e):t(e))}try{Due(require("@emotion/is-prop-valid").default)}catch{}function Iue(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(S4(o)||n===!0&&tp(o)||!e&&!tp(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}function Nue(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}const Am=y.createContext({});function Rm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function gd(t){return typeof t=="string"||Array.isArray(t)}const Fw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zw=["initial",...Fw];function _m(t){return Rm(t.animate)||zw.some(e=>gd(t[e]))}function T4(t){return!!(_m(t)||t.variants)}function Oue(t,e){if(_m(t)){const{initial:n,animate:r}=t;return{initial:n===!1||gd(n)?n:void 0,animate:gd(r)?r:void 0}}return t.inherit!==!1?e:{}}function Lue(t){const{initial:e,animate:n}=Oue(t,y.useContext(Am));return y.useMemo(()=>({initial:e,animate:n}),[TT(e),TT(n)])}function TT(t){return Array.isArray(t)?t.join(" "):t}const jue=Symbol.for("motionComponentSymbol");function ma(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Bue(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ma(n)&&(n.current=r))},[e])}const Uw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Vue="framerAppearId",E4="data-"+Uw(Vue),M4=y.createContext({}),{schedule:Ww}=k4(queueMicrotask,!1);function $ue(t,e,n,r,o){var g,b;const{visualElement:s}=y.useContext(Am),i=y.useContext(C4),a=y.useContext(Mm),l=y.useContext($w).reducedMotion,c=y.useRef(null);r=r||i.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,u=y.useContext(M4);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&Hue(c.current,n,o,u);const h=y.useRef(!1);y.useInsertionEffect(()=>{d&&h.current&&d.update(n,a)});const f=n[E4],p=y.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return v4(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Ww.render(d.render),p.current&&d.animationState&&d.animationState.animateChanges())}),y.useEffect(()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),p.current=!1))}),d}function Hue(t,e,n,r){const{layoutId:o,layout:s,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:A4(t.parent)),t.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!i||a&&ma(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function A4(t){if(t)return t.options.allowProjection!==!1?t.projection:A4(t.parent)}let Gw=()=>{};function Fue({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:o}){t&&_ue(t);function s(a,l){let c;const d={...y.useContext($w),...a,layoutId:zue(a)},{isStatic:u}=d,h=Lue(a),f=r(a,u);if(!u&&Vw){Uue();const p=Wue(d);c=p.MeasureLayout,h.visualElement=$ue(o,f,d,e,p.ProjectionNode)}return m.jsxs(Am.Provider,{value:h,children:[c&&h.visualElement?m.jsx(c,{visualElement:h.visualElement,...d}):null,n(o,a,Bue(f,h.visualElement,l),f,u,h.visualElement)]})}s.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const i=y.forwardRef(s);return i[jue]=o,i}function zue({layoutId:t}){const e=y.useContext(jw).id;return e&&t!==void 0?e+"-"+t:t}function Uue(t,e){y.useContext(C4).strict}function Wue(t){const{drag:e,layout:n}=Ga;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const R4=t=>e=>typeof e=="string"&&e.startsWith(t),qw=R4("--"),Gue=R4("var(--"),Kw=t=>Gue(t)?que.test(t.split("/*")[0].trim()):!1,que=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yd={};function Kue(t){for(const e in t)yd[e]=t[e],qw(e)&&(yd[e].isCSSVariable=!0)}const gl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yl=new Set(gl);function _4(t,{layout:e,layoutId:n}){return yl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!yd[t]||t==="opacity")}const P4=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Io=(t,e,n)=>n>e?e:n<t?t:n,bl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},bd={...bl,transform:t=>Io(0,1,t)},Ju={...bl,default:1},ET={...bl,transform:Math.round},au=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ts=au("deg"),Lr=au("%"),re=au("px"),Yue=au("vh"),Jue=au("vw"),MT={...Lr,parse:t=>Lr.parse(t)/100,transform:t=>Lr.transform(t*100)},Zue={rotate:ts,rotateX:ts,rotateY:ts,rotateZ:ts,scale:Ju,scaleX:Ju,scaleY:Ju,scaleZ:Ju,skew:ts,skewX:ts,skewY:ts,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:bd,originX:MT,originY:MT,originZ:re},Yw={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re,...Zue,zIndex:ET,fillOpacity:bd,strokeOpacity:bd,numOctaves:ET},Xue={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Que=gl.length;function ehe(t,e,n){let r="",o=!0;for(let s=0;s<Que;s++){const i=gl[s],a=t[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=P4(a,Yw[i]);if(!l){o=!1;const d=Xue[i]||i;r+=`${d}(${c}) `}n&&(e[i]=c)}}return r=r.trim(),n?r=n(e,o?"":r):o&&(r="none"),r}function Jw(t,e,n){const{style:r,vars:o,transformOrigin:s}=t;let i=!1,a=!1;for(const l in e){const c=e[l];if(yl.has(l)){i=!0;continue}else if(qw(l)){o[l]=c;continue}else{const d=P4(c,Yw[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(i||n?r.transform=ehe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const Zw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),jt=t=>!!(t&&t.getVelocity);function D4(t,e,n){for(const r in e)!jt(e[r])&&!_4(r,n)&&(t[r]=e[r])}function the({transformTemplate:t},e){return y.useMemo(()=>{const n=Zw();return Jw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function nhe(t,e){const n=t.style||{},r={};return D4(r,n,t),Object.assign(r,the(t,e)),r}function rhe(t,e){const n={},r=nhe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const ohe={offset:"stroke-dashoffset",array:"stroke-dasharray"},she={offset:"strokeDashoffset",array:"strokeDasharray"};function ihe(t,e,n=1,r=0,o=!0){t.pathLength=1;const s=o?ohe:she;t[s.offset]=re.transform(-r);const i=re.transform(e),a=re.transform(n);t[s.array]=`${i} ${a}`}function I4(t,{attrX:e,attrY:n,attrScale:r,pathLength:o,pathSpacing:s=1,pathOffset:i=0,...a},l,c,d){if(Jw(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:u,style:h}=t;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete u.transformBox),e!==void 0&&(u.x=e),n!==void 0&&(u.y=n),r!==void 0&&(u.scale=r),o!==void 0&&ihe(u,o,s,i,!1)}const N4=()=>({...Zw(),attrs:{}}),O4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ahe(t,e,n,r){const o=y.useMemo(()=>{const s=N4();return I4(s,e,O4(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};D4(s,t.style,t),o.style={...s,...o.style}}return o}const lhe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xw(t){return typeof t!="string"||t.includes("-")?!1:!!(lhe.indexOf(t)>-1||/[A-Z]/u.test(t))}function che(t=!1){return(n,r,o,{latestValues:s},i)=>{const l=(Xw(n)?ahe:rhe)(r,s,i,n),c=Iue(r,typeof n=="string",t),d=n!==y.Fragment?{...c,...l,ref:o}:{},{children:u}=r,h=y.useMemo(()=>jt(u)?u.get():u,[u]);return y.createElement(n,{...d,children:h})}}function AT(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Qw(t,e,n,r){if(typeof e=="function"){const[o,s]=AT(r);e=e(n!==void 0?n:t.custom,o,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,s]=AT(r);e=e(n!==void 0?n:t.custom,o,s)}return e}function kh(t){return jt(t)?t.get():t}function dhe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,o){return{latestValues:uhe(n,r,o,t),renderState:e()}}const L4=t=>(e,n)=>{const r=y.useContext(Am),o=y.useContext(Mm),s=()=>dhe(t,e,r,o);return n?s():Bw(s)};function uhe(t,e,n,r){const o={},s=r(t,{});for(const h in s)o[h]=kh(s[h]);let{initial:i,animate:a}=t;const l=_m(t),c=T4(t);e&&c&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const u=d?a:i;if(u&&typeof u!="boolean"&&!Rm(u)){const h=Array.isArray(u)?u:[u];for(let f=0;f<h.length;f++){const p=Qw(t,h[f]);if(p){const{transitionEnd:g,transition:b,...v}=p;for(const x in v){let w=v[x];if(Array.isArray(w)){const k=d?w.length-1:0;w=w[k]}w!==null&&(o[x]=w)}for(const x in g)o[x]=g[x]}}}return o}function ex(t,e,n){var s;const{style:r}=t,o={};for(const i in r)(jt(r[i])||e.style&&jt(e.style[i])||_4(i,t)||((s=n==null?void 0:n.getValue(i))==null?void 0:s.liveStyle)!==void 0)&&(o[i]=r[i]);return o}const hhe={useVisualState:L4({scrapeMotionValuesFromProps:ex,createRenderState:Zw})};function j4(t,e,n){const r=ex(t,e,n);for(const o in t)if(jt(t[o])||jt(e[o])){const s=gl.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[s]=t[o]}return r}const fhe={useVisualState:L4({scrapeMotionValuesFromProps:j4,createRenderState:N4})};function phe(t,e){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const i={...Xw(r)?fhe:hhe,preloadedFeatures:t,useRender:che(o),createVisualElement:e,Component:r};return Fue(i)}}function vd(t,e,n){const r=t.getProps();return Qw(r,e,n!==void 0?n:r.custom,t)}const u0=t=>Array.isArray(t);let Ch;function mhe(){Ch=void 0}const dn={now:()=>(Ch===void 0&&dn.set(xt.isProcessing||Do.useManualTiming?xt.timestamp:performance.now()),Ch),set:t=>{Ch=t,queueMicrotask(mhe)}};function tx(t,e){t.indexOf(e)===-1&&t.push(e)}function nx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class rx{constructor(){this.subscriptions=[]}add(e){return tx(this.subscriptions,e),()=>nx(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let s=0;s<o;s++){const i=this.subscriptions[s];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function B4(t,e){return e?t*(1e3/e):0}const RT=30,ghe=t=>!isNaN(parseFloat(t));class yhe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{var i,a;const s=dn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();o&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=dn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ghe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new rx);const r=this.events[e].add(n);return e==="change"?()=>{r(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=dn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>RT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,RT);return B4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qa(t,e){return new yhe(t,e)}function bhe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qa(n))}function vhe(t){return u0(t)?t[t.length-1]||0:t}function whe(t,e){const n=vd(t,e);let{transitionEnd:r={},transition:o={},...s}=n||{};s={...s,...r};for(const i in s){const a=vhe(s[i]);bhe(t,i,a)}}function xhe(t){return!!(jt(t)&&t.add)}function h0(t,e){const n=t.getValue("willChange");if(xhe(n))return n.add(e);if(!n&&Do.WillChange){const r=new Do.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function V4(t){return t.props[E4]}const khe=t=>t!==null;function Che(t,{repeat:e,repeatType:n="loop"},r){const o=t.filter(khe),s=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[s]}const She={type:"spring",stiffness:500,damping:25,restSpeed:10},The=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Ehe={type:"keyframes",duration:.8},Mhe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ahe=(t,{keyframes:e})=>e.length>2?Ehe:yl.has(t)?t.startsWith("scale")?The(e[1]):She:Mhe;function Rhe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:i,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function ox(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const jr=t=>t*1e3,Br=t=>t/1e3,kc=t=>Math.round(t*1e5)/1e5,sx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _he(t){return t==null}const Phe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ix=(t,e)=>n=>!!(typeof n=="string"&&Phe.test(n)&&n.startsWith(t)||e&&!_he(n)&&Object.prototype.hasOwnProperty.call(n,e)),$4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[o,s,i,a]=r.match(sx);return{[t]:parseFloat(o),[e]:parseFloat(s),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},Dhe=t=>Io(0,255,t),gy={...bl,transform:t=>Math.round(Dhe(t))},ui={test:ix("rgb","red"),parse:$4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+gy.transform(t)+", "+gy.transform(e)+", "+gy.transform(n)+", "+kc(bd.transform(r))+")"};function Ihe(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const f0={test:ix("#"),parse:Ihe,transform:ui.transform},ga={test:ix("hsl","hue"),parse:$4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Lr.transform(kc(e))+", "+Lr.transform(kc(n))+", "+kc(bd.transform(r))+")"},Ot={test:t=>ui.test(t)||f0.test(t)||ga.test(t),parse:t=>ui.test(t)?ui.parse(t):ga.test(t)?ga.parse(t):f0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ui.transform(t):ga.transform(t)},Nhe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ohe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(sx))==null?void 0:e.length)||0)+(((n=t.match(Nhe))==null?void 0:n.length)||0)>0}const H4="number",F4="color",Lhe="var",jhe="var(",_T="${}",Bhe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},o=[];let s=0;const a=e.replace(Bhe,l=>(Ot.test(l)?(r.color.push(s),o.push(F4),n.push(Ot.parse(l))):l.startsWith(jhe)?(r.var.push(s),o.push(Lhe),n.push(l)):(r.number.push(s),o.push(H4),n.push(parseFloat(l))),++s,_T)).split(_T);return{values:n,split:a,indexes:r,types:o}}function z4(t){return wd(t).values}function U4(t){const{split:e,types:n}=wd(t),r=e.length;return o=>{let s="";for(let i=0;i<r;i++)if(s+=e[i],o[i]!==void 0){const a=n[i];a===H4?s+=kc(o[i]):a===F4?s+=Ot.transform(o[i]):s+=o[i]}return s}}const Vhe=t=>typeof t=="number"?0:t;function $he(t){const e=z4(t);return U4(t)(e.map(Vhe))}const Os={test:Ohe,parse:z4,createTransformer:U4,getAnimatableNone:$he};function yy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Hhe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,s=0,i=0;if(!e)o=s=i=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;o=yy(l,a,t+1/3),s=yy(l,a,t),i=yy(l,a,t-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:r}}function np(t,e){return n=>n>0?e:t}const We=(t,e,n)=>t+(e-t)*n,by=(t,e,n)=>{const r=t*t,o=n*(e*e-r)+r;return o<0?0:Math.sqrt(o)},Fhe=[f0,ui,ga],zhe=t=>Fhe.find(e=>e.test(t));function PT(t){const e=zhe(t);if(!e)return!1;let n=e.parse(t);return e===ga&&(n=Hhe(n)),n}const DT=(t,e)=>{const n=PT(t),r=PT(e);if(!n||!r)return np(t,e);const o={...n};return s=>(o.red=by(n.red,r.red,s),o.green=by(n.green,r.green,s),o.blue=by(n.blue,r.blue,s),o.alpha=We(n.alpha,r.alpha,s),ui.transform(o))},p0=new Set(["none","hidden"]);function Uhe(t,e){return p0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}const Whe=(t,e)=>n=>e(t(n)),lu=(...t)=>t.reduce(Whe);function Ghe(t,e){return n=>We(t,e,n)}function ax(t){return typeof t=="number"?Ghe:typeof t=="string"?Kw(t)?np:Ot.test(t)?DT:Yhe:Array.isArray(t)?W4:typeof t=="object"?Ot.test(t)?DT:qhe:np}function W4(t,e){const n=[...t],r=n.length,o=t.map((s,i)=>ax(s)(s,e[i]));return s=>{for(let i=0;i<r;i++)n[i]=o[i](s);return n}}function qhe(t,e){const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=ax(t[o])(t[o],e[o]));return o=>{for(const s in r)n[s]=r[s](o);return n}}function Khe(t,e){const n=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const s=e.types[o],i=t.indexes[s][r[s]],a=t.values[i]??0;n[o]=a,r[s]++}return n}const Yhe=(t,e)=>{const n=Os.createTransformer(e),r=wd(t),o=wd(e);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?p0.has(t)&&!o.values.length||p0.has(e)&&!r.values.length?Uhe(t,e):lu(W4(Khe(r,o),o.values),n):np(t,e)};function G4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?We(t,e,n):ax(t)(t,e)}const Jhe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>qe.update(e,n),stop:()=>Ns(e),now:()=>xt.isProcessing?xt.timestamp:dn.now()}},q4=(t,e,n=10)=>{let r="";const o=Math.max(Math.round(e/n),2);for(let s=0;s<o;s++)r+=t(s/(o-1))+", ";return`linear(${r.substring(0,r.length-2)})`},rp=2e4;function lx(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<rp;)e+=n,r=t.next(e);return e>=rp?1/0:e}function Zhe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),o=Math.min(lx(r),rp);return{type:"keyframes",ease:s=>r.next(o*s).value/e,duration:Br(o)}}const Xhe=5;function K4(t,e,n){const r=Math.max(e-Xhe,0);return B4(n-t(r),e-r)}const Xe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},IT=.001;function Qhe({duration:t=Xe.duration,bounce:e=Xe.bounce,velocity:n=Xe.velocity,mass:r=Xe.mass}){let o,s,i=1-e;i=Io(Xe.minDamping,Xe.maxDamping,i),t=Io(Xe.minDuration,Xe.maxDuration,Br(t)),i<1?(o=c=>{const d=c*i,u=d*t,h=d-n,f=m0(c,i),p=Math.exp(-u);return IT-h/f*p},s=c=>{const u=c*i*t,h=u*n+n,f=Math.pow(i,2)*Math.pow(c,2)*t,p=Math.exp(-u),g=m0(Math.pow(c,2),i);return(-o(c)+IT>0?-1:1)*((h-f)*p)/g}):(o=c=>{const d=Math.exp(-c*t),u=(c-n)*t+1;return-.001+d*u},s=c=>{const d=Math.exp(-c*t),u=(n-c)*(t*t);return d*u});const a=5/t,l=tfe(o,s,a);if(t=jr(t),isNaN(l))return{stiffness:Xe.stiffness,damping:Xe.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:t}}}const efe=12;function tfe(t,e,n){let r=n;for(let o=1;o<efe;o++)r=r-t(r)/e(r);return r}function m0(t,e){return t*Math.sqrt(1-e*e)}const nfe=["duration","bounce"],rfe=["stiffness","damping","mass"];function NT(t,e){return e.some(n=>t[n]!==void 0)}function ofe(t){let e={velocity:Xe.velocity,stiffness:Xe.stiffness,damping:Xe.damping,mass:Xe.mass,isResolvedFromDuration:!1,...t};if(!NT(t,rfe)&&NT(t,nfe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,s=2*Io(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:Xe.mass,stiffness:o,damping:s}}else{const n=Qhe(t);e={...e,...n,mass:Xe.mass},e.isResolvedFromDuration=!0}return e}function op(t=Xe.visualDuration,e=Xe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:o}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:f}=ofe({...n,velocity:-Br(n.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*d)),b=i-s,v=Br(Math.sqrt(l/d)),x=Math.abs(b)<5;r||(r=x?Xe.restSpeed.granular:Xe.restSpeed.default),o||(o=x?Xe.restDelta.granular:Xe.restDelta.default);let w;if(g<1){const C=m0(v,g);w=S=>{const T=Math.exp(-g*v*S);return i-T*((p+g*v*b)/C*Math.sin(C*S)+b*Math.cos(C*S))}}else if(g===1)w=C=>i-Math.exp(-v*C)*(b+(p+v*b)*C);else{const C=v*Math.sqrt(g*g-1);w=S=>{const T=Math.exp(-g*v*S),E=Math.min(C*S,300);return i-T*((p+g*v*b)*Math.sinh(E)+C*b*Math.cosh(E))/C}}const k={calculatedDuration:f&&u||null,next:C=>{const S=w(C);if(f)a.done=C>=u;else{let T=C===0?p:0;g<1&&(T=C===0?jr(p):K4(w,C,S));const E=Math.abs(T)<=r,M=Math.abs(i-S)<=o;a.done=E&&M}return a.value=a.done?i:S,a},toString:()=>{const C=Math.min(lx(k),rp),S=q4(T=>k.next(C*T).value,C,30);return C+"ms "+S},toTransition:()=>{}};return k}op.applyToOptions=t=>{const e=Zhe(t,100,op);return t.ease=e.ease,t.duration=jr(e.duration),t.type="keyframes",t};function g0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=t[0],h={done:!1,value:u},f=E=>a!==void 0&&E<a||l!==void 0&&E>l,p=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let g=n*e;const b=u+g,v=i===void 0?b:i(b);v!==b&&(g=v-u);const x=E=>-g*Math.exp(-E/r),w=E=>v+x(E),k=E=>{const M=x(E),R=w(E);h.done=Math.abs(M)<=c,h.value=h.done?v:R};let C,S;const T=E=>{f(h.value)&&(C=E,S=op({keyframes:[h.value,p(h.value)],velocity:K4(w,E,h.value),damping:o,stiffness:s,restDelta:c,restSpeed:d}))};return T(0),{calculatedDuration:null,next:E=>{let M=!1;return!S&&C===void 0&&(M=!0,k(E),T(E)),C!==void 0&&E>=C?S.next(E-C):(!M&&k(E),h)}}}const xd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};function sfe(t,e,n){const r=[],o=n||Do.mix||G4,s=t.length-1;for(let i=0;i<s;i++){let a=o(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||qn:e;a=lu(l,a)}r.push(a)}return r}function ife(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const s=t.length;if(Gw(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=sfe(e,r,o),l=a.length,c=d=>{if(i&&d<t[0])return e[0];let u=0;if(l>1)for(;u<t.length-2&&!(d<t[u+1]);u++);const h=xd(t[u],t[u+1],d);return a[u](h)};return n?d=>c(Io(t[0],t[s-1],d)):c}function afe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=xd(0,e,r);t.push(We(n,1,o))}}function lfe(t){const e=[0];return afe(e,t.length-1),e}function cfe(t,e){return t.map(n=>n*e)}const Y4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,dfe=1e-7,ufe=12;function hfe(t,e,n,r,o){let s,i,a=0;do i=e+(n-e)/2,s=Y4(i,r,o)-t,s>0?n=i:e=i;while(Math.abs(s)>dfe&&++a<ufe);return i}function cu(t,e,n,r){if(t===e&&n===r)return qn;const o=s=>hfe(s,0,1,t,n);return s=>s===0||s===1?s:Y4(o(s),e,r)}const ffe=cu(.42,0,1,1),pfe=cu(0,0,.58,1),J4=cu(.42,0,.58,1),mfe=t=>Array.isArray(t)&&typeof t[0]!="number",Z4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,X4=t=>e=>1-t(1-e),Q4=cu(.33,1.53,.69,.99),cx=X4(Q4),eO=Z4(cx),tO=t=>(t*=2)<1?.5*cx(t):.5*(2-Math.pow(2,-10*(t-1))),dx=t=>1-Math.sin(Math.acos(t)),nO=X4(dx),rO=Z4(dx),oO=t=>Array.isArray(t)&&typeof t[0]=="number",gfe={linear:qn,easeIn:ffe,easeInOut:J4,easeOut:pfe,circIn:dx,circInOut:rO,circOut:nO,backIn:cx,backInOut:eO,backOut:Q4,anticipate:tO},yfe=t=>typeof t=="string",OT=t=>{if(oO(t)){Gw(t.length===4);const[e,n,r,o]=t;return cu(e,n,r,o)}else if(yfe(t))return gfe[t];return t};function bfe(t,e){return t.map(()=>e||J4).splice(0,t.length-1)}function Cc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=mfe(r)?r.map(OT):OT(r),s={done:!1,value:e[0]},i=cfe(n&&n.length===e.length?n:lfe(e),t),a=ife(i,e,{ease:Array.isArray(o)?o:bfe(e,o)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const vfe=t=>t!==null;function ux(t,{repeat:e,repeatType:n="loop"},r,o=1){const s=t.filter(vfe),a=o<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const wfe={decay:g0,inertia:g0,tween:Cc,keyframes:Cc,spring:op};function sO(t){typeof t.type=="string"&&(t.type=wfe[t.type])}class hx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const xfe=t=>t/100;class fx extends hx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(n=!0)=>{var r,o;if(n){const{motionValue:s}=this.options;s&&s.updatedAt!==dn.now()&&this.tick(dn.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;sO(e);const{type:n=Cc,repeat:r=0,repeatDelay:o=0,repeatType:s,velocity:i=0}=e;let{keyframes:a}=e;const l=n||Cc;l!==Cc&&typeof a[0]!="number"&&(this.mixKeyframes=lu(xfe,G4(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-i})),c.calculatedDuration===null&&(c.calculatedDuration=lx(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:o,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:u,repeatType:h,repeatDelay:f,type:p,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>o;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let w=this.currentTime,k=r;if(u){const E=Math.min(this.currentTime,o)/a;let M=Math.floor(E),R=E%1;!R&&E>=1&&(R=1),R===1&&M--,M=Math.min(M,u+1),!!(M%2)&&(h==="reverse"?(R=1-R,f&&(R-=f/a)):h==="mirror"&&(k=i)),w=Io(0,1,R)*a}const C=x?{done:!1,value:d[0]}:k.next(w);s&&(C.value=s(C.value));let{done:S}=C;!x&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&p!==g0&&(C.value=ux(d,this.options,b,this.speed)),g&&g(C.value),T&&this.finish(),C}then(e,n){return this.finished.then(e,n)}get duration(){return Br(this.calculatedDuration)}get time(){return Br(this.currentTime)}set time(e){var n;e=jr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(dn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Br(this.currentTime))}play(){var o,s;if(this.isStopped)return;const{driver:e=Jhe,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),(s=(o=this.options).onPlay)==null||s.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function kfe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const hi=t=>t*180/Math.PI,y0=t=>{const e=hi(Math.atan2(t[1],t[0]));return b0(e)},Cfe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:y0,rotateZ:y0,skewX:t=>hi(Math.atan(t[1])),skewY:t=>hi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},b0=t=>(t=t%360,t<0&&(t+=360),t),LT=y0,jT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),BT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Sfe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:jT,scaleY:BT,scale:t=>(jT(t)+BT(t))/2,rotateX:t=>b0(hi(Math.atan2(t[6],t[5]))),rotateY:t=>b0(hi(Math.atan2(-t[2],t[0]))),rotateZ:LT,rotate:LT,skewX:t=>hi(Math.atan(t[4])),skewY:t=>hi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function v0(t){return t.includes("scale")?1:0}function w0(t,e){if(!t||t==="none")return v0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=Sfe,o=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Cfe,o=a}if(!o)return v0(e);const s=r[e],i=o[1].split(",").map(Efe);return typeof s=="function"?s(i):i[s]}const Tfe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return w0(n,e)};function Efe(t){return parseFloat(t.trim())}const VT=t=>t===bl||t===re,Mfe=new Set(["x","y","z"]),Afe=gl.filter(t=>!Mfe.has(t));function Rfe(t){const e=[];return Afe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const xi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>w0(e,"x"),y:(t,{transform:e})=>w0(e,"y")};xi.translateX=xi.x;xi.translateY=xi.y;const ki=new Set;let x0=!1,k0=!1,C0=!1;function iO(){if(k0){const t=Array.from(ki).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const o=Rfe(r);o.length&&(n.set(r,o),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([s,i])=>{var a;(a=r.getValue(s))==null||a.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}k0=!1,x0=!1,ki.forEach(t=>t.complete(C0)),ki.clear()}function aO(){ki.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(k0=!0)})}function _fe(){C0=!0,aO(),iO(),C0=!1}class px{constructor(e,n,r,o,s,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=o,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(ki.add(this),x0||(x0=!0,qe.read(aO),qe.resolveKeyframes(iO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:o}=this;if(e[0]===null){const s=o==null?void 0:o.get(),i=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,i);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=i),o&&s===void 0&&o.set(e[0])}kfe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ki.delete(this)}cancel(){this.state==="scheduled"&&(ki.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Pfe=t=>t.startsWith("--");function Dfe(t,e,n){Pfe(e)?t.style.setProperty(e,n):t.style[e]=n}function mx(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ife=mx(()=>window.ScrollTimeline!==void 0),Nfe={};function Ofe(t,e){const n=mx(t);return()=>Nfe[e]??n()}const lO=Ofe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,$T={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xl([0,.65,.55,1]),circOut:Xl([.55,0,1,.45]),backIn:Xl([.31,.01,.66,-.59]),backOut:Xl([.33,1.53,.69,.99])};function cO(t,e){if(t)return typeof t=="function"?lO()?q4(t,e):"ease-out":oO(t)?Xl(t):Array.isArray(t)?t.map(n=>cO(n,e)||$T.easeOut):$T[t]}function Lfe(t,e,n,{delay:r=0,duration:o=300,repeat:s=0,repeatType:i="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const u=cO(a,o);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:i==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(d,h)}function dO(t){return typeof t=="function"&&"applyToOptions"in t}function jfe({type:t,...e}){return dO(t)&&lO()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Bfe extends hx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:o,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=i,this.options=e,Gw(typeof e.type!="string");const c=jfe(e);this.animation=Lfe(n,r,o,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=ux(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):Dfe(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Br(Number(e))}get time(){return Br(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=jr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Ife()?(this.animation.timeline=e,qn):n(this)}}const uO={anticipate:tO,backInOut:eO,circInOut:rO};function Vfe(t){return t in uO}function $fe(t){typeof t.ease=="string"&&Vfe(t.ease)&&(t.ease=uO[t.ease])}const HT=10;class Hfe extends Bfe{constructor(e){$fe(e),sO(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:o,element:s,...i}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new fx({...i,autoplay:!1}),l=jr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-HT).value,a.sample(l).value,HT),a.stop()}}const FT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Os.test(t)||t==="0")&&!t.startsWith("url("));function Ffe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function zfe(t,e,n,r){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],i=FT(o,e),a=FT(s,e);return!i||!a?!1:Ffe(t)||(n==="spring"||dO(n))&&r}const Ufe=new Set(["opacity","clipPath","filter","transform"]),Wfe=mx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Gfe(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:o,damping:s,type:i}=t;if(!Hw((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return Wfe()&&n&&Ufe.has(n)&&(n!=="transform"||!l)&&!a&&!r&&o!=="mirror"&&s!==0&&i!=="inertia"}const qfe=40;class Kfe extends hx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:i="loop",keyframes:a,name:l,motionValue:c,element:d,...u}){var p;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=dn.now();const h={autoplay:e,delay:n,type:r,repeat:o,repeatDelay:s,repeatType:i,name:l,motionValue:c,element:d,...u},f=(d==null?void 0:d.KeyframeResolver)||px;this.keyframeResolver=new f(a,(g,b,v)=>this.onKeyframesResolved(g,b,h,!v),l,c,d),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,o){this.keyframeResolver=void 0;const{name:s,type:i,velocity:a,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=dn.now(),zfe(e,s,i,a)||((Do.instantAnimations||!l)&&(d==null||d(ux(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const h={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>qfe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},f=!c&&Gfe(h)?new Hfe({...h,element:h.motionValue.owner.current}):new fx(h);f.finished.then(()=>this.notifyFinished()).catch(qn),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),_fe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const gx=(t,e,n,r={},o,s)=>i=>{const a=ox(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-jr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:o};Rhe(a)||Object.assign(d,Ahe(t,d)),d.duration&&(d.duration=jr(d.duration)),d.repeatDelay&&(d.repeatDelay=jr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let u=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(u=!0)),(Do.instantAnimations||Do.skipAnimations)&&(u=!0,d.duration=0,d.delay=0),d.allowFlatten=!a.type&&!a.ease,u&&!s&&e.get()!==void 0){const h=Che(d.keyframes,a);if(h!==void 0){qe.update(()=>{d.onUpdate(h),d.onComplete()});return}}return a.isSync?new fx(d):new Kfe(d)},hO=new Set(["width","height","top","left","right","bottom",...gl]);function Yfe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function fO(t,e,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:i,...a}=e;r&&(s=r);const l=[],c=o&&t.animationState&&t.animationState.getState()[o];for(const d in a){const u=t.getValue(d,t.latestValues[d]??null),h=a[d];if(h===void 0||c&&Yfe(c,d))continue;const f={delay:n,...ox(s||{},d)},p=u.get();if(p!==void 0&&!u.isAnimating&&!Array.isArray(h)&&h===p&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const v=V4(t);if(v){const x=window.MotionHandoffAnimation(v,d,qe);x!==null&&(f.startTime=x,g=!0)}}h0(t,d),u.start(gx(d,u,h,t.shouldReduceMotion&&hO.has(d)?{type:!1}:f,t,g));const b=u.animation;b&&l.push(b)}return i&&Promise.all(l).then(()=>{qe.update(()=>{i&&whe(t,i)})}),l}function S0(t,e,n={}){var l;const r=vd(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const s=r?()=>Promise.all(fO(t,r,n)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=o;return Jfe(t,e,d+c,u,h,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[c,d]=a==="beforeChildren"?[s,i]:[i,s];return c().then(()=>d())}else return Promise.all([s(),i(n.delay)])}function Jfe(t,e,n=0,r=0,o=1,s){const i=[],a=(t.variantChildren.size-1)*r,l=o===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Zfe).forEach((c,d)=>{c.notify("AnimationStart",e),i.push(S0(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(i)}function Zfe(t,e){return t.sortNodePosition(e)}function Xfe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(s=>S0(t,s,n));r=Promise.all(o)}else if(typeof e=="string")r=S0(t,e,n);else{const o=typeof e=="function"?vd(t,e,n.custom):e;r=Promise.all(fO(t,o,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function pO(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Qfe=zw.length;function mO(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?mO(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Qfe;n++){const r=zw[n],o=t.props[r];(gd(o)||o===!1)&&(e[r]=o)}return e}const epe=[...Fw].reverse(),tpe=Fw.length;function npe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Xfe(t,n,r)))}function rpe(t){let e=npe(t),n=zT(),r=!0;const o=l=>(c,d)=>{var h;const u=vd(t,d,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(u){const{transition:f,transitionEnd:p,...g}=u;c={...c,...g,...p}}return c};function s(l){e=l(t)}function i(l){const{props:c}=t,d=mO(t.parent)||{},u=[],h=new Set;let f={},p=1/0;for(let b=0;b<tpe;b++){const v=epe[b],x=n[v],w=c[v]!==void 0?c[v]:d[v],k=gd(w),C=v===l?x.isActive:null;C===!1&&(p=b);let S=w===d[v]&&w!==c[v]&&k;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...f},!x.isActive&&C===null||!w&&!x.prevProp||Rm(w)||typeof w=="boolean")continue;const T=ope(x.prevProp,w);let E=T||v===l&&x.isActive&&!S&&k||b>p&&k,M=!1;const R=Array.isArray(w)?w:[w];let P=R.reduce(o(v),{});C===!1&&(P={});const{prevResolvedValues:L={}}=x,$={...L,...P},F=N=>{E=!0,h.has(N)&&(M=!0,h.delete(N)),x.needsAnimating[N]=!0;const B=t.getValue(N);B&&(B.liveStyle=!1)};for(const N in $){const B=P[N],H=L[N];if(f.hasOwnProperty(N))continue;let Z=!1;u0(B)&&u0(H)?Z=!pO(B,H):Z=B!==H,Z?B!=null?F(N):h.add(N):B!==void 0&&h.has(N)?F(N):x.protectedKeys[N]=!0}x.prevProp=w,x.prevResolvedValues=P,x.isActive&&(f={...f,...P}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(S&&T)||M)&&u.push(...R.map(N=>({animation:N,options:{type:v}})))}if(h.size){const b={};if(typeof c.initial!="boolean"){const v=vd(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(b.transition=v.transition)}h.forEach(v=>{const x=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),b[v]=x??null}),u.push({animation:b})}let g=!!u.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(u):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)==null||u.forEach(h=>{var f;return(f=h.animationState)==null?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=i(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:i,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=zT(),r=!0}}}function ope(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!pO(e,t):!1}function Ys(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zT(){return{animate:Ys(!0),whileInView:Ys(),whileHover:Ys(),whileTap:Ys(),whileDrag:Ys(),whileFocus:Ys(),exit:Ys()}}class Ws{constructor(e){this.isMounted=!1,this.node=e}update(){}}class spe extends Ws{constructor(e){super(e),e.animationState||(e.animationState=rpe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let ipe=0;class ape extends Ws{constructor(){super(...arguments),this.id=ipe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const lpe={animation:{Feature:spe},exit:{Feature:ape}};function kd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const yx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function du(t){return{point:{x:t.pageX,y:t.pageY}}}const cpe=t=>e=>yx(e)&&t(e,du(e));function Sc(t,e,n,r){return kd(t,e,cpe(n),r)}function gO({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function dpe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function upe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const yO=1e-4,hpe=1-yO,fpe=1+yO,bO=.01,ppe=0-bO,mpe=0+bO;function qt(t){return t.max-t.min}function gpe(t,e,n){return Math.abs(t-e)<=n}function UT(t,e,n,r=.5){t.origin=r,t.originPoint=We(e.min,e.max,t.origin),t.scale=qt(n)/qt(e),t.translate=We(n.min,n.max,t.origin)-t.originPoint,(t.scale>=hpe&&t.scale<=fpe||isNaN(t.scale))&&(t.scale=1),(t.translate>=ppe&&t.translate<=mpe||isNaN(t.translate))&&(t.translate=0)}function Tc(t,e,n,r){UT(t.x,e.x,n.x,r?r.originX:void 0),UT(t.y,e.y,n.y,r?r.originY:void 0)}function WT(t,e,n){t.min=n.min+e.min,t.max=t.min+qt(e)}function ype(t,e,n){WT(t.x,e.x,n.x),WT(t.y,e.y,n.y)}function GT(t,e,n){t.min=e.min-n.min,t.max=t.min+qt(e)}function Ec(t,e,n){GT(t.x,e.x,n.x),GT(t.y,e.y,n.y)}const qT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ya=()=>({x:qT(),y:qT()}),KT=()=>({min:0,max:0}),tt=()=>({x:KT(),y:KT()});function Ln(t){return[t("x"),t("y")]}function vy(t){return t===void 0||t===1}function T0({scale:t,scaleX:e,scaleY:n}){return!vy(t)||!vy(e)||!vy(n)}function Qs(t){return T0(t)||vO(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vO(t){return YT(t.x)||YT(t.y)}function YT(t){return t&&t!=="0%"}function sp(t,e,n){const r=t-n,o=e*r;return n+o}function JT(t,e,n,r,o){return o!==void 0&&(t=sp(t,o,r)),sp(t,n,r)+e}function E0(t,e=0,n=1,r,o){t.min=JT(t.min,e,n,r,o),t.max=JT(t.max,e,n,r,o)}function wO(t,{x:e,y:n}){E0(t.x,e.translate,e.scale,e.originPoint),E0(t.y,n.translate,n.scale,n.originPoint)}const ZT=.999999999999,XT=1.0000000000001;function bpe(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let s,i;for(let a=0;a<o;a++){s=n[a],i=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&va(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,wO(t,i)),r&&Qs(s.latestValues)&&va(t,s.latestValues))}e.x<XT&&e.x>ZT&&(e.x=1),e.y<XT&&e.y>ZT&&(e.y=1)}function ba(t,e){t.min=t.min+e,t.max=t.max+e}function QT(t,e,n,r,o=.5){const s=We(t.min,t.max,o);E0(t,e,n,s,r)}function va(t,e){QT(t.x,e.x,e.scaleX,e.scale,e.originX),QT(t.y,e.y,e.scaleY,e.scale,e.originY)}function xO(t,e){return gO(upe(t.getBoundingClientRect(),e))}function vpe(t,e,n){const r=xO(t,n),{scroll:o}=e;return o&&(ba(r.x,o.offset.x),ba(r.y,o.offset.y)),r}const kO=({current:t})=>t?t.ownerDocument.defaultView:null,eE=(t,e)=>Math.abs(t-e);function wpe(t,e){const n=eE(t.x,e.x),r=eE(t.y,e.y);return Math.sqrt(n**2+r**2)}class CO{constructor(e,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=xy(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=wpe(u.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=u,{timestamp:g}=xt;this.history.push({...p,timestamp:g});const{onStart:b,onMove:v}=this.handlers;h||(b&&b(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=wy(h,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=xy(u.type==="pointercancel"?this.lastMoveEventInfo:wy(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,b),p&&p(u,b)},!yx(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const i=du(e),a=wy(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=xt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,xy(a,this.history)),this.removeListeners=lu(Sc(this.contextWindow,"pointermove",this.handlePointerMove),Sc(this.contextWindow,"pointerup",this.handlePointerUp),Sc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ns(this.updatePoint)}}function wy(t,e){return e?{point:e(t.point)}:t}function tE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function xy({point:t},e){return{point:t,delta:tE(t,SO(e)),offset:tE(t,xpe(e)),velocity:kpe(e,.1)}}function xpe(t){return t[0]}function SO(t){return t[t.length-1]}function kpe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=SO(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>jr(e)));)n--;if(!r)return{x:0,y:0};const s=Br(o.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const i={x:(o.x-r.x)/s,y:(o.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Cpe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?We(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?We(n,t,r.max):Math.min(t,n)),t}function nE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Spe(t,{top:e,left:n,bottom:r,right:o}){return{x:nE(t.x,n,o),y:nE(t.y,e,r)}}function rE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Tpe(t,e){return{x:rE(t.x,e.x),y:rE(t.y,e.y)}}function Epe(t,e){let n=.5;const r=qt(t),o=qt(e);return o>r?n=xd(e.min,e.max-r,t.min):r>o&&(n=xd(t.min,t.max-o,e.min)),Io(0,1,n)}function Mpe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const M0=.35;function Ape(t=M0){return t===!1?t=0:t===!0&&(t=M0),{x:oE(t,"left","right"),y:oE(t,"top","bottom")}}function oE(t,e,n){return{min:sE(t,e),max:sE(t,n)}}function sE(t,e){return typeof t=="number"?t:t[e]||0}const tr={x:!1,y:!1};function TO(){return tr.x||tr.y}function Rpe(t){return t==="x"||t==="y"?tr[t]?null:(tr[t]=!0,()=>{tr[t]=!1}):tr.x||tr.y?null:(tr.x=tr.y=!0,()=>{tr.x=tr.y=!1})}const _pe=new WeakMap;class Ppe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(du(d).point)},s=(d,u)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Rpe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ln(b=>{let v=this.getAxisMotionValue(b).get()||0;if(Lr.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[b];w&&(v=qt(w)*(parseFloat(v)/100))}}this.originPoint[b]=v}),p&&qe.postRender(()=>p(d,u)),h0(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(d,u)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=u;if(f&&this.currentDirection===null){this.currentDirection=Dpe(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,b),this.updateAxis("y",u.point,b),this.visualElement.render(),g&&g(d,u)},a=(d,u)=>this.stop(d,u),l=()=>Ln(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)==null?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new CO(e,{onSessionStart:o,onStart:s,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:kO(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&qe.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!Zu(e,o,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=Cpe(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,o=this.constraints;e&&ma(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Spe(r.layoutBox,e):this.constraints=!1,this.elastic=Ape(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ln(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Mpe(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ma(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=vpe(r,o.root,this.visualElement.getTransformPagePoint());let i=Tpe(o.layout.layoutBox,s);if(n){const a=n(dpe(i));this.hasMutatedConstraints=!!a,a&&(i=gO(a))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ln(d=>{if(!Zu(d,n,this.currentDirection))return;let u=l&&l[d]||{};i&&(u={min:0,max:0});const h=o?200:1e6,f=o?40:1e7,p={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return h0(this.visualElement,e),r.start(gx(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ln(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ln(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ln(n=>{const{drag:r}=this.getProps();if(!Zu(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:a}=o.layout.layoutBox[n];s.set(e[n]-We(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ma(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Ln(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();o[i]=Epe({min:l,max:l},this.constraints[i])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ln(i=>{if(!Zu(i,e,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set(We(l,c,o[i]))})}addListeners(){if(!this.visualElement.current)return;_pe.set(this.visualElement,this);const e=this.visualElement.current,n=Sc(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ma(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),qe.read(r);const i=kd(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ln(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=l[d].translate,u.set(u.get()+l[d].translate))}),this.visualElement.render())});return()=>{i(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:i=M0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function Zu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Dpe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Ipe extends Ws{constructor(e){super(e),this.removeGroupControls=qn,this.removeListeners=qn,this.controls=new Ppe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const iE=t=>(e,n)=>{t&&qe.postRender(()=>t(e,n))};class Npe extends Ws{constructor(){super(...arguments),this.removePointerDownListener=qn}onPointerDown(e){this.session=new CO(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kO(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:iE(e),onStart:iE(n),onMove:r,onEnd:(s,i)=>{delete this.session,o&&qe.postRender(()=>o(s,i))}}}mount(){this.removePointerDownListener=Sc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function aE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Hl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=aE(t,e.target.x),r=aE(t,e.target.y);return`${n}% ${r}%`}},Ope={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=Os.parse(t);if(o.length>5)return r;const s=Os.createTransformer(t),i=typeof o[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;o[0+i]/=a,o[1+i]/=l;const c=We(a,l,.5);return typeof o[2+i]=="number"&&(o[2+i]/=c),typeof o[3+i]=="number"&&(o[3+i]/=c),s(o)}};class Lpe extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:s}=e;Kue(jpe),s&&(n.group&&n.group.add(s),r&&r.register&&o&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Sh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:s}=this.props,{projection:i}=r;return i&&(i.isPresent=s,o||e.layoutDependency!==n||n===void 0||e.isPresent!==s?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||qe.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ww.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function EO(t){const[e,n]=x4(),r=y.useContext(jw);return m.jsx(Lpe,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(M4),isPresent:e,safeToRemove:n})}const jpe={borderRadius:{...Hl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hl,borderTopRightRadius:Hl,borderBottomLeftRadius:Hl,borderBottomRightRadius:Hl,boxShadow:Ope};function Bpe(t,e,n){const r=jt(t)?t:qa(t);return r.start(gx("",r,e,n)),r.animation}const Vpe=(t,e)=>t.depth-e.depth;class $pe{constructor(){this.children=[],this.isDirty=!1}add(e){tx(this.children,e),this.isDirty=!0}remove(e){nx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Vpe),this.isDirty=!1,this.children.forEach(e)}}function Hpe(t,e){const n=dn.now(),r=({timestamp:o})=>{const s=o-n;s>=e&&(Ns(r),t(s-e))};return qe.setup(r,!0),()=>Ns(r)}const MO=["TopLeft","TopRight","BottomLeft","BottomRight"],Fpe=MO.length,lE=t=>typeof t=="string"?parseFloat(t):t,cE=t=>typeof t=="number"||re.test(t);function zpe(t,e,n,r,o,s){o?(t.opacity=We(0,n.opacity??1,Upe(r)),t.opacityExit=We(e.opacity??1,0,Wpe(r))):s&&(t.opacity=We(e.opacity??1,n.opacity??1,r));for(let i=0;i<Fpe;i++){const a=`border${MO[i]}Radius`;let l=dE(e,a),c=dE(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||cE(l)===cE(c)?(t[a]=Math.max(We(lE(l),lE(c),r),0),(Lr.test(c)||Lr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=We(e.rotate||0,n.rotate||0,r))}function dE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Upe=AO(0,.5,nO),Wpe=AO(.5,.95,qn);function AO(t,e,n){return r=>r<t?0:r>e?1:n(xd(t,e,r))}function uE(t,e){t.min=e.min,t.max=e.max}function In(t,e){uE(t.x,e.x),uE(t.y,e.y)}function hE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function fE(t,e,n,r,o){return t-=e,t=sp(t,1/n,r),o!==void 0&&(t=sp(t,1/o,r)),t}function Gpe(t,e=0,n=1,r=.5,o,s=t,i=t){if(Lr.test(e)&&(e=parseFloat(e),e=We(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=We(s.min,s.max,r);t===s&&(a-=e),t.min=fE(t.min,e,n,a,o),t.max=fE(t.max,e,n,a,o)}function pE(t,e,[n,r,o],s,i){Gpe(t,e[n],e[r],e[o],e.scale,s,i)}const qpe=["x","scaleX","originX"],Kpe=["y","scaleY","originY"];function mE(t,e,n,r){pE(t.x,e,qpe,n?n.x:void 0,r?r.x:void 0),pE(t.y,e,Kpe,n?n.y:void 0,r?r.y:void 0)}function gE(t){return t.translate===0&&t.scale===1}function RO(t){return gE(t.x)&&gE(t.y)}function yE(t,e){return t.min===e.min&&t.max===e.max}function Ype(t,e){return yE(t.x,e.x)&&yE(t.y,e.y)}function bE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function _O(t,e){return bE(t.x,e.x)&&bE(t.y,e.y)}function vE(t){return qt(t.x)/qt(t.y)}function wE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Jpe{constructor(){this.members=[]}add(e){tx(this.members,e),e.scheduleRender()}remove(e){if(nx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zpe(t,e,n){let r="";const o=t.x.translate/e.x,s=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((o||s||i)&&(r=`translate3d(${o}px, ${s}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:u,rotateY:h,skewX:f,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}function PO(t){return w4(t)&&"ownerSVGElement"in t}function Xpe(t){return PO(t)&&t.tagName==="svg"}const ky=["","X","Y","Z"],Qpe={visibility:"hidden"},eme=1e3;let tme=0;function Cy(t,e,n,r){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),r&&(r[t]=0))}function DO(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=V4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",qe,!(o||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&DO(r)}function IO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},a=e==null?void 0:e()){this.id=tme++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ome),this.nodes.forEach(cme),this.nodes.forEach(dme),this.nodes.forEach(sme)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new $pe)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new rx),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=PO(i)&&!Xpe(i),this.instance=i;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d;const u=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Hpe(u,250),Sh.hasAnimatedSinceResize&&(Sh.hasAnimatedSinceResize=!1,this.nodes.forEach(kE))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||mme,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=c.getProps(),v=!this.targetLayout||!_O(this.targetLayout,f),x=!u&&h;if(this.options.layoutRoot||this.resumeFrom||x||u&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const w={...ox(p,"layout"),onPlay:g,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else u||kE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ns(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ume),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&DO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xE);return}this.isUpdating||this.nodes.forEach(ame),this.isUpdating=!1,this.nodes.forEach(lme),this.nodes.forEach(nme),this.nodes.forEach(rme),this.clearAllSnapshots();const a=dn.now();xt.delta=Io(0,1e3/60,a-xt.timestamp),xt.timestamp=a,xt.isProcessing=!0,my.update.process(xt),my.preRender.process(xt),my.render.process(xt),xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ww.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ime),this.sharedNodes.forEach(hme)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qt(this.snapshot.measuredBox.x)&&!qt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!RO(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;i&&this.instance&&(a||Qs(this.latestValues)||d)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),gme(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:i}=this.options;if(!i)return tt();const a=i.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(yme))){const{scroll:d}=this.root;d&&(ba(a.x,d.offset.x),ba(a.y,d.offset.y))}return a}removeElementScroll(i){var l;const a=tt();if(In(a,i),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;d!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&In(a,i),ba(a.x,u.offset.x),ba(a.y,u.offset.y))}return a}applyTransform(i,a=!1){const l=tt();In(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&va(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Qs(d.latestValues)&&va(l,d.latestValues)}return Qs(this.latestValues)&&va(l,this.latestValues),l}removeTransform(i){const a=tt();In(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Qs(c.latestValues))continue;T0(c.latestValues)&&c.updateSnapshot();const d=tt(),u=c.measurePageBox();In(d,u),mE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Qs(this.latestValues)&&mE(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:u}=this.options;if(!(!this.layout||!(d||u))){if(this.resolvedRelativeTargetAt=xt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tt(),this.relativeTargetOrigin=tt(),Ec(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tt(),this.targetWithTransforms=tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ype(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):In(this.target,this.layout.layoutBox),wO(this.target,this.targetDelta)):In(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tt(),this.relativeTargetOrigin=tt(),Ec(this.relativeTargetOrigin,this.target,f.target),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||T0(this.parent.latestValues)||vO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const i=this.getLead(),a=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===xt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;In(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,h=this.treeScale.y;bpe(this.layoutCorrected,this.treeScale,this.path,a),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=tt());const{target:f}=i;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hE(this.prevProjectionDelta.x,this.projectionDelta.x),hE(this.prevProjectionDelta.y,this.projectionDelta.y)),Tc(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==h||!wE(this.projectionDelta.x,this.prevProjectionDelta.x)||!wE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ya(),this.projectionDelta=ya(),this.projectionDeltaWithTransform=ya()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},u=ya();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=tt(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,b=this.getStack(),v=!b||b.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(pme));this.animationProgress=0;let w;this.mixTargetDelta=k=>{const C=k/1e3;CE(u.x,i.x,C),CE(u.y,i.y,C),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ec(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fme(this.relativeTarget,this.relativeTargetOrigin,h,C),w&&Ype(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=tt()),In(w,this.relativeTarget)),g&&(this.animationValues=d,zpe(d,c,this.latestValues,C,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(!1),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(!1),this.pendingAnimation&&(Ns(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{Sh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qa(0)),this.currentAnimation=Bpe(this.motionValue,[0,1e3],{...i,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),i.onUpdate&&i.onUpdate(d)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eme),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&NO(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||tt();const u=qt(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+u;const h=qt(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}In(a,l),va(a,d),Tc(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Jpe),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var a;const{layoutId:i}=this.options;return i?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:i}=this.options;return i?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Cy("z",i,c,this.animationValues);for(let d=0;d<ky.length;d++)Cy(`rotate${ky[d]}`,i,c,this.animationValues),Cy(`skew${ky[d]}`,i,c,this.animationValues);i.render();for(const d in c)i.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);i.scheduleRender()}getProjectionStyles(i){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Qpe;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=kh(i==null?void 0:i.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=kh(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Qs(this.latestValues)&&(f.transform=l?l({},""):"none",this.hasProjected=!1),f}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=Zpe(this.projectionDeltaWithTransform,this.treeScale,d),l&&(a.transform=l(d,a.transform));const{x:u,y:h}=this.projectionDelta;a.transformOrigin=`${u.origin*100}% ${h.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const f in yd){if(d[f]===void 0)continue;const{correct:p,applyTo:g,isCSSVariable:b}=yd[f],v=a.transform==="none"?d[f]:p(d[f],c);if(g){const x=g.length;for(let w=0;w<x;w++)a[g[w]]=v}else b?this.options.visualElement.renderState.vars[f]=v:a[f]=v}return this.options.layoutId&&(a.pointerEvents=c===this?kh(i==null?void 0:i.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)==null?void 0:a.stop(!1)}),this.root.nodes.forEach(xE),this.root.sharedNodes.clear()}}}function nme(t){t.updateLayout()}function rme(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:s}=t.options,i=e.source!==t.layout.source;s==="size"?Ln(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],f=qt(h);h.min=r[u].min,h.max=h.min+f}):NO(s,e.layoutBox,r)&&Ln(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],f=qt(r[u]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+f)});const a=ya();Tc(a,r,e.layoutBox);const l=ya();i?Tc(l,t.applyTransform(o,!0),e.measuredBox):Tc(l,r,e.layoutBox);const c=!RO(a);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:f}=u;if(h&&f){const p=tt();Ec(p,e.layoutBox,h.layoutBox);const g=tt();Ec(g,r,f.layoutBox),_O(p,g)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function ome(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function sme(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ime(t){t.clearSnapshot()}function xE(t){t.clearMeasurements()}function ame(t){t.isLayoutDirty=!1}function lme(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function kE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function cme(t){t.resolveTargetDelta()}function dme(t){t.calcProjection()}function ume(t){t.resetSkewAndRotation()}function hme(t){t.removeLeadSnapshot()}function CE(t,e,n){t.translate=We(e.translate,0,n),t.scale=We(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function SE(t,e,n,r){t.min=We(e.min,n.min,r),t.max=We(e.max,n.max,r)}function fme(t,e,n,r){SE(t.x,e.x,n.x,r),SE(t.y,e.y,n.y,r)}function pme(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const mme={duration:.45,ease:[.4,0,.1,1]},TE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),EE=TE("applewebkit/")&&!TE("chrome/")?Math.round:qn;function ME(t){t.min=EE(t.min),t.max=EE(t.max)}function gme(t){ME(t.x),ME(t.y)}function NO(t,e,n){return t==="position"||t==="preserve-aspect"&&!gpe(vE(e),vE(n),.2)}function yme(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const bme=IO({attachResizeListener:(t,e)=>kd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sy={current:void 0},OO=IO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Sy.current){const t=new bme({});t.mount(window),t.setOptions({layoutScroll:!0}),Sy.current=t}return Sy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),vme={pan:{Feature:Npe},drag:{Feature:Ipe,ProjectionNode:OO,MeasureLayout:EO}};function wme(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const o=(n==null?void 0:n[t])??r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function LO(t,e){const n=wme(t),r=new AbortController,o={passive:!0,...e,signal:r.signal};return[n,o,()=>r.abort()]}function AE(t){return!(t.pointerType==="touch"||TO())}function xme(t,e,n={}){const[r,o,s]=LO(t,n),i=a=>{if(!AE(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const d=u=>{AE(u)&&(c(u),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,o)};return r.forEach(a=>{a.addEventListener("pointerenter",i,o)}),s}function RE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,s=r[o];s&&qe.postRender(()=>s(e,du(e)))}class kme extends Ws{mount(){const{current:e}=this.node;e&&(this.unmount=xme(e,(n,r)=>(RE(this.node,r,"Start"),o=>RE(this.node,o,"End"))))}unmount(){}}class Cme extends Ws{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lu(kd(this.node.current,"focus",()=>this.onFocus()),kd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const jO=(t,e)=>e?t===e?!0:jO(t,e.parentElement):!1,Sme=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Tme(t){return Sme.has(t.tagName)||t.tabIndex!==-1}const Th=new WeakSet;function _E(t){return e=>{e.key==="Enter"&&t(e)}}function Ty(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Eme=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=_E(()=>{if(Th.has(n))return;Ty(n,"down");const o=_E(()=>{Ty(n,"up")}),s=()=>Ty(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function PE(t){return yx(t)&&!TO()}function Mme(t,e,n={}){const[r,o,s]=LO(t,n),i=a=>{const l=a.currentTarget;if(!PE(a))return;Th.add(l);const c=e(l,a),d=(f,p)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",h),Th.has(l)&&Th.delete(l),PE(f)&&typeof c=="function"&&c(f,{success:p})},u=f=>{d(f,l===window||l===document||n.useGlobalTarget||jO(l,f.target))},h=f=>{d(f,!1)};window.addEventListener("pointerup",u,o),window.addEventListener("pointercancel",h,o)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",i,o),Hw(a)&&(a.addEventListener("focus",c=>Eme(c,o)),!Tme(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function DE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),s=r[o];s&&qe.postRender(()=>s(e,du(e)))}class Ame extends Ws{mount(){const{current:e}=this.node;e&&(this.unmount=Mme(e,(n,r)=>(DE(this.node,r,"Start"),(o,{success:s})=>DE(this.node,o,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const A0=new WeakMap,Ey=new WeakMap,Rme=t=>{const e=A0.get(t.target);e&&e(t)},_me=t=>{t.forEach(Rme)};function Pme({root:t,...e}){const n=t||document;Ey.has(n)||Ey.set(n,{});const r=Ey.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(_me,{root:t,...e})),r[o]}function Dme(t,e,n){const r=Pme(e);return A0.set(t,n),r.observe(t),()=>{A0.delete(t),r.unobserve(t)}}const Ime={some:0,all:1};class Nme extends Ws{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:s}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:Ime[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),h=c?d:u;h&&h(l)};return Dme(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Ome(e,n))&&this.startObserver()}unmount(){}}function Ome({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Lme={inView:{Feature:Nme},tap:{Feature:Ame},focus:{Feature:Cme},hover:{Feature:kme}},jme={layout:{ProjectionNode:OO,MeasureLayout:EO}},R0={current:null},BO={current:!1};function Bme(){if(BO.current=!0,!!Vw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>R0.current=t.matches;t.addListener(e),e()}else R0.current=!1}const Vme=new WeakMap;function $me(t,e,n){for(const r in e){const o=e[r],s=n[r];if(jt(o))t.addValue(r,o);else if(jt(s))t.addValue(r,qa(o,{owner:t}));else if(s!==o)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=t.getStaticValue(r);t.addValue(r,qa(i!==void 0?i:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const VO=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),$O=t=>/^0[^.\s]+$/u.test(t),Hme={test:t=>t==="auto",parse:t=>t},HO=t=>e=>e.test(t),FO=[bl,re,Lr,ts,Jue,Yue,Hme],IE=t=>FO.find(HO(t)),Fme=[...FO,Ot,Os],zme=t=>Fme.find(HO(t)),Ume=new Set(["brightness","contrast","saturate","opacity"]);function Wme(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(sx)||[];if(!r)return t;const o=n.replace(r,"");let s=Ume.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+o+")"}const Gme=/\b([a-z-]*)\(.*?\)/gu,_0={...Os,getAnimatableNone:t=>{const e=t.match(Gme);return e?e.map(Wme).join(" "):t}},qme={...Yw,color:Ot,backgroundColor:Ot,outlineColor:Ot,fill:Ot,stroke:Ot,borderColor:Ot,borderTopColor:Ot,borderRightColor:Ot,borderBottomColor:Ot,borderLeftColor:Ot,filter:_0,WebkitFilter:_0},zO=t=>qme[t];function UO(t,e){let n=zO(t);return n!==_0&&(n=Os),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const NE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Kme{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=px,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=dn.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,qe.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=_m(n),this.isVariantNode=T4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in u){const f=u[h];l[h]!==void 0&&jt(f)&&f.set(l[h],!1)}}mount(e){this.current=e,Vme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),BO.current||Bme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:R0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ns(this.notifyUpdate),Ns(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=yl.has(e);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&qe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ga){const n=Ga[e];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[e]&&o&&r(this.props)&&(this.features[e]=new o(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<NE.length;r++){const o=NE[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,i=e[s];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=$me(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=qa(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(VO(r)||$O(r))?r=parseFloat(r):!zme(r)&&Os.test(n)&&(r=UO(e,n)),this.setBaseTarget(e,jt(r)?r.get():r)),jt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=Qw(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);i&&(r=i[e])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!jt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new rx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}const Yme=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Jme(t){const e=Yme.exec(t);if(!e)return[,];const[,n,r,o]=e;return[`--${n??r}`,o]}function WO(t,e,n=1){const[r,o]=Jme(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const i=s.trim();return VO(i)?parseFloat(i):i}return Kw(o)?WO(o,e,n+1):o}function Zme(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$O(t):!0}const Xme=new Set(["auto","none","0"]);function Qme(t,e,n){let r=0,o;for(;r<t.length&&!o;){const s=t[r];typeof s=="string"&&!Xme.has(s)&&wd(s).values.length&&(o=t[r]),r++}if(o&&n)for(const s of e)t[s]=UO(n,o)}class ege extends px{constructor(e,n,r,o,s){super(e,n,r,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Kw(c))){const d=WO(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!hO.has(r)||e.length!==2)return;const[o,s]=e,i=IE(o),a=IE(s);if(i!==a)if(VT(i)&&VT(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else xi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let o=0;o<e.length;o++)(e[o]===null||Zme(e[o]))&&r.push(o);r.length&&Qme(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(r,o).jump(o,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const s=r.length-1,i=r[s];r[s]=xi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class GO extends Kme{constructor(){super(...arguments),this.KeyframeResolver=ege}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function qO(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function tge(t){return window.getComputedStyle(t)}class nge extends GO{constructor(){super(...arguments),this.type="html",this.renderInstance=qO}readValueFromInstance(e,n){var r;if(yl.has(n))return(r=this.projection)!=null&&r.isProjecting?v0(n):Tfe(e,n);{const o=tge(e),s=(qw(n)?o.getPropertyValue(n):o[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return xO(e,n)}build(e,n,r){Jw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ex(e,n,r)}}const KO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rge(t,e,n,r){qO(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(KO.has(o)?o:Uw(o),e.attrs[o])}class oge extends GO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(yl.has(n)){const r=zO(n);return r&&r.default||0}return n=KO.has(n)?n:Uw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return j4(e,n,r)}build(e,n,r){I4(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,o){rge(e,n,r,o)}mount(e){this.isSVGTag=O4(e.tagName),super.mount(e)}}const sge=(t,e)=>Xw(t)?new oge(e):new nge(e,{allowProjection:t!==y.Fragment}),ige=phe({...lpe,...Lme,...vme,...jme},sge),age=Nue(ige),lge="_container_jw0vg_2",cge="_title_jw0vg_8",dge="_player_jw0vg_12",uge="_currentContainer_jw0vg_17",hge="_icon_jw0vg_30",aa={container:lge,title:cge,player:dge,currentContainer:uge,icon:hge},fge=t=>new Date(t.getTime()-24*60*60*1e3),pge=t=>new Date(t.getTime()+24*60*60*1e3),mge=({date:t,onDateChange:e})=>{const n=_t(),o=new Date(t).toLocaleDateString()===new Date().toLocaleDateString()?n.formatMessage({id:"checklist-calendar.today",defaultMessage:"Today"}):new Date(t).toLocaleDateString();return m.jsxs("div",{className:aa.container,children:[m.jsx(ie.Title,{level:4,noMargin:!0,className:aa.title,children:n.formatMessage({id:"checklist-calendar.title",defaultMessage:"Tasks"})}),m.jsxs("div",{className:aa.player,children:[m.jsx(Q,{onClick:()=>e(fge(t)),width:30,icon:"basil:skip-prev-outline",className:aa.icon}),m.jsx(ie.Text,{className:aa.currentContainer,onClick:()=>e(new Date),children:o}),m.jsx(Q,{onClick:()=>e(pge(t)),width:30,icon:"basil:skip-next-outline",className:aa.icon})]})]})},gge="_checklistItem_1ge4q_2",yge="_lastChecklistItem_1ge4q_17",bge="_checkbox_1ge4q_21",vge="_title_1ge4q_26",Fl={checklistItem:gge,lastChecklistItem:yge,checkbox:bge,title:vge},wge=({date:t})=>{const{checklistByGivingDateIds:e,allChecklist:n,getChecklistByGivingDate:r,updateChecklist:o}=up(),{checklistTemplate:s}=Ss(),i=vr();return D.useEffect(()=>{r({date:t})},[t]),m.jsx("div",{className:Fl.container,children:e.map((a,l)=>{const c=n[a],d=s[c.checklistTemplateId];return m.jsxs("div",{className:le(Fl.checklistItem,l===e.length-1&&Fl.lastChecklistItem),children:[m.jsx(Q,{color:(d==null?void 0:d.avatar.color)||"#8A8A8A",width:32,height:32,icon:d==null?void 0:d.avatar.name}),m.jsx(ie.Text,{onClick:()=>i(`/task/${c.checklistTemplateId}?currentDay=${t.toISOString()}${c.clientOnly?"":`&checklistId=${c.id}`}`),className:Fl.title,children:d==null?void 0:d.title}),m.jsx(fw,{checked:!!(c!=null&&c.completedAt),className:Fl.checkbox,onChange:u=>{u.stopPropagation(),o({...c,completedAt:u.target.checked?new Date().toISOString():void 0})}})]},a)})})},xge="_addChecklist_2trfx_1",kge={addChecklist:xge},Cge=()=>{const t=_t(),e=vr();return m.jsx("div",{className:kge.addChecklist,children:m.jsx(ht,{onClick:()=>{e("/create-checklist")},type:"dash",size:"md",block:!0,children:t.formatMessage({id:"checklist-create.label-create-checklist",defaultMessage:"Create Task"})})})};function Sge(t){return m.jsx("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",...t,children:m.jsx("g",{id:"pause_circle_outline_24px",children:m.jsx("path",{id:"icon/av/pause_circle_outline_24px","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 24C4 12.96 12.96 4 24 4C35.04 4 44 12.96 44 24C44 35.04 35.04 44 24 44C12.96 44 4 35.04 4 24ZM22 30C22 31.1 21.1 32 20 32C18.9 32 18 31.1 18 30V18C18 16.9 18.9 16 20 16C21.1 16 22 16.9 22 18V30ZM24 40C15.18 40 8 32.82 8 24C8 15.18 15.18 8 24 8C32.82 8 40 15.18 40 24C40 32.82 32.82 40 24 40ZM30 30C30 31.1 29.1 32 28 32C26.9 32 26 31.1 26 30V18C26 16.9 26.9 16 28 16C29.1 16 30 16.9 30 18V30Z",fill:"white"})})})}function Tge(t){return m.jsx("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",...t,children:m.jsx("g",{id:"play_circle_filled_24px",children:m.jsx("path",{id:"icon/av/play_circle_filled_24px","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 24C4 12.96 12.96 4 24 4C35.04 4 44 12.96 44 24C44 35.04 35.04 44 24 44C12.96 44 4 35.04 4 24ZM21.6 16.2C20.94 15.7 20 16.18 20 17V31C20 31.82 20.94 32.3 21.6 31.8L30.94 24.8C31.48 24.4 31.48 23.6 30.94 23.2L21.6 16.2Z",fill:"white"})})})}const Ege="_container_n2rya_2",Mge="_body_n2rya_6",Age="_icon_n2rya_18",Rge="_progressContainer_n2rya_22",_ge="_progress_n2rya_22",Pge="_pomodoroPhase_n2rya_31",Dge="_pomodoroPhaseText_n2rya_39",Ige="_loadStatus_n2rya_52",uo={container:Ege,body:Mge,icon:Age,progressContainer:Rge,progress:_ge,pomodoroPhase:Pge,pomodoroPhaseText:Dge,loadStatus:Ige},Nge={"date-a-live-season-1-ost.mp3":{name:"date a live",id:"date-a-live-season-1-ost.mp3"},"rockabye-baby-twinkle-twinkle.mp3":{name:"rockabye baby twinkle twinkle",id:"rockabye-baby-twinkle-twinkle.mp3"},"twinkle-twinkle-little-star-acoustic-guitar.mp3":{name:"twinkle twinkle little star acoustic guitar",id:"twinkle-twinkle-little-star-acoustic-guitar.mp3"},"einstein-baby-lullaby-academy-brahms.mp3":{name:"Baby Lullaby Music - Einstein Baby Lullaby Academy",id:"einstein-baby-lullaby-academy-brahms.mp3"},"einstein-baby-lullaby.mp3":{name:"Einstein Baby Lullaby",id:"einstein-baby-lullaby.mp3"},"a-whole-new-world.mp3":{id:"a-whole-new-world.mp3",name:"A Whole New World"},"reflection.mp3":{id:"reflection.mp3",name:"Reflection"},"arabesque-piano-relaxation.mp3":{id:"arabesque-piano-relaxation.mp3",name:"Arabesque Piano Relaxation"},"canon-in-d.mp3":{id:"canon-in-d.mp3",name:"Canon in D"},"music-therapy-serenity.mp3":{id:"music-therapy-serenity.mp3",name:"Music Therapy - Serenity"},"prelude-in-c-major.mp3":{id:"prelude-in-c-major.mp3",name:"Prelude in C Major"}},Oge=cp(t=>({isPlaying:!1,setIsPlaying:e=>t({isPlaying:e}),currentSongIndex:0,setCurrentSongIndex:e=>t({currentSongIndex:e}),songList:[],setSongList:e=>t({songList:e}),currentTime:0,setCurrentTime:e=>t({currentTime:e}),duration:0,setDuration:e=>t({duration:e})})),Js=[];let ho=null;const YO=({autoPlayDefault:t=!1}={})=>{const{isPlaying:e,songList:n,setSongList:r,setIsPlaying:o,currentSongIndex:s,setCurrentSongIndex:i,currentTime:a,setCurrentTime:l,duration:c,setDuration:d}=Oge(),[u,h]=D.useState(t),f=w=>{console.log("currentSingIndex",s,n.length),ho&&ho.pause();let k=(s+1)%n.length;w&&!isNaN(w)&&(k=w),console.log("nextIndex",k),i(k),g(k)},p=()=>{ho&&ho.pause();const w=(s-1+n.length)%n.length;g(w),i(w)},g=w=>{if(w<0||w>=n.length)return;const k=n[w];let C;console.log("AUTO PLAY",u,Js[w]),Js[w]?(C=Js[w],C.currentTime=0):C=new Audio(k),ho=C,C.onended=()=>{console.log("AUDIO END!!!",u),u&&f(w+1)},C.ontimeupdate=()=>{l(C.currentTime),d(C.duration)},C.play().then(()=>{o(!0),l(0)}).catch(console.error)};return{loadSong:g,play:async()=>{if(!ho)g(s),o(!0);else{const w=Js[s];w&&!e&&w.play().then(()=>o(!0)).catch(console.error)}},pause:()=>{ho&&e&&(ho.pause(),o(!1))},isPlaying:e,autoPlay:u,setAutoPlay:w=>h(w),next:f,prev:p,audio:ho,currentTime:a,duration:c,currentSongIndex:s,loadAllSongs:async({songs:w,callback:k})=>{const C=w.filter(T=>!n.includes(T)),S=[...n,...C];C.length&&r(S);for(let T=0;T<S.length;T++){const E=S[T];if(Js[T]){k(E,T);continue}const M=new Audio(E);Js.push(M),await new Promise((R,P)=>{M.addEventListener("loadedmetadata",()=>{k(E,T),R()}),M.addEventListener("error",L=>{console.error(`Error loading song: ${E}`,L),P(L)})})}return Js},songList:n}},Lge=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},bx=Lge(Object.values(Nge)),jge=bx.map(({id:t})=>Kj(t)),Bge="_container_fu073_2",Vge="_header_fu073_10",$ge="_body_fu073_23",Hge="_card_fu073_28",Fge="_cardActive_fu073_40",zge="_titleActive_fu073_44",Uge="_successIcon_fu073_49",Zs={container:Bge,header:Vge,body:$ge,card:Hge,cardActive:Fge,titleActive:zge,successIcon:Uge},Wge=({visible:t,onClose:e})=>{const{currentSongIndex:n,next:r}=YO(),o=_t();return m.jsxs(m4,{className:Zs.container,visible:t,onBlur:e,children:[m.jsxs("div",{className:Zs.header,children:[m.jsx(ie.Title,{noMargin:!0,level:4,children:o.formatMessage({id:"audio-song-list-drawer.title",defaultMessage:"Song List"})}),m.jsx(Q,{width:32,icon:"material-symbols:close-rounded",onClick:e})]}),m.jsx("div",{className:Zs.body,children:bx.map(({name:s},i)=>m.jsxs("div",{onClick:()=>r(i),className:le(Zs.card,n===i&&Zs.cardActive),children:[m.jsx(ie.Paragraph,{noMargin:!0,className:le(n===i&&Zs.titleActive),children:s}),n===i&&m.jsx(Q,{className:Zs.successIcon,icon:"material-symbols:check-circle-rounded"})]},i))})]})},Gge=({className:t})=>{const[e,n]=D.useState(0),{play:r,pause:o,isPlaying:s,next:i,prev:a,currentTime:l,currentSongIndex:c,loadAllSongs:d,duration:u,songList:h}=YO({autoPlayDefault:!0}),[f,p]=y.useState(!1),g=async()=>{await d({songs:jge,callback:()=>{n(v=>v+1)}})};D.useEffect(()=>{g()},[]);const b=()=>{s?o():r()};return m.jsxs("div",{className:le(uo.container,t),children:[m.jsx(Wge,{visible:f,onClose:()=>p(!1)}),e!==h.length&&m.jsxs(ie.Text,{className:uo.loadStatus,children:["load song",e,"/",h.length]}),l>0&&m.jsx("div",{className:uo.progressContainer,children:m.jsx("div",{className:uo.progress,style:{width:`${l/u*100}%`}})}),m.jsxs("div",{className:uo.body,children:[m.jsx(Q,{icon:"material-symbols:skip-previous-rounded",height:24,color:"white",onClick:()=>a()}),s?m.jsx(Sge,{className:uo.icon,width:42,onClick:b}):m.jsx(Tge,{className:uo.icon,onClick:b}),m.jsx(Q,{icon:"material-symbols:skip-next-rounded",height:32,width:32,color:"white",onClick:()=>i()}),m.jsxs("span",{className:uo.pomodoroPhase,children:[m.jsx(ie.Text,{onClick:()=>p(!0),className:uo.pomodoroPhaseText,children:`${c+1}. ${bx[c].name}`}),m.jsx(Q,{color:"white",onClick:()=>p(!0),icon:"material-symbols:library-music-rounded",width:24})]})]})]})},qge="_container_5cdu6_2",Kge="_player_5cdu6_17",Yge="_hr_5cdu6_24",Jge="_card_5cdu6_30",Xu={container:qge,player:Kge,hr:Yge,card:Jge},Zge=()=>{const[t,e]=D.useState(new Date);return m.jsxs("div",{className:Xu.container,children:[m.jsx(c9,{}),m.jsxs($r,{className:Xu.card,children:[m.jsx(mge,{date:t,onDateChange:e}),m.jsx(tc,{classes:{hr:Xu.hr}}),m.jsx(wge,{date:t}),m.jsx(Cge,{})]}),m.jsx(Gge,{className:Xu.player})]})};function Xge(t,e){const[n,r]=y.useState(()=>{try{const s=window.localStorage.getItem(t);return s||e}catch(s){return console.error("Error reading localStorage:",s),e}});return{storedValue:n,setStoredValue:r,save:()=>{window.localStorage.setItem(t,n)}}}function Qge(){const{storedValue:t,setStoredValue:e,save:n}=Xge("checklist_template",""),r=o=>{e(o.target.value)};return m.jsxs("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[m.jsx("h2",{children:"LocalStorage Editor"}),m.jsx("textarea",{value:t,onChange:r,placeholder:"Start typing here...",style:{width:"100%",height:"300px",padding:"10px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px",resize:"vertical"}}),m.jsx("button",{onClick:n,children:"Save"})]})}const er=({children:t})=>m.jsx(age.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:t}),eye=()=>{const t=No();return m.jsx(Mue,{mode:"wait",children:m.jsxs(s5,{location:t,children:[m.jsx(Nn,{path:"/",element:m.jsx(er,{children:m.jsx(Zge,{})})}),m.jsx(Nn,{path:"/task/:id",element:m.jsx(er,{children:m.jsx(Rse,{})})}),m.jsx(Nn,{path:"/create-checklist",element:m.jsx(er,{children:m.jsx(wde,{})})}),m.jsx(Nn,{path:"/edit-checklist/:id",element:m.jsx(er,{children:m.jsx(Lde,{})})}),m.jsx(Nn,{path:"/weight-record",element:m.jsx(er,{children:m.jsx(sue,{})})}),m.jsx(Nn,{path:"/intro",element:m.jsx(er,{children:m.jsx(Use,{})})}),m.jsx(Nn,{path:"/checklist-template",element:m.jsx(er,{children:m.jsx(yue,{})})}),m.jsx(Nn,{path:"/setting",element:m.jsx(er,{children:m.jsx(u9,{})})}),m.jsx(Nn,{path:"/story",element:m.jsx(er,{children:m.jsx(xue,{})})}),m.jsx(Nn,{path:"/audio",element:m.jsx(er,{children:m.jsx(kue,{})})}),m.jsx(Nn,{path:"/setting/local-storage-editor",element:m.jsx(er,{children:m.jsx(Qge,{})})})]},t.pathname)})},tye=()=>m.jsx(_5,{children:m.jsx(eye,{})}),nye="_container_1qdlo_1",rye="_toast_1qdlo_8",oye="_toastMessage_1qdlo_22",sye="_toastButton_1qdlo_26",zl={container:nye,toast:rye,toastMessage:oye,toastButton:sye};function iye(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t;let a,l;const c=async(u=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await kt(async()=>{const{Workbox:u}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:u}},[]).then(({Workbox:u})=>new u("/sw.js",{scope:"/",type:"classic"})).catch(u=>{i==null||i(u)}),!a)return;a.addEventListener("activated",u=>{(u.isUpdate||u.isExternal)&&window.location.reload()}),a.addEventListener("installed",u=>{u.isUpdate||r==null||r()}),a.register({immediate:e}).then(u=>{s?s("/sw.js",u):o==null||o(u)}).catch(u=>{i==null||i(u)})}}return l=d(),c}function aye(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t,[a,l]=y.useState(!1),[c,d]=y.useState(!1),[u]=y.useState(()=>iye({immediate:e,onOfflineReady(){d(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:o,onRegisteredSW:s,onRegisterError:i}));return{needRefresh:[a,l],offlineReady:[c,d],updateServiceWorker:u}}function lye(){const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:o}=aye({onRegistered(i){console.log("SW Registered: "+i)},onRegisterError(i){console.log("SW registration error",i)}}),s=()=>{e(!1),r(!1)};return D.useEffect(()=>{n&&o(!0)},[n]),m.jsx("div",{className:zl.container,children:(t||n)&&m.jsxs("div",{className:zl.toast,children:[m.jsx("div",{className:zl.toastMessage,children:t?m.jsx("span",{children:"App ready to work offline"}):m.jsx("span",{children:"New content available, click on reload button to update."})}),n&&m.jsx("button",{className:zl.toastButton,onClick:()=>o(!0),children:"Reload"}),m.jsx("button",{className:zl.toastButton,onClick:()=>s(),children:"Close"})]})})}const cye="_container_1jm49_164",dye="_body_1jm49_172",OE={container:cye,body:dye};function uye(){const{theme:t}=hp();return m.jsxs("div",{className:OE.container,"data-theme":t,children:[m.jsxs("div",{className:OE.body,children:[m.jsx(tye,{}),m.jsx(lye,{})]}),m.jsx("div",{id:"drawer-global-root"})]})}const hye=Jj(qj(uye));St.render(m.jsx(hye,{}),document.getElementById("app"));
