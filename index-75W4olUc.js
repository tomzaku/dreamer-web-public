const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-rjhLG1eB.js","assets/index-D57cUaFw.js","assets/mdxeditor-Cxvfqdhz.js","assets/apexcharts-BnXoAgVT.js","assets/index-DdbShWyY.js","assets/index-nOtcpH01.js","assets/index-uAn85tBp.js","assets/index-D4Wp6AEg.js","assets/index-CWmy4eKR.js","assets/index-CfyObm-o.js","assets/index-yU9Yh-H5.js","assets/index-BdmKeUBW.js","assets/index-DQ-8l3PE.js","assets/index-JH4Gotpn.js","assets/index-FrdabaJ1.js","assets/index-BgBG5lba.js","assets/index-BlSIl150.js","assets/index-BGm_t98o.js"])))=>i.map(i=>d[i]);
import{r as y,j as m,c as re,R as I,_ as kt,k as l3,b as c3,i as d3,a as L0,u as u3,d as Wt,g as oh,e as h3,f as f3,h as p3,l as Tx,m as m3,n as g3,o as St,p as VE,q as y3,s as Jr,t as Hi,v as ur,w as cp,x as b3,y as Ex,z as sc,A as HE}from"./mdxeditor-Cxvfqdhz.js";import{a as v3,g as w3}from"./apexcharts-BnXoAgVT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Ml={},Mx;function x3(){if(Mx)return Ml;Mx=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.parse=i,Ml.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,s=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function i(h,f){const p=new s,g=h.length;if(g<2)return p;const b=(f==null?void 0:f.decode)||d;let v=0;do{const x=h.indexOf("=",v);if(x===-1)break;const w=h.indexOf(";",v),k=w===-1?g:w;if(x>k){v=h.lastIndexOf(";",x-1)+1;continue}const C=a(h,v,x),S=l(h,x,C),T=h.slice(C,S);if(p[T]===void 0){let E=a(h,x+1,k),M=l(h,k,E);const _=b(h.slice(E,M));p[T]=_}v=k+1}while(v<g);return p}function a(h,f,p){do{const g=h.charCodeAt(f);if(g!==32&&g!==9)return f}while(++f<p);return p}function l(h,f,p){for(;f>p;){const g=h.charCodeAt(--f);if(g!==32&&g!==9)return f+1}return p}function c(h,f,p){const g=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(h))throw new TypeError(`argument name is invalid: ${h}`);const b=g(f);if(!e.test(b))throw new TypeError(`argument val is invalid: ${f}`);let v=h+"="+b;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!u(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function d(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function u(h){return o.call(h)==="[object Date]"}return Ml}x3();var Ax="popstate";function k3(t={}){function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return Iy("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Dc(o)}return S3(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C3(){return Math.random().toString(36).substring(2,10)}function _x(t,e){return{usr:t.state,key:t.key,idx:e}}function Iy(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ja(e):e,state:n,key:e&&e.key||r||C3()}}function Dc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ja(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function S3(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a="POP",l=null,c=d();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function d(){return(i.state||{idx:null}).idx}function u(){a="POP";let b=d(),v=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:v})}function h(b,v){a="PUSH";let x=Iy(g.location,b,v);c=d()+1;let w=_x(x,c),k=g.createHref(x);try{i.pushState(w,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(k)}s&&l&&l({action:a,location:g.location,delta:1})}function f(b,v){a="REPLACE";let x=Iy(g.location,b,v);c=d();let w=_x(x,c),k=g.createHref(x);i.replaceState(w,"",k),s&&l&&l({action:a,location:g.location,delta:0})}function p(b){return T3(b)}let g={get action(){return a},get location(){return t(o,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(Ax,u),l=b,()=>{o.removeEventListener(Ax,u),l=null}},createHref(b){return e(o,b)},createURL:p,encodeLocation(b){let v=p(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(b){return i.go(b)}};return g}function T3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ge(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Dc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function FE(t,e,n="/"){return E3(t,e,n,!1)}function E3(t,e,n,r){let o=typeof e=="string"?Ja(e):e,s=Po(o.pathname||"/",n);if(s==null)return null;let i=zE(t);M3(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=B3(s);a=L3(i[l],c,r)}return a}function zE(t,e=[],n=[],r=""){let o=(s,i,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(Ge(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=So([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ge(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),zE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:N3(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let l of UE(s.path))o(s,i,l)}),e}function UE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=UE(r.join("/")),a=[];return a.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function M3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:O3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var A3=/^:[\w-]+$/,_3=3,R3=2,P3=1,I3=10,D3=-2,Rx=t=>t==="*";function N3(t,e){let n=t.split("/"),r=n.length;return n.some(Rx)&&(r+=D3),e&&(r+=R3),n.filter(o=>!Rx(o)).reduce((o,s)=>o+(A3.test(s)?_3:s===""?P3:I3),r)}function O3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function L3(t,e,n=!1){let{routesMeta:r}=t,o={},s="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",u=Ph({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=Ph({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(o,u.params),i.push({params:o,pathname:So([s,u.pathname]),pathnameBase:F3(So([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=So([s,u.pathnameBase]))}return i}function Ph(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=j3(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:u},h)=>{if(d==="*"){let p=a[h]||"";i=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return u&&!f?c[d]=void 0:c[d]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function j3(t,e=!1,n=!0){hr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function B3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Po(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function $3(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Ja(t):t;return{pathname:n?n.startsWith("/")?n:V3(n,e):e,search:z3(r),hash:U3(o)}}function V3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Bm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function WE(t){let e=H3(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function GE(t,e,n,r=!1){let o;typeof t=="string"?o=Ja(t):(o={...t},Ge(!o.pathname||!o.pathname.includes("?"),Bm("?","pathname","search",o)),Ge(!o.pathname||!o.pathname.includes("#"),Bm("#","pathname","hash",o)),Ge(!o.search||!o.search.includes("#"),Bm("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let u=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),u-=1;o.pathname=h.join("/")}a=u>=0?e[u]:"/"}let l=$3(o,a),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var So=t=>t.join("/").replace(/\/\/+/g,"/"),F3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),z3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,U3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function W3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var qE=["POST","PUT","PATCH","DELETE"];new Set(qE);var G3=["GET",...qE];new Set(G3);var Za=y.createContext(null);Za.displayName="DataRouter";var dp=y.createContext(null);dp.displayName="DataRouterState";var KE=y.createContext({isTransitioning:!1});KE.displayName="ViewTransition";var q3=y.createContext(new Map);q3.displayName="Fetchers";var K3=y.createContext(null);K3.displayName="Await";var Zr=y.createContext(null);Zr.displayName="Navigation";var Pd=y.createContext(null);Pd.displayName="Location";var Xr=y.createContext({outlet:null,matches:[],isDataRoute:!1});Xr.displayName="Route";var j0=y.createContext(null);j0.displayName="RouteError";function Y3(t,{relative:e}={}){Ge(Id(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(Zr),{hash:o,pathname:s,search:i}=Dd(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:So([n,s])),r.createHref({pathname:a,search:i,hash:o})}function Id(){return y.useContext(Pd)!=null}function Lo(){return Ge(Id(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Pd).location}var YE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JE(t){y.useContext(Zr).static||y.useLayoutEffect(t)}function xr(){let{isDataRoute:t}=y.useContext(Xr);return t?l5():J3()}function J3(){Ge(Id(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(Za),{basename:e,navigator:n}=y.useContext(Zr),{matches:r}=y.useContext(Xr),{pathname:o}=Lo(),s=JSON.stringify(WE(r)),i=y.useRef(!1);return JE(()=>{i.current=!0}),y.useCallback((l,c={})=>{if(hr(i.current,YE),!i.current)return;if(typeof l=="number"){n.go(l);return}let d=GE(l,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:So([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,o,t])}y.createContext(null);function ZE(){let{matches:t}=y.useContext(Xr),e=t[t.length-1];return e?e.params:{}}function Dd(t,{relative:e}={}){let{matches:n}=y.useContext(Xr),{pathname:r}=Lo(),o=JSON.stringify(WE(n));return y.useMemo(()=>GE(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function Z3(t,e){return XE(t,e)}function XE(t,e,n,r){var x;Ge(Id(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:s}=y.useContext(Zr),{matches:i}=y.useContext(Xr),a=i[i.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",u=a&&a.route;{let w=u&&u.path||"";QE(c,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=Lo(),f;if(e){let w=typeof e=="string"?Ja(e):e;Ge(d==="/"||((x=w.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=h;let p=f.pathname||"/",g=p;if(d!=="/"){let w=d.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=!s&&n&&n.matches&&n.matches.length>0?n.matches:FE(t,{pathname:g});hr(u||b!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),hr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=n5(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:So([d,o.encodeLocation?o.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:So([d,o.encodeLocation?o.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&v?y.createElement(Pd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},v):v}function X3(){let t=a5(),e=W3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=y.createElement(y.Fragment,null,y.createElement("p",null,"💿 Hey developer 👋"),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:o},n):null,i)}var Q3=y.createElement(X3,null),e5=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?y.createElement(Xr.Provider,{value:this.props.routeContext},y.createElement(j0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function t5({routeContext:t,match:e,children:n}){let r=y.useContext(Za);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Xr.Provider,{value:t},n)}function n5(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let l=o.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Ge(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<o.length;l++){let c=o[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:d,errors:u}=n,h=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!u||u[c.route.id]===void 0);if(c.route.lazy||h){i=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((l,c,d)=>{let u,h=!1,f=null,p=null;n&&(u=s&&c.route.id?s[c.route.id]:void 0,f=c.route.errorElement||Q3,i&&(a<0&&d===0?(QE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):a===d&&(h=!0,p=c.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),b=()=>{let v;return u?v=f:h?v=p:c.route.Component?v=y.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=l,y.createElement(t5,{match:c,routeContext:{outlet:l,matches:g,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?y.createElement(e5,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function B0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r5(t){let e=y.useContext(Za);return Ge(e,B0(t)),e}function o5(t){let e=y.useContext(dp);return Ge(e,B0(t)),e}function s5(t){let e=y.useContext(Xr);return Ge(e,B0(t)),e}function $0(t){let e=s5(t),n=e.matches[e.matches.length-1];return Ge(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function i5(){return $0("useRouteId")}function a5(){var r;let t=y.useContext(j0),e=o5("useRouteError"),n=$0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function l5(){let{router:t}=r5("useNavigate"),e=$0("useNavigate"),n=y.useRef(!1);return JE(()=>{n.current=!0}),y.useCallback(async(o,s={})=>{hr(n.current,YE),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...s}))},[t,e])}var Px={};function QE(t,e,n){!e&&!Px[t]&&(Px[t]=!0,hr(!1,n))}y.memo(c5);function c5({routes:t,future:e,state:n}){return XE(t,void 0,n,e)}function bn(t){Ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function d5({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:s=!1}){Ge(!Id(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:i,navigator:o,static:s,future:{}}),[i,o,s]);typeof n=="string"&&(n=Ja(n));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=n,f=y.useMemo(()=>{let p=Po(l,i);return p==null?null:{location:{pathname:p,search:c,hash:d,state:u,key:h},navigationType:r}},[i,l,c,d,u,h,r]);return hr(f!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:y.createElement(Zr.Provider,{value:a},y.createElement(Pd.Provider,{children:e,value:f}))}function u5({children:t,location:e}){return Z3(Dy(t),e)}function Dy(t,e=[]){let n=[];return y.Children.forEach(t,(r,o)=>{if(!y.isValidElement(r))return;let s=[...e,o];if(r.type===y.Fragment){n.push.apply(n,Dy(r.props.children,s));return}Ge(r.type===bn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ge(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Dy(r.props.children,s)),n.push(i)}),n}var sh="get",ih="application/x-www-form-urlencoded";function up(t){return t!=null&&typeof t.tagName=="string"}function h5(t){return up(t)&&t.tagName.toLowerCase()==="button"}function f5(t){return up(t)&&t.tagName.toLowerCase()==="form"}function p5(t){return up(t)&&t.tagName.toLowerCase()==="input"}function m5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function g5(t,e){return t.button===0&&(!e||e==="_self")&&!m5(t)}function Ny(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function y5(t,e){let n=Ny(t);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(s=>{n.append(o,s)})}),n}var xu=null;function b5(){if(xu===null)try{new FormData(document.createElement("form"),0),xu=!1}catch{xu=!0}return xu}var v5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $m(t){return t!=null&&!v5.has(t)?(hr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ih}"`),null):t}function w5(t,e){let n,r,o,s,i;if(f5(t)){let a=t.getAttribute("action");r=a?Po(a,e):null,n=t.getAttribute("method")||sh,o=$m(t.getAttribute("enctype"))||ih,s=new FormData(t)}else if(h5(t)||p5(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Po(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||sh,o=$m(t.getAttribute("formenctype"))||$m(a.getAttribute("enctype"))||ih,s=new FormData(a,t),!b5()){let{name:c,type:d,value:u}=t;if(d==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,u)}}else{if(up(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=sh,r=null,o=ih,i=t}return s&&o==="text/plain"&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:s,body:i}}function V0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function x5(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function k5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function C5(t,e,n){let r=await Promise.all(t.map(async o=>{let s=e.routes[o.route.id];if(s){let i=await x5(s,n);return i.links?i.links():[]}return[]}));return M5(r.flat(1).filter(k5).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ix(t,e,n,r,o,s){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>i(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var u;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(i(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((u=n[0])==null?void 0:u.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function S5(t,e,{includeHydrateFallback:n}={}){return T5(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let s=[o.module];return o.clientActionModule&&(s=s.concat(o.clientActionModule)),o.clientLoaderModule&&(s=s.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(s=s.concat(o.hydrateFallbackModule)),o.imports&&(s=s.concat(o.imports)),s}).flat(1))}function T5(t){return[...new Set(t)]}function E5(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function M5(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let s=JSON.stringify(E5(o));return n.has(s)||(n.add(s),r.push({key:s,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var A5=new Set([100,101,204,205]);function _5(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Po(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function eM(){let t=y.useContext(Za);return V0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function R5(){let t=y.useContext(dp);return V0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var H0=y.createContext(void 0);H0.displayName="FrameworkContext";function tM(){let t=y.useContext(H0);return V0(t,"You must render this element inside a <HydratedRouter> element"),t}function P5(t,e){let n=y.useContext(H0),[r,o]=y.useState(!1),[s,i]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=e,h=y.useRef(null);y.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let g=v=>{v.forEach(x=>{i(x.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[t]),y.useEffect(()=>{if(r){let g=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(g)}}},[r]);let f=()=>{o(!0)},p=()=>{o(!1),i(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Al(a,f),onBlur:Al(l,p),onMouseEnter:Al(c,f),onMouseLeave:Al(d,p),onTouchStart:Al(u,f)}]:[!1,h,{}]}function Al(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function I5({page:t,...e}){let{router:n}=eM(),r=y.useMemo(()=>FE(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(N5,{page:t,matches:r,...e}):null}function D5(t){let{manifest:e,routeModules:n}=tM(),[r,o]=y.useState([]);return y.useEffect(()=>{let s=!1;return C5(t,e,n).then(i=>{s||o(i)}),()=>{s=!0}},[t,e,n]),r}function N5({page:t,matches:e,...n}){let r=Lo(),{manifest:o,routeModules:s}=tM(),{basename:i}=eM(),{loaderData:a,matches:l}=R5(),c=y.useMemo(()=>Ix(t,e,l,o,r,"data"),[t,e,l,o,r]),d=y.useMemo(()=>Ix(t,e,l,o,r,"assets"),[t,e,l,o,r]),u=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(e.forEach(v=>{var w;let x=o.routes[v.route.id];!x||!x.hasLoader||(!c.some(k=>k.route.id===v.route.id)&&v.route.id in a&&((w=s[v.route.id])!=null&&w.shouldRevalidate)||x.hasClientLoader?g=!0:p.add(v.route.id))}),p.size===0)return[];let b=_5(t,i);return g&&p.size>0&&b.searchParams.set("_routes",e.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[b.pathname+b.search]},[i,a,r,o,c,e,t,s]),h=y.useMemo(()=>S5(d,o),[d,o]),f=D5(d);return y.createElement(y.Fragment,null,u.map(p=>y.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>y.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:g})=>y.createElement("link",{key:p,...g})))}function O5(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var nM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nM&&(window.__reactRouterVersion="7.6.0")}catch{}function L5({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=k3({window:n,v5Compat:!0}));let o=r.current,[s,i]=y.useState({action:o.action,location:o.location}),a=y.useCallback(l=>{y.startTransition(()=>i(l))},[i]);return y.useLayoutEffect(()=>o.listen(a),[o,a]),y.createElement(d5,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o})}var rM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oM=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:s,replace:i,state:a,target:l,to:c,preventScrollReset:d,viewTransition:u,...h},f){let{basename:p}=y.useContext(Zr),g=typeof c=="string"&&rM.test(c),b,v=!1;if(typeof c=="string"&&g&&(b=c,nM))try{let M=new URL(window.location.href),_=c.startsWith("//")?new URL(M.protocol+c):new URL(c),P=Po(_.pathname,p);_.origin===M.origin&&P!=null?c=P+_.search+_.hash:v=!0}catch{hr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=Y3(c,{relative:o}),[w,k,C]=P5(r,h),S=V5(c,{replace:i,state:a,target:l,preventScrollReset:d,relative:o,viewTransition:u});function T(M){e&&e(M),M.defaultPrevented||S(M)}let E=y.createElement("a",{...h,...C,href:b||x,onClick:v||s?e:T,ref:O5(f,k),target:l,"data-discover":!g&&n==="render"?"true":void 0});return w&&!g?y.createElement(y.Fragment,null,E,y.createElement(I5,{page:x})):E});oM.displayName="Link";var j5=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:s,to:i,viewTransition:a,children:l,...c},d){let u=Dd(i,{relative:c.relative}),h=Lo(),f=y.useContext(dp),{navigator:p,basename:g}=y.useContext(Zr),b=f!=null&&W5(u)&&a===!0,v=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,x=h.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(x=x.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&g&&(w=Po(w,g)||w);const k=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let C=x===v||!o&&x.startsWith(v)&&x.charAt(k)==="/",S=w!=null&&(w===v||!o&&w.startsWith(v)&&w.charAt(v.length)==="/"),T={isActive:C,isPending:S,isTransitioning:b},E=C?e:void 0,M;typeof r=="function"?M=r(T):M=[r,C?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let _=typeof s=="function"?s(T):s;return y.createElement(oM,{...c,"aria-current":E,className:M,ref:d,style:_,to:i,viewTransition:a},typeof l=="function"?l(T):l)});j5.displayName="NavLink";var B5=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:s,method:i=sh,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:u,...h},f)=>{let p=z5(),g=U5(a,{relative:c}),b=i.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&rM.test(a),x=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let k=w.nativeEvent.submitter,C=(k==null?void 0:k.getAttribute("formmethod"))||i;p(k||w.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:o,state:s,relative:c,preventScrollReset:d,viewTransition:u})};return y.createElement("form",{ref:f,method:b,action:g,onSubmit:r?l:x,...h,"data-discover":!v&&t==="render"?"true":void 0})});B5.displayName="Form";function $5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sM(t){let e=y.useContext(Za);return Ge(e,$5(t)),e}function V5(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:i}={}){let a=xr(),l=Lo(),c=Dd(t,{relative:s});return y.useCallback(d=>{if(g5(d,e)){d.preventDefault();let u=n!==void 0?n:Dc(l)===Dc(c);a(t,{replace:u,state:r,preventScrollReset:o,relative:s,viewTransition:i})}},[l,a,c,n,r,e,t,o,s,i])}function iM(t){hr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(Ny(t)),n=y.useRef(!1),r=Lo(),o=y.useMemo(()=>y5(r.search,n.current?null:e.current),[r.search]),s=xr(),i=y.useCallback((a,l)=>{const c=Ny(typeof a=="function"?a(o):a);n.current=!0,s("?"+c,l)},[s,o]);return[o,i]}var H5=0,F5=()=>`__${String(++H5)}__`;function z5(){let{router:t}=sM("useSubmit"),{basename:e}=y.useContext(Zr),n=i5();return y.useCallback(async(r,o={})=>{let{action:s,method:i,encType:a,formData:l,body:c}=w5(r,e);if(o.navigate===!1){let d=o.fetcherKey||F5();await t.fetch(d,n,o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function U5(t,{relative:e}={}){let{basename:n}=y.useContext(Zr),r=y.useContext(Xr);Ge(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s={...Dd(t||".",{relative:e})},i=Lo();if(t==null){s.search=i.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(u=>u).forEach(u=>a.append("index",u));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:So([n,s.pathname])),Dc(s)}function W5(t,e={}){let n=y.useContext(KE);Ge(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=sM("useViewTransitionState"),o=Dd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Po(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Po(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ph(o.pathname,i)!=null||Ph(o.pathname,s)!=null}[...A5];const G5="_icon_1vtik_1",Nd={icon:G5};function q5({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:re(Nd.icon,t),...e,children:m.jsx("g",{children:m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.855 15.67C12.995 15.31 12.9049 14.9 12.625 14.62L10.5349 12.56L10.5649 12.53C12.3049 10.59 13.5449 8.35999 14.2749 6H16.215C16.755 6 17.205 5.54999 17.205 5.01001V4.98999C17.205 4.45001 16.755 4 16.215 4H10.205V3C10.205 2.45001 9.755 2 9.20496 2C8.65491 2 8.20496 2.45001 8.20496 3V4H2.19495C1.65491 4 1.20496 4.45001 1.20496 4.98999C1.20496 5.53998 1.65491 5.97998 2.19495 5.97998H12.375C11.705 7.91998 10.6449 9.75 9.20496 11.35C8.3949 10.46 7.71497 9.48999 7.1449 8.46997C6.98499 8.17999 6.69495 8 6.36499 8C5.67493 8 5.23499 8.75 5.57495 9.34998C6.20496 10.48 6.97498 11.56 7.875 12.56L3.505 16.87C3.10498 17.26 3.10498 17.9 3.505 18.29C3.8949 18.68 4.5249 18.68 4.92493 18.29L9.20496 14L11.225 16.02C11.735 16.53 12.605 16.34 12.855 15.67ZM17.705 10C17.105 10 16.5649 10.37 16.355 10.94L12.6849 20.74C12.4449 21.35 12.9049 22 13.5549 22C13.9449 22 14.2949 21.76 14.4349 21.39L15.325 19H20.075L20.975 21.39C21.1149 21.75 21.465 22 21.855 22C22.5049 22 22.965 21.35 22.7349 20.74L19.0649 10.94C18.845 10.37 18.3049 10 17.705 10ZM17.705 12.67L16.085 17H19.325L17.705 12.67Z",fillOpacity:"0.54"})})})}const K5="_primary_pdmgw_6",Y5="_noMargin_pdmgw_10",Vm={default:"_default_pdmgw_1",primary:K5,noMargin:Y5};function J5({level:t,children:e,primary:n,noMargin:r,className:o,onClick:s}){const i=[Vm.default,n&&Vm.primary,r&&Vm.noMargin,o];switch(t){case 1:return m.jsx("h1",{onClick:s,className:re(...i),children:e});case 2:return m.jsx("h2",{onClick:s,className:re(...i),children:e});case 3:return m.jsx("h3",{onClick:s,className:re(...i),children:e});case 4:return m.jsx("h4",{onClick:s,className:re(...i),children:e});default:return m.jsx("h5",{onClick:s,className:re(...i),children:e})}}const Z5="_description_11sgl_6",X5="_noMargin_11sgl_12",Q5="_underline_11sgl_16",eL="_bold_11sgl_20",ds={default:"_default_11sgl_1",description:Z5,noMargin:X5,underline:Q5,bold:eL};function tL({children:t,isDescription:e,underline:n,className:r,...o}){return m.jsx("span",{className:re(ds.default,e&&ds.description,n&&ds.underline,r),...o,children:t})}function nL({children:t,isDescription:e,noMargin:n,underline:r,bold:o,className:s}){return m.jsx("p",{className:re(ds.default,e&&ds.description,n&&ds.noMargin,r&&ds.underline,o&&ds.bold,s),children:t})}const ne={Title:J5,Paragraph:nL,Text:tL},rL="_container_bm79w_2",oL="_body_bm79w_13",Dx={container:rL,body:oL};function sL({className:t,title:e,logo:n,description:r,rightComponent:o,onClick:s}){return m.jsxs("div",{className:re(Dx.container,t),onClick:s,children:[n,m.jsxs("div",{className:Dx.body,children:[m.jsx(ne.Paragraph,{bold:!0,noMargin:!0,children:e}),m.jsx(ne.Paragraph,{noMargin:!0,isDescription:!0,children:r})]}),o]})}const st={ItemMeta:sL},iL="_ghost_p15d2_12",aL="_sm_p15d2_20",lL="_lg_p15d2_25",cL="_md_p15d2_30",dL="_dash_p15d2_35",uL="_block_p15d2_41",hL="_disabled_p15d2_46",Ko={default:"_default_p15d2_1",ghost:iL,sm:aL,lg:lL,md:cL,dash:dL,block:uL,disabled:hL};function dt({onClick:t,disabled:e,children:n,type:r,className:o,block:s,size:i,...a}){return m.jsx("button",{onClick:t,className:re(Ko.default,r==="ghost"&&Ko.ghost,r==="dash"&&Ko.dash,s&&Ko.block,i==="sm"&&Ko.sm,i==="lg"&&Ko.lg,i==="md"&&Ko.md,e&&Ko.disabled,o),disabled:e,...a,children:n})}const fL="_button_aap0f_1",pL="_firstButton_aap0f_5",mL="_lastButton_aap0f_10",gL="_middleButton_aap0f_14",yL="_active_aap0f_18",bL="_leftActiveBorder_aap0f_24",vL="_rightActiveBorder_aap0f_28",wL="_rightActiveAndLastBorder_aap0f_32",Yo={button:fL,firstButton:pL,lastButton:mL,middleButton:gL,active:yL,leftActiveBorder:bL,rightActiveBorder:vL,rightActiveAndLastBorder:wL};function Oy({isButton:t,options:e,value:n,onChangeValue:r,classNameOption:o,getClassNameActiveOption:s=()=>""}){return t?m.jsx(m.Fragment,{children:e.map(({label:i,value:a},l)=>{const c=l>e.length-1&&e[l+1].value===n,d=l>0&&e[l-1].value===n;return m.jsx(dt,{type:"ghost",size:"md",onClick:()=>r&&r(a),className:re(Yo.button,l===0&&Yo.firstButton,l===e.length-1&&Yo.lastButton,l!==e.length-1&&l!==0&&Yo.middleButton,a===n&&Yo.active,a===n&&c&&Yo.leftActiveBorder,d&&Yo.rightActiveBorder,d&&l===e.length-1&&Yo.rightActiveAndLastBorder,o,a===n&&s({label:i,value:a})),children:i},`${n}-${l}`)})}):null}function xL({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:re(Nd.icon,t),...e,children:m.jsx("g",{id:"color_lens_24px",children:m.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 3C7.03003 3 3 7.03 3 12C3 16.97 7.03003 21 12 21C12.83 21 13.5 20.33 13.5 19.5C13.5 19.11 13.35 18.76 13.11 18.49C12.88 18.23 12.73 17.88 12.73 17.5C12.73 16.67 13.4 16 14.23 16H16C18.76 16 21 13.76 21 11C21 6.57999 16.97 3 12 3ZM6.5 12C5.66998 12 5 11.33 5 10.5C5 9.67001 5.66998 9 6.5 9C7.33002 9 8 9.67001 8 10.5C8 11.33 7.33002 12 6.5 12ZM8 6.5C8 7.32999 8.66998 8 9.5 8C10.33 8 11 7.32999 11 6.5C11 5.67001 10.33 5 9.5 5C8.66998 5 8 5.67001 8 6.5ZM14.5 8C13.67 8 13 7.32999 13 6.5C13 5.67001 13.67 5 14.5 5C15.33 5 16 5.67001 16 6.5C16 7.32999 15.33 8 14.5 8ZM16 10.5C16 11.33 16.67 12 17.5 12C18.33 12 19 11.33 19 10.5C19 9.67001 18.33 9 17.5 9C16.67 9 16 9.67001 16 10.5Z","fill-opacity":"0.54"})})})}var Nc=(t=>(t.Vi="vi",t.En="en",t))(Nc||{});const Nx=t=>{let e;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(e):c;if(!Object.is(u,e)){const h=e;e=d??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(f=>f(e,h))}},o=()=>e,a={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,o,a);return a},kL=t=>t?Nx(t):Nx,CL=t=>t;function SL(t,e=CL){const n=I.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return I.useDebugValue(n),n}const Ox=t=>{const e=kL(t),n=r=>SL(e,r);return Object.assign(n,e),n},hp=t=>t?Ox(t):Ox,Hm=new Map;function fr(t,e,{storeOnMount:n}={}){if(!Hm.has(t)){const i=hp(a=>({storedValue:(()=>{if(typeof window>"u")return e;try{const l=window.localStorage.getItem(t);return n&&!l&&e&&window.localStorage.setItem(t,JSON.stringify(e)),l?JSON.parse(l):e}catch(l){return console.log(l),e}})(),setValue:l=>{a(c=>{const d=l instanceof Function?l(c.storedValue):l;try{window.localStorage.setItem(t,JSON.stringify(d))}catch(u){console.log(u)}return{storedValue:d}})}}));Hm.set(t,i)}const r=Hm.get(t),{storedValue:o,setValue:s}=r();return[o,s]}var Lx,jx;(function(t){t.CANCELED_BY_MOVEMENT="canceled-by-movement",t.CANCELED_BY_TIMEOUT="canceled-by-timeout"})(Lx||(Lx={})),function(t){t.BOTH="both",t.MOUSE="mouse",t.TOUCH="touch"}(jx||(jx={}));const aM=6048e5,TL=864e5,Bx=Symbol.for("constructDateFrom");function Fr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Bx in t?t[Bx](e):t instanceof Date?new t.constructor(e):new Date(e)}function _t(t,e){return Fr(e||t,t)}let EL={};function fp(){return EL}function Oc(t,e){var a,l,c,d;const n=fp(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,o=_t(t,e==null?void 0:e.in),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function Ih(t,e){return Oc(t,{...e,weekStartsOn:1})}function lM(t,e){const n=_t(t,e==null?void 0:e.in),r=n.getFullYear(),o=Fr(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const s=Ih(o),i=Fr(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=Ih(i);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function $x(t){const e=_t(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function cM(t,...e){const n=Fr.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Dh(t,e){const n=_t(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function ML(t,e,n){const[r,o]=cM(n==null?void 0:n.in,t,e),s=Dh(r),i=Dh(o),a=+s-$x(s),l=+i-$x(i);return Math.round((a-l)/TL)}function AL(t,e){const n=lM(t,e),r=Fr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ih(r)}function _L(t){return Fr(t,Date.now())}function RL(t,e,n){const[r,o]=cM(n==null?void 0:n.in,t,e);return+Dh(r)==+Dh(o)}function PL(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function IL(t){return!(!PL(t)&&typeof t!="number"||isNaN(+_t(t)))}function dM(t,e){const n=_t(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function uM(t,e){const n=_t(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function DL(t,e){const n=_t(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const NL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},OL=(t,e,n)=>{let r;const o=NL[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Fm(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const LL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},BL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$L={date:Fm({formats:LL,defaultWidth:"full"}),time:Fm({formats:jL,defaultWidth:"full"}),dateTime:Fm({formats:BL,defaultWidth:"full"})},VL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},HL=(t,e,n,r)=>VL[t];function _l(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return o[s]}}const FL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},UL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},GL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},KL=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},YL={ordinalNumber:KL,era:_l({values:FL,defaultWidth:"wide"}),quarter:_l({values:zL,defaultWidth:"wide",argumentCallback:t=>t-1}),month:_l({values:UL,defaultWidth:"wide"}),day:_l({values:WL,defaultWidth:"wide"}),dayPeriod:_l({values:GL,defaultWidth:"wide",formattingValues:qL,defaultFormattingWidth:"wide"})};function Rl(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(o);if(!s)return null;const i=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?ZL(a,u=>u.test(i)):JL(a,u=>u.test(i));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(i.length);return{value:c,rest:d}}}function JL(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ZL(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function XL(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(o.length);return{value:i,rest:a}}}const QL=/^(\d+)(th|st|nd|rd)?/i,ej=/\d+/i,tj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nj={any:[/^b/i,/^(a|c)/i]},rj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oj={any:[/1/i,/2/i,/3/i,/4/i]},sj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ij={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},aj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uj={ordinalNumber:XL({matchPattern:QL,parsePattern:ej,valueCallback:t=>parseInt(t,10)}),era:Rl({matchPatterns:tj,defaultMatchWidth:"wide",parsePatterns:nj,defaultParseWidth:"any"}),quarter:Rl({matchPatterns:rj,defaultMatchWidth:"wide",parsePatterns:oj,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Rl({matchPatterns:sj,defaultMatchWidth:"wide",parsePatterns:ij,defaultParseWidth:"any"}),day:Rl({matchPatterns:aj,defaultMatchWidth:"wide",parsePatterns:lj,defaultParseWidth:"any"}),dayPeriod:Rl({matchPatterns:cj,defaultMatchWidth:"any",parsePatterns:dj,defaultParseWidth:"any"})},hj={code:"en-US",formatDistance:OL,formatLong:$L,formatRelative:HL,localize:YL,match:uj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fj(t,e){const n=_t(t,e==null?void 0:e.in);return ML(n,DL(n))+1}function pj(t,e){const n=_t(t,e==null?void 0:e.in),r=+Ih(n)-+AL(n);return Math.round(r/aM)+1}function hM(t,e){var d,u,h,f;const n=_t(t,e==null?void 0:e.in),r=n.getFullYear(),o=fp(),s=(e==null?void 0:e.firstWeekContainsDate)??((u=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??o.firstWeekContainsDate??((f=(h=o.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=Fr((e==null?void 0:e.in)||t,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=Oc(i,e),l=Fr((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Oc(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function mj(t,e){var a,l,c,d;const n=fp(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,o=hM(t,e),s=Fr((e==null?void 0:e.in)||t,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),Oc(s,e)}function gj(t,e){const n=_t(t,e==null?void 0:e.in),r=+Oc(n,e)-+mj(n,e);return Math.round(r/aM)+1}function Me(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Jo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Me(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Me(n+1,2)},d(t,e){return Me(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Me(t.getHours()%12||12,e.length)},H(t,e){return Me(t.getHours(),e.length)},m(t,e){return Me(t.getMinutes(),e.length)},s(t,e){return Me(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Me(o,e.length)}},Qi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vx={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Jo.y(t,e)},Y:function(t,e,n,r){const o=hM(t,r),s=o>0?o:1-o;if(e==="YY"){const i=s%100;return Me(i,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Me(s,e.length)},R:function(t,e){const n=lM(t);return Me(n,e.length)},u:function(t,e){const n=t.getFullYear();return Me(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Me(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Me(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Jo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Me(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=gj(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):Me(o,e.length)},I:function(t,e,n){const r=pj(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Me(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Jo.d(t,e)},D:function(t,e,n){const r=fj(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Me(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Me(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Me(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return Me(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=Qi.noon:r===0?o=Qi.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=Qi.evening:r>=12?o=Qi.afternoon:r>=4?o=Qi.morning:o=Qi.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Jo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Jo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Me(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Me(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Jo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Jo.s(t,e)},S:function(t,e){return Jo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Fx(r);case"XXXX":case"XX":return ei(r);case"XXXXX":case"XXX":default:return ei(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Fx(r);case"xxxx":case"xx":return ei(r);case"xxxxx":case"xxx":default:return ei(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Hx(r,":");case"OOOO":default:return"GMT"+ei(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Hx(r,":");case"zzzz":default:return"GMT"+ei(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Me(r,e.length)},T:function(t,e,n){return Me(+t,e.length)}};function Hx(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+e+Me(s,2)}function Fx(t,e){return t%60===0?(t>0?"-":"+")+Me(Math.abs(t)/60,2):ei(t,e)}function ei(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Me(Math.trunc(r/60),2),s=Me(r%60,2);return n+o+e+s}const zx=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},fM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},yj=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return zx(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",zx(r,e)).replace("{{time}}",fM(o,e))},bj={p:fM,P:yj},vj=/^D+$/,wj=/^Y+$/,xj=["D","DD","YY","YYYY"];function kj(t){return vj.test(t)}function Cj(t){return wj.test(t)}function Sj(t,e,n){const r=Tj(t,e,n);if(console.warn(r),xj.includes(t))throw new RangeError(r)}function Tj(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ej=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Aj=/^'([^]*?)'?$/,_j=/''/g,Rj=/[a-zA-Z]/;function Pj(t,e,n){var d,u,h,f;const r=fp(),o=r.locale??hj,s=r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,i=r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,a=_t(t,n==null?void 0:n.in);if(!IL(a))throw new RangeError("Invalid time value");let l=e.match(Mj).map(p=>{const g=p[0];if(g==="p"||g==="P"){const b=bj[g];return b(p,o.formatLong)}return p}).join("").match(Ej).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:Ij(p)};if(Vx[g])return{isToken:!0,value:p};if(g.match(Rj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return l.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Cj(g)||kj(g))&&Sj(g,e,String(t));const b=Vx[g[0]];return b(a,g,o.localize,c)}).join("")}function Ij(t){const e=t.match(Aj);return e?e[1].replace(_j,"'"):t}function Dj(t,e){return RL(Fr(t,t),_L(t))}function Nj(t,e,n){const r=_t(t,n==null?void 0:n.in);return r.setHours(e),r}function Oj(t,e,n){const r=_t(t,n==null?void 0:n.in);return r.setMilliseconds(e),r}function Lj(t,e,n){const r=_t(t,n==null?void 0:n.in);return r.setMinutes(e),r}function jj(t,e,n){const r=_t(t,n==null?void 0:n.in);return r.setSeconds(e),r}const Bj="baby",$j=()=>{const[t,e]=fr(Bj,{});return{baby:t,setBaby:e,calculateStartDateFromDueDate:r=>new Date(new Date(r).getTime()-24192e6).toISOString()}};var bt=[];for(var zm=0;zm<256;++zm)bt.push((zm+256).toString(16).slice(1));function Vj(t,e=0){return(bt[t[e+0]]+bt[t[e+1]]+bt[t[e+2]]+bt[t[e+3]]+"-"+bt[t[e+4]]+bt[t[e+5]]+"-"+bt[t[e+6]]+bt[t[e+7]]+"-"+bt[t[e+8]]+bt[t[e+9]]+"-"+bt[t[e+10]]+bt[t[e+11]]+bt[t[e+12]]+bt[t[e+13]]+bt[t[e+14]]+bt[t[e+15]]).toLowerCase()}var ku,Hj=new Uint8Array(16);function Fj(){if(!ku&&(ku=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ku))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ku(Hj)}var zj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ux={randomUUID:zj};function sn(t,e,n){if(Ux.randomUUID&&!t)return Ux.randomUUID();t=t||{};var r=t.random||(t.rng||Fj)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Vj(r)}const Uj="checklist_template",Wj="selected_checklist_templates",Ks={repeat:{minute:"0",hour:"8",dayOfMonth:"*",month:"*",dayOfWeek:"*",startedAt:new Date().toISOString()},createdAt:new Date().toISOString(),records:[],fieldGroups:[]},Gj=[{id:sn(),title:"Drink water",...Ks,avatar:{type:"icon",name:"mdi:water",color:"#00aaff"}},{id:sn(),title:"Drink Orange juice",...Ks,avatar:{type:"icon",name:"noto-v1:tropical-drink",color:"#ff9900"}},{id:sn(),title:"Take vitamin supplement",...Ks,avatar:{type:"icon",name:"game-icons:medicines",color:"#00ff00"}},{id:sn(),title:"Eat fruits(banana, seeds) and vegetables",...Ks,avatar:{type:"icon",name:"twemoji:pot-of-food",color:"#00aaff"}},{id:sn(),title:"Exercise",...Ks,avatar:{type:"icon",name:"healthicons:exercise-yoga-outline"}},{id:sn(),title:"Sleep early",...Ks,avatar:{type:"icon",name:"fxemoji:sleeping"}},{id:sn(),title:"Drink milk",...Ks,avatar:{type:"icon",name:"icon-park-outline:milk",color:"#ff9900"}}],qj=Gj.reduce((t,e)=>({...t,[e.id]:e}),{}),Es=()=>{const[t,e]=fr(Uj,qj,{storeOnMount:!0}),[n,r]=fr(Wj,[]),o=u=>{const h=sn();return e({...t,[h]:{...u,id:h,createdAt:new Date().toISOString()}}),a([...n,h]),{id:h}},s=u=>{var h;e({...t,[u.id]:{...u,createdAt:((h=t[u.id])==null?void 0:h.createdAt)||new Date().toISOString()}})},i=u=>{const h={...t};delete h[u],e(h),n.includes(u)&&a(n.filter(f=>f!==u))},a=(u=[])=>{r(u)};return{checklistTemplate:t,getChecklistTemplate:u=>t[u],addChecklistTemplate:o,updateChecklistTemplate:s,deleteChecklistTemplate:i,selectedChecklistTemplates:n,updateSelectedChecklistTemplate:a,getRecommendChecklistTemplates:()=>Object.values(t),getChecklistTemplateIdsByGivingDate:({date:u}={date:new Date})=>n.filter(h=>{var p,g;const f=t[h];return((p=f==null?void 0:f.repeat)==null?void 0:p.dayOfWeek.split(",").includes(u.getDay().toString()))||((g=f==null?void 0:f.repeat)==null?void 0:g.dayOfWeek)==="*"})}},Kj="checklist",pp=()=>{const[t,e]=fr(Kj,{}),{getChecklistTemplateIdsByGivingDate:n,checklistTemplate:r}=Es(),[o,s]=I.useState([]),[i,a]=I.useState({}),l=({date:p}={date:new Date})=>{const g=Object.values(t).filter(x=>new Date(x.startedAt).toLocaleDateString()===p.toLocaleDateString()),v=n({date:p}).map(x=>{const w=g.find(k=>k.checklistTemplateId===x);return w||{id:sn(),clientOnly:!0,title:r[x].title,checklistTemplateId:x,startedAt:new Date(p).toISOString(),endedAt:new Date(new Date().setHours(23,59,59,999)).toISOString()}});return{checklistIds:v.map(x=>x.id),checklist:v.reduce((x,w)=>({...x,[w.id]:w}),{})}},c=p=>{e({...t,[p.id]:{...t[p.id],...p}})},d=p=>{const g=sn(),b={...p,id:g};return e({...t,[g]:b}),b},u=({date:p})=>{const{checklistIds:g,checklist:b}=l({date:p});s(g),a(b)},h=p=>Object.values(t).filter(g=>g.checklistTemplateId===p).sort((g,b)=>new Date(g.startedAt)-new Date(b.startedAt)),f=p=>t[p];return{updateChecklist:c,getChecklistByGivingDate:u,getAllChecklistWithTemplate:h,allChecklist:{...i,...t},addChecklist:d,checklistByGivingDateIds:o,getChecklistDetail:f}},Yj="body_metric",Jj=hp(t=>({chartData:{},setChartData:e=>t({chartData:e})})),Zj=hp(t=>({currentDay:new Date,setCurrentDay:e=>t({currentDay:e}),currentBodyMetric:void 0,setCurrentBodyMetric:e=>t({currentBodyMetric:e})})),F0=()=>{const[t,e]=fr(Yj,{}),{chartData:n,setChartData:r}=Jj(),{currentBodyMetric:o,setCurrentBodyMetric:s,currentDay:i,setCurrentDay:a}=Zj(),l=(h=t)=>{const f=Object.values(h).sort((v,x)=>new Date(v.createdAt).getTime()-new Date(x.createdAt).getTime()),p=f.map(v=>new Date(v.createdAt).toLocaleDateString()),g=f.map(v=>v.weight),b=f.map(v=>v.bellySize);return{categories:p,weights:g,bellySizes:b}},c=h=>{const f=l(h);r(f)},d=h=>{const f=Object.values(t).find(b=>new Date(b.createdAt).toLocaleDateString()===new Date(h.createdAt).toLocaleDateString());let p,g=(f==null?void 0:f.id)||"";f?p={...t,[f.id]:{...f,...h}}:(g=sn(),p={...t,[g]:{...h,id:g}}),e(p),c(p),s(p[g])},u=({date:h})=>{const f=Object.values(t).find(p=>new Date(p.createdAt).toLocaleDateString()===h.toLocaleDateString());return s(f),a(h),f};return I.useEffect(()=>{u({date:new Date})},[]),{addBodyMetric:d,getChartData:l,chartData:n,updateChartDate:c,setChartData:r,currentBodyMetric:o,updateCurrentBodyMetric:u,currentDay:i}};var Ti=(t=>(t.Light="light",t.Dark="dark",t))(Ti||{});const pM=I.createContext({pomodoro:0,setPomodoro:()=>{},shortBreak:0,setShortBreak:()=>{},longBreak:0,setLongBreak:()=>{},theme:Ti.Light,setTheme:()=>{}});var mM=(t=>(t[t.Pomodoro=0]="Pomodoro",t[t.ShortBreak=1]="ShortBreak",t[t.LongBreak=2]="LongBreak",t))(mM||{});const Um={time:0,isPlaying:!1,pause:()=>{},start:()=>{},stop:()=>{}};I.createContext({pomodoroTimer:Um,shortBreakTimer:Um,longBreakTimer:Um,pomodoroPhase:mM.Pomodoro,setPomodoroPhase:()=>{},autoStartTimerWhenChangePomodoroPhase:()=>{}});const mp=()=>I.useContext(pM),Wm=60*1e3,Xj=t=>function(e){const[n,r]=fr("pomodoro",{pomodoro:25*Wm,shortBreak:5*Wm,longBreak:10*Wm,theme:Ti.Light});return m.jsx(pM.Provider,{value:{...n,setPomodoro:o=>r({...n,pomodoro:o}),setShortBreak:o=>r({...n,shortBreak:o}),setLongBreak:o=>r({...n,longBreak:o}),setTheme:o=>r({...n,theme:o})},children:m.jsx(t,{...e})})},Qj=t=>`https://raw.githubusercontent.com/zTwist201/audio/main/${t}`;var Ly=(t=>(t.MusicBox="mb",t.Chime="ch",t))(Ly||{});Ly.MusicBox+"",Ly.Chime+"";const eB=(t,e,n)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},gM=I.createContext({messages:{},changeLanguage:()=>{},language:Nc.En,formatMessage:()=>""}),tB=t=>function(n){const[r,o]=fr("app_language",Nc.En),[s,i]=I.useState({}),a=async c=>{const{default:d}=await eB(Object.assign({"./language/en.json":()=>kt(()=>import("./en-DO9OkQie.js"),[]),"./language/vi.json":()=>kt(()=>import("./vi-BU6JAnvG.js"),[])}),`./language/${c}.json`,3);i(d)};I.useEffect(()=>{a(r)},[]);const l=(c,d)=>{const{id:u,defaultMessage:h}=c,f=s[u]||h;return d?Object.entries(d).reduce((p,[g,b])=>p.replace(new RegExp(`{{${g}}}`,"gm"),b),f):f};return m.jsx(gM.Provider,{value:{messages:s,language:r,changeLanguage:async c=>{o(c),a(c)},formatMessage:l},children:m.jsx(t,{...n})})},Rt=()=>I.useContext(gM),nB="_container_uzw7y_2",rB="_body_uzw7y_9",oB="_footer_uzw7y_13",sB="_version_uzw7y_19",iB="_link_uzw7y_24",Pl={container:nB,body:rB,footer:oB,version:sB,link:iB},aB="_container_t6uy9_2",lB="_left_t6uy9_15",cB="_right_t6uy9_24",dB="_rightIcon_t6uy9_30",uB="_backIcon_t6uy9_37",vo={container:aB,left:lB,right:cB,rightIcon:dB,backIcon:uB},yM=Object.freeze({left:0,top:0,width:16,height:16}),Nh=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),z0=Object.freeze({...yM,...Nh}),jy=Object.freeze({...z0,body:"",hidden:!1});function hB(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}function Wx(t,e){const n=hB(t,e);for(const r in jy)r in Nh?r in t&&!(r in n)&&(n[r]=Nh[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function fB(t,e){const n=t.icons,r=t.aliases||Object.create(null),o=Object.create(null);function s(i){if(n[i])return o[i]=[];if(!(i in o)){o[i]=null;const a=r[i]&&r[i].parent,l=a&&s(a);l&&(o[i]=[a].concat(l))}return o[i]}return Object.keys(n).concat(Object.keys(r)).forEach(s),o}function pB(t,e,n){const r=t.icons,o=t.aliases||Object.create(null);let s={};function i(a){s=Wx(r[a]||o[a],s)}return i(e),n.forEach(i),Wx(t,s)}function bM(t,e){const n=[];if(typeof t!="object"||typeof t.icons!="object")return n;t.not_found instanceof Array&&t.not_found.forEach(o=>{e(o,null),n.push(o)});const r=fB(t);for(const o in r){const s=r[o];s&&(e(o,pB(t,o,s)),n.push(o))}return n}const mB={provider:"",aliases:{},not_found:{},...yM};function Gm(t,e){for(const n in e)if(n in t&&typeof t[n]!=typeof e[n])return!1;return!0}function vM(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!Gm(t,mB))return null;const n=e.icons;for(const o in n){const s=n[o];if(!o||typeof s.body!="string"||!Gm(s,jy))return null}const r=e.aliases||Object.create(null);for(const o in r){const s=r[o],i=s.parent;if(!o||typeof i!="string"||!n[i]&&!r[i]||!Gm(s,jy))return null}return e}const wM=/^[a-z0-9]+(-[a-z0-9]+)*$/,gp=(t,e,n,r="")=>{const o=t.split(":");if(t.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;r=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){const a=o.pop(),l=o.pop(),c={provider:o.length>0?o[0]:r,prefix:l,name:a};return e&&!ah(c)?null:c}const s=o[0],i=s.split("-");if(i.length>1){const a={provider:r,prefix:i.shift(),name:i.join("-")};return e&&!ah(a)?null:a}if(n&&r===""){const a={provider:r,prefix:"",name:s};return e&&!ah(a,n)?null:a}return null},ah=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1,Gx=Object.create(null);function gB(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function Da(t,e){const n=Gx[t]||(Gx[t]=Object.create(null));return n[e]||(n[e]=gB(t,e))}function xM(t,e){return vM(e)?bM(e,(n,r)=>{r?t.icons[n]=r:t.missing.add(n)}):[]}function yB(t,e,n){try{if(typeof n.body=="string")return t.icons[e]={...n},!0}catch{}return!1}let Lc=!1;function kM(t){return typeof t=="boolean"&&(Lc=t),Lc}function qx(t){const e=typeof t=="string"?gp(t,!0,Lc):t;if(e){const n=Da(e.provider,e.prefix),r=e.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function bB(t,e){const n=gp(t,!0,Lc);if(!n)return!1;const r=Da(n.provider,n.prefix);return e?yB(r,n.name,e):(r.missing.add(n.name),!0)}function vB(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),Lc&&!e&&!t.prefix){let o=!1;return vM(t)&&(t.prefix="",bM(t,(s,i)=>{bB(s,i)&&(o=!0)})),o}const n=t.prefix;if(!ah({prefix:n,name:"a"}))return!1;const r=Da(e,n);return!!xM(r,t)}const CM=Object.freeze({width:null,height:null}),SM=Object.freeze({...CM,...Nh}),wB=/(-?[0-9.]*[0-9]+[0-9.]*)/g,xB=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Kx(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const r=t.split(wB);if(r===null||!r.length)return t;const o=[];let s=r.shift(),i=xB.test(s);for(;;){if(i){const a=parseFloat(s);isNaN(a)?o.push(s):o.push(Math.ceil(a*e*n)/n)}else o.push(s);if(s=r.shift(),s===void 0)return o.join("");i=!i}}function kB(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const o=t.indexOf(">",r),s=t.indexOf("</"+e);if(o===-1||s===-1)break;const i=t.indexOf(">",s);if(i===-1)break;n+=t.slice(o+1,s).trim(),t=t.slice(0,r).trim()+t.slice(i+1)}return{defs:n,content:t}}function CB(t,e){return t?"<defs>"+t+"</defs>"+e:e}function SB(t,e,n){const r=kB(t);return CB(r.defs,e+r.content+n)}const TB=t=>t==="unset"||t==="undefined"||t==="none";function EB(t,e){const n={...z0,...t},r={...SM,...e},o={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(g=>{const b=[],v=g.hFlip,x=g.vFlip;let w=g.rotate;v?x?w+=2:(b.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),b.push("scale(-1 1)"),o.top=o.left=0):x&&(b.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),b.push("scale(1 -1)"),o.top=o.left=0);let k;switch(w<0&&(w-=Math.floor(w/4)*4),w=w%4,w){case 1:k=o.height/2+o.top,b.unshift("rotate(90 "+k.toString()+" "+k.toString()+")");break;case 2:b.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:k=o.width/2+o.left,b.unshift("rotate(-90 "+k.toString()+" "+k.toString()+")");break}w%2===1&&(o.left!==o.top&&(k=o.left,o.left=o.top,o.top=k),o.width!==o.height&&(k=o.width,o.width=o.height,o.height=k)),b.length&&(s=SB(s,'<g transform="'+b.join(" ")+'">',"</g>"))});const i=r.width,a=r.height,l=o.width,c=o.height;let d,u;i===null?(u=a===null?"1em":a==="auto"?c:a,d=Kx(u,l/c)):(d=i==="auto"?l:i,u=a===null?Kx(d,c/l):a==="auto"?c:a);const h={},f=(g,b)=>{TB(b)||(h[g]=b.toString())};f("width",d),f("height",u);const p=[o.left,o.top,l,c];return h.viewBox=p.join(" "),{attributes:h,viewBox:p,body:s}}const MB=/\sid="(\S+)"/g,AB="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let _B=0;function RB(t,e=AB){const n=[];let r;for(;r=MB.exec(t);)n.push(r[1]);if(!n.length)return t;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const i=typeof e=="function"?e(s):e+(_B++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+i+o+"$3")}),t=t.replace(new RegExp(o,"g"),""),t}const By=Object.create(null);function PB(t,e){By[t]=e}function $y(t){return By[t]||By[""]}function U0(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const W0=Object.create(null),Il=["https://api.simplesvg.com","https://api.unisvg.com"],lh=[];for(;Il.length>0;)Il.length===1||Math.random()>.5?lh.push(Il.shift()):lh.push(Il.pop());W0[""]=U0({resources:["https://api.iconify.design"].concat(lh)});function IB(t,e){const n=U0(e);return n===null?!1:(W0[t]=n,!0)}function G0(t){return W0[t]}const DB=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let Yx=DB();function NB(t,e){const n=G0(t);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let o=0;n.resources.forEach(i=>{o=Math.max(o,i.length)});const s=e+".json?icons=";r=n.maxURL-o-n.path.length-s.length}return r}function OB(t){return t===404}const LB=(t,e,n)=>{const r=[],o=NB(t,e),s="icons";let i={type:s,provider:t,prefix:e,icons:[]},a=0;return n.forEach((l,c)=>{a+=l.length+1,a>=o&&c>0&&(r.push(i),i={type:s,provider:t,prefix:e,icons:[]},a=l.length),i.icons.push(l)}),r.push(i),r};function jB(t){if(typeof t=="string"){const e=G0(t);if(e)return e.path}return"/"}const BB=(t,e,n)=>{if(!Yx){n("abort",424);return}let r=jB(e.provider);switch(e.type){case"icons":{const s=e.prefix,a=e.icons.join(","),l=new URLSearchParams({icons:a});r+=s+".json?"+l.toString();break}case"custom":{const s=e.uri;r+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let o=503;Yx(t+r).then(s=>{const i=s.status;if(i!==200){setTimeout(()=>{n(OB(i)?"abort":"next",i)});return}return o=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?n("abort",s):n("next",o)});return}setTimeout(()=>{n("success",s)})}).catch(()=>{n("next",o)})},$B={prepare:LB,send:BB};function VB(t){const e={loaded:[],missing:[],pending:[]},n=Object.create(null);t.sort((o,s)=>o.provider!==s.provider?o.provider.localeCompare(s.provider):o.prefix!==s.prefix?o.prefix.localeCompare(s.prefix):o.name.localeCompare(s.name));let r={provider:"",prefix:"",name:""};return t.forEach(o=>{if(r.name===o.name&&r.prefix===o.prefix&&r.provider===o.provider)return;r=o;const s=o.provider,i=o.prefix,a=o.name,l=n[s]||(n[s]=Object.create(null)),c=l[i]||(l[i]=Da(s,i));let d;a in c.icons?d=e.loaded:i===""||c.missing.has(a)?d=e.missing:d=e.pending;const u={provider:s,prefix:i,name:a};d.push(u)}),e}function TM(t,e){t.forEach(n=>{const r=n.loaderCallbacks;r&&(n.loaderCallbacks=r.filter(o=>o.id!==e))})}function HB(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let n=!1;const r=t.provider,o=t.prefix;e.forEach(s=>{const i=s.icons,a=i.pending.length;i.pending=i.pending.filter(l=>{if(l.prefix!==o)return!0;const c=l.name;if(t.icons[c])i.loaded.push({provider:r,prefix:o,name:c});else if(t.missing.has(c))i.missing.push({provider:r,prefix:o,name:c});else return n=!0,!0;return!1}),i.pending.length!==a&&(n||TM([t],s.id),s.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),s.abort))})}))}let FB=0;function zB(t,e,n){const r=FB++,o=TM.bind(null,n,r);if(!e.pending.length)return o;const s={id:r,icons:e,callback:t,abort:o};return n.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(s)}),o}function UB(t,e=!0,n=!1){const r=[];return t.forEach(o=>{const s=typeof o=="string"?gp(o,e,n):o;s&&r.push(s)}),r}var WB={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function GB(t,e,n,r){const o=t.resources.length,s=t.random?Math.floor(Math.random()*o):t.index;let i;if(t.random){let S=t.resources.slice(0);for(i=[];S.length>1;){const T=Math.floor(Math.random()*S.length);i.push(S[T]),S=S.slice(0,T).concat(S.slice(T+1))}i=i.concat(S)}else i=t.resources.slice(s).concat(t.resources.slice(0,s));const a=Date.now();let l="pending",c=0,d,u=null,h=[],f=[];typeof r=="function"&&f.push(r);function p(){u&&(clearTimeout(u),u=null)}function g(){l==="pending"&&(l="aborted"),p(),h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function b(S,T){T&&(f=[]),typeof S=="function"&&f.push(S)}function v(){return{startTime:a,payload:e,status:l,queriesSent:c,queriesPending:h.length,subscribe:b,abort:g}}function x(){l="failed",f.forEach(S=>{S(void 0,d)})}function w(){h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function k(S,T,E){const M=T!=="success";switch(h=h.filter(_=>_!==S),l){case"pending":break;case"failed":if(M||!t.dataAfterTimeout)return;break;default:return}if(T==="abort"){d=E,x();return}if(M){d=E,h.length||(i.length?C():x());return}if(p(),w(),!t.random){const _=t.resources.indexOf(S.resource);_!==-1&&_!==t.index&&(t.index=_)}l="completed",f.forEach(_=>{_(E)})}function C(){if(l!=="pending")return;p();const S=i.shift();if(S===void 0){if(h.length){u=setTimeout(()=>{p(),l==="pending"&&(w(),x())},t.timeout);return}x();return}const T={status:"pending",resource:S,callback:(E,M)=>{k(T,E,M)}};h.push(T),c++,u=setTimeout(C,t.rotate),n(S,e,T.callback)}return setTimeout(C),v}function EM(t){const e={...WB,...t};let n=[];function r(){n=n.filter(a=>a().status==="pending")}function o(a,l,c){const d=GB(e,a,l,(u,h)=>{r(),c&&c(u,h)});return n.push(d),d}function s(a){return n.find(l=>a(l))||null}return{query:o,find:s,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:r}}function Jx(){}const qm=Object.create(null);function qB(t){if(!qm[t]){const e=G0(t);if(!e)return;const n=EM(e),r={config:e,redundancy:n};qm[t]=r}return qm[t]}function KB(t,e,n){let r,o;if(typeof t=="string"){const s=$y(t);if(!s)return n(void 0,424),Jx;o=s.send;const i=qB(t);i&&(r=i.redundancy)}else{const s=U0(t);if(s){r=EM(s);const i=t.resources?t.resources[0]:"",a=$y(i);a&&(o=a.send)}}return!r||!o?(n(void 0,424),Jx):r.query(e,o,n)().abort}function Zx(){}function YB(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,HB(t)}))}function JB(t){const e=[],n=[];return t.forEach(r=>{(r.match(wM)?e:n).push(r)}),{valid:e,invalid:n}}function Dl(t,e,n){function r(){const o=t.pendingIcons;e.forEach(s=>{o&&o.delete(s),t.icons[s]||t.missing.add(s)})}if(n&&typeof n=="object")try{if(!xM(t,n).length){r();return}}catch(o){console.error(o)}r(),YB(t)}function Xx(t,e){t instanceof Promise?t.then(n=>{e(n)}).catch(()=>{e(null)}):e(t)}function ZB(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:n,prefix:r}=t,o=t.iconsToLoad;if(delete t.iconsToLoad,!o||!o.length)return;const s=t.loadIcon;if(t.loadIcons&&(o.length>1||!s)){Xx(t.loadIcons(o,r,n),d=>{Dl(t,o,d)});return}if(s){o.forEach(d=>{const u=s(d,r,n);Xx(u,h=>{const f=h?{prefix:r,icons:{[d]:h}}:null;Dl(t,[d],f)})});return}const{valid:i,invalid:a}=JB(o);if(a.length&&Dl(t,a,null),!i.length)return;const l=r.match(wM)?$y(n):null;if(!l){Dl(t,i,null);return}l.prepare(n,r,i).forEach(d=>{KB(n,d,u=>{Dl(t,d.icons,u)})})}))}const XB=(t,e)=>{const n=UB(t,!0,kM()),r=VB(n);if(!r.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(r.loaded,r.missing,r.pending,Zx)}),()=>{l=!1}}const o=Object.create(null),s=[];let i,a;return r.pending.forEach(l=>{const{provider:c,prefix:d}=l;if(d===a&&c===i)return;i=c,a=d,s.push(Da(c,d));const u=o[c]||(o[c]=Object.create(null));u[d]||(u[d]=[])}),r.pending.forEach(l=>{const{provider:c,prefix:d,name:u}=l,h=Da(c,d),f=h.pendingIcons||(h.pendingIcons=new Set);f.has(u)||(f.add(u),o[c][d].push(u))}),s.forEach(l=>{const c=o[l.provider][l.prefix];c.length&&ZB(l,c)}),e?zB(e,r,s):Zx};function QB(t,e){const n={...t};for(const r in e){const o=e[r],s=typeof o;r in CM?(o===null||o&&(s==="string"||s==="number"))&&(n[r]=o):s===typeof n[r]&&(n[r]=r==="rotate"?o%4:o)}return n}const e9=/[\s,]+/;function t9(t,e){e.split(e9).forEach(n=>{switch(n.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function n9(t,e=0){const n=t.replace(/^-?[0-9.]*/,"");function r(o){for(;o<0;)o+=4;return o%4}if(n===""){const o=parseInt(t);return isNaN(o)?0:r(o)}else if(n!==t){let o=0;switch(n){case"%":o=25;break;case"deg":o=90}if(o){let s=parseFloat(t.slice(0,t.length-n.length));return isNaN(s)?0:(s=s/o,s%1===0?r(s):0)}}return e}function r9(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}function o9(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function s9(t){return"data:image/svg+xml,"+o9(t)}function i9(t){return'url("'+s9(t)+'")'}let ic;function a9(){try{ic=window.trustedTypes.createPolicy("iconify",{createHTML:t=>t})}catch{ic=null}}function l9(t){return ic===void 0&&a9(),ic?ic.createHTML(t):t}const MM={...SM,inline:!1},c9={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},d9={display:"inline-block"},Vy={backgroundColor:"currentColor"},AM={backgroundColor:"transparent"},Qx={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},ek={WebkitMask:Vy,mask:Vy,background:AM};for(const t in ek){const e=ek[t];for(const n in Qx)e[t+n]=Qx[n]}const u9={...MM,inline:!0};function tk(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const h9=(t,e,n)=>{const r=e.inline?u9:MM,o=QB(r,e),s=e.mode||"svg",i={},a=e.style||{},l={...s==="svg"?c9:{}};if(n){const b=gp(n,!1,!0);if(b){const v=["iconify"],x=["provider","prefix"];for(const w of x)b[w]&&v.push("iconify--"+b[w]);l.className=v.join(" ")}}for(let b in e){const v=e[b];if(v!==void 0)switch(b){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":break;case"_ref":l.ref=v;break;case"className":l[b]=(l[b]?l[b]+" ":"")+v;break;case"inline":case"hFlip":case"vFlip":o[b]=v===!0||v==="true"||v===1;break;case"flip":typeof v=="string"&&t9(o,v);break;case"color":i.color=v;break;case"rotate":typeof v=="string"?o[b]=n9(v):typeof v=="number"&&(o[b]=v);break;case"ariaHidden":case"aria-hidden":v!==!0&&v!=="true"&&delete l["aria-hidden"];break;default:r[b]===void 0&&(l[b]=v)}}const c=EB(t,o),d=c.attributes;if(o.inline&&(i.verticalAlign="-0.125em"),s==="svg"){l.style={...i,...a},Object.assign(l,d);let b=0,v=e.id;return typeof v=="string"&&(v=v.replace(/-/g,"_")),l.dangerouslySetInnerHTML={__html:l9(RB(c.body,v?()=>v+"ID"+b++:"iconifyReact"))},y.createElement("svg",l)}const{body:u,width:h,height:f}=t,p=s==="mask"||(s==="bg"?!1:u.indexOf("currentColor")!==-1),g=r9(u,{...d,width:h+"",height:f+""});return l.style={...i,"--svg":i9(g),width:tk(d.width),height:tk(d.height),...d9,...p?Vy:AM,...a},y.createElement("span",l)};kM(!0);PB("",$B);if(typeof document<"u"&&typeof window<"u"){const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!vB(r))&&console.error(n)}catch{console.error(n)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let n in e){const r="IconifyProviders["+n+"] is invalid.";try{const o=e[n];if(typeof o!="object"||!o||o.resources===void 0)continue;IB(n,o)||console.error(r)}catch{console.error(r)}}}}function _M(t){const[e,n]=y.useState(!!t.ssr),[r,o]=y.useState({});function s(f){if(f){const p=t.icon;if(typeof p=="object")return{name:"",data:p};const g=qx(p);if(g)return{name:p,data:g}}return{name:""}}const[i,a]=y.useState(s(!!t.ssr));function l(){const f=r.callback;f&&(f(),o({}))}function c(f){if(JSON.stringify(i)!==JSON.stringify(f))return l(),a(f),!0}function d(){var f;const p=t.icon;if(typeof p=="object"){c({name:"",data:p});return}const g=qx(p);if(c({name:p,data:g}))if(g===void 0){const b=XB([p],d);o({callback:b})}else g&&((f=t.onLoad)===null||f===void 0||f.call(t,p))}y.useEffect(()=>(n(!0),l),[]),y.useEffect(()=>{e&&d()},[t.icon,e]);const{name:u,data:h}=i;return h?h9({...z0,...h},t,u):t.children?t.children:t.fallback?t.fallback:y.createElement("span",{})}const f9=y.forwardRef((t,e)=>_M({...t,_ref:e}));y.forwardRef((t,e)=>_M({inline:!0,...t,_ref:e}));const Y=({className:t,...e})=>m.jsx(f9,{className:re(Nd.icon,t),...e}),p9=()=>{const t=xr();return m.jsxs("div",{className:vo.container,children:[m.jsx("div",{className:vo.left,onClick:()=>t("/"),children:"DREAMER"}),m.jsxs("div",{className:vo.right,children:[m.jsx(Y,{className:vo.rightIcon,width:24,icon:"solar:notes-line-duotone",onClick:()=>{t("/notes")}}),m.jsx(Y,{className:vo.rightIcon,width:24,icon:"solar:settings-linear",onClick:()=>{t("/setting")}})]})]})},Xa=({renderLeftComponent:t,renderRightComponent:e,onClickLeftButton:n})=>{const r=xr();return m.jsxs("div",{className:vo.container,children:[m.jsxs("div",{className:vo.left,onClick:n||(()=>r(-1)),children:[m.jsx(Y,{icon:"solar:arrow-left-outline",width:24,className:vo.backIcon}),t==null?void 0:t()]}),m.jsx("div",{className:vo.right,children:e==null?void 0:e()})]})},m9="1.0.1";function g9(){const{shortBreak:t,setShortBreak:e,pomodoro:n,setPomodoro:r,longBreak:o,setLongBreak:s,theme:i,setTheme:a}=mp(),l=xr(),{language:c,changeLanguage:d,formatMessage:u}=Rt();return m.jsxs("div",{className:Pl.container,children:[m.jsx(Xa,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:u({id:"setting-page.title",defaultMessage:"Setting"})})}),m.jsxs("div",{className:Pl.body,children:[m.jsx(st.ItemMeta,{logo:m.jsx(xL,{}),title:u({id:"setting-page.label-theme",defaultMessage:"Theme"}),description:u({id:"setting-page.description-theme",defaultMessage:"Config theme for whole page"}),rightComponent:m.jsx(Oy,{isButton:!0,value:i,onChangeValue:h=>a(h),options:[{label:u({id:"setting-page.label-light",defaultMessage:"Light"}),value:Ti.Light},{label:u({id:"setting-page.label-dark",defaultMessage:"Dark"}),value:Ti.Dark}]})}),m.jsx(st.ItemMeta,{logo:m.jsx(q5,{}),title:"Language",description:"Config language for whole page",rightComponent:m.jsx(Oy,{isButton:!0,value:c,onChangeValue:h=>d(h),options:[{label:"VN",value:Nc.Vi},{label:"EN",value:Nc.En}]})}),m.jsx(st.ItemMeta,{onClick:()=>l("/checklist-template"),logo:m.jsx(Y,{width:24,icon:"proicons:task-list"}),title:"Task Management",description:"Select/ Deselect Tasks"})]}),m.jsxs("a",{href:"https://github.com/tomzaku/dreamer-web-public/issues",className:Pl.footer,children:[m.jsxs(ne.Text,{className:Pl.version,children:["Version: ",m9]}),m.jsx(ne.Text,{className:Pl.link,children:"| Feature Request | Bug Report"})]})]})}const y9="record_field",b9={duration:{id:"duration",title:"Duration",icon:"solar:clock-square-broken",description:"Record duration for tracking purpose",type:"metric",unit:"minutes"},"push-ups":{id:"push-ups",title:"Push-ups",icon:"iconoir:gym",description:"For example: Push-ups, Squats",type:"metric",unit:"reps"},note:{id:"note",title:"Note",icon:"solar:notebook-minimalistic-linear",description:"Note for tracking purpose",type:"note",unit:"words"}},yp=()=>{const[t,e]=fr(y9,b9);return{getAllRecordFields:()=>Object.values(t),getRecordFields:s=>s.map(i=>t[i]),addRecordField:s=>{const i=sn();return e(a=>({...a,[i]:{id:i,...s}})),{id:i,...s}},removeRecordField:s=>{e(i=>{const a={...i};return delete a[s],a})}}},v9="_container_cj2x8_1",w9={container:v9};function Yn({children:t,className:e,onClick:n}){return m.jsx("div",{onClick:n,className:re(w9.container,e),children:t})}const x9="_container_yw9a7_2",k9="_title_yw9a7_8",C9="_button_yw9a7_12",S9="_buttonActive_yw9a7_19",T9="_addIcon_yw9a7_23",E9="_icon_yw9a7_27",M9="_iconActive_yw9a7_31",A9="_hr_yw9a7_35",Zo={container:x9,title:k9,button:C9,buttonActive:S9,addIcon:T9,icon:E9,iconActive:M9,hr:A9},_9="_container_ngn4e_1",R9="_hr_ngn4e_11",nk={container:_9,hr:R9},ac=({classes:t}={})=>m.jsx("div",{className:re(nk.container,t==null?void 0:t.container),children:m.jsx("div",{className:re(nk.hr,t==null?void 0:t.hr)})});var Ut=(t=>(t[t.Home=0]="Home",t[t.History=1]="History",t[t.Add=2]="Add",t[t.Metric=3]="Metric",t))(Ut||{});const P9=({onClickHome:t,onClickHistory:e,onClickAdd:n,onClickMetric:r,activeTab:o,renderTitle:s=()=>null})=>{const i=[{icon:"solar:home-2-line-duotone",iconActive:"solar:home-2-bold",onClick:t,isActive:o===0},{icon:"solar:clock-square-broken",iconActive:"solar:clock-square-bold",onClick:e,isActive:o===1},{icon:"solar:chart-square-linear",iconActive:"solar:chart-square-bold",onClick:r,isActive:o===3}],a=Rt();return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:Zo.container,children:[m.jsx(ne.Title,{level:4,noMargin:!0,className:Zo.title,children:s()}),i.map(({icon:l,iconActive:c,onClick:d,isActive:u},h)=>m.jsx(Y,{onClick:d,className:re(Zo.icon,u&&Zo.iconActive),width:24,icon:u?c:l},h)),m.jsxs(dt,{className:re(Zo.button,o===2&&Zo.buttonActive),type:"dash",onClick:n,children:[m.jsx(Y,{icon:"material-symbols:add",className:Zo.addIcon}),a.formatMessage({id:"record-header.add-record",defaultMessage:"Add"})]})]}),m.jsx(ac,{classes:{hr:Zo.hr}})]})},I9="_cardContainer_8jpqa_2",D9={cardContainer:I9},N9="_container_udzj2_2",O9="_dash_udzj2_18",L9="_solid_udzj2_22",Km={container:N9,dash:O9,solid:L9},Dr=I.forwardRef(({className:t,border:e,...n},r)=>m.jsx("input",{ref:r,className:re(Km.container,e==="dash"&&Km.dash,e==="solid"&&Km.solid,t),...n}));function wt(t){this.content=t}wt.prototype={constructor:wt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new wt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new wt(n)},addToStart:function(t,e){return new wt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new wt(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new wt(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=wt.from(t),t.size?new wt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=wt.from(t),t.size?new wt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=wt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};wt.from=function(t){if(t instanceof wt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new wt(e)};function RM(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=RM(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function PM(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,d=Math.min(i.text.length,a.text.length);for(;c<d&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=PM(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class R{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,o+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new R(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new R(r,o)}cutByIndex(e,n){return e==n?R.empty:e==0&&n==this.content.length?this:new R(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new R(o,s)}addToStart(e){return new R([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new R(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return RM(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return PM(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Cu(0,e);if(e==this.size)return Cu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?Cu(r+1,i):Cu(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return R.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new R(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return R.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new R(n||e,r)}static from(e){if(!e)return R.empty;if(e instanceof R)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new R([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}R.empty=new R([],0);const Ym={index:0,offset:0};function Cu(t,e){return Ym.index=t,Ym.offset=e,Ym}function Oh(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Oh(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Oh(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let De=class Hy{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Oh(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Hy.none;if(e instanceof Hy)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};De.none=[];class Lh extends Error{}class j{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=DM(this.content,e+this.openStart,n);return r&&new j(r,this.openStart,this.openEnd)}removeBetween(e,n){return new j(IM(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return j.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new j(R.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new j(e,r,o)}}j.empty=new j(R.empty,0,0);function IM(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(IM(s.content,e-o-1,n-o-1)))}function DM(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=DM(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function j9(t,e,n){if(n.openStart>t.depth)throw new Lh("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Lh("Inconsistent open depths");return NM(t,e,n,0)}function NM(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=NM(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return gi(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=B9(n,t);return gi(s,LM(t,i,a,e,r))}else return gi(s,jh(t,e,r))}function OM(t,e){if(!e.type.compatibleContent(t.type))throw new Lh("Cannot join "+e.type.name+" onto "+t.type.name)}function Fy(t,e,n){let r=t.node(n);return OM(r,e.node(n)),r}function mi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function lc(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(mi(t.nodeAfter,r),s++));for(let a=s;a<i;a++)mi(o.child(a),r);e&&e.depth==n&&e.textOffset&&mi(e.nodeBefore,r)}function gi(t,e){return t.type.checkContent(e),t.copy(e)}function LM(t,e,n,r,o){let s=t.depth>o&&Fy(t,e,o+1),i=r.depth>o&&Fy(n,r,o+1),a=[];return lc(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(OM(s,i),mi(gi(s,LM(t,e,n,r,o+1)),a)):(s&&mi(gi(s,jh(t,e,o+1)),a),lc(e,n,o,a),i&&mi(gi(i,jh(n,r,o+1)),a)),lc(r,null,o,a),new R(a)}function jh(t,e,n){let r=[];if(lc(null,t,n,r),t.depth>n){let o=Fy(t,e,n+1);mi(gi(o,jh(t,e,n+1)),r)}return lc(e,null,n,r),new R(r)}function B9(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(R.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class jc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return De.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Bh(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new jc(n,r,s)}static resolveCached(e,n){let r=rk.get(e);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else rk.set(e,r=new $9);let o=r.elts[r.i]=jc.resolve(e,n);return r.i=(r.i+1)%V9,o}}class $9{constructor(){this.elts=[],this.i=0}}const V9=12,rk=new WeakMap;class Bh{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const H9=Object.create(null);let To=class zy{constructor(e,n,r,o=De.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||R.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Oh(this.attrs,n||e.defaultAttrs||H9)&&De.sameSet(this.marks,r||De.none)}copy(e=null){return e==this.content?this:new zy(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new zy(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return j.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new j(c,o.depth-i,s.depth-i)}replace(e,n,r){return j9(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return jc.resolveCached(this,e)}resolveNoCache(e){return jc.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),jM(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=R.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=De.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!De.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=R.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};To.prototype.text=void 0;class $h extends To{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):jM(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $h(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $h(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function jM(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ei{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new F9(e,n);if(r.next==null)return Ei.empty;let o=BM(r);r.next&&r.err("Unexpected trailing text");let s=Y9(K9(o));return J9(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return R.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:d,next:u}=i.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(u)==-1){o.push(u);let h=s(u,a.concat(d));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}Ei.empty=new Ei(!0);class F9{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function BM(t){let e=[];do e.push(z9(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function z9(t){let e=[];do e.push(U9(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function U9(t){let e=q9(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=W9(t,e);else break;return e}function ok(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function W9(t,e){let n=ok(t),r=n;return t.eat(",")&&(t.next!="}"?r=ok(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function G9(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(e)&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function q9(t){if(t.eat("(")){let e=BM(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=G9(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function K9(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let d=n();o(s(i.expr,l),d),l=d}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let d=n();r(l,d),o(s(i.expr,l),d),l=d}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function $M(t,e){return e-t}function sk(t,e){let n=[];return r(e),n.sort($M);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function Y9(t){let e=Object.create(null);return n(sk(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<o.length;d++)o[d][0]==a&&(c=o[d][1]);sk(t,l).forEach(d=>{c||o.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[r.join(",")]=new Ei(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort($M);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function J9(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function VM(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function HM(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function FM(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function zM(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new X9(t,r,e[r]);return n}let ik=class UM{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=zM(e,r.attrs),this.defaultAttrs=VM(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ei.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:HM(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new To(this,this.computeAttrs(e),R.from(n),De.setFrom(r))}createChecked(e=null,n,r){return n=R.from(n),this.checkContent(n),new To(this,this.computeAttrs(e),n,De.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=R.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(R.empty,!0);return s?new To(this,e,n.append(s),De.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){FM(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:De.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new UM(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Z9(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class X9{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Z9(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class bp{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=zM(e,o.attrs),this.excluded=null;let s=VM(this.attrs);this.instance=s?new De(this,s):null}create(e=null){return!e&&this.instance?this.instance:new De(this,HM(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new bp(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){FM(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class WM{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=wt.from(e.nodes),n.marks=wt.from(e.marks||{}),this.nodes=ik.compile(this.spec.nodes,this),this.marks=bp.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=Ei.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?ak(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:ak(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ik){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new $h(r,r.defaultAttrs,e,De.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return To.fromJSON(this,e)}markFromJSON(e){return De.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function ak(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Q9(t){return t.tag!=null}function e7(t){return t.style!=null}let Eo=class Uy{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(Q9(o))this.tags.push(o);else if(e7(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new ck(this,n,!1);return r.addAll(e,De.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new ck(this,n,!0);return r.addAll(e,De.none,n.from,n.to),j.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(r7(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=dk(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=dk(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Uy(e,Uy.schemaRules(e)))}};const GM={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},t7={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},qM={ol:!0,ul:!0},Bc=1,Wy=2,ch=4;function lk(t,e,n){return e!=null?(e?Bc:0)|(e==="full"?Wy:0):t&&t.whitespace=="pre"?Bc|Wy:n&-5}class Su{constructor(e,n,r,o,s,i){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=De.none,this.match=s||(i&ch?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(R.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Bc)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=R.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(R.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!GM.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ck{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=lk(null,n.preserveWhitespace,0)|(r?ch:0);o?s=new Su(o.type,o.attrs,De.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new Su(null,null,De.none,!0,null,i):s=new Su(e.schema.topNodeType,null,De.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&Wy?"full":this.localPreserveWS||(o.options&Bc)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;qM.hasOwnProperty(i)&&this.parser.normalizeLists&&n7(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:t7.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(GM.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let u=l&&l.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,n);this.findAtPoint(e,s)}findPlace(e,n,r){let o,s;for(let i=this.open,a=0;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(s);for(let i=0;i<o.length;i++)n=this.enterInner(o[i],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let i=De.none;for(let a of o.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):uk(a.type,e.type))&&(i=a.addToSet(i));return s.content.push(e.mark(i)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=lk(e,s,i.options);i.options&ch&&i.content.length==0&&(a|=ch);let l=De.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):uk(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Su(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Bc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let d=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function n7(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&qM.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function r7(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function dk(t){let e={};for(let n in t)e[n]=t[n];return e}function uk(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&i(d))return!0}};if(i(o.contentMatch))return!0}}class jo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Jm(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],d=this.serializeMark(c,i.isInline,n);d&&(s.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=dh(Jm(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&dh(Jm(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return dh(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new jo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=hk(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return hk(e.marks)}}function hk(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Jm(t){return t.document||window.document}const fk=new WeakMap;function o7(t){let e=fk.get(t);return e===void 0&&fk.set(t,e=s7(t)),e}function s7(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function dh(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=o7(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let u in c)if(c[u]!=null){let h=u.indexOf(" ");h>0?l.setAttributeNS(u.slice(0,h),u.slice(h+1),c[u]):l.setAttribute(u,c[u])}}for(let u=d;u<e.length;u++){let h=e[u];if(h===0){if(u<e.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=dh(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const KM=65535,YM=Math.pow(2,16);function i7(t,e){return t+e*YM}function pk(t){return t&KM}function a7(t){return(t-(t&KM))/YM}const JM=1,ZM=2,uh=4,XM=8;class Gy{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&XM)>0}get deletedBefore(){return(this.delInfo&(JM|uh))>0}get deletedAfter(){return(this.delInfo&(ZM|uh))>0}get deletedAcross(){return(this.delInfo&uh)>0}}class xn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&xn.empty)return xn.empty}recover(e){let n=0,r=pk(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+a7(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+i],u=l+c;if(e<=u){let h=c?e==l?-1:e==u?1:n:n,f=l+o+(h<0?0:d);if(r)return f;let p=e==(n<0?l:u)?null:i7(a/3,e-l),g=e==l?ZM:e==u?JM:uh;return(n<0?e!=l:e!=u)&&(g|=XM),new Gy(f,g,p)}o+=d-c}return r?e+o:new Gy(e+o,0,null)}touches(e,n){let r=0,o=pk(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],d=this.ranges[o+r];e(a,a+c,l,l+d),s+=d-c}}invert(){return new xn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?xn.empty:new xn(e<0?[0,-e,0]:[0,0,e])}}xn.empty=new xn([]);class Na{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Na(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Na;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this._maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Gy(e,o,null)}}const Zm=Object.create(null);class Ht{getMap(){return xn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Zm[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Zm)throw new RangeError("Duplicate use of step JSON ID "+e);return Zm[e]=n,n.prototype.jsonID=e,n}}class it{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new it(e,null)}static fail(e){return new it(null,e)}static fromReplace(e,n,r,o){try{return it.ok(e.replace(n,r,o))}catch(s){if(s instanceof Lh)return it.fail(s.message);throw s}}}function q0(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(q0(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return R.fromArray(r)}class ms extends Ht{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new j(q0(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return it.fromReplace(e,this.from,this.to,s)}invert(){return new Nr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ms(n.pos,r.pos,this.mark)}merge(e){return e instanceof ms&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ms(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ms(n.from,n.to,e.markFromJSON(n.mark))}}Ht.jsonID("addMark",ms);class Nr extends Ht{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new j(q0(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return it.fromReplace(e,this.from,this.to,r)}invert(){return new ms(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Nr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Nr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Nr(n.from,n.to,e.markFromJSON(n.mark))}}Ht.jsonID("removeMark",Nr);class gs extends Ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return it.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return it.fromReplace(e,this.pos,this.pos+1,new j(R.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new gs(this.pos,n.marks[o]);return new gs(this.pos,this.mark)}}return new Mi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gs(n.pos,e.markFromJSON(n.mark))}}Ht.jsonID("addNodeMark",gs);class Mi extends Ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return it.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return it.fromReplace(e,this.pos,this.pos+1,new j(R.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new gs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Mi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Mi(n.pos,e.markFromJSON(n.mark))}}Ht.jsonID("removeNodeMark",Mi);class ot extends Ht{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&qy(e,this.from,this.to)?it.fail("Structure replace would overwrite content"):it.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new xn([this.from,this.to-this.from,this.slice.size])}invert(e){return new ot(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ot(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ot)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?j.empty:new j(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ot(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?j.empty:new j(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ot(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ot(n.from,n.to,j.fromJSON(e,n.slice),!!n.structure)}}Ht.jsonID("replace",ot);class rt extends Ht{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(qy(e,this.from,this.gapFrom)||qy(e,this.gapTo,this.to)))return it.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return it.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?it.fromReplace(e,this.from,this.to,r):it.fail("Content does not fit in gap")}getMap(){return new xn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new rt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new rt(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new rt(n.from,n.to,n.gapFrom,n.gapTo,j.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ht.jsonID("replaceAround",rt);function qy(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function l7(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let u=l.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(u);for(let g=0;g<u.length;g++)u[g].isInSet(p)||(i&&i.to==h&&i.mark.eq(u[g])?i.to=f:o.push(i=new Nr(h,f,u[g])));a&&a.to==h?a.to=f:s.push(a=new ms(h,f,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function c7(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof bp){let c=i.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let d=0;d<l.length;d++){let u=l[d],h;for(let f=0;f<o.length;f++){let p=o[f];p.step==s-1&&u.eq(o[f].style)&&(h=p)}h?(h.to=c,h.step=s):o.push({style:u,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new Nr(i.from,i.to,i.style)))}function K0(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,u=r.matchType(c.type);if(!u)i.push(new ot(a,d,j.empty));else{r=u;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Nr(a,d,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new j(R.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new ot(a+h.index,a+h.index+h[0].length,p))}}a=d}if(!r.validEnd){let l=r.fillBefore(R.empty,!0);t.replace(a,a,new j(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function d7(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Qa(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!d7(o,s,i))break}return null}function u7(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,d=R.empty,u=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,d=R.from(r.node(p).copy(d)),u++):l--;let h=R.empty,f=0;for(let p=s,g=!1;p>n;p--)g||o.after(p+1)<o.end(p)?(g=!0,h=R.from(o.node(p).copy(h)),f++):c++;t.step(new rt(l,c,i,a,new j(d.append(h),u,f),d.size-u,!0))}function QM(t,e,n=null,r=t){let o=h7(t,e),s=o&&f7(r,e);return s?o.map(mk).concat({type:e,attrs:n}).concat(s.map(mk)):null}function mk(t){return{type:t,attrs:null}}function h7(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function f7(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function p7(t,e,n){let r=R.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=R.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new rt(o,s,o,s,new j(r,0,0),n.length,!0))}function m7(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&g7(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&tA(t,i,a,s),K0(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let d=t.mapping.slice(s),u=d.map(a,1),h=d.map(a+i.nodeSize,1);return t.step(new rt(u,h,u+1,h-1,new j(R.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&eA(t,i,a,s),!1}})}function eA(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+s+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function tA(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+s);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function g7(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function y7(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new rt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new j(R.from(i),0,0),1,!0))}function Mo(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=n-2;c>s;c--,d--){let u=o.node(c),h=o.index(c);if(u.type.spec.isolating)return!1;let f=u.content.cutByIndex(h,u.childCount),p=r&&r[d+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[d]||u;if(!u.canReplace(h+1,u.childCount)||!g.type.validContent(f))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function b7(t,e,n=1,r){let o=t.doc.resolve(e),s=R.empty,i=R.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=R.from(o.node(a).copy(s));let d=r&&r[c];i=R.from(d?d.type.create(d.attrs,i):o.node(a).copy(i))}t.step(new ot(e,e,new j(s.append(i),n,n),!0))}function Fi(t,e){let n=t.resolve(e),r=n.index();return nA(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function v7(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),i=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function nA(t,e){return!!(t&&e&&!t.isLeaf&&v7(t,e))}function vp(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&nA(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function w7(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),i=s.node().type;if(o&&i.inlineContent){let d=i.whitespace=="pre",u=!!i.contentMatch.matchType(o);d&&!u?r=!1:!d&&u&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);tA(t,d.node(),d.before(),a)}i.inlineContent&&K0(t,e+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new ot(c,l.map(e+n,-1),j.empty,!0)),r===!0){let d=t.doc.resolve(c);eA(t,d.node(),d.before(),t.steps.length)}return t}function x7(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function rA(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),d=!1;if(s==1)d=c.canReplace(l,l,o);else{let u=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=u&&c.canReplaceWith(l,l,u[0])}if(d)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function wp(t,e,n=e,r=j.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return oA(o,s,r)?new ot(e,n,r):new k7(o,s,r).fit()}function oA(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class k7{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=R.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=R.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new j(s,i,a);return e>-1?new rt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ot(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=Xm(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,u=null;if(n==1&&(i?c.matchType(i.type)||(u=c.fillBefore(R.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:u};if(n==2&&i&&(d=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Xm(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new j(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Xm(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new j(Jl(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new j(Jl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,d=[],{match:u,type:h}=this.frontier[n];if(o){for(let g=0;g<o.childCount;g++)d.push(o.child(g));u=u.matchFragment(o)}let f=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let g=a.child(c),b=u.matchType(g.type);if(!b)break;c++,(c>1||l==0||g.content.size)&&(u=b,d.push(sA(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Zl(this.placed,n,R.from(d)),this.frontier[n].match=u,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=a;g<f;g++){let v=b.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),b=v.content}this.unplaced=p?e==0?j.empty:new j(Jl(i.content,e-1,1),e-1,f<0?i.openEnd:e-1):new j(Jl(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Qm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=Qm(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=Qm(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Zl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Zl(this.placed,this.depth,R.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(R.empty,!0);n.childCount&&(this.placed=Zl(this.placed,this.frontier.length,n))}}function Jl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Jl(t.firstChild.content,e-1,n)))}function Zl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Zl(t.lastChild.content,e-1,n)))}function Xm(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function sA(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,sA(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(R.empty,!0)))),t.copy(r)}function Qm(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!C7(n,s.content,i)?a:null}function C7(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function S7(t){return t.spec.defining||t.spec.definingForContent}function T7(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(oA(o,s,r))return t.step(new ot(e,n,r));let i=aA(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let h=o.depth,f=o.pos-1;h>0;h--,f--){let p=o.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;i.indexOf(h)>-1?a=h:o.before(h)==f&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],d=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=d-1;h>=0;h--){let f=c[h],p=S7(f.type);if(p&&!f.sameMarkup(o.node(Math.abs(a)-1)))d=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+d+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<i.length;g++){let b=i[(g+l)%i.length],v=!0;b<0&&(v=!1,b=-b);let x=o.node(b-1),w=o.index(b-1);if(x.canReplaceWith(w,w,p.type,p.marks))return t.replace(o.before(b),v?s.after(b):n,new j(iA(r.content,0,r.openStart,f),f,r.openEnd))}}let u=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>u));h--){let f=i[h];f<0||(e=o.before(f),n=s.after(f))}}function iA(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(iA(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(R.empty,!0))}return t}function E7(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=x7(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new j(R.from(r),0,0))}function M7(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=aA(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function aA(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class ka extends Ht{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return it.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return it.fromReplace(e,this.pos,this.pos+1,new j(R.from(o),0,n.isLeaf?0:1))}getMap(){return xn.empty}invert(e){return new ka(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ka(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ka(n.pos,n.attr,n.value)}}Ht.jsonID("attr",ka);class $c extends Ht{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return it.ok(r)}getMap(){return xn.empty}invert(e){return new $c(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new $c(n.attr,n.value)}}Ht.jsonID("docAttr",$c);let Oa=class extends Error{};Oa=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Oa.prototype=Object.create(Error.prototype);Oa.prototype.constructor=Oa;Oa.prototype.name="TransformError";class Y0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Na}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Oa(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=j.empty){let o=wp(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new j(R.from(r),0,0))}delete(e,n){return this.replace(e,n,j.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return T7(this,e,n,r),this}replaceRangeWith(e,n,r){return E7(this,e,n,r),this}deleteRange(e,n){return M7(this,e,n),this}lift(e,n){return u7(this,e,n),this}join(e,n=1){return w7(this,e,n),this}wrap(e,n){return p7(this,e,n),this}setBlockType(e,n=e,r,o=null){return m7(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return y7(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new ka(e,n,r)),this}setDocAttribute(e,n){return this.step(new $c(e,n)),this}addNodeMark(e,n){return this.step(new gs(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof De)n.isInSet(r.marks)&&this.step(new Mi(e,n));else{let o=r.marks,s,i=[];for(;s=n.isInSet(o);)i.push(new Mi(e,s)),o=s.removeFromSet(o);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(e,n=1,r){return b7(this,e,n,r),this}addMark(e,n,r){return l7(this,e,n,r),this}removeMark(e,n,r){return c7(this,e,n,r),this}clearIncompatible(e,n,r){return K0(this,e,n,r),this}}const eg=Object.create(null);class ee{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new lA(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=j.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?j.empty:n),a==0&&bk(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),bk(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new U(e):da(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?da(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):da(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new un(e.node(0))}static atStart(e){return da(e,e,0,0,1)||new un(e)}static atEnd(e){return da(e,e,e.content.size,e.childCount,-1)||new un(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=eg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in eg)throw new RangeError("Duplicate use of selection JSON ID "+e);return eg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return U.between(this.$anchor,this.$head).getBookmark()}}ee.prototype.visible=!0;class lA{constructor(e,n){this.$from=e,this.$to=n}}let gk=!1;function yk(t){!gk&&!t.parent.inlineContent&&(gk=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class U extends ee{constructor(e,n=e){yk(e),yk(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ee.near(r);let o=e.resolve(n.map(this.anchor));return new U(o.parent.inlineContent?o:r,r)}replace(e,n=j.empty){if(super.replace(e,n),n==j.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof U&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new xp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new U(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=ee.findFrom(n,r,!0)||ee.findFrom(n,-r,!0);if(s)n=s.$head;else return ee.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(ee.findFrom(e,-r,!0)||ee.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new U(e,n)}}ee.jsonID("text",U);class xp{constructor(e,n){this.anchor=e,this.head=n}map(e){return new xp(e.map(this.anchor),e.map(this.head))}resolve(e){return U.between(e.resolve(this.anchor),e.resolve(this.head))}}class q extends ee{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?ee.near(s):new q(s)}content(){return new j(R.from(this.node),0,0)}eq(e){return e instanceof q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new J0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new q(e.resolve(n.anchor))}static create(e,n){return new q(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}q.prototype.visible=!1;ee.jsonID("node",q);class J0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new xp(r,r):new J0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&q.isSelectable(r)?new q(n):ee.near(n)}}class un extends ee{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=j.empty){if(n==j.empty){e.delete(0,e.doc.content.size);let r=ee.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new un(e)}map(e){return new un(e)}eq(e){return e instanceof un}getBookmark(){return A7}}ee.jsonID("all",un);const A7={map(){return this},resolve(t){return new un(t)}};function da(t,e,n,r,o,s=!1){if(e.inlineContent)return U.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&q.isSelectable(a))return q.create(t,n-(o<0?a.nodeSize:0))}else{let l=da(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function bk(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof ot||o instanceof rt))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,d)=>{i==null&&(i=d)}),t.setSelection(ee.near(t.doc.resolve(i),n))}const vk=1,wk=2,xk=4;let _7=class extends Y0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|vk)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&vk)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wk,this}ensureMarks(e){return De.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wk)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||De.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(ee.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=xk,this}get scrolledIntoView(){return(this.updated&xk)>0}};function kk(t,e){return!e||!t?t:t.bind(e)}class Xl{constructor(e,n,r){this.name=e,this.init=kk(n.init,r),this.apply=kk(n.apply,r)}}const R7=[new Xl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Xl("selection",{init(t,e){return t.selection||ee.atStart(e.doc)},apply(t){return t.selection}}),new Xl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Xl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class tg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=R7.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Xl(r.key,r.spec.state,r))})}}class ai{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,i)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let u=0;u<this.config.plugins.length;u++)o.push(u<i?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ai(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new _7(this)}static create(e){let n=new tg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ai(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new tg(this.schema,e.plugins),r=n.fields,o=new ai(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new tg(e.schema,e.plugins),s=new ai(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=To.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=ee.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function cA(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=cA(o,e,{})),n[r]=o}return n}class me{constructor(e){this.spec=e,this.props={},e.props&&cA(e.props,this,this.props),this.key=e.key?e.key.key:dA("plugin")}getState(e){return e[this.key]}}const ng=Object.create(null);function dA(t){return t in ng?t+"$"+ ++ng[t]:(ng[t]=0,t+"$")}class Te{constructor(e="key"){this.key=dA(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ct=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},La=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Ky=null;const yo=function(t,e,n){let r=Ky||(Ky=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},P7=function(){Ky=null},Ai=function(t,e,n,r){return n&&(Ck(t,e,n,r,-1)||Ck(t,e,n,r,1))},I7=/^(img|br|input|textarea|hr)$/i;function Ck(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Fn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Od(t)||I7.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ct(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?Fn(t):0}else return!1}}function Fn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function D7(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Fn(t)}else if(t.parentNode&&!Od(t))e=Ct(t),t=t.parentNode;else return null}}function N7(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Od(t))e=Ct(t)+1,t=t.parentNode;else return null}}function O7(t,e,n){for(let r=e==0,o=e==Fn(t);r||o;){if(t==n)return!0;let s=Ct(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==Fn(t)}}function Od(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const kp=function(t){return t.focusNode&&Ai(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ni(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function L7(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function j7(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Fn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Fn(r.startContainer),r.startOffset)}}}const zr=typeof navigator<"u"?navigator:null,Sk=typeof document<"u"?document:null,Bs=zr&&zr.userAgent||"",Yy=/Edge\/(\d+)/.exec(Bs),uA=/MSIE \d/.exec(Bs),Jy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bs),hn=!!(uA||Jy||Yy),ks=uA?document.documentMode:Jy?+Jy[1]:Yy?+Yy[1]:0,pr=!hn&&/gecko\/(\d+)/i.test(Bs);pr&&+(/Firefox\/(\d+)/.exec(Bs)||[0,0])[1];const Zy=!hn&&/Chrome\/(\d+)/.exec(Bs),Lt=!!Zy,hA=Zy?+Zy[1]:0,Yt=!hn&&!!zr&&/Apple Computer/.test(zr.vendor),ja=Yt&&(/Mobile\/\w+/.test(Bs)||!!zr&&zr.maxTouchPoints>2),$n=ja||(zr?/Mac/.test(zr.platform):!1),B7=zr?/Win/.test(zr.platform):!1,xo=/Android \d/.test(Bs),Ld=!!Sk&&"webkitFontSmoothing"in Sk.documentElement.style,$7=Ld?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function V7(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ao(t,e){return typeof t=="number"?t:t[e]}function H7(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Tk(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;){if(i.nodeType!=1){i=La(i);continue}let a=i,l=a==s.body,c=l?V7(s):H7(a),d=0,u=0;if(e.top<c.top+ao(r,"top")?u=-(c.top-e.top+ao(o,"top")):e.bottom>c.bottom-ao(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+ao(o,"top")-c.top:e.bottom-c.bottom+ao(o,"bottom")),e.left<c.left+ao(r,"left")?d=-(c.left-e.left+ao(o,"left")):e.right>c.right-ao(r,"right")&&(d=e.right-c.right+ao(o,"right")),d||u)if(l)s.defaultView.scrollBy(d,u);else{let f=a.scrollLeft,p=a.scrollTop;u&&(a.scrollTop+=u),d&&(a.scrollLeft+=d);let g=a.scrollLeft-f,b=a.scrollTop-p;e={left:e.left-g,top:e.top-b,right:e.right-g,bottom:e.bottom-b}}let h=l?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(h))break;i=h=="absolute"?i.offsetParent:La(i)}}function F7(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:fA(t.dom)}}function fA(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=La(r));return e}function z7({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;pA(n,r==0?0:r-e)}function pA(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ea=null;function U7(t){if(t.setActive)return t.setActive();if(ea)return t.focus(ea);let e=fA(t);t.focus(ea==null?{get preventScroll(){return ea={preventScroll:!0},!0}}:void 0),ea||(ea=!1,pA(e,0))}function mA(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let d=t.firstChild,u=0;d;d=d.nextSibling,u++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=yo(d).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=i&&p.bottom>=a){i=Math.max(p.bottom,i),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=d,r=g,o=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,d.nodeType==1&&g&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=d,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?W7(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:mA(n,o)}function W7(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=rs(r,1);if(s.top!=s.bottom&&Z0(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Z0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function G7(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function q7(t,e,n){let{node:r,offset:o}=mA(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function K7(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function gA(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Z0(e,c))return gA(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function Y7(t,e){let n=t.dom.ownerDocument,r,o=0,s=j7(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!Z0(e,c)||(i=gA(t.dom,e,c),!i))return null}if(Yt)for(let c=i;r&&c;c=La(c))c.draggable&&(r=void 0);if(i=G7(i,e),r){if(pr&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}let c;Ld&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=K7(t,r,o,e))}a==null&&(a=q7(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Ek(t){return t.top<t.bottom||t.left<t.right}function rs(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Ek(r))return r}return Array.prototype.find.call(n,Ek)||t.getBoundingClientRect()}const J7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function yA(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=Ld||pr;if(r.nodeType==3)if(i&&(J7.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=rs(yo(r,o,o),n);if(pr&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=rs(yo(r,o-1,o-1),-1);if(c.top==l.top){let d=rs(yo(r,o,o+1),-1);if(d.top!=l.top)return Nl(d,d.left<c.left)}}return l}else{let l=o,c=o,d=n<0?1:-1;return n<0&&!o?(c++,d=-1):n>=0&&o==r.nodeValue.length?(l--,d=1):n<0?l--:c++,Nl(rs(yo(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==Fn(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return rg(l.getBoundingClientRect(),!1)}if(s==null&&o<Fn(r)){let l=r.childNodes[o];if(l.nodeType==1)return rg(l.getBoundingClientRect(),!0)}return rg(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==Fn(r))){let l=r.childNodes[o-1],c=l.nodeType==3?yo(l,Fn(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Nl(rs(c,1),!1)}if(s==null&&o<Fn(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?yo(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Nl(rs(c,-1),!0)}return Nl(rs(r.nodeType==3?yo(r):r,-n),n>=0)}function Nl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function rg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function bA(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function Z7(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return bA(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=yA(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=yo(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?i.top-d.top>(d.bottom-i.top)*2:d.bottom-i.bottom>(i.bottom-d.top)*2))return!1}}return!0})}const X7=/[\u0590-\u08ac]/;function Q7(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return a?!X7.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:bA(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:u}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),b=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(d,u),l&&(l!=d||c!=u)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),b}):r.pos==r.start()||r.pos==r.end()}let Mk=null,Ak=null,_k=!1;function e8(t,e,n){return Mk==e&&Ak==n?_k:(Mk=e,Ak=n,_k=n=="up"||n=="down"?Z7(t,e,n):Q7(t,e,n))}const Gn=0,Rk=1,li=2,Ur=3;class jd{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Gn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Ct(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof wA){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof vA&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Ct(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Ct(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let d=i+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=i;for(let u=a;u>0;u--){let h=this.children[u-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=Ct(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=Ct(u.dom);break}n+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],b=p+g.size;if(s>p&&i<b)return g.setSelection(e-p-g.border,n-p-g.border,r,o);p=b}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),u=!1;if((pr||Yt)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(u=!!(p&&f.nodeValue[p-1]==`
`),u&&p==f.nodeValue.length)for(let g=f,b;g;g=g.parentNode){if(b=g.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:Ct(b)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=f.childNodes[p-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(pr&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let f=d.focusNode.childNodes[d.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||u&&Yt)&&Ai(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Ai(l.node,l.offset,d.focusNode,d.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?li:Rk,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ur:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?li:Ur}r=i}this.dirty=li}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?li:Rk;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class vA extends jd{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Gn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class t8 extends jd{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class _i extends jd{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=jo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new _i(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&Ur||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ur&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Gn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Gn}}slice(e,n,r){let o=_i.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=Qy(s,n,i,r)),e>0&&(s=Qy(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Cs extends jd{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),d=c&&c.dom,u=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=jo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!u&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=CA(d,r,n),c?l=new n8(e,n,r,o,d,u||null,h,c,s,i+1):n.isText?new Cp(e,n,r,o,d,h,s):new Cs(e,n,r,o,d,u||null,h,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>R.empty)}return e}matchesNode(e,n,r){return this.dirty==Gn&&e.eq(this.node)&&Vh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new o8(this,i&&i.node,e);a8(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&l.syncToMarks(d==this.node.childCount?De.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,o)},(c,d,u,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,d,u,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,u,f,e)||l.updateNextNode(c,d,u,e,h,o)||l.addNode(c,d,u,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==li)&&(i&&this.protectLocalComposition(e,i),xA(this.contentDOM,this.children,e),ja&&l8(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof U)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=c8(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new t8(this,s,n,o);e.input.compositionNodes.push(i),this.children=Qy(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==Ur||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Gn}updateOuterDeco(e){if(Vh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=kA(this.dom,this.nodeDOM,Xy(this.outerDeco,this.node,n),Xy(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Pk(t,e,n,r,o){CA(r,e,t);let s=new Cs(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class Cp extends Cs{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Ur||this.dirty!=Gn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Gn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Gn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new Cp(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ur)}get domAtom(){return!1}isText(e){return this.node.text==e}}class wA extends jd{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Gn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class n8 extends Cs{constructor(e,n,r,o,s,i,a,l,c,d){super(e,n,r,o,s,i,a,c,d),this.spec=l}update(e,n,r,o){if(this.dirty==Ur)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function xA(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=Ik(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof _i){let l=r?r.previousSibling:t.lastChild;xA(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Ik(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const cc=function(t){t&&(this.nodeName=t)};cc.prototype=Object.create(null);const ci=[new cc];function Xy(t,e,n){if(t.length==0)return ci;let r=n?ci[0]:new cc,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new cc(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new cc(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function kA(t,e,n,r){if(n==ci&&r==ci)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=ci[0]),o=l}r8(o,a||ci[0],i)}return o}function r8(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function CA(t,e,n){return kA(t,t,ci,Xy(e,n,t.nodeType!=1))}function Vh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ik(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class o8{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=s8(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Gn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=_i.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==Ur&&i.dom==i.contentDOM&&(i.dirty=li),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Cs){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,u,h=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ur&&Vh(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(u=this.recreateWrapper(l,e,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=li,u.updateChildren(o,i+1),u.dirty=Gn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Vh(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=Cs.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=Cs.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new vA(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof _i;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Cp)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Yt||Lt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new wA(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function s8(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof _i)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function i8(t,e){return t.type.side-e.type.side}function a8(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,o,e.forChild(s,d),c),s+=d.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let d,u;for(;i<o.length&&o[i].to==s;){let b=o[i++];b.widget&&(d?(u||(u=[d])).push(b):d=b)}if(d)if(u){u.sort(i8);for(let b=0;b<u.length;b++)n(u[b],c,!!l)}else n(d,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let p=s+h.nodeSize;if(h.isText){let b=p;i<o.length&&o[i].from<b&&(b=o[i].from);for(let v=0;v<a.length;v++)a[v].to<b&&(b=a[v].to);b<p&&(l=h.cut(b-s),h=h.cut(0,b-s),p=b,f=-1)}else for(;i<o.length&&o[i].to<p;)i++;let g=h.isInline&&!h.isLeaf?a.filter(b=>!b.inline):a.slice();r(h,g,e.forChild(s,h),f),s=p}}function l8(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function c8(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Qy(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,d=a+=l.size;c>=n||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),d>n&&s.push(l.slice(n-c,l.size,r)))}return s}function X0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(kp(n)){for(l=i;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&q.isSelectable(u)&&o.parent&&!(u.isInline&&O7(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new q(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let u=i,h=i;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);u=Math.min(u,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[l,i]=h==t.state.selection.anchor?[h,u]:[u,h],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=Q0(t,d,a,u)}return c}function SA(t){return t.editable?t.hasFocus():EA(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ao(t,e=!1){let n=t.state.selection;if(TA(t,n),!!SA(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Lt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Ai(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)u8(t);else{let{anchor:r,head:o}=n,s,i;Dk&&!(n instanceof U)&&(n.$from.parent.inlineContent||(s=Nk(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=Nk(t,n.to))),t.docView.setSelection(r,o,t,e),Dk&&(s&&Ok(s),i&&Ok(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&d8(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Dk=Yt||Lt&&hA<63;function Nk(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Yt&&o&&o.contentEditable=="false")return og(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return og(o);if(s)return og(s)}}function og(t){return t.contentEditable="true",Yt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Ok(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function d8(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!SA(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function u8(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Ct(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&hn&&ks<=11&&(r.disabled=!0,r.disabled=!1)}function TA(t,e){if(e instanceof q){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Lk(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Lk(t)}function Lk(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Q0(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||U.between(e,n,r)}function jk(t){return t.editable&&!t.hasFocus()?!1:EA(t)}function EA(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function h8(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ai(e.node,e.offset,n.anchorNode,n.anchorOffset)}function eb(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&ee.findFrom(s,e)}function is(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Bk(t,e,n){let r=t.state.selection;if(r instanceof U)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return is(t,new U(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=eb(t.state,e);return o&&o instanceof q?is(t,o):!1}else if(!($n&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?q.isSelectable(s)?is(t,new q(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Ld?is(t,new U(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof q&&r.node.isInline)return is(t,new U(e>0?r.$to:r.$from));{let o=eb(t.state,e);return o?is(t,o):!1}}}function Hh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function dc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ta(t,e){return e<0?f8(t):p8(t)}function f8(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(pr&&n.nodeType==1&&r<Hh(n)&&dc(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(dc(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(MA(n))break;{let a=n.previousSibling;for(;a&&dc(a,-1);)o=n.parentNode,s=Ct(a),a=a.previousSibling;if(a)n=a,r=Hh(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?tb(t,n,r):o&&tb(t,o,s)}function p8(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Hh(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(dc(a,1))s=n,i=++r;else break}else{if(MA(n))break;{let a=n.nextSibling;for(;a&&dc(a,1);)s=a.parentNode,i=Ct(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Hh(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&tb(t,s,i)}function MA(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function m8(t,e){for(;t&&e==t.childNodes.length&&!Od(t);)e=Ct(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function g8(t,e){for(;t&&!e&&!Od(t);)e=Ct(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function tb(t,e,n){if(e.nodeType!=3){let s,i;(i=m8(e,n))?(e=i,n=0):(s=g8(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(kp(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Ao(t)},50)}function $k(t,e){let n=t.state.doc.resolve(e);if(!(Lt||B7)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Vk(t,e,n){let r=t.state.selection;if(r instanceof U&&!r.empty||n.indexOf("s")>-1||$n&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=eb(t.state,e);if(i&&i instanceof q)return is(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof un?ee.near(i,e):ee.findFrom(i,e);return a?is(t,a):!1}return!1}function Hk(t,e){if(!(t.state.selection instanceof U))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function Fk(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function y8(t){if(!Yt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Fk(t,r,"true"),setTimeout(()=>Fk(t,r,"false"),20)}return!1}function b8(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function v8(t,e){let n=e.keyCode,r=b8(e);if(n==8||$n&&n==72&&r=="c")return Hk(t,-1)||ta(t,-1);if(n==46&&!e.shiftKey||$n&&n==68&&r=="c")return Hk(t,1)||ta(t,1);if(n==13||n==27)return!0;if(n==37||$n&&n==66&&r=="c"){let o=n==37?$k(t,t.state.selection.from)=="ltr"?-1:1:-1;return Bk(t,o,r)||ta(t,o)}else if(n==39||$n&&n==70&&r=="c"){let o=n==39?$k(t,t.state.selection.from)=="ltr"?1:-1:1;return Bk(t,o,r)||ta(t,o)}else{if(n==38||$n&&n==80&&r=="c")return Vk(t,-1,r)||ta(t,-1);if(n==40||$n&&n==78&&r=="c")return y8(t)||Vk(t,1,r)||ta(t,1);if(r==($n?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function e1(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let i=t.someProp("clipboardSerializer")||jo.fromSchema(t.state.schema),a=DA(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=IA[c.nodeName.toLowerCase()]);){for(let f=d.length-1;f>=0;f--){let p=a.createElement(d[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${u?` -${u}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function AA(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new j(R.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):j.empty;let u=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(u)a=u;else{let h=o.marks(),{schema:f}=t.state,p=jo.fromSchema(f);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let b=i.appendChild(document.createElement("p"));g&&b.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",u=>{n=u(n,t)}),i=C8(n),Ld&&S8(i);let c=i&&i.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Eo.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||d),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!w8.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)a=T8(zk(a,+d[1],+d[2]),d[4]);else if(a=j.maxOpen(x8(a.content,o),!0),a.openStart||a.openEnd){let u=0,h=0;for(let f=a.content.firstChild;u<a.openStart&&!f.type.spec.isolating;u++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=zk(a,u,h)}return t.someProp("transformPasted",u=>{a=u(a,t)}),a}const w8=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function x8(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&RA(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=PA(i[i.length-1],s.length));let d=_A(a,l);i.push(d),o=o.matchType(d.type),s=l}}),i)return R.from(i)}return t}function _A(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,R.from(t));return t}function RA(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=RA(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(R.from(_A(n,t,o+1))))}}function PA(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,PA(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(R.empty,!0);return t.copy(n.append(r))}function nb(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=nb(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(R.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function zk(t,e,n){return e<t.openStart&&(t=new j(nb(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new j(nb(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const IA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Uk=null;function DA(){return Uk||(Uk=document.implementation.createHTMLDocument("title"))}let sg=null;function k8(t){let e=window.trustedTypes;return e?(sg||(sg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),sg.createHTML(t)):t}function C8(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=DA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&IA[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=k8(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function S8(t){let e=t.querySelectorAll(Lt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function T8(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=R.from(l.create(r[a+1],o)),s++,i++}return new j(o,s,i)}const Jt={},Zt={},E8={touchstart:!0,touchmove:!0};class M8{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function A8(t){for(let e in Jt){let n=Jt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{R8(t,r)&&!t1(t,r)&&(t.editable||!(r.type in Zt))&&n(t,r)},E8[e]?{passive:!0}:void 0)}Yt&&t.dom.addEventListener("input",()=>null),rb(t)}function ys(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function _8(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function rb(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>t1(t,r))})}function t1(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function R8(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function P8(t,e){!t1(t,e)&&Jt[e.type]&&(t.editable||!(e.type in Zt))&&Jt[e.type](t,e)}Zt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!OA(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(xo&&Lt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ja&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,ni(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||v8(t,n)?n.preventDefault():ys(t,"key")};Zt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Zt.keypress=(t,e)=>{let n=e;if(OA(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||$n&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof U)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function Sp(t){return{left:t.clientX,top:t.clientY}}function I8(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function n1(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function Ca(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function D8(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&q.isSelectable(r)?(Ca(t,new q(n)),!0):!1}function N8(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof q&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(q.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(Ca(t,q.create(t.state.doc,o)),!0):!1}function O8(t,e,n,r,o){return n1(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?N8(t,n):D8(t,n))}function L8(t,e,n,r){return n1(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function j8(t,e,n,r){return n1(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||B8(t,n,r)}function B8(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ca(t,U.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)Ca(t,U.create(r,a+1,a+1+i.content.size));else if(q.isSelectable(i))Ca(t,q.create(r,a));else continue;return!0}}function r1(t){return Fh(t)}const NA=$n?"metaKey":"ctrlKey";Jt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=r1(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&I8(n,t.input.lastClick)&&!n[NA]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s,button:n.button};let i=t.posAtCoords(Sp(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new $8(t,i,n,!!r)):(s=="doubleClick"?L8:j8)(t,i.pos,i.inside,n)?n.preventDefault():ys(t,"pointer"))};class $8{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[NA],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,i=d.depth?d.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof q&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&pr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ys(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ao(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Sp(e))),this.updateAllowDefault(e),this.allowDefault||!n?ys(this.view,"pointer"):O8(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Yt&&this.mightDrag&&!this.mightDrag.node.isAtom||Lt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ca(this.view,ee.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ys(this.view,"pointer")}move(e){this.updateAllowDefault(e),ys(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Jt.touchstart=t=>{t.input.lastTouch=Date.now(),r1(t),ys(t,"pointer")};Jt.touchmove=t=>{t.input.lastTouch=Date.now(),ys(t,"pointer")};Jt.contextmenu=t=>r1(t);function OA(t,e){return t.composing?!0:Yt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const V8=xo?5e3:-1;Zt.compositionstart=Zt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof U&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Fh(t,!0),t.markCursor=null;else if(Fh(t,!e.selection.empty),pr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}LA(t,V8)};Zt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,LA(t,20))};function LA(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Fh(t),e))}function jA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=F8());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function H8(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=D7(e.focusNode,e.focusOffset),r=N7(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function F8(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Fh(t,e=!1){if(!(xo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),jA(t),e||t.docView&&t.docView.dirty){let n=X0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function z8(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Vc=hn&&ks<15||ja&&$7<604;Jt.copy=Zt.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=Vc?null:n.clipboardData,i=r.content(),{dom:a,text:l}=e1(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):z8(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function U8(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function W8(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Hc(t,r.value,null,o,e):Hc(t,r.textContent,r.innerHTML,o,e)},50)}function Hc(t,e,n,r,o){let s=AA(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||j.empty)))return!0;if(!s)return!1;let i=U8(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function BA(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Zt.paste=(t,e)=>{let n=e;if(t.composing&&!xo)return;let r=Vc?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Hc(t,BA(r),r.getData("text/html"),o,n)?n.preventDefault():W8(t,n)};class $A{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const G8=$n?"altKey":"ctrlKey";function VA(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[G8]}Jt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(Sp(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof q?o.to-1:o.to))){if(r&&r.mightDrag)i=q.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(i=q.create(t.state.doc,u.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:d}=e1(t,a);(!n.dataTransfer.files.length||!Lt||hA>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Vc?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Vc||n.dataTransfer.setData("text/plain",c),t.dragging=new $A(d,VA(t,n),i)};Jt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Zt.dragover=Zt.dragenter=(t,e)=>e.preventDefault();Zt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Sp(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t)}):i=AA(t,BA(n.dataTransfer),Vc?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&VA(t,n));if(t.someProp("handleDrop",p=>p(t,n,i||j.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?rA(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(u?c.replaceRangeWith(d,d,i.content.firstChild):c.replaceRange(d,d,i),c.doc.eq(h))return;let f=c.doc.resolve(d);if(u&&q.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new q(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,b,v,x)=>p=x),c.setSelection(Q0(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Jt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ao(t)},20))};Jt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Jt.beforeinput=(t,e)=>{if(Lt&&xo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,ni(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Zt)Jt[t]=Zt[t];function Fc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class zh{constructor(e,n){this.toDOM=e,this.spec=n||yi,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new _e(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof zh&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Fc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ss{constructor(e,n){this.attrs=e,this.spec=n||yi}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new _e(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ss&&Fc(this.attrs,e.attrs)&&Fc(this.spec,e.spec)}static is(e){return e.type instanceof Ss}destroy(){}}class o1{constructor(e,n){this.attrs=e,this.spec=n||yi}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new _e(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof o1&&Fc(this.attrs,e.attrs)&&Fc(this.spec,e.spec)}destroy(){}}class _e{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new _e(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new _e(e,e,new zh(n,r))}static inline(e,n,r,o){return new _e(e,n,new Ss(r,o))}static node(e,n,r,o){return new _e(e,n,new o1(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ss}get widget(){return this.type instanceof zh}}const ua=[],yi={};class be{constructor(e,n){this.local=e.length?e:ua,this.children=n.length?n:ua}static create(e,n){return n.length?Uh(n,e,0,yi):Nt}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==Nt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||yi)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?q8(this.children,i||[],e,n,r,o,s):i?new be(i.sort(bi),ua):Nt}add(e,n){return n.length?this==Nt?be.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,d;if(d=FA(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,d,c+1):o.splice(s,0,l,l+a.nodeSize,Uh(d,a,c+1,yi)),s+=3}});let i=HA(s?zA(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new be(i.length?this.local.concat(i).sort(bi):this.local,o||this.children)}remove(e){return e.length==0||this==Nt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>a&&u.to<l&&(e[d]=null,(i||(i=[])).push(u));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=Nt?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new be(o,r):Nt}forChild(e,n){if(this==Nt)return this;if(n.isLeaf)return be.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof Ss){let c=Math.max(s,l.from)-s,d=Math.min(i,l.to)-s;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){let a=new be(o.sort(bi),ua);return r?new us([a,r]):a}return r||Nt}eq(e){if(this==e)return!0;if(!(e instanceof be)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return s1(this.localsInner(e))}localsInner(e){if(this==Nt)return ua;if(e.inlineContent||!this.local.some(Ss.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ss||n.push(this.local[r]);return n}forEachSet(e){e(this)}}be.empty=new be([],[]);be.removeOverlap=s1;const Nt=be.empty;class us{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,yi));return us.from(r)}forChild(e,n){if(n.isLeaf)return be.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=Nt&&(s instanceof us?r=r.concat(s.members):r.push(s))}return us.from(r)}eq(e){if(!(e instanceof us)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?s1(r?n:n.sort(bi)):ua}static from(e){switch(e.length){case 0:return Nt;case 1:return e[0];default:return new us(e.every(n=>n instanceof be)?e:e.reduce((n,r)=>n.concat(r instanceof be?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function q8(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,d=s;c<n.maps.length;c++){let u=0;n.maps[c].forEach((h,f,p,g)=>{let b=g-p-(f-h);for(let v=0;v<a.length;v+=3){let x=a[v+1];if(x<0||h>x+d-u)continue;let w=a[v]+d-u;f>=w?a[v+1]=h<=w?-2:-1:h>=d&&b&&(a[v]+=b,a[v+1]+=b)}u+=b}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+s),u=d-o;if(u<0||u>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),f=h-o,{index:p,offset:g}=r.content.findIndex(u),b=r.maybeChild(p);if(b&&g==u&&g+b.nodeSize==f){let v=a[c+2].mapInner(n,b,d+1,t[c]+s+1,i);v!=Nt?(a[c]=u,a[c+1]=f,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=K8(a,t,e,n,o,s,i),d=Uh(c,r,0,i);e=d.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,h=0;u<d.children.length;u+=3){let f=d.children[u];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,d.children[u],d.children[u+1],d.children[u+2])}}return new be(e.sort(bi),a)}function HA(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new _e(o.from+e,o.to+e,o.type))}return n}function K8(t,e,n,r,o,s,i){function a(l,c){for(let d=0;d<l.local.length;d++){let u=l.local[d].map(r,o,c);u?n.push(u):i.onRemove&&i.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function FA(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function zA(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Uh(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=FA(t,a,l+n);if(c){s=!0;let d=Uh(c,a,n+l+1,r);d!=Nt&&o.push(l,l+a.nodeSize,d)}});let i=HA(s?zA(t):t,-n).sort(bi);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new be(i,o):Nt}function bi(t,e){return t.from-e.from||t.to-e.to}function s1(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),Wk(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Wk(e,o,r.copy(s.from,r.to)));break}}}return e}function Wk(t,e,n){for(;e<t.length&&bi(n,t[e])>0;)e++;t.splice(e,0,n)}function ig(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Nt&&e.push(r)}),t.cursorWrapper&&e.push(be.create(t.state.doc,[t.cursorWrapper.deco])),us.from(e)}const Y8={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},J8=hn&&ks<=11;class Z8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class X8{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Z8,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);hn&&ks<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),J8&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Y8)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(jk(this.view)){if(this.suppressingSelectionUpdates)return Ao(this.view);if(hn&&ks<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ai(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=La(s))n.add(s);for(let s=e.anchorNode;s;s=La(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&jk(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let u=this.registerMutation(n[d],l);u&&(s=s<0?u.from:Math.min(u.from,s),i=i<0?u.to:Math.max(u.to,i),u.typeOver&&(a=!0))}if(pr&&l.length){let d=l.filter(u=>u.nodeName=="BR");if(d.length==2){let[u,h]=d;u.parentNode&&u.parentNode.parentNode==h.parentNode?h.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let h of d){let f=h.parentNode;f&&f.nodeName=="LI"&&(!u||t$(e,u)!=f)&&h.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&kp(r)&&(c=X0(e))&&c.eq(ee.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ao(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),Q8(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ao(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let u=e.addedNodes[d];n.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(hn&&ks<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:h}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let i=o&&o.parentNode==e.target?Ct(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?Ct(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Gk=new WeakMap,qk=!1;function Q8(t){if(!Gk.has(t)&&(Gk.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=pr,qk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qk=!0}}function Kk(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return Ai(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function e$(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return Kk(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Kk(t,n):null}function t$(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function n$(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],kp(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Lt&&t.input.lastKeyCode===8)for(let b=s;b>o;b--){let v=r.childNodes[b-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){s=b;break}if(!x||x.size)break}let u=t.state.doc,h=t.someProp("domParser")||Eo.fromSchema(t.state.schema),f=u.resolve(i),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:o,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:r$,context:f});if(c&&c[0].pos!=null){let b=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=b),p={anchor:b+i,head:v+i}}return{doc:g,sel:p,from:i,to:a}}function r$(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Yt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Yt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const o$=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function s$(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let M=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=X0(t,M);if(_&&!t.state.selection.eq(_)){if(Lt&&xo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",L=>L(t,ni(13,"Enter"))))return;let P=t.state.tr.setSelection(_);M=="pointer"?P.setMeta("pointer",!0):M=="key"&&P.scrollIntoView(),s&&P.setMeta("composition",s),t.dispatch(P)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=n$(t,e,n),d=t.state.doc,u=d.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=l$(u.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(ja&&t.input.lastIOSEnter>Date.now()-225||xo)&&o.some(M=>M.nodeType==1&&!o$.test(M.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",M=>M(t,ni(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof U&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let M=Yk(t,t.state.doc,c.sel);if(M&&!M.eq(t.state.selection)){let _=t.state.tr.setSelection(M);s&&_.setMeta("composition",s),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof U&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),hn&&ks<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),b=c.doc.resolveNoCache(p.endB-c.from),v=d.resolve(p.start),x=g.sameParent(b)&&g.parent.inlineContent&&v.end()>=p.endA,w;if((ja&&t.input.lastIOSEnter>Date.now()-225&&(!x||o.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(b)||!g.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(g.pos,b.pos,"",""))&&(w=ee.findFrom(c.doc.resolve(g.pos+1),1,!0))&&w.head>g.pos)&&t.someProp("handleKeyDown",M=>M(t,ni(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&a$(d,p.start,p.endA,g,b)&&t.someProp("handleKeyDown",M=>M(t,ni(8,"Backspace")))){xo&&Lt&&t.domObserver.suppressSelectionUpdates();return}Lt&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),xo&&!x&&g.start()!=b.start()&&b.parentOffset==0&&g.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,b=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(M){return M(t,ni(13,"Enter"))})},20));let k=p.start,C=p.endA,S,T,E;if(x){if(g.pos==b.pos)hn&&ks<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ao(t),20)),S=t.state.tr.delete(k,C),T=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(E=i$(g.parent.content.cut(g.parentOffset,b.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start()))))S=t.state.tr,E.type=="add"?S.addMark(k,C,E.mark):S.removeMark(k,C,E.mark);else if(g.parent.child(g.index()).isText&&g.index()==b.index()-(b.textOffset?0:1)){let M=g.parent.textBetween(g.parentOffset,b.parentOffset);if(t.someProp("handleTextInput",_=>_(t,k,C,M)))return;S=t.state.tr.insertText(M,k,C)}}if(S||(S=t.state.tr.replace(k,C,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let M=Yk(t,S.doc,c.sel);M&&!(Lt&&t.composing&&M.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==k||M.head==S.mapping.map(C)-1)||hn&&M.empty&&M.head==k)&&S.setSelection(M)}T&&S.ensureMarks(T),s&&S.setMeta("composition",s),t.dispatch(S.scrollIntoView())}function Yk(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Q0(t,e.resolve(n.anchor),e.resolve(n.head))}function i$(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=d=>d.mark(a.addToSet(d.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(R.from(c).eq(t))return{mark:a,type:i}}function a$(t,e,n,r,o){if(n-e<=o.pos-r.pos||ag(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(ag(s,!0,!0));return!i.parent.isTextblock||i.pos>n||ag(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function ag(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function l$(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<e.size&&Jk(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&Jk(t.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function Jk(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class UA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new M8,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(tC),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Qk(this),Xk(this),this.nodeViews=eC(this),this.docView=Pk(this.state.doc,Zk(this),ig(this),this.dom,this),this.domObserver=new X8(this,(r,o,s,i)=>s$(this,r,o,s,i)),this.domObserver.start(),A8(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&rb(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(tC),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(jA(this),i=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=eC(this);d$(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&rb(this),this.editable=Qk(this),Xk(this);let l=ig(this),c=Zk(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(o.selection))&&(i=!0);let h=d=="preserve"&&i&&this.dom.style.overflowAnchor==null&&F7(this);if(i){this.domObserver.stop();let f=u&&(hn||Lt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&c$(o.selection,e.selection);if(u){let p=Lt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=H8(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Pk(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&h8(this))?Ao(this,f):(TA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&z7(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof q){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Tk(this,n.getBoundingClientRect(),e)}else Tk(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new $A(e.slice,e.move,o<0?void 0:q.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(hn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&U7(this.dom),Ao(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Y7(this,e)}coordsAtPos(e,n=1){return yA(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return e8(this,n||this.state,e)}pasteHTML(e,n){return Hc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Hc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return e1(this,e)}destroy(){this.docView&&(_8(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ig(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,P7())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return P8(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Yt&&this.root.nodeType===11&&L7(this.dom.ownerDocument)==this.dom&&e$(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Zk(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[_e.node(0,t.state.doc.content.size,e)]}function Xk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:_e.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Qk(t){return!t.someProp("editable",e=>e(t.state)===!1)}function c$(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function eC(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function d$(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function tC(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const u$=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),h$=typeof navigator<"u"&&/Win/.test(navigator.platform);function f$(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))u$?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function p$(t){let e=Object.create(null);for(let n in t)e[f$(n)]=t[n];return e}function lg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function m$(t){return new me({props:{handleKeyDown:i1(t)}})}function i1(t){let e=p$(t);return function(n,r){let o=l3(r),s,i=e[lg(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[lg(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(h$&&r.ctrlKey&&r.altKey)&&(s=c3[r.keyCode])&&s!=o){let a=e[lg(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const a1=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function WA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const GA=(t,e,n)=>{let r=WA(t,n);if(!r)return!1;let o=l1(r);if(!o){let i=r.blockRange(),a=i&&Qa(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(t_(t,o,e,-1))return!0;if(r.parent.content.size==0&&(Ba(s,"end")||q.isSelectable(s)))for(let i=r.depth;;i--){let a=wp(t.doc,r.before(i),r.after(i),j.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ba(s,"end")?ee.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):q.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},g$=(t,e,n)=>{let r=WA(t,n);if(!r)return!1;let o=l1(r);return o?qA(t,o,e):!1},y$=(t,e,n)=>{let r=YA(t,n);if(!r)return!1;let o=c1(r);return o?qA(t,o,e):!1};function qA(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=wp(t.doc,s,l,j.empty);if(!c||c.from!=s||c instanceof ot&&c.slice.size>=l-s)return!1;if(n){let d=t.tr.step(c);d.setSelection(U.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Ba(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const KA=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=l1(r)}let i=s&&s.nodeBefore;return!i||!q.isSelectable(i)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function l1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function YA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const JA=(t,e,n)=>{let r=YA(t,n);if(!r)return!1;let o=c1(r);if(!o)return!1;let s=o.nodeAfter;if(t_(t,o,e,1))return!0;if(r.parent.content.size==0&&(Ba(s,"start")||q.isSelectable(s))){let i=wp(t.doc,r.before(),r.after(),j.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(Ba(s,"start")?ee.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):q.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},ZA=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=c1(r)}let i=s&&s.nodeAfter;return!i||!q.isSelectable(i)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,s.pos)).scrollIntoView()),!0)};function c1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const b$=(t,e)=>{let n=t.selection,r=n instanceof q,o;if(r){if(n.node.isTextblock||!Fi(t.doc,n.from))return!1;o=n.from}else if(o=vp(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(q.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},v$=(t,e)=>{let n=t.selection,r;if(n instanceof q){if(n.node.isTextblock||!Fi(t.doc,n.to))return!1;r=n.to}else if(r=vp(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},w$=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&Qa(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},XA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function d1(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const x$=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=d1(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(ee.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},QA=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof un||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=d1(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(U.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},e_=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Mo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Qa(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function k$(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof q&&e.selection.node.isBlock)return!r.parentOffset||!Mo(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],i,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=d1(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(l&&a?{type:a}:null),i=f;break}else{if(f==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof U||e.selection instanceof un)&&d.deleteSelection();let u=d.mapping.map(r.pos),h=Mo(d.doc,u,s.length,s);if(h||(s[0]=a?{type:a}:null,h=Mo(d.doc,u,s.length,s)),!h)return!1;if(d.split(u,s.length,s),!l&&c&&r.node(i).type!=a){let f=d.mapping.map(r.before(i)),p=d.doc.resolve(f);a&&r.node(i-1).canReplaceWith(p.index(),p.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(i)),a)}return n&&n(d.scrollIntoView()),!0}}const C$=k$(),S$=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(q.create(t.doc,o))),!0)};function T$(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||Fi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function t_(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&T$(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=R.empty;for(let v=i.length-1;v>=0;v--)p=R.from(i[v].create(null,p));p=R.from(o.copy(p));let g=t.tr.step(new rt(e.pos-1,f,e.pos,f,new j(p,1,0),i.length,!0)),b=g.doc.resolve(f+2*i.length);b.nodeAfter&&b.nodeAfter.type==o.type&&Fi(g.doc,b.pos)&&g.join(b.pos),n(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&l?null:ee.findFrom(e,1),u=d&&d.$from.blockRange(d.$to),h=u&&Qa(u);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(u,h).scrollIntoView()),!0;if(c&&Ba(s,"start",!0)&&Ba(o,"end")){let f=o,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,b=1;for(;!g.isTextblock;g=g.firstChild)b++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let v=R.empty;for(let w=p.length-1;w>=0;w--)v=R.from(p[w].copy(v));let x=t.tr.step(new rt(e.pos-p.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new j(v,p.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function n_(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(U.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const E$=n_(-1),M$=n_(1);function A$(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&QM(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function nC(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let d=n.doc.resolve(c),u=d.index();o=d.parent.canReplaceWith(u,u+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function u1(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}u1(a1,GA,KA);u1(a1,JA,ZA);u1(XA,QA,e_,C$);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function _$(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return R$(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function R$(t,e,n,r=null){let o=!1,s=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);s=new Bh(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Bh(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=QM(s,n,r,e);return a?(t&&P$(t,e,a,o,n),!0):!1}function P$(t,e,n,r,o){let s=R.empty;for(let d=n.length-1;d>=0;d--)s=R.from(n[d].type.create(n[d].attrs,s));t.step(new rt(e.start-(r?2:0),e.end,e.start,e.end,new j(s,0,0),n.length,!0));let i=0;for(let d=0;d<n.length;d++)n[d].type==o&&(i=d+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,h=!0;d<u;d++,h=!1)!h&&Mo(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function I$(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?D$(e,n,t,s):N$(e,n,s):!0:!1}}function D$(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new rt(s-1,i,s,i,new j(R.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Bh(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Qa(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(s,-1)-1);return Fi(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function N$(t,e,n){let r=t.tr,o=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=o.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,i.content.append(l?R.empty:R.from(o))))return!1;let u=s.pos,h=u+i.nodeSize;return r.step(new rt(u-(a?1:0),h+(l?1:0),u+1,h-1,new j((a?R.empty:R.from(o.copy(R.empty))).append(l?R.empty:R.from(o.copy(R.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function O$(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=R.from(c?t.create():null),u=new j(R.from(t.create(null,R.from(a.type.create(null,d)))),c?3:1,0),h=s.start,f=s.end;n(e.tr.step(new rt(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}function Tp(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class Ep{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...d)=>{const u=l(...d)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),u={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...g)=>{const b=this.buildProps(c,n),v=f(...g)(b);return a.push(v),u}])),run:d};return u}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a={tr:e,editor:o,view:i,state:Tp({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}}class L${constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function W(t,e,n){return t.config[e]===void 0&&t.parent?W(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?W(t.parent,e,n):null}):t.config[e]}function Mp(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function r_(t){const e=[],{nodeExtensions:n,markExtensions:r}=Mp(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=W(i,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([h,f])=>{e.push({type:u,name:h,attribute:{...s,...f}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=W(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const h={...s,...u};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:d,attribute:h})})}),e}function mt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Tn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),a.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=s}),r},{})}function Wh(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Tn(n,r),{})}function o_(t){return typeof t=="function"}function ye(t,e=void 0,...n){return o_(t)?e?t.bind(e)(...n):t(...n):t}function j$(t={}){return Object.keys(t).length===0&&t.constructor===Object}function B$(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function rC(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):B$(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function oC(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&j$(n)?!1:n!=null))}function s_(t,e){var n;const r=r_(t),{nodeExtensions:o,markExtensions:s}=Mp(t),i=(n=o.find(c=>W(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const d=r.filter(v=>v.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,x)=>{const w=W(x,"extendNodeSchema",u);return{...v,...w?w(c):{}}},{}),f=oC({...h,content:ye(W(c,"content",u)),marks:ye(W(c,"marks",u)),group:ye(W(c,"group",u)),inline:ye(W(c,"inline",u)),atom:ye(W(c,"atom",u)),selectable:ye(W(c,"selectable",u)),draggable:ye(W(c,"draggable",u)),code:ye(W(c,"code",u)),whitespace:ye(W(c,"whitespace",u)),linebreakReplacement:ye(W(c,"linebreakReplacement",u)),defining:ye(W(c,"defining",u)),isolating:ye(W(c,"isolating",u)),attrs:Object.fromEntries(d.map(v=>{var x;return[v.name,{default:(x=v==null?void 0:v.attribute)===null||x===void 0?void 0:x.default}]}))}),p=ye(W(c,"parseHTML",u));p&&(f.parseDOM=p.map(v=>rC(v,d)));const g=W(c,"renderHTML",u);g&&(f.toDOM=v=>g({node:v,HTMLAttributes:Wh(v,d)}));const b=W(c,"renderText",u);return b&&(f.toText=b),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const d=r.filter(b=>b.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,v)=>{const x=W(v,"extendMarkSchema",u);return{...b,...x?x(c):{}}},{}),f=oC({...h,inclusive:ye(W(c,"inclusive",u)),excludes:ye(W(c,"excludes",u)),group:ye(W(c,"group",u)),spanning:ye(W(c,"spanning",u)),code:ye(W(c,"code",u)),attrs:Object.fromEntries(d.map(b=>{var v;return[b.name,{default:(v=b==null?void 0:b.attribute)===null||v===void 0?void 0:v.default}]}))}),p=ye(W(c,"parseHTML",u));p&&(f.parseDOM=p.map(b=>rC(b,d)));const g=W(c,"renderHTML",u);return g&&(f.toDOM=b=>g({mark:b,HTMLAttributes:Wh(b,d)})),[c.name,f]}));return new WM({topNode:i,nodes:a,marks:l})}function cg(t,e){return e.nodes[t]||e.marks[t]||null}function sC(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function h1(t,e){const n=jo.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const $$=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const d=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-s))}),n};function f1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Ms{constructor(e){this.find=e.find,this.handler=e.handler}}const V$=(t,e)=>{if(f1(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Tu(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let d=!1;const u=$$(c)+s;return i.forEach(h=>{if(d)return;const f=V$(u,h.find);if(!f)return;const p=l.state.tr,g=Tp({state:l.state,transaction:p}),b={from:r-(f[0].length-s.length),to:o},{commands:v,chain:x,can:w}=new Ep({editor:n,state:g});h.handler({state:g,range:b,match:f,commands:v,chain:x,can:w})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:o,text:s}),l.dispatch(p),d=!0)}),d}function H$(t){const{editor:e,rules:n}=t,r=new me({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=h1(R.from(d),i.schema);const{from:u}=l,h=u+d.length;Tu({editor:e,from:u,to:h,text:d,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return Tu({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&Tu({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?Tu({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function F$(t){return Object.prototype.toString.call(t).slice(8,-1)}function Eu(t){return F$(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Ap(t,e){const n={...t};return Eu(t)&&Eu(e)&&Object.keys(e).forEach(r=>{Eu(e[r])&&Eu(t[r])?n[r]=Ap(t[r],e[r]):n[r]=e[r]}),n}class Mt{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ap(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Mt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function z$(t){return typeof t=="number"}class U${constructor(e){this.find=e.find,this.handler=e.handler}}const W$=(t,e,n)=>{if(f1(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function G$(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:d}=new Ep({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,o,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const g=Math.max(r,p),b=Math.min(o,p+f.content.size),v=f.textBetween(g-p,b-p,void 0,"￼");W$(v,s.find,i).forEach(w=>{if(w.index===void 0)return;const k=g+w.index+1,C=k+w[0].length,S={from:n.tr.mapping.map(k),to:n.tr.mapping.map(C)},T=s.handler({state:n,range:S,match:w,commands:l,chain:c,can:d,pasteEvent:i,dropEvent:a});u.push(T)})}),u.every(f=>f!==null)}let Mu=null;const q$=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function K$(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:u,to:h,rule:f,pasteEvt:p})=>{const g=d.tr,b=Tp({state:d,transaction:g});if(!(!G$({editor:e,state:b,from:Math.max(u-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new me({view(u){const h=p=>{var g;r=!((g=u.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?u.dom.parentElement:null,r&&(Mu=e)},f=()=>{Mu&&(Mu=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(u,h)=>{if(s=r===u.dom.parentElement,a=h,!s){const f=Mu;f&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(u,h)=>{var f;const p=(f=h.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return i=h,o=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(u,h,f)=>{const p=u[0],g=p.getMeta("uiEvent")==="paste"&&!o,b=p.getMeta("uiEvent")==="drop"&&!s,v=p.getMeta("applyPasteRules"),x=!!v;if(!g&&!b&&!x)return;if(x){let{text:C}=v;typeof C=="string"?C=C:C=h1(R.from(C),f.schema);const{from:S}=v,T=S+C.length,E=q$(C);return l({rule:d,state:f,from:S,to:{b:T},pasteEvt:E})}const w=h.doc.content.findDiffStart(f.doc.content),k=h.doc.content.findDiffEnd(f.doc.content);if(!(!z$(w)||!k||w===k.b))return l({rule:d,state:f,from:w,to:k,pasteEvt:i})}}))}function Y$(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class di{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=di.resolve(e),this.schema=s_(this.extensions,n),this.setupExtensions()}static resolve(e){const n=di.sort(di.flatten(e)),r=Y$(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=W(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=W(r,"priority")||100,i=W(o,"priority")||100;return s>i?-1:s<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:cg(n.name,this.schema)},o=W(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=di.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:cg(i.name,this.schema)},l=[],c=W(i,"addKeyboardShortcuts",a);let d={};if(i.type==="mark"&&W(i,"exitable",a)&&(d.ArrowRight=()=>Mt.handleExit({editor:e,mark:i})),c){const g=Object.fromEntries(Object.entries(c()).map(([b,v])=>[b,()=>v({editor:e})]));d={...d,...g}}const u=m$(d);l.push(u);const h=W(i,"addInputRules",a);sC(i,e.options.enableInputRules)&&h&&r.push(...h());const f=W(i,"addPasteRules",a);sC(i,e.options.enablePasteRules)&&f&&o.push(...f());const p=W(i,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[H$({editor:e,rules:r}),...K$({editor:e,rules:o}),...s]}get attributes(){return r_(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Mp(this.extensions);return Object.fromEntries(n.filter(r=>!!W(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:mt(r.name,this.schema)},i=W(r,"addNodeView",s);if(!i)return[];const a=(l,c,d,u,h)=>{const f=Wh(l,o);return i()({node:l,view:c,getPos:d,decorations:u,innerDecorations:h,editor:e,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:cg(e.name,this.schema)};e.type==="mark"&&(!((n=ye(W(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=W(e,"onBeforeCreate",r),s=W(e,"onCreate",r),i=W(e,"onUpdate",r),a=W(e,"onSelectionUpdate",r),l=W(e,"onTransaction",r),c=W(e,"onFocus",r),d=W(e,"onBlur",r),u=W(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}}class Ne{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ne(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ap(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ne({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}}function i_(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,d,u)=>{var h;l.isBlock&&c>r&&(a+=s);const f=i==null?void 0:i[l.type.name];if(f)return d&&(a+=f({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function a_(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const l_=Ne.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new me({key:new Te("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=a_(n);return i_(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),J$=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Z$=(t=!1)=>({commands:e})=>e.setContent("",t),X$=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),h=c.resolve(d.map(l+a.nodeSize)),f=u.blockRange(h);if(!f)return;const p=Qa(f);if(a.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},Q$=t=>e=>t(e),eV=()=>({state:t,dispatch:e})=>QA(t,e),tV=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,s.content),r.setSelection(new U(r.doc.resolve(i-1))),!0},nV=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const a=o.before(s),l=o.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},rV=t=>({tr:e,state:n,dispatch:r})=>{const o=mt(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},oV=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},sV=()=>({state:t,dispatch:e})=>a1(t,e),iV=()=>({commands:t})=>t.keyboardShortcut("Enter"),aV=()=>({state:t,dispatch:e})=>x$(t,e);function Gh(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:f1(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function c_(t,e,n={}){return t.find(r=>r.type===e&&Gh(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function iC(t,e,n={}){return!!c_(t,e,n)}function zc(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!c_([...o.node.marks],e,n)))return;let i=o.index,a=t.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&iC([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&iC([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function $s(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const lV=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=$s(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:d}=a;if(o){const u=zc(l,s,e);if(u&&u.from<=c&&u.to>=d){const h=U.create(i,u.from,u.to);n.setSelection(h)}}return!0},cV=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function _p(t){return t instanceof U}function ko(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function d_(t,e=null){if(!e)return null;const n=ee.atStart(t),r=ee.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?U.create(t,ko(0,o,s),ko(t.content.size,o,s)):U.create(t,ko(e,o,s),ko(e,o,s))}function u_(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Rp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const dV=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{(Rp()||u_())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!_p(n.state.selection))return i(),!0;const a=d_(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},uV=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),hV=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),h_=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&h_(r)}return t};function Au(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return h_(n)}function qh(t,e,n){if(t instanceof To||t instanceof R)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return R.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),qh("",e,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new WM({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Eo.fromSchema(l).parseSlice(Au(t),n.parseOptions):Eo.fromSchema(l).parse(Au(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Eo.fromSchema(e);return n.slice?s.parseSlice(Au(t),n.parseOptions).content:s.parse(Au(t),n.parseOptions)}return qh("",e,n)}function f_(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof ot||o instanceof rt))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,d)=>{i===0&&(i=d)}),t.setSelection(ee.near(t.doc.resolve(i),n))}const fV=t=>!("type"in t),pV=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=qh(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:s.options.enableContentCheck})}catch(p){return s.emit("contentError",{editor:s,error:p,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},d=!0,u=!0;if((fV(a)?a:[a]).forEach(p=>{p.check(),d=d?p.isText&&p.marks.length===0:!1,u=u?p.isBlock:!1}),l===c&&u){const{parent:p}=r.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let f;if(d){if(Array.isArray(e))f=e.map(p=>p.text||"").join("");else if(e instanceof R){let p="";e.forEach(g=>{g.text&&(p+=g.text)}),f=p}else typeof e=="object"&&e&&e.text?f=e.text:f=e;r.insertText(f,l,c)}else f=a,r.replaceWith(l,c,f);n.updateSelection&&f_(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:f}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:f})}return!0},mV=()=>({state:t,dispatch:e})=>b$(t,e),gV=()=>({state:t,dispatch:e})=>v$(t,e),yV=()=>({state:t,dispatch:e})=>GA(t,e),bV=()=>({state:t,dispatch:e})=>JA(t,e),vV=()=>({state:t,dispatch:e,tr:n})=>{try{const r=vp(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},wV=()=>({state:t,dispatch:e,tr:n})=>{try{const r=vp(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},xV=()=>({state:t,dispatch:e})=>g$(t,e),kV=()=>({state:t,dispatch:e})=>y$(t,e);function p_(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function CV(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Rp()||p_()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const SV=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=CV(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0};function Uc(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?mt(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(u,h)=>{if(u.isText)return;const f=Math.max(r,h),p=Math.min(o,h+u.nodeSize);a.push({node:u,from:f,to:p})});const l=o-r,c=a.filter(u=>i?i.name===u.node.type.name:!0).filter(u=>Gh(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,h)=>u+h.to-h.from,0)>=l}const TV=(t,e={})=>({state:n,dispatch:r})=>{const o=mt(t,n.schema);return Uc(n,o,e)?w$(n,r):!1},EV=()=>({state:t,dispatch:e})=>e_(t,e),MV=t=>({state:e,dispatch:n})=>{const r=mt(t,e.schema);return I$(r)(e,n)},AV=()=>({state:t,dispatch:e})=>XA(t,e);function Pp(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function aC(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const _V=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Pp(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=mt(t,r.schema)),a==="mark"&&(i=$s(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{s&&s===c.type&&n.setNodeMarkup(d,void 0,aC(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(u=>{i===u.type&&n.addMark(d,d+c.nodeSize,i.create(aC(u.attrs,e)))})})}),!0):!1},RV=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),PV=()=>({tr:t,dispatch:e})=>{if(e){const n=new un(t.doc);t.setSelection(n)}return!0},IV=()=>({state:t,dispatch:e})=>KA(t,e),DV=()=>({state:t,dispatch:e})=>ZA(t,e),NV=()=>({state:t,dispatch:e})=>S$(t,e),OV=()=>({state:t,dispatch:e})=>M$(t,e),LV=()=>({state:t,dispatch:e})=>E$(t,e);function Kh(t,e,n={},r={}){return qh(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const jV=(t,e=!1,n={},r={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{var l,c;const{doc:d}=s;if(n.preserveWhitespace!=="full"){const u=Kh(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return i&&s.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!e),!0}return i&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function m_(t,e){const n=$s(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function p1(t,e){const n=new Y0(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function BV(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function lC(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function Yh(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function $V(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ip(t){return e=>$V(e.$from,t)}function VV(t,e){const n=di.resolve(t);return s_(n,e)}function HV(t,e){const n={from:0,to:t.content.size};return i_(t,n,e)}function FV(t,e){const n=mt(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function g_(t,e){const n=Pp(typeof e=="string"?e:e.name,t.schema);return n==="node"?FV(t,e):n==="mark"?m_(t,e):{}}function zV(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function UV(t){const e=zV(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,i)=>i!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function m1(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,s)=>{const i=[];if(o.ranges.length)o.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),u=e.invert().map(c,-1),h=e.invert().map(d);r.push({oldRange:{from:u,to:h},newRange:{from:c,to:d}})})}),UV(r)}function g1(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),i=zc(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function hh(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function ob(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?$s(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Gh(u.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:u,$to:h})=>{const f=u.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,b)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(f,b),x=Math.min(p,b+g.nodeSize),w=x-v;i+=w,a.push(...g.marks.map(k=>({mark:k,from:v,to:x})))})}),i===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Gh(u.mark.attrs,n,{strict:!1})).reduce((u,h)=>u+h.to-h.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,h)=>u+h.to-h.from,0);return(l>0?l+c:l)>=i}function WV(t,e,n={}){if(!e)return Uc(t,null,n)||ob(t,null,n);const r=Pp(e,t.schema);return r==="node"?Uc(t,e,n):r==="mark"?ob(t,e,n):!1}function cC(t,e){const{nodeExtensions:n}=Mp(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=ye(W(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function y1(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(y1(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function sb(t){return t instanceof q}function Jh(t,e,n){const o=t.state.doc.content.size,s=ko(e,0,o),i=ko(n,0,o),a=t.coordsAtPos(s),l=t.coordsAtPos(i,-1),c=Math.min(a.top,l.top),d=Math.max(a.bottom,l.bottom),u=Math.min(a.left,l.left),h=Math.max(a.right,l.right),f=h-u,p=d-c,v={top:c,bottom:d,left:u,right:h,width:f,height:p,x:u,y:c};return{...v,toJSON:()=>v}}function GV(t,e,n){var r;const{selection:o}=e;let s=null;if(_p(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,u,h)=>{if(c)return!1;if(d.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=f&&p}return!c}),c})}const qV=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=$s(t,r.schema);if(o)if(i){const c=m_(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(h,f)=>{const p=Math.max(f,d),g=Math.min(f+h.nodeSize,u);h.marks.find(v=>v.type===l)?h.marks.forEach(v=>{l===v.type&&n.addMark(p,g,l.create({...v.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return GV(r,n,l)},KV=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),YV=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=mt(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>nC(s,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>nC(s,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},JV=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=ko(t,0,r.content.size),s=q.create(r,o);e.setSelection(s)}return!0},ZV=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=U.atStart(r).from,a=U.atEnd(r).to,l=ko(o,i,a),c=ko(s,i,a),d=U.create(r,l,c);e.setSelection(d)}return!0},XV=t=>({state:e,dispatch:n})=>{const r=mt(t,e.schema);return O$(r)(e,n)};function dC(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const QV=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,d=hh(c,a.node().type.name,a.node().attrs);if(s instanceof q&&s.node.isBlock)return!a.parentOffset||!Mo(i,a.pos)?!1:(r&&(t&&dC(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:BV(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&h?[{type:h,attrs:d}]:void 0,p=Mo(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&Mo(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:d}]:void 0),r){if(p&&(s instanceof U&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!u&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&dC(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return p},e6=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=mt(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let v=R.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-x;E>=l.depth-3;E-=1)v=R.from(l.node(E).copy(v));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...hh(h,l.node().type.name,l.node().attrs),...e},C=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(k))||void 0;v=v.append(R.from(a.createAndFill(null,C)||void 0));const S=l.before(l.depth-(x-1));n.replace(S,l.after(-w),new j(v,4-x,0));let T=-1;n.doc.nodesBetween(S,n.doc.content.size,(E,M)=>{if(T>-1)return!1;E.isTextblock&&E.content.size===0&&(T=M+1)}),T>-1&&n.setSelection(U.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,p={...hh(h,u.type.name,u.attrs),...e},g={...hh(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const b=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!Mo(n.doc,l.pos,2))return!1;if(o){const{selection:v,storedMarks:x}=r,{splittableMarks:w}=s.extensionManager,k=x||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,b).scrollIntoView(),!k||!o)return!0;const C=k.filter(S=>w.includes(S.type.name));n.ensureMarks(C)}return!0},dg=(t,e)=>{const n=Ip(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Fi(t.doc,n.pos)&&t.join(n.pos),!0},ug=(t,e)=>{const n=Ip(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Fi(t.doc,r)&&t.join(r),!0},t6=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:h}=o.extensionManager,f=mt(t,i.schema),p=mt(e,i.schema),{selection:g,storedMarks:b}=i,{$from:v,$to:x}=g,w=v.blockRange(x),k=b||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const C=Ip(S=>cC(S.type.name,u))(g);if(w.depth>=1&&C&&w.depth-C.depth<=1){if(C.node.type===f)return c.liftListItem(p);if(cC(C.node.type.name,u)&&f.validContent(C.node.content)&&a)return l().command(()=>(s.setNodeMarkup(C.pos,f),!0)).command(()=>dg(s,f)).command(()=>ug(s,f)).run()}return!n||!k||!a?l().command(()=>d().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>dg(s,f)).command(()=>ug(s,f)).run():l().command(()=>{const S=d().wrapInList(f,r),T=k.filter(E=>h.includes(E.type.name));return s.ensureMarks(T),S?!0:c.clearNodes()}).wrapInList(f,r).command(()=>dg(s,f)).command(()=>ug(s,f)).run()},n6=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=$s(t,r.schema);return ob(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},r6=(t,e,n={})=>({state:r,commands:o})=>{const s=mt(t,r.schema),i=mt(e,r.schema),a=Uc(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},o6=(t,e={})=>({state:n,commands:r})=>{const o=mt(t,n.schema);return Uc(n,o,e)?r.lift(o):r.wrapIn(o,e)},s6=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},i6=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},a6=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=$s(t,r.schema),{$from:c,empty:d,ranges:u}=a;if(!o)return!0;if(d&&i){let{from:h,to:f}=a;const p=(s=c.marks().find(b=>b.type===l))===null||s===void 0?void 0:s.attrs,g=zc(c,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else u.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},l6=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Pp(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=mt(t,r.schema)),a==="mark"&&(i=$s(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let u,h,f,p;n.selection.empty?r.doc.nodesBetween(c,d,(g,b)=>{s&&s===g.type&&(f=Math.max(b,c),p=Math.min(b+g.nodeSize,d),u=b,h=g)}):r.doc.nodesBetween(c,d,(g,b)=>{b<c&&s&&s===g.type&&(f=Math.max(b,c),p=Math.min(b+g.nodeSize,d),u=b,h=g),b>=c&&b<=d&&(s&&s===g.type&&n.setNodeMarkup(b,void 0,{...g.attrs,...e}),i&&g.marks.length&&g.marks.forEach(v=>{if(i===v.type){const x=Math.max(b,c),w=Math.min(b+g.nodeSize,d);n.addMark(x,w,i.create({...v.attrs,...e}))}}))}),h&&(u!==void 0&&n.setNodeMarkup(u,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(g=>{i===g.type&&n.addMark(f,p,i.create({...g.attrs,...e}))}))}),!0):!1},c6=(t,e={})=>({state:n,dispatch:r})=>{const o=mt(t,n.schema);return A$(o,e)(n,r)},d6=(t,e={})=>({state:n,dispatch:r})=>{const o=mt(t,n.schema);return _$(o,e)(n,r)};var u6=Object.freeze({__proto__:null,blur:J$,clearContent:Z$,clearNodes:X$,command:Q$,createParagraphNear:eV,cut:tV,deleteCurrentNode:nV,deleteNode:rV,deleteRange:oV,deleteSelection:sV,enter:iV,exitCode:aV,extendMarkRange:lV,first:cV,focus:dV,forEach:uV,insertContent:hV,insertContentAt:pV,joinBackward:yV,joinDown:gV,joinForward:bV,joinItemBackward:vV,joinItemForward:wV,joinTextblockBackward:xV,joinTextblockForward:kV,joinUp:mV,keyboardShortcut:SV,lift:TV,liftEmptyBlock:EV,liftListItem:MV,newlineInCode:AV,resetAttributes:_V,scrollIntoView:RV,selectAll:PV,selectNodeBackward:IV,selectNodeForward:DV,selectParentNode:NV,selectTextblockEnd:OV,selectTextblockStart:LV,setContent:jV,setMark:qV,setMeta:KV,setNode:YV,setNodeSelection:JV,setTextSelection:ZV,sinkListItem:XV,splitBlock:QV,splitListItem:e6,toggleList:t6,toggleMark:n6,toggleNode:r6,toggleWrap:o6,undoInputRule:s6,unsetAllMarks:i6,unsetMark:a6,updateAttributes:l6,wrapIn:c6,wrapInList:d6});const y_=Ne.create({name:"commands",addCommands(){return{...u6}}}),b_=Ne.create({name:"drop",addProseMirrorPlugins(){return[new me({key:new Te("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),v_=Ne.create({name:"editable",addProseMirrorPlugins(){return[new me({key:new Te("editable"),props:{editable:()=>this.editor.options.editable}})]}}),w_=new Te("focusEvents"),x_=Ne.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new me({key:w_,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),k_=Ne.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:h,parent:f}=u,p=u.parent.isTextblock&&h>0?a.doc.resolve(h-1):u,g=p.parent.type.spec.isolating,b=u.pos-u.parentOffset,v=g&&p.parent.childCount===1?b===u.pos:ee.atStart(c).from===h;return!d||!f.type.isTextblock||f.textContent.length||!v||v&&u.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Rp()||p_()?s:o},addProseMirrorPlugins(){return[new me({key:new Te("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),o=t.some(g=>g.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=e.selection,l=ee.atStart(e.doc).from,c=ee.atEnd(e.doc).to;if(s||!(i===l&&a===c)||!y1(n.doc))return;const h=n.tr,f=Tp({state:n,transaction:h}),{commands:p}=new Ep({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),C_=Ne.create({name:"paste",addProseMirrorPlugins(){return[new me({key:new Te("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),S_=Ne.create({name:"tabindex",addProseMirrorPlugins(){return[new me({key:new Te("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Ol=Object.freeze({__proto__:null,ClipboardTextSerializer:l_,Commands:y_,Drop:b_,Editable:v_,FocusEvents:x_,Keymap:k_,Paste:C_,Tabindex:S_,focusEventsPluginKey:w_});class ri{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ri(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ri(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ri(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new ri(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new ri(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===e&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const h6=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function f6(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}class p6 extends L${constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=f6(h6,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=o_(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=r.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[v_,l_.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),y_,x_,k_,S_,b_,C_].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new di(o,this)}createCommandManager(){this.commandManager=new Ep({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Kh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=Kh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=d_(n,this.options.autofocus);this.view=new UA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:ai.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return g_(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return WV(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return h1(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return HV(this.state.doc,{blockSeparator:n,textSerializers:{...a_(this.schema),...r}})}get isEmpty(){return y1(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new ri(n,this)}get $doc(){return this.$pos(0)}}function $a(t){return new Ms({find:t.find,handler:({state:e,range:n,match:r})=>{const o=ye(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),d=c+i.length;if(g1(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;d<n.to&&s.delete(d,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+i.length;s.addMark(n.from+l,h,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}let Qr=class ib{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(W(this,"addOptions",{name:this.name}))),this.storage=ye(W(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ib(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ap(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new ib(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ye(W(n,"addOptions",{name:n.name})),n.storage=ye(W(n,"addStorage",{name:n.name,options:n.options})),n}};class m6{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,s,i,a,l;const{view:c}=this.editor,d=e.target,u=d.nodeType===3?(n=d.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):d.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(d)||!u)return;let h=0,f=0;if(this.dom!==u){const x=this.dom.getBoundingClientRect(),w=u.getBoundingClientRect(),k=(o=e.offsetX)!==null&&o!==void 0?o:(s=e.nativeEvent)===null||s===void 0?void 0:s.offsetX,C=(i=e.offsetY)!==null&&i!==void 0?i:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;h=w.x-x.x+k,f=w.y-x.y+C}const p=this.dom.cloneNode(!0);(l=e.dataTransfer)===null||l===void 0||l.setDragImage(p,h,f);const g=this.getPos();if(typeof g!="number")return;const b=q.create(c.state.doc,g),v=c.state.tr.setSelection(b);c.dispatch(v)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const s=e.type.startsWith("drag"),i=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!s)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,d=!!this.node.type.spec.draggable,u=q.isSelectable(this.node),h=e.type==="copy",f=e.type==="paste",p=e.type==="cut",g=e.type==="mousedown";if(!d&&u&&s&&e.target===this.dom&&e.preventDefault(),d&&s&&!c&&e.target===this.dom)return e.preventDefault(),!1;if(d&&l&&!c&&g){const b=r.closest("[data-drag-handle]");b&&(this.dom===b||this.dom.contains(b))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||i||h||f||p||g&&u)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Rp()||u_())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Ri(t){return new U$({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=ye(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),u=n.from+l.indexOf(a),h=u+a.length;if(g1(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(b=>b===t.type&&b!==p.mark.type)).filter(p=>p.to>u).length)return null;h<n.to&&i.delete(h,n.to),u>n.from&&i.delete(n.from+d,u),c=n.from+d+a.length,i.addMark(n.from+d,c,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}var _u,g6=new Uint8Array(16);function y6(){if(!_u&&(_u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _u(g6)}const b6=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function v6(t){return typeof t=="string"&&b6.test(t)}var vt=[];for(var hg=0;hg<256;++hg)vt.push((hg+256).toString(16).substr(1));function w6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(vt[t[e+0]]+vt[t[e+1]]+vt[t[e+2]]+vt[t[e+3]]+"-"+vt[t[e+4]]+vt[t[e+5]]+"-"+vt[t[e+6]]+vt[t[e+7]]+"-"+vt[t[e+8]]+vt[t[e+9]]+"-"+vt[t[e+10]]+vt[t[e+11]]+vt[t[e+12]]+vt[t[e+13]]+vt[t[e+14]]+vt[t[e+15]]).toLowerCase();if(!v6(n))throw TypeError("Stringified UUID is invalid");return n}function T_(t,e,n){t=t||{};var r=t.random||(t.rng||y6)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,w6(r)}var x6=class E_{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,o){this.remove(e),this.set(n,r,o)}remove(e){this.cache.delete(e)}invalidate(e){const n=new E_(this.cache),r=e.mapping;return this.cache.forEach(([o,s],i)=>{if(i<0)return;const a=r.mapResult(i),l=e.doc.nodeAt(a.pos);if(a.deleted||!(l!=null&&l.eq(o)))n.remove(i);else if(i!==a.pos){const c=s.map(d=>d.map(r,0,0)).filter(d=>d!=null);n.replace(i,a.pos,l,c)}}),n}};function k6({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new Te("prosemirror-highlight");return new me({key:r,state:{init(o,s){const i=new x6,[a,l]=uC(s.doc,t,e,n,i);return{cache:i,decorations:a,promises:l}},apply:(o,s)=>{const i=s.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const d=s.decorations.map(o.mapping,o.doc),u=s.promises;return{cache:i,decorations:d,promises:u}}const[l,c]=uC(o.doc,t,e,n,i);return{cache:i,decorations:l,promises:c}}},view:o=>{const s=new Set,i=()=>{if(s.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const c=r.getState(o.state);for(const d of(l=c==null?void 0:c.promises)!=null?l:[])s.add(d),d.then(()=>{s.delete(d),i()}).catch(()=>{s.delete(d)})};return a(),{update:()=>{a()}}},props:{decorations(o){var s;return(s=this.getState(o))==null?void 0:s.decorations}}})}function uC(t,e,n,r,o){const s=[],i=[];return t.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),d=o.get(l);if(d){const[u,h]=d;s.push(...h)}else{const u=e({content:a.textContent,language:c||void 0,pos:l,size:a.nodeSize});u&&Array.isArray(u)?(o.set(l,a,u),s.push(...u)):u instanceof Promise&&(o.remove(l),i.push(u))}}return!1}),[be.create(t,s),i]}function C6(t,e){return function({content:r,language:o,pos:s,size:i}){var a;const l=[],{tokens:c,fg:d,bg:u,rootStyle:h}=t.codeToTokens(r,{lang:o,theme:t.getLoadedThemes()[0]}),f=h||(d&&u?`--prosemirror-highlight:${d};--prosemirror-highlight-bg:${u}`:"");if(f){const g=_e.node(s,s+i,{style:f});l.push(g)}let p=s+1;for(const g of c){for(const b of g){const v=p+b.content.length,x=_e.inline(p,v,{style:S6((a=b.htmlStyle)!=null?a:`color: ${b.color}`),class:"shiki"});l.push(x),p=v}p+=1}return l}}function S6(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const T6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,E6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,M6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,A6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,_6=Mt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[$a({find:T6,type:this.type}),$a({find:M6,type:this.type})]},addPasteRules(){return[Ri({find:E6,type:this.type}),Ri({find:A6,type:this.type})]}}),R6=/(^|[^`])`([^`]+)`(?!`)/,P6=/(^|[^`])`([^`]+)`(?!`)/g,I6=Mt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[$a({find:R6,type:this.type})]},addPasteRules(){return[Ri({find:P6,type:this.type})]}}),D6=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,N6=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,O6=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,L6=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,j6=Mt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[$a({find:D6,type:this.type}),$a({find:O6,type:this.type})]},addPasteRules(){return[Ri({find:N6,type:this.type}),Ri({find:L6,type:this.type})]}}),B6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,$6=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,V6=Mt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[$a({find:B6,type:this.type})]},addPasteRules(){return[Ri({find:$6,type:this.type})]}}),H6=Mt.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),F6=Qr.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Tn(this.options.HTMLAttributes,t),0]}}),z6=Qr.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Tn(this.options.HTMLAttributes,t),0]}});var ab,lb;if(typeof WeakMap<"u"){let t=new WeakMap;ab=e=>t.get(e),lb=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;ab=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},lb=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var ze=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let s=r+1,i=o+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;i<this.height&&this.map[e+this.width*a]==n;a++)i++;return{left:r,top:o,right:s,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:i==this.height)?null:this.map[r+this.width*(n<0?s-1:i)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:s}=this.findCell(t),{left:i,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,i),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const s=r*this.width+o,i=this.map[s];n[i]||(n[i]=!0,!(o==t.left&&o&&this.map[s-1]==i||r==t.top&&r&&this.map[s-this.width]==i)&&e.push(i))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==t){let i=e+t*this.width;const a=(t+1)*this.width;for(;i<a&&this.map[i]<o;)i++;return i==a?s-1:this.map[i]}o=s}}static get(t){return ab(t)||lb(t,U6(t))}};function U6(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=W6(t),n=t.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,d=e*n;c<d;c++)r[c]=0;for(let c=0,d=0;c<n;c++){const u=t.child(c);d++;for(let p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==u.childCount)break;const g=u.child(p),{colspan:b,rowspan:v,colwidth:x}=g.attrs;for(let w=0;w<v;w++){if(w+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:v-w});break}const k=o+w*e;for(let C=0;C<b;C++){r[k+C]==0?r[k+C]=d:(s||(s=[])).push({type:"collision",row:c,pos:d,n:b-C});const S=x&&x[C];if(S){const T=(k+C)%e*2,E=i[T];E==null||E!=S&&i[T+1]==1?(i[T]=S,i[T+1]=1):E==S&&i[T+1]++}}}o+=b,d+=g.nodeSize}const h=(c+1)*e;let f=0;for(;o<h;)r[o++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),d++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new ze(e,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&G6(a,i,t),a}function W6(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=t.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function G6(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const d=(o+c)%t.width,u=e[d*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=q6(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function q6(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Vt(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var hs=new Te("selectingCells");function el(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function K6(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function eo(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function b1(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=el(e.$head)||Y6(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Y6(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function cb(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function J6(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function v1(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function M_(t,e,n){const r=t.node(-1),o=ze.get(r),s=t.start(-1),i=o.nextCell(t.pos-s,e,n);return i==null?null:t.node(0).resolve(s+i)}function Pi(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function A_(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function Z6(t,e,n){const r=Vt(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var Re=class mo extends ee{constructor(e,n=e){const r=e.node(-1),o=ze.get(r),s=e.start(-1),i=o.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=o.cellsInRect(i).filter(d=>d!=n.pos-s);l.unshift(n.pos-s);const c=l.map(d=>{const u=r.nodeAt(d);if(!u)throw RangeError(`No cell with offset ${d} found`);const h=s+d+1;return new lA(a.resolve(h),a.resolve(h+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(cb(r)&&cb(o)&&v1(r,o)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?mo.rowSelection(r,o):s&&this.isColSelection()?mo.colSelection(r,o):new mo(r,o)}return U.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=ze.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},i=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let d=l*n.width+o.left,u=o.left;u<o.right;u++,d++){const h=n.map[d];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const g=o.left-f.left,b=f.right-o.right;if(g>0||b>0){let v=p.attrs;if(g>0&&(v=Pi(v,0,g)),b>0&&(v=Pi(v,v.colspan-b,b)),f.left<o.left){if(p=p.type.createAndFill(v),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else p=p.type.create(v,p.content)}if(f.top<o.top||f.bottom>o.bottom){const v={...p.attrs,rowspan:Math.min(f.bottom,o.bottom)-Math.max(f.top,o.top)};f.top<o.top?p=p.type.createAndFill(v):p=p.type.create(v,p.content)}c.push(p)}i.push(e.child(l).copy(R.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:i;return new j(R.from(a),1,1)}replace(e,n=j.empty){const r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){const{$from:a,$to:l}=o[i],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),i?j.empty:n)}const s=ee.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new j(R.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=ze.get(n),o=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let i=0;i<s.length;i++)e(n.nodeAt(s[i]),o+s[i])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=ze.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.top<=a.top?(i.top>0&&(e=l.resolve(s+o.map[i.left])),a.bottom<o.height&&(n=l.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+o.map[a.left])),i.bottom<o.height&&(e=l.resolve(s+o.map[o.width*(o.height-1)+i.right-1]))),new mo(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=ze.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(o,s)>0)return!1;const i=o+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(e){return e instanceof mo&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=ze.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.left<=a.left?(i.left>0&&(e=l.resolve(s+o.map[i.top*o.width])),a.right<o.width&&(n=l.resolve(s+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+o.map[a.top*o.width])),i.right<o.width&&(e=l.resolve(s+o.map[o.width*(i.top+1)-1]))),new mo(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new mo(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new mo(e.resolve(n),e.resolve(r))}getBookmark(){return new X6(this.$anchorCell.pos,this.$headCell.pos)}};Re.prototype.visible=!1;ee.jsonID("cell",Re);var X6=class __{constructor(e,n){this.anchor=e,this.head=n}map(e){return new __(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&v1(n,r)?new Re(n,r):ee.near(r,1)}};function Q6(t){if(!(t.selection instanceof Re))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(_e.node(r,r+n.nodeSize,{class:"selectedCell"}))}),be.create(t.doc,e)}function eH({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function tH({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function nH(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,i;if(r instanceof q&&(i=r.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")s=Re.create(o,r.from);else if(i=="row"){const a=o.resolve(r.from+1);s=Re.rowSelection(a,a)}else if(!n){const a=ze.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=Re.create(o,l+1,c)}}else r instanceof U&&eH(r)?s=U.create(o,r.from):r instanceof U&&tH(r)&&(s=U.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var rH=new Te("fix-tables");function R_(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let i=0,a=0;i<s;i++){const l=e.child(i);for(let c=a,d=Math.min(o,i+3);c<d;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?R_(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function oH(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=sH(t,o,s,n))};return e?e.doc!=t.doc&&R_(e.doc,t.doc,0,r):t.doc.descendants(r),n}function sH(t,e,n,r){const o=ze.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const d=e.nodeAt(c.pos);if(!d)continue;const u=d.attrs;for(let h=0;h<u.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Pi(u,u.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let i,a;for(let l=0;l<s.length;l++)s[l]&&(i==null&&(i=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const d=e.child(l),u=c+d.nodeSize,h=s[l];if(h>0){let f="cell";d.firstChild&&(f=d.firstChild.type.spec.tableRole);const p=[];for(let b=0;b<h;b++){const v=Vt(t.schema)[f].createAndFill();v&&p.push(v)}const g=(l==0||i==l-1)&&a==l?c+1:u-1;r.insert(r.mapping.map(g),p)}c=u}return r.setMeta(rH,{fixTables:!0})}function to(t){const e=t.selection,n=b1(t),r=n.node(-1),o=n.start(-1),s=ze.get(r);return{...e instanceof Re?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function P_(t,{map:e,tableStart:n,table:r},o){let s=o>0?-1:0;Z6(e,r,o+s)&&(s=o==0||o==e.width?null:0);for(let i=0;i<e.height;i++){const a=i*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,A_(c.attrs,o-e.colCount(l))),i+=c.attrs.rowspan-1}else{const l=s==null?Vt(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(i,o,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function iH(t,e){if(!eo(t))return!1;if(e){const n=to(t);e(P_(t.tr,n,n.left))}return!0}function aH(t,e){if(!eo(t))return!1;if(e){const n=to(t);e(P_(t.tr,n,n.right))}return!0}function lH(t,{map:e,table:n,tableStart:r},o){const s=t.mapping.maps.length;for(let i=0;i<e.height;){const a=i*e.width+o,l=e.map[a],c=n.nodeAt(l),d=c.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,Pi(d,o-e.colCount(l)));else{const u=t.mapping.slice(s).map(r+l);t.delete(u,u+c.nodeSize)}i+=d.rowspan}}function cH(t,e){if(!eo(t))return!1;if(e){const n=to(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;lH(r,n,o),o!=n.left;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=ze.get(s)}e(r)}return!0}function dH(t,e,n){var r;const o=Vt(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function I_(t,{map:e,tableStart:n,table:r},o){var s;let i=n;for(let c=0;c<o;c++)i+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;dH(e,r,o+l)&&(l=o==0||o==e.height?null:0);for(let c=0,d=e.width*o;c<e.width;c++,d++)if(o>0&&o<e.height&&e.map[d]==e.map[d-e.width]){const u=e.map[d],h=r.nodeAt(u).attrs;t.setNodeMarkup(n+u,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const u=l==null?Vt(r.type.schema).cell:(s=r.nodeAt(e.map[d+l*e.width]))==null?void 0:s.type,h=u==null?void 0:u.createAndFill();h&&a.push(h)}return t.insert(i,Vt(r.type.schema).row.create(null,a)),t}function uH(t,e){if(!eo(t))return!1;if(e){const n=to(t);e(I_(t.tr,n,n.top))}return!0}function hH(t,e){if(!eo(t))return!1;if(e){const n=to(t);e(I_(t.tr,n,n.bottom))}return!0}function fH(t,{map:e,table:n,tableStart:r},o){let s=0;for(let c=0;c<o;c++)s+=n.child(c).nodeSize;const i=s+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(s+r,i+r);const l=new Set;for(let c=0,d=o*e.width;c<e.width;c++,d++){const u=e.map[d];if(!l.has(u)){if(l.add(u),o>0&&u==e.map[d-e.width]){const h=n.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(o<e.height&&u==e.map[d+e.width]){const h=n.nodeAt(u),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),g=e.positionAt(o+1,c,n);t.insert(t.mapping.slice(a).map(r+g),p),c+=f.colspan-1}}}}function pH(t,e){if(!eo(t))return!1;if(e){const n=to(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;fH(r,n,o),o!=n.top;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=ze.get(n.table)}e(r)}return!0}function hC(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function mH({width:t,height:e,map:n},r){let o=r.top*t+r.left,s=o,i=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[i]==n[i+t])return!0;o++,i++}return!1}function gH(t,e){const n=t.selection;if(!(n instanceof Re)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=to(t),{map:o}=r;if(mH(o,r))return!1;if(e){const s=t.tr,i={};let a=R.empty,l,c;for(let d=r.top;d<r.bottom;d++)for(let u=r.left;u<r.right;u++){const h=o.map[d*o.width+u],f=r.table.nodeAt(h);if(!(i[h]||!f))if(i[h]=!0,l==null)l=h,c=f;else{hC(f)||(a=a.append(f.content));const p=s.mapping.map(h+r.tableStart);s.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...A_(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const d=l+1+c.content.size,u=hC(c)?l+1:d;s.replaceWith(u+r.tableStart,d+r.tableStart,a)}s.setSelection(new Re(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function yH(t,e){const n=Vt(t.schema);return bH(({node:r})=>n[r.type.spec.tableRole])(t,e)}function bH(t){return(e,n)=>{var r;const o=e.selection;let s,i;if(o instanceof Re){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;s=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(s=K6(o.$from),!s)return!1;i=(r=el(o.$from))==null?void 0:r.pos}if(s==null||i==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const d=to(e),u=e.tr;for(let f=0;f<d.right-d.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=d.top;f<d.bottom;f++){let p=d.map.positionAt(f,d.left,d.table);f==d.top&&(p+=s.nodeSize);for(let g=d.left,b=0;g<d.right;g++,b++)g==d.left&&f==d.top||u.insert(h=u.mapping.map(p+d.tableStart,1),t({node:s,row:f,col:g}).createAndFill(l[b]))}u.setNodeMarkup(i,t({node:s,row:d.top,col:d.left}),l[0]),o instanceof Re&&u.setSelection(new Re(u.doc.resolve(o.$anchorCell.pos),h?u.doc.resolve(h):void 0)),n(u)}return!0}}function vH(t){return function(e,n){if(!eo(e))return!1;if(n){const r=Vt(e.schema),o=to(e),s=e.tr,i=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function fC(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function w1(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?vH(t):function(n,r){if(!eo(n))return!1;if(r){const o=Vt(n.schema),s=to(n),i=n.tr,a=fC("row",s,o),l=fC("column",s,o),d=(t==="column"?a:t==="row"?l:!1)?1:0,u=t=="column"?{left:0,top:d,right:1,bottom:s.map.height}:t=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(u).forEach(f=>{const p=f+s.tableStart,g=i.doc.nodeAt(p);g&&i.setNodeMarkup(p,h,g.attrs)}),r(i)}return!0}}w1("row",{useDeprecatedLogic:!0});w1("column",{useDeprecatedLogic:!0});w1("cell",{useDeprecatedLogic:!0});function wH(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),i=s.lastChild;if(i)return o-1-i.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function pC(t){return function(e,n){if(!eo(e))return!1;const r=wH(b1(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(U.between(o,J6(o))).scrollIntoView())}return!0}}function Ru(t,e){const n=t.selection;if(!(n instanceof Re))return!1;if(e){const r=t.tr,o=Vt(t.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new j(o,0,0))}),r.docChanged&&e(r)}return!0}function xH(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,i=o.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const d=l?0:Math.max(0,n-1),u=l<e.childCount-1?0:Math.max(0,r-1);(d||u)&&(c=db(Vt(i).row,new j(c,d,u)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?db(Vt(i).row,new j(e,n,r)).content:e);else return null;return kH(i,a)}function kH(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let i=s.childCount-1;i>=0;i--){const{rowspan:a,colspan:l}=s.child(i).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(R.empty),n[o]<r){const s=Vt(t).cell.createAndFill(),i=[];for(let a=n[o];a<r;a++)i.push(s);e[o]=e[o].append(R.from(i))}return{height:e.length,width:r,rows:e}}function db(t,e){const n=t.createAndFill();return new Y0(n).replace(0,n.content.size,e).doc}function CH({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],i=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let d=s[a]||0,u=0;d<r;u++){let h=l.child(u%l.childCount);d+h.attrs.colspan>r&&(h=h.type.createChecked(Pi(h.attrs,h.attrs.colspan,d+h.attrs.colspan-r),h.content)),c.push(h),d+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}i.push(R.from(c))}n=i,t=r}if(e!=o){const s=[];for(let i=0,a=0;i<o;i++,a++){const l=[],c=n[a%e];for(let d=0;d<c.childCount;d++){let u=c.child(d);i+u.attrs.rowspan>o&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,o-u.attrs.rowspan)},u.content)),l.push(u)}s.push(R.from(l))}n=s,e=o}return{width:t,height:e,rows:n}}function SH(t,e,n,r,o,s,i){const a=t.doc.type.schema,l=Vt(a);let c,d;if(o>e.width)for(let u=0,h=0;u<e.height;u++){const f=n.child(u);h+=f.nodeSize;const p=[];let g;f.lastChild==null||f.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=d||(d=l.header_cell.createAndFill());for(let b=e.width;b<o;b++)p.push(g);t.insert(t.mapping.slice(i).map(h-1+r),p)}if(s>e.height){const u=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,o);p++){const b=p>=e.width?!1:n.nodeAt(e.map[g+p]).type==l.header_cell;u.push(b?d||(d=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,R.from(u)),f=[];for(let p=e.height;p<s;p++)f.push(h);t.insert(t.mapping.slice(i).map(r+n.nodeSize-2),f)}return!!(c||d)}function mC(t,e,n,r,o,s,i,a){if(i==0||i==e.height)return!1;let l=!1;for(let c=o;c<s;c++){const d=i*e.width+c,u=e.map[d];if(e.map[d-e.width]==u){l=!0;const h=n.nodeAt(u),{top:f,left:p}=e.findCell(u);t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h.attrs,rowspan:i-f}),t.insert(t.mapping.slice(a).map(e.positionAt(i,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-i})),c+=h.attrs.colspan-1}}return l}function gC(t,e,n,r,o,s,i,a){if(i==0||i==e.width)return!1;let l=!1;for(let c=o;c<s;c++){const d=c*e.width+i,u=e.map[d];if(e.map[d-1]==u){l=!0;const h=n.nodeAt(u),f=e.colCount(u),p=t.mapping.slice(a).map(u+r);t.setNodeMarkup(p,null,Pi(h.attrs,i-f,h.attrs.colspan-(i-f))),t.insert(p+h.nodeSize,h.type.createAndFill(Pi(h.attrs,0,i-f))),c+=h.attrs.rowspan-1}}return l}function yC(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=ze.get(s);const{top:a,left:l}=r,c=l+o.width,d=a+o.height,u=t.tr;let h=0;function f(){if(s=n?u.doc.nodeAt(n-1):u.doc,!s)throw new Error("No table found");i=ze.get(s),h=u.mapping.maps.length}SH(u,i,s,n,c,d,h)&&f(),mC(u,i,s,n,l,c,a,h)&&f(),mC(u,i,s,n,l,c,d,h)&&f(),gC(u,i,s,n,a,d,l,h)&&f(),gC(u,i,s,n,a,d,c,h)&&f();for(let p=a;p<d;p++){const g=i.positionAt(p,l,s),b=i.positionAt(p,c,s);u.replace(u.mapping.slice(h).map(g+n),u.mapping.slice(h).map(b+n),new j(o.rows[p-a],0,0))}f(),u.setSelection(new Re(u.doc.resolve(n+i.positionAt(a,l,s)),u.doc.resolve(n+i.positionAt(d-1,c-1,s)))),e(u)}var TH=i1({ArrowLeft:Pu("horiz",-1),ArrowRight:Pu("horiz",1),ArrowUp:Pu("vert",-1),ArrowDown:Pu("vert",1),"Shift-ArrowLeft":Iu("horiz",-1),"Shift-ArrowRight":Iu("horiz",1),"Shift-ArrowUp":Iu("vert",-1),"Shift-ArrowDown":Iu("vert",1),Backspace:Ru,"Mod-Backspace":Ru,Delete:Ru,"Mod-Delete":Ru});function fh(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Pu(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof Re)return fh(n,r,ee.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const i=D_(o,t,e);if(i==null)return!1;if(t=="horiz")return fh(n,r,ee.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(i),l=M_(a,t,e);let c;return l?c=ee.near(l,1):e<0?c=ee.near(n.doc.resolve(a.before(-1)),-1):c=ee.near(n.doc.resolve(a.after(-1)),1),fh(n,r,c)}}}function Iu(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof Re)i=s;else{const l=D_(o,t,e);if(l==null)return!1;i=new Re(n.doc.resolve(l))}const a=M_(i.$headCell,t,e);return a?fh(n,r,new Re(i.$anchorCell,a)):!1}}function EH(t,e){const n=t.state.doc,r=el(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Re(r))),!0):!1}function MH(t,e,n){if(!eo(t.state))return!1;let r=xH(n);const o=t.state.selection;if(o instanceof Re){r||(r={width:1,height:1,rows:[R.from(db(Vt(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=ze.get(s).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=CH(r,a.right-a.left,a.bottom-a.top),yC(t.state,t.dispatch,i,a,r),!0}else if(r){const s=b1(t.state),i=s.start(-1);return yC(t.state,t.dispatch,i,ze.get(s.node(-1)).findCell(s.pos-i),r),!0}else return!1}function AH(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=bC(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof Re)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=el(t.state.selection.$anchor))!=null&&((n=fg(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(l,c){let d=fg(t,c);const u=hs.getState(t.state)==null;if(!d||!v1(l,d))if(u)d=l;else return;const h=new Re(l,d);if(u||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);u&&f.setMeta(hs,l.pos),t.dispatch(f)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),hs.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(hs,-1))}function a(l){const c=l,d=hs.getState(t.state);let u;if(d!=null)u=t.state.doc.resolve(d);else if(bC(t,c.target)!=r&&(u=fg(t,e),!u))return i();u&&s(u,c)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function D_(t,e,n){if(!(t.state.selection instanceof U))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function bC(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function fg(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?el(t.state.doc.resolve(n.pos)):null}var N_=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ub(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,ub(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function ub(t,e,n,r,o,s){var i;let a=0,l=!0,c=e.firstChild;const d=t.firstChild;if(d){for(let u=0,h=0;u<d.childCount;u++){const{colspan:f,colwidth:p}=d.child(u).attrs;for(let g=0;g<f;g++,h++){const b=o==h?s:p&&p[g],v=b?b+"px":"";if(a+=b||r,b||(l=!1),c)c.style.width!=v&&(c.style.width=v),c=c.nextSibling;else{const x=document.createElement("col");x.style.width=v,e.appendChild(x)}}}for(;c;){const u=c.nextSibling;(i=c.parentNode)==null||i.removeChild(c),c=u}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var kn=new Te("tableColumnResizing");function _H({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=N_,lastColumnResizable:o=!0}={}){const s=new me({key:kn,state:{init(i,a){var l,c;const d=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,u=Vt(a.schema).table.name;return r&&d&&(d[u]=(h,f)=>new r(h,n,f)),new RH(-1,!1)},apply(i,a){return a.apply(i)}},props:{attributes:i=>{const a=kn.getState(i);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(i,a)=>{PH(i,a,t,o)},mouseleave:i=>{IH(i)},mousedown:(i,a)=>{DH(i,a,e,n)}},decorations:i=>{const a=kn.getState(i);if(a&&a.activeHandle>-1)return BH(i,a.activeHandle)},nodeViews:{}}});return s}var RH=class ph{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(kn);if(r&&r.setHandle!=null)return new ph(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new ph(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return cb(e.doc.resolve(o))||(o=-1),new ph(o,n.dragging)}return n}};function PH(t,e,n,r){if(!t.editable)return;const o=kn.getState(t.state);if(o&&!o.dragging){const s=OH(e.target);let i=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?i=vC(t,e,"left",n):l-e.clientX<=n&&(i=vC(t,e,"right",n))}if(i!=o.activeHandle){if(!r&&i!==-1){const a=t.state.doc.resolve(i),l=a.node(-1),c=ze.get(l),d=a.start(-1);if(c.colCount(a.pos-d)+a.nodeAfter.attrs.colspan-1==c.width-1)return}O_(t,i)}}}function IH(t){if(!t.editable)return;const e=kn.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&O_(t,-1)}function DH(t,e,n,r){var o;if(!t.editable)return!1;const s=(o=t.dom.ownerDocument.defaultView)!=null?o:window,i=kn.getState(t.state);if(!i||i.activeHandle==-1||i.dragging)return!1;const a=t.state.doc.nodeAt(i.activeHandle),l=NH(t,i.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(kn,{setDragging:{startX:e.clientX,startWidth:l}}));function c(u){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",d);const h=kn.getState(t.state);h!=null&&h.dragging&&(LH(t,h.activeHandle,wC(h.dragging,u,n)),t.dispatch(t.state.tr.setMeta(kn,{setDragging:null})))}function d(u){if(!u.which)return c(u);const h=kn.getState(t.state);if(h&&h.dragging){const f=wC(h.dragging,u,n);xC(t,h.activeHandle,f,r)}}return xC(t,i.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",d),e.preventDefault(),!0}function NH(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function OH(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function vC(t,e,n,r){const o=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!s)return-1;const{pos:i}=s,a=el(t.state.doc.resolve(i));if(!a)return-1;if(n=="right")return a.pos;const l=ze.get(a.node(-1)),c=a.start(-1),d=l.map.indexOf(a.pos-c);return d%l.width==0?-1:c+l.map[d-1]}function wC(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function O_(t,e){t.dispatch(t.state.tr.setMeta(kn,{setHandle:e}))}function LH(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),s=ze.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const d=c*s.width+a;if(c&&s.map[d]==s.map[d-s.width])continue;const u=s.map[d],h=o.nodeAt(u).attrs,f=h.colspan==1?0:a-s.colCount(u);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():jH(h.colspan);p[f]=n,l.setNodeMarkup(i+u,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function xC(t,e,n,r){const o=t.state.doc.resolve(e),s=o.node(-1),i=o.start(-1),a=ze.get(s).colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&ub(s,l.firstChild,l,r,a,n)}function jH(t){return Array(t).fill(0)}function BH(t,e){var n;const r=[],o=t.doc.resolve(e),s=o.node(-1);if(!s)return be.empty;const i=ze.get(s),a=o.start(-1),l=i.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<i.height;c++){const d=l+c*i.width;if((l==i.width-1||i.map[d]!=i.map[d+1])&&(c==0||i.map[d]!=i.map[d-i.width])){const u=i.map[d],h=a+u+s.nodeAt(u).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=kn.getState(t))!=null&&n.dragging&&r.push(_e.node(a+u,a+u+s.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),r.push(_e.widget(h,f))}}return be.create(t.doc,r)}function $H({allowTableNodeSelection:t=!1}={}){return new me({key:hs,state:{init(){return null},apply(e,n){const r=e.getMeta(hs);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:Q6,handleDOMEvents:{mousedown:AH},createSelectionBetween(e){return hs.getState(e.state)!=null?e.state.selection:null},handleTripleClick:EH,handleKeyDown:TH,handlePaste:MH},appendTransaction(e,n,r){return nH(r,oH(r,n),t)}})}class Qe extends ee{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Qe.valid(r)?new Qe(r):ee.near(r)}content(){return j.empty}eq(e){return e instanceof Qe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Qe(e.resolve(n.pos))}getBookmark(){return new x1(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!VH(e)||!HH(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Qe.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(Qe.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!q.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(Qe.valid(a))return a}return null}}}Qe.prototype.visible=!1;Qe.findFrom=Qe.findGapCursorFrom;ee.jsonID("gapcursor",Qe);class x1{constructor(e){this.pos=e}map(e){return new x1(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Qe.valid(n)?new Qe(n):ee.near(n)}}function VH(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function HH(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function FH(){return new me({props:{decorations:GH,createSelectionBetween(t,e,n){return e.pos==n.pos&&Qe.valid(n)?new Qe(n):null},handleClick:UH,handleKeyDown:zH,handleDOMEvents:{beforeinput:WH}}})}const zH=i1({ArrowLeft:Du("horiz",-1),ArrowRight:Du("horiz",1),ArrowUp:Du("vert",-1),ArrowDown:Du("vert",1)});function Du(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof U){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Qe.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Qe(c))),!0):!1}}function UH(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Qe.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&q.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Qe(r))),!0)}function WH(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Qe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=R.empty;for(let i=r.length-1;i>=0;i--)o=R.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new j(o,0,0));return s.setSelection(U.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function GH(t){if(!(t.selection instanceof Qe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",be.create(t.doc,[_e.widget(t.selection.head,e,{key:"gapcursor"})])}const qH=Ne.create({name:"gapCursor",addProseMirrorPlugins(){return[FH()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ye(W(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var Zh=200,ft=function(){};ft.prototype.append=function(e){return e.length?(e=ft.from(e),!this.length&&e||e.length<Zh&&this.leafAppend(e)||this.length<Zh&&e.leafPrepend(this)||this.appendInner(e)):this};ft.prototype.prepend=function(e){return e.length?ft.from(e).append(this):this};ft.prototype.appendInner=function(e){return new KH(this,e)};ft.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ft.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ft.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ft.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ft.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};ft.from=function(e){return e instanceof ft?e:e&&e.length?new L_(e):ft.empty};var L_=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Zh)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Zh)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ft);ft.empty=new L_([]);var KH=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ft);const YH=500;class ir{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],d=[];return this.items.forEach((u,h)=>{if(!u.step){o||(o=this.remapping(r,h+1),s=o.maps.length),s--,d.push(u);return}if(o){d.push(new Xo(u.map));let f=u.step.map(o.slice(s)),p;f&&i.maybeStep(f).doc&&(p=i.mapping.maps[i.mapping.maps.length-1],c.push(new Xo(p,void 0,void 0,c.length+d.length))),s--,p&&o.appendMap(p,s)}else i.maybeStep(u.step);if(u.selection)return a=o?u.selection.map(o.slice(s)):u.selection,l=new ir(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),h=new Xo(e.mapping.maps[d],u,n),f;(f=l&&l.merge(h))&&(h=f,d?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(i++,n=void 0),o||(l=h)}let c=i-r.depth;return c>ZH&&(a=JH(a,c),i-=c),new ir(a.append(s),i)}remapping(e,n){let r=new Na;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new ir(this.items.append(e.map(n=>new Xo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;i=Math.min(i,f);let p=s.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),b=h.selection&&h.selection.map(s.slice(l+1,f));b&&a++,r.push(new Xo(p,g,b))}else r.push(new Xo(p))},o);let c=[];for(let h=n;h<i;h++)c.push(new Xo(s.maps[h]));let d=this.items.slice(0,o).append(c).append(r),u=new ir(d,a);return u.emptyItemCount()>YH&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=i.selection&&i.selection.map(n.slice(r));d&&s++;let u=new Xo(c.invert(),l,d),h,f=o.length-1;(h=o.length&&o[f].merge(u))?o[f]=h:o.push(u)}}else i.map&&r--},this.items.length,0),new ir(ft.from(o.reverse()),s)}}ir.empty=new ir(ft.empty,0);function JH(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let Xo=class j_{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new j_(n.getMap().invert(),n,this.selection)}}};class as{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const ZH=20;function XH(t,e,n,r){let o=n.getMeta(vi),s;if(o)return o.historyState;n.getMeta(tF)&&(t=new as(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(vi))return i.getMeta(vi).redo?new as(t.done.addTransform(n,void 0,r,mh(e)),t.undone,kC(n.mapping.maps),t.prevTime,t.prevComposition):new as(t.done,t.undone.addTransform(n,void 0,r,mh(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!QH(n,t.prevRanges)),c=i?pg(t.prevRanges,n.mapping):kC(n.mapping.maps);return new as(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,mh(e)),ir.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new as(t.done.rebased(n,s),t.undone.rebased(n,s),pg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new as(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),pg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function QH(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function kC(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,i)=>e.push(s,i));return e}function pg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function eF(t,e,n){let r=mh(e),o=vi.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),l=new as(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(vi,{redo:n,historyState:l})}let mg=!1,CC=null;function mh(t){let e=t.plugins;if(CC!=e){mg=!1,CC=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){mg=!0;break}}return mg}const vi=new Te("history"),tF=new Te("closeHistory");function nF(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new me({key:vi,state:{init(){return new as(ir.empty,ir.empty,null,0,-1)},apply(e,n,r){return XH(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?k1:r=="historyRedo"?C1:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function B_(t,e){return(n,r)=>{let o=vi.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=eF(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const k1=B_(!1,!0),C1=B_(!0,!0),rF=Ne.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>k1(t,e),redo:()=>({state:t,dispatch:e})=>C1(t,e)}},addProseMirrorPlugins(){return[nF(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),oF="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",sF="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Va=(t,e)=>{for(const n in e)t[n]=e[n];return t},hb="numeric",fb="ascii",pb="alpha",uc="asciinumeric",Ql="alphanumeric",mb="domain",$_="emoji",iF="scheme",aF="slashscheme",gg="whitespace";function lF(t,e){return t in e||(e[t]=[]),e[t]}function ui(t,e,n){e[hb]&&(e[uc]=!0,e[Ql]=!0),e[fb]&&(e[uc]=!0,e[pb]=!0),e[uc]&&(e[Ql]=!0),e[pb]&&(e[Ql]=!0),e[Ql]&&(e[mb]=!0),e[$_]&&(e[mb]=!0);for(const r in e){const o=lF(r,n);o.indexOf(t)<0&&o.push(t)}}function cF(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ln(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ln.groups={};ln.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||ln.groups;let o;return e&&e.j?o=e:(o=new ln(e),n&&r&&ui(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const s=t.length;if(!s)return o;for(let i=0;i<s-1;i++)o=o.tt(t[i]);return o.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||ln.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const s=e;let i,a=o.go(t);if(a?(i=new ln,Va(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new ln,s){if(r)if(i.t&&typeof i.t=="string"){const l=Va(cF(i.t,r),n);ui(s,l,r)}else n&&ui(s,n,r);i.t=s}return o.j[t]=i,i}};const fe=(t,e,n,r,o)=>t.ta(e,n,r,o),Ze=(t,e,n,r,o)=>t.tr(e,n,r,o),SC=(t,e,n,r,o)=>t.ts(e,n,r,o),O=(t,e,n,r,o)=>t.tt(e,n,r,o),go="WORD",gb="UWORD",V_="ASCIINUMERICAL",H_="ALPHANUMERICAL",Wc="LOCALHOST",yb="TLD",bb="UTLD",gh="SCHEME",ha="SLASH_SCHEME",S1="NUM",vb="WS",T1="NL",hc="OPENBRACE",fc="CLOSEBRACE",Xh="OPENBRACKET",Qh="CLOSEBRACKET",ef="OPENPAREN",tf="CLOSEPAREN",nf="OPENANGLEBRACKET",rf="CLOSEANGLEBRACKET",of="FULLWIDTHLEFTPAREN",sf="FULLWIDTHRIGHTPAREN",af="LEFTCORNERBRACKET",lf="RIGHTCORNERBRACKET",cf="LEFTWHITECORNERBRACKET",df="RIGHTWHITECORNERBRACKET",uf="FULLWIDTHLESSTHAN",hf="FULLWIDTHGREATERTHAN",ff="AMPERSAND",pf="APOSTROPHE",mf="ASTERISK",ls="AT",gf="BACKSLASH",yf="BACKTICK",bf="CARET",fs="COLON",E1="COMMA",vf="DOLLAR",_r="DOT",wf="EQUALS",M1="EXCLAMATION",Ln="HYPHEN",pc="PERCENT",xf="PIPE",kf="PLUS",Cf="POUND",mc="QUERY",A1="QUOTE",F_="FULLWIDTHMIDDLEDOT",_1="SEMI",Rr="SLASH",gc="TILDE",Sf="UNDERSCORE",z_="EMOJI",Tf="SYM";var U_=Object.freeze({__proto__:null,ALPHANUMERICAL:H_,AMPERSAND:ff,APOSTROPHE:pf,ASCIINUMERICAL:V_,ASTERISK:mf,AT:ls,BACKSLASH:gf,BACKTICK:yf,CARET:bf,CLOSEANGLEBRACKET:rf,CLOSEBRACE:fc,CLOSEBRACKET:Qh,CLOSEPAREN:tf,COLON:fs,COMMA:E1,DOLLAR:vf,DOT:_r,EMOJI:z_,EQUALS:wf,EXCLAMATION:M1,FULLWIDTHGREATERTHAN:hf,FULLWIDTHLEFTPAREN:of,FULLWIDTHLESSTHAN:uf,FULLWIDTHMIDDLEDOT:F_,FULLWIDTHRIGHTPAREN:sf,HYPHEN:Ln,LEFTCORNERBRACKET:af,LEFTWHITECORNERBRACKET:cf,LOCALHOST:Wc,NL:T1,NUM:S1,OPENANGLEBRACKET:nf,OPENBRACE:hc,OPENBRACKET:Xh,OPENPAREN:ef,PERCENT:pc,PIPE:xf,PLUS:kf,POUND:Cf,QUERY:mc,QUOTE:A1,RIGHTCORNERBRACKET:lf,RIGHTWHITECORNERBRACKET:df,SCHEME:gh,SEMI:_1,SLASH:Rr,SLASH_SCHEME:ha,SYM:Tf,TILDE:gc,TLD:yb,UNDERSCORE:Sf,UTLD:bb,UWORD:gb,WORD:go,WS:vb});const lo=/[a-z]/,Ll=new RegExp("\\p{L}","u"),yg=new RegExp("\\p{Emoji}","u"),co=/\d/,bg=/\s/,TC="\r",vg=`
`,dF="️",uF="‍",wg="￼";let Nu=null,Ou=null;function hF(t=[]){const e={};ln.groups=e;const n=new ln;Nu==null&&(Nu=EC(oF)),Ou==null&&(Ou=EC(sF)),O(n,"'",pf),O(n,"{",hc),O(n,"}",fc),O(n,"[",Xh),O(n,"]",Qh),O(n,"(",ef),O(n,")",tf),O(n,"<",nf),O(n,">",rf),O(n,"（",of),O(n,"）",sf),O(n,"「",af),O(n,"」",lf),O(n,"『",cf),O(n,"』",df),O(n,"＜",uf),O(n,"＞",hf),O(n,"&",ff),O(n,"*",mf),O(n,"@",ls),O(n,"`",yf),O(n,"^",bf),O(n,":",fs),O(n,",",E1),O(n,"$",vf),O(n,".",_r),O(n,"=",wf),O(n,"!",M1),O(n,"-",Ln),O(n,"%",pc),O(n,"|",xf),O(n,"+",kf),O(n,"#",Cf),O(n,"?",mc),O(n,'"',A1),O(n,"/",Rr),O(n,";",_1),O(n,"~",gc),O(n,"_",Sf),O(n,"\\",gf),O(n,"・",F_);const r=Ze(n,co,S1,{[hb]:!0});Ze(r,co,r);const o=Ze(r,lo,V_,{[uc]:!0}),s=Ze(r,Ll,H_,{[Ql]:!0}),i=Ze(n,lo,go,{[fb]:!0});Ze(i,co,o),Ze(i,lo,i),Ze(o,co,o),Ze(o,lo,o);const a=Ze(n,Ll,gb,{[pb]:!0});Ze(a,lo),Ze(a,co,s),Ze(a,Ll,a),Ze(s,co,s),Ze(s,lo),Ze(s,Ll,s);const l=O(n,vg,T1,{[gg]:!0}),c=O(n,TC,vb,{[gg]:!0}),d=Ze(n,bg,vb,{[gg]:!0});O(n,wg,d),O(c,vg,l),O(c,wg,d),Ze(c,bg,d),O(d,TC),O(d,vg),Ze(d,bg,d),O(d,wg,d);const u=Ze(n,yg,z_,{[$_]:!0});O(u,"#"),Ze(u,yg,u),O(u,dF,u);const h=O(u,uF);O(h,"#"),Ze(h,yg,u);const f=[[lo,i],[co,o]],p=[[lo,null],[Ll,a],[co,s]];for(let g=0;g<Nu.length;g++)Qo(n,Nu[g],yb,go,f);for(let g=0;g<Ou.length;g++)Qo(n,Ou[g],bb,gb,p);ui(yb,{tld:!0,ascii:!0},e),ui(bb,{utld:!0,alpha:!0},e),Qo(n,"file",gh,go,f),Qo(n,"mailto",gh,go,f),Qo(n,"http",ha,go,f),Qo(n,"https",ha,go,f),Qo(n,"ftp",ha,go,f),Qo(n,"ftps",ha,go,f),ui(gh,{scheme:!0,ascii:!0},e),ui(ha,{slashscheme:!0,ascii:!0},e),t=t.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<t.length;g++){const b=t[g][0],x=t[g][1]?{[iF]:!0}:{[aF]:!0};b.indexOf("-")>=0?x[mb]=!0:lo.test(b)?co.test(b)?x[uc]=!0:x[fb]=!0:x[hb]=!0,SC(n,b,b,x)}return SC(n,"localhost",Wc,{ascii:!0}),n.jd=new ln(Tf),{start:n,tokens:Va({groups:e},U_)}}function W_(t,e){const n=fF(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let s=0,i=0;for(;i<r;){let a=t,l=null,c=0,d=null,u=-1,h=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(u=0,h=0,d=a):u>=0&&(u+=n[i].length,h++),c+=n[i].length,s+=n[i].length,i++;s-=u,i-=h,c-=u,o.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return o}function fF(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),s,i=o<55296||o>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function Qo(t,e,n,r,o){let s;const i=e.length;for(let a=0;a<i-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new ln(r),s.jr=o.slice(),t.j[l]=s),t=s}return s=new ln(n),s.jr=o.slice(),t.j[e[i-1]]=s,s}function EC(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let s=0;for(;o.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+s),10);i>0;i--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Gc={defaultProtocol:"http",events:null,format:MC,formatHref:MC,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function R1(t,e=null){let n=Va({},Gc);t&&(n=Va(n,t instanceof R1?t.o:t));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}R1.prototype={o:Gc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:Gc[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function MC(t){return t}function G_(t,e){this.t="token",this.v=t,this.tk=e}G_.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Gc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),s=this.toFormattedString(t),i={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),u=t.getObj("events",n,e);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),d&&Va(i,d),{tagName:o,attributes:i,content:s,eventListeners:u}}};function Dp(t,e){class n extends G_{constructor(o,s){super(o,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const AC=Dp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),_C=Dp("text"),pF=Dp("nl"),Lu=Dp("url",{isLink:!0,toHref(t=Gc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Wc&&t[1].t===fs}}),In=t=>new ln(t);function mF({groups:t}){const e=t.domain.concat([ff,mf,ls,gf,yf,bf,vf,wf,Ln,S1,pc,xf,kf,Cf,Rr,Tf,gc,Sf]),n=[pf,fs,E1,_r,M1,pc,mc,A1,_1,nf,rf,hc,fc,Qh,Xh,ef,tf,of,sf,af,lf,cf,df,uf,hf],r=[ff,pf,mf,gf,yf,bf,vf,wf,Ln,hc,fc,pc,xf,kf,Cf,mc,Rr,Tf,gc,Sf],o=In(),s=O(o,gc);fe(s,r,s),fe(s,t.domain,s);const i=In(),a=In(),l=In();fe(o,t.domain,i),fe(o,t.scheme,a),fe(o,t.slashscheme,l),fe(i,r,s),fe(i,t.domain,i);const c=O(i,ls);O(s,ls,c),O(a,ls,c),O(l,ls,c);const d=O(s,_r);fe(d,r,s),fe(d,t.domain,s);const u=In();fe(c,t.domain,u),fe(u,t.domain,u);const h=O(u,_r);fe(h,t.domain,u);const f=In(AC);fe(h,t.tld,f),fe(h,t.utld,f),O(c,Wc,f);const p=O(u,Ln);O(p,Ln,p),fe(p,t.domain,u),fe(f,t.domain,u),O(f,_r,h),O(f,Ln,p);const g=O(f,fs);fe(g,t.numeric,AC);const b=O(i,Ln),v=O(i,_r);O(b,Ln,b),fe(b,t.domain,i),fe(v,r,s),fe(v,t.domain,i);const x=In(Lu);fe(v,t.tld,x),fe(v,t.utld,x),fe(x,t.domain,i),fe(x,r,s),O(x,_r,v),O(x,Ln,b),O(x,ls,c);const w=O(x,fs),k=In(Lu);fe(w,t.numeric,k);const C=In(Lu),S=In();fe(C,e,C),fe(C,n,S),fe(S,e,C),fe(S,n,S),O(x,Rr,C),O(k,Rr,C);const T=O(a,fs),E=O(l,fs),M=O(E,Rr),_=O(M,Rr);fe(a,t.domain,i),O(a,_r,v),O(a,Ln,b),fe(l,t.domain,i),O(l,_r,v),O(l,Ln,b),fe(T,t.domain,C),O(T,Rr,C),O(T,mc,C),fe(_,t.domain,C),fe(_,e,C),O(_,Rr,C);const P=[[hc,fc],[Xh,Qh],[ef,tf],[nf,rf],[of,sf],[af,lf],[cf,df],[uf,hf]];for(let L=0;L<P.length;L++){const[V,F]=P[L],z=O(C,V);O(S,V,z),O(z,F,C);const Z=In(Lu);fe(z,e,Z);const N=In();fe(z,n),fe(Z,e,Z),fe(Z,n,N),fe(N,e,Z),fe(N,n,N),O(Z,F,C),O(N,F,C)}return O(o,Wc,x),O(o,T1,pF),{start:o,tokens:U_}}function gF(t,e,n){let r=n.length,o=0,s=[],i=[];for(;o<r;){let a=t,l=null,c=null,d=0,u=null,h=-1;for(;o<r&&!(l=a.go(n[o].t));)i.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(h=0,u=a):h>=0&&h++,o++,d++;if(h<0)o-=d,o<r&&(i.push(n[o]),o++);else{i.length>0&&(s.push(xg(_C,e,i)),i=[]),o-=h,d-=h;const f=u.t,p=n.slice(o-d,o);s.push(xg(f,e,p))}}return i.length>0&&s.push(xg(_C,e,i)),s}function xg(t,e,n){const r=n[0].s,o=n[n.length-1].e,s=e.slice(r,o);return new t(s,n)}const yF=typeof console<"u"&&console&&console.warn||(()=>{}),bF="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",He={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function vF(){return ln.groups={},He.scanner=null,He.parser=null,He.tokenQueue=[],He.pluginQueue=[],He.customSchemes=[],He.initialized=!1,He}function RC(t,e=!1){if(He.initialized&&yF(`linkifyjs: already initialized - will not register custom scheme "${t}" ${bF}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);He.customSchemes.push([t,e])}function wF(){He.scanner=hF(He.customSchemes);for(let t=0;t<He.tokenQueue.length;t++)He.tokenQueue[t][1]({scanner:He.scanner});He.parser=mF(He.scanner.tokens);for(let t=0;t<He.pluginQueue.length;t++)He.pluginQueue[t][1]({scanner:He.scanner,parser:He.parser});return He.initialized=!0,He}function P1(t){return He.initialized||wF(),gF(He.parser.start,t,W_(He.scanner.start,t))}P1.scan=W_;function q_(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new R1(n),o=P1(t),s=[];for(let i=0;i<o.length;i++){const a=o[i];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}function xF(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function kF(t){return new me({key:new Te("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!o||s)return;const{tr:i}=r,a=p1(n.doc,[...e]);if(m1(a).forEach(({newRange:c})=>{const d=Yh(r.doc,c,f=>f.isTextblock);let u,h;if(d.length>1?(u=d[0],h=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ")):d.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(u=d[0],h=r.doc.textBetween(u.pos,c.to,void 0," ")),u&&h){const f=h.split(" ").filter(v=>v!=="");if(f.length<=0)return!1;const p=f[f.length-1],g=u.pos+h.lastIndexOf(p);if(!p)return!1;const b=P1(p).map(v=>v.toObject(t.defaultProtocol));if(!xF(b))return!1;b.filter(v=>v.isLink).map(v=>({...v,from:g+v.start+1,to:g+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{g1(v.from,v.to,r.doc).some(x=>x.mark.type===t.type)||i.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!i.steps.length)return i}})}function CF(t){return new me({key:new Te("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let i=r.target;const a=[];for(;i.nodeName!=="DIV";)a.push(i),i=i.parentNode;if(!a.find(h=>h.nodeName==="A"))return!1;const l=g_(e.state,t.type.name),c=r.target,d=(o=c==null?void 0:c.href)!==null&&o!==void 0?o:l.href,u=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&d?(window.open(d,u),!0):!1}}})}function SF(t){return new me({key:new Te("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:s}=o,{empty:i}=s;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=q_(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}const TF=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Ys(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(TF,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const EF=Mt.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){RC(t);return}RC(t.scheme,t.optionalSlashes)})},onDestroy(){vF()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Ys(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Ys(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Ys(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Tn(this.options.HTMLAttributes,t),0]:["a",Tn(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Ys(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Ys(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ri({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=q_(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:i=>!!Ys(i,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(kF({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!Ys(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(CF({type:this.type})),this.options.linkOnPaste&&t.push(SF({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),MF=Qr.create({name:"text",group:"inline"}),qn=()=>new Map,wb=t=>{const e=qn();return t.forEach((n,r)=>{e.set(r,n)}),e},no=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},AF=(t,e)=>{const n=[];for(const[r,o]of t)n.push(e(o,r));return n},_F=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Ii=()=>new Set,kg=t=>t[t.length-1],RF=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Di=Array.from,PF=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},xb=Array.isArray;class K_{constructor(){this._observers=qn()}on(e,n){return no(this._observers,e,Ii).add(n),n}once(e,n){const r=(...o)=>{this.off(e,r),n(...o)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Di((this._observers.get(e)||qn()).values()).forEach(r=>r(...n))}destroy(){this._observers=qn()}}const Io=Math.floor,yh=Math.abs,_o=(t,e)=>t<e?t:e,mr=(t,e)=>t>e?t:e,Y_=t=>t!==0?t<0:1/t<0,PC=1,IC=2,Cg=4,Sg=8,qc=32,Ro=64,Kt=128,IF=1<<29,Np=31,kb=63,wi=127,DF=2147483647,J_=Number.MAX_SAFE_INTEGER,NF=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Io(t)===t),OF=String.fromCharCode,LF=t=>t.toLowerCase(),jF=/^\s*/g,BF=t=>t.replace(jF,""),$F=/([A-Z])/g,DC=(t,e)=>BF(t.replace($F,n=>`${e}${LF(n)}`)),VF=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.codePointAt(o);return r},Kc=typeof TextEncoder<"u"?new TextEncoder:null,HF=t=>Kc.encode(t),FF=Kc?HF:VF;let yc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});yc&&yc.decode(new Uint8Array).length===1&&(yc=null);class Bd{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const $d=()=>new Bd,zF=t=>{const e=$d();return t(e),ar(e)},UF=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},ar=t=>{const e=new Uint8Array(UF(t));let n=0;for(let r=0;r<t.bufs.length;r++){const o=t.bufs[r];e.set(o,n),n+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},WF=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(mr(n,e)*2),t.cpos=0)},ut=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},Cb=ut,Se=(t,e)=>{for(;e>wi;)ut(t,Kt|wi&e),e=Io(e/128);ut(t,wi&e)},I1=(t,e)=>{const n=Y_(e);for(n&&(e=-e),ut(t,(e>kb?Kt:0)|(n?Ro:0)|kb&e),e=Io(e/64);e>0;)ut(t,(e>wi?Kt:0)|wi&e),e=Io(e/128)},Sb=new Uint8Array(3e4),GF=Sb.length/3,qF=(t,e)=>{if(e.length<GF){const n=Kc.encodeInto(e,Sb).written||0;Se(t,n);for(let r=0;r<n;r++)ut(t,Sb[r])}else vn(t,FF(e))},KF=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Se(t,r);for(let o=0;o<r;o++)ut(t,n.codePointAt(o))},Sa=Kc&&Kc.encodeInto?qF:KF,Op=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=_o(n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(mr(n*2,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},vn=(t,e)=>{Se(t,e.byteLength),Op(t,e)},D1=(t,e)=>{WF(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},YF=(t,e)=>D1(t,4).setFloat32(0,e,!1),JF=(t,e)=>D1(t,8).setFloat64(0,e,!1),ZF=(t,e)=>D1(t,8).setBigInt64(0,e,!1),NC=new DataView(new ArrayBuffer(4)),XF=t=>(NC.setFloat32(0,t),NC.getFloat32(0)===t),Ha=(t,e)=>{switch(typeof e){case"string":ut(t,119),Sa(t,e);break;case"number":NF(e)&&yh(e)<=DF?(ut(t,125),I1(t,e)):XF(e)?(ut(t,124),YF(t,e)):(ut(t,123),JF(t,e));break;case"bigint":ut(t,122),ZF(t,e);break;case"object":if(e===null)ut(t,126);else if(xb(e)){ut(t,117),Se(t,e.length);for(let n=0;n<e.length;n++)Ha(t,e[n])}else if(e instanceof Uint8Array)ut(t,116),vn(t,e);else{ut(t,118);const n=Object.keys(e);Se(t,n.length);for(let r=0;r<n.length;r++){const o=n[r];Sa(t,o),Ha(t,e[o])}}break;case"boolean":ut(t,e?120:121);break;default:ut(t,127)}};class OC extends Bd{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Se(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const LC=t=>{t.count>0&&(I1(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Se(t.encoder,t.count-2))};class bh{constructor(){this.encoder=new Bd,this.s=0,this.count=0}write(e){this.s===e?this.count++:(LC(this),this.count=1,this.s=e)}toUint8Array(){return LC(this),ar(this.encoder)}}const jC=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);I1(t.encoder,e),t.count>1&&Se(t.encoder,t.count-2)}};class Tg{constructor(){this.encoder=new Bd,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(jC(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return jC(this),ar(this.encoder)}}class QF{constructor(){this.sarr=[],this.s="",this.lensE=new bh}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Bd;return this.sarr.push(this.s),this.s="",Sa(e,this.sarr.join("")),Op(e,this.lensE.toUint8Array()),ar(e)}}const As=t=>new Error(t),dr=()=>{throw As("Method unimplemented")},En=()=>{throw As("Unexpected case")},Z_=As("Unexpected end of array"),X_=As("Integer out of Range");class Lp{constructor(e){this.arr=e,this.pos=0}}const tl=t=>new Lp(t),ez=t=>t.pos!==t.arr.length,tz=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},wn=t=>tz(t,ge(t)),Fa=t=>t.arr[t.pos++],ge=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const o=t.arr[t.pos++];if(e=e+(o&wi)*n,n*=128,o<Kt)return e;if(e>J_)throw X_}throw Z_},N1=t=>{let e=t.arr[t.pos++],n=e&kb,r=64;const o=(e&Ro)>0?-1:1;if((e&Kt)===0)return o*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&wi)*r,r*=128,e<Kt)return o*n;if(n>J_)throw X_}throw Z_},nz=t=>{let e=ge(t);if(e===0)return"";{let n=String.fromCodePoint(Fa(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Fa(t));else for(;e>0;){const r=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,o),e-=r}return decodeURIComponent(escape(n))}},rz=t=>yc.decode(wn(t)),Ta=yc?rz:nz,O1=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},oz=t=>O1(t,4).getFloat32(0,!1),sz=t=>O1(t,8).getFloat64(0,!1),iz=t=>O1(t,8).getBigInt64(0,!1),az=[t=>{},t=>null,N1,oz,sz,iz,t=>!1,t=>!0,Ta,t=>{const e=ge(t),n={};for(let r=0;r<e;r++){const o=Ta(t);n[o]=Yc(t)}return n},t=>{const e=ge(t),n=[];for(let r=0;r<e;r++)n.push(Yc(t));return n},wn],Yc=t=>az[127-Fa(t)](t);class BC extends Lp{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),ez(this)?this.count=ge(this)+1:this.count=-1),this.count--,this.s}}class vh extends Lp{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=N1(this);const e=Y_(this.s);this.count=1,e&&(this.s=-this.s,this.count=ge(this)+2)}return this.count--,this.s}}class Eg extends Lp{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=N1(this),n=e&1;this.diff=Io(e/2),this.count=1,n&&(this.count=ge(this)+2)}return this.s+=this.diff,this.count--,this.s}}class lz{constructor(e){this.decoder=new vh(e),this.str=Ta(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const cz=crypto.getRandomValues.bind(crypto),dz=Math.random,Q_=()=>cz(new Uint32Array(1))[0],uz=t=>t[Io(dz()*t.length)],hz="10000000-1000-4000-8000"+-1e11,fz=()=>hz.replace(/[018]/g,t=>(t^Q_()&15>>t/4).toString(16)),pz=Date.now,$C=t=>new Promise(t);Promise.all.bind(Promise);const VC=t=>t===void 0?null:t;class mz{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let eR=new mz,gz=!0;try{typeof localStorage<"u"&&localStorage&&(eR=localStorage,gz=!1)}catch{}const yz=eR,bz=Object.assign,tR=Object.keys,vz=(t,e)=>{for(const n in t)e(t[n],n)},HC=t=>tR(t).length,wz=t=>{for(const e in t)return!1;return!0},nR=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},xz=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),kz=(t,e)=>t===e||HC(t)===HC(e)&&nR(t,(n,r)=>(n!==void 0||xz(e,r))&&e[r]===n),Cz=Object.freeze,rR=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&rR(t[e])}return Cz(t)},L1=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&L1(t,e,n+1)}},Sz=t=>t,Tz=(t,e)=>e.includes(t);var oR={};const za=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",sR=typeof window<"u"&&typeof document<"u"&&!za;let Mr;const Ez=()=>{if(Mr===void 0)if(za){Mr=qn();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Mr.set(e,""),e=r):e!==null&&(Mr.set(e,r),e=null)}e!==null&&Mr.set(e,"")}else typeof location=="object"?(Mr=qn(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Mr.set(`--${DC(e,"-")}`,n),Mr.set(`-${DC(e,"-")}`,n)}})):Mr=qn();return Mr},Tb=t=>Ez().has(t),Ef=t=>VC(za?oR[t.toUpperCase().replaceAll("-","_")]:yz.getItem(t)),iR=t=>Tb("--"+t)||Ef(t)!==null;iR("production");const Mz=za&&Tz(oR.FORCE_COLOR,["true","1","2"]),Az=Mz||!Tb("--no-colors")&&!iR("no-color")&&(!za||process.stdout.isTTY)&&(!za||Tb("--color")||Ef("COLORTERM")!==null||(Ef("TERM")||"").includes("color")),_z=t=>new Uint8Array(t),Rz=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=OF(t[n]);return btoa(e)},Pz=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Iz=sR?Rz:Pz,Dz=t=>{const e=_z(t.byteLength);return e.set(t),e},Nz=t=>zF(e=>Ha(e,t));class Oz{constructor(e,n){this.left=e,this.right=n}}const uo=(t,e)=>new Oz(t,e),Lz=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const jz=t=>AF(t,(e,n)=>`${n}:${e};`).join(""),Bz=t=>class{constructor(n){this._=n}destroy(){t(this._)}},$z=Bz(clearTimeout),j1=(t,e)=>new $z(setTimeout(e,t)),Bo=Symbol,aR=Bo(),lR=Bo(),Vz=Bo(),Hz=Bo(),Fz=Bo(),cR=Bo(),zz=Bo(),B1=Bo(),Uz=Bo(),Wz=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},Gz={[aR]:uo("font-weight","bold"),[lR]:uo("font-weight","normal"),[Vz]:uo("color","blue"),[Fz]:uo("color","green"),[Hz]:uo("color","grey"),[cR]:uo("color","red"),[zz]:uo("color","purple"),[B1]:uo("color","orange"),[Uz]:uo("color","black")},qz=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[],r=qn();let o=[],s=0;for(;s<t.length;s++){const a=t[s],l=Gz[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=jz(r);s>0||c.length>0?(e.push("%c"+a),n.push(c)):e.push(a)}else break}}for(s>0&&(o=n,o.unshift(e.join("")));s<t.length;s++){const a=t[s];a instanceof Symbol||o.push(a)}return o},dR=Az?qz:Wz,Kz=(...t)=>{console.log(...dR(t)),hR.forEach(e=>e.print(t))},uR=(...t)=>{console.warn(...dR(t)),t.unshift(B1),hR.forEach(e=>e.print(t))},hR=Ii(),fR=t=>({[Symbol.iterator](){return this},next:t}),Yz=(t,e)=>fR(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),Mg=(t,e)=>fR(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class $1{constructor(e,n){this.clock=e,this.len=n}}class nl{constructor(){this.clients=new Map}}const _s=(t,e,n)=>e.clients.forEach((r,o)=>{const s=t.doc.store.clients.get(o);if(s!=null){const i=s[s.length-1],a=i.id.clock+i.length;for(let l=0,c=r[l];l<r.length&&c.clock<a;c=r[++l])SR(t,s,c.clock,c.len,n)}}),Jz=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const o=Io((n+r)/2),s=t[o],i=s.clock;if(i<=e){if(e<i+s.len)return o;n=o+1}else r=o-1}return null},rl=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Jz(n,e.clock)!==null},V1=t=>{t.clients.forEach(e=>{e.sort((o,s)=>o.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const o=e[r-1],s=e[n];o.clock+o.len>=s.clock?o.len=mr(o.len,s.clock+s.len-o.clock):(r<n&&(e[r]=s),r++)}e.length=r})},Eb=t=>{const e=new nl;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let i=n+1;i<t.length;i++)RF(s,t[i].clients.get(o)||[]);e.clients.set(o,s)}});return V1(e),e},Jc=(t,e,n,r)=>{no(t.clients,e,()=>[]).push(new $1(n,r))},pR=()=>new nl,mR=t=>{const e=pR();return t.clients.forEach((n,r)=>{const o=[];for(let s=0;s<n.length;s++){const i=n[s];if(i.deleted){const a=i.id.clock;let l=i.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])l+=c.length;o.push(new $1(a,l))}}o.length>0&&e.clients.set(r,o)}),e},ol=(t,e)=>{Se(t.restEncoder,e.clients.size),Di(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Se(t.restEncoder,n);const o=r.length;Se(t.restEncoder,o);for(let s=0;s<o;s++){const i=r[s];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},H1=t=>{const e=new nl,n=ge(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const o=ge(t.restDecoder),s=ge(t.restDecoder);if(s>0){const i=no(e.clients,o,()=>[]);for(let a=0;a<s;a++)i.push(new $1(t.readDsClock(),t.readDsLen()))}}return e},FC=(t,e,n)=>{const r=new nl,o=ge(t.restDecoder);for(let s=0;s<o;s++){t.resetDsCurVal();const i=ge(t.restDecoder),a=ge(t.restDecoder),l=n.clients.get(i)||[],c=nt(n,i);for(let d=0;d<a;d++){const u=t.readDsClock(),h=u+t.readDsLen();if(u<c){c<h&&Jc(r,i,c,h-c);let f=Jn(l,u),p=l[f];for(!p.deleted&&p.id.clock<u&&(l.splice(f+1,0,Df(e,p,u-p.id.clock)),f++);f<l.length&&(p=l[f++],p.id.clock<h);)p.deleted||(h<p.id.clock+p.length&&l.splice(f,0,Df(e,p,h-p.id.clock)),p.delete(e))}else Jc(r,i,u,h-u)}}if(r.clients.size>0){const s=new Ni;return Se(s.restEncoder,0),ol(s,r),s.toUint8Array()}return null},gR=Q_;class Vs extends K_{constructor({guid:e=fz(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:s=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=gR(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new kR,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=$C(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>$C(c=>{const d=u=>{(u===void 0||u===!0)&&(this.off("sync",d),c())};this.on("sync",d)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ie(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Di(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Ie(this,e,n)}get(e,n=pt){const r=no(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),o=r.constructor;if(n!==pt&&o!==n)if(o===pt){const s=new n;s._map=r._map,r._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=s}),s._start=r._start;for(let i=s._start;i!==null;i=i.right)i.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Aa)}getText(e=""){return this.get(e,Rs)}getMap(e=""){return this.get(e,Wa)}getXmlElement(e=""){return this.get(e,Gt)}getXmlFragment(e=""){return this.get(e,Oi)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Di(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Vs({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Ie(e.parent.doc,r=>{const o=n.doc;e.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class yR{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ge(this.restDecoder)}readDsLen(){return ge(this.restDecoder)}}class bR extends yR{readLeftID(){return de(ge(this.restDecoder),ge(this.restDecoder))}readRightID(){return de(ge(this.restDecoder),ge(this.restDecoder))}readClient(){return ge(this.restDecoder)}readInfo(){return Fa(this.restDecoder)}readString(){return Ta(this.restDecoder)}readParentInfo(){return ge(this.restDecoder)===1}readTypeRef(){return ge(this.restDecoder)}readLen(){return ge(this.restDecoder)}readAny(){return Yc(this.restDecoder)}readBuf(){return Dz(wn(this.restDecoder))}readJSON(){return JSON.parse(Ta(this.restDecoder))}readKey(){return Ta(this.restDecoder)}}class Zz{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ge(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ge(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Ua extends Zz{constructor(e){super(e),this.keys=[],ge(e),this.keyClockDecoder=new Eg(wn(e)),this.clientDecoder=new vh(wn(e)),this.leftClockDecoder=new Eg(wn(e)),this.rightClockDecoder=new Eg(wn(e)),this.infoDecoder=new BC(wn(e),Fa),this.stringDecoder=new lz(wn(e)),this.parentInfoDecoder=new BC(wn(e),Fa),this.typeRefDecoder=new vh(wn(e)),this.lenDecoder=new vh(wn(e))}readLeftID(){return new Ea(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Ea(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Yc(this.restDecoder)}readBuf(){return wn(this.restDecoder)}readJSON(){return Yc(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Xz{constructor(){this.restEncoder=$d()}toUint8Array(){return ar(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Se(this.restEncoder,e)}writeDsLen(e){Se(this.restEncoder,e)}}class Vd extends Xz{writeLeftID(e){Se(this.restEncoder,e.client),Se(this.restEncoder,e.clock)}writeRightID(e){Se(this.restEncoder,e.client),Se(this.restEncoder,e.clock)}writeClient(e){Se(this.restEncoder,e)}writeInfo(e){Cb(this.restEncoder,e)}writeString(e){Sa(this.restEncoder,e)}writeParentInfo(e){Se(this.restEncoder,e?1:0)}writeTypeRef(e){Se(this.restEncoder,e)}writeLen(e){Se(this.restEncoder,e)}writeAny(e){Ha(this.restEncoder,e)}writeBuf(e){vn(this.restEncoder,e)}writeJSON(e){Sa(this.restEncoder,JSON.stringify(e))}writeKey(e){Sa(this.restEncoder,e)}}class Qz{constructor(){this.restEncoder=$d(),this.dsCurrVal=0}toUint8Array(){return ar(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Se(this.restEncoder,n)}writeDsLen(e){e===0&&En(),Se(this.restEncoder,e-1),this.dsCurrVal+=e}}class Ni extends Qz{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Tg,this.clientEncoder=new bh,this.leftClockEncoder=new Tg,this.rightClockEncoder=new Tg,this.infoEncoder=new OC(Cb),this.stringEncoder=new QF,this.parentInfoEncoder=new OC(Cb),this.typeRefEncoder=new bh,this.lenEncoder=new bh}toUint8Array(){const e=$d();return Se(e,0),vn(e,this.keyClockEncoder.toUint8Array()),vn(e,this.clientEncoder.toUint8Array()),vn(e,this.leftClockEncoder.toUint8Array()),vn(e,this.rightClockEncoder.toUint8Array()),vn(e,ar(this.infoEncoder)),vn(e,this.stringEncoder.toUint8Array()),vn(e,ar(this.parentInfoEncoder)),vn(e,this.typeRefEncoder.toUint8Array()),vn(e,this.lenEncoder.toUint8Array()),Op(e,ar(this.restEncoder)),ar(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Ha(this.restEncoder,e)}writeBuf(e){vn(this.restEncoder,e)}writeJSON(e){Ha(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const eU=(t,e,n,r)=>{r=mr(r,e[0].id.clock);const o=Jn(e,r);Se(t.restEncoder,e.length-o),t.writeClient(n),Se(t.restEncoder,r);const s=e[o];s.write(t,r-s.id.clock);for(let i=o+1;i<e.length;i++)e[i].write(t,0)},F1=(t,e,n)=>{const r=new Map;n.forEach((o,s)=>{nt(e,s)>o&&r.set(s,o)}),jp(e).forEach((o,s)=>{n.has(s)||r.set(s,0)}),Se(t.restEncoder,r.size),Di(r.entries()).sort((o,s)=>s[0]-o[0]).forEach(([o,s])=>{eU(t,e.clients.get(o),o,s)})},tU=(t,e)=>{const n=qn(),r=ge(t.restDecoder);for(let o=0;o<r;o++){const s=ge(t.restDecoder),i=new Array(s),a=t.readClient();let l=ge(t.restDecoder);n.set(a,{i:0,refs:i});for(let c=0;c<s;c++){const d=t.readInfo();switch(Np&d){case 0:{const u=t.readLen();i[c]=new zn(de(a,l),u),l+=u;break}case 10:{const u=ge(t.restDecoder);i[c]=new Un(de(a,l),u),l+=u;break}default:{const u=(d&(Ro|Kt))===0,h=new Ae(de(a,l),null,(d&Kt)===Kt?t.readLeftID():null,null,(d&Ro)===Ro?t.readRightID():null,u?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,u&&(d&qc)===qc?t.readString():null,GR(t,d));i[c]=h,l+=h.length}}}}return n},nU=(t,e,n)=>{const r=[];let o=Di(n.keys()).sort((f,p)=>f-p);if(o.length===0)return null;const s=()=>{if(o.length===0)return null;let f=n.get(o[o.length-1]);for(;f.refs.length===f.i;)if(o.pop(),o.length>0)f=n.get(o[o.length-1]);else return null;return f};let i=s();if(i===null)return null;const a=new kR,l=new Map,c=(f,p)=>{const g=l.get(f);(g==null||g>p)&&l.set(f,p)};let d=i.refs[i.i++];const u=new Map,h=()=>{for(const f of r){const p=f.id.client,g=n.get(p);g?(g.i--,a.clients.set(p,g.refs.slice(g.i)),n.delete(p),g.i=0,g.refs=[]):a.clients.set(p,[f]),o=o.filter(b=>b!==p)}r.length=0};for(;;){if(d.constructor!==Un){const p=no(u,d.id.client,()=>nt(e,d.id.client))-d.id.clock;if(p<0)r.push(d),c(d.id.client,d.id.clock-1),h();else{const g=d.getMissing(t,e);if(g!==null){r.push(d);const b=n.get(g)||{refs:[],i:0};if(b.refs.length===b.i)c(g,nt(e,g)),h();else{d=b.refs[b.i++];continue}}else(p===0||p<d.length)&&(d.integrate(t,p),u.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(i!==null&&i.i<i.refs.length)d=i.refs[i.i++];else{if(i=s(),i===null)break;d=i.refs[i.i++]}}if(a.clients.size>0){const f=new Ni;return F1(f,a,new Map),Se(f.restEncoder,0),{missing:l,update:f.toUint8Array()}}return null},rU=(t,e)=>F1(t,e.doc.store,e.beforeState),oU=(t,e,n,r=new Ua(t))=>Ie(e,o=>{o.local=!1;let s=!1;const i=o.doc,a=i.store,l=tU(r,i),c=nU(o,a,l),d=a.pendingStructs;if(d){for(const[h,f]of d.missing)if(f<nt(a,h)){s=!0;break}if(c){for(const[h,f]of c.missing){const p=d.missing.get(h);(p==null||p>f)&&d.missing.set(h,f)}d.update=Af([d.update,c.update])}}else a.pendingStructs=c;const u=FC(r,o,a);if(a.pendingDs){const h=new Ua(tl(a.pendingDs));ge(h.restDecoder);const f=FC(h,o,a);u&&f?a.pendingDs=Af([u,f]):a.pendingDs=u||f}else a.pendingDs=u;if(s){const h=a.pendingStructs.update;a.pendingStructs=null,Mf(o.doc,h)}},n,!1),Mf=(t,e,n,r=Ua)=>{const o=tl(e);oU(o,t,n,new r(o))},zC=(t,e,n)=>Mf(t,e,n,bR),sU=(t,e,n=new Map)=>{F1(t,e.store,n),ol(t,mR(e.store))},iU=(t,e=new Uint8Array([0]),n=new Ni)=>{const r=vR(e);sU(n,t,r);const o=[n.toUint8Array()];if(t.store.pendingDs&&o.push(t.store.pendingDs),t.store.pendingStructs&&o.push(kU(t.store.pendingStructs.update,e)),o.length>1){if(n.constructor===Vd)return wU(o.map((s,i)=>i===0?s:SU(s)));if(n.constructor===Ni)return Af(o)}return o[0]},UC=(t,e)=>iU(t,e,new Vd),aU=t=>{const e=new Map,n=ge(t.restDecoder);for(let r=0;r<n;r++){const o=ge(t.restDecoder),s=ge(t.restDecoder);e.set(o,s)}return e},vR=t=>aU(new yR(tl(t)));class lU{constructor(){this.l=[]}}const WC=()=>new lU,GC=(t,e)=>t.l.push(e),qC=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(o=>e!==o),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},wR=(t,e,n)=>L1(t.l,[e,n]);class Ea{constructor(e,n){this.client=e,this.clock=n}}const pa=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,de=(t,e)=>new Ea(t,e),Zc=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw En()},Xc=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Qc{constructor(e,n,r,o=0){this.type=e,this.tname=n,this.item=r,this.assoc=o}}const bc=t=>new Qc(t.type==null?null:de(t.type.client,t.type.clock),t.tname??null,t.item==null?null:de(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class cU{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const dU=(t,e,n=0)=>new cU(t,e,n),ju=(t,e,n)=>{let r=null,o=null;return t._item===null?o=Zc(t):r=de(t._item.id.client,t._item.id.clock),new Qc(r,o,e,n)},Ag=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return ju(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return ju(t,de(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return ju(t,r.lastId,n);r=r.right}return ju(t,null,n)},uU=(t,e)=>{const n=Ma(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},hU=(t,e,n=!0)=>{const r=e.store,o=t.item,s=t.type,i=t.tname,a=t.assoc;let l=null,c=0;if(o!==null){if(nt(r,o.client)<=o.clock)return null;const d=n?Rb(r,o):uU(r,o),u=d.item;if(!(u instanceof Ae))return null;if(l=u.parent,l._item===null||!l._item.deleted){c=u.deleted||!u.countable?0:d.diff+(a>=0?0:1);let h=u.left;for(;h!==null;)!h.deleted&&h.countable&&(c+=h.length),h=h.left}}else{if(i!==null)l=e.get(i);else if(s!==null){if(nt(r,s.client)<=s.clock)return null;const{item:d}=n?Rb(r,s):{item:Ma(r,s)};if(d instanceof Ae&&d.content instanceof kr)l=d.content.type;else return null}else throw En();a>=0?c=l._length:c=0}return dU(l,c,t.assoc)},KC=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&pa(t.item,e.item)&&pa(t.type,e.type)&&t.assoc===e.assoc;class z1{constructor(e,n){this.ds=e,this.sv=n}}const xR=(t,e)=>new z1(t,e),_g=t=>xR(mR(t.store),jp(t.store)),oi=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!rl(e.ds,t.id),Mb=(t,e)=>{const n=no(t.meta,Mb,Ii),r=t.doc.store;n.has(e)||(e.sv.forEach((o,s)=>{o<nt(r,s)&&cn(t,de(s,o))}),_s(t,e.ds,o=>{}),n.add(e))};class kR{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const jp=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const o=n[n.length-1];e.set(r,o.id.clock+o.length)}),e},nt=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},CR=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw En()}n.push(e)},Jn=(t,e)=>{let n=0,r=t.length-1,o=t[r],s=o.id.clock;if(s===e)return r;let i=Io(e/(s+o.length-1)*r);for(;n<=r;){if(o=t[i],s=o.id.clock,s<=e){if(e<s+o.length)return i;n=i+1}else r=i-1;i=Io((n+r)/2)}throw En()},fU=(t,e)=>{const n=t.clients.get(e.client);return n[Jn(n,e.clock)]},Ma=fU,Ab=(t,e,n)=>{const r=Jn(e,n),o=e[r];return o.id.clock<n&&o instanceof Ae?(e.splice(r+1,0,Df(t,o,n-o.id.clock)),r+1):r},cn=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Ab(t,n,e.clock)]},YC=(t,e,n)=>{const r=e.clients.get(n.client),o=Jn(r,n.clock),s=r[o];return n.clock!==s.id.clock+s.length-1&&s.constructor!==zn&&r.splice(o+1,0,Df(t,s,n.clock-s.id.clock+1)),s},pU=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Jn(r,e.id.clock)]=n},SR=(t,e,n,r,o)=>{if(r===0)return;const s=n+r;let i=Ab(t,e,n),a;do a=e[i++],s<a.id.clock+a.length&&Ab(t,e,s),o(a);while(i<e.length&&e[i].id.clock<s)};class mU{constructor(e,n,r){this.doc=e,this.deleteSet=new nl,this.beforeState=jp(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const JC=(t,e)=>e.deleteSet.clients.size===0&&!_F(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(V1(e.deleteSet),rU(t,e),ol(t,e.deleteSet),!0),ZC=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&no(t.changed,e,Ii).add(n)},wh=(t,e)=>{let n=t[e],r=t[e-1],o=e;for(;o>0;n=r,r=t[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ae&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-o;return s&&t.splice(e+1-s,s),s},gU=(t,e,n)=>{for(const[r,o]of t.clients.entries()){const s=e.clients.get(r);for(let i=o.length-1;i>=0;i--){const a=o[i],l=a.clock+a.len;for(let c=Jn(s,a.clock),d=s[c];c<s.length&&d.id.clock<l;d=s[++c]){const u=s[c];if(a.clock+a.len<=u.id.clock)break;u instanceof Ae&&u.deleted&&!u.keep&&n(u)&&u.gc(e,!1)}}}},yU=(t,e)=>{t.clients.forEach((n,r)=>{const o=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const i=n[s],a=_o(o.length-1,1+Jn(o,i.clock+i.len-1));for(let l=a,c=o[l];l>0&&c.id.clock>=i.clock;c=o[l])l-=1+wh(o,l)}})},TR=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,o=r.store,s=n.deleteSet,i=n._mergeStructs;try{V1(s),n.afterState=jp(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=c,d._path=null}),l.sort((d,u)=>d.path.length-u.path.length),wR(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),L1(a,[]),n._needFormattingCleanup&&BU(n)}finally{r.gc&&gU(s,o,r.gcFilter),yU(s,o),n.afterState.forEach((d,u)=>{const h=n.beforeState.get(u)||0;if(h!==d){const f=o.clients.get(u),p=mr(Jn(f,h),1);for(let g=f.length-1;g>=p;)g-=1+wh(f,g)}});for(let d=i.length-1;d>=0;d--){const{client:u,clock:h}=i[d].id,f=o.clients.get(u),p=Jn(f,h);p+1<f.length&&wh(f,p+1)>1||p>0&&wh(f,p)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(Kz(B1,aR,"[yjs] ",lR,cR,"Changed the client-id because another client seems to be using it."),r.clientID=gR()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new Vd;JC(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new Ni;JC(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),c.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):TR(t,e+1)}}},Ie=(t,e,n=null,r=!0)=>{const o=t._transactionCleanups;let s=!1,i=null;t._transaction===null&&(s=!0,t._transaction=new mU(t,n,r),o.push(t._transaction),o.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(s){const a=t._transaction===o[0];t._transaction=null,a&&TR(o,0)}}return i};class bU{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const XC=(t,e,n)=>{_s(t,n.deletions,r=>{r instanceof Ae&&e.scope.some(o=>o===t.doc||Xc(o,r))&&Z1(r,!1)})},QC=(t,e,n)=>{let r=null;const o=t.doc,s=t.scope;Ie(o,a=>{for(;e.length>0&&t.currStackItem===null;){const l=o.store,c=e.pop(),d=new Set,u=[];let h=!1;_s(a,c.insertions,f=>{if(f instanceof Ae){if(f.redone!==null){let{item:p,diff:g}=Rb(l,f.id);g>0&&(p=cn(a,de(p.id.client,p.id.clock+g))),f=p}!f.deleted&&s.some(p=>p===a.doc||Xc(p,f))&&u.push(f)}}),_s(a,c.deletions,f=>{f instanceof Ae&&s.some(p=>p===a.doc||Xc(p,f))&&!rl(c.insertions,f.id)&&d.add(f)}),d.forEach(f=>{h=WR(a,f,d,c.insertions,t.ignoreRemoteMapChanges,t)!==null||h});for(let f=u.length-1;f>=0;f--){const p=u[f];t.deleteFilter(p)&&(p.delete(a),h=!0)}t.currStackItem=h?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},t);const i=t.currStackItem;if(i!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:i,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return i};class ER extends K_{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=xb(e)?e[0].doc:e instanceof Vs?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=o,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(b=>l.changedParentTypes.has(b)||b===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,d=this.redoing,u=c?this.redoStack:this.undoStack;c?this.stopCapturing():d||this.clear(!1,!0);const h=new nl;l.afterState.forEach((b,v)=>{const x=l.beforeState.get(v)||0,w=b-x;w>0&&Jc(h,v,x,w)});const f=pz();let p=!1;if(this.lastChange>0&&f-this.lastChange<this.captureTimeout&&u.length>0&&!c&&!d){const b=u[u.length-1];b.deletions=Eb([b.deletions,l.deleteSet]),b.insertions=Eb([b.insertions,h])}else u.push(new bU(l.deleteSet,h)),p=!0;!c&&!d&&(this.lastChange=f),_s(l,l.deleteSet,b=>{b instanceof Ae&&this.scope.some(v=>v===l.doc||Xc(v,b))&&Z1(b,!0)});const g=[{stackItem:u[u.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];p?this.emit("stack-item-added",g):this.emit("stack-item-updated",g)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=xb(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof pt?r.doc!==this.doc:r!==this.doc)&&uR("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(o=>XC(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>XC(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=QC(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=QC(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*vU(t){const e=ge(t.restDecoder);for(let n=0;n<e;n++){const r=ge(t.restDecoder),o=t.readClient();let s=ge(t.restDecoder);for(let i=0;i<r;i++){const a=t.readInfo();if(a===10){const l=ge(t.restDecoder);yield new Un(de(o,s),l),s+=l}else if((Np&a)!==0){const l=(a&(Ro|Kt))===0,c=new Ae(de(o,s),null,(a&Kt)===Kt?t.readLeftID():null,null,(a&Ro)===Ro?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&qc)===qc?t.readString():null,GR(t,a));yield c,s+=c.length}else{const l=t.readLen();yield new zn(de(o,s),l),s+=l}}}}class U1{constructor(e,n){this.gen=vU(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Un);return this.curr}}class W1{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const wU=t=>Af(t,bR,Vd),xU=(t,e)=>{if(t.constructor===zn){const{client:n,clock:r}=t.id;return new zn(de(n,r+e),t.length-e)}else if(t.constructor===Un){const{client:n,clock:r}=t.id;return new Un(de(n,r+e),t.length-e)}else{const n=t,{client:r,clock:o}=n.id;return new Ae(de(r,o+e),null,de(r,o+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Af=(t,e=Ua,n=Ni)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(tl(d)));let o=r.map(d=>new U1(d,!0)),s=null;const i=new n,a=new W1(i);for(;o=o.filter(h=>h.curr!==null),o.sort((h,f)=>{if(h.curr.id.client===f.curr.id.client){const p=h.curr.id.clock-f.curr.id.clock;return p===0?h.curr.constructor===f.curr.constructor?0:h.curr.constructor===Un?1:-1:p}else return f.curr.id.client-h.curr.id.client}),o.length!==0;){const d=o[0],u=d.curr.id.client;if(s!==null){let h=d.curr,f=!1;for(;h!==null&&h.id.clock+h.length<=s.struct.id.clock+s.struct.length&&h.id.client>=s.struct.id.client;)h=d.next(),f=!0;if(h===null||h.id.client!==u||f&&h.id.clock>s.struct.id.clock+s.struct.length)continue;if(u!==s.struct.id.client)ps(a,s.struct,s.offset),s={struct:h,offset:0},d.next();else if(s.struct.id.clock+s.struct.length<h.id.clock)if(s.struct.constructor===Un)s.struct.length=h.id.clock+h.length-s.struct.id.clock;else{ps(a,s.struct,s.offset);const p=h.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Un(de(u,s.struct.id.clock+s.struct.length),p),offset:0}}else{const p=s.struct.id.clock+s.struct.length-h.id.clock;p>0&&(s.struct.constructor===Un?s.struct.length-=p:h=xU(h,p)),s.struct.mergeWith(h)||(ps(a,s.struct,s.offset),s={struct:h,offset:0},d.next())}}else s={struct:d.curr,offset:0},d.next();for(let h=d.curr;h!==null&&h.id.client===u&&h.id.clock===s.struct.id.clock+s.struct.length&&h.constructor!==Un;h=d.next())ps(a,s.struct,s.offset),s={struct:h,offset:0}}s!==null&&(ps(a,s.struct,s.offset),s=null),G1(a);const l=r.map(d=>H1(d)),c=Eb(l);return ol(i,c),i.toUint8Array()},kU=(t,e,n=Ua,r=Ni)=>{const o=vR(e),s=new r,i=new W1(s),a=new n(tl(t)),l=new U1(a,!1);for(;l.curr;){const d=l.curr,u=d.id.client,h=o.get(u)||0;if(l.curr.constructor===Un){l.next();continue}if(d.id.clock+d.length>h)for(ps(i,d,mr(h-d.id.clock,0)),l.next();l.curr&&l.curr.id.client===u;)ps(i,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===u&&l.curr.id.clock+l.curr.length<=h;)l.next()}G1(i);const c=H1(a);return ol(s,c),s.toUint8Array()},MR=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:ar(t.encoder.restEncoder)}),t.encoder.restEncoder=$d(),t.written=0)},ps=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&MR(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Se(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},G1=t=>{MR(t);const e=t.encoder.restEncoder;Se(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Se(e,r.written),Op(e,r.restEncoder)}},CU=(t,e,n,r)=>{const o=new n(tl(t)),s=new U1(o,!1),i=new r,a=new W1(i);for(let c=s.curr;c!==null;c=s.next())ps(a,e(c),0);G1(a);const l=H1(o);return ol(i,l),i.toUint8Array()},SU=t=>CU(t,Sz,Ua,Vd),eS="You must not compute changes after the event-handler fired.";class Bp{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=TU(this.currentTarget,this.target))}deletes(e){return rl(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw As(eS);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const s=n._map.get(o);let i,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))i="delete",a=kg(l.content.getContent());else return;else l!==null&&this.deletes(l)?(i="update",a=kg(l.content.getContent())):(i="add",a=void 0)}else if(this.deletes(s))i="delete",a=kg(s.content.getContent());else return;e.set(o,{action:i,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw As(eS);const n=this.target,r=Ii(),o=Ii(),s=[];if(e={added:r,deleted:o,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,o.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const TU=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,o=e._item.parent._start;for(;o!==e._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}e=e._item.parent}return n},Bt=()=>{uR("Invalid access: Add Yjs type to a document before reading data.")},AR=80;let q1=0;class EU{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=q1++}}const MU=t=>{t.timestamp=q1++},_R=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=q1++},AU=(t,e,n)=>{if(t.length>=AR){const r=t.reduce((o,s)=>o.timestamp<s.timestamp?o:s);return _R(r,e,n),r}else{const r=new EU(e,n);return t.push(r),r}},$p=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,i)=>yh(e-s.index)<yh(e-i.index)?s:i);let r=t._start,o=0;for(n!==null&&(r=n.p,o=n.index,MU(n));r.right!==null&&o<e;){if(!r.deleted&&r.countable){if(e<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>e;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&yh(n.index-o)<r.parent.length/AR?(_R(n,r,o),n):AU(t._searchMarker,r,o)},ed=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const o=t[r];if(n>0){let s=o.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(o.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}o.p=s,s.marker=!0}(e<o.index||n>0&&e===o.index)&&(o.index=mr(e,o.index+n))}},Vp=(t,e,n)=>{const r=t,o=e.changedParentTypes;for(;no(o,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;wR(r._eH,n,e)};class pt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=WC(),this._dEH=WC(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw dr()}clone(){throw dr()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){GC(this._eH,e)}observeDeep(e){GC(this._dEH,e)}unobserve(e){qC(this._eH,e)}unobserveDeep(e){qC(this._dEH,e)}toJSON(){}}const RR=(t,e,n)=>{t.doc??Bt(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const o=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const i=s.content.getContent();if(i.length<=e)e-=i.length;else{for(let a=e;a<i.length&&r>0;a++)o.push(i[a]),r--;e=0}}s=s.right}return o},PR=t=>{t.doc??Bt();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)e.push(r[o])}n=n.right}return e},IR=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&oi(r,e)){const o=r.content.getContent();for(let s=0;s<o.length;s++)n.push(o[s])}r=r.right}return n},td=(t,e)=>{let n=0,r=t._start;for(t.doc??Bt();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let s=0;s<o.length;s++)e(o[s],n++,t)}r=r.right}},DR=(t,e)=>{const n=[];return td(t,(r,o)=>{n.push(e(r,o,t))}),n},_U=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},NR=(t,e)=>{t.doc??Bt();const n=$p(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},_f=(t,e,n,r)=>{let o=n;const s=t.doc,i=s.clientID,a=s.store,l=n===null?e._start:n.right;let c=[];const d=()=>{c.length>0&&(o=new Ae(de(i,nt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Li(c)),o.integrate(t,0),c=[])};r.forEach(u=>{if(u===null)c.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(u);break;default:switch(d(),u.constructor){case Uint8Array:case ArrayBuffer:o=new Ae(de(i,nt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Hd(new Uint8Array(u))),o.integrate(t,0);break;case Vs:o=new Ae(de(i,nt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new Fd(u)),o.integrate(t,0);break;default:if(u instanceof pt)o=new Ae(de(i,nt(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new kr(u)),o.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},OR=()=>As("Length exceeded!"),LR=(t,e,n,r)=>{if(n>e._length)throw OR();if(n===0)return e._searchMarker&&ed(e._searchMarker,n,r.length),_f(t,e,null,r);const o=n,s=$p(e,n);let i=e._start;for(s!==null&&(i=s.p,n-=s.index,n===0&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&cn(t,de(i.id.client,i.id.clock+n));break}n-=i.length}return e._searchMarker&&ed(e._searchMarker,o,r.length),_f(t,e,i,r)},RU=(t,e,n)=>{let o=(e._searchMarker||[]).reduce((s,i)=>i.index>s.index?i:s,{index:0,p:e._start}).p;if(o)for(;o.right;)o=o.right;return _f(t,e,o,n)},jR=(t,e,n,r)=>{if(r===0)return;const o=n,s=r,i=$p(e,n);let a=e._start;for(i!==null&&(a=i.p,n-=i.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&cn(t,de(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&cn(t,de(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw OR();e._searchMarker&&ed(e._searchMarker,o,-s+r)},Rf=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},K1=(t,e,n,r)=>{const o=e._map.get(n)||null,s=t.doc,i=s.clientID;let a;if(r==null)a=new Li([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Li([r]);break;case Uint8Array:a=new Hd(r);break;case Vs:a=new Fd(r);break;default:if(r instanceof pt)a=new kr(r);else throw new Error("Unexpected content type")}new Ae(de(i,nt(s.store,i)),o,o&&o.lastId,null,null,e,n,a).integrate(t,0)},Y1=(t,e)=>{t.doc??Bt();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},BR=t=>{const e={};return t.doc??Bt(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},$R=(t,e)=>{t.doc??Bt();const n=t._map.get(e);return n!==void 0&&!n.deleted},PU=(t,e)=>{const n={};return t._map.forEach((r,o)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&oi(s,e)&&(n[o]=s.content.getContent()[s.length-1])}),n},Bu=t=>(t.doc??Bt(),Yz(t._map.entries(),e=>!e[1].deleted));class IU extends Bp{}class Aa extends pt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Aa;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Aa}clone(){const e=new Aa;return e.insert(0,this.toArray().map(n=>n instanceof pt?n.clone():n)),e}get length(){return this.doc??Bt(),this._length}_callObserver(e,n){super._callObserver(e,n),Vp(this,e,new IU(this,e))}insert(e,n){this.doc!==null?Ie(this.doc,r=>{LR(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Ie(this.doc,n=>{RU(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Ie(this.doc,r=>{jR(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return NR(this,e)}toArray(){return PR(this)}slice(e=0,n=this.length){return RR(this,e,n)}toJSON(){return this.map(e=>e instanceof pt?e.toJSON():e)}map(e){return DR(this,e)}forEach(e){td(this,e)}[Symbol.iterator](){return _U(this)}_write(e){e.writeTypeRef(rW)}}const DU=t=>new Aa;class NU extends Bp{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Wa extends pt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new Wa}clone(){const e=new Wa;return this.forEach((n,r)=>{e.set(r,n instanceof pt?n.clone():n)}),e}_callObserver(e,n){Vp(this,e,new NU(this,e,n))}toJSON(){this.doc??Bt();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];e[r]=o instanceof pt?o.toJSON():o}}),e}get size(){return[...Bu(this)].length}keys(){return Mg(Bu(this),e=>e[0])}values(){return Mg(Bu(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Mg(Bu(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Bt(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ie(this.doc,n=>{Rf(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Ie(this.doc,r=>{K1(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return Y1(this,e)}has(e){return $R(this,e)}clear(){this.doc!==null?Ie(this.doc,e=>{this.forEach(function(n,r,o){Rf(e,o,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(oW)}}const OU=t=>new Wa,bs=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&kz(t,e);class _b{constructor(e,n,r,o){this.left=e,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&En(),this.right.content.constructor){case lt:this.right.deleted||sl(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const tS=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case lt:e.right.deleted||sl(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&cn(t,de(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},$u=(t,e,n,r)=>{const o=new Map,s=r?$p(e,n):null;if(s){const i=new _b(s.p.left,s.p,s.index,o);return tS(t,i,n-s.index)}else{const i=new _b(null,e._start,0,o);return tS(t,i,n)}},VR=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===lt&&bs(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=t.doc,s=o.clientID;r.forEach((i,a)=>{const l=n.left,c=n.right,d=new Ae(de(s,nt(o.store,s)),l,l&&l.lastId,c,c&&c.id,e,null,new lt(a,i));d.integrate(t,0),n.right=d,n.forward()})},sl=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},HR=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===lt&&bs(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},FR=(t,e,n,r)=>{const o=t.doc,s=o.clientID,i=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!bs(c,l)){i.set(a,c);const{left:d,right:u}=n;n.right=new Ae(de(s,nt(o.store,s)),d,d&&d.lastId,u,u&&u.id,e,null,new lt(a,l)),n.right.integrate(t,0),n.forward()}}return i},Rg=(t,e,n,r,o)=>{n.currentAttributes.forEach((h,f)=>{o[f]===void 0&&(o[f]=null)});const s=t.doc,i=s.clientID;HR(n,o);const a=FR(t,e,n,o),l=r.constructor===String?new gr(r):r instanceof pt?new kr(r):new zi(r);let{left:c,right:d,index:u}=n;e._searchMarker&&ed(e._searchMarker,n.index,l.getLength()),d=new Ae(de(i,nt(s.store,i)),c,c&&c.lastId,d,d&&d.id,e,null,l),d.integrate(t,0),n.right=d,n.index=u,n.forward(),VR(t,e,n,a)},nS=(t,e,n,r,o)=>{const s=t.doc,i=s.clientID;HR(n,o);const a=FR(t,e,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===lt));){if(!n.right.deleted)switch(n.right.content.constructor){case lt:{const{key:l,value:c}=n.right.content,d=o[l];if(d!==void 0){if(bs(d,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&cn(t,de(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new Ae(de(i,nt(s.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new gr(l)),n.right.integrate(t,0),n.forward()}VR(t,e,n,a)},zR=(t,e,n,r,o)=>{let s=e;const i=qn();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===lt){const c=s.content;i.set(c.key,c)}s=s.right}let a=0,l=!1;for(;e!==s;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case lt:{const{key:d,value:u}=c,h=r.get(d)??null;(i.get(d)!==c||h===u)&&(e.delete(t),a++,!l&&(o.get(d)??null)===u&&h!==u&&(h===null?o.delete(d):o.set(d,h))),!l&&!e.deleted&&sl(o,c);break}}}e=e.right}return a},LU=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===lt){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},jU=t=>{let e=0;return Ie(t.doc,n=>{let r=t._start,o=t._start,s=qn();const i=wb(s);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case lt:sl(i,o.content);break;default:e+=zR(n,r,o,s,i),s=wb(i),r=o;break}o=o.right}}),e},BU=t=>{const e=new Set,n=t.doc;for(const[r,o]of t.afterState.entries()){const s=t.beforeState.get(r)||0;o!==s&&SR(t,n.store.clients.get(r),s,o,i=>{!i.deleted&&i.content.constructor===lt&&i.constructor!==zn&&e.add(i.parent)})}Ie(n,r=>{_s(t,t.deleteSet,o=>{if(o instanceof zn||!o.parent._hasFormatting||e.has(o.parent))return;const s=o.parent;o.content.constructor===lt?e.add(s):LU(r,o)});for(const o of e)jU(o)})},rS=(t,e,n)=>{const r=n,o=wb(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case kr:case zi:case gr:n<e.right.length&&cn(t,de(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&zR(t,s,e.right,o,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&ed(i._searchMarker,e.index,-r+n),e};class $U extends Bp{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Ie(e,r=>{const o=new Map,s=new Map;let i=this.target._start,a=null;const l={};let c="",d=0,u=0;const h=()=>{if(a!==null){let f=null;switch(a){case"delete":u>0&&(f={delete:u}),u=0;break;case"insert":(typeof c=="object"||c.length>0)&&(f={insert:c},o.size>0&&(f.attributes={},o.forEach((p,g)=>{p!==null&&(f.attributes[g]=p)}))),c="";break;case"retain":d>0&&(f={retain:d},wz(l)||(f.attributes=bz({},l))),d=0;break}f&&n.push(f),a=null}};for(;i!==null;){switch(i.content.constructor){case kr:case zi:this.adds(i)?this.deletes(i)||(h(),a="insert",c=i.content.getContent()[0],h()):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),u+=1):i.deleted||(a!=="retain"&&(h(),a="retain"),d+=1);break;case gr:this.adds(i)?this.deletes(i)||(a!=="insert"&&(h(),a="insert"),c+=i.content.str):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),u+=i.length):i.deleted||(a!=="retain"&&(h(),a="retain"),d+=i.length);break;case lt:{const{key:f,value:p}=i.content;if(this.adds(i)){if(!this.deletes(i)){const g=o.get(f)??null;bs(g,p)?p!==null&&i.delete(r):(a==="retain"&&h(),bs(p,s.get(f)??null)?delete l[f]:l[f]=p)}}else if(this.deletes(i)){s.set(f,p);const g=o.get(f)??null;bs(g,p)||(a==="retain"&&h(),l[f]=g)}else if(!i.deleted){s.set(f,p);const g=l[f];g!==void 0&&(bs(g,p)?g!==null&&i.delete(r):(a==="retain"&&h(),p===null?delete l[f]:l[f]=p))}i.deleted||(a==="insert"&&h(),sl(o,i.content));break}}i=i.right}for(h();n.length>0;){const f=n[n.length-1];if(f.retain!==void 0&&f.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Rs extends pt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Bt(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Rs}clone(){const e=new Rs;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new $U(this,e,n);Vp(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Bt();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===gr&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Ie(this.doc,r=>{const o=new _b(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const i=e[s];if(i.insert!==void 0){const a=!n&&typeof i.insert=="string"&&s===e.length-1&&o.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof a!="string"||a.length>0)&&Rg(r,this,o,a,i.attributes||{})}else i.retain!==void 0?nS(r,this,o,i.retain,i.attributes||{}):i.delete!==void 0&&rS(r,o,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??Bt();const o=[],s=new Map,i=this.doc;let a="",l=this._start;function c(){if(a.length>0){const u={};let h=!1;s.forEach((p,g)=>{h=!0,u[g]=p});const f={insert:a};h&&(f.attributes=u),o.push(f),a=""}}const d=()=>{for(;l!==null;){if(oi(l,e)||n!==void 0&&oi(l,n))switch(l.content.constructor){case gr:{const u=s.get("ychange");e!==void 0&&!oi(l,e)?(u===void 0||u.user!==l.id.client||u.type!=="removed")&&(c(),s.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!oi(l,n)?(u===void 0||u.user!==l.id.client||u.type!=="added")&&(c(),s.set("ychange",r?r("added",l.id):{type:"added"})):u!==void 0&&(c(),s.delete("ychange")),a+=l.content.str;break}case kr:case zi:{c();const u={insert:l.content.getContent()[0]};if(s.size>0){const h={};u.attributes=h,s.forEach((f,p)=>{h[p]=f})}o.push(u);break}case lt:oi(l,e)&&(c(),sl(s,l.content));break}l=l.right}c()};return e||n?Ie(i,u=>{e&&Mb(u,e),n&&Mb(u,n),d()},"cleanup"):d(),o}insert(e,n,r){if(n.length<=0)return;const o=this.doc;o!==null?Ie(o,s=>{const i=$u(s,this,e,!r);r||(r={},i.currentAttributes.forEach((a,l)=>{r[l]=a})),Rg(s,this,i,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const o=this.doc;o!==null?Ie(o,s=>{const i=$u(s,this,e,!r);Rg(s,this,i,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Ie(r,o=>{rS(o,$u(o,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const o=this.doc;o!==null?Ie(o,s=>{const i=$u(s,this,e,!1);i.right!==null&&nS(s,this,i,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Ie(this.doc,n=>{Rf(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Ie(this.doc,r=>{K1(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return Y1(this,e)}getAttributes(){return BR(this)}_write(e){e.writeTypeRef(sW)}}const VU=t=>new Rs;class Pg{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Bt()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Gt||n.constructor===Oi)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Oi extends pt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Oi}clone(){const e=new Oi;return e.insert(0,this.toArray().map(n=>n instanceof pt?n.clone():n)),e}get length(){return this.doc??Bt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Pg(this,e)}querySelector(e){e=e.toUpperCase();const r=new Pg(this,o=>o.nodeName&&o.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Di(new Pg(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Vp(this,e,new zU(this,n,e))}toString(){return DR(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const o=e.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),td(this,s=>{o.insertBefore(s.toDOM(e,n,r),null)}),o}insert(e,n){this.doc!==null?Ie(this.doc,r=>{LR(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Ie(this.doc,r=>{const o=e&&e instanceof pt?e._item:e;_f(r,this,o,n)});else{const r=this._prelimContent,o=e===null?0:r.findIndex(s=>s===e)+1;if(o===0&&e!==null)throw As("Reference item not found");r.splice(o,0,...n)}}delete(e,n=1){this.doc!==null?Ie(this.doc,r=>{jR(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return PR(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return NR(this,e)}slice(e=0,n=this.length){return RR(this,e,n)}forEach(e){td(this,e)}_write(e){e.writeTypeRef(aW)}}const HU=t=>new Oi;class Gt extends Oi{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new Gt(this.nodeName)}clone(){const e=new Gt(this.nodeName),n=this.getAttributes();return vz(n,(r,o)=>{typeof r=="string"&&e.setAttribute(o,r)}),e.insert(0,this.toArray().map(r=>r instanceof pt?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),i=n.length>0?" "+n.join(" "):"";return`<${s}${i}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?Ie(this.doc,n=>{Rf(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Ie(this.doc,r=>{K1(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return Y1(this,e)}hasAttribute(e){return $R(this,e)}getAttributes(e){return e?PU(this,e):BR(this)}toDOM(e=document,n={},r){const o=e.createElement(this.nodeName),s=this.getAttributes();for(const i in s){const a=s[i];typeof a=="string"&&o.setAttribute(i,a)}return td(this,i=>{o.appendChild(i.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(iW),e.writeKey(this.nodeName)}}const FU=t=>new Gt(t.readKey());class zU extends Bp{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class Pf extends Wa{constructor(e){super(),this.hookName=e}_copy(){return new Pf(this.hookName)}clone(){const e=new Pf(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const o=n[this.hookName];let s;return o!==void 0?s=o.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(lW),e.writeKey(this.hookName)}}const UU=t=>new Pf(t.readKey());class Sn extends Rs{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Sn}clone(){const e=new Sn;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const o=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(e=>{const n=[];for(const o in e.attributes){const s=[];for(const i in e.attributes[o])s.push({key:i,value:e.attributes[o][i]});s.sort((i,a)=>i.key<a.key?-1:1),n.push({nodeName:o,attrs:s})}n.sort((o,s)=>o.nodeName<s.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const s=n[o];r+=`<${s.nodeName}`;for(let i=0;i<s.attrs.length;i++){const a=s.attrs[i];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(cW)}}const WU=t=>new Sn;class J1{constructor(e,n){this.id=e,this.length=n}get deleted(){throw dr()}mergeWith(e){return!1}write(e,n,r){throw dr()}integrate(e,n){throw dr()}}const GU=0;class zn extends J1{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),CR(e.doc.store,this)}write(e,n){e.writeInfo(GU),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Hd{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Hd(this.content)}splice(e){throw dr()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const qU=t=>new Hd(t.readBuf());class nd{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new nd(this.len)}splice(e){const n=new nd(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Jc(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const KU=t=>new nd(t.readLen()),UR=(t,e)=>new Vs({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Fd{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Fd(UR(this.doc.guid,this.opts))}splice(e){throw dr()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const YU=t=>new Fd(UR(t.readString(),t.readAny()));class zi{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new zi(this.embed)}splice(e){throw dr()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const JU=t=>new zi(t.readJSON());class lt{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new lt(this.key,this.value)}splice(e){throw dr()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const ZU=t=>new lt(t.readKey(),t.readJSON());class If{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new If(this.arr)}splice(e){const n=new If(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const XU=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const o=t.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new If(n)},QU=Ef("node_env")==="development";class Li{constructor(e){this.arr=e,QU&&rR(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Li(this.arr)}splice(e){const n=new Li(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeAny(s)}}getRef(){return 8}}const eW=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Li(n)};class gr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new gr(this.str)}splice(e){const n=new gr(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const tW=t=>new gr(t.readString()),nW=[DU,OU,VU,FU,HU,UU,WU],rW=0,oW=1,sW=2,iW=3,aW=4,lW=5,cW=6;class kr{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new kr(this.type._copy())}splice(e){throw dr()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const dW=t=>new kr(nW[t.readTypeRef()](t)),Rb=(t,e)=>{let n=e,r=0,o;do r>0&&(n=de(n.client,n.clock+r)),o=Ma(t,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof Ae);return{item:o,diff:r}},Z1=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},Df=(t,e,n)=>{const{client:r,clock:o}=e.id,s=new Ae(de(r,o+n),e,de(r,o+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=de(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},oS=(t,e)=>PF(t,n=>rl(n.deletions,e)),WR=(t,e,n,r,o,s)=>{const i=t.doc,a=i.store,l=i.clientID,c=e.redone;if(c!==null)return cn(t,c);let d=e.parent._item,u=null,h;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||WR(t,d,n,r,o,s)===null))return null;for(;d.redone!==null;)d=cn(t,d.redone)}const f=d===null?e.parent:d.content.type;if(e.parentSub===null){for(u=e.left,h=e;u!==null;){let v=u;for(;v!==null&&v.parent._item!==d;)v=v.redone===null?null:cn(t,v.redone);if(v!==null&&v.parent._item===d){u=v;break}u=u.left}for(;h!==null;){let v=h;for(;v!==null&&v.parent._item!==d;)v=v.redone===null?null:cn(t,v.redone);if(v!==null&&v.parent._item===d){h=v;break}h=h.right}}else if(h=null,e.right&&!o){for(u=e;u!==null&&u.right!==null&&(u.right.redone||rl(r,u.right.id)||oS(s.undoStack,u.right.id)||oS(s.redoStack,u.right.id));)for(u=u.right;u.redone;)u=cn(t,u.redone);if(u&&u.right!==null)return null}else u=f._map.get(e.parentSub)||null;const p=nt(a,l),g=de(l,p),b=new Ae(g,u,u&&u.lastId,h,h&&h.id,f,e.parentSub,e.content.copy());return e.redone=g,Z1(b,!0),b.integrate(t,0),b};class Ae extends J1{constructor(e,n,r,o,s,i,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=s,this.parent=i,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?IC:0}set marker(e){(this.info&Sg)>0!==e&&(this.info^=Sg)}get marker(){return(this.info&Sg)>0}get keep(){return(this.info&PC)>0}set keep(e){this.keep!==e&&(this.info^=PC)}get countable(){return(this.info&IC)>0}get deleted(){return(this.info&Cg)>0}set deleted(e){this.deleted!==e&&(this.info^=Cg)}markDeleted(){this.info|=Cg}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=nt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=nt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ea&&this.id.client!==this.parent.client&&this.parent.clock>=nt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=YC(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=cn(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===zn||this.right&&this.right.constructor===zn)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ae?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ae&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Ea){const r=Ma(n,this.parent);r.constructor===zn?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=YC(e,e.doc.store,de(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const s=new Set,i=new Set;for(;o!==null&&o!==this.right;){if(i.add(o),s.add(o),pa(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,s.clear();else if(pa(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&i.has(Ma(e.doc.store,o.origin)))s.has(Ma(e.doc.store,o.origin))||(r=o,s.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),CR(e.doc.store,this),this.content.integrate(e,this),ZC(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new zn(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:de(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&pa(e.origin,this.lastId)&&this.right===e&&pa(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Jc(e.deleteSet,this.id.client,this.id.clock,this.length),ZC(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw En();this.content.gc(e),n?pU(e,this,new zn(this.id,this.length)):this.content=new nd(this.length)}write(e,n){const r=n>0?de(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,s=this.parentSub,i=this.content.getRef()&Np|(r===null?0:Kt)|(o===null?0:Ro)|(s===null?0:qc);if(e.writeInfo(i),r!==null&&e.writeLeftID(r),o!==null&&e.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=Zc(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Ea?(e.writeParentInfo(!1),e.writeLeftID(a)):En();s!==null&&e.writeString(s)}this.content.write(e,n)}}const GR=(t,e)=>uW[e&Np](t),uW=[()=>{En()},KU,XU,qU,tW,JU,ZU,dW,eW,YU,()=>{En()}],hW=10;class Un extends J1{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){En()}write(e,n){e.writeInfo(hW),Se(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const qR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},KR="__ $YJS$ __";qR[KR]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");qR[KR]=!0;const fW=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},pW=/[\uD800-\uDBFF]/,mW=/[\uDC00-\uDFFF]/,gW=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&pW.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&mW.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},yW=gW,Ee=new Te("y-sync"),Lr=new Te("y-undo"),ec=new Te("yjs-cursor"),jr=(t,e)=>t>>>e|t<<32-e,bW=t=>jr(t,2)^jr(t,13)^jr(t,22),vW=t=>jr(t,6)^jr(t,11)^jr(t,25),wW=t=>jr(t,7)^jr(t,18)^t>>>3,xW=t=>jr(t,17)^jr(t,19)^t>>>10,kW=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),CW=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class SW{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(CW),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let u=16;u<64;u++)n[u]=xW(n[u-2])+n[u-7]+wW(n[u-15])+n[u-16];let r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],l=e[5],c=e[6],d=e[7];for(let u=0,h,f;u<64;u++)h=d+vW(a)+(a&l^~a&c)+kW[u]+n[u]>>>0,f=bW(r)+(r&o^r&s^o&s)>>>0,d=c,c=l,l=a,a=i+h>>>0,i=s,s=o,o=r,r=h+f>>>0;e[0]+=r,e[1]+=o,e[2]+=s,e[3]+=i,e[4]+=a,e[5]+=l,e[6]+=c,e[7]+=d}digest(e){let n=0;for(;n+56<=e.length;){let i=0;for(;i<16&&n+3<e.length;i++)this._W[i]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,i,16);n<e.length;)this._W[i]|=e[n]<<(3-n%4)*8,n++;this._W[i]|=Kt<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<e.length;o++)for(let i=3;i>=0&&n<e.length;i--)this._W[o]|=e[n++]<<i*8;r||(this._W[o-(n%4===0?0:1)]|=Kt<<(3-n%4)*8),this._W[14]=e.byteLength/IF,this._W[15]=e.byteLength*8,this._updateHash();const s=new Uint8Array(32);for(let i=0;i<this._H.length;i++)for(let a=0;a<4;a++)s[i*4+a]=this._H[i]>>>(3-a)*8;return s}}const TW=t=>new SW().digest(t),EW=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},MW=t=>Iz(EW(TW(Nz(t)))),Nf=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!rl(e.ds,t.id),AW=[{light:"#ecd44433",dark:"#ecd444"}],_W=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Ii();t.forEach(o=>r.add(o)),e=e.filter(o=>!r.has(o))}t.set(n,uz(e))}return t.get(n)},RW=(t,{colors:e=AW,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:s}={})=>{let i=!1;const a=new IW(t,s),l=new me({props:{editable:c=>{const d=Ee.getState(c);return d.snapshot==null&&d.prevSnapshot==null}},key:Ee,state:{init:(c,d)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,d)=>{const u=c.getMeta(Ee);if(u!==void 0){d=Object.assign({},d);for(const h in u)d[h]=u[h]}return d.addToHistory=c.getMeta("addToHistory")!==!1,d.isChangeOrigin=u!==void 0&&!!u.isChangeOrigin,d.isUndoRedoOperation=u!==void 0&&!!u.isChangeOrigin&&!!u.isUndoRedoOperation,a.prosemirrorView!==null&&u!==void 0&&(u.snapshot!=null||u.prevSnapshot!=null)&&j1(0,()=>{a.prosemirrorView!=null&&(u.restore==null?a._renderSnapshot(u.snapshot,u.prevSnapshot,d):(a._renderSnapshot(u.snapshot,u.snapshot,d),delete d.restore,delete d.snapshot,delete d.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),d}},view:c=>(a.initView(c),s==null&&a._forceRerender(),o(),{update:()=>{const d=l.getState(c.state);if(d.snapshot==null&&d.prevSnapshot==null&&(i||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(i=!0,d.addToHistory===!1&&!d.isChangeOrigin){const u=Lr.getState(c.state),h=u&&u.undoManager;h&&h.stopCapturing()}a.mux(()=>{d.doc.transact(u=>{u.meta.set("addToHistory",d.addToHistory),a._prosemirrorChanged(c.state.doc)},Ee)})}},destroy:()=>{a.destroy()}})});return l},PW=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new un(t.doc));else if(e.type==="node"){const r=xi(n.doc,n.type,e.anchor,n.mapping);t.setSelection(q.create(t.doc,r))}else{const r=xi(n.doc,n.type,e.anchor,n.mapping),o=xi(n.doc,n.type,e.head,n.mapping);r!==null&&o!==null&&t.setSelection(U.between(t.doc.resolve(r),t.doc.resolve(o)))}},Of=(t,e)=>({type:e.selection.jsonID,anchor:od(e.selection.anchor,t.type,t.mapping),head:od(e.selection.head,t.type,t.mapping)});class IW{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=fW(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=Of(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(sR&&this._domSelectionInView===null&&(j1(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),s=Lz.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||s.clientWidth||0)&&o.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,n){n||(n=xR(pR(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Ee,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>xh(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(R.from(e),0,0));n.setMeta(Ee,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>xh(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(R.from(n),0,0));if(e){const o=_o(mr(e.anchor,0),r.doc.content.size),s=_o(mr(e.head,0),r.doc.content.size);r.setSelection(U.create(r.doc,o,s))}this.prosemirrorView.dispatch(r.setMeta(Ee,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let o=this.doc,s=this.type;if(e||(e=_g(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&En(),o=new Vs({gc:!1}),Mf(o,n),n=_g(o),Mf(o,e),e=_g(o),s._item===null){const i=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);s=o.getXmlFragment(i)}else{const i=o.store.clients.get(s._item.id.client)??[],a=Jn(i,s._item.id.clock);s=i[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(i=>{const a=r.permanentUserData;a&&a.dss.forEach(u=>{_s(i,u,h=>{})});const l=(u,h)=>{const f=u==="added"?a.getUserByClientId(h.client):a.getUserByDeletedId(h);return{user:f,type:u,color:_W(r.colorMapping,r.colors,f)}},c=IR(s,new z1(n.ds,e.sv)).map(u=>!u._item.deleted||Nf(u._item,e)||Nf(u._item,n)?xh(u,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(u=>u!==null),d=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(R.from(c),0,0));this.prosemirrorView.dispatch(d.setMeta(Ee,{isChangeOrigin:!0}))},Ee)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=Ee.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);_s(n,n.deleteSet,a=>{if(a.constructor===Ae){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const s=this.type.toArray().map(a=>YR(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let i=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new j(R.from(s),0,0));PW(i,this.beforeTransactionSelection,this),i=i.setMeta(Ee,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof ER}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&i.scrollIntoView(),this.prosemirrorView.dispatch(i)})}_prosemirrorChanged(e){this.doc.transact(()=>{Ib(this.doc,this.type,e,this),this.beforeTransactionSelection=Of(this,this.prosemirrorView.state)},Ee)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const YR=(t,e,n,r,o,s)=>{const i=n.mapping.get(t);if(i===void 0){if(t instanceof Gt)return xh(t,e,n,r,o,s);throw dr()}return i},xh=(t,e,n,r,o,s)=>{const i=[],a=l=>{var c,d;if(l instanceof Gt){const u=YR(l,e,n,r,o,s);u!==null&&i.push(u)}else{const u=(d=(c=l._item.right)==null?void 0:c.content)==null?void 0:d.type;u instanceof Rs&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(l.applyDelta([{retain:l.length},...u.toDelta()]),u.doc.transact(f=>{u._item.delete(f)}));const h=DW(l,e,n,r,o,s);h!==null&&h.forEach(f=>{f!==null&&i.push(f)})}};r===void 0||o===void 0?t.toArray().forEach(a):IR(t,new z1(o.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(Nf(t._item,r)?Nf(t._item,o)||(l.ychange=s?s("added",t._item.id):{type:"added"}):l.ychange=s?s("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,l,i);return n.mapping.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},Ee),n.mapping.delete(t),null}},DW=(t,e,n,r,o,s)=>{const i=[],a=t.toDelta(r,o,s);try{for(let l=0;l<a.length;l++){const c=a[l];i.push(e.text(c.insert,$W(c.attributes,e)))}}catch{return t.doc.transact(c=>{t._item.delete(c)},Ee),null}return i},NW=(t,e)=>{const n=new Sn,r=t.map(o=>({insert:o.text,attributes:XR(o.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},OW=(t,e)=>{const n=new Gt(t.type.name);for(const r in t.attrs){const o=t.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,Hp(t).map(r=>Pb(r,e))),e.mapping.set(n,t),n},Pb=(t,e)=>t instanceof Array?NW(t,e):OW(t,e),sS=t=>typeof t=="object"&&t!==null,X1=(t,e)=>{const n=Object.keys(t).filter(o=>t[o]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(o=>e[o]!==null).length);for(let o=0;o<n.length&&r;o++){const s=n[o],i=t[s],a=e[s];r=s==="ychange"||i===a||sS(i)&&sS(a)&&X1(i,a)}return r},Hp=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.isText){const s=[];for(let i=e[r];r<e.length&&i.isText;i=e[++r])s.push(i);r--,n.push(s)}else n.push(o)}return n},JR=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,o)=>r.insert===e[o].text&&tR(r.attributes||{}).length===e[o].marks.length&&nR(r.attributes,(s,i)=>{var c;const a=ZR(i),l=e[o].marks;return X1(s,(c=l.find(d=>d.type.name===a))==null?void 0:c.attrs)}))},rd=(t,e)=>{if(t instanceof Gt&&!(e instanceof Array)&&Db(t,e)){const n=Hp(e);return t._length===n.length&&X1(t.getAttributes(),e.attrs)&&t.toArray().every((r,o)=>rd(r,n[o]))}return t instanceof Sn&&e instanceof Array&&JR(t,e)},Lf=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),iS=(t,e,n)=>{const r=t.toArray(),o=Hp(e),s=o.length,i=r.length,a=_o(i,s);let l=0,c=0,d=!1;for(;l<a;l++){const u=r[l],h=o[l];if(Lf(n.mapping.get(u),h))d=!0;else if(!rd(u,h))break}for(;l+c<a;c++){const u=r[i-c-1],h=o[s-c-1];if(Lf(n.mapping.get(u),h))d=!0;else if(!rd(u,h))break}return{equalityFactor:l+c,foundMappedChild:d}},LW=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof gr?e+=n.content.str:n.content instanceof lt&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},jW=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:o}=LW(t),s=e.map(c=>({insert:c.text,attributes:Object.assign({},r,XR(c.marks,n))})),{insert:i,remove:a,index:l}=yW(o,s.map(c=>c.insert).join(""));t.delete(l,a),t.insert(l,i),t.applyDelta(s.map(c=>({retain:c.insert.length,attributes:c.attributes})))},BW=/(.*)(--[a-zA-Z0-9+/=]{8})$/,ZR=t=>{var e;return((e=BW.exec(t))==null?void 0:e[1])??t},$W=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(ZR(r),t[r]));return n},XR=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const o=no(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${MW(r.toJSON())}`:r.type.name]=r.attrs}}),n},Ib=(t,e,n,r)=>{if(e instanceof Gt&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Gt){const u=e.getAttributes(),h=n.attrs;for(const f in h)h[f]!==null?u[f]!==h[f]&&f!=="ychange"&&e.setAttribute(f,h[f]):e.removeAttribute(f);for(const f in u)h[f]===void 0&&e.removeAttribute(f)}const o=Hp(n),s=o.length,i=e.toArray(),a=i.length,l=_o(s,a);let c=0,d=0;for(;c<l;c++){const u=i[c],h=o[c];if(!Lf(r.mapping.get(u),h))if(rd(u,h))r.mapping.set(u,h);else break}for(;d+c+1<l;d++){const u=i[a-d-1],h=o[s-d-1];if(!Lf(r.mapping.get(u),h))if(rd(u,h))r.mapping.set(u,h);else break}t.transact(()=>{for(;a-c-d>0&&s-c-d>0;){const h=i[c],f=o[c],p=i[a-d-1],g=o[s-d-1];if(h instanceof Sn&&f instanceof Array)JR(h,f)||jW(h,f,r),c+=1;else{let b=h instanceof Gt&&Db(h,f),v=p instanceof Gt&&Db(p,g);if(b&&v){const x=iS(h,f,r),w=iS(p,g,r);x.foundMappedChild&&!w.foundMappedChild?v=!1:!x.foundMappedChild&&w.foundMappedChild||x.equalityFactor<w.equalityFactor?b=!1:v=!1}b?(Ib(t,h,f,r),c+=1):v?(Ib(t,p,g,r),d+=1):(r.mapping.delete(e.get(c)),e.delete(c,1),e.insert(c,[Pb(f,r)]),c+=1)}}const u=a-c-d;if(a===1&&s===0&&i[0]instanceof Sn?(r.mapping.delete(i[0]),i[0].delete(0,i[0].length)):u>0&&(e.slice(c,c+u).forEach(h=>r.mapping.delete(h)),e.delete(c,u)),c+d<s){const h=[];for(let f=c;f<s-d;f++)h.push(Pb(o[f],r));e.insert(c,h)}},Ee)},Db=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let vc=null;const VW=()=>{const t=vc;vc=null,t.forEach((e,n)=>{const r=n.state.tr,o=Ee.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((s,i)=>{r.setMeta(i,s)}),n.dispatch(r))})},HW=(t,e,n)=>{vc||(vc=new Map,j1(0,VW)),no(vc,t,qn).set(e,n)},od=(t,e,n)=>{if(t===0)return Ag(e,0,-1);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof Sn){if(r._length>=t)return Ag(r,t,-1);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<o)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&o>1)return new Qc(r._item===null?null:r._item.id,r._item===null?Zc(r):null,null);if(t-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Qc(r._item===null?null:r._item.id,r._item===null?Zc(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw En();if(t===0&&r.constructor!==Sn&&r!==e)return FW(r._item.parent,r._item)}return Ag(e,e._length,-1)},FW=(t,e)=>{let n=null,r=null;return t._item===null?r=Zc(t):n=de(t._item.id.client,t._item.id.clock),new Qc(n,r,e.id)},xi=(t,e,n,r)=>{const o=hU(n,t);if(o===null||o.type!==e&&!Xc(e,o.type._item))return null;let s=o.type,i=0;if(s.constructor===Sn)i=o.index;else if(s._item===null||!s._item.deleted){let a=s._first,l=0;for(;l<s._length&&l<o.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof Sn?i+=c._length:i+=r.get(c).nodeSize}a=a.right}i+=1}for(;s!==e&&s._item!==null;){const a=s._item.parent;if(a._item===null||!a._item.deleted){i+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===s)break;l.deleted||(c instanceof Sn?i+=c._length:i+=r.get(c).nodeSize),l=l.right}}s=a}return i-1},zW=(t,e,n)=>t!==e,UW=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(o,null),e},QR=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),WW=/^#[0-9a-fA-F]{6}$/,aS=(t,e,n,r,o)=>{const s=Ee.getState(t),i=s.doc,a=[];return s.snapshot!=null||s.prevSnapshot!=null||s.binding.mapping.size===0?be.create(t.doc,[]):(e.getStates().forEach((l,c)=>{if(n(i.clientID,c,l)&&l.cursor!=null){const d=l.user||{};d.color==null?d.color="#ffa500":WW.test(d.color)||console.warn("A user uses an unsupported color format",d),d.name==null&&(d.name=`User: ${c}`);let u=xi(i,s.type,bc(l.cursor.anchor),s.binding.mapping),h=xi(i,s.type,bc(l.cursor.head),s.binding.mapping);if(u!==null&&h!==null){const f=mr(t.doc.content.size-1,0);u=_o(u,f),h=_o(h,f),a.push(_e.widget(h,()=>r(d,c),{key:c+"",side:10}));const p=_o(u,h),g=mr(u,h);a.push(_e.inline(p,g,o(d,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),be.create(t.doc,a))},GW=(t,{awarenessStateFilter:e=zW,cursorBuilder:n=UW,selectionBuilder:r=QR,getSelection:o=i=>i.selection}={},s="cursor")=>new me({key:ec,state:{init(i,a){return aS(a,t,e,n,r)},apply(i,a,l,c){const d=Ee.getState(c),u=i.getMeta(ec);return d&&d.isChangeOrigin||u&&u.awarenessUpdated?aS(c,t,e,n,r):a.map(i.mapping,i.doc)}},props:{decorations:i=>ec.getState(i)},view:i=>{const a=()=>{i.docView&&HW(i,ec,{awarenessUpdated:!0})},l=()=>{const c=Ee.getState(i.state),d=t.getLocalState()||{};if(i.hasFocus()){const u=o(i.state),h=od(u.anchor,c.type,c.binding.mapping),f=od(u.head,c.type,c.binding.mapping);(d.cursor==null||!KC(bc(d.cursor.anchor),h)||!KC(bc(d.cursor.head),f))&&t.setLocalStateField(s,{anchor:h,head:f})}else d.cursor!=null&&xi(c.doc,c.type,bc(d.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(s,null)};return t.on("change",a),i.dom.addEventListener("focusin",l),i.dom.addEventListener("focusout",l),{update:l,destroy:()=>{i.dom.removeEventListener("focusin",l),i.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(s,null)}}}}),qW=t=>{var e,n;return((n=(e=Lr.getState(t))==null?void 0:e.undoManager)==null?void 0:n.undo())!=null},KW=t=>{var e,n;return((n=(e=Lr.getState(t))==null?void 0:e.undoManager)==null?void 0:n.redo())!=null},YW=(t,e)=>{var n,r;return e==null?(r=(n=Lr.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canUndo():qW(t)},JW=(t,e)=>{var n,r;return e==null?(r=(n=Lr.getState(t))==null?void 0:n.undoManager)==null?void 0:r.canRedo():KW(t)},ZW=new Set(["paragraph"]),XW=(t,e)=>!(t instanceof Ae)||!(t.content instanceof kr)||!(t.content.type instanceof Rs||t.content.type instanceof Gt&&e.has(t.content.type.nodeName))||t.content.type._length===0,QW=({protectedNodes:t=ZW,trackedOrigins:e=[],undoManager:n=null}={})=>new me({key:Lr,state:{init:(r,o)=>{const s=Ee.getState(o),i=n||new ER(s.type,{trackedOrigins:new Set([Ee].concat(e)),deleteFilter:a=>XW(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:(r,o,s,i)=>{const a=Ee.getState(i).binding,l=o.undoManager,c=l.undoStack.length>0,d=l.redoStack.length>0;return a?{undoManager:l,prevSel:Of(a,s),hasUndoOps:c,hasRedoOps:d}:c!==o.hasUndoOps||d!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=Ee.getState(r.state),s=Lr.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:i})=>{const a=o.binding;a&&i.meta.set(a,Lr.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:i})=>{const a=o.binding;a&&(a.beforeTransactionSelection=i.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}});function eG(t={}){return new me({view(e){return new tG(e,t)}})}class tG{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,s=o.getBoundingClientRect(),i=s.width/o.offsetWidth,a=s.height/o.offsetHeight;if(n){let u=e.nodeBefore,h=e.nodeAfter;if(u||h){let f=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=u?p.bottom:p.top;u&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;r={left:p.left,right:p.right,top:g-b,bottom:g+b}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*i;r={left:u.left-h,right:u.left+h,top:u.top,bottom:u.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let u=l.getBoundingClientRect(),h=u.width/l.offsetWidth,f=u.height/l.offsetHeight;c=u.left-l.scrollLeft*h,d=u.top-l.scrollTop*f}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=rA(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const nG={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var rG=Object.defineProperty,oG=(t,e,n)=>e in t?rG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A=(t,e,n)=>oG(t,typeof e!="symbol"?e+"":e,n);function sG(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function iG(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return sG(e)}const Fp=Ne.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return T_()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new me({key:new Te("uniqueID"),appendTransaction:(n,r,o)=>{const s=n.some(f=>f.docChanged)&&!r.doc.eq(o.doc),i=this.options.filterTransaction&&n.some(f=>{let p,g;return!(!((g=(p=this.options).filterTransaction)===null||g===void 0)&&g.call(p,f))});if(!s||i)return;const{tr:a}=o,{types:l,attributeName:c,generateID:d}=this.options,u=p1(r.doc,n),{mapping:h}=u;if(m1(u).forEach(({newRange:f})=>{const p=Yh(o.doc,f,v=>l.includes(v.type.name)),g=p.map(({node:v})=>v.attrs[c]).filter(v=>v!==null),b=iG(g);p.forEach(({node:v,pos:x})=>{let w;const k=(w=a.doc.nodeAt(x))===null||w===void 0?void 0:w.attrs[c];if(k===null){const S=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(S)===null){const T=JSON.parse(JSON.stringify(o.doc.toJSON()));if(T.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(T.content)===JSON.stringify(S.toJSON())){a.setNodeMarkup(x,void 0,{...v.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(x,void 0,{...v.attrs,[c]:d()});return}const{deleted:C}=h.invert().mapResult(x);C&&b.includes(k)&&a.setNodeMarkup(x,void 0,{...v.attrs,[c]:d()})})}),!!a.steps.length)return a},view(n){const r=o=>{let s;t=!((s=n.dom.parentElement)===null||s===void 0)&&s.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return t!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:o}=this.options,s=i=>{const a=[];return i.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(s(l.content)));return}const c=l.type.create({...l.attrs,[o]:null},s(l.content),l.marks);a.push(c)}),R.from(a)};return e=!1,new j(s(n.content),n.openStart,n.openEnd)}}})]}});function lS(t){return t.type==="link"}function eP(t){return typeof t!="string"&&t.type==="link"}function ji(t){return typeof t!="string"&&t.type==="text"}function Ps(t){var e,n,r,o,s;return Is(t)?{...t}:sd(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((o=t.props)==null?void 0:o.colspan)??1,rowspan:((s=t.props)==null?void 0:s.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function sd(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function Is(t){return sd(t)&&t.props!==void 0&&t.content!==void 0}function Bi(t){return Is(t)?t.props.colspan??1:1}function id(t){return Is(t)?t.props.rowspan??1:1}class Wr extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function he(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}const aG=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function Bn(t,e="Ctrl"){return aG()?t.replace("Mod","⌘"):t.replace("Mod",e)}function Be(...t){return t.filter(e=>e).join(" ")}const Nb=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Gr(t,e,n,r){const o=document.createElement("div");o.className=Be("bn-block-content",n.class),o.setAttribute("data-content-type",t);for(const[i,a]of Object.entries(n))i!=="class"&&o.setAttribute(i,a);const s=document.createElement(e);s.className=Be("bn-inline-content",r.class);for(const[i,a]of Object.entries(r))i!=="class"&&s.setAttribute(i,a);return o.appendChild(s),{dom:o,contentDOM:s}}const cS=(t,e)=>{let n=Ui(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},at={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},Q1=["backgroundColor","textColor"];function jf(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function dS(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function zd(t){const e={};return Object.entries(t).filter(([n,r])=>!Q1.includes(n)).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const s=o.getAttribute(jf(n));if(s===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return s==="true"?!0:s==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const i=parseFloat(s);return!Number.isNaN(i)&&Number.isFinite(i)?i:null}return s},renderHTML:o=>o[n]!==r.default?{[jf(n)]:o[n]}:{}}}),e}function tP(t,e,n,r){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=t(),s=n.state.doc.resolve(o).node().attrs.id;if(!s)throw new Error("Block doesn't have id");const i=e.getBlock(s);if(i.type!==r)throw new Error("Block type does not match");return i}function tc(t,e,n,r,o=!1,s){const i=document.createElement("div");if(s!==void 0)for(const[a,l]of Object.entries(s))a!=="class"&&i.setAttribute(a,l);i.className=Be("bn-block-content",(s==null?void 0:s.class)||""),i.setAttribute("data-content-type",e);for(const[a,l]of Object.entries(n)){const c=r[a].default;!Q1.includes(a)&&l!==c&&i.setAttribute(jf(a),l)}return o&&i.setAttribute("data-file-block",""),i.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=Be("bn-inline-content",t.contentDOM.className)),{...t,dom:i}}function Zn(t){return Qr.create(t)}function ev(t,e){return{config:t,implementation:e}}function $o(t,e,n){return ev({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:n,toInternalHTML:cS,toExternalHTML:cS})}function nP(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function rP(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function oP(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=e==null?void 0:e(r);return o===void 0?!1:o}}),n}function Ud(t,e){const n=Zn({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return zd(t.propSchema)},parseHTML(){return oP(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return tc({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const s=this.options.editor,i=tP(r,s,this.editor,t.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=e.render(i,s),c=tc(l,i.type,i.props,t.propSchema,a);return t.isSelectable===!1&&rP(c,this.editor),c}}});if(n.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return ev(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render(r,o);return tc(a,r.type,r.props,t.propSchema,t.isFileBlock,i)},toExternalHTML:(r,o)=>{var s,i;const a=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{};let l=(i=e.toExternalHTML)==null?void 0:i.call(e,r,o);return l===void 0&&(l=e.render(r,o)),tc(l,r.type,r.props,t.propSchema,a)}})}function Do(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const s=[];t.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&s.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const i=t.resolve(s.find(a=>a>=e)||s[s.length-1]);return{posBeforeNode:i.pos,node:i.nodeAfter}}function tv(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,o=r+n.nodeSize,s={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let i,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const d=l,u=r+c+1,h=u+l.nodeSize;i={node:d,beforePos:u,afterPos:h}}else if(l.type.name==="blockGroup"){const d=l,u=r+c+1,h=u+l.nodeSize;a={node:d,beforePos:u,afterPos:h}}}),!i)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:s,blockContent:i,childContainer:a,blockNoteType:i.node.type.name}}else{if(!s.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${s.node}`);return{isBlockContainer:!1,bnBlock:s,childContainer:s,blockNoteType:s.node.type.name}}}function Ds(t){return tv(t.node,t.posBeforeNode)}function Wd(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return tv(t.nodeAfter,t.pos)}function Le(t){const e=Do(t.doc,t.selection.anchor);return Ds(e)}function zp(t){const e=Do(t.doc,t.selection.anchor);return Ds(e)}function gt(t){return"doc"in t?t.doc.type.schema:t.type.schema}function sP(t){return t.cached.blockNoteEditor}function Gd(t){return sP(t).schema}function nv(t){return Gd(t).blockSchema}function rv(t){return Gd(t).inlineContentSchema}function il(t){return Gd(t).styleSchema}function ov(t){return sP(t).blockCache}function iP(t,e,n){var r,o;const s={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},i=[];t.content.forEach((a,l,c)=>{const d={cells:[]};c===0&&a.content.forEach(u=>{let h=u.attrs.colwidth;h==null&&(h=new Array(u.attrs.colspan??1).fill(void 0)),s.columnWidths.push(...h)}),d.cells=a.content.content.map((u,h)=>(i[c]||(i[c]=[]),i[c][h]=u.type.name==="tableHeader",{type:"tableCell",content:u.content.content.map(f=>Up(f,e,n)).reduce((f,p)=>{if(!f.length)return p;const g=f[f.length-1],b=p[0];return b&&ji(g)&&ji(b)&&JSON.stringify(g.styles)===JSON.stringify(b.styles)?(g.text+=`
`+b.text,f.push(...p.slice(1)),f):(f.push(...p),f)},[]),props:{colspan:u.attrs.colspan,rowspan:u.attrs.rowspan,backgroundColor:u.attrs.backgroundColor,textColor:u.attrs.textColor,textAlignment:u.attrs.textAlignment}})),s.rows.push(d)});for(let a=0;a<i.length;a++)(r=i[a])!=null&&r.every(l=>l)&&(s.headerRows=(s.headerRows??0)+1);for(let a=0;a<((o=i[0])==null?void 0:o.length);a++)i!=null&&i.every(l=>l[a])&&(s.headerCols=(s.headerCols??0)+1);return s}function Up(t,e,n){const r=[];let o;return t.content.forEach(s=>{if(s.type.name==="hardBreak"){if(o)if(ji(o))o.text+=`
`;else if(lS(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(s.type.name!=="link"&&s.type.name!=="text"){if(!e[s.type.name]){console.warn("unrecognized inline content type",s.type.name);return}o&&(r.push(o),o=void 0),r.push(lG(s,e,n));return}const i={};let a;for(const l of s.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(c.propSchema==="boolean")i[c.type]=!0;else if(c.propSchema==="string")i[c.type]=l.attrs.stringValue;else throw new Wr(c.propSchema)}o?ji(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):JSON.stringify(o.styles)===JSON.stringify(i)?o.text+=s.textContent:(r.push(o),o={type:"text",text:s.textContent,styles:i}):lS(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(i)?o.content[o.content.length-1].text+=s.textContent:o.content.push({type:"text",text:s.textContent,styles:i}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):(r.push(o),o={type:"text",text:s.textContent,styles:i})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}:o={type:"text",text:s.textContent,styles:i}}),o&&r.push(o),r}function lG(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},o=e[t.type.name];for(const[i,a]of Object.entries(t.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=o.propSchema;i in l&&(r[i]=a)}let s;return o.content==="styled"?s=Up(t,e,n):s=void 0,{type:t.type.name,props:r,content:s}}function Ue(t,e,n=nv(e),r=rv(e),o=il(e),s=ov(e)){var i;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const a=s==null?void 0:s.get(t);if(a)return a;const l=tv(t,0);let c=l.bnBlock.node.attrs.id;c===null&&(c=Fp.options.generateID());const d=n[l.blockNoteType];if(!d)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const u={};for(const[b,v]of Object.entries({...t.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const x=d.propSchema;b in x&&!(x[b].default===void 0&&v===void 0)&&(u[b]=v)}const h=n[l.blockNoteType],f=[];(i=l.childContainer)==null||i.node.forEach(b=>{f.push(Ue(b,e,n,r,o,s))});let p;if(h.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");p=Up(l.blockContent.node,r,o)}else if(h.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");p=iP(l.blockContent.node,r,o)}else if(h.content==="none")p=void 0;else throw new Wr(h.content);const g={id:c,type:h.type,props:u,content:p,children:f};return s==null||s.set(t,g),g}function cG(t,e,n=nv(e),r=rv(e),o=il(e),s=ov(e)){const i=[];return t.firstChild.descendants(a=>(i.push(Ue(a,e,n,r,o,s)),!1)),i}function dG(t,e,n=nv(e),r=rv(e),o=il(e),s=ov(e)){function i(a,l,c){if(a.type.name!=="blockGroup")throw new Error("unexpected");const d=[];let u,h;return a.forEach((f,p,g)=>{if(f.type.name!=="blockContainer")throw new Error("unexpected");if(f.childCount===0)return;if(f.childCount===0||f.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+f.childCount);const b=g===0,v=g===a.childCount-1;if(f.firstChild.type.name==="blockGroup"){if(!b)throw new Error("unexpected");const C=i(f.firstChild,Math.max(0,l-1),v?Math.max(0,c-1):0);u=C.blockCutAtStart,v&&(h=C.blockCutAtEnd),d.push(...C.blocks);return}const x=Ue(f,e,n,r,o,s),w=f.childCount>1?f.child(1):void 0;let k=[];if(w){const C=i(w,0,v?Math.max(0,c-1):0);k=C.blocks,v&&(h=C.blockCutAtEnd)}v&&!w&&c>1&&(h=x.id),b&&l>1&&(u=x.id),d.push({...x,children:k})}),{blocks:d,blockCutAtStart:u,blockCutAtEnd:h}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return i(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function aP(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function uG(t,e){return{config:t,implementation:e}}function si(t,e){return uG({type:t.name,propSchema:e},{mark:t})}function lP(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function Hs(t){const{height:e,width:n}=sv(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),o=(s,i)=>{for(let a=s;a<e;a++)for(let l=i;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let s=0;s<t.content.rows.length;s++)for(let i=0;i<t.content.rows[s].cells.length;i++){const a=Ps(t.content.rows[s].cells[i]),l=id(a),c=Bi(a),{row:d,col:u}=o(s,i);for(let h=d;h<d+l;h++)for(let f=u;f<u+c;f++){if(r[h][f])throw new Error(`Unable to create occupancy grid for table, cell at ${h},${f} is already occupied`);r[h][f]={row:s,col:i,rowspan:l,colspan:c,cell:a}}}return r}function ad(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function $i(t,e,n=Hs(e)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const s=n[r][o];if(s.row===t.row&&s.col===t.col)return{row:r,col:o,cell:s.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function sv(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let o=0;r.cells.forEach(s=>{o+=Bi(s)}),n=Math.max(n,o)}),{height:e,width:n}}function cP(t,e,n=Hs(e)){var r;const o=(r=n[t.row])==null?void 0:r[t.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function Ob(t,e){var n;const r=Hs(t);if(e<0||e>=r.length)return[];let o=0;for(let i=0;i<e;i++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const s=new Array(r[0].length).fill(!1).map((i,a)=>cP({row:o,col:a},t,r)).filter(i=>i!==void 0);return s.filter((i,a)=>s.findIndex(l=>l.row===i.row&&l.col===i.col)===a)}function Lb(t,e){var n;const r=Hs(t);if(e<0||e>=r[0].length)return[];let o=0;for(let i=0;i<e;i++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const s=new Array(r.length).fill(!1).map((i,a)=>cP({row:a,col:o},t,r)).filter(i=>i!==void 0);return s.filter((i,a)=>s.findIndex(l=>l.row===i.row&&l.col===i.col)===a)}function hG(t,e,n,r=Hs(t)){const{col:o}=$i({row:0,col:e},t,r),{col:s}=$i({row:0,col:n},t,r);return r.forEach(i=>{const[a]=i.splice(o,1);i.splice(s,0,a)}),ad(r)}function fG(t,e,n,r=Hs(t)){const{row:o}=$i({row:e,col:0},t,r),{row:s}=$i({row:n,col:0},t,r),[i]=r.splice(o,1);return r.splice(s,0,i),ad(r)}function jb(t){return t?sd(t)?jb(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:ji(e)?e.text.length===0:eP(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function pG(t,e,n=Hs(t)){if(e==="columns"){let s=0;for(let i=n[0].length-1;i>=0&&n.every(a=>jb(a[i].cell)&&a[i].colspan===1);i--)s++;for(let i=n.length-1;i>=0;i--){const a=Math.max(n[i].length-s,1);n[i]=n[i].slice(0,a)}return ad(n)}let r=0;for(let s=n.length-1;s>=0&&n[s].every(i=>jb(i.cell)&&i.rowspan===1);s--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),ad(n)}function mG(t,e,n,r=Hs(t)){const{width:o,height:s}=sv(t);if(e==="columns")r.forEach((i,a)=>{if(n>=0)for(let l=0;l<n;l++)i.push({row:a,col:Math.max(...i.map(c=>c.col))+1,rowspan:1,colspan:1,cell:Ps("")});else i.splice(o+n,-1*n)});else if(n>0)for(let i=0;i<n;i++){const a=new Array(o).fill(null).map((l,c)=>({row:s+i,col:c,rowspan:1,colspan:1,cell:Ps("")}));r.push(a)}else n<0&&r.splice(s+n,-1*n);return ad(r)}function dP(t,e,n){const r=Ob(t,n);if(!r.some(i=>id(i.cell)>1))return!0;let o=n,s=n;return r.forEach(i=>{const a=id(i.cell);o=Math.max(o,i.row+a-1),s=Math.min(s,i.row)}),e<n?n===o:n===s}function uP(t,e,n){const r=Lb(t,n);if(!r.some(i=>Bi(i.cell)>1))return!0;let o=n,s=n;return r.forEach(i=>{const a=Bi(i.cell);o=Math.max(o,i.col+a-1),s=Math.min(s,i.col)}),e<n?n===o:n===s}function gG(t,e,n){const r=$i(t,n),o=$i(e,n);return r.col===o.col}function uS(t,e,n,r){const o=[];for(const[s,i]of Object.entries(t.styles||{})){const a=n[s];if(!a)throw new Error(`style ${s} not found in styleSchema`);if(a.propSchema==="boolean")o.push(e.mark(s));else if(a.propSchema==="string")o.push(e.mark(s,{stringValue:i}));else throw new Wr(a.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(s=>s.length>0).map(s=>s===`
`?e.nodes.hardBreak.createChecked():e.text(s,o)):t.text.length>0?[e.text(t.text,o)]:[]}function yG(t,e,n){const r=e.marks.link.create({href:t.href});return Bb(t.content,e,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function Bb(t,e,n,r){const o=[];if(typeof t=="string")return o.push(...uS({text:t,styles:{}},e,n,r)),o;for(const s of t)o.push(...uS(s,e,n,r));return o}function yr(t,e,n,r=il(e)){const o=[];for(const s of t)typeof s=="string"?o.push(...Bb(s,e,r,n)):eP(s)?o.push(...yG(s,e,r)):ji(s)?o.push(...Bb([s],e,r,n)):o.push(hP(s,e,r));return o}function Wp(t,e,n=il(e)){const r=[],o=new Array(t.headerRows??0).fill(!0),s=new Array(t.headerCols??0).fill(!0),i=t.columnWidths??[];for(let a=0;a<t.rows.length;a++){const l=t.rows[a],c=[],d=o[a];for(let h=0;h<l.cells.length;h++){const f=l.cells[h],p=s[h],g=void 0;let b=null;const v=$i({row:a,col:h},{content:t});let x=i[v.col]?[i[v.col]]:null;if(f)if(typeof f=="string")b=e.text(f);else if(sd(f)){f.content&&(b=yr(f.content,e,"tableParagraph",n));const k=Bi(f);k>1&&(x=new Array(k).fill(!1).map((C,S)=>i[v.col+S]??void 0))}else b=yr(f,e,"tableParagraph",n);const w=e.nodes[p||d?"tableHeader":"tableCell"].createChecked({...sd(f)?f.props:{},colwidth:x},e.nodes.tableParagraph.createChecked(g,b));c.push(w)}const u=e.nodes.tableRow.createChecked({},c);r.push(u)}return r}function hP(t,e,n){let r,o=t.type;if(o===void 0&&(o="paragraph"),!e.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!t.content)r=e.nodes[o].createChecked(t.props);else if(typeof t.content=="string"){const s=yr([t.content],e,o,n);r=e.nodes[o].createChecked(t.props,s)}else if(Array.isArray(t.content)){const s=yr(t.content,e,o,n);r=e.nodes[o].createChecked(t.props,s)}else if(t.content.type==="tableContent"){const s=Wp(t.content,e,n);r=e.nodes[o].createChecked(t.props,s)}else throw new Wr(t.content.type);return r}function Ui(t,e,n=il(e)){let r=t.id;r===void 0&&(r=Fp.options.generateID());const o=[];if(t.children)for(const s of t.children)o.push(Ui(s,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const s=hP(t,e,n),i=o.length>0?e.nodes.blockGroup.createChecked({},o):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},i?[s,i]:s)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},o);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function Mn(t,e){let n,r;if(e.firstChild.descendants((o,s)=>n?!1:!$b(o)||o.attrs.id!==t?!0:(n=o,r=s+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function $b(t){return t.type.isInGroup("bnBlock")}function bG(t,e){return t.id!==e.id||t.type!==e.type||JSON.stringify(t.props)!==JSON.stringify(e.props)||JSON.stringify(t.content)!==JSON.stringify(e.content)}function vG(t,e=[]){let n={type:"local"};t.getMeta("paste")?n={type:"paste"}:t.getMeta("uiEvent")==="drop"?n={type:"drop"}:t.getMeta("history$")?n={type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")&&(t.getMeta("y-sync$").isUndoRedoOperation?n={type:"undo-redo"}:n={type:"yjs-remote"});const r=gt(t),o=p1(t.before,[t,...e]),s=m1(o),i=s.flatMap(u=>Yh(o.before,u.oldRange,$b)).map(({node:u})=>Ue(u,r)),a=s.flatMap(u=>Yh(o.doc,u.newRange,$b)).map(({node:u})=>Ue(u,r)),l=new Map(a.map(u=>[u.id,u])),c=new Map(i.map(u=>[u.id,u])),d=[];for(const[u,h]of l)c.has(u)||d.push({type:"insert",block:h,source:n,prevBlock:void 0});for(const[u,h]of c)l.has(u)||d.push({type:"delete",block:h,source:n,prevBlock:void 0});for(const[u,h]of l)if(c.has(u)){const f=c.get(u);bG(f,h)&&d.push({type:"update",block:h,prevBlock:f,source:n})}return d}function wG(t,e,n,r="before"){const o=typeof n=="string"?n:n.id,s=gt(t),i=e.map(c=>Ui(c,s)),a=Mn(o,t.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),t.step(new ot(l,l,new j(R.from(i),0,0))),i.map(c=>Ue(c,s))}function hS(t,e,n){const r=gt(t),o=n.map(c=>Ui(c,r)),s=new Set(e.map(c=>typeof c=="string"?c:c.id)),i=[],a=typeof e[0]=="string"?e[0]:e[0].id;let l=0;if(t.doc.descendants((c,d)=>{if(s.size===0)return!1;if(!c.type.isInGroup("bnBlock")||!s.has(c.attrs.id))return!0;if(i.push(Ue(c,r)),s.delete(c.attrs.id),n.length>0&&c.attrs.id===a){const p=t.doc.nodeSize;t.insert(d,o);const g=t.doc.nodeSize;l+=p-g}const u=t.doc.nodeSize,h=t.doc.resolve(d-l);h.node().type.name==="blockGroup"&&h.node(h.depth-1).type.name!=="doc"&&h.node().childCount===1?t.delete(h.before(),h.after()):t.delete(d-l,d-l+c.nodeSize);const f=t.doc.nodeSize;return l+=u-f,!1}),s.size>0){const c=[...s].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+c)}return{insertedBlocks:o.map(c=>Ue(c,r)),removedBlocks:i}}const Tt=(t,e)=>({tr:n,dispatch:r})=>(r&&fP(n,t,e),!0);function fP(t,e,n,r,o){const s=Wd(t.doc.resolve(e)),i=gt(t),a=i.nodes[s.blockNoteType],l=i.nodes[n.type||s.blockNoteType],c=l.isInGroup("bnBlock")?l:i.nodes.blockContainer;if(s.isBlockContainer&&l.isInGroup("blockContent"))fS(n,t,s),xG(n,t,a,l,s);else if(!s.isBlockContainer&&l.isInGroup("bnBlock"))fS(n,t,s);else{const d=Ue(s.bnBlock.node,i);t.replaceWith(s.bnBlock.beforePos,s.bnBlock.afterPos,Ui({children:d.children,...n},i));return}t.setNodeMarkup(s.bnBlock.beforePos,c,{...s.bnBlock.node.attrs,...n.props})}function xG(t,e,n,r,o,s,i){const a=gt(e);let l="keep";if(t.content)if(typeof t.content=="string")l=yr([t.content],a,r.name);else if(Array.isArray(t.content))l=yr(t.content,a,r.name);else if(t.content.type==="tableContent")l=Wp(t.content,a);else throw new Wr(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);l==="keep"?e.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...t.props}):e.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...t.props},l))}function fS(t,e,n){const r=gt(e);if(t.children!==void 0&&t.children.length>0){const o=t.children.map(s=>Ui(s,r));if(n.childContainer)e.step(new ot(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new j(R.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function kG(t,e,n,r,o){const s=typeof e=="string"?e:e.id,i=Mn(s,t.doc);if(!i)throw new Error(`Block with ID ${s} not found`);fP(t,i.posBeforeNode,n);const a=t.doc.resolve(i.posBeforeNode+1).node(),l=gt(t);return Ue(a,l)}function pP(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function mP(t,e,n,r){let o;if(e)if(typeof e=="string")o=yr([e],t.pmSchema);else if(Array.isArray(e))o=yr(e,t.pmSchema);else if(e.type==="tableContent")o=Wp(e,t.pmSchema);else throw new Wr(e.type);else throw new Error("blockContent is required");const s=n.serializeFragment(R.from(o),r);return s.nodeType===1&&pP(s),s}function CG(t,e,n,r,o,s,i){var a,l,c,d,u,h,f,p;const g=(i==null?void 0:i.document)??document,b=e.pmSchema.nodes.blockContainer;let v=n.props;if(!n.props){v={};for(const[T,E]of Object.entries(e.schema.blockSchema[n.type].propSchema))E.default!==void 0&&(v[T]=E.default)}const x=(l=(a=b.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,b.create({id:n.id,...v})),w=Array.from(x.dom.attributes),k=e.blockImplementations[n.type].implementation.toExternalHTML({...n,props:v},e),C=g.createDocumentFragment();if(k.dom.classList.contains("bn-block-content")){const T=[...w,...Array.from(k.dom.attributes)].filter(E=>E.name.startsWith("data")&&E.name!=="data-content-type"&&E.name!=="data-file-block"&&E.name!=="data-node-view-wrapper"&&E.name!=="data-node-type"&&E.name!=="data-id"&&E.name!=="data-index"&&E.name!=="data-editable");for(const E of T)k.dom.firstChild.setAttribute(E.name,E.value);pP(k.dom.firstChild),C.append(...Array.from(k.dom.childNodes))}else C.append(k.dom);if(k.contentDOM&&n.content){const T=mP(e,n.content,r,i);k.contentDOM.appendChild(T)}let S;if(o.has(n.type)?S="OL":s.has(n.type)&&(S="UL"),S){if(((c=t.lastChild)==null?void 0:c.nodeName)!==S){const E=g.createElement(S);S==="OL"&&v!=null&&v.start&&(v==null?void 0:v.start)!==1&&E.setAttribute("start",v.start+""),t.append(E)}const T=g.createElement("li");T.append(C),t.lastChild.appendChild(T)}else t.append(C);if(n.children&&n.children.length>0){const T=g.createDocumentFragment();if(gP(T,e,n.children,r,o,s,i),((d=t.lastChild)==null?void 0:d.nodeName)==="UL"||((u=t.lastChild)==null?void 0:u.nodeName)==="OL")for(;((h=T.firstChild)==null?void 0:h.nodeName)==="UL"||((f=T.firstChild)==null?void 0:f.nodeName)==="OL";)t.lastChild.lastChild.appendChild(T.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(T):(p=k.contentDOM)==null||p.append(T)}}const gP=(t,e,n,r,o,s,i)=>{for(const a of n)CG(t,e,a,r,o,s,i)},SG=(t,e,n,r,o,s)=>{const i=((s==null?void 0:s.document)??document).createDocumentFragment();return gP(i,t,e,n,r,o,s),i},Gp=(t,e)=>{const n=jo.fromSchema(t);return{exportBlocks:(r,o)=>{const s=SG(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),i=document.createElement("div");return i.append(s),i.innerHTML},exportInlineContent:(r,o)=>{const s=mP(e,r,n,o),i=document.createElement("div");return i.append(s.cloneNode(!0)),i.innerHTML}}};function TG(t,e,n,r,o){let s;if(e)if(typeof e=="string")s=yr([e],t.pmSchema,r);else if(Array.isArray(e))s=yr(e,t.pmSchema,r);else if(e.type==="tableContent")s=Wp(e,t.pmSchema);else throw new Wr(e.type);else throw new Error("blockContent is required");return n.serializeFragment(R.from(s),o)}function EG(t,e,n,r,o){var s,i,a,l,c;const d=t.pmSchema.nodes.blockContainer;let u=e.props;if(!e.props){u={};for(const[p,g]of Object.entries(t.schema.blockSchema[e.type].propSchema))g.default!==void 0&&(u[p]=g.default)}const h=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:u},t);if(e.type==="numberedListItem"&&h.dom.setAttribute("data-index",r.toString()),h.contentDOM&&e.content){const p=TG(t,e.content,n,e.type,o);h.contentDOM.appendChild(p)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const p=yP(t,e.children,n,o);(s=h.contentDOM)==null||s.append(p)}return h.dom}const f=(a=(i=d.spec)==null?void 0:i.toDOM)==null?void 0:a.call(i,d.create({id:e.id,...u}));return(l=f.contentDOM)==null||l.appendChild(h.dom),e.children&&e.children.length>0&&((c=f.contentDOM)==null||c.appendChild(bP(t,e.children,n,o))),f.dom}function yP(t,e,n,r){const o=((r==null?void 0:r.document)??document).createDocumentFragment();let s=0;for(const i of e){i.type==="numberedListItem"?s++:s=0;const a=EG(t,i,n,s,r);o.appendChild(a)}return o}const bP=(t,e,n,r)=>{var o;const s=t.pmSchema.nodes.blockGroup,i=s.spec.toDOM(s.create({})),a=yP(t,e,n,r);return(o=i.contentDOM)==null||o.appendChild(a),i.dom},MG=(t,e)=>{const n=jo.fromSchema(t);return{serializeBlocks:(r,o)=>bP(e,r,n,o).outerHTML}},qp=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),o=(r==null?void 0:r.textContent)??void 0;return{targetElement:n,caption:o}},AG=(t,e,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const s=document.createElement("div");s.className="bn-add-file-button-icon",r?s.appendChild(r):s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(s);const i=document.createElement("p");i.className="bn-add-file-button-text",i.innerHTML=n||e.dictionary.file_blocks.file.add_button_text,o.appendChild(i);const a=c=>{c.preventDefault()},l=()=>{e.transact(c=>c.setMeta(e.filePanel.plugins[0],{block:t}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},_G='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',RG=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=_G,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},iv=(t,e,n,r,o)=>{const s=document.createElement("div");if(s.className="bn-file-block-content-wrapper",t.props.url===""){const a=AG(t,e,r,o);s.appendChild(a.dom);const l=e.onUploadStart(c=>{if(c===t.id){s.removeChild(a.dom);const d=document.createElement("div");d.className="bn-file-loading-preview",d.textContent="Loading...",s.appendChild(d)}});return{dom:s,destroy:()=>{l(),a.destroy()}}}const i={dom:s};if(t.props.showPreview===!1||!n){const a=RG(t);s.appendChild(a.dom),i.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else s.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,s.appendChild(a)}return i},av=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},Kp=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},pS=t=>({url:t.src||void 0}),PG='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',IG={backgroundColor:at.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},vP={type:"audio",propSchema:IG,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},DG=(t,e)=>{const n=document.createElement("div");n.innerHTML=PG;const r=document.createElement("audio");return r.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(o=>{r.src=o}):r.src=t.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,iv(t,e,{dom:r},e.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},wP=t=>{if(t.tagName==="AUDIO")return t.closest("figure")?void 0:pS(t);if(t.tagName==="FIGURE"){const e=qp(t,"audio");if(!e)return;const{targetElement:n,caption:r}=e;return{...pS(n),caption:r}}},NG=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?av(e,t.props.caption):Kp(e,t.props.caption):{dom:e}},OG=Ud(vP,{render:DG,parse:wP,toExternalHTML:NG}),mS=Symbol.for("blocknote.shikiParser"),Ig=Symbol.for("blocknote.shikiHighlighterPromise"),LG={language:{default:"text"}},jG=Zn({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const t=this.options;return{language:{default:t.editor.settings.codeBlock.defaultLanguage,parseHTML:e=>{let n=e,r=null;(n==null?void 0:n.tagName)==="DIV"&&(n==null?void 0:n.dataset.contentType)==="codeBlock"&&(n=n.children[0]),(n==null?void 0:n.tagName)==="PRE"&&(n=n==null?void 0:n.children[0]);const o=n==null?void 0:n.getAttribute("data-language");if(o)r=o.toLowerCase();else{const s=[...(n==null?void 0:n.className.split(" "))||[]].filter(i=>i.startsWith("language-")).map(i=>i.replace("language-",""));s.length>0&&(r=s[0].toLowerCase())}return r?Dg(t.editor.settings.codeBlock,r)??r:null},renderHTML:e=>e.language?{class:`language-${e.language}`,"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,n;const r=document.createElement("pre"),{dom:o,contentDOM:s}=Gr(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...t});return o.removeChild(s),o.appendChild(r),r.appendChild(s),{dom:o,contentDOM:s}},addNodeView(){const t=this.options;return({editor:e,node:n,getPos:r,HTMLAttributes:o})=>{var s,i;const a=document.createElement("pre"),l=document.createElement("select"),c=document.createElement("div"),{dom:d,contentDOM:u}=Gr(this.name,"code",{...((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},...o},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{}),h=f=>{const p=f.target.value;e.commands.command(({tr:g})=>(g.setNodeAttribute(r(),"language",p),!0))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach(([f,{name:p}])=>{const g=document.createElement("option");g.value=f,g.text=p,l.appendChild(g)}),c.contentEditable="false",l.value=n.attrs.language||t.editor.settings.codeBlock.defaultLanguage,d.removeChild(u),d.appendChild(c),d.appendChild(a),a.appendChild(u),c.appendChild(l),l.addEventListener("change",h),{dom:d,contentDOM:u,update:f=>f.type===this.type,destroy:()=>{l.removeEventListener("change",h)}}}},addProseMirrorPlugins(){const t=this.options,e=globalThis;let n,r;return[k6({parser:o=>{if(!t.editor.settings.codeBlock.createHighlighter)return[];if(!n)return e[Ig]=e[Ig]||t.editor.settings.codeBlock.createHighlighter(),e[Ig].then(i=>{n=i});const s=Dg(t.editor.settings.codeBlock,o.language);return!s||s==="text"||s==="none"||s==="plaintext"||s==="txt"?[]:n.getLoadedLanguages().includes(s)?(r||(r=e[mS]||C6(n),e[mS]=r),r(o)):n.loadLanguage(s)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options;return[new Ms({find:/^```(.*?)\s$/,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=r[1].trim(),i={language:Dg(t.editor.settings.codeBlock,s)??s};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,i).setSelection(U.create(e.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:n}=e;if(t.isActive(this.name)&&!n.parent.textContent&&_p(e)){const r=n.pos-n.parentOffset-2;return t.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const n=e.parentOffset===e.parent.nodeSize-2,r=e.parent.textContent.endsWith(`

`);return!n||!r?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:o})=>(o.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),BG=$o(jG,LG);function Dg(t,e){var n;return(n=Object.entries(t.supportedLanguages).find(([r,{aliases:o}])=>(o==null?void 0:o.includes(e))||r===e))==null?void 0:n[0]}const $G=Mt.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),VG=si($G,"string"),HG=Mt.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),FG=si(HG,"string"),gS=t=>({url:t.src||void 0}),zG={backgroundColor:at.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},xP={type:"file",propSchema:zG,content:"none",isFileBlock:!0},UG=(t,e)=>iv(t,e),kP=t=>{if(t.tagName==="EMBED")return t.closest("figure")?void 0:gS(t);if(t.tagName==="FIGURE"){const e=qp(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e;return{...gS(n),caption:r}}},WG=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?Kp(e,t.props.caption):{dom:e}},GG=Ud(xP,{render:UG,parse:kP,toExternalHTML:WG}),CP={...at,level:{default:1,values:[1,2,3]}},qG=Zn({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return zd(CP)},addInputRules(){return[...[1,2,3].map(t=>new Ms({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:n,range:r})=>{const o=Le(e);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(Tt(o.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){return{"Mod-Alt-1":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;return Gr(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),KG=$o(qG,CP),SP=(t,e,n,r,o,s)=>{const{dom:i,destroy:a}=iv(t,e,n,o,s),l=i;t.props.url&&t.props.showPreview&&(t.props.previewWidth?l.style.width=`${t.props.previewWidth}px`:l.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const d=document.createElement("div");d.className="bn-resize-handle",d.style.right="4px";let u,h=t.props.previewWidth;const f=w=>{var k,C;if(!u){!e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d));return}let S;t.props.textAlignment==="center"?u.handleUsed==="left"?S=u.initialWidth+(u.initialClientX-w.clientX)*2:S=u.initialWidth+(w.clientX-u.initialClientX)*2:u.handleUsed==="left"?S=u.initialWidth+u.initialClientX-w.clientX:S=u.initialWidth+w.clientX-u.initialClientX,h=Math.min(Math.max(S,64),((C=(k=e.domElement)==null?void 0:k.firstElementChild)==null?void 0:C.clientWidth)||Number.MAX_VALUE),l.style.width=`${h}px`},p=w=>{(!w.target||!l.contains(w.target)||!e.isEditable)&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d)),u&&(u=void 0,e.updateBlock(t,{props:{previewWidth:h}}))},g=()=>{e.isEditable&&(r.appendChild(c),r.appendChild(d))},b=w=>{w.relatedTarget===c||w.relatedTarget===d||u||e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},v=w=>{w.preventDefault(),u={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:w.clientX}},x=w=>{w.preventDefault(),u={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:w.clientX}};return window.addEventListener("mousemove",f),window.addEventListener("mouseup",p),l.addEventListener("mouseenter",g),l.addEventListener("mouseleave",b),c.addEventListener("mousedown",v),d.addEventListener("mousedown",x),{dom:l,destroy:()=>{a==null||a(),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p),l.removeEventListener("mouseenter",g),l.removeEventListener("mouseleave",b),c.removeEventListener("mousedown",v),d.removeEventListener("mousedown",x)}}},yS=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},YG='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',JG={textAlignment:at.textAlignment,backgroundColor:at.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},TP={type:"image",propSchema:JG,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},ZG=(t,e)=>{const n=document.createElement("div");n.innerHTML=YG;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),SP(t,e,{dom:r},r,e.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},EP=t=>{if(t.tagName==="IMG")return t.closest("figure")?void 0:yS(t);if(t.tagName==="FIGURE"){const e=qp(t,"img");if(!e)return;const{targetElement:n,caption:r}=e;return{...yS(n),caption:r}}},XG=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?av(e,t.props.caption):Kp(e,t.props.caption):{dom:e}},QG=Ud(TP,{render:ZG,parse:EP,toExternalHTML:XG});function lv(t,e,n){var r,o,s;const i=Eo.fromSchema(e),a=t,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const f of Array.from(a.childNodes))l.appendChild(f.cloneNode(!0));let c=i.parse(l,{topNode:e.nodes.blockGroup.create()});((o=(r=c.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const d=(s=c.firstChild)==null?void 0:s.firstChild;if(!(d!=null&&d.isTextblock))return R.from(c);const u=e.nodes[n].create({},d.content),h=c.content.cut(d.nodeSize+2);if(h.size>0){const f=c.copy(h);return u.content.addToEnd(f)}return u.content}const MP=(t,e,n)=>({state:r,dispatch:o})=>{const s=Do(r.doc,t),i=Ds(s);if(!i.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const a=[{type:i.bnBlock.node.type,attrs:n?{...i.bnBlock.node.attrs,id:void 0}:{}},{type:e?i.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...i.blockContent.node.attrs}:{}}];return o&&r.tr.split(t,2,a),!0},cv=t=>{const{blockInfo:e,selectionEmpty:n}=t.transact(s=>({blockInfo:zp(s),selectionEmpty:s.selection.anchor===s.selection.head}));if(!e.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=e;return!(o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:t._tiptapEditor.commands.first(({state:s,chain:i,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(Tt(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(i().deleteSelection().command(MP(s.selection.from,!0)).run(),!0):!1)])},eq={...at},tq=Zn({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new Ms({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Le(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Tt(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>cv(this.options.editor),"Mod-Shift-8":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"?{}:!1},getContent:(t,e)=>lv(t,e,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Gr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),nq=$o(tq,eq),AP={...at,checked:{default:!1}},rq=Zn({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return zd(AP)},addInputRules(){return[new Ms({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Le(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Tt(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new Ms({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Le(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Tt(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>cv(this.options.editor),"Mod-Shift-9":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:t=>typeof t=="string"||t.closest("[data-content-type]")||t.closest("li")?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"){const r=t.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(t,e)=>lv(t,e,this.name),node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=t.attrs.checked,t.attrs.checked&&o.setAttribute("checked","");const{dom:s,contentDOM:i}=Gr(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return s.insertBefore(o,i),{dom:s,contentDOM:i}},addNodeView(){return({node:t,getPos:e,editor:n,HTMLAttributes:r})=>{var o,s;const i=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=t.attrs.checked,t.attrs.checked&&l.setAttribute("checked","");const c=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof e!="boolean"){const h=Do(n.state.doc,e());if(h.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${h.node.type.name}`);this.editor.commands.command(Tt(h.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",c);const{dom:d,contentDOM:u}=Gr(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{});if(typeof e!="boolean"){const h="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;l.setAttribute("aria-labelledby",h),u.id=h}return d.removeChild(u),d.appendChild(i),i.appendChild(a),i.appendChild(u),a.appendChild(l),{dom:d,contentDOM:u,destroy:()=>{l.removeEventListener("change",c)}}}}}),oq=$o(rq,AP),sq=new Te("numbered-list-indexing"),iq=()=>new me({key:sq,appendTransaction:(t,e,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((s,i)=>{var a;if(s.type.name==="blockContainer"&&s.firstChild.type.name==="numberedListItem"){let l=`${s.firstChild.attrs.start||1}`;const c=Ds({posBeforeNode:i,node:s});if(!c.isBlockContainer)throw new Error("impossible");const d=r.doc.resolve(c.bnBlock.beforePos).nodeBefore;if(d){const p=Ds({posBeforeNode:c.bnBlock.beforePos-d.nodeSize,node:d});if(p.blockNoteType==="numberedListItem"){if(!p.isBlockContainer)throw new Error("impossible");const g=p.blockContent.node.attrs.index;l=(parseInt(g)+1).toString()}}const u=c.blockContent.node,h=u.attrs.index,f=((a=d==null?void 0:d.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(h!==l||u.attrs.start&&!f){o=!0;const{start:p,...g}=u.attrs;r.setNodeMarkup(c.blockContent.beforePos,void 0,{...g,index:l,...typeof p=="number"&&f&&{start:p}})}}}),o?r:null}}),_P={...at,start:{default:void 0,type:"number"}},aq=Zn({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...zd(_P),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new Ms({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:n,match:r})=>{const o=Le(t);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem")return;const s=parseInt(r[1]);e().command(Tt(o.bnBlock.beforePos,{type:"numberedListItem",props:s===1&&{}||{start:s}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>cv(this.options.editor),"Mod-Shift-7":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[iq()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return t.previousSibling||r===1?{}:{start:r}}return!1},getContent:(t,e)=>lv(t,e,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Gr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),lq=$o(aq,_P),cq={...at},dq=Zn({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,n;return Gr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),uq=$o(dq,cq),hq={...at},fq=Zn({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new Ms({find:new RegExp("^>\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Le(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Tt(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const t=Le(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Tt(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML({HTMLAttributes:t}){var e,n;return Gr(this.name,"blockquote",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),pq=$o(fq,hq),mq=35,dv=120,gq=31,yq=Ne.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[_H({cellMinWidth:mq,defaultCellMinWidth:dv,View:null}),$H()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>pC(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>pC(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:ye(W(t,"tableRole",e))}}}),bq={textColor:at.textColor},vq=Zn({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){var e,n;return Gr(this.name,"table",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends N_{constructor(s,i,a){super(s,i),this.node=s,this.cellMinWidth=i,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=Be("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[h,f]of Object.entries(a))h!=="class"&&l.setAttribute(h,f);const c=this.dom,d=document.createElement("div");d.className="tableWrapper-inner",d.appendChild(c.firstChild),c.appendChild(d),l.appendChild(c);const u=document.createElement("div");u.className="table-widgets-container",u.style.position="relative",c.appendChild(u),this.dom=l}ignoreMutation(s){return!s.target.closest(".tableWrapper-inner")||super.ignoreMutation(s)}}return new r(t,dv,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),wq=Zn({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),xq=Qr.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Tn(this.options.HTMLAttributes,t),0]}});function bS(t,e){const n=Eo.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),R.fromArray(r)}const kq=$o(vq,bq,[yq,wq,z6.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(t,e)=>bS(t,e)}]}}),F6.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(t,e)=>bS(t,e)}]}}),xq]),vS=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},Cq='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',Sq={textAlignment:at.textAlignment,backgroundColor:at.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},RP={type:"video",propSchema:Sq,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},Tq=(t,e)=>{const n=document.createElement("div");n.innerHTML=Cq;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,r.appendChild(o),SP(t,e,{dom:r},r,e.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},PP=t=>{if(t.tagName==="VIDEO")return t.closest("figure")?void 0:vS(t);if(t.tagName==="FIGURE"){const e=qp(t,"video");if(!e)return;const{targetElement:n,caption:r}=e;return{...vS(n),caption:r}}},Eq=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?av(e,t.props.caption):Kp(e,t.props.caption):{dom:e}},Mq=Ud(RP,{render:Tq,parse:PP,toExternalHTML:Eq}),uv={paragraph:uq,heading:KG,quote:pq,codeBlock:BG,bulletListItem:nq,numberedListItem:lq,checkListItem:oq,table:kq,file:GG,image:QG,video:Mq,audio:OG},Aq=nP(uv),hv={bold:si(_6,"boolean"),italic:si(j6,"boolean"),underline:si(H6,"boolean"),strike:si(V6,"boolean"),code:si(I6,"boolean"),textColor:FG,backgroundColor:VG};lP(hv);const IP={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},_q=aP(IP);function rn(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===Aq[t]}function Rq(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===_q[t]}function Pq(t,e,n){return e.type===t&&e.type in n.schema.blockSchema&&rn(e.type,n)}function qd(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function Iq(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function Kd(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function ma(t,e,n){return e in n.schema.blockSchema&&t in n.schema.blockSchema[e].propSchema&&n.schema.blockSchema[e].propSchema[t]===at[t]}function Vb(t,e,n){return ma(t,e.type,n)}function Hb(t){return t instanceof Re}function Dq(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function nn(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&ji(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),Dq(t),r}function Nq(t){const e=[];return rn("heading",t)&&e.push({onItemClick:()=>{nn(t,{type:"heading",props:{level:1}})},badge:Bn("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{nn(t,{type:"heading",props:{level:2}})},badge:Bn("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{nn(t,{type:"heading",props:{level:3}})},badge:Bn("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),rn("quote",t)&&e.push({onItemClick:()=>{nn(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),rn("numberedListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"numberedListItem"})},badge:Bn("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),rn("bulletListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"bulletListItem"})},badge:Bn("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),rn("checkListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"checkListItem"})},badge:Bn("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),rn("paragraph",t)&&e.push({onItemClick:()=>{nn(t,{type:"paragraph"})},badge:Bn("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),rn("codeBlock",t)&&e.push({onItemClick:()=>{nn(t,{type:"codeBlock"})},badge:Bn("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),rn("table",t)&&e.push({onItemClick:()=>{nn(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),rn("image",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"image"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"image",...t.dictionary.slash_menu.image}),rn("video",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"video"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"video",...t.dictionary.slash_menu.video}),rn("audio",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"audio"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"audio",...t.dictionary.slash_menu.audio}),rn("file",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"file"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"file",...t.dictionary.slash_menu.file}),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function Oq(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(e.toLowerCase())).length!==0)}function Ng(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let fv=class DP{constructor(e){A(this,"blockSpecs"),A(this,"inlineContentSpecs"),A(this,"styleSpecs"),A(this,"blockSchema"),A(this,"inlineContentSchema"),A(this,"styleSchema"),A(this,"BlockNoteEditor","only for types"),A(this,"Block","only for types"),A(this,"PartialBlock","only for types"),this.blockSpecs=Ng(e==null?void 0:e.blockSpecs)||uv,this.inlineContentSpecs=Ng(e==null?void 0:e.inlineContentSpecs)||IP,this.styleSpecs=Ng(e==null?void 0:e.styleSpecs)||hv,this.blockSchema=nP(this.blockSpecs),this.inlineContentSchema=aP(this.inlineContentSpecs),this.styleSchema=lP(this.styleSpecs)}static create(e){return new DP(e)}};const Lq={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},jq=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},Bq=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},$q=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},Vq=Ud(Lq,{render:jq,parse:Bq,toExternalHTML:$q});fv.create({blockSpecs:{pageBreak:Vq}});function Hq(t){return t.transact(e=>{const n=Do(e.doc,e.selection.anchor);if(e.selection instanceof Re)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof q)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=Do(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function Fq(t,e){var n,r;const o=(n=Mn(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let s;if(e.type==="cell")s=Re.create(t.doc,o+e.anchorCellOffset,o+e.headCellOffset);else if(e.type==="node")s=q.create(t.doc,o+1);else{const i=(r=Mn(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(i===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);s=U.create(t.doc,o+e.anchorOffset,i+e.headOffset)}t.setSelection(s)}function Fb(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>Fb(n.children)).flat():{...e,children:Fb(e.children)}).flat()}function NP(t,e,n){t.transact(r=>{var o;const s=((o=t.getSelection())==null?void 0:o.blocks)||[t.getTextCursorPosition().block],i=Hq(t);t.removeBlocks(s),t.insertBlocks(Fb(s),e,n),Fq(r,i)})}function OP(t){return!t||t.type!=="columnList"}function LP(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[e.children.length-1],o="after"):(r=e,o="before"):n&&(r=n,o="before"),!r||!o)return;const s=t.getParentBlock(r);return OP(s)?{referenceBlock:r,placement:o}:LP(t,o==="after"?r:t.getPrevBlock(r),s)}function jP(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[0],o="before"):(r=e,o="after"):n&&(r=n,o="after"),!r||!o)return;const s=t.getParentBlock(r);return OP(s)?{referenceBlock:r,placement:o}:jP(t,o==="before"?r:t.getNextBlock(r),s)}function zq(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[0])||t.getTextCursorPosition().block,r=LP(t,t.getPrevBlock(n),t.getParentBlock(n));r&&NP(t,r.referenceBlock,r.placement)})}function Uq(t){t.transact(()=>{const e=t.getSelection(),n=(e==null?void 0:e.blocks[(e==null?void 0:e.blocks.length)-1])||t.getTextCursorPosition().block,r=jP(t,t.getNextBlock(n),t.getParentBlock(n));r&&NP(t,r.referenceBlock,r.placement)})}function Wq(t,e){return function(n,r){const{$from:o,$to:s}=n.selection,i=o.blockRange(s,c=>c.childCount>0&&(c.type.name==="blockGroup"||c.type.name==="column"));if(!i)return!1;const a=i.startIndex;if(a===0)return!1;const l=i.parent.child(a-1);if(l.type!==t)return!1;if(r){const c=l.lastChild&&l.lastChild.type===e,d=R.from(c?t.create():null),u=new j(R.from(t.create(null,R.from(e.create(null,d)))),c?3:1,0),h=i.start,f=i.end;r(n.tr.step(new rt(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}function BP(t){return t.exec((e,n)=>Wq(e.schema.nodes.blockContainer,e.schema.nodes.blockGroup)(e,n))}function Gq(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function qq(t){return t.transact(e=>{const{bnBlock:n}=zp(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function Kq(t){return t.transact(e=>{const{bnBlock:n}=zp(e);return e.doc.resolve(n.beforePos).depth>1})}function Yq(t,e){const n=typeof e=="string"?e:e.id,r=gt(t),o=Mn(n,t);if(o)return Ue(o.node,r)}function Jq(t,e){const n=typeof e=="string"?e:e.id,r=Mn(n,t),o=gt(t);if(!r)return;const s=t.resolve(r.posBeforeNode).nodeBefore;if(s)return Ue(s,o)}function Zq(t,e){const n=typeof e=="string"?e:e.id,r=Mn(n,t),o=gt(t);if(!r)return;const s=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(s)return Ue(s,o)}function Xq(t,e){const n=typeof e=="string"?e:e.id,r=gt(t),o=Mn(n,t);if(!o)return;const s=t.resolve(o.posBeforeNode),i=s.node(),a=s.node(-1),l=a.type.name!=="doc"?i.type.name==="blockGroup"?a:i:void 0;if(l)return Ue(l,r)}function Qq(t,e,n,r={updateSelection:!0}){let{from:o,to:s}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},i=!0,a=!0,l="";if(n.forEach(c=>{c.check(),i&&c.isText&&c.marks.length===0?l+=c.text:i=!1,a=a?c.isBlock:!1}),o===s&&a){const{parent:c}=t.doc.resolve(o);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(o-=1,s+=1)}return i?t.insertText(l,o,s):t.replaceWith(o,s,n),r.updateSelection&&f_(t,t.steps.length-1,-1),!0}function eK(t){const e=gt(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(Do(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(Do(t.doc,t.selection.to).posBeforeNode),o=(c,d)=>{const u=n.posAtIndex(c,d),h=t.doc.resolve(u).nodeAfter;if(!h)throw new Error(`Error getting selection - node not found at position ${u}`);return Ue(h,e)},s=[],i=n.sharedDepth(r.pos),a=n.index(i),l=r.index(i);if(n.depth>i){s.push(Ue(n.nodeAfter,e));for(let c=n.depth;c>i;c--)if(n.node(c).type.isInGroup("childContainer")){const d=n.index(c)+1,u=n.node(c).childCount;for(let h=d;h<u;h++)s.push(o(h,c))}}else s.push(o(a,i));for(let c=a+1;c<=l;c++)s.push(o(c,i));if(s.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:s}}function tK(t,e,n){const r=typeof e=="string"?e:e.id,o=typeof n=="string"?n:n.id,s=gt(t),i=Gd(s);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=Mn(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=Mn(o,t.doc);if(!l)throw new Error(`Block with ID ${o} not found`);const c=Ds(a),d=Ds(l),u=i.blockSchema[c.blockNoteType],h=i.blockSchema[d.blockNoteType];if(!c.isBlockContainer||u.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!d.isBlockContainer||h.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let f,p;if(u.content==="table"){const g=ze.get(c.blockContent.node);f=c.blockContent.beforePos+g.positionAt(0,0,c.blockContent.node)+1+2}else f=c.blockContent.beforePos+1;if(h.content==="table"){const g=ze.get(d.blockContent.node),b=d.blockContent.beforePos+g.positionAt(g.height-1,g.width-1,d.blockContent.node)+1,v=t.doc.resolve(b).nodeAfter.nodeSize;p=b+v-2}else p=d.blockContent.afterPos-1;t.setSelection(U.create(t.doc,f,p))}function nK(t){const e=gt(t);let n=t.selection.$from,r=t.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=t.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=t.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=t.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=t.doc.resolve(n.pos+1);const o=dG(t.doc.slice(n.pos,r.pos,!0),e);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function rK(t){const{bnBlock:e}=zp(t),n=gt(t.doc),r=t.doc.resolve(e.beforePos),o=r.nodeBefore,s=t.doc.resolve(e.afterPos).nodeAfter;let i;return r.depth>1&&(i=r.node(),i.type.isInGroup("bnBlock")||(i=r.node(r.depth-1))),{block:Ue(e.node,n),prevBlock:o===null?void 0:Ue(o,n),nextBlock:s===null?void 0:Ue(s,n),parentBlock:i===void 0?void 0:Ue(i,n)}}function $P(t,e,n="start"){const r=typeof e=="string"?e:e.id,o=gt(t.doc),s=Gd(o),i=Mn(r,t.doc);if(!i)throw new Error(`Block with ID ${r} not found`);const a=Ds(i),l=s.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const c=a.blockContent;if(l==="none"){t.setSelection(q.create(t.doc,c.beforePos));return}if(l==="inline")n==="start"?t.setSelection(U.create(t.doc,c.beforePos+1)):t.setSelection(U.create(t.doc,c.afterPos-1));else if(l==="table")n==="start"?t.setSelection(U.create(t.doc,c.beforePos+4)):t.setSelection(U.create(t.doc,c.afterPos-4));else throw new Wr(l)}else{const c=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;$P(t,c.attrs.id,n)}}let ga;async function pv(){if(ga)return ga;const t=await Promise.all([kt(()=>import("./index-rjhLG1eB.js"),__vite__mapDeps([0,1,2,3,4,5])),kt(()=>import("./index-uAn85tBp.js"),__vite__mapDeps([6,4,2,3,7])),kt(()=>import("./index-CWmy4eKR.js"),__vite__mapDeps([8,3,1,2])),kt(()=>import("./index-CfyObm-o.js"),__vite__mapDeps([9,5,4])),kt(()=>import("./index-yU9Yh-H5.js"),__vite__mapDeps([10,11,12,2,3,7])),kt(()=>import("./index-JH4Gotpn.js"),__vite__mapDeps([13,2,3])),kt(()=>import("./index-FrdabaJ1.js"),__vite__mapDeps([14,2,3])),kt(()=>import("./index-BgBG5lba.js"),__vite__mapDeps([15,2,3])),kt(()=>import("./index-BlSIl150.js"),__vite__mapDeps([16,11,2,3])),kt(()=>import("./index-BGm_t98o.js"),__vite__mapDeps([17,12,2,3,7]))]);return ga={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},ga}function oK(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const o=e.children[r];if(o.type==="element"&&(t(o),o.tagName==="u"))if(o.children.length>0){e.children.splice(r,1,...o.children);const s=o.children.length-1;n+=s,r+=s}else e.children.splice(r,1),n--,r--}};return t}function sK(){const t=ga;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const s=n.children[o],i=o+1<n.children.length?n.children[o+1]:void 0;s.type==="element"&&s.tagName==="input"&&((r=s.properties)==null?void 0:r.type)==="checkbox"&&(i==null?void 0:i.type)==="element"&&i.tagName==="p"?(i.tagName="span",i.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(s)}};return e}function mv(t){const e=ga;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(oK).use(sK).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(t).value}async function iK(t,e,n,r){await pv();const o=Gp(e,n).exportBlocks(t,r);return mv(o)}function aK(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function lK(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function cK(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=aK(e),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(s=>{s.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(s=>{if(lK(s))return;const i=document.createElement("li");i.append(s),e.insertAdjacentElement("afterend",i)}),r.childNodes.length===0&&r.remove()})}function dK(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const o=e.previousElementSibling,s=document.createElement("div");o.insertAdjacentElement("afterend",s),s.append(o);const i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),s.append(i);((n=s.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=s.nextElementSibling)==null?void 0:r.nodeName)==="OL";)i.append(s.nextElementSibling)})}let wS=null;function uK(){return wS||(wS=document.implementation.createHTMLDocument("title"))}function VP(t){if(typeof t=="string"){const e=uK().createElement("div");e.innerHTML=t,t=e}return cK(t),dK(t),t}async function HP(t,e){const n=VP(t),r=Eo.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),o=[];for(let s=0;s<r.childCount;s++)o.push(Ue(r.child(s),e));return o}function hK(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}async function FP(t){const e=await pv();return e.unified.unified().use(e.remarkParse.default).use(e.remarkGfm.default).use(e.remarkRehype.default,{handlers:{...e.remarkRehype.defaultHandlers,code:hK}}).use(e.rehypeStringify.default).processSync(t).value}async function fK(t,e){const n=await FP(t);return HP(n,e)}const gv=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function pK(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function mK(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function xS(t,e,n){let r;return Array.isArray(e.content)&&e.content.length===0?r=t.updateBlock(e,n).id:r=t.insertBlocks([n],e,"after")[0].id,r}async function zP(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let o=null;for(const a of gv)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const s=r.items;if(!s)return;t.preventDefault();const i=Object.values(e.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<s.length;a++){let l="file";for(const d of i)for(const u of d.fileBlockAccept||[]){const h=u.startsWith("."),f=s[a].getAsFile();if(f&&(!h&&f.type&&mK(s[a].type,u)||h&&pK("."+f.name.split(".").pop(),u))){l=d.type;break}}const c=s[a].getAsFile();if(c){const d={type:l,props:{name:c.name}};let u;if(t.type==="paste"){const p=e.getTextCursorPosition().block;u=xS(e,p,d)}else if(t.type==="drop"){const p={left:t.clientX,top:t.clientY},g=(n=e.prosemirrorView)==null?void 0:n.posAtCoords(p);if(!g)return;u=e.transact(b=>{const v=Do(b.doc,g.pos);return xS(e,e.getBlock(v.node.attrs.id),d)})}else return;const h=await e.uploadFile(c,u),f=typeof h=="string"?{props:{url:h}}:{...h};e.updateBlock(u,f)}}}const gK=t=>Ne.create({name:"dropFile",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const o of gv)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(zP(n,t),!0):!1}}}})]}}),yK=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,bK=new RegExp("(?:\\s|^)(_|__|\\*|\\*\\*|~~|==|\\+\\+)(?!\\s).{1,64}(?<!\\s)(?=\\1)"),vK=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,wK=new RegExp("(?:\\s|^)`(?!\\s)[^`]{1,48}(?<!\\s)`([^\\w]|$)"),xK=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,kK=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,CK=/\n{2} {0,3}-{2,48}\n{2}/,SK=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,TK=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,EK=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,MK=/^\s*\|(.+\|)+\s*$/m,AK=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,_K=/^\s*\|(.+\|)+\s*$/m,RK=t=>yK.test(t)||bK.test(t)||vK.test(t)||wK.test(t)||xK.test(t)||kK.test(t)||CK.test(t)||SK.test(t)||TK.test(t)||EK.test(t)||MK.test(t)||AK.test(t)||_K.test(t);async function PK(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const o=t.clipboardData.getData("vscode-editor-data"),s=o?JSON.parse(o):void 0,i=s==null?void 0:s.mode;return i?(e.pasteHTML(`<pre><code class="language-${i}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function IK({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(e.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(a)return e.pasteText(a),!0}let s;for(const a of gv)if(t.clipboardData.types.includes(a)){s=a;break}if(!s)return!0;if(s==="vscode-editor-data")return PK(t,e.prosemirrorView),!0;if(s==="Files")return zP(t,e),!0;const i=t.clipboardData.getData(s);if(s==="blocknote/html")return e.pasteHTML(i,!0),!0;if(s==="text/markdown")return e.pasteMarkdown(i),!0;if(n){const a=t.clipboardData.getData("text/plain");if(RK(a))return e.pasteMarkdown(a),!0}return s==="text/html"?(e.pasteHTML(i),!0):r?(e.pasteMarkdown(i),!0):(e.pasteText(i),!0)}const DK=(t,e)=>Ne.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:s=!0}={})=>IK({event:r,editor:t,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:s})})}}}})]}});function UP(t){const e=[];return t.descendants(n=>{var r,o;const s=gt(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(i=>{e.push(Ue(i,s))}),!1):n.type.isInGroup("bnBlock")?(e.push(Ue(n,s)),!1):!0}),e}function NK(t,e,n){var r;let o=!1;const s=t.state.selection instanceof Re;if(!s){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,c=[];for(let d=0;d<l.childCount;d++)c.push(l.child(d));o=c.find(d=>d.type.isInGroup("bnBlock")||d.type.name==="blockGroup"||d.type.spec.group==="blockContent")===void 0,o&&(e=l)}let i;const a=Gp(t.state.schema,n);if(s){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=iP(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=Up(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=a.exportInlineContent(l,{})}else{const l=UP(e);i=a.exportBlocks(l,{})}return i}function WP(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(i=>i.setSelection(new q(i.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,o=NK(t,r,e),s=mv(o);return{clipboardHTML:n,externalHTML:o,markdown:s}}const kS=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},CS=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=WP(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",s)},OK=t=>Ne.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new me({props:{handleDOMEvents:{copy(e,n){return kS()||CS(t,e,n),!0},cut(e,n){return kS()||(CS(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(i=>i.setSelection(new q(i.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=WP(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",s),!0}}}})]}}),LK=Ne.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:at.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):at.backgroundColor.default,renderHTML:t=>t.backgroundColor===at.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});let yv=class{constructor(){A(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(o=>o.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}},At=class extends yv{constructor(...e){super(),A(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}};const GP=class qP extends At{constructor(e){super(),A(this,"provider"),A(this,"recentlyUpdatedCursors"),A(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const s=(this.collaboration.renderCursor??qP.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(s.addEventListener("mouseenter",()=>{const i=this.recentlyUpdatedCursors.get(r);i.element.setAttribute("data-active",""),i.hideTimeout&&(clearTimeout(i.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:void 0}))}),s.addEventListener("mouseleave",()=>{const i=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:i.element,hideTimeout:setTimeout(()=>{i.element.removeAttribute("data-active")},2e3)})})),o={element:s,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),A(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=e,this.provider=e.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",e.user),e.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(GW(this.provider.awareness,{selectionBuilder:QR,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}};A(GP,"defaultCursorRender",t=>{const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode("⁠"),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode("⁠"),null),e});let KP=GP,zb=class extends At{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(RW(e))}get priority(){return 1001}},Ub=class extends At{static key(){return"yUndoPlugin"}constructor(){super(),this.addProsemirrorPlugin(QW())}get priority(){return 1e3}};const YP=Mt.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",Tn(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});class jK extends yv{constructor(e){super(),A(this,"userCache",new Map),A(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const Vu=new Te("blocknote-comments"),BK="SET_SELECTED_THREAD_ID";function $K(t,e){const n=new Map;return t.descendants((r,o)=>{r.marks.forEach(s=>{if(s.type.name===e){const i=s.attrs.threadId;if(!i)return;const a=o,l=a+r.nodeSize,c=n.get(i)??{from:1/0,to:0};n.set(i,{from:Math.min(a,c.from),to:Math.max(l,c.to)})}})}),n}class VK extends At{constructor(e,n,r){if(super(),A(this,"userStore"),A(this,"pendingComment",!1),A(this,"selectedThreadId"),A(this,"threadPositions",new Map),A(this,"updateMarksFromThreads",s=>{this.editor.transact(i=>{i.doc.descendants((a,l)=>{a.marks.forEach(c=>{if(c.type.name===this.markType){const d=c.type,u=c.attrs.threadId,h=s.get(u),f=!!(!h||h.resolved||h.deletedAt);if(f!==c.attrs.orphan){const p=Math.max(l,0),g=Math.min(l+a.nodeSize,i.doc.content.size-1,i.doc.content.size-1);i.removeMark(p,g,c),i.addMark(p,g,d.create({...c.attrs,orphan:f})),f&&this.selectedThreadId===u&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=n,this.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new jK(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new me({key:Vu,state:{init(){return{decorations:be.empty}},apply(s,i){const a=s.getMeta(Vu);if(!s.docChanged&&!a)return i;const l=s.docChanged?$K(s.doc,o.markType):o.threadPositions;(l.size>0||o.threadPositions.size>0)&&(o.threadPositions=l,o.emitStateUpdate());const c=[];if(o.selectedThreadId){const d=l.get(o.selectedThreadId);d&&c.push(_e.inline(d.from,d.to,{class:"bn-thread-mark-selected"}))}return{decorations:be.create(s.doc,c)}}},props:{decorations(s){var i;return((i=Vu.getState(s))==null?void 0:i.decorations)??be.empty},handleClick:(s,i,a)=>{if(a.button!==0)return;const l=s.state.doc.nodeAt(i);if(!l){o.selectThread(void 0);return}const c=l.marks.find(u=>u.type.name===r&&u.attrs.orphan!==!0),d=c==null?void 0:c.attrs.threadId;o.selectThread(d,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e,n=!0){var r,o;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(s=>s.setMeta(Vu,{name:BK})),e&&n)){const s=this.threadPositions.get(e);if(!s)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(s.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const n=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,s=Ee.getState(r.state),i={prosemirror:{head:o.head,anchor:o.anchor},yjs:s?Of(s.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:i})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class HK{constructor(e,n,r,o){A(this,"state"),A(this,"emitUpdate"),A(this,"mouseDownHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"dragstartHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var s;if((s=this.state)!=null&&s.show){const i=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!i)return;this.state.referencePos=i.getBoundingClientRect(),this.emitUpdate()}}),A(this,"closeMenu",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const s=this.pluginKey.getState(e.state),i=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&s!=null&&s.block&&this.editor.isEditable){const c=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${s.block.id}"]`);if(!c)return;this.state={show:!0,referencePos:c.getBoundingClientRect(),block:s.block},this.emitUpdate();return}const a=(s==null?void 0:s.block)&&!(i!=null&&i.block),l=!(s!=null&&s.block)&&(i==null?void 0:i.block);a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const Og=new Te("FilePanelPlugin");class FK extends At{constructor(e){super(),A(this,"view"),A(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new me({key:Og,view:n=>(this.view=new HK(e,Og,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(Og)||(!n.getMeta(Ee)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}class zK{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"preventHide",!1),A(this,"preventShow",!1),A(this,"shouldShow",({view:o,state:s,from:i,to:a})=>{const{doc:l,selection:c}=s,{empty:d}=c,u=!l.textBetween(i,a).length&&_p(s.selection);if(c.$from.parent.type.spec.code||sb(c)&&c.node.type.spec.code||d||u)return!1;const h=document.activeElement;return!(!this.isElementWithinEditorWrapper(h)&&o.editable)}),A(this,"blurHandler",o=>{var s;if(this.preventHide){this.preventHide=!1;return}const i=this.pmView.dom.parentElement;o&&o.relatedTarget&&(i===o.relatedTarget||i.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const s=this.pmView.dom.parentElement;return s?s.contains(o):!1}),A(this,"viewMousedownHandler",o=>{this.isElementWithinEditorWrapper(o.target)||(this.preventShow=!0)}),A(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),A(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),A(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o,s;const{state:i,composing:a}=e,{doc:l,selection:c}=i,d=n&&n.doc.eq(l)&&n.selection.eq(c);if(a||d)return;const{ranges:u}=c,h=Math.min(...u.map(b=>b.$from.pos)),f=Math.max(...u.map(b=>b.$to.pos)),p=this.shouldShow({view:e,state:i,from:h,to:f}),g=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(p||this.preventHide)&&!g){const b={show:!0,referencePos:this.getSelectionBoundingBox()};(b.show!==((r=this.state)==null?void 0:r.show)||b.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=b,this.emitUpdate());return}if((s=this.state)!=null&&s.show&&!this.preventHide&&(!p||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:n}=e,{ranges:r}=n,o=Math.min(...r.map(i=>i.$from.pos)),s=Math.max(...r.map(i=>i.$to.pos));if(sb(n)){const i=this.pmView.nodeDOM(o);if(i)return i.getBoundingClientRect()}return Jh(this.pmView,o,s)}}const UK=new Te("FormattingToolbarPlugin");class WK extends At{constructor(e){super(),A(this,"view"),A(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new me({key:UK,view:n=>(this.view=new zK(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}const GK=Qr.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Tn(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),SS=(t,e)=>{const n=t.resolve(e);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return Wd(t.resolve(r))},kh=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return Wd(t.resolve(o))},JP=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=Wd(t.resolve(r))}return e},qK=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",KK=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=t.doc.resolve(r.childContainer.beforePos+1),s=t.doc.resolve(r.childContainer.afterPos-1),i=o.blockRange(s);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(i,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},TS=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),o=Wd(r),s=kh(e.doc,o.bnBlock.beforePos);if(!s)return!1;const i=JP(e.doc,s);return qK(i,o)?KK(e,n,i,o):!1},YK=Ne.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;const a=s.selection.from===i.blockContent.beforePos+1,l=i.blockContent.node.type.name==="paragraph";return a&&!l?o.command(Tt(i.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;const{blockContent:a}=i;return s.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=i,c=s.selection.from===l.beforePos+1,d=s.selection.empty,u=a.beforePos;return c&&d?r().command(TS(u)).scrollIntoView().run():!1}),()=>o.command(({state:s,dispatch:i})=>{const a=Le(s);if(!a.isBlockContainer||s.selection.from!==a.blockContent.beforePos+1||kh(s.doc,a.bnBlock.beforePos))return!1;const l=SS(s.doc,a.bnBlock.beforePos);if((l==null?void 0:l.blockNoteType)!=="column")return!1;const c=l,d=SS(s.doc,c.bnBlock.beforePos);if((d==null?void 0:d.blockNoteType)!=="columnList")throw new Error("parent of column is not a column list");const u=c.childContainer.node.childCount===1,h=u&&d.childContainer.node.childCount===2,f=d.childContainer.node.firstChild===c.bnBlock.node;if(i){const p=s.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(h)if(f){s.tr.step(new rt(d.bnBlock.beforePos,d.bnBlock.afterPos,c.bnBlock.afterPos+1,d.bnBlock.afterPos-2,p,p.size,!1));const g=s.tr.doc.resolve(c.bnBlock.beforePos);s.tr.setSelection(U.between(g,g))}else{s.tr.step(new rt(d.bnBlock.beforePos,d.bnBlock.afterPos,d.bnBlock.beforePos+2,c.bnBlock.beforePos-1,p,0,!1));const g=s.tr.doc.resolve(s.tr.mapping.map(c.bnBlock.beforePos-1));s.tr.setSelection(U.between(g,g))}else if(u)if(f){s.tr.delete(c.bnBlock.beforePos,c.bnBlock.afterPos),s.tr.insert(d.bnBlock.beforePos,p.content);const g=s.tr.doc.resolve(d.bnBlock.beforePos);s.tr.setSelection(U.between(g,g))}else s.tr.delete(c.bnBlock.beforePos-1,c.bnBlock.beforePos+1);else{s.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),f?s.tr.insert(d.bnBlock.beforePos-1,p.content):s.tr.insert(c.bnBlock.beforePos-1,p.content);const g=s.tr.doc.resolve(c.bnBlock.beforePos-1);s.tr.setSelection(U.between(g,g))}}return!0}),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;if(i.blockContent.node.childCount===0&&i.blockContent.node.type.spec.content==="inline*"){const a=kh(s.doc,i.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const c=i.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(c)}else if(a.blockContent.node.type.spec.content===""){const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(c)}else{const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(c)}return l.deleteRange({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)throw new Error("todo");const a=s.selection.from===i.blockContent.beforePos+1,l=s.selection.empty,c=kh(s.doc,i.bnBlock.beforePos);if(c&&a&&l){const d=JP(s.doc,c);if(!d.isBlockContainer)throw new Error("todo");if(d.blockContent.node.type.spec.content===""||d.blockContent.node.type.spec.content==="inline*"&&d.blockContent.node.childCount===0)return r().cut({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos},d.bnBlock.afterPos).deleteRange({from:d.bnBlock.beforePos,to:d.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const s=Le(o);if(!s.isBlockContainer)return!1;const{bnBlock:i,blockContent:a,childContainer:l}=s,{depth:c}=o.doc.resolve(i.beforePos),d=i.afterPos===o.doc.nodeSize-3,u=o.selection.from===a.afterPos-1,h=o.selection.empty;if(!d&&u&&h&&l===void 0){let f=c,p=i.afterPos+1,g=o.doc.resolve(p).depth;for(;g<f;)f=g,p+=2,g=o.doc.resolve(p).depth;return r.command(TS(p-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o})=>[()=>o.command(({state:s})=>{const i=Le(s);if(!i.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=i,{depth:c}=s.doc.resolve(a.beforePos),d=s.selection.$anchor.parentOffset===0,u=s.selection.anchor===s.selection.head,h=l.node.childCount===0,f=c>1;return d&&u&&h&&f?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const i=Le(s),a=this.options.editor.schema.blockSchema[i.blockNoteType].hardBreakShortcut??"shift+enter";return a==="none"?!1:a==="shift+enter"&&r||a==="enter"?o.insertContent({type:"hardBreak"}):!1}),()=>o.command(({state:s,dispatch:i})=>{const a=Le(s);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=a,d=s.selection.$anchor.parentOffset===0,u=s.selection.anchor===s.selection.head,h=c.node.childCount===0;if(d&&u&&h){const f=l.afterPos,p=f+2;if(i){const g=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(f,g).scrollIntoView(),s.tr.setSelection(new U(s.doc.resolve(p)))}return!0}return!1}),()=>o.command(({state:s,chain:i})=>{const a=Le(s);if(!a.isBlockContainer)return!1;const{blockContent:l}=a,c=s.selection.$anchor.parentOffset===0;return l.node.childCount===0?!1:(i().deleteSelection().command(MP(s.selection.from,c,c)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(s=this.options.editor.filePanel)!=null&&s.shown)?!1:BP(this.options.editor)},"Shift-Tab":()=>{var r,o,s;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(s=this.options.editor.filePanel)!=null&&s.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class JK{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"menuUpdateTimer"),A(this,"startMenuUpdateTimer"),A(this,"stopMenuUpdateTimer"),A(this,"mouseHoveredLinkMark"),A(this,"mouseHoveredLinkMarkRange"),A(this,"keyboardHoveredLinkMark"),A(this,"keyboardHoveredLinkMarkRange"),A(this,"linkMark"),A(this,"linkMarkRange"),A(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const s=o.target,i=this.pmView.posAtDOM(s,0)+1,a=this.pmView.state.doc.resolve(i),l=a.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=c,this.mouseHoveredLinkMarkRange=zc(a,c.type,c.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),A(this,"clickHandler",o=>{var s;const i=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(i===o.target||i.contains(o.target))&&(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),A(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=Jh(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),A(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,n){var r;this.editor.transact(o=>{const s=gt(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,s.mark("link",{href:e}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,n,r=!1){var o;const{state:s}=e;if(n&&n.selection.from===s.selection.from&&n.selection.to===s.selection.to||!this.pmView.hasFocus())return;const i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const l of a)if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=zc(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:Jh(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&i&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const ZK=new Te("LinkToolbarPlugin");class XK extends At{constructor(e){super(),A(this,"view"),A(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),A(this,"deleteLink",()=>{this.view.deleteLink()}),A(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),A(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),A(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new me({key:ZK,view:n=>(this.view=new JK(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const ZP=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],XP="https",QK=new Te("node-selection-keyboard");class eY extends At{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new me({key:QK,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=e.state.tr;return e.dispatch(r.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new U(r.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const tY=new Te("blocknote-placeholder");class nY extends At{static key(){return"placeholder"}constructor(e,n){super(),this.addProsemirrorPlugin(new me({key:tY,view:r=>{var o,s;const i=`placeholder-selector-${T_()}`;r.dom.classList.add(i);const a=document.createElement("style"),l=e._tiptapEditor.options.injectNonce;l&&a.setAttribute("nonce",l),((o=e.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):(s=e.prosemirrorView)==null||s.root.head.appendChild(a);const c=a.sheet,d=(u="")=>`.${i} .bn-block-content${u} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:u,emptyDocument:h,...f}=n;for(const[b,v]of Object.entries(f)){const x=`[data-content-type="${b}"]`;c.insertRule(`${d(x)} { content: ${JSON.stringify(v)}; }`)}c.insertRule(`${d("[data-is-only-empty-block]")} { content: ${JSON.stringify(h)}; }`),c.insertRule(`${d("[data-is-empty-and-focused]")} { content: ${JSON.stringify(u)}; }`)}catch(u){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",u)}return{destroy:()=>{var u,h;((u=e.prosemirrorView)==null?void 0:u.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):(h=e.prosemirrorView)==null||h.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:s}=r;if(!e.isEditable||!s.empty||s.$from.parent.type.spec.code)return;const i=[];r.doc.content.size===6&&i.push(_e.node(2,4,{"data-is-only-empty-block":"true"}));const a=s.$anchor,l=a.parent;if(l.content.size===0){const c=a.before();i.push(_e.node(c,c+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return be.create(o,i)}}}))}}const ES=new Te("previous-blocks"),rY={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class oY extends At{static key(){return"previousBlockType"}constructor(){super();let e;this.addProsemirrorPlugin(new me({key:ES,view(n){return{update:async(r,o)=>{var s;((s=this.key)==null?void 0:s.getState(r.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(ES,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,s){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(s.doc))return r;const i={},a=lC(o.doc,d=>d.attrs.id),l=new Map(a.map(d=>[d.node.attrs.id,d])),c=lC(s.doc,d=>d.attrs.id);for(const d of c){const u=l.get(d.node.attrs.id),h=u==null?void 0:u.node.firstChild,f=d.node.firstChild;if(u&&h&&f){const p={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:s.doc.resolve(d.pos).depth};let g={index:h.attrs.index,level:h.attrs.level,type:h.type.name,depth:o.doc.resolve(u.pos).depth};i[d.node.attrs.id]=g,n.getMeta("numberedListIndexing")&&(d.node.attrs.id in r.prevTransactionOldBlockAttrs&&(g=r.prevTransactionOldBlockAttrs[d.node.attrs.id]),p.type==="numberedListItem"&&(g.index=p.index)),r.currentTransactionOldBlockAttrs[d.node.attrs.id]=g,JSON.stringify(g)!==JSON.stringify(p)&&(g["depth-change"]=g.depth-p.depth,r.updatedBlocks.add(d.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=i,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((s,i)=>{if(!s.attrs.id||!r.updatedBlocks.has(s.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[s.attrs.id],l={};for(const[d,u]of Object.entries(a))l["data-prev-"+rY[d]]=u||"none";const c=_e.node(i,i+s.nodeSize,{...l});o.push(c)}),be.create(n.doc,o)}}}))}}const MS=new Te("blocknote-show-selection");class sY extends At{constructor(e){super(),A(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new me({key:MS,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return be.empty;const s=_e.inline(o.from,o.to,{"data-show-selection":"true"});return be.create(r,[s])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(n=>n.setMeta(MS,{})))}getEnabled(){return this.enabled}}function QP(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}class ki extends ee{constructor(e,n){super(e,n),A(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(o,s,i)=>{if(i!==null&&i.eq(r))return this.nodes.push(o),!1})}static create(e,n,r=n){return new ki(e.resolve(n),e.resolve(r))}content(){return new j(R.from(this.nodes),0,0)}eq(e){if(!(e instanceof ki)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?ee.near(e.resolve(r.pos)):r.deleted?ee.near(e.resolve(o.pos)):new ki(e.resolve(r.pos),e.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}}ee.jsonID("multiple-node",ki);let or;function iY(t,e){let n,r;const o=e.resolve(t.from).node().type.spec.group==="blockContent",s=e.resolve(t.to).node().type.spec.group==="blockContent",i=Math.min(t.$anchor.depth,t.$head.depth);if(o&&s){const a=t.$from.start(i-1),l=t.$to.end(i-1);n=e.resolve(a-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function AS(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),o=t.domAtPos(e).node,s=(d,u)=>Array.prototype.indexOf.call(d.children,u),i=s(o,t.domAtPos(e+1).node.parentElement),a=s(o,t.domAtPos(n-1).node.parentElement);for(let d=o.childElementCount-1;d>=0;d--)(d>a||d<i)&&r.removeChild(r.children[d]);eI(t.root),or=r;const l=or.getElementsByTagName("iframe");for(let d=0;d<l.length;d++){const u=l[d],h=u.parentElement;h&&h.removeChild(u)}const c=t.dom.className.split(" ").filter(d=>d!=="ProseMirror"&&d!=="bn-root"&&d!=="bn-editor").join(" ");or.className=or.className+" bn-drag-preview "+c,t.root instanceof ShadowRoot?t.root.appendChild(or):t.root.body.appendChild(or)}function eI(t){or!==void 0&&(t instanceof ShadowRoot?t.removeChild(or):t.body.removeChild(or),or=void 0)}function aY(t,e,n){if(!t.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=Mn(e.id,r.state.doc);if(!o)throw new Error(`Block with ID ${e.id} not found`);const s=o.posBeforeNode;if(s!=null){const i=r.state.selection,a=r.state.doc,{from:l,to:c}=iY(i,a),d=l<=s&&s<c,u=i.$anchor.node()!==i.$head.node()||i instanceof ki;d&&u?(r.dispatch(r.state.tr.setSelection(ki.create(a,l,c))),AS(r,l,c)):(r.dispatch(r.state.tr.setSelection(q.create(r.state.doc,s))),AS(r,s));const h=r.state.selection.content(),f=n.pmSchema,p=r.serializeForClipboard(h).dom.innerHTML,g=Gp(f,n),b=UP(h.content),v=g.exportBlocks(b,{}),x=mv(v);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",p),t.dataTransfer.setData("text/html",v),t.dataTransfer.setData("text/plain",x),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(or,0,0)}}const jl=.1;function Wb(t,e,n,r=!0){const o=t.root.elementsFromPoint(e.left+(n==="editor"?50:0),e.top);for(const s of o)if(t.dom.contains(s))return r&&s.closest("[data-node-type=columnList]")?Wb(t,{left:e.left+50,top:e.top},n,!1):QP(s,t)}function lY(t,e,n){if(!e.dom.firstChild)return;const r=e.dom.firstChild.getBoundingClientRect(),o={left:t.x,top:t.y},s=o.left<r.left,i=o.left>r.right;n==="viewport"&&(s&&(o.left=r.left+10),i&&(o.left=r.right-10));let a=Wb(e,o,n);if(!i&&a){const l=a.node.getBoundingClientRect();o.left=l.right-10,a=Wb(e,o,"viewport",!1)}return a}class cY{constructor(e,n,r,o){A(this,"state"),A(this,"emitUpdate"),A(this,"mousePos"),A(this,"hoveredBlock"),A(this,"menuFrozen",!1),A(this,"isDragOrigin",!1),A(this,"updateState",s=>{this.state=s,this.emitUpdate(this.state)}),A(this,"updateStateFromMousePos",()=>{var s,i,a,l;if(this.menuFrozen||!this.mousePos)return;const c=lY(this.mousePos,this.pmView,this.sideMenuDetection);if(!c||!this.editor.isEditable){(s=this.state)!=null&&s.show&&(this.state.show=!1,this.updateState(this.state));return}if((i=this.state)!=null&&i.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===c.id)return;this.hoveredBlock=c.node;const d=c.node.firstChild;if(d&&this.editor.isEditable){const u=d.getBoundingClientRect(),h=c.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(h?h.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,u.y,u.width,u.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),A(this,"onDrop",s=>{var i,a;if(this.pmView.dragging===null)return;this.editor._tiptapEditor.commands.blur();const l=s.target instanceof Node&&((i=s.target instanceof HTMLElement?s.target:s.target.parentElement)==null?void 0:i.closest(".bn-editor"))||null;if(l&&(!this.isDragOrigin&&this.pmView.dom===l?this.pmView.dispatch(this.pmView.state.tr.setSelection(U.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.to))):this.isDragOrigin&&this.pmView.dom!==l&&setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0)),this.sideMenuDetection==="editor"||s.synthetic||!((a=s.dataTransfer)!=null&&a.types.includes("blocknote/html")))return;const c=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!c||c.inside===-1){const d=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(d)}}),A(this,"onDragEnd",()=>{this.pmView.dragging=null}),A(this,"onDragStart",s=>{var i;const a=(i=s.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!a)return;if(this.pmView.dragging)throw new Error("New drag was started while an existing drag is ongoing");const l=document.createElement("div");l.innerHTML=a;const c=Eo.fromSchema(this.pmView.state.schema).parse(l,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new j(c.content,0,0),move:!0}}),A(this,"onDragOver",s=>{var i;if(this.sideMenuDetection==="editor"||s.synthetic||!((i=s.dataTransfer)!=null&&i.types.includes("blocknote/html")))return;const a=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!a||a.inside===-1&&this.pmView.dom.firstChild){const l=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(l)}}),A(this,"onKeyDown",s=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),A(this,"onMouseMove",s=>{var i;if(this.menuFrozen)return;this.mousePos={x:s.clientX,y:s.clientY};const a=this.pmView.dom.getBoundingClientRect(),l=this.mousePos.x>a.left&&this.mousePos.x<a.right&&this.mousePos.y>a.top&&this.mousePos.y<a.bottom,c=this.pmView.dom.parentElement;if(l&&s&&s.target&&!(c===s.target||c.contains(s.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),A(this,"onScroll",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state))}),this.editor=e,this.sideMenuDetection=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");o(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),pv(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}createSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();return n.clientX=e.clientX,n.clientY=e.clientY,e.clientX<r.left&&e.clientX>r.left-r.width*jl?n.clientX=r.left+r.width*jl/2:e.clientX>r.right&&e.clientX<r.right+r.width*jl?n.clientX=r.right-r.width*jl/2:(e.clientX<r.left||e.clientX>r.right)&&(n.clientX=r.left+jl*r.width*2),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,n}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const dY=new Te("SideMenuPlugin");class uY extends At{constructor(e,n){super(),A(this,"view"),A(this,"blockDragStart",(r,o)=>{this.view&&(this.view.isDragOrigin=!0),aY(r,o,this.editor)}),A(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&eI(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),A(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),A(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new me({key:dY,view:r=>(this.view=new cY(e,n,r,o=>{this.emit("update",o)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const Hu=new Map;function hY(t){if(Hu.has(t))return Hu.get(t);const e=new Na;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{Hu.delete(t)}),Hu.set(t,e),e}function fY(t,e,n="left"){const r=Ee.getState(t._tiptapEditor.state);if(!r){const s=hY(t),i=s.maps.length;return()=>s.slice(i).map(e,n==="left"?-1:1)}const o=od(e+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const s=Ee.getState(t._tiptapEditor.state),i=xi(s.doc,s.binding.type,o,s.binding.mapping);if(i===null)throw new Error("Position not found, cannot track positions");return i+(n==="right"?-1:0)}}const pY=Ip(t=>t.type.name==="blockContainer");class mY{constructor(e,n){A(this,"state"),A(this,"emitUpdate"),A(this,"rootEl"),A(this,"pluginState"),A(this,"handleScroll",()=>{var s,i;if((s=this.state)!=null&&s.show){const a=(i=this.rootEl)==null?void 0:i.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),A(this,"closeMenu",()=>{this.editor.transact(s=>s.setMeta(_a,null))}),A(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(s=>s.selection.from)}).run()});var r,o;this.editor=e,this.pluginState=void 0,this.emitUpdate=s=>{var i;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(s,{...this.state,ignoreQueryLength:(i=this.pluginState)==null?void 0:i.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const o=_a.getState(n),s=_a.getState(e.state),i=o===void 0&&s!==void 0,a=o!==void 0&&s===void 0;if(!i&&!(o!==void 0&&s!==void 0)&&!a)return;if(this.pluginState=a?o:s,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const _a=new Te("SuggestionMenuPlugin");class gY extends At{constructor(e){super(),A(this,"view"),A(this,"triggerCharacters",[]),A(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),A(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),A(this,"closeMenu",()=>this.view.closeMenu()),A(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new me({key:_a,view:()=>(this.view=new mY(e,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,s,i)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(_a);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const c=fY(e,i.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>c()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a==null?void 0:a.ignoreQueryLength}}if(o===void 0)return o;if(i.selection.from!==i.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&i.selection.from<o.queryStartPos()||!i.selection.$from.sameParent(i.doc.resolve(o.queryStartPos())))return;const l={...o};return l.query=i.doc.textBetween(o.queryStartPos(),i.selection.from),l}},props:{handleTextInput(r,o,s,i){return n.includes(i)?(r.dispatch(r.state.tr.insertText(i)),r.dispatch(r.state.tr.setMeta(_a,{triggerCharacter:i}).scrollIntoView()),!0):!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const s=pY(r.selection);if(s)return be.create(r.doc,[_e.node(s.pos,s.pos+s.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return be.create(r.doc,[_e.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,n){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,n)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const yY=Mt.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),bY=Mt.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),vY=Mt.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}});let on;function _S(t){on||(on=document.createElement("div"),on.innerHTML="_",on.style.opacity="0",on.style.height="1px",on.style.width="1px",t instanceof Document?t.body.appendChild(on):t.appendChild(on))}function wY(t){on&&(t instanceof Document?t.body.removeChild(on):t.removeChild(on),on=void 0)}function Fu(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function xY(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function kY(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class CY{constructor(e,n,r){A(this,"state"),A(this,"emitUpdate"),A(this,"tableId"),A(this,"tablePos"),A(this,"tableElement"),A(this,"menuFrozen",!1),A(this,"mouseState","up"),A(this,"prevWasEditable",null),A(this,"viewMousedownHandler",()=>{this.mouseState="down"}),A(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),A(this,"mouseMoveHandler",o=>{var s,i,a,l,c,d,u;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const h=xY(o.target);if((h==null?void 0:h.type)==="cell"&&this.mouseState==="down"&&!((s=this.state)!=null&&s.draggingState)){this.mouseState="selecting",(i=this.state)!=null&&i.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!h||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!h.tbodyNode)return;const f=h.tbodyNode.getBoundingClientRect(),p=QP(h.domNode,this.pmView);if(!p)return;this.tableElement=p.node;let g;const b=this.editor.transact(w=>Mn(p.id,w.doc));if(!b)throw new Error(`Block with ID ${p.id} not found`);const v=Ue(b.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(Pq("table",v,this.editor)&&(this.tablePos=b.posBeforeNode+1,g=v),!g)return;this.tableId=p.id;const x=(l=h.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if((h==null?void 0:h.type)==="wrapper"){const w=o.clientY>=f.bottom-1&&o.clientY<f.bottom+20,k=o.clientX>=f.right-1&&o.clientX<f.right+20,C=o.clientX>f.right||o.clientY>f.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:w,showAddOrRemoveColumnsButton:k,referencePosTable:f,block:g,widgetContainer:x,colIndex:C||(c=this.state)==null?void 0:c.colIndex,rowIndex:C||(d=this.state)==null?void 0:d.rowIndex,referencePosCell:C||(u=this.state)==null?void 0:u.referencePosCell}}else{const w=Fu(h.domNode),k=Fu(h.domNode.parentElement),C=h.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===p.id&&this.state.rowIndex===k&&this.state.colIndex===w)return;this.state={show:!0,showAddOrRemoveColumnsButton:w===g.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:k===g.content.rows.length-1,referencePosTable:f,block:g,draggingState:void 0,referencePosCell:C,colIndex:w,rowIndex:k,widgetContainer:x}}return this.emitUpdate(),!1}),A(this,"dragOverHandler",o=>{var s;if(((s=this.state)==null?void 0:s.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",kY(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const i={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(i.left,i.top).filter(g=>g.tagName==="TD"||g.tagName==="TH");if(a.length===0)return;const l=a[0];let c=!1;const d=Fu(l.parentElement),u=Fu(l),h=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,f=(this.state.draggingState.draggedCellOrientation==="row"?d:u)!==h;(this.state.rowIndex!==d||this.state.colIndex!==u)&&(this.state.rowIndex=d,this.state.colIndex=u,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const p=this.state.draggingState.draggedCellOrientation==="row"?i.top:i.left;this.state.draggingState.mousePos!==p&&(this.state.draggingState.mousePos=p,c=!0),c&&this.emitUpdate(),f&&this.editor.transact(g=>g.setMeta(nc,!0))}),A(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:s,colIndex:i,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(s.draggedCellOrientation==="row"){if(!dP(this.state.block,s.originalIndex,a))return!1;const c=fG(this.state.block,s.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:c}})}else{if(!uP(this.state.block,s.originalIndex,i))return!1;const c=hG(this.state.block,s.originalIndex,i),[d]=l.splice(s.originalIndex,1);l.splice(i,0,d),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:c}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=sv(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const s=o.children[this.state.rowIndex].children[this.state.colIndex];s?this.state.referencePosCell=s.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const nc=new Te("TableHandlesPlugin");class SY extends At{constructor(e){super(),A(this,"view"),A(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(nc,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");_S(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(on,0,0),n.dataTransfer.effectAllowed="move"}),A(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(nc,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");_S(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(on,0,0),n.dataTransfer.effectAllowed="copyMove"}),A(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(nc,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");wY(this.editor.prosemirrorView.root)}),A(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),A(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),A(this,"getCellsAtRowHandle",(n,r)=>Ob(n,r)),A(this,"getCellsAtColumnHandle",(n,r)=>Lb(n,r)),A(this,"setCellSelection",(n,r,o=r)=>{const s=this.view;if(!s)throw new Error("Table handles view not initialized");const i=n.doc.resolve(s.tablePos+1),a=n.doc.resolve(i.posAtIndex(r.row)+1),l=n.doc.resolve(a.posAtIndex(r.col)),c=n.doc.resolve(i.posAtIndex(o.row)+1),d=n.doc.resolve(c.posAtIndex(o.col)),u=n.tr;return u.setSelection(new Re(l,d)),n.apply(u)}),A(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,s)=>{const i=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?uH(i,s):hH(i,s):r.side==="left"?iH(i,s):aH(i,s)})}),A(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,s)=>{const i=this.setCellSelection(o,{row:n,col:0});return pH(i,s)}):this.editor.exec((o,s)=>{const i=this.setCellSelection(o,{row:0,col:n});return cH(i,s)})),A(this,"mergeCells",n=>this.editor.exec((r,o)=>{const s=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return gH(s,o)})),A(this,"splitCell",n=>this.editor.exec((r,o)=>{const s=n?this.setCellSelection(r,n):r;return yH(s,o)})),A(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,s=r.$to;if(Hb(r)){const{ranges:p}=r;p.forEach(g=>{o=g.$from.min(o??g.$from),s=g.$to.max(s??g.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),s=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||s.pos===0)return;const i=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(s.pos-s.parentOffset-1),l=n.doc.resolve(i.pos-i.parentOffset-1),c=o.index(i.depth),d=i.index(l.depth),u=s.index(a.depth),h=a.index(l.depth),f=[];for(let p=d;p<=h;p++)for(let g=c;g<=u;g++)f.push({row:p,col:g});return{from:{row:d,col:c},to:{row:h,col:u},cells:f}})),A(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=Hb(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const s=this.getCellSelection();if(s)return gG(s.from,s.to,n)?"vertical":"horizontal"})),A(this,"cropEmptyRowsOrColumns",(n,r)=>pG(n,r)),A(this,"addRowsOrColumns",(n,r,o)=>mG(n,r,o)),this.editor=e,this.addProsemirrorPlugin(new me({key:nc,view:n=>(this.view=new CY(e,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:s,draggingState:i}=this.view.state,{originalIndex:a,draggedCellOrientation:l}=i;if(r===a||!s||l==="row"&&!dP(s,a,r)||l==="col"&&!uP(s,a,r))return be.create(n.doc,o);const c=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?Ob(this.view.state.block,r).forEach(({row:d,col:u})=>{const h=n.doc.resolve(c.posAtIndex(d)+1),f=n.doc.resolve(h.posAtIndex(u)+1),p=f.node(),g=f.pos+(r>a?p.nodeSize-2:0);o.push(_e.widget(g,()=>{const b=document.createElement("div");return b.className="bn-table-drop-cursor",b.style.left="0",b.style.right="0",r>a?b.style.bottom="-2px":b.style.top="-3px",b.style.height="4px",b}))}):Lb(this.view.state.block,r).forEach(({row:d,col:u})=>{const h=n.doc.resolve(c.posAtIndex(d)+1),f=n.doc.resolve(h.posAtIndex(u)+1),p=f.node(),g=f.pos+(r>a?p.nodeSize-2:0);o.push(_e.widget(g,()=>{const b=document.createElement("div");return b.className="bn-table-drop-cursor",b.style.top="0",b.style.bottom="0",r>a?b.style.right="-2px":b.style.left="-3px",b.style.width="4px",b}))}),be.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const TY=Ne.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),EY=Ne.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:at.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):at.textColor.default,renderHTML:t=>t.textColor===at.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),MY=Ne.create({name:"trailingNode",addProseMirrorPlugins(){const t=new Te(this.name);return[new me({key:t,appendTransaction:(e,n,r)=>{const{doc:o,tr:s,schema:i}=r,a=t.getState(r),l=o.content.size-2,c=i.nodes.blockContainer,d=i.nodes.paragraph;if(a)return s.insert(l,c.create(void 0,d.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let r=e.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),AY={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},_Y=Qr.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(AY))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[s,i]of Object.entries(t))s!=="class"&&n.setAttribute(s,i);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},o=document.createElement("div");o.className=Be("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[s,i]of Object.entries(r))s!=="class"&&o.setAttribute(s,i);return n.appendChild(o),{dom:n,contentDOM:o}}}),RY=Qr.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=Be("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,s]of Object.entries(n))o!=="class"&&r.setAttribute(o,s);return{dom:r,contentDOM:r}}}),PY=Qr.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class IY extends At{constructor({editor:e,collaboration:n}){super(e),A(this,"editor"),A(this,"collaboration"),A(this,"forkedState"),this.editor=e,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,n){const r=e.doc;if(e._item===null){const o=Array.from(r.share.keys()).find(s=>r.share.get(s)===e);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,e.constructor)}else{const o=e._item,s=n.store.clients.get(o.id.client)??[],i=Jn(s,o.id.clock);return s[i].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){if(this.isForkedFromRemote)return;const e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");const n=new Vs;zC(n,UC(e.doc));const r=this.findTypeInOtherYdoc(e,n);this.forkedState={originalFragment:e,forkedFragment:r},this.editor._tiptapEditor.unregisterPlugin([ec,Lr,Ee]),this.editor._tiptapEditor.registerPlugin(new zb(r).plugins[0]),this.editor._tiptapEditor.registerPlugin(new Ub().plugins[0]),this.emit("forked",!0)}merge({keepChanges:e}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(Ee),this.editor._tiptapEditor.unregisterPlugin(Lr);const{originalFragment:n,forkedFragment:r}=this.forkedState;if(e){const o=UC(r.doc);zC(n.doc,o)}this.editor.extensions.ySyncPlugin=new zb(n),this.editor.extensions.yCursorPlugin=new KP(this.collaboration),this.editor.extensions.yUndoPlugin=new Ub,this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),this.forkedState=void 0,this.emit("forked",!1)}}const DY=t=>{var e;const n={},r=NY(t);for(const s of r)n[s.name]=s;t.collaboration&&(n.ySyncPlugin=new zb(t.collaboration.fragment),n.yUndoPlugin=new Ub,(e=t.collaboration.provider)!=null&&e.awareness&&(n.yCursorPlugin=new KP(t.collaboration)),n.forkYDocPlugin=new IY({editor:t.editor,collaboration:t.collaboration})),n.formattingToolbar=new WK(t.editor),n.linkToolbar=new XK(t.editor),n.sideMenu=new uY(t.editor,t.sideMenuDetection),n.suggestionMenus=new gY(t.editor),n.filePanel=new FK(t.editor),n.placeholder=new nY(t.editor,t.placeholders),(t.animations??!0)&&(n.animations=new oY),t.tableHandles&&(n.tableHandles=new SY(t.editor)),n.nodeSelectionKeyboard=new eY,n.showSelection=new sY(t.editor),t.comments&&(n.comments=new VK(t.editor,t.comments.threadStore,YP.name));const o=t.disableExtensions||[];for(const s of o)delete n[s];return n};let RS=!1;const NY=t=>{const e=[Ol.ClipboardTextSerializer,Ol.Commands,Ol.Editable,Ol.FocusEvents,Ol.Tabindex,qH,Ne.create({name:"dropCursor",addProseMirrorPlugins:()=>[t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})]}),Fp.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),GK,MF,yY,bY,vY,EF.extend({inclusive:!1}).configure({defaultProtocol:XP,protocols:RS?[]:ZP}),...Object.values(t.styleSpecs).map(n=>n.implementation.mark.configure({editor:t.editor})),EY,LK,TY,Ne.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),PY,_Y.configure({editor:t.editor,domAttributes:t.domAttributes}),YK.configure({editor:t.editor,tabBehavior:t.tabBehavior}),RY.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:t.editor,domAttributes:t.domAttributes})),n.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),OK(t.editor),DK(t.editor,t.pasteHandler||(n=>n.defaultPasteHandler())),gK(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[MY]:[],...t.comments?[YP]:[]];return RS=!0,t.collaboration||e.push(rF),e};function OY(t,e){const n=[];return t.forEach((r,o,s)=>{s!==e&&n.push(r)}),R.from(n)}function LY(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],s=o.copy(o.content.addToEnd(t.child(r)));n[n.length-1]=s}else{const o=e.nodes.table.createChecked(void 0,t.child(r));n.push(o)}else n.push(t.child(r));return t=R.from(n),t}function jY(t,e){let n=R.from(t.content);if(n=LY(n,e.state.schema),!BY(n,e))return new j(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const i=n.child(r+1).child(0).child(0);(i.type.name==="bulletListItem"||i.type.name==="numberedListItem"||i.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=OY(n,r+1))}const s=e.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,s)}return new j(n,t.openStart,t.openEnd)}function BY(t,e){var n,r;const o=t.childCount===1,s=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",i=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(s)return!1;if(i){const a=Le(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const Gb=class extends p6{constructor(e,n){super({...e,content:void 0}),A(this,"_state"),A(this,"mount",(a,l,c)=>{l?(this.options.element=l,this.createViewAlternative(a,c)):this.destroy()});const r=this.schema;let o;const s=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=s.apply(r.nodes.doc,a),c=JSON.parse(JSON.stringify(l.toJSON()));return c.content[0].content[0].attrs.id="initialBlockId",o=To.fromJSON(r,c),o};let i;try{const a=e==null?void 0:e.content.map(l=>Ui(l,this.schema,n).toJSON());i=Kh({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=ai.create({doc:i,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view){this._state=this.state.apply(e),this.emit("transaction",{editor:this,transaction:e});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(e);return}const{state:n,transactions:r}=this.state.applyTransaction(e),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(s=>{s.type==="mark"&&s.config.addMarkView&&(r[s.name]=s.config.addMarkView(e))}),this.view=new UA({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};A(Gb,"create",(t,e)=>{var n,r;const o=(n=globalThis==null?void 0:globalThis.window)==null?void 0:n.setTimeout;typeof((r=globalThis==null?void 0:globalThis.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new Gb(t,e)}finally{o&&(globalThis.window.setTimeout=o)}});let tI=Gb;tI.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const $Y={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let VY=class nI extends yv{constructor(e){var n,r,o,s,i,a,l,c,d,u,h,f,p,g,b;super(),A(this,"pmSchema"),A(this,"extensions",{}),A(this,"headless",!1),A(this,"_tiptapEditor"),A(this,"elementRenderer",null),A(this,"blockCache",new WeakMap),A(this,"dictionary"),A(this,"schema"),A(this,"blockImplementations"),A(this,"inlineContentImplementations"),A(this,"styleImplementations"),A(this,"formattingToolbar"),A(this,"linkToolbar"),A(this,"sideMenu"),A(this,"suggestionMenus"),A(this,"filePanel"),A(this,"tableHandles"),A(this,"comments"),A(this,"showSelectionPlugin"),A(this,"forkYDocPlugin"),A(this,"uploadFile"),A(this,"onUploadStartCallbacks",[]),A(this,"onUploadEndCallbacks",[]),A(this,"resolveFileUrl"),A(this,"resolveUsers"),A(this,"settings"),A(this,"activeTransaction",null),A(this,"mount",(T,E)=>{this._tiptapEditor.mount(this,T,E)}),this.options=e;const v=e;if(v.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(v.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(v.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(v.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||nG,this.settings={tables:{splitCells:((n=e==null?void 0:e.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e==null?void 0:e.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=e==null?void 0:e.tables)==null?void 0:o.cellTextColor)??!1,headers:((s=e==null?void 0:e.tables)==null?void 0:s.headers)??!1},codeBlock:{indentLineWithTab:((i=e==null?void 0:e.codeBlock)==null?void 0:i.indentLineWithTab)??!0,defaultLanguage:((a=e==null?void 0:e.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((l=e==null?void 0:e.codeBlock)==null?void 0:l.supportedLanguages)??{},createHighlighter:((c=e==null?void 0:e.codeBlock)==null?void 0:c.createHighlighter)??void 0}};const x={defaultStyles:!0,schema:e.schema||fv.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(x.comments&&!x.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=x.resolveUsers,this.schema=x.schema,this.blockImplementations=x.schema.blockSpecs,this.inlineContentImplementations=x.schema.inlineContentSpecs,this.styleImplementations=x.schema.styleSpecs,this.extensions=DY({editor:this,domAttributes:x.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:x.collaboration,trailingBlock:x.trailingBlock,disableExtensions:x.disableExtensions,setIdAttribute:x.setIdAttribute,animations:x.animations??!0,tableHandles:rn("table",this),dropCursor:this.options.dropCursor??eG,placeholders:x.placeholders,tabBehavior:x.tabBehavior,sideMenuDetection:x.sideMenuDetection||"viewport",comments:x.comments,pasteHandler:x.pasteHandler}),(((d=x._tiptapOptions)==null?void 0:d.extensions)||[]).forEach(T=>{this.extensions[T.name]=T});for(let T of x.extensions||[]){typeof T=="function"&&(T=T(this));const E=T.constructor.key();if(!E)throw new Error(`Extension ${T.constructor.name} does not have a key method`);if(this.extensions[E])throw new Error(`Extension ${T.constructor.name} already exists with key ${E}`);this.extensions[E]=T}if(Object.entries(x._extensions||{}).forEach(([T,E])=>{const M=typeof E=="function"?E(this):E;if(!("plugin"in M)){this.extensions[T]=M;return}this.extensions[T]=new class extends At{static key(){return T}constructor(){super(),this.addProsemirrorPlugin(M.plugin)}get priority(){return M.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,x.uploadFile){const T=x.uploadFile;this.uploadFile=async(E,M)=>{this.onUploadStartCallbacks.forEach(_=>_.apply(this,[M]));try{return await T(E,M)}finally{this.onUploadEndCallbacks.forEach(_=>_.apply(this,[M]))}}}this.resolveFileUrl=x.resolveFileUrl,this.headless=x._headless;const w="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;w&&x.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const k=x.initialContent||(w?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:Fp.options.generateID()}]);if(!Array.isArray(k)||k.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+k);const C=[...Object.entries(this.extensions).map(([T,E])=>{if(E instanceof Ne||E instanceof Qr||E instanceof Mt)return E;if(!(E instanceof At&&!E.plugins.length))return Ne.create({name:T,priority:E.priority,addProseMirrorPlugins:()=>E.plugins})})].filter(T=>T!==void 0),S={...$Y,...x._tiptapOptions,content:k,extensions:C,editorProps:{...(u=x._tiptapOptions)==null?void 0:u.editorProps,attributes:{tabIndex:"0",...(f=(h=x._tiptapOptions)==null?void 0:h.editorProps)==null?void 0:f.attributes,...(p=x.domAttributes)==null?void 0:p.editor,class:Be("bn-editor",x.defaultStyles?"bn-default-styles":"",((b=(g=x.domAttributes)==null?void 0:g.editor)==null?void 0:b.class)||"")},transformPasted:jY}};this.headless?this.pmSchema=VV(S.extensions):(this._tiptapEditor=tI.create(S,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(e={}){return new nI(e)}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(e,n=e.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>cG(e.doc,this.pmSchema))}getBlock(e){return this.transact(n=>Yq(n.doc,e))}getPrevBlock(e){return this.transact(n=>Jq(n.doc,e))}getNextBlock(e){return this.transact(n=>Zq(n.doc,e))}getParentBlock(e){return this.transact(n=>Xq(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function o(s){for(const i of s){if(e(i)===!1)return!1;const a=n?i.children.slice().reverse():i.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>rK(e))}setTextCursorPosition(e,n="start"){return this.transact(r=>$P(r,e,n))}getSelection(){return this.transact(e=>eK(e))}getSelectionCutBlocks(){return this.transact(e=>nK(e))}setSelection(e,n){return this.transact(r=>tK(r,e,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,n,r="before"){return this.transact(o=>wG(o,e,n,r))}updateBlock(e,n){return this.transact(r=>kG(r,e,n))}removeBlocks(e){return this.transact(n=>hS(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.transact(r=>hS(r,e,n))}undo(){return this.options.collaboration?this.exec(YW):this.exec(k1)}redo(){return this.options.collaboration?this.exec(JW):this.exec(C1)}insertInlineContent(e,{updateSelection:n=!1}={}){const r=yr(e,this.pmSchema);this.transact(o=>{Qq(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(e=>{const n={},r=e.selection.$to.marks();for(const o of r){const s=this.schema.styleSchema[o.type.name];if(!s){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}s.propSchema==="boolean"?n[s.type]=!0:n[s.type]=o.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new Wr(o.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new Wr(o.propSchema)}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.pmSchema.mark("link",{href:e});this.transact(o=>{const{from:s,to:i}=o.selection;n?o.insertText(n,s,i).addMark(s,s+n.length,r):o.setSelection(U.create(o.doc,i)).addMark(s,i,r)})}canNestBlock(){return qq(this)}nestBlock(){BP(this)}canUnnestBlock(){return Kq(this)}unnestBlock(){Gq(this)}moveBlocksUp(){return zq(this)}moveBlocksDown(){return Uq(this)}async blocksToHTMLLossy(e=this.document){return Gp(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return MG(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return HP(e,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return iK(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return fK(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}onChange(e){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{e(this,{getChanges:()=>vG(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(e,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(Ee)&&!n||e(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(s=>s.$from.pos)),o=Math.max(...n.map(s=>s.$to.pos));if(sb(e)){const s=this.prosemirrorView.nodeDOM(r);if(s)return s.getBoundingClientRect()}return Jh(this.prosemirrorView,r,o)}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}openSuggestionMenu(e,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:(n==null?void 0:n.deleteTriggerCharacter)||!1,ignoreQueryLength:(n==null?void 0:n.ignoreQueryLength)||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return VP(e.trim()).innerHTML}pasteHTML(e,n=!1){var r;let o=e;n||(o=this.convertHtmlToBlockNoteHtml(e)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(e){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await FP(e))}},Lg;async function HY(){return Lg||(Lg=(async()=>{const[t,e]=await Promise.all([kt(()=>import("./module-BvCTiNll.js"),[]),kt(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),Lg)}async function FY(t,e){if(!Rq("text",t))return[];const{emojiData:n,emojiMart:r}=await HY();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(o=>({id:o.skins[0].native,onItemClick:()=>t.insertInlineContent(o.skins[0].native+" ")}))}function qb(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Ga(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&d3(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function rI(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function oI(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function zY(t){return WY()?!1:!PS()&&t.width===0&&t.height===0||PS()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function sI(){return/apple/i.test(navigator.vendor)}function PS(){const t=/android/i;return t.test(rI())||t.test(oI())}function UY(){return rI().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function WY(){return oI().includes("jsdom/")}function Kb(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function GY(t){return"nativeEvent"in t}function qY(t){return t.matches("html,body")}function vs(t){return(t==null?void 0:t.ownerDocument)||document}function jg(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function fa(t){return"composedPath"in t?t.composedPath()[0]:t.target}const KY="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function YY(t){return L0(t)&&t.matches(KY)}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var JY=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Yb=JY.join(","),iI=typeof Element>"u",ld=iI?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Bf=!iI&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},$f=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",i=s||n&&e&&t(e.parentNode);return i},ZY=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},XY=function(e,n,r){if($f(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(Yb));return n&&ld.call(e,Yb)&&o.unshift(e),o=o.filter(r),o},QY=function t(e,n,r){for(var o=[],s=Array.from(e);s.length;){var i=s.shift();if(!$f(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,c=t(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else{var d=ld.call(i,Yb);d&&r.filter(i)&&(n||!e.includes(i))&&o.push(i);var u=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),h=!$f(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(u&&h){var f=t(u===!0?i.children:u.children,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:i,candidates:f})}else s.unshift.apply(s,i.children)}}return o},aI=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},lI=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||ZY(e))&&!aI(e)?0:e.tabIndex},eJ=function(e,n){var r=lI(e);return r<0&&n&&!aI(e)?0:r},tJ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},cI=function(e){return e.tagName==="INPUT"},nJ=function(e){return cI(e)&&e.type==="hidden"},rJ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},oJ=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},sJ=function(e){if(!e.name)return!0;var n=e.form||Bf(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=oJ(o,e.form);return!s||s===e},iJ=function(e){return cI(e)&&e.type==="radio"},aJ=function(e){return iJ(e)&&!sJ(e)},lJ=function(e){var n,r=e&&Bf(e),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var i,a,l;for(s=!!((i=o)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&o;){var c,d,u;r=Bf(o),o=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=o)!==null&&d!==void 0&&(u=d.ownerDocument)!==null&&u!==void 0&&u.contains(o))}}return s},IS=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},cJ=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=ld.call(e,"details>summary:first-of-type"),i=s?e.parentElement:e;if(ld.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var l=e.parentElement,c=Bf(e);if(l&&!l.shadowRoot&&o(l)===!0)return IS(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(lJ(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return IS(e);return!1},dJ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ld.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},uJ=function(e,n){return!(n.disabled||$f(n)||nJ(n)||cJ(n,e)||rJ(n)||dJ(n))},DS=function(e,n){return!(aJ(n)||lI(n)<0||!uJ(e,n))},hJ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},fJ=function t(e){var n=[],r=[];return e.forEach(function(o,s){var i=!!o.scopeParent,a=i?o.scopeParent:o,l=eJ(a,i),c=i?t(o.candidates):a;l===0?i?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:c})}),r.sort(tJ).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},dI=function(e,n){n=n||{};var r;return n.getShadowRoot?r=QY([e],n.includeContainer,{filter:DS.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:hJ}):r=XY(e,n.includeContainer,DS.bind(null,n)),fJ(r)};const uI={...f3},pJ=uI.useInsertionEffect,mJ=pJ||(t=>t());function wo(t){const e=y.useRef(()=>{});return mJ(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var $t=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Jb(){return Jb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jb.apply(this,arguments)}let NS=!1,gJ=0;const OS=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+gJ++;function yJ(){const[t,e]=y.useState(()=>NS?OS():void 0);return $t(()=>{t==null&&e(OS())},[]),y.useEffect(()=>{NS=!0},[]),t}const bJ=uI.useId,bv=bJ||yJ;function vJ(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const wJ=y.createContext(null),xJ=y.createContext(null),vv=()=>{var t;return((t=y.useContext(wJ))==null?void 0:t.id)||null},wv=()=>y.useContext(xJ);function Yd(t){return"data-floating-ui-"+t}function hi(t){const e=y.useRef(t);return $t(()=>{e.current=t}),e}const LS=Yd("safe-polygon");function Ch(t,e,n){return n&&!Kb(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function kJ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:i}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:u=0,move:h=!0}=e,f=wv(),p=vv(),g=hi(c),b=hi(l),v=hi(n),x=y.useRef(),w=y.useRef(-1),k=y.useRef(),C=y.useRef(-1),S=y.useRef(!0),T=y.useRef(!1),E=y.useRef(()=>{}),M=y.useRef(!1),_=y.useCallback(()=>{var N;const B=(N=o.current.openEvent)==null?void 0:N.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[o]);y.useEffect(()=>{if(!a)return;function N(B){let{open:H}=B;H||(clearTimeout(w.current),clearTimeout(C.current),S.current=!0,M.current=!1)}return s.on("openchange",N),()=>{s.off("openchange",N)}},[a,s]),y.useEffect(()=>{if(!a||!g.current||!n)return;function N(H){_()&&r(!1,H,"hover")}const B=vs(i.floating).documentElement;return B.addEventListener("mouseleave",N),()=>{B.removeEventListener("mouseleave",N)}},[i.floating,n,r,a,g,_]);const P=y.useCallback(function(N,B,H){B===void 0&&(B=!0),H===void 0&&(H="hover");const X=Ch(b.current,"close",x.current);X&&!k.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,N,H),X)):B&&(clearTimeout(w.current),r(!1,N,H))},[b,r]),L=wo(()=>{E.current(),k.current=void 0}),V=wo(()=>{if(T.current){const N=vs(i.floating).body;N.style.pointerEvents="",N.removeAttribute(LS),T.current=!1}}),F=wo(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);y.useEffect(()=>{if(!a)return;function N(G){if(clearTimeout(w.current),S.current=!1,d&&!Kb(x.current)||u>0&&!Ch(b.current,"open"))return;const Q=Ch(b.current,"open",x.current);Q?w.current=window.setTimeout(()=>{v.current||r(!0,G,"hover")},Q):n||r(!0,G,"hover")}function B(G){if(F())return;E.current();const Q=vs(i.floating);if(clearTimeout(C.current),M.current=!1,g.current&&o.current.floatingContext){n||clearTimeout(w.current),k.current=g.current({...o.current.floatingContext,tree:f,x:G.clientX,y:G.clientY,onClose(){V(),L(),F()||P(G,!0,"safe-polygon")}});const Fe=k.current;Q.addEventListener("mousemove",Fe),E.current=()=>{Q.removeEventListener("mousemove",Fe)};return}(x.current==="touch"?!Ga(i.floating,G.relatedTarget):!0)&&P(G)}function H(G){F()||o.current.floatingContext&&(g.current==null||g.current({...o.current.floatingContext,tree:f,x:G.clientX,y:G.clientY,onClose(){V(),L(),F()||P(G)}})(G))}if(Wt(i.domReference)){var X;const G=i.domReference;return n&&G.addEventListener("mouseleave",H),(X=i.floating)==null||X.addEventListener("mouseleave",H),h&&G.addEventListener("mousemove",N,{once:!0}),G.addEventListener("mouseenter",N),G.addEventListener("mouseleave",B),()=>{var Q;n&&G.removeEventListener("mouseleave",H),(Q=i.floating)==null||Q.removeEventListener("mouseleave",H),h&&G.removeEventListener("mousemove",N),G.removeEventListener("mouseenter",N),G.removeEventListener("mouseleave",B)}}},[i,a,t,d,u,h,P,L,V,r,n,v,f,b,g,o,F]),$t(()=>{var N;if(a&&n&&(N=g.current)!=null&&N.__options.blockPointerEvents&&_()){T.current=!0;const H=i.floating;if(Wt(i.domReference)&&H){var B;const X=vs(i.floating).body;X.setAttribute(LS,"");const G=i.domReference,Q=f==null||(B=f.nodesRef.current.find(pe=>pe.id===p))==null||(B=B.context)==null?void 0:B.elements.floating;return Q&&(Q.style.pointerEvents=""),X.style.pointerEvents="none",G.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{X.style.pointerEvents="",G.style.pointerEvents="",H.style.pointerEvents=""}}}},[a,n,p,i,f,g,_]),$t(()=>{n||(x.current=void 0,M.current=!1,L(),V())},[n,L,V]),y.useEffect(()=>()=>{L(),clearTimeout(w.current),clearTimeout(C.current),V()},[a,i.domReference,L,V]);const z=y.useMemo(()=>{function N(B){x.current=B.pointerType}return{onPointerDown:N,onPointerEnter:N,onMouseMove(B){const{nativeEvent:H}=B;function X(){!S.current&&!v.current&&r(!0,H,"hover")}d&&!Kb(x.current)||n||u===0||M.current&&B.movementX**2+B.movementY**2<2||(clearTimeout(C.current),x.current==="touch"?X():(M.current=!0,C.current=window.setTimeout(X,u)))}}},[d,r,n,v,u]),Z=y.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(N){F()||P(N.nativeEvent,!1)}}),[P,F]);return y.useMemo(()=>a?{reference:z,floating:Z}:{},[a,z,Z])}const Zb=()=>{},hI=y.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Zb,setState:Zb,isInstantPhase:!1}),CJ=()=>y.useContext(hI);function SJ(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,s]=y.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),i=y.useRef(null),a=y.useCallback(l=>{s({currentId:l})},[]);return $t(()=>{o.currentId?i.current===null?i.current=o.currentId:o.isInstantPhase||s({isInstantPhase:!0}):(o.isInstantPhase&&s({isInstantPhase:!1}),i.current=null)},[o.currentId,o.isInstantPhase]),y.createElement(hI.Provider,{value:y.useMemo(()=>({...o,setState:s,setCurrentId:a}),[o,a])},e)}function TJ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:s,enabled:i=!0}=e,a=s??o,l=CJ(),{currentId:c,setCurrentId:d,initialDelay:u,setState:h,timeoutMs:f}=l;return $t(()=>{i&&c&&(h({delay:{open:1,close:Ch(u,"close")}}),c!==a&&r(!1))},[i,a,r,h,c,u]),$t(()=>{function p(){r(!1),h({delay:u,currentId:null})}if(i&&c&&!n&&c===a){if(f){const g=window.setTimeout(p,f);return()=>{clearTimeout(g)}}p()}},[i,n,h,c,a,r,u,f]),$t(()=>{i&&(d===Zb||!n||d(a))},[i,n,d,a]),l}function Bg(t,e){let n=t.filter(o=>{var s;return o.parentId===e&&((s=o.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(o=>{var s;return(s=r)==null?void 0:s.some(i=>{var a;return o.parentId===i.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const fI=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function pI(t,e){const n=dI(t,fI());e==="prev"&&n.reverse();const r=n.indexOf(qb(vs(t)));return n.slice(r+1)[0]}function EJ(){return pI(document.body,"next")}function MJ(){return pI(document.body,"prev")}function $g(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Ga(n,r)}function AJ(t){dI(t,fI()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function jS(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const mI={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let _J;function BS(t){t.key==="Tab"&&(t.target,clearTimeout(_J))}const $S=y.forwardRef(function(e,n){const[r,o]=y.useState();$t(()=>(sI()&&o("button"),document.addEventListener("keydown",BS),()=>{document.removeEventListener("keydown",BS)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Yd("focus-guard")]:"",style:mI};return y.createElement("span",Jb({},e,s))}),gI=y.createContext(null),VS=Yd("portal");function RJ(t){t===void 0&&(t={});const{id:e,root:n}=t,r=bv(),o=IJ(),[s,i]=y.useState(null),a=y.useRef(null);return $t(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),$t(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(VS,""),l.appendChild(c),a.current=c,i(c)},[e,r]),$t(()=>{if(n===null||!r||a.current)return;let l=n||(o==null?void 0:o.portalNode);l&&!Wt(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const d=document.createElement("div");d.id=r,d.setAttribute(VS,""),l=c||l,l.appendChild(d),a.current=d,i(d)},[e,n,r,o]),s}function PJ(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,s=RJ({id:n,root:r}),[i,a]=y.useState(null),l=y.useRef(null),c=y.useRef(null),d=y.useRef(null),u=y.useRef(null),h=i==null?void 0:i.modal,f=i==null?void 0:i.open,p=!!i&&!i.modal&&i.open&&o&&!!(r||s);return y.useEffect(()=>{if(!s||!o||h)return;function g(b){s&&$g(b)&&(b.type==="focusin"?jS:AJ)(s)}return s.addEventListener("focusin",g,!0),s.addEventListener("focusout",g,!0),()=>{s.removeEventListener("focusin",g,!0),s.removeEventListener("focusout",g,!0)}},[s,o,h]),y.useEffect(()=>{s&&(f||jS(s))},[f,s]),y.createElement(gI.Provider,{value:y.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:u,portalNode:s,setFocusManagerState:a}),[o,s])},p&&s&&y.createElement($S,{"data-type":"outside",ref:l,onFocus:g=>{if($g(g,s)){var b;(b=d.current)==null||b.focus()}else{const v=MJ()||(i==null?void 0:i.refs.domReference.current);v==null||v.focus()}}}),p&&s&&y.createElement("span",{"aria-owns":s.id,style:mI}),s&&St.createPortal(e,s),p&&s&&y.createElement($S,{"data-type":"outside",ref:c,onFocus:g=>{if($g(g,s)){var b;(b=u.current)==null||b.focus()}else{const v=EJ()||(i==null?void 0:i.refs.domReference.current);v==null||v.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,g.nativeEvent,"focus-out"))}}}))}const IJ=()=>y.useContext(gI),DJ="data-floating-ui-focusable",NJ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},OJ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},HS=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function yI(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=t,{enabled:i=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:u="pointerdown",ancestorScroll:h=!1,bubbles:f,capture:p}=e,g=wv(),b=wo(typeof l=="function"?l:()=>!1),v=typeof l=="function"?b:l,x=y.useRef(!1),w=y.useRef(!1),{escapeKey:k,outsidePress:C}=HS(f),{escapeKey:S,outsidePress:T}=HS(p),E=y.useRef(!1),M=wo(z=>{var Z;if(!n||!i||!a||z.key!=="Escape"||E.current)return;const N=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,B=g?Bg(g.nodesRef.current,N):[];if(!k&&(z.stopPropagation(),B.length>0)){let H=!0;if(B.forEach(X=>{var G;if((G=X.context)!=null&&G.open&&!X.context.dataRef.current.__escapeKeyBubbles){H=!1;return}}),!H)return}r(!1,GY(z)?z.nativeEvent:z,"escape-key")}),_=wo(z=>{var Z;const N=()=>{var B;M(z),(B=fa(z))==null||B.removeEventListener("keydown",N)};(Z=fa(z))==null||Z.addEventListener("keydown",N)}),P=wo(z=>{var Z;const N=x.current;x.current=!1;const B=w.current;if(w.current=!1,c==="click"&&B||N||typeof v=="function"&&!v(z))return;const H=fa(z),X="["+Yd("inert")+"]",G=vs(o.floating).querySelectorAll(X);let Q=Wt(H)?H:null;for(;Q&&!Tx(Q);){const ve=m3(Q);if(Tx(ve)||!Wt(ve))break;Q=ve}if(G.length&&Wt(H)&&!qY(H)&&!Ga(H,o.floating)&&Array.from(G).every(ve=>!Ga(Q,ve)))return;if(L0(H)&&F){const ve=H.clientWidth>0&&H.scrollWidth>H.clientWidth,Oe=H.clientHeight>0&&H.scrollHeight>H.clientHeight;let Ye=Oe&&z.offsetX>H.clientWidth;if(Oe&&g3(H).direction==="rtl"&&(Ye=z.offsetX<=H.offsetWidth-H.clientWidth),Ye||ve&&z.offsetY>H.clientHeight)return}const pe=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,Fe=g&&Bg(g.nodesRef.current,pe).some(ve=>{var Oe;return jg(z,(Oe=ve.context)==null?void 0:Oe.elements.floating)});if(jg(z,o.floating)||jg(z,o.domReference)||Fe)return;const Ke=g?Bg(g.nodesRef.current,pe):[];if(Ke.length>0){let ve=!0;if(Ke.forEach(Oe=>{var Ye;if((Ye=Oe.context)!=null&&Ye.open&&!Oe.context.dataRef.current.__outsidePressBubbles){ve=!1;return}}),!ve)return}r(!1,z,"outside-press")}),L=wo(z=>{var Z;const N=()=>{var B;P(z),(B=fa(z))==null||B.removeEventListener(c,N)};(Z=fa(z))==null||Z.addEventListener(c,N)});y.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=k,s.current.__outsidePressBubbles=C;let z=-1;function Z(G){r(!1,G,"ancestor-scroll")}function N(){window.clearTimeout(z),E.current=!0}function B(){z=window.setTimeout(()=>{E.current=!1},p3()?5:0)}const H=vs(o.floating);a&&(H.addEventListener("keydown",S?_:M,S),H.addEventListener("compositionstart",N),H.addEventListener("compositionend",B)),v&&H.addEventListener(c,T?L:P,T);let X=[];return h&&(Wt(o.domReference)&&(X=oh(o.domReference)),Wt(o.floating)&&(X=X.concat(oh(o.floating))),!Wt(o.reference)&&o.reference&&o.reference.contextElement&&(X=X.concat(oh(o.reference.contextElement)))),X=X.filter(G=>{var Q;return G!==((Q=H.defaultView)==null?void 0:Q.visualViewport)}),X.forEach(G=>{G.addEventListener("scroll",Z,{passive:!0})}),()=>{a&&(H.removeEventListener("keydown",S?_:M,S),H.removeEventListener("compositionstart",N),H.removeEventListener("compositionend",B)),v&&H.removeEventListener(c,T?L:P,T),X.forEach(G=>{G.removeEventListener("scroll",Z)}),window.clearTimeout(z)}},[s,o,a,v,c,n,r,h,i,k,C,M,S,_,P,T,L]),y.useEffect(()=>{x.current=!1},[v,c]);const V=y.useMemo(()=>({onKeyDown:M,[NJ[u]]:z=>{d&&r(!1,z.nativeEvent,"reference-press")}}),[M,r,d,u]),F=y.useMemo(()=>({onKeyDown:M,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[OJ[c]]:()=>{x.current=!0}}),[M,c]);return y.useMemo(()=>i?{reference:V,floating:F}:{},[i,V,F])}function LJ(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=bv(),s=y.useRef({}),[i]=y.useState(()=>vJ()),a=vv()!=null,[l,c]=y.useState(r.reference),d=wo((f,p,g)=>{s.current.openEvent=f?p:void 0,i.emit("openchange",{open:f,event:p,reason:g,nested:a}),n==null||n(f,p,g)}),u=y.useMemo(()=>({setPositionReference:c}),[]),h=y.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return y.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:h,events:i,floatingId:o,refs:u}),[e,d,h,i,o,u])}function al(t){t===void 0&&(t={});const{nodeId:e}=t,n=LJ({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[s,i]=y.useState(null),[a,l]=y.useState(null),d=(o==null?void 0:o.domReference)||s,u=y.useRef(null),h=wv();$t(()=>{d&&(u.current=d)},[d]);const f=u3({...t,elements:{...o,...a&&{reference:a}}}),p=y.useCallback(w=>{const k=Wt(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;l(k),f.refs.setReference(k)},[f.refs]),g=y.useCallback(w=>{(Wt(w)||w===null)&&(u.current=w,i(w)),(Wt(f.refs.reference.current)||f.refs.reference.current===null||w!==null&&!Wt(w))&&f.refs.setReference(w)},[f.refs]),b=y.useMemo(()=>({...f.refs,setReference:g,setPositionReference:p,domReference:u}),[f.refs,g,p]),v=y.useMemo(()=>({...f.elements,domReference:d}),[f.elements,d]),x=y.useMemo(()=>({...f,...r,refs:b,elements:v,nodeId:e}),[f,b,v,e,r]);return $t(()=>{r.dataRef.current.floatingContext=x;const w=h==null?void 0:h.nodesRef.current.find(k=>k.id===e);w&&(w.context=x)}),y.useMemo(()=>({...f,context:x,refs:b,elements:v}),[f,b,v,x])}function jJ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:s,elements:i}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=y.useRef(!1),d=y.useRef(),u=y.useRef(!0);y.useEffect(()=>{if(!a)return;const f=h3(i.domReference);function p(){!n&&L0(i.domReference)&&i.domReference===qb(vs(i.domReference))&&(c.current=!0)}function g(){u.current=!0}return f.addEventListener("blur",p),f.addEventListener("keydown",g,!0),()=>{f.removeEventListener("blur",p),f.removeEventListener("keydown",g,!0)}},[i.domReference,n,a]),y.useEffect(()=>{if(!a)return;function f(p){let{reason:g}=p;(g==="reference-press"||g==="escape-key")&&(c.current=!0)}return o.on("openchange",f),()=>{o.off("openchange",f)}},[o,a]),y.useEffect(()=>()=>{clearTimeout(d.current)},[]);const h=y.useMemo(()=>({onPointerDown(f){zY(f.nativeEvent)||(u.current=!1)},onMouseLeave(){c.current=!1},onFocus(f){if(c.current)return;const p=fa(f.nativeEvent);if(l&&Wt(p))try{if(sI()&&UY())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!u.current&&!YY(p))return}r(!0,f.nativeEvent,"focus")},onBlur(f){c.current=!1;const p=f.relatedTarget,g=f.nativeEvent,b=Wt(p)&&p.hasAttribute(Yd("focus-guard"))&&p.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var v;const x=qb(i.domReference?i.domReference.ownerDocument:document);!p&&x===i.domReference||Ga((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,x)||Ga(i.domReference,x)||b||r(!1,g,"focus")})}}),[s,i.domReference,r,l]);return y.useMemo(()=>a?{reference:h}:{},[a,h])}const FS="active",zS="selected";function Vg(t,e,n){const r=new Map,o=n==="item";let s=t;if(o&&t){const{[FS]:i,[zS]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[DJ]:""},...s,...e.map(i=>{const a=i?i[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((i,a)=>(a&&Object.entries(a).forEach(l=>{let[c,d]=l;if(!(o&&[FS,zS].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var u;(u=r.get(c))==null||u.push(d),i[c]=function(){for(var h,f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];return(h=r.get(c))==null?void 0:h.map(b=>b(...p)).find(b=>b!==void 0)}}}else i[c]=d}),i),{})}}function bI(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),o=y.useCallback(a=>Vg(a,t,"reference"),e),s=y.useCallback(a=>Vg(a,t,"floating"),n),i=y.useCallback(a=>Vg(a,t,"item"),r);return y.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const BJ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function $J(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:s=!0,role:i="dialog"}=e,a=(n=BJ.get(i))!=null?n:i,l=bv(),d=vv()!=null,u=y.useMemo(()=>a==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&d&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[a,o,d,r,l,i]),h=y.useMemo(()=>{const p={id:o,...a&&{role:a}};return a==="tooltip"||i==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,i]),f=y.useCallback(p=>{let{active:g,selected:b}=p;const v={role:"option",...g&&{id:o+"-option"}};switch(i){case"select":return{...v,"aria-selected":g&&b};case"combobox":return{...v,...g&&{"aria-selected":!0}}}return{}},[o,i]);return y.useMemo(()=>s?{reference:u,floating:h,item:f}:{},[s,u,h,f])}const US=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function na(t,e){return typeof t=="function"?t(e):t}function VJ(t,e){const[n,r]=y.useState(t);return t&&!n&&r(!0),y.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function HJ(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,i=(typeof o=="number"?o:o.close)||0,[a,l]=y.useState("unmounted"),c=VJ(n,i);return!c&&a==="close"&&l("unmounted"),$t(()=>{if(r){if(n){l("initial");const d=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(d)}}l("close")}},[n,r]),{isMounted:c,status:a}}function xv(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:s,duration:i=250}=e,a=t.placement,l=a.split("-")[0],c=y.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof i=="number",u=(d?i:i.open)||0,h=(d?i:i.close)||0,[f,p]=y.useState(()=>({...na(s,c),...na(n,c)})),{isMounted:g,status:b}=HJ(t,{duration:i}),v=hi(n),x=hi(r),w=hi(o),k=hi(s);return $t(()=>{const C=na(v.current,c),S=na(w.current,c),T=na(k.current,c),E=na(x.current,c)||Object.keys(C).reduce((M,_)=>(M[_]="",M),{});if(b==="initial"&&p(M=>({transitionProperty:M.transitionProperty,...T,...C})),b==="open"&&p({transitionProperty:Object.keys(E).map(US).join(","),transitionDuration:u+"ms",...T,...E}),b==="close"){const M=S||C;p({transitionProperty:Object.keys(M).map(US).join(","),transitionDuration:h+"ms",...T,...M})}},[h,w,v,x,k,u,b,c]),{isMounted:g,styles:f}}var vI={exports:{}},Hg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WS;function FJ(){if(WS)return Hg;WS=1;var t=I;function e(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function a(u,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,b=p[1];return s(function(){g.value=f,g.getSnapshot=h,l(g)&&b({inst:g})},[u,f,h]),o(function(){return l(g)&&b({inst:g}),u(function(){l(g)&&b({inst:g})})},[u]),i(f),f}function l(u){var h=u.getSnapshot;u=u.value;try{var f=h();return!n(u,f)}catch{return!0}}function c(u,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Hg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,Hg}vI.exports=FJ();var wI=vI.exports;const zJ=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},UJ=({contentComponent:t})=>{const e=wI.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return I.createElement(I.Fragment,null,Object.values(e))};function WJ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:VE.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class GJ extends I.Component{constructor(e){var n;super(e),this.editorContentRef=I.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=WJ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return I.createElement(I.Fragment,null,I.createElement("div",{ref:zJ(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&I.createElement(UJ,{contentComponent:e.contentComponent}))}}const qJ=y.forwardRef((t,e)=>{const n=I.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return I.createElement(GJ,{key:n,innerRef:e,...t})});I.memo(qJ);var Fg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS;function KJ(){if(GS)return Fg;GS=1;var t=I,e=wI;function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Fg.useSyncExternalStoreWithSelector=function(c,d,u,h,f){var p=s(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function v(S){if(!x){if(x=!0,w=S,S=h(S),f!==void 0&&g.hasValue){var T=g.value;if(f(T,S))return k=T}return k=S}if(T=k,r(w,S))return T;var E=h(S);return f!==void 0&&f(T,E)?T:(w=S,k=E)}var x=!1,w,k,C=u===void 0?null:u;return[function(){return v(d())},C===null?void 0:function(){return v(C())}]},[d,u,h,f]);var b=o(c,p[0],p[1]);return i(function(){g.hasValue=!0,g.value=b},[b]),l(b),b},Fg}KJ();const YJ=y.createContext({editor:null});YJ.Consumer;const xI=y.createContext({onDragStart:void 0}),kI=()=>y.useContext(xI),JJ=I.forwardRef((t,e)=>{const{onDragStart:n}=kI(),r=t.as||"div";return I.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function ZJ(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function XJ(t){var e;return typeof t=="object"&&((e=t.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class QJ{constructor(e,{editor:n,props:r={},as:o="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?St.flushSync(()=>{this.render()}):this.render()}render(){var e;const n=this.component,r=this.props,o=this.editor;(ZJ(n)||XJ(n))&&(r.ref=s=>{this.ref=s}),this.reactElement=I.createElement(n,{...r}),(e=o==null?void 0:o.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n==null?void 0:n.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class eZ extends m6{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const c=d=>d.charAt(0).toUpperCase()+d.substring(1);this.component.displayName=c(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&c.appendChild(this.contentDOMElement)}},s=this.component,i=I.memo(c=>I.createElement(xI.Provider,{value:o},I.createElement(s,c)));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new QJ(i,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const o=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,i=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:s,oldDecorations:i,newNode:e,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,o({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=Wh(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function tZ(t,e){return n=>n.editor.contentComponent?new eZ(t,n,e):{}}var zu={},qS;function nZ(){if(qS)return zu;qS=1;var t=y3();return zu.createRoot=t.createRoot,zu.hydrateRoot=t.hydrateRoot,zu}var rZ=nZ();const CI=y.createContext(void 0);function ro(t){return y.useContext(CI)}function te(t){const e=ro();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function kv(t,e,n){const r=ro();e||(e=r==null?void 0:r.editor),y.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}function oZ(t,e){const n=te();e=e||n;const[r,o]=y.useState(()=>{if(t)return e.getSelectionBoundingBox()}),s=y.useCallback(()=>{if(!t)return;const i=e.getSelectionBoundingBox();o(i)},[e,t]);return kv(s,e,!0),y.useEffect(()=>{o(t?e.getSelectionBoundingBox():void 0)},[t,e]),r}function sZ(t){return t.getBoundingClientRect!==void 0}function Fs(t,e,n,r){const{refs:o,update:s,context:i,floatingStyles:a,isPositioned:l}=al({open:t,...r}),{isMounted:c,styles:d}=xv(i),u=typeof(r==null?void 0:r.canDismiss)=="object"?r.canDismiss:{enabled:r==null?void 0:r.canDismiss},h=yI(i,u),{getReferenceProps:f,getFloatingProps:p}=bI([h]);return y.useEffect(()=>{s()},[e,s]),y.useEffect(()=>{e!==null&&(e instanceof HTMLElement||sZ(e)?o.setReference(e):o.setReference({getBoundingClientRect:()=>e}))},[e,o]),y.useMemo(()=>({isMounted:c,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...d,...a,zIndex:n},getFloatingProps:p,getReferenceProps:f,isPositioned:l}),[l,a,c,o.setFloating,o.setReference,d,n,p,f])}function Vo(t){const[e,n]=y.useState();return y.useEffect(()=>t(r=>{n({...r})}),[t]),e}const SI=y.createContext(void 0);function J(){return y.useContext(SI)}const Yp=(t={},e=[])=>y.useMemo(()=>{const n=VY.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e);function ue(){return ro().editor.dictionary}function Cv(t,e){const n=ro();e||(e=n==null?void 0:n.editor),y.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}const Sv=t=>{const[e,n]=y.useState(!1),[r,o]=y.useState(t.editor.isEmpty),s=J();Cv(()=>{o(t.editor.isEmpty)},t.editor);const i=y.useCallback(()=>{n(!0)},[]),a=y.useCallback(()=>{n(!1)},[]);return y.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),m.jsxs(m.Fragment,{children:[m.jsx(s.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:i,onBlur:a,editable:t.editable}),t.actions&&m.jsx("div",{className:"bn-comment-actions-wrapper",children:m.jsx(t.actions,{isFocused:e,isEmpty:r})})]})},iZ=$o(Zn(uv.paragraph.implementation.node.config),{}),{textColor:Kye,backgroundColor:Yye,...aZ}=hv,Tv=fv.create({blockSpecs:{paragraph:iZ},styleSpecs:aZ});function lZ(){const t=te();if(!t.comments)throw new Error("Comments plugin not found");const e=t.comments,n=J(),r=ue(),o=Yp({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:Tv,sideMenuDetection:"editor"});return m.jsx(n.Comments.Card,{className:"bn-thread",children:m.jsx(Sv,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:s})=>m.jsx(n.Generic.Toolbar.Root,{className:Be("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:m.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:s,onClick:async()=>{await e.createThread({initialComment:{body:o.document}}),e.stopPendingComment()},children:"Save"})})})})}const cZ=t=>{const e=te();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=e.comments;y.useEffect(()=>{const d=n.onUpdate(u=>e.setForceSelectionVisible(u.pendingComment));return()=>d()},[n,e]);const r=Vo(n.onUpdate.bind(n)),o=oZ(r==null?void 0:r.pendingComment),{isMounted:s,ref:i,style:a,getFloatingProps:l}=Fs((r==null?void 0:r.pendingComment)||!1,o||null,5e3,{placement:"bottom",middleware:[Jr(10),Hi(),ur()],onOpenChange:d=>{d||(n.stopPendingComment(),e.focus())},...t.floatingOptions});if(!s||!r)return null;const c=t.floatingComposer||lZ;return m.jsx("div",{ref:i,style:a,...l(),children:m.jsx(c,{})})};var TI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},KS=I.createContext&&I.createContext(TI),dZ=["attr","size","title"];function uZ(t,e){if(t==null)return{};var n=hZ(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Vf(){return Vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vf.apply(this,arguments)}function YS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Hf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YS(Object(n),!0).forEach(function(r){fZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fZ(t,e,n){return e=pZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pZ(t){var e=mZ(t,"string");return typeof e=="symbol"?e:e+""}function mZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EI(t){return t&&t.map((e,n)=>I.createElement(e.tag,Hf({key:n},e.attr),EI(e.child)))}function oe(t){return e=>I.createElement(gZ,Vf({attr:Hf({},t.attr)},e),EI(t.child))}function gZ(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=uZ(t,dZ),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),I.createElement("svg",Vf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:Hf(Hf({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&I.createElement("title",null,s),t.children)};return KS!==void 0?I.createElement(KS.Consumer,null,n=>e(n)):e(TI)}function yZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function MI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function bZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function vZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function Ev(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function wZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function xZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function kZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function CZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function SZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function TZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function JS(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function AI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function _I(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function RI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function EZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function MZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function ZS(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function AZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function _Z(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function PI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function II(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function DI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function NI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function RZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function PZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function OI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function IZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function DZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function Mv(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function NZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function OZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function LI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function LZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function jZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function BZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function jI(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function $Z(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function VZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function HZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function FZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function zZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function UZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function WZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function GZ(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function XS(t){return oe({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}let zg;async function qZ(){return zg||(zg=(async()=>{const[t,e]=await Promise.all([kt(()=>import("./module-BvCTiNll.js"),[]),kt(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),zg)}function KZ(t){const e=y.useRef(null),n=y.useRef(null);return n.current&&n.current.update(t),y.useEffect(()=>((async()=>{const{emojiMart:r}=await qZ();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),I.createElement("div",{ref:e})}const QS=t=>{const[e,n]=y.useState(!1),r=J(),o=ro();return m.jsxs(r.Generic.Popover.Root,{opened:e,children:[m.jsx(r.Generic.Popover.Trigger,{children:m.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),n(!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),m.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:m.jsx(KZ,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:s=>{t.onEmojiSelect(s),n(!1)},theme:o==null?void 0:o.colorSchemePreference})})]})};function YZ(t,e){return Av(t,[e]).get(e)}function Av(t,e){const n=t.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=y.useCallback(()=>{const a=new Map;for(const l of e){const c=r.getUser(l);c&&a.set(l,c)}return a},[r,e]),s=y.useMemo(()=>({current:o()}),[o]),i=y.useCallback(a=>{const l=r.subscribe(c=>{s.current=o(),a()});return r.loadUsers(e),l},[r,o,e,s]);return y.useSyncExternalStore(i,()=>s.current)}const JZ=t=>{const e=J(),n=ue(),r=te();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=t.comment.reactions.find(l=>l.emoji===t.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[s,i]=y.useState([]),a=Av(r,s);return m.jsx(e.Generic.Badge.Root,{className:Be("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(t.comment,o.emoji),onClick:()=>t.onReactionSelect(o.emoji),onMouseEnter:()=>i(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},o.emoji)},ZZ=({comment:t,thread:e,showResolveButton:n})=>{const r=ue(),o=Yp({initialContent:t.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:Tv,sideMenuDetection:"editor"},[t.body]),s=J(),[i,a]=y.useState(!1),l=te();if(!l.comments)throw new Error("Comments plugin not found");const c=l.comments.threadStore,d=y.useCallback(()=>{a(!0)},[]),u=y.useCallback(()=>{o.replaceBlocks(o.document,t.body),a(!1)},[o,t.body]),h=y.useCallback(async E=>{await c.updateComment({commentId:t.id,comment:{body:o.document},threadId:e.id}),a(!1)},[t,e.id,o,c]),f=y.useCallback(async()=>{await c.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,c]),p=y.useCallback(async E=>{c.auth.canAddReaction(t,E)?await c.addReaction({threadId:e.id,commentId:t.id,emoji:E}):c.auth.canDeleteReaction(t,E)&&await c.deleteReaction({threadId:e.id,commentId:t.id,emoji:E})},[c,t,e.id]),g=y.useCallback(async()=>{await c.resolveThread({threadId:e.id})},[e.id,c]),b=y.useCallback(async()=>{await c.unresolveThread({threadId:e.id})},[e.id,c]),v=YZ(l,t.userId);if(!t.body)return null;let x;const w=c.auth.canAddReaction(t),k=c.auth.canDeleteComment(t),C=c.auth.canUpdateComment(t),S=n&&(e.resolved?c.auth.canUnresolveThread(e):c.auth.canResolveThread(e));i||(x=m.jsxs(s.Generic.Toolbar.Root,{className:Be("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[w&&m.jsx(QS,{onEmojiSelect:E=>p(E.native),children:m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:m.jsx(XS,{size:16})},"add-reaction")}),S&&(e.resolved?m.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:b,children:m.jsx(yZ,{size:16})},"reopen"):m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:g,children:m.jsx(VZ,{size:16})},"resolve")),(k||C)&&m.jsxs(s.Generic.Menu.Root,{position:"bottom-start",children:[m.jsx(s.Generic.Menu.Trigger,{children:m.jsx(s.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:m.jsx(WZ,{size:16})},"more-actions")}),m.jsxs(s.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[C&&m.jsx(s.Generic.Menu.Item,{icon:m.jsx(bZ,{}),onClick:d,children:r.comments.actions.edit_comment},"edit-comment"),k&&m.jsx(s.Generic.Menu.Item,{icon:m.jsx(FZ,{}),onClick:f,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const T=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return m.jsx(s.Comments.Comment,{authorInfo:v??"loading",timeString:T,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:x,className:"bn-thread-comment",children:m.jsx(Sv,{autoFocus:i,editor:o,editable:i,actions:t.reactions.length>0||i?({isEmpty:E})=>m.jsxs(m.Fragment,{children:[t.reactions.length>0&&!i&&m.jsxs(s.Generic.Badge.Group,{className:Be("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(M=>m.jsx(JZ,{comment:t,emoji:M.emoji,onReactionSelect:p},M.emoji)),m.jsx(QS,{onEmojiSelect:M=>p(M.native),children:m.jsx(s.Generic.Badge.Root,{className:Be("bn-badge","bn-comment-add-reaction"),text:"+",icon:m.jsx(XS,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),i&&m.jsxs(s.Generic.Toolbar.Root,{variant:"action-toolbar",className:Be("bn-action-toolbar","bn-comment-actions"),children:[m.jsx(s.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",onClick:h,isDisabled:E,children:"Save"}),m.jsx(s.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Cancel",variant:"compact",onClick:u,children:"Cancel"})]})]}):void 0})})},XZ=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=J(),r=ue(),o=te(),s=Av(o,t.resolvedBy?[t.resolvedBy]:[]),i=t.comments.map((a,l)=>m.jsx(ZZ,{thread:t,comment:a,showResolveButton:l===0},a.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!s.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const a=t.comments.findLastIndex(l=>t.resolvedUpdatedAt.getTime()>l.createdAt.getTime())+1;i.splice(a,0,m.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&s.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:m.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&i.length>e&&i.splice(1,i.length-2,m.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),i},BI=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:s,tabIndex:i})=>{const a=J(),l=ue(),c=te().comments;if(!c)throw new Error("Comments plugin not found");const d=Yp({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:Tv,sideMenuDetection:"editor"}),u=y.useCallback(async()=>{await c.threadStore.addComment({comment:{body:d.document},threadId:t.id}),d.removeBlocks(d.document)},[c,d,t.id]);return m.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:s,selected:e,tabIndex:i,children:[m.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:m.jsx(XZ,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&m.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:m.jsx(Sv,{autoFocus:!1,editable:!0,editor:d,actions:({isEmpty:h})=>h?null:m.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Be("bn-action-toolbar","bn-comment-actions"),children:m.jsx(a.Generic.Toolbar.Button,{mainTooltip:"Save",variant:"compact",isDisabled:h,onClick:u,children:"Save"})})})})]})};function QZ(t){const e=t.comments;if(!e)throw new Error("Comments plugin not found");const n=e.threadStore,r=y.useRef();r.current||(r.current=n.getThreads());const o=y.useCallback(s=>n.subscribe(i=>{r.current=i,s()}),[n]);return y.useSyncExternalStore(o,()=>r.current)}const eX=t=>{const e=te();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=Vo(e.comments.onUpdate.bind(e.comments)),{isMounted:r,ref:o,style:s,getFloatingProps:i,setReference:a}=Fs(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[Jr(10),Hi(),ur()],onOpenChange:u=>{var h;u||((h=e.comments)==null||h.selectThread(void 0),e.focus())},...t.floatingOptions}),l=y.useCallback(()=>{var u;if(!(n!=null&&n.selectedThreadId))return;const h=(u=e.domElement)==null?void 0:u.querySelector(`[data-bn-thread-id="${n==null?void 0:n.selectedThreadId}"]`);h&&a(h)},[a,e,n==null?void 0:n.selectedThreadId]);y.useEffect(()=>{if(n!=null&&n.selectedThreadId)return e.onChange(()=>{l()})},[e,l,n==null?void 0:n.selectedThreadId]),y.useLayoutEffect(l,[l]);const c=QZ(e);if(!r||!n||!n.selectedThreadId)return null;const d=t.floatingThread||BI;return m.jsx("div",{ref:o,style:s,...i(),children:m.jsx(d,{thread:c.get(n.selectedThreadId),selected:!0})})},tX=t=>{const e=J(),n=ue(),{block:r}=t,o=te(),[s,i]=y.useState(""),a=y.useCallback(d=>{i(d.currentTarget.value)},[]),l=y.useCallback(d=>{d.key==="Enter"&&(d.preventDefault(),o.updateBlock(r,{props:{name:dS(s),url:s}}))},[o,r,s]),c=y.useCallback(()=>{o.updateBlock(r,{props:{name:dS(s),url:s}})},[o,r,s]);return m.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[m.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:s,onChange:a,onKeyDown:l,"data-test":"embed-input"}),m.jsx(e.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},nX=t=>{var e;const n=J(),r=ue(),{block:o,setLoading:s}=t,i=te(),[a,l]=y.useState(!1);y.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const c=y.useCallback(h=>{if(h===null)return;async function f(p){if(s(!0),i.uploadFile!==void 0)try{let g=await i.uploadFile(p,o.id);typeof g=="string"&&(g={props:{name:p.name,url:g}}),i.updateBlock(o,g)}catch{l(!0)}finally{s(!1)}}f(h)},[o,i,s]),d=i.schema.blockSchema[o.type],u=d.isFileBlock&&(e=d.fileBlockAccept)!=null&&e.length?d.fileBlockAccept.join(","):"*/*";return m.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[m.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:u,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),a&&m.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},$I=t=>{const e=J(),n=ue(),r=te(),[o,s]=y.useState(!1),i=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:m.jsx(nX,{block:t.block,setLoading:s})}]:[],{name:n.file_panel.embed.title,tabPanel:m.jsx(tX,{block:t.block})}],[a,l]=y.useState(t.defaultOpenTab||i[0].name);return m.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:i,loading:o})},rX=t=>{const e=te();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=Vo(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:r,ref:o,style:s,getFloatingProps:i}=Fs((n==null?void 0:n.show)||!1,(n==null?void 0:n.referencePos)||null,5e3,{placement:"bottom",middleware:[Jr(10),ur()],onOpenChange:u=>{u||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...c}=n,d=t.filePanel||$I;return m.jsx("div",{ref:o,style:s,...i(),children:m.jsx(d,{...c})})};function zs(t,e){Cv(t,e),kv(t,e)}function _v(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function pn(t){const e=ro();if(t||(t=e==null?void 0:e.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=t,[r,o]=y.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]});return zs(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},n),r}const oX={bold:SZ,italic:AZ,underline:NZ,strike:IZ,code:vZ};function sX(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const Uu=t=>{const e=ue(),n=J(),r=te(),o=sX(t.basicTextStyle,r),s=pn(r),[i,a]=y.useState(t.basicTextStyle in r.getActiveStyles());zs(()=>{o&&a(t.basicTextStyle in r.getActiveStyles())},r);const l=d=>{if(r.focus(),!!o){if(r.schema.styleSchema[d].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[d]:!0})}};if(!y.useMemo(()=>o?!!s.find(d=>d.content!==void 0):!1,[o,s])||!r.isEditable)return null;const c=oX[t.basicTextStyle];return m.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>l(t.basicTextStyle),isSelected:i,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:Bn(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:m.jsx(c,{})})},Xb=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,o=y.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return m.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:o,children:"A"})},e2=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],Jp=t=>{const e=J(),n=ue();return m.jsxs(m.Fragment,{children:[m.jsx(()=>t.text?m.jsxs(m.Fragment,{children:[m.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),e2.map(r=>m.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:m.jsx(Xb,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),m.jsx(()=>t.background?m.jsxs(m.Fragment,{children:[m.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),e2.map(r=>m.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:m.jsx(Xb,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function t2(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const iX=()=>{const t=J(),e=ue(),n=te(),r=t2("text",n),o=t2("background",n),s=pn(n),[i,a]=y.useState(r&&n.getActiveStyles().textColor||"default"),[l,c]=y.useState(o&&n.getActiveStyles().backgroundColor||"default");zs(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&c(n.getActiveStyles().backgroundColor||"default")},n);const d=y.useCallback(h=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");h==="default"?n.removeStyles({textColor:h}):n.addStyles({textColor:h}),setTimeout(()=>{n.focus()})},[n,r]),u=y.useCallback(h=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");h==="default"?n.removeStyles({backgroundColor:h}):n.addStyles({backgroundColor:h}),setTimeout(()=>{n.focus()})},[o,n]);return!y.useMemo(()=>{if(!r&&!o)return!1;for(const h of s)if(h.content!==void 0)return!0;return!1},[o,s,r])||!n.isEditable?null:m.jsxs(t.Generic.Menu.Root,{children:[m.jsx(t.Generic.Menu.Trigger,{children:m.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:m.jsx(Xb,{textColor:i,backgroundColor:l,size:20})})}),m.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Jp,{text:r?{color:i,setColor:d}:void 0,background:o?{color:l,setColor:u}:void 0})})]})},n2=t=>{for(const e of ZP)if(t.startsWith(e))return t;return`${XP}://${t}`},VI=t=>{const e=J(),n=ue(),{url:r,text:o,editLink:s,showTextField:i}=t,[a,l]=y.useState(r),[c,d]=y.useState(o);y.useEffect(()=>{l(r),d(o)},[o,r]);const u=y.useCallback(g=>{g.key==="Enter"&&(g.preventDefault(),s(n2(a),c))},[s,a,c]),h=y.useCallback(g=>l(g.currentTarget.value),[]),f=y.useCallback(g=>d(g.currentTarget.value),[]),p=y.useCallback(()=>s(n2(a),c),[s,a,c]);return m.jsxs(e.Generic.Form.Root,{children:[m.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:m.jsx(PI,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:u,onChange:h,onSubmit:p}),i!==!1&&m.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:m.jsx(Mv,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:u,onChange:f,onSubmit:p})]})};function aX(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const lX=()=>{var t;const e=te(),n=J(),r=ue(),o=aX(e),s=pn(e),[i,a]=y.useState(!1),[l,c]=y.useState(e.getSelectedLinkUrl()||""),[d,u]=y.useState(e.getSelectedText());zs(()=>{u(e.getSelectedText()||""),c(e.getSelectedLinkUrl()||"")},e),y.useEffect(()=>{var p;const g=b=>{(b.ctrlKey||b.metaKey)&&b.key==="k"&&(a(!0),b.preventDefault())};return(p=e.prosemirrorView)==null||p.dom.addEventListener("keydown",g),()=>{var b;(b=e.prosemirrorView)==null||b.dom.removeEventListener("keydown",g)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const h=y.useCallback(p=>{e.createLink(p),e.focus()},[e]),f=e.transact(p=>Hb(p.selection));return!y.useMemo(()=>{if(!o)return!1;for(const p of s)if(p.content===void 0)return!1;return!f},[o,s,f])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:m.jsxs(n.Generic.Popover.Root,{opened:i,children:[m.jsx(n.Generic.Popover.Trigger,{children:m.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:Bn(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:m.jsx(PI,{}),onClick:()=>a(!0)})}),m.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(VI,{url:l,text:d,editLink:h,showTextField:!1})})]})},cX=()=>{const t=ue(),e=J(),n=te(),[r,o]=y.useState(),s=pn(n),i=y.useMemo(()=>{if(s.length!==1)return;const c=s[0];if(qd(c,n))return o(c.props.caption),c},[n,s]),a=y.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{caption:r}}))},[r,n,i]),l=y.useCallback(c=>o(c.currentTarget.value),[]);return!i||Kd(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:m.jsx(ZS,{}),isSelected:i.props.caption!==""})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(e.Generic.Form.Root,{children:m.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:m.jsx(ZS,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},dX=()=>{const t=ue(),e=J(),n=te(),r=pn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(qd(i,n))return i},[n,r]),s=y.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||Kd(o,n)||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:m.jsx(HZ,{}),onClick:s})},uX=()=>{const t=ue(),e=J(),n=te(),[r,o]=y.useState(),s=pn(n),i=y.useMemo(()=>{if(s.length!==1)return;const c=s[0];if(qd(c,n))return o(c.props.name),c},[n,s]),a=y.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{name:r}}))},[r,n,i]),l=y.useCallback(c=>o(c.currentTarget.value),[]);return!i||Kd(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:m.jsx(JS,{})})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(e.Generic.Form.Root,{children:m.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:m.jsx(JS,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[i.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},hX=()=>{const t=ue(),e=J(),n=te(),r=pn(n),[o,s]=y.useState(!1);y.useEffect(()=>{s(!1)},[r]);const i=r.length===1?r[0]:void 0;return i===void 0||!qd(i,n)||!n.isEditable?null:m.jsxs(e.Generic.Popover.Root,{opened:o,position:"bottom",children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>s(!o),isSelected:o,mainTooltip:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:m.jsx(jZ,{})})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:m.jsx($I,{block:i})})]})},fX=()=>{const t=ue(),e=J(),n=te(),r=pn(n),[o,s]=y.useState(()=>n.canNestBlock());zs(()=>{s(n.canNestBlock())},n);const i=y.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!y.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:Bn(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:m.jsx(MZ,{})})},pX=()=>{const t=ue(),e=J(),n=te(),r=pn(n),[o,s]=y.useState(()=>n.canUnnestBlock());zs(()=>{s(n.canUnnestBlock())},n);const i=y.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!y.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:Bn(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:m.jsx(EZ,{})})},mX=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:Mv,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:AI,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:_I,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:RI,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.quote.title,type:"quote",icon:OI,isSelected:e=>e.type==="quote"},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:NI,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:DI,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:II,isSelected:e=>e.type==="checkListItem"}],gX=t=>{const e=J(),n=ue(),r=te(),o=pn(r),[s,i]=y.useState(r.getTextCursorPosition().block),a=y.useMemo(()=>(t.items||mX(n)).filter(d=>d.type in r.schema.blockSchema),[r,n,t.items]),l=y.useMemo(()=>a.find(d=>d.type===s.type)!==void 0,[s.type,a]),c=y.useMemo(()=>{const d=u=>{r.focus(),r.transact(()=>{for(const h of o)r.updateBlock(h,{type:u.type,props:u.props})})};return a.map(u=>{const h=u.icon;return{text:u.name,icon:m.jsx(h,{size:16}),onClick:()=>d(u),isSelected:u.isSelected(s)}})},[s,a,r,o]);return zs(()=>{i(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:m.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:c})},yX=()=>{const t=ue(),e=J(),n=te(),r=y.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:m.jsx(MI,{}),onClick:r}):null},bX=()=>{const t=ue(),e=J(),n=te(),r=y.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:m.jsx(MI,{}),onClick:r})};function Qb(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const vX=()=>{const t=ue(),e=J(),n=te(),r=pn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(qd(i,n))return i},[n,r]),s=y.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(i=>window.open(Qb(i,window.location.href))):window.open(Qb(o.props.url,window.location.href)))},[n,o]);return!o||Kd(o,n)?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,icon:m.jsx(zZ,{}),onClick:s})},wX=()=>{const t=ue(),e=J(),n=te(),r=pn(n),o=y.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(Iq(i,n))return i},[n,r]),s=y.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||Kd(o,n)||!n.isEditable?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:m.jsx(LZ,{}),isSelected:o.props.showPreview,onClick:s})},xX=()=>{const t=ue(),e=J(),n=te(),r=pn(n),o=y.useMemo(()=>{var i;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(i=n.tableHandles)==null?void 0:i.getMergeDirection(a)},[n,r]),s=y.useCallback(()=>{var i;(i=n.tableHandles)==null||i.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:m.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?m.jsx(RZ,{}):m.jsx(PZ,{}),onClick:s})},kX={left:kZ,center:wZ,right:CZ,justify:xZ},Ug=t=>{const e=J(),n=ue(),r=te(),o=pn(r),s=y.useMemo(()=>{var l;const c=o[0];if(Vb("textAlignment",c,r))return c.props.textAlignment;if(c.type==="table"){const d=(l=r.tableHandles)==null?void 0:l.getCellSelection();if(!d)return;const u=d.cells.map(({row:f,col:p})=>Ps(c.content.rows[f].cells[p]).props.textAlignment),h=u[0];if(u.every(f=>f===h))return h}},[r,o]),i=y.useCallback(l=>{var c;r.focus();for(const d of o)if(ma("textAlignment",d.type,r))r.updateBlock(d,{props:{textAlignment:l}});else if(d.type==="table"){const u=(c=r.tableHandles)==null?void 0:c.getCellSelection();if(!u)continue;const h=d.content.rows.map(f=>({...f,cells:f.cells.map(p=>Ps(p))}));u.cells.forEach(({row:f,col:p})=>{h[f].cells[p].props.textAlignment=l}),r.updateBlock(d,{type:"table",content:{...d.content,type:"tableContent",rows:h}}),r.setTextCursorPosition(d)}},[r,o]);if(!y.useMemo(()=>!!o.find(l=>"textAlignment"in l.props||l.type==="table"&&l.children),[o])||!r.isEditable)return null;const a=kX[t.textAlignment];return m.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>i(t.textAlignment),isSelected:s===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:m.jsx(a,{})})},HI=t=>[m.jsx(gX,{items:t},"blockTypeSelect"),m.jsx(xX,{},"tableCellMergeButton"),m.jsx(cX,{},"fileCaptionButton"),m.jsx(hX,{},"replaceFileButton"),m.jsx(uX,{},"fileRenameButton"),m.jsx(dX,{},"fileDeleteButton"),m.jsx(vX,{},"fileDownloadButton"),m.jsx(wX,{},"filePreviewButton"),m.jsx(Uu,{basicTextStyle:"bold"},"boldStyleButton"),m.jsx(Uu,{basicTextStyle:"italic"},"italicStyleButton"),m.jsx(Uu,{basicTextStyle:"underline"},"underlineStyleButton"),m.jsx(Uu,{basicTextStyle:"strike"},"strikeStyleButton"),m.jsx(Ug,{textAlignment:"left"},"textAlignLeftButton"),m.jsx(Ug,{textAlignment:"center"},"textAlignCenterButton"),m.jsx(Ug,{textAlignment:"right"},"textAlignRightButton"),m.jsx(iX,{},"colorStyleButton"),m.jsx(fX,{},"nestBlockButton"),m.jsx(pX,{},"unnestBlockButton"),m.jsx(lX,{},"createLinkButton"),m.jsx(yX,{},"addCommentButton"),m.jsx(bX,{},"addTiptapCommentButton")],FI=t=>{const e=J();return m.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||HI(t.blockTypeSelectItems)})},r2=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},zI=t=>{const e=y.useRef(null),n=te(),[r,o]=y.useState(()=>{const h=n.getTextCursorPosition().block;return"textAlignment"in h.props?r2(h.props.textAlignment):"top-start"});zs(()=>{const h=n.getTextCursorPosition().block;"textAlignment"in h.props?o(r2(h.props.textAlignment)):o("top-start")},n);const s=Vo(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:i,ref:a,style:l,getFloatingProps:c}=Fs((s==null?void 0:s.show)||!1,(s==null?void 0:s.referencePos)||null,3e3,{placement:r,middleware:[Jr(10),Hi(),ur()],onOpenChange:(h,f)=>{h||(n.formattingToolbar.closeMenu(),n.focus())},...t.floatingOptions}),d=y.useMemo(()=>_v([e,a]),[e,a]);if(!i||!s)return null;if(!s.show&&e.current)return m.jsx("div",{ref:d,style:l,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const u=t.formattingToolbar||FI;return m.jsx("div",{ref:d,style:l,...c(),children:m.jsx(u,{})})},CX=t=>{const e=J(),n=ue();return m.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:m.jsx(_Z,{})})},SX=t=>{const e=J(),n=ue();return m.jsxs(e.Generic.Popover.Root,{children:[m.jsx(e.Generic.Popover.Trigger,{children:m.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),m.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:m.jsx(VI,{...t})})]})},TX=t=>{const e=J(),n=ue();return m.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(Qb(t.url,window.location.href),"_blank")},icon:m.jsx(UZ,{})})},EX=t=>{const e=J();return t.children?m.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children}):m.jsxs(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:[m.jsx(SX,{url:t.url,text:t.text,editLink:t.editLink}),m.jsx(TX,{url:t.url}),m.jsx(CX,{deleteLink:t.deleteLink})]})},MX=t=>{const e=te(),n={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},r=Vo(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=Fs((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,4e3,{placement:"top-start",middleware:[Jr(10),ur()],onOpenChange:h=>{h||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.linkToolbar||EX;return m.jsx("div",{ref:s,style:i,...a(),children:m.jsx(u,{...d,...n})})};function AX(t){return oe({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const _X=t=>{const e=J(),n=ue(),r=te(),o=y.useCallback(()=>{const s=t.block.content;if(s!==void 0&&Array.isArray(s)&&s.length===0)r.setTextCursorPosition(t.block),r.openSuggestionMenu("/");else{const i=r.insertBlocks([{type:"paragraph"}],t.block,"after")[0];r.setTextCursorPosition(i),r.openSuggestionMenu("/")}},[r,t.block]);return m.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:m.jsx(AX,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function UI(t){return oe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function RX(t){return oe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const PX=t=>{const e=J(),n=te();return!ma("textColor",t.block.type,n)&&!ma("backgroundColor",t.block.type,n)?null:m.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(e.Generic.Menu.Trigger,{sub:!0,children:m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),m.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Jp,{iconSize:18,text:ma("textColor",t.block.type,n)&&Vb("textColor",t.block,n)?{color:t.block.props.textColor,setColor:r=>n.updateBlock(t.block,{type:t.block.type,props:{textColor:r}})}:void 0,background:ma("backgroundColor",t.block.type,n)&&Vb("backgroundColor",t.block,n)?{color:t.block.props.backgroundColor,setColor:r=>n.updateBlock(t.block,{props:{backgroundColor:r}})}:void 0})})]})},IX=t=>{const e=J(),n=te();return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([t.block]),children:t.children})},DX=t=>{const e=J(),n=te();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerRows;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(t.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:t.children})},NX=t=>{const e=J(),n=te();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerCols;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(t.block,{type:"table",content:{...t.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:t.children})},OX=t=>{const e=J(),n=ue();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(IX,{...t,children:n.drag_handle.delete_menuitem}),m.jsx(PX,{...t,children:n.drag_handle.colors_menuitem}),m.jsx(DX,{...t,children:n.drag_handle.header_row_menuitem}),m.jsx(NX,{...t,children:n.drag_handle.header_column_menuitem})]})})},LX=t=>{const e=J(),n=ue(),r=t.dragHandleMenu||OX;return m.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>t.blockDragStart(o,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:m.jsx(UI,{size:24,"data-test":"dragHandle"})})}),m.jsx(r,{block:t.block,children:t.children})]})},jX=t=>{const e=J(),n=y.useMemo(()=>{const r={"data-block-type":t.block.type};return t.block.type==="heading"&&(r["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[t.block,t.editor.schema.blockSchema]);return m.jsx(e.SideMenu.Root,{className:"bn-side-menu",...n,children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(_X,{...t}),m.jsx(LX,{...t})]})})},BX=t=>{const e=te(),n={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},r=Vo(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=Fs((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,1e3,{placement:"left-start",...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.sideMenu||jX;return m.jsx("div",{ref:s,style:i,...a(),children:m.jsx(u,{...d,...n,editor:e})})};async function $X(t,e){return(await FY(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function VX(t){const e=J(),n=ue(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i,columns:a}=t,l=o==="loading-initial"||o==="loading"?m.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,c=y.useMemo(()=>{const d=[];for(let u=0;u<r.length;u++){const h=r[u];d.push(m.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:h,id:`bn-grid-suggestion-menu-item-${u}`,isSelected:u===s,onClick:()=>i==null?void 0:i(h)},h.id))}return d},[e,r,i,s]);return m.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&t.loadingState==="loaded"&&m.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function WI(t,e,n,r=3){const o=y.useRef(0);y.useEffect(()=>{e!==void 0&&(t.length>0?o.current=e.length:e.length-o.current>r&&n())},[n,r,t.length,e])}function GI(t,e){const[n,r]=y.useState([]),[o,s]=y.useState(!1),i=y.useRef(),a=y.useRef();return y.useEffect(()=>{const l=t;i.current=t,s(!0),e(t).then(c=>{i.current===l&&(r(c),s(!1),a.current=l)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function HX(t,e,n,r,o){const[s,i]=y.useState(0),a=r!==void 0&&r>1;return y.useEffect(()=>{var l;const c=d=>(d.key==="ArrowLeft"&&(d.preventDefault(),n.length&&i((s-1+n.length)%n.length)),d.key==="ArrowRight"&&(d.preventDefault(),n.length&&i((s+1+n.length)%n.length)),d.key==="ArrowUp"?(d.preventDefault(),n.length&&i((s-r+n.length)%n.length),!0):d.key==="ArrowDown"?(d.preventDefault(),n.length&&i((s+r)%n.length),!0):d.key==="Enter"&&!d.isComposing?(d.stopPropagation(),d.preventDefault(),n.length&&(o==null||o(n[s])),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",c,!0)}},[t.domElement,n,s,o,r,a]),y.useEffect(()=>{i(0)},[e]),{selectedIndex:n.length===0?void 0:s}}function FX(t){const e=ro().setContentEditableProps,n=te(),{getItems:r,gridSuggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l,columns:c}=t,d=y.useCallback(g=>{a(),i(),l==null||l(g)},[l,a,i]),{items:u,usedQuery:h,loadingState:f}=GI(s,r);WI(u,h,a);const{selectedIndex:p}=HX(n,s,u,c,d);return y.useEffect(()=>(e(g=>({...g,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(g=>({...g,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),y.useEffect(()=>(e(g=>({...g,"aria-activedescendant":p?"bn-suggestion-menu-item-"+p:void 0})),()=>{e(g=>({...g,"aria-activedescendant":void 0}))}),[e,p]),m.jsx(o,{items:u,onItemClick:d,loadingState:f,selectedIndex:p,columns:c})}function zX(t){const e=te(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:s,onItemClick:i,getItems:a,floatingOptions:l}=t,c=y.useMemo(()=>i||(x=>{x.onItemClick(e)}),[e,i]),d=y.useMemo(()=>a||(async x=>await $X(e,x)),[e,a]),u={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},h=y.useCallback(x=>e.suggestionMenus.onUpdate(n,x),[e.suggestionMenus,n]),f=Vo(h),{isMounted:p,ref:g,style:b,getFloatingProps:v}=Fs((f==null?void 0:f.show)||!1,(f==null?void 0:f.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Jr(10),ur(),cp({apply({availableHeight:x,elements:w}){Object.assign(w.floating.style,{maxHeight:`${x-10}px`})}})],onOpenChange(x){x||e.suggestionMenus.closeMenu()},...l});return!p||!f||!(f!=null&&f.ignoreQueryLength)&&s&&(f.query.startsWith(" ")||f.query.length<s)?null:m.jsx("div",{ref:g,style:b,...v(),children:m.jsx(FX,{query:f.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:d,columns:o,gridSuggestionMenuComponent:r||VX,onItemClick:c})})}function UX(t){const e=J(),n=ue(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i}=t,a=o==="loading-initial"||o==="loading"?m.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=y.useMemo(()=>{let c;const d=[];for(let u=0;u<r.length;u++){const h=r[u];h.group!==c&&(c=h.group,d.push(m.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),d.push(m.jsx(e.SuggestionMenu.Item,{className:Be("bn-suggestion-menu-item",h.size==="small"?"bn-suggestion-menu-item-small":""),item:h,id:`bn-suggestion-menu-item-${u}`,isSelected:u===s,onClick:()=>i==null?void 0:i(h)},h.title))}return d},[e,r,i,s]);return m.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&m.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function WX(t,e){const[n,r]=y.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),t.length&&r((n+1)%t.length),!0;const s=GX(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!s?(o.preventDefault(),o.stopPropagation(),t.length&&(e==null||e(t[n])),!0):!1}}}function GX(t){return t.nativeEvent!==void 0}function qX(t,e,n,r,o){const{selectedIndex:s,setSelectedIndex:i,handler:a}=WX(n,r);return y.useEffect(()=>{var l;return(l=t.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var c;(c=t.domElement)==null||c.removeEventListener("keydown",a,!0)}},[t.domElement,n,s,r,o,a]),y.useEffect(()=>{i(0)},[e,i]),{selectedIndex:n.length===0?void 0:s}}function KX(t){const e=ro().setContentEditableProps,n=te(),{getItems:r,suggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l}=t,c=y.useCallback(p=>{a(),i(),l==null||l(p)},[l,a,i]),{items:d,usedQuery:u,loadingState:h}=GI(s,r);WI(d,u,a);const{selectedIndex:f}=qX(n,s,d,c);return y.useEffect(()=>(e(p=>({...p,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(p=>({...p,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),y.useEffect(()=>(e(p=>({...p,"aria-activedescendant":f?"bn-suggestion-menu-item-"+f:void 0})),()=>{e(p=>({...p,"aria-activedescendant":void 0}))}),[e,f]),m.jsx(o,{items:d,onItemClick:c,loadingState:h,selectedIndex:f})}const YX={heading:AI,heading_2:_I,heading_3:RI,quote:OI,numbered_list:DI,bullet_list:NI,check_list:II,paragraph:Mv,table:DZ,image:LI,video:OZ,audio:jI,file:Ev,emoji:GZ,code_block:TZ};function JX(t){return Nq(t).map(e=>{const n=YX[e.key];return{...e,icon:m.jsx(n,{size:18})}})}function ZX(t){const e=te(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:s,getItems:i,floatingOptions:a}=t,l=y.useMemo(()=>s||(v=>{v.onItemClick(e)}),[e,s]),c=y.useMemo(()=>i||(async v=>Oq(JX(e),v)),[e,i]),d={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},u=y.useCallback(v=>e.suggestionMenus.onUpdate(n,v),[e.suggestionMenus,n]),h=Vo(u),{isMounted:f,ref:p,style:g,getFloatingProps:b}=Fs((h==null?void 0:h.show)||!1,(h==null?void 0:h.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Jr(10),ur({mainAxis:!0,crossAxis:!1}),Hi(),cp({apply({availableHeight:v,elements:x}){Object.assign(x.floating.style,{maxHeight:`${v-10}px`})}})],onOpenChange(v){v||e.suggestionMenus.closeMenu()},...a});return!f||!h||!(h!=null&&h.ignoreQueryLength)&&o&&(h.query.startsWith(" ")||h.query.length<o)?null:m.jsx("div",{ref:p,style:g,...b(),children:m.jsx(KX,{query:h.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:c,suggestionMenuComponent:r||UX,onItemClick:l})})}const XX=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},QX=t=>{const e=J(),n=y.useRef(!1),[r,o]=y.useState(),s=y.useCallback(a=>{t.onMouseDown(),o({originalContent:t.block.content,originalCroppedContent:{rows:t.editor.tableHandles.cropEmptyRowsOrColumns(t.block,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[t]),i=y.useCallback(()=>{n.current||t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns(t.block,"columns",1):t.editor.tableHandles.addRowsOrColumns(t.block,"rows",1)}})},[t.block,t.orientation,t.editor]);return y.useEffect(()=>{const a=l=>{var c,d;if(!r)throw new Error("editingState is undefined");n.current=!0;const u=(t.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,h=t.orientation==="addOrRemoveColumns"?((c=r.originalCroppedContent.rows[0])==null?void 0:c.cells.length)??0:r.originalCroppedContent.rows.length,f=t.orientation==="addOrRemoveColumns"?((d=r.originalContent.rows[0])==null?void 0:d.cells.length)??0:r.originalContent.rows.length,p=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,g=f+XX(u/(t.orientation==="addOrRemoveColumns"?dv:gq),.3);g>=h&&g>0&&g!==p&&(t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",g-h):t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",g-h)}}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,t.block,t.editor,t.orientation]),y.useEffect(()=>{const a=t.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,t.onMouseUp]),m.jsx(e.TableHandle.ExtendButton,{className:Be("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:i,onMouseDown:s,children:t.children||m.jsx($Z,{size:18,"data-test":"extendButton"})})},o2=t=>{const e=J(),n=ue(),r=te().tableHandles;return r?m.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(t.index,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]}):null},eQ=t=>{const e=J(),n=ue(),r=te().tableHandles;return r?m.jsx(e.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(t.index,t.orientation)},children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},tQ=t=>{const e=J(),n=ue(),r=te(),o=r.tableHandles,s=y.useMemo(()=>!o||!t.block?[]:t.orientation==="row"?o.getCellsAtRowHandle(t.block,t.index):o.getCellsAtColumnHandle(t.block,t.index),[t.block,t.index,t.orientation,o]),i=(l,c)=>{const d=t.block.content.rows.map(u=>({...u,cells:u.cells.map(h=>Ps(h))}));s.forEach(({row:u,col:h})=>{c==="text"?d[u].cells[h].props.textColor=l:d[u].cells[h].props.backgroundColor=l}),r.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),r.setTextCursorPosition(t.block)};if(!s||!s[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=Ps(s[0].cell);return m.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(e.Generic.Menu.Trigger,{sub:!0,children:m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),m.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Jp,{iconSize:18,text:r.settings.tables.cellTextColor?{color:s.every(({cell:l})=>Is(l)&&l.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:l=>{i(l,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:s.every(({cell:l})=>Is(l)&&l.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:l=>i(l,"background")}:void 0})})]})},nQ=t=>{const e=J(),n=ue(),r=te();if(!r.tableHandles||t.index!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerRows;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},rQ=t=>{const e=J(),n=ue(),r=te();if(!r.tableHandles||t.index!==0||t.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerCols;return m.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},oQ=t=>{const e=J();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(eQ,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(o2,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),m.jsx(o2,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"}),m.jsx(nQ,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(rQ,{orientation:t.orientation,block:t.block,index:t.index}),m.jsx(tQ,{orientation:t.orientation,block:t.block,index:t.index})]})})},sQ=t=>{const e=J(),[n,r]=y.useState(!1),o=t.tableHandleMenu||oQ,s=y.useMemo(()=>{const i=t.editor.tableHandles;return!i||!t.block||t.block.type!=="table"?!1:t.orientation==="column"?i.getCellsAtColumnHandle(t.block,t.index).every(({cell:a})=>Bi(a)===1):i.getCellsAtRowHandle(t.block,t.index).every(({cell:a})=>id(a)===1)},[t.block,t.editor.tableHandles,t.index,t.orientation]);return m.jsxs(e.Generic.Menu.Root,{onOpenChange:i=>{i?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.TableHandle.Root,{className:Be("bn-table-handle",n?"bn-table-handle-dragging":"",s?"":"bn-table-handle-not-draggable"),draggable:s,onDragStart:i=>{r(!0),t.dragStart(i)},onDragEnd:()=>{t.dragEnd(),r(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||m.jsx(UI,{size:24,"data-test":"tableHandle"})})}),St.createPortal(m.jsx(o,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function s2(t,e,n){const{refs:r,update:o,context:s,floatingStyles:i}=al({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[cp({apply({rects:c,elements:d}){Object.assign(d.floating.style,t==="addOrRemoveColumns"?{height:`${c.reference.height}px`}:{width:`${c.reference.width}px`})}})]}),{isMounted:a,styles:l}=xv(s);return y.useEffect(()=>{o()},[n,o]),y.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[t,n,r]),y.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...i}}),[i,a,r.setFloating,l])}function iQ(t,e,n){const r=s2("addOrRemoveRows",e,n),o=s2("addOrRemoveColumns",t,n);return y.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function aQ(t,e,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(e.x,n.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function lQ(t,e,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function cQ(t){return new DOMRect(t.x,t.y,t.width,0)}function Wg(t,e,n,r,o){const{refs:s,update:i,context:a,floatingStyles:l}=al({open:e,placement:t==="row"?"left":t==="col"?"top":"bottom-end",middleware:[Jr(t==="row"?-10:t==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:c,styles:d}=xv(a);return y.useEffect(()=>{i()},[n,r,i]),y.useEffect(()=>{n===null||r===null||o&&t==="cell"||s.setReference({getBoundingClientRect:()=>(t==="row"?aQ:t==="col"?lQ:cQ)(n,r,o)})},[o,t,n,r,s]),y.useMemo(()=>({isMounted:c,ref:s.setFloating,style:{display:"flex",...d,...l}}),[l,c,s.setFloating,d])}function dQ(t,e,n,r){const o=Wg("row",t,e,n,r),s=Wg("col",t,e,n,r),i=Wg("cell",t,e,n,r);return y.useMemo(()=>({rowHandle:o,colHandle:s,cellHandle:i}),[s,o,i])}const uQ=t=>{var e,n;const r=J(),o=ue(),s=te(),i=(l,c)=>{const d=t.block.content.rows.map(u=>({...u,cells:u.cells.map(h=>Ps(h))}));c==="text"?d[t.rowIndex].cells[t.colIndex].props.textColor=l:d[t.rowIndex].cells[t.colIndex].props.backgroundColor=l,s.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),s.setTextCursorPosition(t.block)},a=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!a||s.settings.tables.cellTextColor===!1&&s.settings.tables.cellBackgroundColor===!1?null:m.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[m.jsx(r.Generic.Menu.Trigger,{sub:!0,children:m.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||o.drag_handle.colors_menuitem})}),m.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:m.jsx(Jp,{iconSize:18,text:s.settings.tables.cellTextColor?{color:Is(a)?a.props.textColor:"default",setColor:l=>i(l,"text")}:void 0,background:s.settings.tables.cellBackgroundColor?{color:Is(a)?a.props.backgroundColor:"default",setColor:l=>i(l,"background")}:void 0})})]})},hQ=t=>{var e,n;const r=J(),o=ue(),s=te(),i=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!i||!Is(i)||id(i)===1&&Bi(i)===1||!s.settings.tables.splitCells?null:m.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=s.tableHandles)==null||a.splitCell({row:t.rowIndex,col:t.colIndex})},children:o.table_handle.split_cell_menuitem})},fQ=t=>{const e=J();return m.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||m.jsxs(m.Fragment,{children:[m.jsx(hQ,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),m.jsx(uQ,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex})]})})},pQ=t=>{const e=J(),n=t.tableCellMenu||fQ;return!t.editor.settings.tables.splitCells&&!t.editor.settings.tables.cellBackgroundColor&&!t.editor.settings.tables.cellTextColor?null:m.jsxs(e.Generic.Menu.Root,{onOpenChange:r=>{r?t.freezeHandles():(t.unfreezeHandles(),t.editor.focus())},position:"right",children:[m.jsx(e.Generic.Menu.Trigger,{children:m.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||m.jsx(RX,{size:12,"data-test":"tableCellHandle"})})}),St.createPortal(m.jsx(n,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),t.menuContainer)]})},mQ=t=>{var e,n;const r=te(),[o,s]=y.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const i={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=i,c=y.useCallback(()=>{a(),C(!0),w(!0)},[a]),d=y.useCallback(()=>{l(),C(!1),w(!1)},[l]),u=Vo(r.tableHandles.onUpdate.bind(r.tableHandles)),h=y.useMemo(()=>{var M,_;return u!=null&&u.draggingState?{draggedCellOrientation:(M=u==null?void 0:u.draggingState)==null?void 0:M.draggedCellOrientation,mousePos:(_=u==null?void 0:u.draggingState)==null?void 0:_.mousePos}:void 0},[u==null?void 0:u.draggingState,(e=u==null?void 0:u.draggingState)==null?void 0:e.draggedCellOrientation,(n=u==null?void 0:u.draggingState)==null?void 0:n.mousePos]),{rowHandle:f,colHandle:p,cellHandle:g}=dQ((u==null?void 0:u.show)||!1,(u==null?void 0:u.referencePosCell)||null,(u==null?void 0:u.referencePosTable)||null,h),{addOrRemoveColumnsButton:b,addOrRemoveRowsButton:v}=iQ((u==null?void 0:u.showAddOrRemoveColumnsButton)||!1,(u==null?void 0:u.showAddOrRemoveRowsButton)||!1,(u==null?void 0:u.referencePosTable)||null),[x,w]=y.useState(!1),[k,C]=y.useState(!1);if(!u)return null;const S=t.tableHandle||sQ,T=t.extendButton||QX,E=t.tableCellHandle||pQ;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:s}),m.jsxs(PJ,{root:u.widgetContainer,children:[!x&&o&&f.isMounted&&u.rowIndex!==void 0&&m.jsx("div",{ref:f.ref,style:f.style,children:m.jsx(S,{editor:r,orientation:"row",showOtherSide:()=>C(!1),hideOtherSide:()=>C(!0),index:u.rowIndex,block:u.block,dragStart:i.rowDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),!k&&o&&p.isMounted&&u.colIndex!==void 0&&m.jsx("div",{ref:p.ref,style:p.style,children:m.jsx(S,{editor:r,orientation:"column",showOtherSide:()=>w(!1),hideOtherSide:()=>w(!0),index:u.colIndex,block:u.block,dragStart:i.colDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),o&&g.isMounted&&u.colIndex!==void 0&&u.rowIndex!==void 0&&m.jsx("div",{ref:g.ref,style:g.style,children:m.jsx(E,{editor:r,block:u.block,rowIndex:u.rowIndex,colIndex:u.colIndex,menuContainer:o,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles})}),m.jsx("div",{ref:v.ref,style:v.style,children:m.jsx(T,{editor:r,orientation:"addOrRemoveRows",block:u.block,onMouseDown:c,onMouseUp:d})}),m.jsx("div",{ref:b.ref,style:b.style,children:m.jsx(T,{editor:r,orientation:"addOrRemoveColumns",block:u.block,onMouseDown:c,onMouseUp:d})})]})]})};function gQ(t){const e=te();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return m.jsxs(m.Fragment,{children:[t.formattingToolbar!==!1&&m.jsx(zI,{}),t.linkToolbar!==!1&&m.jsx(MX,{}),t.slashMenu!==!1&&m.jsx(ZX,{triggerCharacter:"/"}),t.emojiPicker!==!1&&m.jsx(zX,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&m.jsx(BX,{}),e.filePanel&&t.filePanel!==!1&&m.jsx(rX,{}),e.tableHandles&&t.tableHandles!==!1&&m.jsx(mQ,{}),e.comments&&t.comments!==!1&&m.jsxs(m.Fragment,{children:[m.jsx(cZ,{}),m.jsx(eX,{})]})]})}const qI=()=>{const t=y.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)")},[]),e=y.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: light)")},[]),n=t==null?void 0:t.matches,r=e==null?void 0:e.matches,[o,s]=y.useState(n?"dark":r?"light":"no-preference");return y.useEffect(()=>{s(n?"dark":r?"light":"no-preference")},[n,r]),y.useEffect(()=>{if(typeof(t==null?void 0:t.addEventListener)=="function"){const i=({matches:l})=>l&&s("dark"),a=({matches:l})=>l&&s("light");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",a),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",a)}}else{const i=()=>s(t.matches?"dark":e.matches?"light":"no-preference");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",i),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",i)}}},[t,e]),o},KI=y.createContext(void 0);function yQ(){return y.useContext(KI)}function bQ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:St.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}const vQ=({contentComponent:t})=>{const e=y.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(e)})},wQ=y.forwardRef((t,e)=>{const[n,r]=y.useState();return y.useImperativeHandle(e,()=>(o,s)=>{St.flushSync(()=>{r({node:o,container:s})}),r(void 0)},[]),m.jsx(m.Fragment,{children:n&&St.createPortal(n.node,n.container)})}),i2=()=>{};function xQ(t,e){const{editor:n,className:r,theme:o,children:s,editable:i,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:d,slashMenu:u,emojiPicker:h,sideMenu:f,filePanel:p,tableHandles:g,comments:b,autoFocus:v,renderEditor:x=!n.headless,...w}=t,[k,C]=y.useState(),S=ro(),T=qI(),E=(S==null?void 0:S.colorSchemePreference)||T,M=o||(E==="dark"?"dark":"light");Cv(l||i2,n),kv(a||i2,n),y.useEffect(()=>{n.isEditable=i!==!1},[i,n]);const _=y.useCallback(F=>{n.elementRenderer=F},[n]),P=y.useMemo(()=>({...S,editor:n,setContentEditableProps:C}),[S,n]),L={formattingToolbar:c,linkToolbar:d,slashMenu:u,emojiPicker:h,sideMenu:f,filePanel:p,tableHandles:g,comments:b},V={autoFocus:v,contentEditableProps:k};return m.jsx(CI.Provider,{value:P,children:m.jsxs(KI.Provider,{value:{editorProps:V,defaultUIProps:L},children:[m.jsx(wQ,{ref:_}),m.jsx(kQ,{className:r,renderEditor:x,editorColorScheme:M,ref:e,...w,children:s})]})})}const kQ=I.forwardRef(({className:t,renderEditor:e,editorColorScheme:n,children:r,...o},s)=>m.jsx("div",{className:Be("bn-container",n,t),"data-color-scheme":n,...o,ref:s,children:e?m.jsx(SQ,{children:r}):r})),CQ=I.forwardRef(xQ),SQ=t=>{const e=yQ(),n=te(),r=y.useMemo(()=>bQ(),[]),o=y.useCallback(s=>{n.mount(s,r)},[n,r]);return m.jsxs(m.Fragment,{children:[m.jsx(vQ,{contentComponent:r}),m.jsx(TQ,{...e.editorProps,...t,mount:o}),m.jsx(gQ,{...e.defaultUIProps}),t.children]})},TQ=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return m.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})};function a2(t,e){let n;const r=document.createElement("div");let o;if(e!=null&&e.elementRenderer)e.elementRenderer(t(l=>n=l||void 0),r);else{if(!(e!=null&&e.headless))throw new Error("elementRenderer not available, expected headless editor");o=rZ.createRoot(r),St.flushSync(()=>{o.render(t(l=>n=l||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n==null||n.setAttribute("data-tmp-find","true");const s=r.cloneNode(!0),i=s.firstElementChild,a=s.querySelector("[data-tmp-find]");return a==null||a.removeAttribute("data-tmp-find"),o==null||o.unmount(),{dom:i,contentDOM:a||void 0}}function Gg(t){var e;return m.jsx(JJ,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([n])=>n!=="class")),className:Be("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([n,r])=>{const o=t.propSchema[n];return!Q1.includes(n)&&r!==o.default}).map(([n,r])=>[jf(n),r])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function Zp(t,e){const n=Zn({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return zd(t.propSchema)},parseHTML(){return oP(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return tc({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return r=>{const o=tZ(s=>{var i;const a=this.options.editor,l=tP(s.getPos,a,this.editor,t.type),c=((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},d=kI().nodeViewContentRef;if(!d)throw new Error("nodeViewContentRef is not set");const u=e.render;return m.jsx(Gg,{blockType:l.type,blockProps:l.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:c,children:m.jsx(u,{block:l,editor:a,contentRef:h=>{d(h),h&&(h.className=Be("bn-inline-content",h.className))}})})},{className:"bn-react-node-view-renderer"})(r);return t.isSelectable===!1&&rP(o,this.editor),o}}});return ev(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render;return a2(l=>m.jsx(Gg,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:i,children:m.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Be("bn-inline-content",c.className))}})}),o)},toExternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.toExternalHTML||e.render;return a2(l=>m.jsx(Gg,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:i,children:m.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Be("bn-inline-content",c.className))}})}),o)}})}function Rv(t){const e=te(),[n,r]=y.useState("loading"),[o,s]=y.useState();if(y.useEffect(()=>{let i=!0;return(async()=>{let a="";r("loading");try{a=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{r("error");return}i&&(r("loaded"),s(a))})(),()=>{i=!1}},[e,t]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const Pv=t=>m.jsxs("figure",{children:[t.children,m.jsx("figcaption",{children:t.caption})]});function EQ(t){const e=te();y.useEffect(()=>e.onUploadEnd(t),[t,e])}function MQ(t){const e=te();y.useEffect(()=>e.onUploadStart(t),[t,e])}function YI(t){const[e,n]=y.useState(!1);return MQ(r=>{r===t&&n(!0)}),EQ(r=>{r===t&&n(!1)}),e}const AQ=t=>{const e=ue(),n=y.useCallback(o=>{o.preventDefault()},[]),r=y.useCallback(()=>{t.editor.transact(o=>o.setMeta(t.editor.filePanel.plugins[0],{block:t.block}))},[t.block,t.editor]);return m.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[m.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||m.jsx(Ev,{size:24})}),m.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},_Q=t=>m.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[m.jsx("div",{className:"bn-file-icon",children:m.jsx(Ev,{size:24})}),m.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),Iv=t=>{const e=YI(t.block.id);return m.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?m.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?m.jsx(AQ,{...t}):m.jsxs(m.Fragment,{children:[t.block.props.showPreview===!1||!t.children?m.jsx(_Q,{...t}):t.children,t.block.props.caption&&m.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},Xp=t=>m.jsxs("div",{children:[t.children,m.jsx("p",{children:t.caption})]}),RQ=t=>{const e=Rv(t.block.props.url);return m.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},PQ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?m.jsx("audio",{src:t.block.props.url}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(Pv,{caption:t.block.props.caption,children:e}):m.jsx(Xp,{caption:t.block.props.caption,children:e}):e},IQ=t=>m.jsx(Iv,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:m.jsx(jI,{size:24}),children:m.jsx(RQ,{...t})});Zp(vP,{render:IQ,parse:wP,toExternalHTML:PQ});const DQ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add file"});const e=m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?m.jsx(Xp,{caption:t.block.props.caption,children:e}):e},NQ=t=>m.jsx(Iv,{...t});Zp(xP,{render:NQ,parse:kP,toExternalHTML:DQ});const JI=t=>{const[e,n]=y.useState(void 0),[r,o]=y.useState(t.block.props.previewWidth),[s,i]=y.useState(!1),a=y.useRef(null);y.useEffect(()=>{const f=g=>{var b,v;let x;t.block.props.textAlignment==="center"?e.handleUsed==="left"?x=e.initialWidth+(e.initialClientX-g.clientX)*2:x=e.initialWidth+(g.clientX-e.initialClientX)*2:e.handleUsed==="left"?x=e.initialWidth+e.initialClientX-g.clientX:x=e.initialWidth+g.clientX-e.initialClientX,o(Math.min(Math.max(x,64),((v=(b=t.editor.domElement)==null?void 0:b.firstElementChild)==null?void 0:v.clientWidth)||Number.MAX_VALUE))},p=()=>{n(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:r}})};return e&&(window.addEventListener("mousemove",f),window.addEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p)}},[t,e,r]);const l=y.useCallback(()=>{t.editor.isEditable&&i(!0)},[t.editor.isEditable]),c=y.useCallback(()=>{i(!1)},[]),d=y.useCallback(f=>{f.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:f.clientX})},[]),u=y.useCallback(f=>{f.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:f.clientX})},[]),h=YI(t.block.id);return m.jsx(Iv,{...t,onMouseEnter:l,onMouseLeave:c,style:t.block.props.url&&!h&&t.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:m.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[t.children,(s||e)&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:d}),m.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:u})]})]})})},OQ=t=>{const e=Rv(t.block.props.url);return m.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},LQ=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?m.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(Pv,{caption:t.block.props.caption,children:e}):m.jsx(Xp,{caption:t.block.props.caption,children:e}):e},jQ=t=>m.jsx(JI,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:m.jsx(LI,{size:24}),children:m.jsx(OQ,{...t})});Zp(TP,{render:jQ,parse:EP,toExternalHTML:LQ});const BQ=t=>{const e=Rv(t.block.props.url);return m.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},$Q=t=>{if(!t.block.props.url)return m.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?m.jsx("video",{src:t.block.props.url}):m.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?m.jsx(Pv,{caption:t.block.props.caption,children:e}):m.jsx(Xp,{caption:t.block.props.caption,children:e}):e},VQ=t=>m.jsx(JI,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:m.jsx(BZ,{size:24}),children:m.jsx(BQ,{...t})});Zp(RP,{render:VQ,parse:PP,toExternalHTML:$Q});I.memo(({thread:t,selectedThreadId:e,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const s=y.useCallback(a=>{var l;a.target.closest(".bn-action-toolbar")||(l=n.comments)==null||l.selectThread(t.id)},[n.comments,t.id]),i=y.useCallback(a=>{var l;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const c=a.target instanceof Node?a.target:null,d=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!c||!d||!d.contains(c))&&((l=n.comments)==null||l.selectThread(void 0))},[n.comments]);return m.jsx(BI,{thread:t,selected:t.id===e,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:s,onBlur:i,tabIndex:0})});function ZI(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top<r.top,s=n.bottom>r.bottom;return o&&s?"both":o?"top":s?"bottom":"none"}function Br(t){return Object.keys(t)}function qg(t){return t&&typeof t=="object"&&!Array.isArray(t)}function Dv(t,e){const n={...t},r=e;return qg(t)&&qg(e)&&Object.keys(e).forEach(o=>{qg(r[o])&&o in t?n[o]=Dv(n[o],r[o]):n[o]=r[o]}),n}function HQ(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function FQ(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function zQ(t){const e=FQ(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function Kg(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function XI(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?Kg(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(t))return e?Kg(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const s=`${Number(o)/16}${t}`;return e?Kg(s):s}}return r}return n}const D=XI("rem",{shouldScale:!0}),l2=XI("em");function Qp(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function QI(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function Jd(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==y.Fragment:!1}function em(t){const e=y.createContext(null);return[({children:o,value:s})=>m.jsx(e.Provider,{value:s,children:o}),()=>{const o=y.useContext(e);if(o===null)throw new Error(t);return o}]}function Nv(t=null){const e=y.createContext(t);return[({children:o,value:s})=>m.jsx(e.Provider,{value:s,children:o}),()=>y.useContext(e)]}function c2(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function Ff(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function UQ(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function WQ(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function GQ(t,e,n){return Ff(t,n)===Ff(e,n)}function eD({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:s="rtl",orientation:i}){return a=>{var p;n==null||n(a);const l=Array.from(((p=Ff(a.currentTarget,t))==null?void 0:p.querySelectorAll(e))||[]).filter(g=>GQ(a.currentTarget,g,t)),c=l.findIndex(g=>a.currentTarget===g),d=WQ(c,l,r),u=UQ(c,l,r),h=s==="rtl"?u:d,f=s==="rtl"?d:u;switch(a.key){case"ArrowRight":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),o&&l[h].click());break}case"ArrowLeft":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"ArrowUp":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[u].focus(),o&&l[u].click());break}case"ArrowDown":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),o&&l[d].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const g=l.length-1;!l[g].disabled&&l[g].focus();break}}}}const qQ={app:100,modal:200,popover:300,overlay:400,max:9999};function Zd(t){return qQ[t]}const KQ=()=>{};function YQ(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||KQ:n=>{var r;n.key==="Escape"&&(t(n),(r=e.onTrigger)==null||r.call(e))}}function je(t,e="size",n=!0){if(t!==void 0)return QI(t)?n?D(t):t:`var(--${e}-${t})`}function Xd(t){return je(t,"mantine-spacing")}function Ft(t){return t===void 0?"var(--mantine-radius-default)":je(t,"mantine-radius")}function fn(t){return je(t,"mantine-font-size")}function JQ(t){return je(t,"mantine-line-height",!1)}function tD(t){if(t)return je(t,"mantine-shadow",!1)}function Or(t,e){return n=>{t==null||t(n),e==null||e(n)}}function ZQ(t,e,n){var r;return n?Array.from(((r=Ff(n,e))==null?void 0:r.querySelectorAll(t))||[]).findIndex(o=>o===n):null}function XQ(){const[t,e]=y.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function QQ(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const d2=["mousedown","touchstart"];function eee(t,e,n){const r=y.useRef(null);return y.useEffect(()=>{const o=s=>{const{target:i}=s??{};if(Array.isArray(n)){const a=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";n.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&t()}else r.current&&!r.current.contains(i)&&t()};return(e||d2).forEach(s=>document.addEventListener(s,o)),()=>{(e||d2).forEach(s=>document.removeEventListener(s,o))}},[r,t,n]),r}function tee(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function nee(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function ree(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=y.useState(n?e:nee(t)),s=y.useRef(null);return y.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(t),o(s.current.matches),tee(s.current,i=>o(i.matches))},[t]),r}const tm=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Ns(t,e){const n=y.useRef(!1);y.useEffect(()=>()=>{n.current=!1},[]),y.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function oee({opened:t,shouldReturnFocus:e=!0}){const n=y.useRef(null),r=()=>{var o;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((o=n.current)==null||o.focus({preventScroll:!0}))};return Ns(()=>{let o=-1;const s=i=>{i.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",s),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",s)}},[t,e]),r}const see=/input|select|textarea|button|object/,nD="a, input, select, textarea, button, object, [tabindex]";function iee(t){return t.style.display==="none"}function aee(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(iee(n))return!1;n=n.parentNode}return!0}function rD(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function e0(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(rD(t));return(see.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&aee(t)}function oD(t){const e=rD(t);return(Number.isNaN(e)||e>=0)&&e0(t)}function lee(t){return Array.from(t.querySelectorAll(nD)).filter(oD)}function cee(t,e){const n=lee(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let s=r===o.activeElement||t===o.activeElement;const i=o.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(s=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===i.getAttribute("name")).includes(r)),!s)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function sD(t=!0){const e=y.useRef(null),n=o=>{let s=o.querySelector("[data-autofocus]");if(!s){const i=Array.from(o.querySelectorAll(nD));s=i.find(oD)||i.find(e0)||null,!s&&e0(o)&&(s=o)}s&&s.focus({preventScroll:!0})},r=y.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return y.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=s=>{s.key==="Tab"&&e.current&&cee(e.current,s)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const dee=I.useId||(()=>{});function uee(){const t=dee();return t?`mantine-${t.replace(/:/g,"")}`:""}function Qd(t){const e=uee(),[n,r]=y.useState(e);return tm(()=>{r(QQ())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function zf(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function eu(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=zf(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o?o():zf(r,null)}),e.clear()}}}function Ho(...t){return y.useCallback(eu(...t),t)}function ll({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,s]=y.useState(e!==void 0?e:n),i=(a,...l)=>{s(a),r==null||r(a,...l)};return t!==void 0?[t,r,!0]:[o,i,!1]}function hee(t,e){return ree("(prefers-reduced-motion: reduce)",t,e)}function fee(){const[t,e]=y.useState(!1),n=y.useRef(null),r=y.useCallback(()=>e(!0),[]),o=y.useCallback(()=>e(!1),[]);return y.useEffect(()=>{const s=n.current;if(s)return s.addEventListener("mouseenter",r),s.addEventListener("mouseleave",o),()=>{s==null||s.removeEventListener("mouseenter",r),s==null||s.removeEventListener("mouseleave",o)}},[n.current]),{ref:n,hovered:t}}function pee(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function iD({onBlur:t,onFocus:e}={}){const n=y.useRef(null),[r,o]=y.useState(!1),s=y.useRef(!1),i=c=>{o(c),s.current=c},a=c=>{s.current||(i(!0),e==null||e(c))},l=c=>{s.current&&!pee(c)&&(i(!1),t==null||t(c))};return y.useEffect(()=>{const c=n.current;if(c)return c.addEventListener("focusin",a),c.addEventListener("focusout",l),()=>{c==null||c.removeEventListener("focusin",a),c==null||c.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function Ov(t){var n;const e=I.version;return typeof I.version!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(n=t==null?void 0:t.props)==null?void 0:n.ref}function aD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=aD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fo(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=aD(t))&&(r&&(r+=" "),r+=e);return r}const mee={};function gee(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=Fo(e[r],o):e[r]=o})}),e}function nm({theme:t,classNames:e,props:n,stylesCtx:r}){const s=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(t,n,r):i||mee);return gee(s)}function Uf({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((s,i)=>typeof i=="function"?{...s,...i(t,n,r)}:{...s,...i},{})}const lD=y.createContext(null);function Us(){const t=y.useContext(lD);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function yee(){return Us().cssVariablesResolver}function bee(){return Us().classNamesPrefix}function Lv(){return Us().getStyleNonce}function vee(){return Us().withStaticClasses}function wee(){return Us().headless}function xee(){var t;return(t=Us().stylesTransform)==null?void 0:t.sx}function kee(){var t;return(t=Us().stylesTransform)==null?void 0:t.styles}function cD(){return Us().env||"default"}function Cee(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function See(t){let e=t.replace("#","");if(e.length===3){const i=e.split("");e=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(e.length===8){const i=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:i}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,s=n&255;return{r,g:o,b:s,a:1}}function Tee(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o||1}}function Eee(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,i=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),d=s-a/2;let u,h,f;return l>=0&&l<1?(u=a,h=c,f=0):l>=1&&l<2?(u=c,h=a,f=0):l>=2&&l<3?(u=0,h=a,f=c):l>=3&&l<4?(u=0,h=c,f=a):l>=4&&l<5?(u=c,h=0,f=a):(u=a,h=0,f=c),{r:Math.round((u+d)*255),g:Math.round((h+d)*255),b:Math.round((f+d)*255),a:i||1}}function jv(t){return Cee(t)?See(t):t.startsWith("rgb")?Tee(t):t.startsWith("hsl")?Eee(t):{r:0,g:0,b:0,a:1}}function Wu(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a:s}=jv(t),i=1-e,a=l=>Math.round(l*i);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${s})`}function cd(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function Yg(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function Mee(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function Aee(t){if(t.startsWith("oklch("))return(Mee(t)||0)/100;const{r:e,g:n,b:r}=jv(t),o=e/255,s=n/255,i=r/255,a=Yg(o),l=Yg(s),c=Yg(i);return .2126*a+.7152*l+.0722*c}function Bl(t,e=.179){return t.startsWith("var(")?!1:Aee(t)>e}function cl({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Bl(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Bl(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Bl(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),s=o?Number(o):void 0,i=r in e.colors;if(i){const a=s!==void 0?e.colors[r][s]:e.colors[r][cd(e,n||"light")];return{color:r,value:a,shade:s,isThemeColor:i,isLight:Bl(a,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:i,isLight:Bl(t,e.luminanceThreshold),shade:s,variable:void 0}}function qr(t,e){const n=cl({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function t0(t,e){const n={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)??e.defaultGradient.deg??0},r=qr(n.from,e),o=qr(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function Pr(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const s=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${s}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=jv(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const ra=Pr,_ee=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const s=cl({color:t,theme:e}),i=typeof o=="boolean"?o:e.autoContrast;if(n==="filled"){const a=i&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${D(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${D(1)} solid transparent`}:{background:t,hover:Wu(t,.1),color:a,border:`${D(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${D(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:Pr(a,.1),hover:Pr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${D(1)} solid transparent`}}return{background:Pr(t,.1),hover:Pr(t,.12),color:t,border:`${D(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${D(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Pr(e.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${D(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Pr(t,.05),color:t,border:`${D(1)} solid ${t}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${D(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:"transparent",hover:Pr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${D(1)} solid transparent`}}return{background:"transparent",hover:Pr(t,.12),color:t,border:`${D(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${D(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${D(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${D(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:Wu(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${D(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Wu(e.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${D(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Wu(e.white,.01),color:t,border:`${D(1)} solid transparent`}:n==="gradient"?{background:t0(r,e),hover:t0(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${D(1)} solid var(--mantine-color-default-border)`}:{}},Ree={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},u2="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Bv={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Ree,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:_ee,autoContrast:!1,luminanceThreshold:.3,fontFamily:u2,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:u2,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:D(34),lineHeight:"1.3"},h2:{fontSize:D(26),lineHeight:"1.35"},h3:{fontSize:D(22),lineHeight:"1.4"},h4:{fontSize:D(18),lineHeight:"1.45"},h5:{fontSize:D(16),lineHeight:"1.5"},h6:{fontSize:D(14),lineHeight:"1.5"}}},fontSizes:{xs:D(12),sm:D(14),md:D(16),lg:D(18),xl:D(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:D(2),sm:D(4),md:D(8),lg:D(16),xl:D(32)},spacing:{xs:D(10),sm:D(12),md:D(16),lg:D(20),xl:D(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), 0 ${D(1)} ${D(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${D(10)} ${D(15)} ${D(-5)}, rgba(0, 0, 0, 0.04) 0 ${D(7)} ${D(7)} ${D(-5)}`,md:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${D(20)} ${D(25)} ${D(-5)}, rgba(0, 0, 0, 0.04) 0 ${D(10)} ${D(10)} ${D(-5)}`,lg:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${D(28)} ${D(23)} ${D(-7)}, rgba(0, 0, 0, 0.04) 0 ${D(12)} ${D(12)} ${D(-7)}`,xl:`0 ${D(1)} ${D(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${D(36)} ${D(28)} ${D(-7)}, rgba(0, 0, 0, 0.04) 0 ${D(17)} ${D(17)} ${D(-7)}`},other:{},components:{}};function h2(t){return t==="auto"||t==="dark"||t==="light"}function Pee({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return h2(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&h2(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const Iee="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",f2="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Jg(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function p2(t){if(!(t.primaryColor in t.colors))throw new Error(Iee);if(typeof t.primaryShade=="object"&&(!Jg(t.primaryShade.dark)||!Jg(t.primaryShade.light)))throw new Error(f2);if(typeof t.primaryShade=="number"&&!Jg(t.primaryShade))throw new Error(f2)}function Dee(t,e){var r;if(!e)return p2(t),t;const n=Dv(t,e);return e.fontFamily&&!((r=e.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=e.fontFamily),p2(n),n}const $v=y.createContext(null),Nee=()=>y.useContext($v)||Bv;function _n(){const t=y.useContext($v);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function dD({theme:t,children:e,inherit:n=!0}){const r=Nee(),o=y.useMemo(()=>Dee(n?r:Bv,t),[t,r,n]);return m.jsx($v.Provider,{value:o,children:e})}dD.displayName="@mantine/core/MantineThemeProvider";function Oee(){const t=_n(),e=Lv(),n=Br(t.breakpoints).reduce((r,o)=>{const s=t.breakpoints[o].includes("px"),i=zQ(t.breakpoints[o]),a=s?`${i-.1}px`:l2(i-.1),l=s?`${i}px`:l2(i);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return m.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:n}})}function Zg(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function $l(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function Lee(t,e){const n=Zg(t.variables),r=n?$l(e,n):"",o=Zg(t.dark),s=Zg(t.light),i=o?$l(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",a=s?$l(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,s):"";return`${r}${i}${a}`}function uD({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&cl({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function m2(t,e){return uD({color:t.colors[t.primaryColor][cd(t,e)],theme:t,autoContrast:null})}function Gu({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const a=cd(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:ra(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:ra(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:ra(t.colors[e][a],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const s=cd(t,"dark"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:ra(t.colors[e][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:ra(t.colors[e][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:ra(t.colors[e][Math.max(s-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...i}:i}function jee(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function oa(t,e,n){Br(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const hD=t=>{const e=cd(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:D(t.defaultRadius),r={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":m2(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":m2(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};oa(r.variables,t.breakpoints,"breakpoint"),oa(r.variables,t.spacing,"spacing"),oa(r.variables,t.fontSizes,"font-size"),oa(r.variables,t.lineHeights,"line-height"),oa(r.variables,t.shadows,"shadow"),oa(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((s,i)=>{r.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${t.primaryColor}-${i})`}),Br(t.colors).forEach(s=>{const i=t.colors[s];if(jee(i)){Object.assign(r.light,Gu({theme:t,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Gu({theme:t,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,Gu({theme:t,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Gu({theme:t,color:s,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return Br(o).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=o[s].fontSize,r.variables[`--mantine-${s}-line-height`]=o[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=o[s].fontWeight||t.headings.fontWeight}),r};function Bee({theme:t,generator:e}){const n=hD(t),r=e==null?void 0:e(t);return r?Dv(n,r):n}const Xg=hD(Bv);function $ee(t){const e={variables:{},light:{},dark:{}};return Br(t.variables).forEach(n=>{Xg.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Br(t.light).forEach(n=>{Xg.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Br(t.dark).forEach(n=>{Xg.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function Vee(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function fD({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=_n(),r=Lv(),o=yee(),s=Bee({theme:n,generator:o}),i=t===":root"&&e,a=i?$ee(s):s,l=Lee(a,t);return l?m.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${i?"":Vee(t)}`}}):null}fD.displayName="@mantine/CssVariables";function Hee(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function sa(t,e){var o,s;const n=typeof window<"u"&&"matchMedia"in window&&((o=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:o.matches),r=t!=="auto"?t:n?"dark":"light";(s=e())==null||s.setAttribute("data-mantine-color-scheme",r)}function Fee({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=y.useRef(null),[s,i]=y.useState(()=>t.get(e)),a=r||s,l=y.useCallback(d=>{r||(sa(d,n),i(d),t.set(d))},[t.set,a,r]),c=y.useCallback(()=>{i(e),sa(e,n),t.clear()},[t.clear,e]);return y.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),tm(()=>{sa(t.get(e),n)},[]),y.useEffect(()=>{var u;if(r)return sa(r,n),()=>{};r===void 0&&sa(s,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=h=>{s==="auto"&&sa(h.matches?"dark":"light",n)};return(u=o.current)==null||u.addEventListener("change",d),()=>{var h;return(h=o.current)==null?void 0:h.removeEventListener("change",d)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function zee({respectReducedMotion:t,getRootElement:e}){tm(()=>{var n;t&&((n=e())==null||n.setAttribute("data-respect-reduced-motion","true"))},[t])}Hee();function pD({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:s=!0,withCssVariables:i=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=Pee(),defaultColorScheme:d="light",getRootElement:u=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:f,stylesTransform:p,env:g}){const{colorScheme:b,setColorScheme:v,clearColorScheme:x}=Fee({defaultColorScheme:d,forceColorScheme:f,manager:c,getRootElement:u});return zee({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:u}),m.jsx(lD.Provider,{value:{colorScheme:b,setColorScheme:v,clearColorScheme:x,getRootElement:u,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:h,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p,env:g},children:m.jsxs(dD,{theme:t,children:[i&&m.jsx(fD,{cssVariablesSelector:a,deduplicateCssVariables:s}),o&&m.jsx(Oee,{}),e]})})}pD.displayName="@mantine/core/MantineProvider";function rm({classNames:t,styles:e,props:n,stylesCtx:r}){const o=_n();return{resolvedClassNames:nm({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:Uf({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const Uee={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Wee({theme:t,options:e,unstyled:n}){return Fo((e==null?void 0:e.focusable)&&!n&&(t.focusClassName||Uee[t.focusRing]),(e==null?void 0:e.active)&&!n&&t.activeClassName)}function Gee({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return nm({theme:o,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:e})[t]}function g2({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return nm({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function qee({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function Kee({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function Yee({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function Jee({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(s=>{var i,a;return(a=nm({theme:e,classNames:(i=e.components[s])==null?void 0:i.classNames,props:r,stylesCtx:o}))==null?void 0:a[n]})}function Zee({options:t,classes:e,selector:n,unstyled:r}){return t!=null&&t.variant&&!r?e[`${n}--${t.variant}`]:void 0}function Xee({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:s,classes:i,unstyled:a,className:l,rootSelector:c,props:d,stylesCtx:u,withStaticClasses:h,headless:f,transformedStyles:p}){return Fo(Wee({theme:t,options:e,unstyled:a||f}),Jee({theme:t,themeName:n,selector:r,props:d,stylesCtx:u}),Zee({options:e,classes:i,selector:r,unstyled:a}),g2({selector:r,stylesCtx:u,theme:t,classNames:s,props:d}),g2({selector:r,stylesCtx:u,theme:t,classNames:p,props:d}),Gee({selector:r,stylesCtx:u,options:e,props:d,theme:t}),qee({rootSelector:c,selector:r,className:l}),Kee({selector:r,classes:i,unstyled:a||f}),h&&!f&&Yee({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function Qee({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(s=>{var i;return Uf({theme:t,styles:(i=t.components[s])==null?void 0:i.styles,props:n,stylesCtx:r})[o]}).reduce((s,i)=>({...s,...i}),{})}function n0({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...n0({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function ete(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...Qp(n[r])}}),e),{})}function tte({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:s,themeName:i,headless:a}){var l;return(l=ete([a?{}:e==null?void 0:e(n,r,o),...i.map(c=>{var d,u,h;return(h=(u=(d=n.components)==null?void 0:d[c])==null?void 0:u.vars)==null?void 0:h.call(u,n,r,o)}),t==null?void 0:t(n,r,o)]))==null?void 0:l[s]}function nte({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:s,rootSelector:i,styles:a,style:l,vars:c,varsResolver:d,headless:u,withStylesTransform:h}){return{...!h&&Qee({theme:t,themeName:e,props:o,stylesCtx:s,selector:n}),...!h&&Uf({theme:t,styles:a,props:o,stylesCtx:s})[n],...!h&&Uf({theme:t,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||o,stylesCtx:s})[n],...tte({theme:t,props:o,stylesCtx:s,vars:c,varsResolver:d,selector:n,themeName:e,headless:u}),...i===n?n0({style:l,theme:t}):null,...n0({style:r==null?void 0:r.style,theme:t})}}function rte({props:t,stylesCtx:e,themeName:n}){var i;const r=_n(),o=(i=kee())==null?void 0:i();return{getTransformedStyles:a=>o?[...a.map(c=>o(c,{props:t,theme:r,ctx:e})),...n.map(c=>{var d;return o((d=r.components[c])==null?void 0:d.styles,{props:t,theme:r,ctx:e})})].filter(Boolean):[],withStylesTransform:!!o}}function ke({name:t,classes:e,props:n,stylesCtx:r,className:o,style:s,rootSelector:i="root",unstyled:a,classNames:l,styles:c,vars:d,varsResolver:u}){const h=_n(),f=bee(),p=vee(),g=wee(),b=(Array.isArray(t)?t:[t]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:x}=rte({props:n,stylesCtx:r,themeName:b});return(w,k)=>({className:Xee({theme:h,options:k,themeName:b,selector:w,classNamesPrefix:f,classNames:l,classes:e,unstyled:a,className:o,rootSelector:i,props:n,stylesCtx:r,withStaticClasses:p,headless:g,transformedStyles:x([k==null?void 0:k.styles,c])}),style:nte({theme:h,themeName:b,selector:w,options:k,props:n,stylesCtx:r,rootSelector:i,styles:c,style:s,vars:d,varsResolver:u,headless:g,withStylesTransform:v})})}function ote(t,e){return typeof t=="boolean"?t:e.autoContrast}function K(t,e,n){var i;const r=_n(),o=(i=r.components[t])==null?void 0:i.defaultProps,s=typeof o=="function"?o(r):o;return{...e,...s,...Qp(n)}}function Qg(t){return Br(t).reduce((e,n)=>t[n]!==void 0?`${e}${HQ(n)}:${t[n]};`:e,"").trim()}function ste({selector:t,styles:e,media:n,container:r}){const o=e?Qg(e):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${Qg(a.styles)}}}`):[],i=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${Qg(a.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${s.join("")}${i.join("")}`.trim()}function mD(t){const e=Lv();return m.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:ste(t)}})}function om(t){const{m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:g,pr:b,pe:v,ps:x,bd:w,bg:k,c:C,opacity:S,ff:T,fz:E,fw:M,lts:_,ta:P,lh:L,fs:V,tt:F,td:z,w:Z,miw:N,maw:B,h:H,mih:X,mah:G,bgsz:Q,bgp:pe,bgr:Fe,bga:Ke,pos:ve,top:Oe,left:Ye,bottom:$e,right:le,inset:en,display:Pt,flex:tn,hiddenFrom:It,visibleFrom:Rn,lightHidden:Sr,darkHidden:Ki,sx:Yi,...zo}=t;return{styleProps:Qp({m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:d,px:u,py:h,pt:f,pb:p,pl:g,pr:b,pe:v,ps:x,bd:w,bg:k,c:C,opacity:S,ff:T,fz:E,fw:M,lts:_,ta:P,lh:L,fs:V,tt:F,td:z,w:Z,miw:N,maw:B,h:H,mih:X,mah:G,bgsz:Q,bgp:pe,bgr:Fe,bga:Ke,pos:ve,top:Oe,left:Ye,bottom:$e,right:le,inset:en,display:Pt,flex:tn,hiddenFrom:It,visibleFrom:Rn,lightHidden:Sr,darkHidden:Ki,sx:Yi}),rest:zo}}const ite={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Vv(t,e){const n=cl({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function ate(t,e){const n=cl({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Vv(t,e)}function lte(t,e){if(typeof t=="number")return D(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(i=>i.trim()!=="");let s=`${D(n)}`;return r&&(s+=` ${r}`),o.length>0&&(s+=` ${Vv(o.join(" "),e)}`),s.trim()}return t}const y2={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function cte(t){return typeof t=="string"&&t in y2?y2[t]:t}const dte=["h1","h2","h3","h4","h5","h6"];function ute(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&dte.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?D(t):t}function hte(t){return t}const fte=["h1","h2","h3","h4","h5","h6"];function pte(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&fte.includes(t)?`var(--mantine-${t}-line-height)`:t}function mte(t){return typeof t=="number"?D(t):t}function gte(t,e){if(typeof t=="number")return D(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return D(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const ey={color:Vv,textColor:ate,fontSize:ute,spacing:gte,identity:hte,size:mte,lineHeight:pte,fontFamily:cte,border:lte};function b2(t){return t.replace("(min-width: ","").replace("em)","")}function yte({media:t,...e}){const r=Object.keys(t).sort((o,s)=>Number(b2(o))-Number(b2(s))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function bte(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function vte(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function wte(t){return typeof t=="object"&&t!==null?Br(t).filter(e=>e!=="base"):[]}function xte(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function gD({styleProps:t,data:e,theme:n}){return yte(Br(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const s=e[o],i=Array.isArray(s.property)?s.property:[s.property],a=vte(t[o]);if(!bte(t[o]))return i.forEach(c=>{r.inlineStyles[c]=ey[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=wte(t[o]);return i.forEach(c=>{a&&(r.styles[c]=ey[s.type](a,n)),l.forEach(d=>{const u=`(min-width: ${n.breakpoints[d]})`;r.media[u]={...r.media[u],[c]:ey[s.type](xte(t[o],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function yD(){return`__m__-${y.useId().replace(/:/g,"")}`}function bD(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...bD(r,e)}),{}):typeof t=="function"?t(e):t??{}}function vD(t){return t.startsWith("data-")?t:`data-${t}`}function kte(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[vD(n)]=t[n]),e},{})}function wD(t){return t?typeof t=="string"?{[vD(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...wD(n)}),{}):kte(t):null}function r0(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...r0(r,e)}),{}):typeof t=="function"?t(e):t??{}}function Cte({theme:t,style:e,vars:n,styleProps:r}){const o=r0(e,t),s=r0(n,t);return{...o,...s,...r}}const xD=y.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:s,size:i,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:d,renderRoot:u,__size:h,...f},p)=>{var E;const g=_n(),b=t||"div",{styleProps:v,rest:x}=om(f),w=xee(),k=(E=w==null?void 0:w())==null?void 0:E(v.sx),C=yD(),S=gD({styleProps:v,theme:g,data:ite}),T={ref:p,style:Cte({theme:g,style:e,vars:n,styleProps:S.inlineStyles}),className:Fo(r,k,{[C]:S.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":d,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":QI(i)?void 0:i||void 0,size:h,...wD(s),...x};return m.jsxs(m.Fragment,{children:[S.hasResponsiveStyles&&m.jsx(mD,{selector:`.${C}`,styles:S.styles,media:S.media}),typeof u=="function"?u(T):m.jsx(b,{...T})]})});xD.displayName="@mantine/core/Box";const ie=xD;function kD(t){return t}function Ste(t){const e=t;return n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function Ce(t){const e=y.forwardRef(t);return e.extend=kD,e.withProps=n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function Xt(t){const e=y.forwardRef(t);return e.withProps=n=>{const r=y.forwardRef((o,s)=>m.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=kD,e}const Tte=y.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function tu(){return y.useContext(Tte)}var CD={root:"m_87cf2631"};const Ete={__staticSelector:"UnstyledButton"},Wi=Xt((t,e)=>{const n=K("UnstyledButton",Ete,t),{className:r,component:o="button",__staticSelector:s,unstyled:i,classNames:a,styles:l,style:c,...d}=n,u=ke({name:s,props:n,classes:CD,className:r,style:c,classNames:a,styles:l,unstyled:i});return m.jsx(ie,{...u("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...d})});Wi.classes=CD;Wi.displayName="@mantine/core/UnstyledButton";var SD={root:"m_515a97f8"};const Mte={},Hv=Ce((t,e)=>{const n=K("VisuallyHidden",Mte,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,...c}=n,d=ke({name:"VisuallyHidden",classes:SD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a});return m.jsx(ie,{component:"span",ref:e,...d("root"),...c})});Hv.classes=SD;Hv.displayName="@mantine/core/VisuallyHidden";var TD={root:"m_1b7284a3"};const Ate={},_te=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:Ft(e),"--paper-shadow":tD(n)}}),Fv=Xt((t,e)=>{const n=K("Paper",Ate,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,withBorder:l,vars:c,radius:d,shadow:u,variant:h,mod:f,...p}=n,g=ke({name:"Paper",props:n,classes:TD,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:c,varsResolver:_te});return m.jsx(ie,{ref:e,mod:[{"data-with-border":l},f],...g("root"),variant:h,...p})});Fv.classes=TD;Fv.displayName="@mantine/core/Paper";function ED(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}function v2(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function w2(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const Rte={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Pte({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:s,arrowY:i,dir:a}){const[l,c="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[Rte[l]]:r},u=-e/2;return l==="left"?{...d,...v2(c,i,n,o),right:u,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...d,...v2(c,i,n,o),left:u,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...d,...w2(c,s,n,o,a),bottom:u,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...d,...w2(c,s,n,o,a),top:u,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const zv=y.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:s,arrowX:i,arrowY:a,style:l,...c},d)=>{const{dir:u}=tu();return s?m.jsx("div",{...c,ref:d,style:{...l,...Pte({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:u,arrowX:i,arrowY:a})}}):null});zv.displayName="@mantine/core/FloatingArrow";var MD={root:"m_9814e45f"};const Ite={zIndex:Zd("modal")},Dte=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:s,zIndex:i})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&Pr(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${D(o)})`:void 0,"--overlay-radius":s===void 0?void 0:Ft(s),"--overlay-z-index":i==null?void 0:i.toString()}}),dd=Xt((t,e)=>{const n=K("Overlay",Ite,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,fixed:c,center:d,children:u,radius:h,zIndex:f,gradient:p,blur:g,color:b,backgroundOpacity:v,mod:x,...w}=n,k=ke({name:"Overlay",props:n,classes:MD,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Dte});return m.jsx(ie,{ref:e,...k("root"),mod:[{center:d,fixed:c},x],...w,children:u})});dd.classes=MD;dd.displayName="@mantine/core/Overlay";function ty(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function Nte({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||ty(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=ty(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return ty(n)}const Ote={},AD=Ce((t,e)=>{const{children:n,target:r,reuseTargetNode:o,...s}=K("Portal",Ote,t),[i,a]=y.useState(!1),l=y.useRef(null);return tm(()=>(a(!0),l.current=Nte({target:r,reuseTargetNode:o,...s}),zf(e,l.current),!r&&!o&&l.current&&document.body.appendChild(l.current),()=>{!r&&!o&&l.current&&document.body.removeChild(l.current)}),[r]),!i||!l.current?null:St.createPortal(m.jsx(m.Fragment,{children:n}),l.current)});AD.displayName="@mantine/core/Portal";const nu=Ce(({withinPortal:t=!0,children:e,...n},r)=>cD()==="test"||!t?m.jsx(m.Fragment,{children:e}):m.jsx(AD,{ref:r,...n,children:e}));nu.displayName="@mantine/core/OptionalPortal";const Vl=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),qu={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Vl("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Vl("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Vl("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Vl("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Vl("top"),common:{transformOrigin:"top right"}}},x2={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Lte({transition:t,state:e,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in qu?{transitionProperty:qu[t].transitionProperty,...o,...qu[t].common,...qu[t][x2[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[x2[e]]}}function jte({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:s,onEntered:i,onExited:a,enterDelay:l,exitDelay:c}){const d=_n(),u=hee(),h=d.respectReducedMotion?u:!1,[f,p]=y.useState(h?0:t),[g,b]=y.useState(r?"entered":"exited"),v=y.useRef(-1),x=y.useRef(-1),w=y.useRef(-1),k=S=>{const T=S?o:s,E=S?i:a;window.clearTimeout(v.current);const M=h?0:S?t:e;p(M),M===0?(typeof T=="function"&&T(),typeof E=="function"&&E(),b(S?"entered":"exited")):w.current=requestAnimationFrame(()=>{VE.flushSync(()=>{b(S?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof T=="function"&&T(),b(S?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof E=="function"&&E(),b(S?"entered":"exited")},M)})})},C=S=>{if(window.clearTimeout(x.current),typeof(S?l:c)!="number"){k(S);return}x.current=window.setTimeout(()=>{k(S)},S?l:c)};return Ns(()=>{C(r)},[r]),y.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:f,transitionStatus:g,transitionTimingFunction:n||"ease"}}function Gi({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:s,timingFunction:i="ease",onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h}){const f=cD(),{transitionDuration:p,transitionStatus:g,transitionTimingFunction:b}=jte({mounted:o,exitDuration:r,duration:n,timingFunction:i,onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:u,exitDelay:h});return p===0||f==="test"?o?m.jsx(m.Fragment,{children:s({})}):t?s({display:"none"}):null:g==="exited"?t?s({display:"none"}):null:m.jsx(m.Fragment,{children:s(Lte({transition:e,duration:p,state:g,timingFunction:b}))})}Gi.displayName="@mantine/core/Transition";const[Bte,_D]=em("Popover component was not found in the tree");function Uv({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=sD(e),s=Ho(o,r);return Jd(t)?y.cloneElement(t,{[n]:s}):t}function RD(t){return m.jsx(Hv,{tabIndex:-1,"data-autofocus":!0,...t})}Uv.displayName="@mantine/core/FocusTrap";RD.displayName="@mantine/core/FocusTrapInitialFocus";Uv.InitialFocus=RD;var PD={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const $te={},sm=Ce((t,e)=>{var b,v,x,w;const n=K("PopoverDropdown",$te,t),{className:r,style:o,vars:s,children:i,onKeyDownCapture:a,variant:l,classNames:c,styles:d,...u}=n,h=_D(),f=oee({opened:h.opened,shouldReturnFocus:h.returnFocus}),p=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=Ho(e,h.floating);return h.disabled?null:m.jsx(nu,{...h.portalProps,withinPortal:h.withinPortal,children:m.jsx(Gi,{mounted:h.opened,...h.transitionProps,transition:((b=h.transitionProps)==null?void 0:b.transition)||"fade",duration:((v=h.transitionProps)==null?void 0:v.duration)??150,keepMounted:h.keepMounted,exitDuration:typeof((x=h.transitionProps)==null?void 0:x.exitDuration)=="number"?h.transitionProps.exitDuration:(w=h.transitionProps)==null?void 0:w.duration,children:k=>m.jsx(Uv,{active:h.trapFocus&&h.opened,innerRef:g,children:m.jsxs(ie,{...p,...u,variant:l,onKeyDownCapture:YQ(()=>{var C,S;(C=h.onClose)==null||C.call(h),(S=h.onDismiss)==null||S.call(h)},{active:h.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":h.placement,"data-fixed":h.floatingStrategy==="fixed"||void 0,...h.getStyles("dropdown",{className:r,props:n,classNames:c,styles:d,style:[{...k,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:D(h.width)},h.resolvedStyles.dropdown,d==null?void 0:d.dropdown,o]}),children:[i,m.jsx(zv,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:n,classNames:c,styles:d})})]})})})})});sm.classes=PD;sm.displayName="@mantine/core/PopoverDropdown";const Vte={refProp:"ref",popupType:"dialog"},Wv=Ce((t,e)=>{const{children:n,refProp:r,popupType:o,...s}=K("PopoverTarget",Vte,t);if(!Jd(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=s,a=_D(),l=Ho(a.reference,Ov(n),e),c=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return y.cloneElement(n,{...i,...c,...a.targetProps,className:Fo(a.targetProps.className,i.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});Wv.displayName="@mantine/core/PopoverTarget";function ID({opened:t,floating:e,position:n,positionDependencies:r}){const[o,s]=y.useState(0);y.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return b3(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,o,n]),Ns(()=>{e.update()},r),Ns(()=>{s(i=>i+1)},[t])}function Hte(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function Fte(t,e){const n=Hte(t.middlewares),r=[Jr(t.offset)];return n.shift&&r.push(Hi(typeof n.shift=="boolean"?{limiter:Ex(),padding:5}:{limiter:Ex(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?ur():ur(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?sc():sc(n.inline)),r.push(HE({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&r.push(cp({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:s,availableHeight:i,...a}){var d;const c=((d=e().refs.floating.current)==null?void 0:d.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:s,availableHeight:i,...a}):Object.assign(c,{maxWidth:`${s}px`,maxHeight:`${i}px`})),t.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),r}function zte(t){const[e,n]=ll({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=y.useRef(e),o=()=>{e&&n(!1)},s=()=>n(!e),i=al({strategy:t.strategy,placement:t.position,middleware:Fte(t,()=>i)});return ID({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:i}),Ns(()=>{var a;(a=t.onPositionChange)==null||a.call(t,i.placement)},[i.placement]),Ns(()=>{var a,l;e!==r.current&&(e?(l=t.onOpen)==null||l.call(t):(a=t.onClose)==null||a.call(t)),r.current=e},[e,t.onClose,t.onOpen]),{floating:i,controlled:typeof t.opened=="boolean",opened:e,onClose:o,onToggle:s}}const Ute={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Zd("popover"),__staticSelector:"Popover",width:"max-content"},Wte=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:Ft(e),"--popover-shadow":tD(n)}});function Ws(t){var vu,wu,oo,so,Uo,Cl;const e=K("Popover",Ute,t),{children:n,position:r,offset:o,onPositionChange:s,positionDependencies:i,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:d,width:u,middlewares:h,withArrow:f,arrowSize:p,arrowOffset:g,arrowRadius:b,arrowPosition:v,unstyled:x,classNames:w,styles:k,closeOnClickOutside:C,withinPortal:S,portalProps:T,closeOnEscape:E,clickOutsideEvents:M,trapFocus:_,onClose:P,onDismiss:L,onOpen:V,onChange:F,zIndex:z,radius:Z,shadow:N,id:B,defaultOpened:H,__staticSelector:X,withRoles:G,disabled:Q,returnFocus:pe,variant:Fe,keepMounted:Ke,vars:ve,floatingStrategy:Oe,withOverlay:Ye,overlayProps:$e,...le}=e,en=ke({name:X,props:e,classes:PD,classNames:w,styles:k,unstyled:x,rootSelector:"dropdown",vars:ve,varsResolver:Wte}),{resolvedStyles:Pt}=rm({classNames:w,styles:k,props:e}),tn=y.useRef(null),[It,Rn]=y.useState(null),[Sr,Ki]=y.useState(null),{dir:Yi}=tu(),zo=Qd(B),Ve=zte({middlewares:h,width:u,position:ED(Yi,r),offset:typeof o=="number"?o+(f?p/2:0):o,arrowRef:tn,arrowOffset:g,onPositionChange:s,positionDependencies:i,opened:a,defaultOpened:H,onChange:F,onOpen:V,onClose:P,onDismiss:L,strategy:Oe});eee(()=>{C&&(Ve.onClose(),L==null||L())},M,[It,Sr]);const Ji=y.useCallback(Je=>{Rn(Je),Ve.floating.refs.setReference(Je)},[Ve.floating.refs.setReference]),Zi=y.useCallback(Je=>{Ki(Je),Ve.floating.refs.setFloating(Je)},[Ve.floating.refs.setFloating]),yu=y.useCallback(()=>{var Je;(Je=l==null?void 0:l.onExited)==null||Je.call(l),c==null||c()},[l==null?void 0:l.onExited,c]),bu=y.useCallback(()=>{var Je;(Je=l==null?void 0:l.onEntered)==null||Je.call(l),d==null||d()},[l==null?void 0:l.onEntered,d]);return m.jsxs(Bte,{value:{returnFocus:pe,disabled:Q,controlled:Ve.controlled,reference:Ji,floating:Zi,x:Ve.floating.x,y:Ve.floating.y,arrowX:(oo=(wu=(vu=Ve.floating)==null?void 0:vu.middlewareData)==null?void 0:wu.arrow)==null?void 0:oo.x,arrowY:(Cl=(Uo=(so=Ve.floating)==null?void 0:so.middlewareData)==null?void 0:Uo.arrow)==null?void 0:Cl.y,opened:Ve.opened,arrowRef:tn,transitionProps:{...l,onExited:yu,onEntered:bu},width:u,withArrow:f,arrowSize:p,arrowOffset:g,arrowRadius:b,arrowPosition:v,placement:Ve.floating.placement,trapFocus:_,withinPortal:S,portalProps:T,zIndex:z,radius:Z,shadow:N,closeOnEscape:E,onDismiss:L,onClose:Ve.onClose,onToggle:Ve.onToggle,getTargetId:()=>`${zo}-target`,getDropdownId:()=>`${zo}-dropdown`,withRoles:G,targetProps:le,__staticSelector:X,classNames:w,styles:k,unstyled:x,variant:Fe,keepMounted:Ke,getStyles:en,resolvedStyles:Pt,floatingStrategy:Oe},children:[n,Ye&&m.jsx(Gi,{transition:"fade",mounted:Ve.opened,duration:(l==null?void 0:l.duration)||250,exitDuration:(l==null?void 0:l.exitDuration)||250,children:Je=>m.jsx(nu,{withinPortal:S,children:m.jsx(dd,{...$e,...en("overlay",{className:$e==null?void 0:$e.className,style:[Je,$e==null?void 0:$e.style]})})})})]})}Ws.Target=Wv;Ws.Dropdown=sm;Ws.displayName="@mantine/core/Popover";Ws.extend=t=>t;var lr={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const DD=y.forwardRef(({className:t,...e},n)=>m.jsxs(ie,{component:"span",className:Fo(lr.barsLoader,t),...e,ref:n,children:[m.jsx("span",{className:lr.bar}),m.jsx("span",{className:lr.bar}),m.jsx("span",{className:lr.bar})]}));DD.displayName="@mantine/core/Bars";const ND=y.forwardRef(({className:t,...e},n)=>m.jsxs(ie,{component:"span",className:Fo(lr.dotsLoader,t),...e,ref:n,children:[m.jsx("span",{className:lr.dot}),m.jsx("span",{className:lr.dot}),m.jsx("span",{className:lr.dot})]}));ND.displayName="@mantine/core/Dots";const OD=y.forwardRef(({className:t,...e},n)=>m.jsx(ie,{component:"span",className:Fo(lr.ovalLoader,t),...e,ref:n}));OD.displayName="@mantine/core/Oval";const LD={bars:DD,oval:OD,dots:ND},Gte={loaders:LD,type:"oval"},qte=(t,{size:e,color:n})=>({root:{"--loader-size":je(e,"loader-size"),"--loader-color":n?qr(n,t):void 0}}),Gs=Ce((t,e)=>{const n=K("Loader",Gte,t),{size:r,color:o,type:s,vars:i,className:a,style:l,classNames:c,styles:d,unstyled:u,loaders:h,variant:f,children:p,...g}=n,b=ke({name:"Loader",props:n,classes:lr,className:a,style:l,classNames:c,styles:d,unstyled:u,vars:i,varsResolver:qte});return p?m.jsx(ie,{...b("root"),ref:e,...g,children:p}):m.jsx(ie,{...b("root"),ref:e,component:h[s],variant:f,size:r,...g})});Gs.defaultLoaders=LD;Gs.classes=lr;Gs.displayName="@mantine/core/Loader";var dl={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const k2={orientation:"horizontal"},Kte=(t,{borderWidth:e})=>({group:{"--ai-border-width":D(e)}}),Gv=Ce((t,e)=>{const n=K("ActionIconGroup",k2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=K("ActionIconGroup",k2,t),p=ke({name:"ActionIconGroup",props:n,classes:dl,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:Kte,rootSelector:"group"});return m.jsx(ie,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});Gv.classes=dl;Gv.displayName="@mantine/core/ActionIconGroup";const C2={},Yte=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":je(i,"section-height"),"--section-padding-x":je(i,"section-padding-x"),"--section-fz":fn(i),"--section-radius":e===void 0?void 0:Ft(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},qv=Ce((t,e)=>{const n=K("ActionIconGroupSection",C2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=K("ActionIconGroupSection",C2,t),p=ke({name:"ActionIconGroupSection",props:n,classes:dl,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:Yte,rootSelector:"groupSection"});return m.jsx(ie,{...p("groupSection"),ref:e,variant:c,...f})});qv.classes=dl;qv.displayName="@mantine/core/ActionIconGroupSection";const Jte={},Zte=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i})=>{const a=t.variantColorResolver({color:s||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ai-size":je(e,"ai-size"),"--ai-radius":n===void 0?void 0:Ft(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},qi=Xt((t,e)=>{const n=K("ActionIcon",Jte,t),{className:r,unstyled:o,variant:s,classNames:i,styles:a,style:l,loading:c,loaderProps:d,size:u,color:h,radius:f,__staticSelector:p,gradient:g,vars:b,children:v,disabled:x,"data-disabled":w,autoContrast:k,mod:C,...S}=n,T=ke({name:["ActionIcon",p],props:n,className:r,style:l,classes:dl,classNames:i,styles:a,unstyled:o,vars:b,varsResolver:Zte});return m.jsxs(Wi,{...T("root",{active:!x&&!c&&!w}),...S,unstyled:o,variant:s,size:u,disabled:x||c,ref:e,mod:[{loading:c,disabled:x||w},C],children:[m.jsx(Gi,{mounted:!!c,transition:"slide-down",duration:150,children:E=>m.jsx(ie,{component:"span",...T("loader",{style:E}),"aria-hidden":!0,children:m.jsx(Gs,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),m.jsx(ie,{component:"span",mod:{loading:c},...T("icon"),children:v})]})});qi.classes=dl;qi.displayName="@mantine/core/ActionIcon";qi.Group=Gv;qi.GroupSection=qv;const jD=y.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>m.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:m.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));jD.displayName="@mantine/core/CloseIcon";var BD={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Xte={variant:"subtle"},Qte=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":je(e,"cb-size"),"--cb-radius":n===void 0?void 0:Ft(n),"--cb-icon-size":D(r)}}),im=Xt((t,e)=>{const n=K("CloseButton",Xte,t),{iconSize:r,children:o,vars:s,radius:i,className:a,classNames:l,style:c,styles:d,unstyled:u,"data-disabled":h,disabled:f,variant:p,icon:g,mod:b,__staticSelector:v,...x}=n,w=ke({name:v||"CloseButton",props:n,className:a,style:c,classes:BD,classNames:l,styles:d,unstyled:u,vars:s,varsResolver:Qte});return m.jsxs(Wi,{ref:e,...x,unstyled:u,variant:p,disabled:f,mod:[{disabled:f||h},b],...w("root",{variant:p,active:!f&&!h}),children:[g||m.jsx(jD,{}),o]})});im.classes=BD;im.displayName="@mantine/core/CloseButton";function ene(t){return y.Children.toArray(t).filter(Boolean)}var $D={root:"m_4081bf90"};const tne={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},nne=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:s,wrap:i},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":Xd(r),"--group-align":o,"--group-justify":s,"--group-wrap":i}}),Et=Ce((t,e)=>{const n=K("Group",tne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,children:l,gap:c,align:d,justify:u,wrap:h,grow:f,preventGrowOverflow:p,vars:g,variant:b,__size:v,mod:x,...w}=n,k=ene(l),C=k.length,S=Xd(c??"md"),E={childWidth:`calc(${100/C}% - (${S} - ${S} / ${C}))`},M=ke({name:"Group",props:n,stylesCtx:E,className:o,style:s,classes:$D,classNames:r,styles:i,unstyled:a,vars:g,varsResolver:nne});return m.jsx(ie,{...M("root"),ref:e,variant:b,mod:[{grow:f},x],size:v,...w,children:k})});Et.classes=$D;Et.displayName="@mantine/core/Group";const[rne,one]=Nv({size:"sm"}),sne={},VD=Ce((t,e)=>{const n=K("InputClearButton",sne,t),{size:r,variant:o,vars:s,classNames:i,styles:a,...l}=n,c=one(),{resolvedClassNames:d,resolvedStyles:u}=rm({classNames:i,styles:a,props:n});return m.jsx(im,{variant:o||"transparent",ref:e,size:r||(c==null?void 0:c.size)||"sm",classNames:d,styles:u,__staticSelector:"InputClearButton",...l})});VD.displayName="@mantine/core/InputClearButton";const[ine,am]=Nv({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Xn={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const S2={},ane=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${fn(e)} - ${D(2)})`}}),lm=Ce((t,e)=>{const n=K("InputDescription",S2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=K("InputDescription",S2,n),p=am(),g=ke({name:["InputWrapper",d],props:n,classes:Xn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"description",vars:l,varsResolver:ane}),b=u&&(p==null?void 0:p.getStyles)||g;return m.jsx(ie,{component:"p",ref:e,variant:h,size:c,...b("description",p!=null&&p.getStyles?{className:o,style:s}:void 0),...f})});lm.classes=Xn;lm.displayName="@mantine/core/InputDescription";const lne={},cne=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${fn(e)} - ${D(2)})`}}),cm=Ce((t,e)=>{const n=K("InputError",lne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...f}=n,p=ke({name:["InputWrapper",d],props:n,classes:Xn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"error",vars:l,varsResolver:cne}),g=am(),b=u&&(g==null?void 0:g.getStyles)||p;return m.jsx(ie,{component:"p",ref:e,variant:h,size:c,...b("error",g!=null&&g.getStyles?{className:o,style:s}:void 0),...f})});cm.classes=Xn;cm.displayName="@mantine/core/InputError";const T2={labelElement:"label"},dne=(t,{size:e})=>({label:{"--input-label-size":fn(e),"--input-asterisk-color":void 0}}),dm=Ce((t,e)=>{const n=K("InputLabel",T2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,labelElement:c,size:d,required:u,htmlFor:h,onMouseDown:f,children:p,__staticSelector:g,variant:b,mod:v,...x}=K("InputLabel",T2,n),w=ke({name:["InputWrapper",g],props:n,classes:Xn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"label",vars:l,varsResolver:dne}),k=am(),C=(k==null?void 0:k.getStyles)||w;return m.jsxs(ie,{...C("label",k!=null&&k.getStyles?{className:o,style:s}:void 0),component:c,variant:b,size:d,ref:e,htmlFor:c==="label"?h:void 0,mod:[{required:u},v],onMouseDown:S=>{f==null||f(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...x,children:[p,u&&m.jsx("span",{...C("required"),"aria-hidden":!0,children:" *"})]})});dm.classes=Xn;dm.displayName="@mantine/core/InputLabel";const E2={},Kv=Ce((t,e)=>{const n=K("InputPlaceholder",E2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,__staticSelector:c,variant:d,error:u,mod:h,...f}=K("InputPlaceholder",E2,n),p=ke({name:["InputPlaceholder",c],props:n,classes:Xn,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"placeholder"});return m.jsx(ie,{...p("placeholder"),mod:[{error:!!u},h],component:"span",variant:d,ref:e,...f})});Kv.classes=Xn;Kv.displayName="@mantine/core/InputPlaceholder";function une(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),o=t.slice(0,r),s=t.slice(r+1),i=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&s.includes("description")||n&&s.includes("error"),offsetTop:i}}const hne={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},fne=(t,{size:e})=>({label:{"--input-label-size":fn(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${fn(e)} - ${D(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${fn(e)} - ${D(2)})`}}),Yv=Ce((t,e)=>{const n=K("InputWrapper",hne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,variant:d,__staticSelector:u,inputContainer:h,inputWrapperOrder:f,label:p,error:g,description:b,labelProps:v,descriptionProps:x,errorProps:w,labelElement:k,children:C,withAsterisk:S,id:T,required:E,__stylesApiProps:M,mod:_,...P}=n,L=ke({name:["InputWrapper",u],props:M||n,classes:Xn,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:fne}),V={size:c,variant:d,__staticSelector:u},F=Qd(T),z=typeof S=="boolean"?S:E,Z=(w==null?void 0:w.id)||`${F}-error`,N=(x==null?void 0:x.id)||`${F}-description`,B=F,H=!!g&&typeof g!="boolean",X=!!b,G=`${H?Z:""} ${X?N:""}`,Q=G.trim().length>0?G.trim():void 0,pe=(v==null?void 0:v.id)||`${F}-label`,Fe=p&&m.jsx(dm,{labelElement:k,id:pe,htmlFor:B,required:z,...V,...v,children:p},"label"),Ke=X&&m.jsx(lm,{...x,...V,size:(x==null?void 0:x.size)||V.size,id:(x==null?void 0:x.id)||N,children:b},"description"),ve=m.jsx(y.Fragment,{children:h(C)},"input"),Oe=H&&y.createElement(cm,{...w,...V,size:(w==null?void 0:w.size)||V.size,key:"error",id:(w==null?void 0:w.id)||Z},g),Ye=f.map($e=>{switch($e){case"label":return Fe;case"input":return ve;case"description":return Ke;case"error":return Oe;default:return null}});return m.jsx(ine,{value:{getStyles:L,describedBy:Q,inputId:B,labelId:pe,...une(f,{hasDescription:X,hasError:H})},children:m.jsx(ie,{ref:e,variant:d,size:c,mod:[{error:!!g},_],...L("root"),...P,children:Ye})})});Yv.classes=Xn;Yv.displayName="@mantine/core/InputWrapper";const pne={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},mne=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":je(e.size,"input-height"),"--input-fz":fn(e.size),"--input-radius":e.radius===void 0?void 0:Ft(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?D(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?D(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?je(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),An=Xt((t,e)=>{const n=K("Input",pne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:d,size:u,wrapperProps:h,error:f,disabled:p,leftSection:g,leftSectionProps:b,leftSectionWidth:v,rightSection:x,rightSectionProps:w,rightSectionWidth:k,rightSectionPointerEvents:C,leftSectionPointerEvents:S,variant:T,vars:E,pointer:M,multiline:_,radius:P,id:L,withAria:V,withErrorStyles:F,mod:z,inputSize:Z,__clearSection:N,__clearable:B,__defaultRightSection:H,...X}=n,{styleProps:G,rest:Q}=om(X),pe=am(),Fe={offsetBottom:pe==null?void 0:pe.offsetBottom,offsetTop:pe==null?void 0:pe.offsetTop},Ke=ke({name:["Input",c],props:d||n,classes:Xn,className:o,style:s,classNames:r,styles:i,unstyled:a,stylesCtx:Fe,rootSelector:"wrapper",vars:E,varsResolver:mne}),ve=V?{required:l,disabled:p,"aria-invalid":!!f,"aria-describedby":pe==null?void 0:pe.describedBy,id:(pe==null?void 0:pe.inputId)||L}:{},Oe=x||B&&N||H;return m.jsx(rne,{value:{size:u||"sm"},children:m.jsxs(ie,{...Ke("wrapper"),...G,...h,mod:[{error:!!f&&F,pointer:M,disabled:p,multiline:_,"data-with-right-section":!!Oe,"data-with-left-section":!!g},z],variant:T,size:u,children:[g&&m.jsx("div",{...b,"data-position":"left",...Ke("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:g}),m.jsx(ie,{component:"input",...Q,...ve,ref:e,required:l,mod:{disabled:p,error:!!f&&F},variant:T,__size:Z,...Ke("input")}),Oe&&m.jsx("div",{...w,"data-position":"right",...Ke("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:Oe})]})})});An.classes=Xn;An.Wrapper=Yv;An.Label=dm;An.Error=cm;An.Description=lm;An.Placeholder=Kv;An.ClearButton=VD;An.displayName="@mantine/core/Input";function gne(t,e,n){const r=K(t,e,n),{label:o,description:s,error:i,required:a,classNames:l,styles:c,className:d,unstyled:u,__staticSelector:h,__stylesApiProps:f,errorProps:p,labelProps:g,descriptionProps:b,wrapperProps:v,id:x,size:w,style:k,inputContainer:C,inputWrapperOrder:S,withAsterisk:T,variant:E,vars:M,mod:_,...P}=r,{styleProps:L,rest:V}=om(P),F={label:o,description:s,error:i,required:a,classNames:l,className:d,__staticSelector:h,__stylesApiProps:f||r,errorProps:p,labelProps:g,descriptionProps:b,unstyled:u,styles:c,size:w,style:k,inputContainer:C,inputWrapperOrder:S,withAsterisk:T,variant:E,id:x,mod:_,...v};return{...V,classNames:l,styles:c,unstyled:u,wrapperProps:{...F,...L},inputProps:{required:a,classNames:l,styles:c,unstyled:u,size:w,__staticSelector:h,__stylesApiProps:f||r,error:i,variant:E,id:x}}}const yne={__staticSelector:"InputBase",withAria:!0},ul=Xt((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=gne("InputBase",yne,t);return m.jsx(An.Wrapper,{...r,children:m.jsx(An,{...n,...o,ref:e})})});ul.classes={...An.classes,...An.Wrapper.classes};ul.displayName="@mantine/core/InputBase";const bne={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var HD={root:"m_8bffd616"};const vne={},Jv=Xt((t,e)=>{const n=K("Flex",vne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:g,...b}=n,v=ke({name:"Flex",classes:HD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l}),x=_n(),w=yD(),k=gD({styleProps:{gap:c,rowGap:d,columnGap:u,align:h,justify:f,wrap:p,direction:g},theme:x,data:bne});return m.jsxs(m.Fragment,{children:[k.hasResponsiveStyles&&m.jsx(mD,{selector:`.${w}`,styles:k.styles,media:k.media}),m.jsx(ie,{ref:e,...v("root",{className:w,style:Qp(k.inlineStyles)}),...b})]})});Jv.classes=HD;Jv.displayName="@mantine/core/Flex";var FD={root:"m_b6d8b162"};function wne(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const xne={inherit:!1},kne=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:s})=>({root:{"--text-fz":fn(o),"--text-lh":JQ(o),"--text-gradient":e==="gradient"?t0(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?qr(s,t):void 0}}),Kr=Xt((t,e)=>{const n=K("Text",xne,t),{lineClamp:r,truncate:o,inline:s,inherit:i,gradient:a,span:l,__staticSelector:c,vars:d,className:u,style:h,classNames:f,styles:p,unstyled:g,variant:b,mod:v,size:x,...w}=n,k=ke({name:["Text",c],props:n,classes:FD,className:u,style:h,classNames:f,styles:p,unstyled:g,vars:d,varsResolver:kne});return m.jsx(ie,{...k("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:b,mod:[{"data-truncate":wne(o),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":i},v],size:x,...w})});Kr.classes=FD;Kr.displayName="@mantine/core/Text";function Zv({size:t,style:e,...n}){const r=t!==void 0?{width:D(t),height:D(t),...e}:e;return m.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:m.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const zD=y.createContext(null),Cne=zD.Provider;function Sne(){return{withinGroup:!!y.useContext(zD)}}var um={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const Tne={},Ene=(t,{spacing:e})=>({group:{"--ag-spacing":Xd(e)}}),Xv=Ce((t,e)=>{const n=K("AvatarGroup",Tne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,spacing:c,...d}=n,u=ke({name:"AvatarGroup",classes:um,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Ene,rootSelector:"group"});return m.jsx(Cne,{value:!0,children:m.jsx(ie,{ref:e,...u("group"),...d})})});Xv.classes=um;Xv.displayName="@mantine/core/AvatarGroup";function Mne(t){return m.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Ane(t){let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}const _ne=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function Rne(t,e=_ne){const n=Ane(t),r=Math.abs(n)%e.length;return e[r]}function Pne(t,e=2){const n=t.split(" ");return n.length===1?t.slice(0,e).toUpperCase():n.map(r=>r[0]).slice(0,e).join("").toUpperCase()}const Ine={},Dne=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i,name:a,allowedInitialsColors:l})=>{const c=s==="initials"&&typeof a=="string"?Rne(a,l):s,d=t.variantColorResolver({color:c||"gray",theme:t,gradient:o,variant:r||"light",autoContrast:i});return{root:{"--avatar-size":je(e,"avatar-size"),"--avatar-radius":n===void 0?void 0:Ft(n),"--avatar-bg":c||r?d.background:void 0,"--avatar-color":c||r?d.color:void 0,"--avatar-bd":c||r?d.border:void 0}}},hm=Xt((t,e)=>{const n=K("Avatar",Ine,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,src:c,alt:d,radius:u,color:h,gradient:f,imageProps:p,children:g,autoContrast:b,mod:v,name:x,allowedInitialsColors:w,...k}=n,C=Sne(),[S,T]=y.useState(!c),E=ke({name:"Avatar",props:n,classes:um,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Dne});return y.useEffect(()=>T(!c),[c]),m.jsx(ie,{...E("root"),mod:[{"within-group":C.withinGroup},v],ref:e,...k,children:S?m.jsx("span",{...E("placeholder"),title:d,children:g||typeof x=="string"&&Pne(x)||m.jsx(Mne,{})}):m.jsx("img",{...p,...E("image"),src:c,alt:d,onError:M=>{var _;T(!0),(_=p==null?void 0:p.onError)==null||_.call(p,M)}})})});hm.classes=um;hm.displayName="@mantine/core/Avatar";hm.Group=Xv;var UD={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Nne={},One=(t,{radius:e,color:n,gradient:r,variant:o,size:s,autoContrast:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{root:{"--badge-height":je(s,"badge-height"),"--badge-padding-x":je(s,"badge-padding-x"),"--badge-fz":je(s,"badge-fz"),"--badge-radius":e===void 0?void 0:Ft(e),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?qr(n,t):void 0}}},Qv=Xt((t,e)=>{const n=K("Badge",Nne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,radius:c,color:d,gradient:u,leftSection:h,rightSection:f,children:p,variant:g,fullWidth:b,autoContrast:v,circle:x,mod:w,...k}=n,C=ke({name:"Badge",props:n,classes:UD,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:One});return m.jsxs(ie,{variant:g,mod:[{block:b,circle:x,"with-right-section":!!f,"with-left-section":!!h},w],...C("root",{variant:g}),ref:e,...k,children:[h&&m.jsx("span",{...C("section"),"data-position":"left",children:h}),m.jsx("span",{...C("label"),children:p}),f&&m.jsx("span",{...C("section"),"data-position":"right",children:f})]})});Qv.classes=UD;Qv.displayName="@mantine/core/Badge";var hl={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const M2={orientation:"horizontal"},Lne=(t,{borderWidth:e})=>({group:{"--button-border-width":D(e)}}),ew=Ce((t,e)=>{const n=K("ButtonGroup",M2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:u,mod:h,...f}=K("ButtonGroup",M2,t),p=ke({name:"ButtonGroup",props:n,classes:hl,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:Lne,rootSelector:"group"});return m.jsx(ie,{...p("group"),ref:e,variant:u,mod:[{"data-orientation":l},h],role:"group",...f})});ew.classes=hl;ew.displayName="@mantine/core/ButtonGroup";const A2={},jne=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":je(i,"section-height"),"--section-padding-x":je(i,"section-padding-x"),"--section-fz":i!=null&&i.includes("compact")?fn(i.replace("compact-","")):fn(i),"--section-radius":e===void 0?void 0:Ft(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},tw=Ce((t,e)=>{const n=K("ButtonGroupSection",A2,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:d,radius:u,autoContrast:h,...f}=K("ButtonGroupSection",A2,t),p=ke({name:"ButtonGroupSection",props:n,classes:hl,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:jne,rootSelector:"groupSection"});return m.jsx(ie,{...p("groupSection"),ref:e,variant:c,...f})});tw.classes=hl;tw.displayName="@mantine/core/ButtonGroupSection";const Bne={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${D(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},$ne={},Vne=(t,{radius:e,color:n,gradient:r,variant:o,size:s,justify:i,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":i,"--button-height":je(s,"button-height"),"--button-padding-x":je(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?fn(s.replace("compact-","")):fn(s),"--button-radius":e===void 0?void 0:Ft(e),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},Cr=Xt((t,e)=>{const n=K("Button",$ne,t),{style:r,vars:o,className:s,color:i,disabled:a,children:l,leftSection:c,rightSection:d,fullWidth:u,variant:h,radius:f,loading:p,loaderProps:g,gradient:b,classNames:v,styles:x,unstyled:w,"data-disabled":k,autoContrast:C,mod:S,...T}=n,E=ke({name:"Button",props:n,classes:hl,className:s,style:r,classNames:v,styles:x,unstyled:w,vars:o,varsResolver:Vne}),M=!!c,_=!!d;return m.jsxs(Wi,{ref:e,...E("root",{active:!a&&!p&&!k}),unstyled:w,variant:h,disabled:a||p,mod:[{disabled:a||k,loading:p,block:u,"with-left-section":M,"with-right-section":_},S],...T,children:[m.jsx(Gi,{mounted:!!p,transition:Bne,duration:150,children:P=>m.jsx(ie,{component:"span",...E("loader",{style:P}),"aria-hidden":!0,children:m.jsx(Gs,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),m.jsxs("span",{...E("inner"),children:[c&&m.jsx(ie,{component:"span",...E("section"),mod:{position:"left"},children:c}),m.jsx(ie,{component:"span",mod:{loading:p},...E("label"),children:l}),d&&m.jsx(ie,{component:"span",...E("section"),mod:{position:"right"},children:d})]})]})});Cr.classes=hl;Cr.displayName="@mantine/core/Button";Cr.Group=ew;Cr.GroupSection=tw;const[Hne,Fne]=em("Card component was not found in tree");var nw={root:"m_e615b15f",section:"m_599a2148"};const zne={},fm=Xt((t,e)=>{const n=K("CardSection",zne,t),{classNames:r,className:o,style:s,styles:i,vars:a,withBorder:l,inheritPadding:c,mod:d,...u}=n,h=Fne();return m.jsx(ie,{ref:e,mod:[{"with-border":l,"inherit-padding":c},d],...h.getStyles("section",{className:o,style:s,styles:i,classNames:r}),...u})});fm.classes=nw;fm.displayName="@mantine/core/CardSection";const Une={},Wne=(t,{padding:e})=>({root:{"--card-padding":Xd(e)}}),ru=Xt((t,e)=>{const n=K("Card",Une,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,children:c,padding:d,...u}=n,h=ke({name:"Card",props:n,classes:nw,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Wne}),f=y.Children.toArray(c),p=f.map((g,b)=>typeof g=="object"&&g&&"type"in g&&g.type===fm?y.cloneElement(g,{"data-first-section":b===0||void 0,"data-last-section":b===f.length-1||void 0}):g);return m.jsx(Hne,{value:{getStyles:h},children:m.jsx(Fv,{ref:e,unstyled:a,...h("root"),...u,children:p})})});ru.classes=nw;ru.displayName="@mantine/core/Card";ru.Section=fm;const[Gne,qne]=Nv(),Kne={};function WD(t){const{value:e,defaultValue:n,onChange:r,multiple:o,children:s}=K("ChipGroup",Kne,t),[i,a]=ll({value:e,defaultValue:n,finalValue:o?[]:null,onChange:r}),l=d=>Array.isArray(i)?i.includes(d):d===i,c=d=>{const u=d.currentTarget.value;Array.isArray(i)?a(i.includes(u)?i.filter(h=>h!==u):[...i,u]):a(u)};return m.jsx(Gne,{value:{isChipSelected:l,onChange:c,multiple:o},children:s})}WD.displayName="@mantine/core/ChipGroup";var GD={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const Yne={type:"checkbox"},Jne=(t,{size:e,radius:n,variant:r,color:o,autoContrast:s})=>{const i=t.variantColorResolver({color:o||t.primaryColor,theme:t,variant:r||"filled",autoContrast:s});return{root:{"--chip-fz":fn(e),"--chip-size":je(e,"chip-size"),"--chip-radius":n===void 0?void 0:Ft(n),"--chip-checked-padding":je(e,"chip-checked-padding"),"--chip-padding":je(e,"chip-padding"),"--chip-icon-size":je(e,"chip-icon-size"),"--chip-bg":o||r?i.background:void 0,"--chip-hover":o||r?i.hover:void 0,"--chip-color":o||r?i.color:void 0,"--chip-bd":o||r?i.border:void 0,"--chip-spacing":je(e,"chip-spacing")}}},pm=Ce((t,e)=>{const n=K("Chip",Yne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,id:c,checked:d,defaultChecked:u,onChange:h,value:f,wrapperProps:p,type:g,disabled:b,children:v,size:x,variant:w,icon:k,rootRef:C,autoContrast:S,mod:T,...E}=n,M=ke({name:"Chip",classes:GD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Jne}),_=qne(),P=Qd(c),{styleProps:L,rest:V}=om(E),[F,z]=ll({value:d,defaultValue:u,finalValue:!1,onChange:h}),Z=_?{checked:_.isChipSelected(f),onChange:B=>{_.onChange(B),h==null||h(B.currentTarget.checked)},type:_.multiple?"checkbox":"radio"}:{},N=Z.checked||F;return m.jsxs(ie,{size:x,variant:w,ref:C,mod:T,...M("root"),...L,...p,children:[m.jsx("input",{type:g,...M("input"),checked:N,onChange:B=>z(B.currentTarget.checked),id:P,disabled:b,ref:e,value:f,...Z,...V}),m.jsxs("label",{htmlFor:P,"data-checked":N||void 0,"data-disabled":b||void 0,...M("label",{variant:w||"filled"}),children:[N&&m.jsx("span",{...M("iconWrapper"),children:k||m.jsx(Zv,{...M("checkIcon")})}),m.jsx("span",{children:v})]})]})});pm.classes=GD;pm.displayName="@mantine/core/Chip";pm.Group=WD;var qD={root:"m_3eebeb36",label:"m_9e365f20"};const Zne={orientation:"horizontal"},Xne=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?qr(e,t):void 0,"--divider-border-style":n,"--divider-size":je(r,"divider-size")}}),rw=Ce((t,e)=>{const n=K("Divider",Zne,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,color:c,orientation:d,label:u,labelPosition:h,mod:f,...p}=n,g=ke({name:"Divider",classes:qD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Xne});return m.jsx(ie,{ref:e,mod:[{orientation:d,"with-label":!!u},f],...g("root"),...p,role:"separator",children:u&&m.jsx(ie,{component:"span",mod:{position:h},...g("label"),children:u})})});rw.classes=qD;rw.displayName="@mantine/core/Divider";const Qne={multiple:!1},KD=y.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:s,name:i,form:a,resetRef:l,disabled:c,capture:d,inputProps:u,...h}=K("FileButton",Qne,t),f=y.useRef(null),p=()=>{var v;!c&&((v=f.current)==null||v.click())},g=v=>{n(o?Array.from(v.currentTarget.files):v.currentTarget.files[0]||null)};return zf(l,()=>{f.current&&(f.current.value="")}),m.jsxs(m.Fragment,{children:[r({onClick:p,...h}),m.jsx("input",{style:{display:"none"},type:"file",accept:s,multiple:o,onChange:g,ref:Ho(e,f),name:i,form:a,capture:d,...u})]})});KD.displayName="@mantine/core/FileButton";const ere=({value:t})=>m.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t==null?void 0:t.name}),tre={valueComponent:ere},ow=Ce((t,e)=>{const n=K("FileInput",tre,t),{unstyled:r,vars:o,onChange:s,value:i,defaultValue:a,multiple:l,accept:c,name:d,form:u,valueComponent:h,clearable:f,clearButtonProps:p,readOnly:g,capture:b,fileInputProps:v,rightSection:x,size:w,placeholder:k,component:C,resetRef:S,classNames:T,styles:E,...M}=n,_=y.useRef(null),{resolvedClassNames:P,resolvedStyles:L}=rm({classNames:T,styles:E,props:n}),[V,F]=ll({value:i,defaultValue:a,onChange:s,finalValue:l?[]:null}),z=Array.isArray(V)?V.length!==0:V!==null,Z=x||(f&&z&&!g?m.jsx(im,{...p,variant:"subtle",onClick:()=>F(l?[]:null),size:w,unstyled:r}):null);y.useEffect(()=>{var B;(Array.isArray(V)&&V.length===0||V===null)&&((B=_.current)==null||B.call(_))},[V]);const N=h;return m.jsx(KD,{onChange:F,multiple:l,accept:c,name:d,form:u,resetRef:Ho(_,S),disabled:g,capture:b,inputProps:v,children:B=>m.jsx(ul,{component:C||"button",ref:e,rightSection:Z,...B,...M,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:w,classNames:T,styles:E,children:z?m.jsx(N,{value:V}):m.jsx(An.Placeholder,{__staticSelector:"FileInput",classNames:P,styles:L,children:k})})})});ow.classes=ul.classes;ow.displayName="@mantine/core/FileInput";const nre=ow;function rre({open:t,close:e,openDelay:n,closeDelay:r}){const o=y.useRef(-1),s=y.useRef(-1),i=()=>{window.clearTimeout(o.current),window.clearTimeout(s.current)},a=()=>{i(),n===0||n===void 0?t():o.current=window.setTimeout(t,n)},l=()=>{i(),r===0||r===void 0?e():s.current=window.setTimeout(e,r)};return y.useEffect(()=>i,[]),{openDropdown:a,closeDropdown:l}}function o0(){return o0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o0.apply(null,arguments)}function ore(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sre=y.useLayoutEffect,ire=function(e){var n=y.useRef(e);return sre(function(){n.current=e}),n},_2=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},are=function(e,n){var r=y.useRef();return y.useCallback(function(o){e.current=o,r.current&&_2(r.current,null),r.current=n,n&&_2(n,o)},[n])},R2={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},lre=function(e){Object.keys(R2).forEach(function(n){e.style.setProperty(n,R2[n],"important")})},P2=lre,zt=null,I2=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function cre(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),zt||(zt=document.createElement("textarea"),zt.setAttribute("tabindex","-1"),zt.setAttribute("aria-hidden","true"),P2(zt)),zt.parentNode===null&&document.body.appendChild(zt);var o=t.paddingSize,s=t.borderSize,i=t.sizingStyle,a=i.boxSizing;Object.keys(i).forEach(function(h){var f=h;zt.style[f]=i[f]}),P2(zt),zt.value=e;var l=I2(zt,t);zt.value=e,l=I2(zt,t),zt.value="x";var c=zt.scrollHeight-o,d=c*n;a==="border-box"&&(d=d+o+s),l=Math.max(d,l);var u=c*r;return a==="border-box"&&(u=u+o+s),l=Math.min(u,l),[l,c]}var D2=function(){},dre=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},ure=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],hre=!!document.documentElement.currentStyle,fre=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=dre(ure,n),o=r.boxSizing;if(o==="")return null;hre&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:i}},pre=fre;function sw(t,e,n){var r=ire(n);y.useLayoutEffect(function(){var o=function(i){return r.current(i)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var mre=function(e,n){sw(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},gre=function(e){sw(window,"resize",e)},yre=function(e){sw(document.fonts,"loadingdone",e)},bre=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],vre=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,s=e.minRows,i=e.onChange,a=i===void 0?D2:i,l=e.onHeightChange,c=l===void 0?D2:l,d=ore(e,bre),u=d.value!==void 0,h=y.useRef(null),f=are(h,n),p=y.useRef(0),g=y.useRef(),b=function(){var w=h.current,k=r&&g.current?g.current:pre(w);if(k){g.current=k;var C=cre(k,w.value||w.placeholder||"x",s,o),S=C[0],T=C[1];p.current!==S&&(p.current=S,w.style.setProperty("height",S+"px","important"),c(S,{rowHeight:T}))}},v=function(w){u||b(),a(w)};return y.useLayoutEffect(b),mre(h,function(){if(!u){var x=h.current.value;requestAnimationFrame(function(){var w=h.current;w&&x!==w.value&&b()})}}),gre(b),yre(b),y.createElement("textarea",o0({},d,{onChange:v,ref:f}))},wre=y.forwardRef(vre),YD={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const N2={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Zd("overlay")},xre=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),iw=Ce((t,e)=>{const n=K("LoadingOverlay",N2,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,transitionProps:c,loaderProps:d,overlayProps:u,visible:h,zIndex:f,...p}=n,g=_n(),b=ke({name:"LoadingOverlay",classes:YD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:xre}),v={...N2.overlayProps,...u};return m.jsx(Gi,{transition:"fade",...c,mounted:!!h,children:x=>m.jsxs(ie,{...b("root",{style:x}),ref:e,...p,children:[m.jsx(Gs,{...b("loader"),unstyled:a,...d}),m.jsx(dd,{...v,...b("overlay"),darkHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||g.white}),m.jsx(dd,{...v,...b("overlay"),lightHidden:!0,unstyled:a,color:(u==null?void 0:u.color)||g.colors.dark[5]})]})})});iw.classes=YD;iw.displayName="@mantine/core/LoadingOverlay";const[kre,ou]=em("Menu component was not found in the tree");var fl={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Cre={},aw=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=K("MenuDivider",Cre,t),l=ou();return m.jsx(ie,{ref:e,...l.getStyles("divider",{className:r,style:o,styles:s,classNames:n}),...a})});aw.classes=fl;aw.displayName="@mantine/core/MenuDivider";const Sre={},lw=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:d,...u}=K("MenuDropdown",Sre,t),h=y.useRef(null),f=ou(),p=Or(c,v=>{var x,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(x=h.current)==null?void 0:x.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),g=Or(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),b=Or(l,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return m.jsxs(Ws.Dropdown,{...u,onMouseEnter:g,onMouseLeave:b,role:"menu","aria-orientation":"vertical",ref:Ho(e,h),...f.getStyles("dropdown",{className:r,style:o,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[f.withInitialFocusPlaceholder&&m.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),d]})});lw.classes=fl;lw.displayName="@mantine/core/MenuDropdown";const Tre={},cw=Xt((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,color:a,closeMenuOnClick:l,leftSection:c,rightSection:d,children:u,disabled:h,"data-disabled":f,...p}=K("MenuItem",Tre,t),g=ou(),b=_n(),{dir:v}=tu(),x=y.useRef(null),w=g.getItemIndex(x.current),k=p,C=Or(k.onMouseLeave,()=>g.setHovered(-1)),S=Or(k.onMouseEnter,()=>g.setHovered(g.getItemIndex(x.current))),T=Or(k.onClick,()=>{f||(typeof l=="boolean"?l&&g.closeDropdownImmediately():g.closeOnItemClick&&g.closeDropdownImmediately())}),E=Or(k.onFocus,()=>g.setHovered(g.getItemIndex(x.current))),M=a?b.variantColorResolver({color:a,theme:b,variant:"light"}):void 0,_=a?cl({color:a,theme:b}):null;return m.jsxs(Wi,{...p,unstyled:g.unstyled,tabIndex:g.menuItemTabIndex,onFocus:E,...g.getStyles("item",{className:r,style:o,styles:s,classNames:n}),ref:Ho(x,e),role:"menuitem",disabled:h,"data-menu-item":!0,"data-disabled":h||f||void 0,"data-hovered":g.hovered===w?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:S,onMouseLeave:C,onClick:T,onKeyDown:eD({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:g.loop,dir:v,orientation:"vertical",onKeyDown:k.onKeyDown}),__vars:{"--menu-item-color":_!=null&&_.isThemeColor&&(_==null?void 0:_.shade)===void 0?`var(--mantine-color-${_.color}-6)`:M==null?void 0:M.color,"--menu-item-hover":M==null?void 0:M.hover},children:[c&&m.jsx("div",{...g.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:c}),u&&m.jsx("div",{...g.getStyles("itemLabel",{styles:s,classNames:n}),children:u}),d&&m.jsx("div",{...g.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:d})]})});cw.classes=fl;cw.displayName="@mantine/core/MenuItem";const Ere={},dw=Ce((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=K("MenuLabel",Ere,t),l=ou();return m.jsx(ie,{ref:e,...l.getStyles("label",{className:r,style:o,styles:s,classNames:n}),...a})});dw.classes=fl;dw.displayName="@mantine/core/MenuLabel";const Mre={refProp:"ref"},JD=y.forwardRef((t,e)=>{const{children:n,refProp:r,...o}=K("MenuTarget",Mre,t);if(!Jd(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=ou(),i=n.props,a=Or(i.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),l=Or(i.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),c=Or(i.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return m.jsx(Ws.Target,{refProp:r,popupType:"menu",ref:e,...o,children:y.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:c,"data-expanded":s.opened?!0:void 0})})});JD.displayName="@mantine/core/MenuTarget";const Are={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function et(t){const e=K("Menu",Are,t),{children:n,onOpen:r,onClose:o,opened:s,defaultOpened:i,trapFocus:a,onChange:l,closeOnItemClick:c,loop:d,closeOnEscape:u,trigger:h,openDelay:f,closeDelay:p,classNames:g,styles:b,unstyled:v,variant:x,vars:w,menuItemTabIndex:k,keepMounted:C,withInitialFocusPlaceholder:S,...T}=e,E=ke({name:"Menu",classes:fl,props:e,classNames:g,styles:b,unstyled:v}),[M,{setHovered:_,resetHovered:P}]=XQ(),[L,V]=ll({value:s,defaultValue:i,finalValue:!1,onChange:l}),[F,z]=y.useState(!1),Z=()=>{V(!1),z(!1),L&&(o==null||o())},N=()=>{V(!0),!L&&(r==null||r())},B=()=>{L?Z():N()},{openDropdown:H,closeDropdown:X}=rre({open:N,close:Z,closeDelay:p,openDelay:f}),G=Fe=>ZQ("[data-menu-item]","[data-menu-dropdown]",Fe),{resolvedClassNames:Q,resolvedStyles:pe}=rm({classNames:g,styles:b,props:e});return Ns(()=>{P()},[L]),m.jsx(kre,{value:{getStyles:E,opened:L,toggleDropdown:B,getItemIndex:G,hovered:M,setHovered:_,openedViaClick:F,setOpenedViaClick:z,closeOnItemClick:c,closeDropdown:h==="click"?Z:X,openDropdown:h==="click"?N:H,closeDropdownImmediately:Z,loop:d,trigger:h,unstyled:v,menuItemTabIndex:k,withInitialFocusPlaceholder:S},children:m.jsx(Ws,{...T,opened:L,onChange:B,defaultOpened:i,trapFocus:C?!1:a,closeOnEscape:u,__staticSelector:"Menu",classNames:Q,styles:pe,unstyled:v,variant:x,keepMounted:C,children:n})})}et.extend=t=>t;et.withProps=Ste(et);et.classes=fl;et.displayName="@mantine/core/Menu";et.Item=cw;et.Label=dw;et.Dropdown=lw;et.Target=JD;et.Divider=aw;const _re={duration:100,transition:"fade"};function Rre(t,e){return{..._re,...e,...t}}function Pre({offset:t,position:e,defaultOpened:n}){const[r,o]=y.useState(n),s=y.useRef(null),{x:i,y:a,elements:l,refs:c,update:d,placement:u}=al({placement:e,middleware:[Hi({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=u.includes("right")?t:e.includes("left")?t*-1:0,f=u.includes("bottom")?t:e.includes("top")?t*-1:0,p=y.useCallback(({clientX:g,clientY:b})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:g,y:b,left:g+h,top:b+f,right:g,bottom:b}}})},[l.reference]);return y.useEffect(()=>{if(c.floating.current){const g=s.current;g.addEventListener("mousemove",p);const b=oh(c.floating.current);return b.forEach(v=>{v.addEventListener("scroll",d)}),()=>{g.removeEventListener("mousemove",p),b.forEach(v=>{v.removeEventListener("scroll",d)})}}},[l.reference,c.floating.current,d,p,r]),{handleMouseMove:p,x:i,y:a,opened:r,setOpened:o,boundaryRef:s,floating:c.setFloating}}var mm={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Ire={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Zd("popover")},Dre=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Ft(e),"--tooltip-bg":n?qr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),uw=Ce((t,e)=>{const n=K("TooltipFloating",Ire,t),{children:r,refProp:o,withinPortal:s,style:i,className:a,classNames:l,styles:c,unstyled:d,radius:u,color:h,label:f,offset:p,position:g,multiline:b,zIndex:v,disabled:x,defaultOpened:w,variant:k,vars:C,portalProps:S,...T}=n,E=_n(),M=ke({name:"TooltipFloating",props:n,classes:mm,className:a,style:i,classNames:l,styles:c,unstyled:d,rootSelector:"tooltip",vars:C,varsResolver:Dre}),{handleMouseMove:_,x:P,y:L,opened:V,boundaryRef:F,floating:z,setOpened:Z}=Pre({offset:p,position:g,defaultOpened:w});if(!Jd(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const N=Ho(F,Ov(r),e),B=r.props,H=G=>{var Q;(Q=B.onMouseEnter)==null||Q.call(B,G),_(G),Z(!0)},X=G=>{var Q;(Q=B.onMouseLeave)==null||Q.call(B,G),Z(!1)};return m.jsxs(m.Fragment,{children:[m.jsx(nu,{...S,withinPortal:s,children:m.jsx(ie,{...T,...M("tooltip",{style:{...bD(i,E),zIndex:v,display:!x&&V?"block":"none",top:(L&&Math.round(L))??"",left:(P&&Math.round(P))??""}}),variant:k,ref:z,mod:{multiline:b},children:f})}),y.cloneElement(r,{...B,[o]:N,onMouseEnter:H,onMouseLeave:X})]})});uw.classes=mm;uw.displayName="@mantine/core/TooltipFloating";const ZD=y.createContext(!1),Nre=ZD.Provider,Ore=()=>y.useContext(ZD),Lre={openDelay:0,closeDelay:0};function hw(t){const{openDelay:e,closeDelay:n,children:r}=K("TooltipGroup",Lre,t);return m.jsx(Nre,{value:!0,children:m.jsx(SJ,{delay:{open:e,close:n},children:r})})}hw.displayName="@mantine/core/TooltipGroup";hw.extend=t=>t;function jre(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function Bre(t){const e=jre(t.middlewares),n=[Jr(t.offset)];return e.shift&&n.push(Hi(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?ur():ur(e.flip)),n.push(HE({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?sc():sc(e.inline)):t.inline&&n.push(sc()),n}function $re(t){var S,T,E;const[e,n]=y.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,s=Ore(),i=Qd(),a=y.useCallback(M=>{n(M),M&&x(i)},[i]),{x:l,y:c,context:d,refs:u,update:h,placement:f,middlewareData:{arrow:{x:p,y:g}={}}}=al({strategy:t.strategy,placement:t.position,open:o,onOpenChange:a,middleware:Bre(t)}),{delay:b,currentId:v,setCurrentId:x}=TJ(d,{id:i}),{getReferenceProps:w,getFloatingProps:k}=bI([kJ(d,{enabled:(S=t.events)==null?void 0:S.hover,delay:s?b:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((T=t.events)!=null&&T.touch)}),jJ(d,{enabled:(E=t.events)==null?void 0:E.focus,visibleOnly:!0}),$J(d,{role:"tooltip"}),yI(d,{enabled:typeof t.opened>"u"})]);ID({opened:o,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:u,update:h}}),Ns(()=>{var M;(M=t.onPositionChange)==null||M.call(t,f)},[f]);const C=o&&v&&v!==i;return{x:l,y:c,arrowX:p,arrowY:g,reference:u.setReference,floating:u.setFloating,getFloatingProps:k,getReferenceProps:w,isGroupPhase:C,opened:o,placement:f}}const O2={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Zd("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},Vre=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Ft(e),"--tooltip-bg":n?qr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),pl=Ce((t,e)=>{const n=K("Tooltip",O2,t),{children:r,position:o,refProp:s,label:i,openDelay:a,closeDelay:l,onPositionChange:c,opened:d,defaultOpened:u,withinPortal:h,radius:f,color:p,classNames:g,styles:b,unstyled:v,style:x,className:w,withArrow:k,arrowSize:C,arrowOffset:S,arrowRadius:T,arrowPosition:E,offset:M,transitionProps:_,multiline:P,events:L,zIndex:V,disabled:F,positionDependencies:z,onClick:Z,onMouseEnter:N,onMouseLeave:B,inline:H,variant:X,keepMounted:G,vars:Q,portalProps:pe,mod:Fe,floatingStrategy:Ke,middlewares:ve,...Oe}=K("Tooltip",O2,n),{dir:Ye}=tu(),$e=y.useRef(null),le=$re({position:ED(Ye,o),closeDelay:l,openDelay:a,onPositionChange:c,opened:d,defaultOpened:u,events:L,arrowRef:$e,arrowOffset:S,offset:typeof M=="number"?M+(k?C/2:0):M,positionDependencies:[...z,r],inline:H,strategy:Ke,middlewares:ve}),en=ke({name:"Tooltip",props:n,classes:mm,className:w,style:x,classNames:g,styles:b,unstyled:v,rootSelector:"tooltip",vars:Q,varsResolver:Vre});if(!Jd(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Pt=Ho(le.reference,Ov(r),e),tn=Rre(_,{duration:100,transition:"fade"}),It=r.props;return m.jsxs(m.Fragment,{children:[m.jsx(nu,{...pe,withinPortal:h,children:m.jsx(Gi,{...tn,keepMounted:G,mounted:!F&&!!le.opened,duration:le.isGroupPhase?10:tn.duration,children:Rn=>m.jsxs(ie,{...Oe,"data-fixed":Ke==="fixed"||void 0,variant:X,mod:[{multiline:P},Fe],...le.getFloatingProps({ref:le.floating,className:en("tooltip").className,style:{...en("tooltip").style,...Rn,zIndex:V,top:le.y??0,left:le.x??0}}),children:[i,m.jsx(zv,{ref:$e,arrowX:le.arrowX,arrowY:le.arrowY,visible:k,position:le.placement,arrowSize:C,arrowOffset:S,arrowRadius:T,arrowPosition:E,...en("arrow")})]})})}),y.cloneElement(r,le.getReferenceProps({onClick:Z,onMouseEnter:N,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:Fo(w,It.className),...It,[s]:Pt}))]})});pl.classes=mm;pl.displayName="@mantine/core/Tooltip";pl.Floating=uw;pl.Group=hw;var XD={root:"m_18320242","skeleton-fade":"m_299c329c"};const Hre={visible:!0,animate:!0},Fre=(t,{width:e,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":D(n),"--skeleton-width":D(o?n:e),"--skeleton-radius":o?"1000px":r===void 0?void 0:Ft(r)}}),Wf=Ce((t,e)=>{const n=K("Skeleton",Hre,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,width:c,height:d,circle:u,visible:h,radius:f,animate:p,mod:g,...b}=n,v=ke({name:"Skeleton",classes:XD,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Fre});return m.jsx(ie,{ref:e,...v("root"),mod:[{visible:h,animate:p},g],...b})});Wf.classes=XD;Wf.displayName="@mantine/core/Skeleton";var QD={root:"m_6d731127"};const zre={gap:"md",align:"stretch",justify:"flex-start"},Ure=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":Xd(e),"--stack-align":n,"--stack-justify":r}}),su=Ce((t,e)=>{const n=K("Stack",zre,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,align:c,justify:d,gap:u,variant:h,...f}=n,p=ke({name:"Stack",props:n,classes:QD,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:Ure});return m.jsx(ie,{ref:e,...p("root"),variant:h,...f})});su.classes=QD;su.displayName="@mantine/core/Stack";const[Wre,fw]=em("Tabs component was not found in the tree");var iu={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Gre={},pw=Ce((t,e)=>{const n=K("TabsList",Gre,t),{children:r,className:o,grow:s,justify:i,classNames:a,styles:l,style:c,mod:d,...u}=n,h=fw();return m.jsx(ie,{...u,...h.getStyles("list",{className:o,style:c,classNames:a,styles:l,props:n,variant:h.variant}),ref:e,role:"tablist",variant:h.variant,mod:[{grow:s,orientation:h.orientation,placement:h.orientation==="vertical"&&h.placement,inverted:h.inverted},d],"aria-orientation":h.orientation,__vars:{"--tabs-justify":i},children:r})});pw.classes=iu;pw.displayName="@mantine/core/TabsList";const qre={},mw=Ce((t,e)=>{const n=K("TabsPanel",qre,t),{children:r,className:o,value:s,classNames:i,styles:a,style:l,mod:c,keepMounted:d,...u}=n,h=fw(),f=h.value===s,p=h.keepMounted||d||f?r:null;return m.jsx(ie,{...u,...h.getStyles("panel",{className:o,classNames:i,styles:a,style:[l,f?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:h.orientation},c],role:"tabpanel",id:h.getPanelId(s),"aria-labelledby":h.getTabId(s),children:p})});mw.classes=iu;mw.displayName="@mantine/core/TabsPanel";const Kre={},gw=Ce((t,e)=>{const n=K("TabsTab",Kre,t),{className:r,children:o,rightSection:s,leftSection:i,value:a,onClick:l,onKeyDown:c,disabled:d,color:u,style:h,classNames:f,styles:p,vars:g,mod:b,tabIndex:v,...x}=n,w=_n(),{dir:k}=tu(),C=fw(),S=a===C.value,T=M=>{C.onChange(C.allowTabDeactivation&&a===C.value?null:a),l==null||l(M)},E={classNames:f,styles:p,props:n};return m.jsxs(Wi,{...x,...C.getStyles("tab",{className:r,style:h,variant:C.variant,...E}),disabled:d,unstyled:C.unstyled,variant:C.variant,mod:[{active:S,disabled:d,orientation:C.orientation,inverted:C.inverted,placement:C.orientation==="vertical"&&C.placement},b],ref:e,role:"tab",id:C.getTabId(a),"aria-selected":S,tabIndex:v!==void 0?v:S||C.value===null?0:-1,"aria-controls":C.getPanelId(a),onClick:T,__vars:{"--tabs-color":u?qr(u,w):void 0},onKeyDown:eD({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:C.activateTabWithKeyboard,loop:C.loop,orientation:C.orientation||"horizontal",dir:k,onKeyDown:c}),children:[i&&m.jsx("span",{...C.getStyles("tabSection",E),"data-position":"left",children:i}),o&&m.jsx("span",{...C.getStyles("tabLabel",E),children:o}),s&&m.jsx("span",{...C.getStyles("tabSection",E),"data-position":"right",children:s})]})});gw.classes=iu;gw.displayName="@mantine/core/TabsTab";const L2="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Yre={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Jre=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ft(e),"--tabs-color":qr(n,t),"--tabs-text-color":ote(r,t)?uD({color:n,theme:t,autoContrast:r}):void 0}}),Co=Ce((t,e)=>{const n=K("Tabs",Yre,t),{defaultValue:r,value:o,onChange:s,orientation:i,children:a,loop:l,id:c,activateTabWithKeyboard:d,allowTabDeactivation:u,variant:h,color:f,radius:p,inverted:g,placement:b,keepMounted:v,classNames:x,styles:w,unstyled:k,className:C,style:S,vars:T,autoContrast:E,mod:M,..._}=n,P=Qd(c),[L,V]=ll({value:o,defaultValue:r,finalValue:null,onChange:s}),F=ke({name:"Tabs",props:n,classes:iu,className:C,style:S,classNames:x,styles:w,unstyled:k,vars:T,varsResolver:Jre});return m.jsx(Wre,{value:{placement:b,value:L,orientation:i,id:P,loop:l,activateTabWithKeyboard:d,getTabId:c2(`${P}-tab`,L2),getPanelId:c2(`${P}-panel`,L2),onChange:V,allowTabDeactivation:u,variant:h,color:f,radius:p,inverted:g,keepMounted:v,unstyled:k,getStyles:F},children:m.jsx(ie,{ref:e,id:P,variant:h,mod:[{orientation:i,inverted:i==="horizontal"&&g,placement:i==="vertical"&&b},M],...F("root"),..._,children:a})})});Co.classes=iu;Co.displayName="@mantine/core/Tabs";Co.Tab=gw;Co.Panel=mw;Co.List=pw;const Zre={},gm=Ce((t,e)=>{const n=K("TextInput",Zre,t);return m.jsx(ul,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});gm.classes=ul.classes;gm.displayName="@mantine/core/TextInput";const eN=(t,e,n=!1)=>{const r=[];function o(s,i="--bn"){for(const a in s){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${i}-${l}`;typeof s[a]!="object"?(typeof s[a]=="number"&&(s[a]=`${s[a]}px`),n?e.style.removeProperty(c):e.style.setProperty(c,s[a].toString())):o(s[a],c)}}return o(t),r},j2=(t,e)=>eN(t,e),Xre={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},Qre=t=>eN(Xre,t,!0),tN=t=>m.jsxs(su,{gap:0,className:"bn-tooltip",children:[m.jsx(Kr,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&m.jsx(Kr,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),ny=y.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:s,icon:i,isSelected:a,isDisabled:l,onClick:c,label:d,variant:u,...h}=t;he(h,!1);const[f,p]=y.useState(!1),g=r?m.jsx(Cr,{"aria-label":d,className:n,onMouseDown:b=>{Nb()&&b.currentTarget.focus()},onClick:b=>{p(!0),c==null||c(b)},onPointerLeave:()=>p(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:u==="compact"?"compact-xs":"xs",disabled:l||!1,ref:e,...h,children:r}):m.jsx(qi,{className:n,"aria-label":d,onMouseDown:b=>{Nb()&&b.currentTarget.focus()},onClick:b=>{p(!0),c==null||c(b)},onPointerLeave:()=>p(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:u==="compact"?20:30,disabled:l||!1,ref:e,...h,children:i});return o?m.jsx(pl,{disabled:f,withinPortal:!1,label:m.jsx(tN,{mainTooltip:o,secondaryTooltip:s}),children:g}):g}),eoe=y.forwardRef((t,e)=>{const{className:n,text:r,icon:o,isSelected:s,mainTooltip:i,secondaryTooltip:a,onClick:l,onMouseEnter:c,...d}=t;he(d,!1);const[u,h]=y.useState(!1),f=m.jsxs(pm,{className:n,checked:s===!0,wrapperProps:{onMouseEnter:c,onMouseLeave:()=>h(!1),onClick:p=>{h(!0),l==null||l(p)}},variant:"light",icon:null,ref:e,children:[m.jsx("span",{children:o}),m.jsx("span",{children:r})]});return!i||u?f:m.jsx(pl,{refProp:"rootRef",withinPortal:!1,label:m.jsx(tN,{mainTooltip:i,secondaryTooltip:a}),children:f})}),toe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Et,{className:n,ref:e,children:r})}),noe=y.forwardRef((t,e)=>{const{className:n,children:r,headerText:o,selected:s,onFocus:i,onBlur:a,tabIndex:l,...c}=t;he(c,!1);const d=y.useRef(null);return y.useEffect(()=>{var u;s&&((u=d.current)==null||u.scrollIntoView({behavior:"smooth",block:"center"}))},[s]),m.jsxs(ru,{className:Be(n,s?"selected":""),onFocus:i,onBlur:a,tabIndex:l,ref:_v([e,d]),children:[o&&m.jsx(Kr,{className:"bn-header-text",children:o}),r]})}),roe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(ru.Section,{className:n,ref:e,children:r})}),ooe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(rw,{className:n,label:m.jsx(Kr,{children:r}),ref:e})}),soe=y.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:o,...s}=t;return he(s,!1),n==="loading"?m.jsxs(Et,{children:[m.jsx(Wf,{height:24,width:24}),m.jsx("div",{children:m.jsx(Wf,{height:12,width:100})})]}):m.jsxs(Et,{children:[m.jsx(hm,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),m.jsxs(Kr,{fz:"sm",fw:"bold",children:[n.username,m.jsxs(Kr,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&"(edited)"]})]})]})}),ioe=y.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:o,timeString:s,edited:i,actions:a,children:l,...c}=t,{hovered:d,ref:u}=fee(),{focused:h,ref:f}=iD(),p=_v([e,u]);return he(c,!1),m.jsxs(Et,{pos:"relative",ref:p,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&d||h)?m.jsx(Et,{ref:f,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,m.jsx(soe,{...t}),l]})}),aoe=y.forwardRef((t,e)=>{const{className:n,autoFocus:r,onFocus:o,onBlur:s,editor:i,editable:a,...l}=t;return he(l,!1),m.jsx(iN,{autoFocus:r,className:n,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:e,onFocus:o,onBlur:s,children:m.jsx(zI,{formattingToolbar:loe})})}),loe=()=>{const t=HI([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return m.jsx(FI,{blockTypeSelectItems:[],children:t})},coe=y.forwardRef((t,e)=>{const{className:n,name:r,label:o,variant:s,icon:i,value:a,autoFocus:l,placeholder:c,disabled:d,onKeyDown:u,onChange:h,onSubmit:f,autoComplete:p,rightSection:g,...b}=t;return he(b),m.jsx(gm,{size:"xs",className:Be(n||"",s==="large"?"bn-mt-input-large":""),ref:e,name:r,label:o,leftSection:i,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:g,placeholder:c,disabled:d,onKeyDown:u,onChange:h,onSubmit:f,autoComplete:p})});var nN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},B2=I.createContext&&I.createContext(nN),doe=["attr","size","title"];function uoe(t,e){if(t==null)return{};var n=hoe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hoe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gf.apply(this,arguments)}function $2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function qf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$2(Object(n),!0).forEach(function(r){foe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function foe(t,e,n){return e=poe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function poe(t){var e=moe(t,"string");return typeof e=="symbol"?e:e+""}function moe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rN(t){return t&&t.map((e,n)=>I.createElement(e.tag,qf({key:n},e.attr),rN(e.child)))}function oN(t){return e=>I.createElement(goe,Gf({attr:qf({},t.attr)},e),rN(t.child))}function goe(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=uoe(t,doe),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),I.createElement("svg",Gf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:qf(qf({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&I.createElement("title",null,s),t.children)};return B2!==void 0?I.createElement(B2.Consumer,null,n=>e(n)):e(nN)}function yoe(t){return oN({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function boe(t){return oN({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}const sN=y.createContext(void 0),voe=y.forwardRef((t,e)=>{const{children:n,onOpenChange:r,position:o,sub:s,...i}=t;he(i);const[a,l]=y.useState(!1),c=y.useRef(null),d=y.useRef(),u=y.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{l(!1)},250)},[]),h=y.useCallback(()=>{d.current&&clearTimeout(d.current),l(!0)},[]);return m.jsx(sN.Provider,{value:{onMenuMouseOver:h,onMenuMouseLeave:u},children:m.jsx(et.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:eu(e,c),onMouseOver:h,onMouseLeave:u,children:m.jsx(et,{portalProps:{target:c.current?c.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})}),woe=t=>{const{children:e,onOpenChange:n,position:r,sub:o,...s}=t;return he(s),o?m.jsx(voe,{...t}):m.jsx(et,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e})},xoe=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,checked:s,subTrigger:i,onClick:a,...l}=t;return he(l,!1),i?m.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation()},ref:e,...l,children:[r,m.jsx(boe,{size:15})]}):m.jsx(et.Item,{className:n,ref:e,leftSection:o,rightSection:s?m.jsx(Zv,{size:10}):s===!1?m.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),koe=t=>{const{children:e,sub:n,...r}=t;return he(r),m.jsx(et.Target,{children:e})},Coe=y.forwardRef((t,e)=>{const{className:n,children:r,sub:o,...s}=t;he(s);const i=y.useContext(sN);return m.jsx(et.Dropdown,{className:n,ref:e,onMouseOver:i==null?void 0:i.onMenuMouseOver,onMouseLeave:i==null?void 0:i.onMenuMouseLeave,children:r})}),Soe=y.forwardRef((t,e)=>{const{className:n,...r}=t;return he(r),m.jsx(et.Divider,{className:n,ref:e})}),Toe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(et.Label,{className:n,ref:e,children:r})}),Eoe=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...d}=t;return he(d,!1),o?m.jsx(qi,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):m.jsx(Cr,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),Moe=y.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:s,setOpenTab:i,loading:a,...l}=t;return he(l),m.jsx(Et,{className:n,ref:e,children:m.jsxs(Co,{value:s,defaultValue:o,onChange:i,children:[a&&m.jsx(iw,{visible:a}),m.jsx(Co.List,{children:r.map(c=>m.jsx(Co.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>m.jsx(Co.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),Aoe=y.forwardRef((t,e)=>{const{className:n,children:r,onClick:o,label:s,...i}=t;return he(i),m.jsx(Cr,{size:"xs","aria-label":s,className:n,ref:e,onClick:o,...i,children:r})}),_oe=y.forwardRef((t,e)=>{const{className:n,accept:r,value:o,placeholder:s,onChange:i,...a}=t;return he(a),m.jsx(nre,{size:"xs",className:n,ref:e,accept:r,value:o,placeholder:s,onChange:i,...a})}),Roe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx("div",{className:n,ref:e,children:r})}),Poe=y.forwardRef((t,e)=>{const{className:n,value:r,placeholder:o,onKeyDown:s,onChange:i,...a}=t;return he(a),m.jsx(gm,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:o,onKeyDown:s,onChange:i})}),Ioe=t=>{const{opened:e,position:n,children:r,...o}=t;return he(o),m.jsx(Ws,{withinPortal:!1,opened:e,position:n,children:r})},Doe=t=>{const{children:e,...n}=t;return he(n),m.jsx(Wv,{children:e})},Noe=y.forwardRef((t,e)=>{const{className:n,children:r,variant:o,...s}=t;return he(s),m.jsx(sm,{className:n,ref:e,children:r})}),Ooe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o,!1),m.jsx(Et,{align:"center",gap:0,className:n,ref:e,...o,children:r})}),Loe=y.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...d}=t;return he(d,!1),o?m.jsx(qi,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):m.jsx(Cr,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),joe=y.forwardRef((t,e)=>{const{className:n,children:r,id:o,...s}=t;return he(s),m.jsx(su,{gap:0,className:n,ref:e,id:o,role:"listbox",children:r})}),Boe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Et,{className:n,ref:e,children:m.jsx(Et,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),$oe=y.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;he(a);const l=y.useRef(null);return y.useEffect(()=>{if(!l.current||!r)return;const c=ZI(l.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),m.jsxs(Et,{gap:0,className:n,ref:eu(e,l),id:i,role:"option",onMouseDown:c=>c.preventDefault(),onClick:o,"aria-selected":r||void 0,children:[s.icon&&m.jsx(Et,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:s.icon}),m.jsxs(su,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[m.jsx(Kr,{className:"bn-mt-suggestion-menu-item-title",children:s.title}),m.jsx(Kr,{className:"bn-mt-suggestion-menu-item-subtitle",children:s.subtext})]}),s.badge&&m.jsx(Et,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:m.jsx(Qv,{size:"xs",children:s.badge})})]})}),Voe=y.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return he(o),m.jsx(Et,{className:n,ref:e,children:r})}),Hoe=y.forwardRef((t,e)=>{const{className:n,...r}=t;return he(r),m.jsx(Gs,{className:n,type:"dots",size:16,ref:e})}),Foe=y.forwardRef((t,e)=>{const{className:n,children:r,id:o,columns:s,...i}=t;return he(i),m.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${s}, 1fr)`},ref:e,id:o,role:"grid",children:r})}),zoe=y.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return he(s),m.jsx(Et,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:m.jsx(Et,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),Uoe=y.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;he(a);const l=y.useRef(null);return y.useEffect(()=>{if(!l.current||!r)return;const c=ZI(l.current,document.querySelector(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),m.jsx("div",{className:n,ref:eu(e,l),id:i,role:"option",onClick:o,"aria-selected":r||void 0,children:s.icon})}),Woe=y.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return he(s),m.jsx(Gs,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:e})}),Goe=y.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:o,onClick:s,...i}=t;return he(i,!1),m.jsx(Cr,{className:r,ref:e,onMouseDown:o,onClick:s,...i,children:n})}),qoe=y.forwardRef((t,e)=>{const{className:n,children:r,draggable:o,onDragStart:s,onDragEnd:i,style:a,label:l,...c}=t;return he(c,!1),m.jsx(Cr,{className:n,ref:e,"aria-label":l,draggable:o,onDragStart:s,onDragEnd:i,style:a,...c,children:r})}),ry=y.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:s,variant:i,...a}=t;he(a);const{ref:l,focused:c}=iD(),d=sD(c),u=eu(e,l,d);return m.jsx(Jv,{className:n,ref:u,role:"toolbar",onMouseEnter:o,onMouseLeave:s,gap:i==="action-toolbar"?2:void 0,children:r})}),oy=y.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:o,...s}=t;he(s);const i=r.filter(a=>a.isSelected)[0];return i?m.jsxs(et,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[m.jsx(et.Target,{children:m.jsx(Cr,{onMouseDown:a=>{Nb()&&a.currentTarget.focus()},leftSection:i.icon,rightSection:m.jsx(yoe,{}),size:"xs",variant:"subtle",disabled:o,children:i.text})}),m.jsx(et.Dropdown,{className:n,ref:e,children:r.map(a=>m.jsx(et.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?m.jsx(Zv,{size:10,className:"bn-tick-icon"}):m.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),Koe={FormattingToolbar:{Root:ry,Button:ny,Select:oy},FilePanel:{Root:Moe,Button:Aoe,FileInput:_oe,TabPanel:Roe,TextInput:Poe},GridSuggestionMenu:{Root:Foe,Item:Uoe,EmptyItem:zoe,Loader:Woe},LinkToolbar:{Root:ry,Button:ny,Select:oy},SideMenu:{Root:Ooe,Button:Loe},SuggestionMenu:{Root:joe,Item:$oe,EmptyItem:Boe,Label:Voe,Loader:Hoe},TableHandle:{Root:qoe,ExtendButton:Goe},Generic:{Badge:{Root:eoe,Group:toe},Form:{Root:t=>m.jsx("div",{children:t.children}),TextInput:coe},Menu:{Root:woe,Trigger:koe,Dropdown:Coe,Divider:Soe,Label:Toe,Item:xoe,Button:Eoe},Popover:{Root:Ioe,Trigger:Doe,Content:Noe},Toolbar:{Root:ry,Button:ny,Select:oy}},Comments:{Comment:ioe,Editor:aoe,Card:noe,CardSection:roe,ExpandSectionsPrompt:ooe}},Yoe={activeClassName:""},iN=t=>{const{className:e,theme:n,...r}=t,o=ro(),s=qI(),i=(o==null?void 0:o.colorSchemePreference)||s,a=y.useCallback(c=>{if(c&&(Qre(c),typeof n=="object")){if("light"in n&&"dark"in n){j2(n[i==="dark"?"dark":"light"],c);return}j2(n,c);return}},[i,n]),l=typeof n=="string"?n:i!=="no-preference"?i:"light";return m.jsx(SI.Provider,{value:Koe,children:m.jsx(pD,{theme:Yoe,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:m.jsx(CQ,{"data-mantine-color-scheme":l,className:Be("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})},Joe="_container_1bxwl_2",Zoe="_editIcon_1bxwl_9",Xoe="_saveButton_1bxwl_16",Qoe="_editor_1bxwl_23",ese="_withoutBorder_1bxwl_28",ia={container:Joe,editIcon:Zoe,saveButton:Xoe,editor:Qoe,withoutBorder:ese};function ud({value:t,setValue:e,readOnly:n,classes:r,showEditIcon:o,onClickEdit:s,onClickSave:i,shouldShowSaveButton:a,withoutBorder:l}){const c=Yp({domAttributes:{editor:{class:ia.editor}},initialContent:t}),{theme:d}=mp();return m.jsxs("div",{className:re(ia.container,r==null?void 0:r.container,l&&ia.withoutBorder),children:[n&&o&&m.jsx(Y,{onClick:s,className:ia.editIcon,icon:"solar:pen-new-square-outline",width:24,height:24}),m.jsx(iN,{className:ia.editor,editable:!n,theme:d===Ti.Dark?"dark":"light",editor:c,onChange:()=>e(c.document)}),a&&!n&&m.jsx(dt,{onClick:i,className:ia.saveButton,children:"Save"})]})}const tse="_input_1f9pd_2",nse="_unit_1f9pd_8",rse="_footerCenter_1f9pd_13",ose="_submitBtn_1f9pd_19",Ku={input:tse,unit:nse,footerCenter:rse,submitBtn:ose},sse="checklist_record",ml=()=>{const[t,e]=fr(sse,{});return{addChecklistRecord:s=>{s.records.length&&e(i=>({...i,[s.checklistTemplateId]:[...i[s.checklistTemplateId]||[],...s.records.map(a=>({id:sn(),...a,checklistId:s.checklistId,checklistTemplateId:s.checklistTemplateId,createdAt:s.createdAt}))]}))},getChecklistRecords:(s,{rangeDate:i,type:a="date",fieldIds:l,sortBy:c,sortDirection:d="asc"})=>{const u=s?t[s]||[]:Object.values(t).flat();let h=u;if(i&&(h=u.filter(p=>{const g=new Date(p.createdAt);return g>=new Date(i.from)&&g<=new Date(i.to)})),l&&l.length&&(h=h.filter(p=>l.includes(p.fieldId))),c)switch(c){case"createdAt":{h=h.sort((p,g)=>{const b=new Date(p.createdAt),v=new Date(g.createdAt);return b.getTime()-v.getTime()});break}}return d==="desc"&&(h=h.reverse()),h.reduce((p,g)=>{const b=new Date(g.createdAt),v=a==="date"?Pj(b,"yyyy-MM-dd"):b.toISOString();return p[v]||(p[v]=[]),p[v].push(g),p},{})},updateChecklistRecord:(s,{value:i,checklistTemplateId:a,folderId:l})=>{e(c=>{const u=(c[a]||[]).map(h=>h.id===s?{...h,value:i,...l!==void 0&&{folderId:l}}:h);return{...c,[a]:u}})},deleteChecklistRecord:(s,{checklistTemplateId:i})=>{e(a=>{const c=(a[i]||[]).filter(d=>d.id!==s);return{...a,[i]:c}})}}},ise=({fields:t,checklistTemplate:e,checklist:n,currentDay:r,onSubmit:o})=>{const[s,i]=I.useState(t.reduce((l,{id:c})=>({...l,[c]:void 0}),{})),{addChecklistRecord:a}=ml();return m.jsxs(m.Fragment,{children:[t.map(l=>{switch(l==null?void 0:l.type){case"metric":return m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:l.icon}),title:l.title,rightComponent:m.jsxs(m.Fragment,{children:[m.jsx(Dr,{onChange:c=>{i({...s,[l.id]:Number(c.target.value)})},border:"dash",className:Ku.input,type:"number"}),m.jsx(ne.Text,{className:Ku.unit,children:l.unit})]})});case"note":return m.jsxs(m.Fragment,{children:[m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:l.icon}),title:l.title}),m.jsx(ud,{withoutBorder:!0,value:s==null?void 0:s[l.id],setValue:c=>{i({...s,[l.id]:c})}})]})}}),m.jsx("div",{className:Ku.footerCenter,children:m.jsx(dt,{size:"lg",className:Ku.submitBtn,onClick:()=>{if(e){const l=new Date,c=Nj(Lj(jj(Oj(new Date(r),l.getMilliseconds()),l.getSeconds()),l.getMinutes()),l.getHours());a({checklistId:n.id,checklistTemplateId:e.id,createdAt:c.toISOString(),records:Object.entries(s).map(([d,u])=>({fieldId:d,value:u}))}),o==null||o()}},children:"Submit"})})]})},ase="_iconEdit_1c1sv_6",lse="_icon_1c1sv_6",cse="_successIcon_1c1sv_14",dse="_input_1c1sv_18",use="_editButton_1c1sv_24",hse="_editIcon_1c1sv_30",fse="_highlight_1c1sv_34",Qn={iconEdit:ase,icon:lse,successIcon:cse,input:dse,editButton:use,editIcon:hse,highlight:fse},pse=({record:t,fields:e,setRecord:n})=>{const{updateChecklistRecord:r}=ml(),o=e.find(l=>l.id===t.fieldId);if(!o)return;const[s,i]=I.useState(),a=I.useRef(null);switch(o.type){case"metric":return m.jsx(m.Fragment,{children:m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:o.icon}),title:o.title,rightComponent:(s==null?void 0:s.id)===t.id?m.jsxs(m.Fragment,{children:[m.jsx(Dr,{value:s.value,ref:a,autoFocus:!0,border:"dash",className:Qn.input,onChange:l=>{i({...t,value:Number(l.target.value)})}}),m.jsx(Y,{width:24,className:Qn.icon,onClick:()=>{i(void 0)},icon:"proicons:cancel"}),m.jsx(Y,{width:24,className:Qn.icon,onClick:()=>{var l,c;r(t.id,{checklistTemplateId:t.checklistTemplateId,value:Number((l=a.current)==null?void 0:l.value)}),n({...t,value:Number((c=a.current)==null?void 0:c.value)}),i(void 0)},icon:"material-symbols:check"})]}):m.jsxs(m.Fragment,{children:[m.jsxs(ne.Text,{children:[" ",t.value]}),m.jsx(Y,{width:24,className:Qn.iconEdit,onClick:()=>{i(t),setTimeout(()=>{var l;return(l=a==null?void 0:a.current)==null?void 0:l.focus()},100)},icon:"solar:pen-2-line-duotone"})]})})});case"note":default:return m.jsxs("div",{children:[m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:o.icon}),title:o.title,rightComponent:(s==null?void 0:s.id)!==t.id?m.jsx(m.Fragment,{children:m.jsxs(dt,{type:"dash",size:"sm",className:Qn.editButton,onClick:()=>{i(t)},children:[m.jsx(Y,{icon:"solar:pen-new-square-linear",className:Qn.editIcon}),"Edit"]})}):m.jsxs(m.Fragment,{children:[m.jsxs(dt,{type:"dash",size:"sm",className:Qn.editButton,onClick:()=>{i(void 0)},children:[m.jsx(Y,{width:12,className:Qn.icon,icon:"proicons:cancel"}),"Cancel"]}),m.jsxs(dt,{type:"dash",size:"sm",className:re(Qn.editButton,Qn.highlight),onClick:()=>{r(t.id,{checklistTemplateId:t.checklistTemplateId,value:s.value}),n({...t,value:s.value}),i(void 0)},children:[m.jsx(Y,{width:12,className:Qn.successIcon,icon:"material-symbols:check"}),"Save"]})]})}),(s==null?void 0:s.id)===t.id&&m.jsx(ud,{withoutBorder:!0,value:(s==null?void 0:s.id)!==t.id?t.value:s.value,setValue:l=>{i({...t,value:l})}}),(s==null?void 0:s.id)!==t.id&&m.jsx(ud,{value:t.value,withoutBorder:!0,readOnly:!0})]})}},mse="_recordSection_icmxe_2",gse="_hr_icmxe_6",yse="_hrSide_icmxe_13",bse="_hrContainer_icmxe_18",vse="_dateText_icmxe_28",wse="_deleteButton_icmxe_36",xse="_deleteIcon_icmxe_43",er={recordSection:mse,hr:gse,hrSide:yse,hrContainer:bse,dateText:vse,deleteButton:wse,deleteIcon:xse},kse=({checklistTemplate:t,fields:e})=>{const{getChecklistRecords:n,deleteChecklistRecord:r}=ml(),[o,s]=I.useState({});return I.useEffect(()=>{const i=n(t.id,{rangeDate:{from:uM(new Date).toISOString(),to:dM(new Date).toISOString()},type:"time",fieldIds:e.map(a=>a.id),sortDirection:"desc"});s(i)},[]),m.jsx("div",{className:er.recordSection,children:Object.entries(o).map(([i,a],l)=>m.jsxs("div",{children:[m.jsxs("div",{className:er.hrContainer,children:[m.jsx("div",{className:re(er.hrSide,l===0&&er.noHr)}),m.jsx(ne.Text,{className:er.dateText,children:new Date(i).toLocaleString()}),m.jsx("div",{className:re(er.hr,l===0&&er.noHr)}),m.jsxs(dt,{type:"dash",size:"sm",className:er.deleteButton,onClick:()=>{a.forEach(d=>{r(d.id,{checklistTemplateId:d.checklistTemplateId})});const c={...o};delete c[i],s(c)},children:[m.jsx(Y,{icon:"solar:trash-bin-trash-outline",className:er.deleteIcon}),"Delete"]}),m.jsx("div",{className:re(er.hrSide,l===0&&er.noHr)})]}),a.map(c=>m.jsx(pse,{record:c,setRecord:d=>{s({...o,[i]:o[i].map(u=>u.id===d.id?d:u)})},fields:e}))]}))})},Cse="_container_3gh2y_2",Sse="_iconSuccess_3gh2y_7",Tse="_emptyContainer_3gh2y_13",Ese="_iconEmpty_3gh2y_22",Mse="_itemEmptyContainer_3gh2y_26",Hl={container:Cse,iconSuccess:Sse,emptyContainer:Tse,iconEmpty:Ese,itemEmptyContainer:Mse},Ase=t=>t.reduce((e,n)=>e+n,0),_se=({checklistTemplate:t,fields:e,currentDay:n})=>{const r=Rt(),{getChecklistRecords:o}=ml(),[s,i]=I.useState([]),a=()=>{const l=o(t.id,{rangeDate:{from:new Date(new Date(n).setHours(0,0,0,0)).toISOString(),to:new Date(new Date(n).setHours(23,59,59,999)).toISOString()},fieldIds:e.map(c=>c.id),sortDirection:"desc"});return i(Object.values(l)),l};return I.useEffect(()=>{a()},[]),s.length===0?m.jsxs("div",{children:[e.map(l=>m.jsx("div",{className:Hl.itemEmptyContainer,children:m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:l.icon}),title:l.title})})),m.jsxs("div",{className:Hl.emptyContainer,children:[m.jsx(Y,{width:80,icon:"clarity:sad-face-line",className:Hl.iconEmpty}),m.jsx(ne.Title,{level:3,noMargin:!0,children:r.formatMessage({id:"ChecklistFieldGroupView.noRecord",defaultMessage:"No record found"})}),m.jsx(ne.Paragraph,{noMargin:!0,children:r.formatMessage({id:"ChecklistFieldGroupView.noRecordDescription",defaultMessage:"Submit your record to keep track of your progress"})})]})]}):m.jsxs("div",{className:Hl.container,children:[m.jsx(Y,{width:100,color:"rgba(16,154,0,0.16)",icon:"ion:checkmark-done-circle-outline",className:Hl.iconSuccess}),e.map(l=>{if(l.type==="metric"){const c=Object.values(s).flat().filter(u=>u.fieldId===l.id),d=Ase(c.map(u=>u.value));return m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:l.icon}),title:l.title,rightComponent:m.jsx(m.Fragment,{children:m.jsxs(ne.Text,{children:[d," ",l.unit]})})})}else{const c=Object.values(s).flat().find(d=>d.fieldId===l.id);return c?m.jsxs(m.Fragment,{children:[m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:l.icon}),title:l.title}),m.jsx(ud,{value:c.value,readOnly:!0,withoutBorder:!0})]}):null}})]})},Rse=t=>t.reduce((e,n)=>e+n,0),Pse=({checklistTemplateId:t,fields:e})=>{const{theme:n}=mp(),{getChecklistRecords:r}=ml(),[o,s]=I.useState({});I.useEffect(()=>{const l=r(t,{rangeDate:{from:uM(new Date).toISOString(),to:dM(new Date).toISOString()},sortBy:"createdAt",fieldIds:e.filter(h=>h.type==="metric").map(h=>h.id)}),c=Object.keys(l),d=Object.values(l),u=e.reduce((h,f,p)=>{const g=d.map(b=>{const v=b.filter(x=>x.fieldId===f.id).map(x=>x.value);return Rse(v)});return{...h,[f.id]:g}},{});s({categories:c,seriesValues:u})},[]);const i=e.map(l=>{var c;return{name:l.title,data:(c=o==null?void 0:o.seriesValues)==null?void 0:c[l.id]}}),a={...n===Ti.Dark?{theme:{mode:"dark"},chart:{background:"#162033"}}:{},xaxis:{categories:o.categories}};return{series:i,options:a}};var Ise=v3();const aN=w3(Ise),Dse=({checklistTemplateId:t,fields:e})=>{const{options:n,series:r}=Pse({checklistTemplateId:t,fields:e});return m.jsx(aN,{options:n,series:r,type:"bar"})},Nse=({checklist:t,checklistTemplate:e,fields:n,currentDay:r})=>{const o=Dj(r),{updateChecklist:s}=pp(),[i,a]=I.useState(e.fieldGroups.reduce((d,u)=>({...d,[u.id]:Ut.Home}),{})),l=d=>({[Ut.Home]:`${o?"Today":new Date(r).toLocaleDateString()}`,[Ut.History]:"Record History",[Ut.Add]:"Add Record",[Ut.Metric]:"Metric"})[i[d.id]],c=({fieldGroup:d,fieldDetails:u})=>{switch(i[d.id]){case Ut.Home:return m.jsx(_se,{fields:u,checklistTemplate:e,checklist:t,currentDay:r});case Ut.History:return m.jsx(kse,{fields:u,checklistTemplate:e});case Ut.Metric:return m.jsx(Dse,{fields:n,checklistTemplateId:e.id});case Ut.Add:return m.jsx(ise,{fields:u,checklistTemplate:e,checklist:t,currentDay:r,onSubmit:()=>{a({...i,[d.id]:Ut.Home}),s({id:t.id,completedAt:new Date().toISOString()})}})}};return e.fieldGroups.map(d=>{const u=d.fields.map(h=>n.find(f=>f.id===h));return m.jsxs(Yn,{className:D9.cardContainer,children:[m.jsx(P9,{activeTab:i[d.id],onClickHome:()=>a({...i,[d.id]:Ut.Home}),onClickHistory:()=>a({...i,[d.id]:Ut.History}),onClickAdd:()=>a({...i,[d.id]:Ut.Add}),onClickMetric:()=>a({...i,[d.id]:Ut.Metric}),renderTitle:()=>l(d)}),c({fieldGroup:d,fieldDetails:u})]})})},Ose=()=>{const{id:t}=ZE(),[e,n]=iM(),{getChecklistTemplate:r}=Es(),{addChecklist:o,getChecklistDetail:s}=pp(),{getRecordFields:i}=yp(),a=e.get("checklistId"),l=e.get("currentDay"),[c,d]=I.useState(),[u,h]=I.useState(),[f,p]=I.useState([]);if(!t||!l)return;I.useEffect(()=>{var x;const b=r(t);if(d(b),!b)return;const v=i((x=b.fieldGroups)==null?void 0:x.map(w=>w.fields).flat());if(p(v),a){const w=s(a);h(w)}else{const w=o({title:b.title,checklistTemplateId:t,startedAt:new Date(l).toISOString(),endedAt:new Date(l).toISOString()});n({...Object.fromEntries(e),checklistId:w.id}),h(w)}},[a]);const g=xr();return!a||!u||!c?null:m.jsxs(m.Fragment,{children:[m.jsx(Xa,{renderLeftComponent:()=>m.jsx("div",{children:c==null?void 0:c.title}),renderRightComponent:()=>m.jsx(Y,{onClick:()=>{g(`/edit-checklist/${t}`)},width:24,icon:"solar:pen-new-square-linear"}),onClickLeftButton:()=>g("/")}),m.jsx(Nse,{checklist:u,checklistTemplate:c,fields:f,currentDay:l})]})},Lse="_input_1t6d7_1",jse={input:Lse},Bse=t=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},lN=({value:t,onChange:e,className:n})=>m.jsx("input",{className:re(jse.input,n),type:"date",value:t?Bse(new Date(t)):"",onChange:e}),$se="_container_1ew1v_1",Vse="_lg_1ew1v_6",V2={container:$se,lg:Vse};function yw({size:t,className:e,disabled:n,...r}){return m.jsx("input",{className:re(V2.container,t==="lg"&&V2.lg,e),type:"checkbox",disabled:n,...r})}const Hse="_container_a6kby_1",Fse="_label_a6kby_7",zse="_card_a6kby_16",Use="_datePicker_a6kby_21",Wse="_datePickerContainer_a6kby_27",Gse="_checklistItem_a6kby_34",qse="_checklistBody_a6kby_40",Kse="_checkbox_a6kby_45",Yse="_footer_a6kby_50",tr={container:Hse,label:Fse,card:zse,datePicker:Use,datePickerContainer:Wse,checklistItem:Gse,checklistBody:qse,checkbox:Kse,footer:Yse},Jse=()=>{var d;const[t,e]=fr("user_new",!1),n=Rt(),{baby:r,setBaby:o,calculateStartDateFromDueDate:s}=$j(),{getRecommendChecklistTemplates:i,selectedChecklistTemplates:a,updateSelectedChecklistTemplate:l}=Es(),c=()=>{e(!1),window.location.reload()};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:tr.container,children:[m.jsx(Yn,{className:tr.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:tr.label,children:n.formatMessage({id:"PregnantIntro.label-enter-the-due-date",defaultMessage:"When's the little one's due date?"})}),m.jsx("div",{className:tr.datePickerContainer,children:m.jsx(lN,{value:((d=r==null?void 0:r.dueDate)==null?void 0:d.split("T")[0])||new Date(new Date().getTime()+40*7*24*60*60*1e3).toISOString().split("T")[0],onChange:u=>o({...r,dueDate:u.target.value,startDate:s(u.target.value)}),className:tr.datePicker})})]})}),m.jsx(Yn,{className:tr.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:tr.label,children:n.formatMessage({id:"PregnantIntro.checklists",defaultMessage:"Pick the tasks you'd love to do every day!"})}),i().map(({id:u,title:h,avatar:f})=>m.jsxs("div",{className:tr.checklistItem,children:[m.jsx(Y,{color:f.color||"#8A8A8A",width:32,height:32,icon:f.name}),m.jsx("p",{className:tr.checklistBody,children:h}),m.jsx(yw,{checked:a.includes(u),onChange:p=>{const g=p.target.checked;l(g?[...a,u]:a.filter(b=>b!==u))},className:tr.checkbox})]},u))]})})]}),m.jsx("div",{className:tr.footer,onClick:c,children:m.jsx(dt,{size:"lg",children:"Submit"})})]})},Zse="_input_k71ix_2",Xse={input:Zse},Qse=({date:t,setDate:e})=>{const n=Rt();return m.jsx("div",{children:m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:"solar:calendar-date-line-duotone"}),title:n.formatMessage({defaultMessage:"Start Day",id:"label-start-day.label"}),description:n.formatMessage({defaultMessage:"Select the first day",id:"label-start-day.description"}),rightComponent:m.jsx(lN,{value:t,onChange:r=>e(r.target.value),className:Xse.input})})})};function eie({className:t,...e}){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#00000075",className:re(Nd.icon,t),...e,children:m.jsx("g",{id:"done_24px",children:m.jsx("path",{id:"icon/action/done_24px",d:"M8.80004 15.905L5.30004 12.405C5.11519 12.2178 4.86309 12.1125 4.60004 12.1125C4.33699 12.1125 4.0849 12.2178 3.90004 12.405C3.51004 12.795 3.51004 13.415 3.90004 13.805L8.09004 17.995C8.48004 18.385 9.11004 18.385 9.50004 17.995L20.1 7.40499C20.49 7.01499 20.49 6.39499 20.1 6.00499C19.9152 5.81784 19.6631 5.71251 19.4 5.71251C19.137 5.71251 18.8849 5.81784 18.7 6.00499L8.80004 15.905Z"})})})}const tie="_container_sb3l2_2",nie="_button_sb3l2_10",rie="_icon_sb3l2_18",oie="_activeIcon_sb3l2_24",sie="_activeButton_sb3l2_28",Fl={container:tie,button:nie,icon:rie,activeIcon:oie,activeButton:sie};function iie({options:t,values:e=[],setValues:n=()=>{}}){return m.jsx("div",{className:Fl.container,children:t.map(r=>{const o=e.includes(r.value);return m.jsxs(dt,{type:"ghost",className:re(Fl.button,o&&Fl.activeButton),onClick:()=>{n(o?e.filter(s=>s!==r.value):[...e,r.value])},children:[m.jsx(eie,{className:re(Fl.icon,o&&Fl.activeIcon)}),r.label]},`${r.label}-${r.value}`)})})}var bw=lu(),ce=t=>au(t,bw),vw=lu();ce.write=t=>au(t,vw);var ym=lu();ce.onStart=t=>au(t,ym);var ww=lu();ce.onFrame=t=>au(t,ww);var xw=lu();ce.onFinish=t=>au(t,xw);var Ra=[];ce.setTimeout=(t,e)=>{const n=ce.now()+e,r=()=>{const s=Ra.findIndex(i=>i.cancel==r);~s&&Ra.splice(s,1),xs-=~s?1:0},o={time:n,handler:t,cancel:r};return Ra.splice(cN(n),0,o),xs+=1,dN(),o};var cN=t=>~(~Ra.findIndex(e=>e.time>t)||~Ra.length);ce.cancel=t=>{ym.delete(t),ww.delete(t),xw.delete(t),bw.delete(t),vw.delete(t)};ce.sync=t=>{s0=!0,ce.batchedUpdates(t),s0=!1};ce.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...o){e=o,ce.onStart(n)}return r.handler=t,r.cancel=()=>{ym.delete(n),e=null},r};var kw=typeof window<"u"?window.requestAnimationFrame:()=>{};ce.use=t=>kw=t;ce.now=typeof performance<"u"?()=>performance.now():Date.now;ce.batchedUpdates=t=>t();ce.catch=console.error;ce.frameLoop="always";ce.advance=()=>{ce.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):hN()};var ws=-1,xs=0,s0=!1;function au(t,e){s0?(e.delete(t),t(0)):(e.add(t),dN())}function dN(){ws<0&&(ws=0,ce.frameLoop!=="demand"&&kw(uN))}function aie(){ws=-1}function uN(){~ws&&(kw(uN),ce.batchedUpdates(hN))}function hN(){const t=ws;ws=ce.now();const e=cN(ws);if(e&&(fN(Ra.splice(0,e),n=>n.handler()),xs-=e),!xs){aie();return}ym.flush(),bw.flush(t?Math.min(64,ws-t):16.667),ww.flush(),vw.flush(),xw.flush()}function lu(){let t=new Set,e=t;return{add(n){xs+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return xs-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,xs-=e.size,fN(e,r=>r(n)&&t.add(r)),xs+=t.size,e=t)}}}function fN(t,e){t.forEach(n=>{try{e(n)}catch(r){ce.catch(r)}})}var lie=Object.defineProperty,cie=(t,e)=>{for(var n in e)lie(t,n,{get:e[n],enumerable:!0})},br={};cie(br,{assign:()=>uie,colors:()=>Ts,createStringInterpolator:()=>Sw,skipAnimation:()=>mN,to:()=>pN,willAdvance:()=>Tw});function i0(){}var die=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),$={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function bo(t,e){if($.arr(t)){if(!$.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var xe=(t,e)=>t.forEach(e);function Yr(t,e,n){if($.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Cn=t=>$.und(t)?[]:$.arr(t)?t:[t];function wc(t,e){if(t.size){const n=Array.from(t);t.clear(),xe(n,e)}}var rc=(t,...e)=>wc(t,n=>n(...e)),Cw=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Sw,pN,Ts=null,mN=!1,Tw=i0,uie=t=>{t.to&&(pN=t.to),t.now&&(ce.now=t.now),t.colors!==void 0&&(Ts=t.colors),t.skipAnimation!=null&&(mN=t.skipAnimation),t.createStringInterpolator&&(Sw=t.createStringInterpolator),t.requestAnimationFrame&&ce.use(t.requestAnimationFrame),t.batchedUpdates&&(ce.batchedUpdates=t.batchedUpdates),t.willAdvance&&(Tw=t.willAdvance),t.frameLoop&&(ce.frameLoop=t.frameLoop)},xc=new Set,Wn=[],sy=[],Kf=0,bm={get idle(){return!xc.size&&!Wn.length},start(t){Kf>t.priority?(xc.add(t),ce.onStart(hie)):(gN(t),ce(a0))},advance:a0,sort(t){if(Kf)ce.onFrame(()=>bm.sort(t));else{const e=Wn.indexOf(t);~e&&(Wn.splice(e,1),yN(t))}},clear(){Wn=[],xc.clear()}};function hie(){xc.forEach(gN),xc.clear(),ce(a0)}function gN(t){Wn.includes(t)||yN(t)}function yN(t){Wn.splice(fie(Wn,e=>e.priority>t.priority),0,t)}function a0(t){const e=sy;for(let n=0;n<Wn.length;n++){const r=Wn[n];Kf=r.priority,r.idle||(Tw(r),r.advance(t),r.idle||e.push(r))}return Kf=0,sy=Wn,sy.length=0,Wn=e,Wn.length>0}function fie(t,e){const n=t.findIndex(e);return n<0?t.length:n}var pie={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},cr="[-+]?\\d*\\.?\\d+",Yf=cr+"%";function vm(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var mie=new RegExp("rgb"+vm(cr,cr,cr)),gie=new RegExp("rgba"+vm(cr,cr,cr,cr)),yie=new RegExp("hsl"+vm(cr,Yf,Yf)),bie=new RegExp("hsla"+vm(cr,Yf,Yf,cr)),vie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,wie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,xie=/^#([0-9a-fA-F]{6})$/,kie=/^#([0-9a-fA-F]{8})$/;function Cie(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=xie.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ts&&Ts[t]!==void 0?Ts[t]:(e=mie.exec(t))?(aa(e[1])<<24|aa(e[2])<<16|aa(e[3])<<8|255)>>>0:(e=gie.exec(t))?(aa(e[1])<<24|aa(e[2])<<16|aa(e[3])<<8|z2(e[4]))>>>0:(e=vie.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=kie.exec(t))?parseInt(e[1],16)>>>0:(e=wie.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=yie.exec(t))?(H2(F2(e[1]),Yu(e[2]),Yu(e[3]))|255)>>>0:(e=bie.exec(t))?(H2(F2(e[1]),Yu(e[2]),Yu(e[3]))|z2(e[4]))>>>0:null}function iy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function H2(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,o=2*n-r,s=iy(o,r,t+1/3),i=iy(o,r,t),a=iy(o,r,t-1/3);return Math.round(s*255)<<24|Math.round(i*255)<<16|Math.round(a*255)<<8}function aa(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function F2(t){return(parseFloat(t)%360+360)%360/360}function z2(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Yu(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function U2(t){let e=Cie(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,o=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${o}, ${s})`}var hd=(t,e,n)=>{if($.fun(t))return t;if($.arr(t))return hd({range:t,output:e,extrapolate:n});if($.str(t.output[0]))return Sw(t);const r=t,o=r.output,s=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const d=Tie(c,s);return Sie(c,s[d],s[d+1],o[d],o[d+1],l,i,a,r.map)}};function Sie(t,e,n,r,o,s,i,a,l){let c=l?l(t):t;if(c<e){if(i==="identity")return c;i==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===o?r:e===n?t<=e?r:o:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:o===1/0?c=c+r:c=c*(o-r)+r,c)}function Tie(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Eie={linear:t=>t},fd=Symbol.for("FluidValue.get"),qa=Symbol.for("FluidValue.observers"),Hn=t=>!!(t&&t[fd]),an=t=>t&&t[fd]?t[fd]():t,W2=t=>t[qa]||null;function Mie(t,e){t.eventObserved?t.eventObserved(e):t(e)}function pd(t,e){const n=t[qa];n&&n.forEach(r=>{Mie(r,e)})}var bN=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Aie(this,t)}},Aie=(t,e)=>vN(t,fd,e);function gl(t,e){if(t[fd]){let n=t[qa];n||vN(t,qa,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function md(t,e){const n=t[qa];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[qa]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var vN=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Sh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_ie=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,G2=new RegExp(`(${Sh.source})(%|[a-z]+)`,"i"),Rie=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,wm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,wN=t=>{const[e,n]=Pie(t);if(!e||Cw())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(n);return o||t}else{if(n&&wm.test(n))return wN(n);if(n)return n}return t},Pie=t=>{const e=wm.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},ay,Iie=(t,e,n,r,o)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,xN=t=>{ay||(ay=Ts?new RegExp(`(${Object.keys(Ts).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>an(s).replace(wm,wN).replace(_ie,U2).replace(ay,U2)),n=e.map(s=>s.match(Sh).map(Number)),o=n[0].map((s,i)=>n.map(a=>{if(!(i in a))throw Error('The arity of each "output" value must be equal');return a[i]})).map(s=>hd({...t,output:s}));return s=>{var l;const i=!G2.test(e[0])&&((l=e.find(c=>G2.test(c)))==null?void 0:l.replace(Sh,""));let a=0;return e[0].replace(Sh,()=>`${o[a++](s)}${i||""}`).replace(Rie,Iie)}},Ew="react-spring: ",kN=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${Ew}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Die=kN(console.warn);function Nie(){Die(`${Ew}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Oie=kN(console.warn);function Lie(){Oie(`${Ew}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function xm(t){return $.str(t)&&(t[0]=="#"||/\d/.test(t)||!Cw()&&wm.test(t)||t in(Ts||{}))}var Mw=Cw()?y.useEffect:y.useLayoutEffect,jie=()=>{const t=y.useRef(!1);return Mw(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function CN(){const t=y.useState()[1],e=jie();return()=>{e.current&&t(Math.random())}}var SN=t=>y.useEffect(t,Bie),Bie=[];function q2(t){const e=y.useRef(void 0);return y.useEffect(()=>{e.current=t}),e.current}var gd=Symbol.for("Animated:node"),$ie=t=>!!t&&t[gd]===t,Ir=t=>t&&t[gd],Aw=(t,e)=>die(t,gd,e),km=t=>t&&t[gd]&&t[gd].getPayload(),TN=class{constructor(){Aw(this,this)}getPayload(){return this.payload||[]}},Cm=class EN extends TN{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,$.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new EN(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return $.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,$.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Jf=class MN extends Cm{constructor(e){super(0),this._string=null,this._toString=hd({output:[e,e]})}static create(e){return new MN(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if($.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=hd({output:[this.getValue(),e]})),this._value=0,super.reset()}},Zf={dependencies:null},Sm=class extends TN{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Yr(this.source,(n,r)=>{$ie(n)?e[r]=n.getValue(t):Hn(n)?e[r]=an(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&xe(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Yr(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Zf.dependencies&&Hn(t)&&Zf.dependencies.add(t);const e=km(t);e&&xe(e,n=>this.add(n))}},Vie=class AN extends Sm{constructor(e){super(e)}static create(e){return new AN(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((r,o)=>r.setValue(e[o])).some(Boolean):(super.setValue(e.map(Hie)),!0)}};function Hie(t){return(xm(t)?Jf:Cm).create(t)}function l0(t){const e=Ir(t);return e?e.constructor:$.arr(t)?Vie:xm(t)?Jf:Cm}var K2=(t,e)=>{const n=!$.fun(t)||t.prototype&&t.prototype.isReactComponent;return y.forwardRef((r,o)=>{const s=y.useRef(null),i=n&&y.useCallback(p=>{s.current=Uie(o,p)},[o]),[a,l]=zie(r,e),c=CN(),d=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},u=new Fie(d,l),h=y.useRef(void 0);Mw(()=>(h.current=u,xe(l,p=>gl(p,u)),()=>{h.current&&(xe(h.current.deps,p=>md(p,h.current)),ce.cancel(h.current.update))})),y.useEffect(d,[]),SN(()=>()=>{const p=h.current;xe(p.deps,g=>md(g,p))});const f=e.getComponentProps(a.getValue());return y.createElement(t,{...f,ref:i})})},Fie=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ce.write(this.update)}};function zie(t,e){const n=new Set;return Zf.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Sm(t),Zf.dependencies=null,[t,n]}function Uie(t,e){return t&&($.fun(t)?t(e):t.current=e),e}var Y2=Symbol.for("AnimatedComponent"),Wie=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=o=>new Sm(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=i=>{const a=J2(i)||"Anonymous";return $.str(i)?i=s[i]||(s[i]=K2(i,o)):i=i[Y2]||(i[Y2]=K2(i,o)),i.displayName=`Animated(${a})`,i};return Yr(t,(i,a)=>{$.arr(t)&&(a=J2(i)),s[a]=s(i)}),{animated:s}},J2=t=>$.str(t)?t:t&&$.str(t.displayName)?t.displayName:$.fun(t)&&t.name||null;function ii(t,...e){return $.fun(t)?t(...e):t}var kc=(t,e)=>t===!0||!!(e&&t&&($.fun(t)?t(e):Cn(t).includes(e))),_N=(t,e)=>$.obj(t)?e&&t[e]:t,RN=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Gie=t=>t,_w=(t,e=Gie)=>{let n=qie;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const o of n){const s=e(t[o],o);$.und(s)||(r[o]=s)}return r},qie=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Kie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Yie(t){const e={};let n=0;if(Yr(t,(r,o)=>{Kie[o]||(e[o]=r,n++)}),n)return e}function PN(t){const e=Yie(t);if(e){const n={to:e};return Yr(t,(r,o)=>o in e||(n[o]=r)),n}return{...t}}function yd(t){return t=an(t),$.arr(t)?t.map(yd):xm(t)?br.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Jie(t){for(const e in t)return!0;return!1}function c0(t){return $.fun(t)||$.arr(t)&&$.obj(t[0])}function Zie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Xie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Qie={default:{tension:170,friction:26}},d0={...Qie.default,mass:1,damping:1,easing:Eie.linear,clamp:!1},eae=class{constructor(){this.velocity=0,Object.assign(this,d0)}};function tae(t,e,n){n&&(n={...n},Z2(n,e),e={...n,...e}),Z2(t,e),Object.assign(t,e);for(const i in d0)t[i]==null&&(t[i]=d0[i]);let{frequency:r,damping:o}=t;const{mass:s}=t;return $.und(r)||(r<.01&&(r=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*o*s/r),t}function Z2(t,e){if(!$.und(e.decay))t.duration=void 0;else{const n=!$.und(e.tension)||!$.und(e.friction);(n||!$.und(e.frequency)||!$.und(e.damping)||!$.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var X2=[],nae=class{constructor(){this.changed=!1,this.values=X2,this.toValues=null,this.fromValues=X2,this.config=new eae,this.immediate=!1}};function IN(t,{key:e,props:n,defaultProps:r,state:o,actions:s}){return new Promise((i,a)=>{let l,c,d=kc(n.cancel??(r==null?void 0:r.cancel),e);if(d)f();else{$.und(n.pause)||(o.paused=kc(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=o.paused||kc(p,e)),l=ii(n.delay||0,e),p?(o.resumeQueue.add(h),s.pause()):(s.resume(),h())}function u(){o.resumeQueue.add(h),o.timeouts.delete(c),c.cancel(),l=c.time-ce.now()}function h(){l>0&&!br.skipAnimation?(o.delayed=!0,c=ce.setTimeout(f,l),o.pauseQueue.add(u),o.timeouts.add(c)):f()}function f(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(u),o.timeouts.delete(c),t<=(o.cancelId||0)&&(d=!0);try{s.start({...n,callId:t,cancel:d},i)}catch(p){a(p)}}})}var Rw=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Pa(t.get()):e.every(n=>n.noop)?DN(t.get()):sr(t.get(),e.every(n=>n.finished)),DN=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),sr=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Pa=t=>({value:t,cancelled:!0,finished:!1});function NN(t,e,n,r){const{callId:o,parentId:s,onRest:i}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=o,n.asyncTo=t;const c=_w(e,(b,v)=>v==="onRest"?void 0:b);let d,u;const h=new Promise((b,v)=>(d=b,u=v)),f=b=>{const v=o<=(n.cancelId||0)&&Pa(r)||o!==n.asyncId&&sr(r,!1);if(v)throw b.result=v,u(b),b},p=(b,v)=>{const x=new Q2,w=new eT;return(async()=>{if(br.skipAnimation)throw bd(n),w.result=sr(r,!1),u(w),w;f(x);const k=$.obj(b)?{...b}:{...v,to:b};k.parentId=o,Yr(c,(S,T)=>{$.und(k[T])&&(k[T]=S)});const C=await r.start(k);return f(x),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),C})()};let g;if(br.skipAnimation)return bd(n),sr(r,!1);try{let b;$.arr(t)?b=(async v=>{for(const x of v)await p(x)})(t):b=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([b.then(d),h]),g=sr(r.get(),!0,!1)}catch(b){if(b instanceof Q2)g=b.result;else if(b instanceof eT)g=b.result;else throw b}finally{o==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return $.fun(i)&&ce.batchedUpdates(()=>{i(g,r,r.item)}),g})()}function bd(t,e){wc(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Q2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},eT=class extends Error{constructor(){super("SkipAnimationSignal")}},u0=t=>t instanceof Pw,rae=1,Pw=class extends bN{constructor(){super(...arguments),this.id=rae++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ir(this);return t&&t.getValue()}to(...t){return br.to(this,t)}interpolate(...t){return Nie(),br.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){pd(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||bm.sort(this),pd(this,{type:"priority",parent:this,priority:t})}},Vi=Symbol.for("SpringPhase"),ON=1,LN=2,jN=4,ly=t=>(t[Vi]&ON)>0,es=t=>(t[Vi]&LN)>0,zl=t=>(t[Vi]&jN)>0,tT=(t,e)=>e?t[Vi]|=LN|ON:t[Vi]&=-3,nT=(t,e)=>e?t[Vi]|=jN:t[Vi]&=-5,oae=class extends Pw{constructor(t,e){if(super(),this.animation=new nae,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!$.und(t)||!$.und(e)){const n=$.obj(t)?{...t}:{...e,from:t};$.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(es(this)||this._state.asyncTo)||zl(this)}get goal(){return an(this.animation.to)}get velocity(){const t=Ir(this);return t instanceof Cm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return ly(this)}get isAnimating(){return es(this)}get isPaused(){return zl(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:o}=r;const{config:s}=r,i=km(r.to);!i&&Hn(r.to)&&(o=Cn(an(r.to))),r.values.forEach((c,d)=>{if(c.done)return;const u=c.constructor==Jf?1:i?i[d].lastPosition:o[d];let h=r.immediate,f=u;if(!h){if(f=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const g=r.fromValues[d],b=c.v0!=null?c.v0:c.v0=$.arr(s.velocity)?s.velocity[d]:s.velocity;let v;const x=s.precision||(g==u?.005:Math.min(1,Math.abs(u-g)*.001));if($.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,k=Math.exp(-(1-w)*p);f=g+b/(1-w)*(1-k),h=Math.abs(c.lastPosition-f)<=x,v=b*k}else{v=c.lastVelocity==null?b:c.lastVelocity;const w=s.restVelocity||x/10,k=s.clamp?0:s.bounce,C=!$.und(k),S=g==u?c.v0>0:g<u;let T,E=!1;const M=1,_=Math.ceil(t/M);for(let P=0;P<_&&(T=Math.abs(v)>w,!(!T&&(h=Math.abs(u-f)<=x,h)));++P){C&&(E=f==u||f>u==S,E&&(v=-v*k,f=u));const L=-s.tension*1e-6*(f-u),V=-s.friction*.001*v,F=(L+V)/s.mass;v=v+F*M,f=f+v*M}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),w=(s.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),f=g+s.easing(w)*(u-g),v=(f-c.lastPosition)/t,h=w==1}c.lastVelocity=v,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}i&&!i[d].done&&(h=!1),h?c.done=!0:e=!1,c.setValue(f,s.round)&&(n=!0)});const a=Ir(this),l=a.getValue();if(e){const c=an(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return ce.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(es(this)){const{to:t,config:e}=this.animation;ce.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return $.und(t)?(n=this.queue||[],this.queue=[]):n=[$.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>Rw(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),bd(this._state,t&&this._lastCallId),ce.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=$.obj(n)?n[e]:n,(n==null||c0(n))&&(n=void 0),r=$.obj(r)?r[e]:r,r==null&&(r=void 0);const o={to:n,from:r};return ly(this)||(t.reverse&&([n,r]=[r,n]),r=an(r),$.und(r)?Ir(this)||this._set(n):this._set(r)),o}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,_w(t,(i,a)=>/^on/.test(a)?_N(i,n):i)),oT(this,t,"onProps"),Wl(this,"onProps",t,this);const o=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return IN(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{zl(this)||(nT(this,!0),rc(s.pauseQueue),Wl(this,"onPause",sr(this,Ul(this,this.animation.to)),this))},resume:()=>{zl(this)&&(nT(this,!1),es(this)&&this._resume(),rc(s.resumeQueue),Wl(this,"onResume",sr(this,Ul(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(i=>{if(t.loop&&i.finished&&!(e&&i.noop)){const a=BN(t);if(a)return this._update(a,!0)}return i})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Pa(this));const r=!$.und(t.to),o=!$.und(t.from);if(r||o)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Pa(this));const{key:s,defaultProps:i,animation:a}=this,{to:l,from:c}=a;let{to:d=l,from:u=c}=t;o&&!r&&(!e.default||$.und(d))&&(d=u),e.reverse&&([d,u]=[u,d]);const h=!bo(u,c);h&&(a.from=u),u=an(u);const f=!bo(d,l);f&&this._focus(d);const p=c0(e.to),{config:g}=a,{decay:b,velocity:v}=g;(r||o)&&(g.velocity=0),e.config&&!p&&tae(g,ii(e.config,s),e.config!==i.config?ii(i.config,s):void 0);let x=Ir(this);if(!x||$.und(d))return n(sr(this,!0));const w=$.und(e.reset)?o&&!e.default:!$.und(u)&&kc(e.reset,s),k=w?u:this.get(),C=yd(d),S=$.num(C)||$.arr(C)||xm(C),T=!p&&(!S||kc(i.immediate||e.immediate,s));if(f){const P=l0(d);if(P!==x.constructor)if(T)x=this._set(C);else throw Error(`Cannot animate between ${x.constructor.name} and ${P.name}, as the "to" prop suggests`)}const E=x.constructor;let M=Hn(d),_=!1;if(!M){const P=w||!ly(this)&&h;(f||P)&&(_=bo(yd(k),C),M=!_),(!bo(a.immediate,T)&&!T||!bo(g.decay,b)||!bo(g.velocity,v))&&(M=!0)}if(_&&es(this)&&(a.changed&&!w?M=!0:M||this._stop(l)),!p&&((M||Hn(l))&&(a.values=x.getPayload(),a.toValues=Hn(d)?null:E==Jf?[1]:Cn(C)),a.immediate!=T&&(a.immediate=T,!T&&!w&&this._set(l)),M)){const{onRest:P}=a;xe(iae,V=>oT(this,e,V));const L=sr(this,Ul(this,l));rc(this._pendingCalls,L),this._pendingCalls.add(n),a.changed&&ce.batchedUpdates(()=>{var V;a.changed=!w,P==null||P(L,this),w?ii(i.onRest,L):(V=a.onStart)==null||V.call(a,L,this)})}w&&this._set(k),p?n(NN(e.to,e,this._state,this)):M?this._start():es(this)&&!f?this._pendingCalls.add(n):n(DN(k))}_focus(t){const e=this.animation;t!==e.to&&(W2(this)&&this._detach(),e.to=t,W2(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Hn(e)&&(gl(e,this),u0(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Hn(t)&&md(t,this)}_set(t,e=!0){const n=an(t);if(!$.und(n)){const r=Ir(this);if(!r||!bo(n,r.getValue())){const o=l0(n);!r||r.constructor!=o?Aw(this,o.create(n)):r.setValue(n),r&&ce.batchedUpdates(()=>{this._onChange(n,e)})}}return Ir(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Wl(this,"onStart",sr(this,Ul(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),ii(this.animation.onChange,t,this)),ii(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ir(this).reset(an(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),es(this)||(tT(this,!0),zl(this)||this._resume())}_resume(){br.skipAnimation?this.finish():bm.start(this)}_stop(t,e){if(es(this)){tT(this,!1);const n=this.animation;xe(n.values,o=>{o.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),pd(this,{type:"idle",parent:this});const r=e?Pa(this.get()):sr(this.get(),Ul(this,t??n.to));rc(this._pendingCalls,r),n.changed&&(n.changed=!1,Wl(this,"onRest",r,this))}}};function Ul(t,e){const n=yd(e),r=yd(t.get());return bo(r,n)}function BN(t,e=t.loop,n=t.to){const r=ii(e);if(r){const o=r!==!0&&PN(r),s=(o||t).reverse,i=!o||o.reset;return vd({...t,loop:e,default:!1,pause:void 0,to:!s||c0(n)?n:void 0,from:i?t.from:void 0,reset:i,...o})}}function vd(t){const{to:e,from:n}=t=PN(t),r=new Set;return $.obj(e)&&rT(e,r),$.obj(n)&&rT(n,r),t.keys=r.size?Array.from(r):null,t}function sae(t){const e=vd(t);return $.und(e.default)&&(e.default=_w(e)),e}function rT(t,e){Yr(t,(n,r)=>n!=null&&e.add(r))}var iae=["onStart","onRest","onChange","onPause","onResume"];function oT(t,e,n){t.animation[n]=e[n]!==RN(e,n)?_N(e[n],t.key):void 0}function Wl(t,e,...n){var r,o,s,i;(o=(r=t.animation)[e])==null||o.call(r,...n),(i=(s=t.defaultProps)[e])==null||i.call(s,...n)}var aae=["onStart","onChange","onRest"],lae=1,cae=class{constructor(t,e){this.id=lae++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];$.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(vd(t)),this}start(t){let{queue:e}=this;return t?e=Cn(t).map(vd):this.queue=[],this._flush?this._flush(this,e):(zN(this,e),h0(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;xe(Cn(e),r=>n[r].stop(!!t))}else bd(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if($.und(t))this.start({pause:!0});else{const e=this.springs;xe(Cn(t),n=>e[n].pause())}return this}resume(t){if($.und(t))this.start({pause:!1});else{const e=this.springs;xe(Cn(t),n=>e[n].resume())}return this}each(t){Yr(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,o=this._changed.size>0;(r&&!this._started||o&&!this._started)&&(this._started=!0,wc(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,i=o||s&&n.size?this.get():null;o&&e.size&&wc(e,([a,l])=>{l.value=i,a(l,this,this._item)}),s&&(this._started=!1,wc(n,([a,l])=>{l.value=i,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ce.onFrame(this._onFrame)}};function h0(t,e){return Promise.all(e.map(n=>$N(t,n))).then(n=>Rw(t,n))}async function $N(t,e,n){const{keys:r,to:o,from:s,loop:i,onRest:a,onResolve:l}=e,c=$.obj(e.default)&&e.default;i&&(e.loop=!1),o===!1&&(e.to=null),s===!1&&(e.from=null);const d=$.arr(o)||$.fun(o)?o:void 0;d?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):xe(aae,g=>{const b=e[g];if($.fun(b)){const v=t._events[g];e[g]=({finished:x,cancelled:w})=>{const k=v.get(b);k?(x||(k.finished=!1),w&&(k.cancelled=!0)):v.set(b,{value:null,finished:x||!1,cancelled:w||!1})},c&&(c[g]=e[g])}});const u=t._state;e.pause===!u.paused?(u.paused=e.pause,rc(e.pause?u.pauseQueue:u.resumeQueue)):u.paused&&(e.pause=!0);const h=(r||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),f=e.cancel===!0||RN(e,"cancel")===!0;(d||f&&u.asyncId)&&h.push(IN(++t._lastAsyncId,{props:e,state:u,actions:{pause:i0,resume:i0,start(g,b){f?(bd(u,t._lastAsyncId),b(Pa(t))):(g.onRest=a,b(NN(d,g,u,t)))}}})),u.paused&&await new Promise(g=>{u.resumeQueue.add(g)});const p=Rw(t,await Promise.all(h));if(i&&p.finished&&!(n&&p.noop)){const g=BN(e,i,o);if(g)return zN(t,[g]),$N(t,g,!0)}return l&&ce.batchedUpdates(()=>l(p,t,t.item)),p}function sT(t,e){const n={...t.springs};return e&&xe(Cn(e),r=>{$.und(r.keys)&&(r=vd(r)),$.obj(r.to)||(r={...r,to:void 0}),FN(n,r,o=>HN(o))}),VN(t,n),n}function VN(t,e){Yr(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,gl(n,t))})}function HN(t,e){const n=new oae;return n.key=t,e&&gl(n,e),n}function FN(t,e,n){e.keys&&xe(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function zN(t,e){xe(e,n=>{FN(t.springs,n,r=>HN(r,t))})}var dae=y.createContext({pause:!1,immediate:!1}),uae=()=>{const t=[],e=function(r){Lie();const o=[];return xe(t,(s,i)=>{if($.und(r))o.push(s.start());else{const a=n(r,s,i);a&&o.push(s.start(a))}}),o};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const o=t.indexOf(r);~o&&t.splice(o,1)},e.pause=function(){return xe(t,r=>r.pause(...arguments)),this},e.resume=function(){return xe(t,r=>r.resume(...arguments)),this},e.set=function(r){xe(t,(o,s)=>{const i=$.fun(r)?r(s,o):r;i&&o.set(i)})},e.start=function(r){const o=[];return xe(t,(s,i)=>{if($.und(r))o.push(s.start());else{const a=this._getProps(r,s,i);a&&o.push(s.start(a))}}),o},e.stop=function(){return xe(t,r=>r.stop(...arguments)),this},e.update=function(r){return xe(t,(o,s)=>o.update(this._getProps(r,o,s))),this};const n=function(r,o,s){return $.fun(r)?r(s,o):r};return e._getProps=n,e};function hae(t,e,n){const r=$.fun(e)&&e;r&&!n&&(n=[]);const o=y.useMemo(()=>r||arguments.length==3?uae():void 0,[]),s=y.useRef(0),i=CN(),a=y.useMemo(()=>({ctrls:[],queue:[],flush(v,x){const w=sT(v,x);return s.current>0&&!a.queue.length&&!Object.keys(w).some(C=>!v.springs[C])?h0(v,x):new Promise(C=>{VN(v,w),a.queue.push(()=>{C(h0(v,x))}),i()})}}),[]),l=y.useRef([...a.ctrls]),c=y.useRef([]);c.current??(c.current=[]);const d=q2(t)||0;y.useMemo(()=>{xe(l.current.slice(t,d),v=>{Zie(v,o),v.stop(!0)}),l.current.length=t,u(d,t)},[t]),y.useMemo(()=>{u(0,Math.min(d,t))},n);function u(v,x){for(let w=v;w<x;w++){const k=l.current[w]||(l.current[w]=new cae(null,a.flush)),C=r?r(w,k):e[w];C&&(c.current[w]=sae(C))}}const h=l.current.map((v,x)=>sT(v,c.current[x])),f=y.useContext(dae),p=q2(f),g=f!==p&&Jie(f);Mw(()=>{s.current++,a.ctrls=l.current;const{queue:v}=a;v.length&&(a.queue=[],xe(v,x=>x())),xe(l.current,(x,w)=>{o==null||o.add(x),g&&x.start({default:f});const k=c.current[w];k&&(Xie(x,k.ref),x.ref?x.queue.push(k):x.start(k)),c.current[w]=null})}),SN(()=>()=>{xe(a.ctrls,v=>v.stop(!0))});const b=h.map(v=>({...v}));return o?[b,o]:b}function Tm(t,e){const n=$.fun(t),[[r],o]=hae(1,n?t:[t],n?[]:e);return n||arguments.length==2?[r,o]:r}var fae=class extends Pw{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=hd(...e);const n=this._get(),r=l0(n);Aw(this,r.create(n))}advance(t){const e=this._get(),n=this.get();bo(e,n)||(Ir(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&iT(this._active)&&cy(this)}_get(){const t=$.arr(this.source)?this.source.map(an):Cn(an(this.source));return this.calc(...t)}_start(){this.idle&&!iT(this._active)&&(this.idle=!1,xe(km(this),t=>{t.done=!1}),br.skipAnimation?(ce.batchedUpdates(()=>this.advance()),cy(this)):bm.start(this))}_attach(){let t=1;xe(Cn(this.source),e=>{Hn(e)&&gl(e,this),u0(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){xe(Cn(this.source),t=>{Hn(t)&&md(t,this)}),this._active.clear(),cy(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Cn(this.source).reduce((e,n)=>Math.max(e,(u0(n)?n.priority:0)+1),0))}};function pae(t){return t.idle!==!1}function iT(t){return!t.size||Array.from(t).every(pae)}function cy(t){t.idle||(t.idle=!0,xe(km(t),e=>{e.done=!0}),pd(t,{type:"idle",parent:t}))}br.assign({createStringInterpolator:xN,to:(t,e)=>new fae(t,e)});var UN=/^--/;function mae(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!UN.test(t)&&!(Cc.hasOwnProperty(t)&&Cc[t])?e+"px":(""+e).trim()}var aT={};function gae(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:r,style:o,children:s,scrollTop:i,scrollLeft:a,viewBox:l,...c}=e,d=Object.values(c),u=Object.keys(c).map(h=>n||t.hasAttribute(h)?h:aT[h]||(aT[h]=h.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in o)if(o.hasOwnProperty(h)){const f=mae(h,o[h]);UN.test(h)?t.style.setProperty(h,f):t.style[h]=f}u.forEach((h,f)=>{t.setAttribute(h,d[f])}),r!==void 0&&(t.className=r),i!==void 0&&(t.scrollTop=i),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var Cc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yae=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),bae=["Webkit","Ms","Moz","O"];Cc=Object.keys(Cc).reduce((t,e)=>(bae.forEach(n=>t[yae(n,e)]=t[e]),t),Cc);var vae=/^(matrix|translate|scale|rotate|skew)/,wae=/^(translate)/,xae=/^(rotate|skew)/,dy=(t,e)=>$.num(t)&&t!==0?t+e:t,Th=(t,e)=>$.arr(t)?t.every(n=>Th(n,e)):$.num(t)?t===e:parseFloat(t)===e,kae=class extends Sm{constructor({x:t,y:e,z:n,...r}){const o=[],s=[];(t||e||n)&&(o.push([t||0,e||0,n||0]),s.push(i=>[`translate3d(${i.map(a=>dy(a,"px")).join(",")})`,Th(i,0)])),Yr(r,(i,a)=>{if(a==="transform")o.push([i||""]),s.push(l=>[l,l===""]);else if(vae.test(a)){if(delete r[a],$.und(i))return;const l=wae.test(a)?"px":xae.test(a)?"deg":"";o.push(Cn(i)),s.push(a==="rotate3d"?([c,d,u,h])=>[`rotate3d(${c},${d},${u},${dy(h,l)})`,Th(h,0)]:c=>[`${a}(${c.map(d=>dy(d,l)).join(",")})`,Th(c,a.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new Cae(o,s)),super(r)}},Cae=class extends bN{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return xe(this.inputs,(n,r)=>{const o=an(n[0]),[s,i]=this.transforms[r]($.arr(o)?o:n.map(an));t+=" "+s,e=e&&i}),e?"none":t}observerAdded(t){t==1&&xe(this.inputs,e=>xe(e,n=>Hn(n)&&gl(n,this)))}observerRemoved(t){t==0&&xe(this.inputs,e=>xe(e,n=>Hn(n)&&md(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),pd(this,t)}},Sae=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];br.assign({batchedUpdates:St.unstable_batchedUpdates,createStringInterpolator:xN,colors:pie});var Tae=Wie(Sae,{applyAnimatedValues:gae,createAnimatedStyle:t=>new kae(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),wd=Tae.animated;const Eae="_container_32ncs_1",Mae="_checkedContainer_32ncs_14",Aae="_handle_32ncs_18",uy={container:Eae,checkedContainer:Mae,handle:Aae},_ae=26;function Rae({checked:t,onChange:e}){const n=Tm({translateX:t?_ae:0});return m.jsx("div",{className:re(uy.container,t&&uy.checkedContainer),onClick:()=>e(!t),children:m.jsx(wd.div,{style:{transform:n.translateX.to(r=>`translateX(${r}px)`)},className:uy.handle})})}function Pae(t){return m.jsx("svg",{width:"24",height:"24",fill:"#00000075",viewBox:"0 0 448 512",className:Nd.icon,...t,children:m.jsx("path",{d:"M224 232C237.3 232 248 242.7 248 256V304H296C309.3 304 320 314.7 320 328C320 341.3 309.3 352 296 352H248V400C248 413.3 237.3 424 224 424C210.7 424 200 413.3 200 400V352H152C138.7 352 128 341.3 128 328C128 314.7 138.7 304 152 304H200V256C200 242.7 210.7 232 224 232zM152 64H296V24C296 10.75 306.7 0 320 0C333.3 0 344 10.75 344 24V64H384C419.3 64 448 92.65 448 128V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V128C0 92.65 28.65 64 64 64H104V24C104 10.75 114.7 0 128 0C141.3 0 152 10.75 152 24V64zM48 448C48 456.8 55.16 464 64 464H384C392.8 464 400 456.8 400 448V192H48V448z"})})}const Iae="_container_16drl_1",Dae={container:Iae};var ae=(t=>(t.Mon="mon",t.Tue="tue",t.Thu="thu",t.Wed="wed",t.Fri="fri",t.Sat="sat",t.Sun="sun",t))(ae||{});I.createContext({createTask:()=>{},changeTaskStatus:()=>{},deleteTask:()=>{},updateTask:()=>{},currentTaskIds:[],setCurrentTaskIds:()=>{},getTaskDetail:()=>{},cancelProcessingTask:()=>{},createTaskFromWeeklyHobby:()=>{},getRecommendedTasks:()=>[],filter:{showDoneTask:!1,disableAddProgressTaskAtTop:!1,showAllTask:!1},setFilter:()=>{}});ae.Mon,ae.Tue,ae.Thu,ae.Wed,ae.Fri,ae.Sat,ae.Sun;const Nae=({className:t,values:e,setValues:n})=>{const r=Rt(),o=Tm({maxHeight:!e||e.length===0?0:80});return m.jsxs(m.Fragment,{children:[m.jsx(st.ItemMeta,{className:t,logo:m.jsx(Pae,{}),title:r.formatMessage({defaultMessage:"Build Hobby",id:"label-build-Hobby"}),description:r.formatMessage({defaultMessage:"Select days to achieve a good hobby",id:"build-weekly-hobby-subtitle"}),rightComponent:m.jsx(Rae,{checked:e?e.length!==0:!1,onChange:s=>{n(s?[ae.Mon]:[])}})}),m.jsx(wd.div,{className:Dae.container,style:{maxHeight:o.maxHeight},children:m.jsx(iie,{values:e,setValues:n,options:[{label:"Mon",value:ae.Mon},{label:"Tue",value:ae.Tue},{label:"Thu",value:ae.Thu},{label:"Wed",value:ae.Wed},{label:"Fri",value:ae.Fri},{label:"Sat",value:ae.Sat},{label:"Sun",value:ae.Sun}]})})]})},Oae="_color_11daa_2",Lae="_selected_11daa_8",jae="_container_11daa_14",Sc={color:Oae,selected:Lae,container:jae},Bae=({value:t,onClick:e,className:n})=>m.jsx("div",{onClick:e,className:re(Sc.color,Sc.selected,n),style:{backgroundColor:t}}),$ae=({value:t,setValue:e,className:n})=>{const r=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"];return m.jsx("div",{className:re(Sc.container,n),children:r.map((o,s)=>m.jsx("div",{className:re(Sc.color,t===o&&Sc.selected),style:{backgroundColor:o},onClick:()=>e(o)},s))})},Vae="_iconSearchInput_yvqsm_2",Hae="_inputContainer_yvqsm_9",Fae="_container_yvqsm_14",zae="_rightContainer_yvqsm_24",Uae="_colorView_yvqsm_29",Wae="_colorPicker_yvqsm_49",la={iconSearchInput:Vae,inputContainer:Hae,container:Fae,rightContainer:zae,colorView:Uae,colorPicker:Wae},WN=({selectedIcon:t,setSelectedIcon:e,className:n,selectedColor:r,setSelectedColor:o})=>{const[s,i]=y.useState(""),[a,l]=y.useState([]),[c,d]=y.useState(2),u=Rt(),h=async p=>{var v;const b=await(await fetch(`https://api.iconify.design/search?query=${p}`)).json();((v=b==null?void 0:b.icons)==null?void 0:v.length)>0&&l(b.icons)},f=p=>{e(p),d(2)};return m.jsxs("div",{className:re(n,la.container),children:[m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:"tdesign:icon"}),title:u.formatMessage({defaultMessage:"Icons",id:"icon-picker.title"}),rightComponent:m.jsx("div",{className:la.rightContainer,children:m.jsx(Y,{width:24,icon:t,color:r})})}),m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:la.inputContainer,children:[m.jsx(Dr,{placeholder:"Search icons",border:"dash",value:s,onChange:p=>{i(p.target.value),h(p.target.value),c!==1&&d(1)},className:la.iconSearchInput}),m.jsx(Bae,{value:r,className:la.colorView,onClick:()=>{d(0)}})]}),c===1&&m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",maxHeight:"300px",overflowY:"scroll"},children:a.map(p=>m.jsx("div",{onClick:()=>f(p),style:{padding:"10px",border:"2px solid transparent",cursor:"pointer"},children:m.jsx(Y,{icon:p,width:"24",height:"24",color:r})},p))}),c===0&&m.jsx($ae,{value:r,setValue:p=>{o(p),d(2)},className:la.colorPicker})]})]})},Gae="_selectWrapper_13269_1",qae="_selectLabel_13269_5",Kae="_selectElement_13269_9",Yae="_open_13269_22",Jae="_selectedValue_13269_26",Zae="_optionsList_13269_35",Xae="_option_13269_35",Js={selectWrapper:Gae,selectLabel:qae,selectElement:Kae,open:Yae,selectedValue:Jae,optionsList:Zae,option:Xae},Qae=({options:t,onChange:e,disabled:n=!1,label:r,renderOption:o,renderLabel:s,renderInput:i,renderOptionFooter:a,classes:l={}})=>{const[c,d]=y.useState(!1),u=y.useRef(null),h=()=>d(!1);return y.useEffect(()=>{const f=p=>{u.current&&!u.current.contains(p.target)&&h()};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),m.jsxs("div",{className:re(Js.selectWrapper,l.container),ref:u,children:[s?s():r&&m.jsx("label",{className:Js.selectLabel,children:r}),m.jsxs("div",{className:`${Js.selectElement} ${c?Js.open:""}`,role:"button",tabIndex:0,children:[m.jsx("div",{className:Js.selectedValue,onClick:()=>!n&&d(!0),children:i?i():"Select..."}),c&&m.jsxs("div",{className:Js.optionsList,children:[t.map(f=>m.jsx("div",{className:Js.option,onClick:()=>{e(f,{close:h})},children:o?o(f,{close:h}):f.label},f.value)),a&&a({close:h})]})]})]})};function ele(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>r=>{e.forEach(o=>o(r))},e)}const Em=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Iw(t){return"nodeType"in t}function Qt(t){var e,n;return t?yl(t)?t:Iw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Dw(t){const{Document:e}=Qt(t);return t instanceof e}function cu(t){return yl(t)?!1:t instanceof Qt(t).HTMLElement}function GN(t){return t instanceof Qt(t).SVGElement}function bl(t){return t?yl(t)?t.document:Iw(t)?Dw(t)?t:cu(t)||GN(t)?t.ownerDocument:document:document:document}const vr=Em?y.useLayoutEffect:y.useEffect;function Mm(t){const e=y.useRef(t);return vr(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function tle(){const t=y.useRef(null),e=y.useCallback((r,o)=>{t.current=setInterval(r,o)},[]),n=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function xd(t,e){e===void 0&&(e=[t]);const n=y.useRef(t);return vr(()=>{n.current!==t&&(n.current=t)},e),n}function du(t,e){const n=y.useRef();return y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Xf(t){const e=Mm(t),n=y.useRef(null),r=y.useCallback(o=>{o!==n.current&&(e==null||e(o,n.current)),n.current=o},[]);return[n,r]}function Qf(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let hy={};function uu(t,e){return y.useMemo(()=>{if(e)return e;const n=hy[t]==null?0:hy[t]+1;return hy[t]=n,t+"-"+n},[t,e])}function qN(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[l,c]of a){const d=s[l];d!=null&&(s[l]=d+t*c)}return s},{...e})}}const Ia=qN(1),kd=qN(-1);function nle(t){return"clientX"in t&&"clientY"in t}function Am(t){if(!t)return!1;const{KeyboardEvent:e}=Qt(t.target);return e&&t instanceof e}function rle(t){if(!t)return!1;const{TouchEvent:e}=Qt(t.target);return e&&t instanceof e}function ep(t){if(rle(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return nle(t)?{x:t.clientX,y:t.clientY}:null}const Os=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Os.Translate.toString(t),Os.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),lT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ole(t){return t.matches(lT)?t:t.querySelector(lT)}const sle={display:"none"};function ile(t){let{id:e,value:n}=t;return I.createElement("div",{id:e,style:sle},n)}function ale(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function lle(){const[t,e]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const KN=y.createContext(null);function cle(t){const e=y.useContext(KN);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function dle(){const[t]=y.useState(()=>new Set),e=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:o,event:s}=r;t.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[t]),e]}const ule={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},hle={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function fle(t){let{announcements:e=hle,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=ule}=t;const{announce:s,announcement:i}=lle(),a=uu("DndLiveRegion"),[l,c]=y.useState(!1);if(y.useEffect(()=>{c(!0)},[]),cle(y.useMemo(()=>({onDragStart(u){let{active:h}=u;s(e.onDragStart({active:h}))},onDragMove(u){let{active:h,over:f}=u;e.onDragMove&&s(e.onDragMove({active:h,over:f}))},onDragOver(u){let{active:h,over:f}=u;s(e.onDragOver({active:h,over:f}))},onDragEnd(u){let{active:h,over:f}=u;s(e.onDragEnd({active:h,over:f}))},onDragCancel(u){let{active:h,over:f}=u;s(e.onDragCancel({active:h,over:f}))}}),[s,e])),!l)return null;const d=I.createElement(I.Fragment,null,I.createElement(ile,{id:r,value:o.draggable}),I.createElement(ale,{id:a,announcement:i}));return n?St.createPortal(d,n):d}var ct;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ct||(ct={}));function tp(){}function cT(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function ple(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const wr=Object.freeze({x:0,y:0});function YN(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function mle(t,e){const n=ep(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function JN(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function gle(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function dT(t){let{left:e,top:n,height:r,width:o}=t;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+r},{x:e+o,y:n+r}]}function ZN(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function uT(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const yle=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=uT(e,e.left,e.top),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=YN(uT(l),o);s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(JN)},ble=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=dT(e),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=dT(l),d=o.reduce((h,f,p)=>h+YN(c[p],f),0),u=Number((d/4).toFixed(4));s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(JN)};function vle(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),i=o-r,a=s-n;if(r<o&&n<s){const l=e.width*e.height,c=t.width*t.height,d=i*a,u=d/(l+c-d);return Number(u.toFixed(4))}return 0}const wle=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const l=vle(a,e);l>0&&o.push({id:i,data:{droppableContainer:s,value:l}})}}return o.sort(gle)};function xle(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function XN(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:wr}function kle(t){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+t*a.y,bottom:i.bottom+t*a.y,left:i.left+t*a.x,right:i.right+t*a.x}),{...n})}}const Cle=kle(1);function QN(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Sle(t,e,n){const r=QN(e);if(!r)return t;const{scaleX:o,scaleY:s,x:i,y:a}=r,l=t.left-i-(1-o)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?t.width/o:t.width,u=s?t.height/s:t.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}const Tle={ignoreTransform:!1};function vl(t,e){e===void 0&&(e=Tle);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:d}=Qt(t).getComputedStyle(t);c&&(n=Sle(n,c,d))}const{top:r,left:o,width:s,height:i,bottom:a,right:l}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:l}}function hT(t){return vl(t,{ignoreTransform:!0})}function Ele(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Mle(t,e){return e===void 0&&(e=Qt(t).getComputedStyle(t)),e.position==="fixed"}function Ale(t,e){e===void 0&&(e=Qt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=e[o];return typeof s=="string"?n.test(s):!1})}function _m(t,e){const n=[];function r(o){if(e!=null&&n.length>=e||!o)return n;if(Dw(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!cu(o)||GN(o)||n.includes(o))return n;const s=Qt(t).getComputedStyle(o);return o!==t&&Ale(o,s)&&n.push(o),Mle(o,s)?n:r(o.parentNode)}return t?r(t):n}function e4(t){const[e]=_m(t,1);return e??null}function fy(t){return!Em||!t?null:yl(t)?t:Iw(t)?Dw(t)||t===bl(t).scrollingElement?window:cu(t)?t:null:null}function t4(t){return yl(t)?t.scrollX:t.scrollLeft}function n4(t){return yl(t)?t.scrollY:t.scrollTop}function f0(t){return{x:t4(t),y:n4(t)}}var ht;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ht||(ht={}));function r4(t){return!Em||!t?!1:t===document.scrollingElement}function o4(t){const e={x:0,y:0},n=r4(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},o=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,i=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:e}}const _le={x:.2,y:.2};function Rle(t,e,n,r,o){let{top:s,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=_le);const{isTop:c,isBottom:d,isLeft:u,isRight:h}=o4(t),f={x:0,y:0},p={x:0,y:0},g={height:e.height*o.y,width:e.width*o.x};return!c&&s<=e.top+g.height?(f.y=ht.Backward,p.y=r*Math.abs((e.top+g.height-s)/g.height)):!d&&l>=e.bottom-g.height&&(f.y=ht.Forward,p.y=r*Math.abs((e.bottom-g.height-l)/g.height)),!h&&a>=e.right-g.width?(f.x=ht.Forward,p.x=r*Math.abs((e.right-g.width-a)/g.width)):!u&&i<=e.left+g.width&&(f.x=ht.Backward,p.x=r*Math.abs((e.left+g.width-i)/g.width)),{direction:f,speed:p}}function Ple(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:e,left:n,right:r,bottom:o}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:o,width:t.clientWidth,height:t.clientHeight}}function s4(t){return t.reduce((e,n)=>Ia(e,f0(n)),wr)}function Ile(t){return t.reduce((e,n)=>e+t4(n),0)}function Dle(t){return t.reduce((e,n)=>e+n4(n),0)}function i4(t,e){if(e===void 0&&(e=vl),!t)return;const{top:n,left:r,bottom:o,right:s}=e(t);e4(t)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Nle=[["x",["left","right"],Ile],["y",["top","bottom"],Dle]];class Nw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=_m(n),o=s4(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,i,a]of Nle)for(const l of i)Object.defineProperty(this,l,{get:()=>{const c=a(r),d=o[s]-c;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Tc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var o;(o=this.target)==null||o.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Ole(t){const{EventTarget:e}=Qt(t);return t instanceof e?t:bl(t)}function py(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Vn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Vn||(Vn={}));function fT(t){t.preventDefault()}function Lle(t){t.stopPropagation()}var we;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(we||(we={}));const a4={start:[we.Space,we.Enter],cancel:[we.Esc],end:[we.Space,we.Enter,we.Tab]},jle=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case we.Right:return{...n,x:n.x+25};case we.Left:return{...n,x:n.x-25};case we.Down:return{...n,y:n.y+25};case we.Up:return{...n,y:n.y-25}}};class Ow{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Tc(bl(n)),this.windowListeners=new Tc(Qt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&i4(r),n(wr)}handleKeyDown(e){if(Am(e)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=a4,coordinateGetter:i=jle,scrollBehavior:a="smooth"}=o,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:wr;this.referenceCoordinates||(this.referenceCoordinates=d);const u=i(e,{active:n,context:r.current,currentCoordinates:d});if(u){const h=kd(u,d),f={x:0,y:0},{scrollableAncestors:p}=r.current;for(const g of p){const b=e.code,{isTop:v,isRight:x,isLeft:w,isBottom:k,maxScroll:C,minScroll:S}=o4(g),T=Ple(g),E={x:Math.min(b===we.Right?T.right-T.width/2:T.right,Math.max(b===we.Right?T.left:T.left+T.width/2,u.x)),y:Math.min(b===we.Down?T.bottom-T.height/2:T.bottom,Math.max(b===we.Down?T.top:T.top+T.height/2,u.y))},M=b===we.Right&&!x||b===we.Left&&!w,_=b===we.Down&&!k||b===we.Up&&!v;if(M&&E.x!==u.x){const P=g.scrollLeft+h.x,L=b===we.Right&&P<=C.x||b===we.Left&&P>=S.x;if(L&&!h.y){g.scrollTo({left:P,behavior:a});return}L?f.x=g.scrollLeft-P:f.x=b===we.Right?g.scrollLeft-C.x:g.scrollLeft-S.x,f.x&&g.scrollBy({left:-f.x,behavior:a});break}else if(_&&E.y!==u.y){const P=g.scrollTop+h.y,L=b===we.Down&&P<=C.y||b===we.Up&&P>=S.y;if(L&&!h.x){g.scrollTo({top:P,behavior:a});return}L?f.y=g.scrollTop-P:f.y=b===we.Down?g.scrollTop-C.y:g.scrollTop-S.y,f.y&&g.scrollBy({top:-f.y,behavior:a});break}}this.handleMove(e,Ia(kd(u,this.referenceCoordinates),f))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ow.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=a4,onActivation:o}=e,{active:s}=n;const{code:i}=t.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),o==null||o({event:t.nativeEvent}),!0)}return!1}}];function pT(t){return!!(t&&"distance"in t)}function mT(t){return!!(t&&"delay"in t)}class Lw{constructor(e,n,r){var o;r===void 0&&(r=Ole(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:i}=s;this.props=e,this.events=n,this.document=bl(i),this.documentListeners=new Tc(this.document),this.listeners=new Tc(r),this.windowListeners=new Tc(Qt(i)),this.initialCoordinates=(o=ep(s))!=null?o:wr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.DragStart,fT),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),this.windowListeners.add(Vn.ContextMenu,fT),this.documentListeners.add(Vn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(mT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(pT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Vn.Click,Lle,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const l=(n=ep(e))!=null?n:wr,c=kd(o,l);if(!r&&a){if(pT(a)){if(a.tolerance!=null&&py(c,a.tolerance))return this.handleCancel();if(py(c,a.distance))return this.handleStart()}if(mT(a)&&py(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===we.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Ble={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class jw extends Lw{constructor(e){const{event:n}=e,r=bl(n.target);super(e,Ble,r)}}jw.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const $le={move:{name:"mousemove"},end:{name:"mouseup"}};var p0;(function(t){t[t.RightClick=2]="RightClick"})(p0||(p0={}));class Vle extends Lw{constructor(e){super(e,$le,bl(e.event.target))}}Vle.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===p0.RightClick?!1:(r==null||r({event:n}),!0)}}];const my={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Hle extends Lw{constructor(e){super(e,my)}static setup(){return window.addEventListener(my.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(my.move.name,e)};function e(){}}}Hle.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Ec;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Ec||(Ec={}));var np;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(np||(np={}));function Fle(t){let{acceleration:e,activator:n=Ec.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=np.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:u,threshold:h}=t;const f=Ule({delta:u,disabled:!s}),[p,g]=tle(),b=y.useRef({x:0,y:0}),v=y.useRef({x:0,y:0}),x=y.useMemo(()=>{switch(n){case Ec.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Ec.DraggableRect:return o}},[n,o,l]),w=y.useRef(null),k=y.useCallback(()=>{const S=w.current;if(!S)return;const T=b.current.x*v.current.x,E=b.current.y*v.current.y;S.scrollBy(T,E)},[]),C=y.useMemo(()=>a===np.TreeOrder?[...c].reverse():c,[a,c]);y.useEffect(()=>{if(!s||!c.length||!x){g();return}for(const S of C){if((r==null?void 0:r(S))===!1)continue;const T=c.indexOf(S),E=d[T];if(!E)continue;const{direction:M,speed:_}=Rle(S,E,x,e,h);for(const P of["x","y"])f[P][M[P]]||(_[P]=0,M[P]=0);if(_.x>0||_.y>0){g(),w.current=S,p(k,i),b.current=_,v.current=M;return}}b.current={x:0,y:0},v.current={x:0,y:0},g()},[e,k,r,g,s,i,JSON.stringify(x),JSON.stringify(f),p,c,C,d,JSON.stringify(h)])}const zle={x:{[ht.Backward]:!1,[ht.Forward]:!1},y:{[ht.Backward]:!1,[ht.Forward]:!1}};function Ule(t){let{delta:e,disabled:n}=t;const r=Qf(e);return du(o=>{if(n||!r||!o)return zle;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[ht.Backward]:o.x[ht.Backward]||s.x===-1,[ht.Forward]:o.x[ht.Forward]||s.x===1},y:{[ht.Backward]:o.y[ht.Backward]||s.y===-1,[ht.Forward]:o.y[ht.Forward]||s.y===1}}},[n,e,r])}function Wle(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return du(o=>{var s;return e==null?null:(s=r??o)!=null?s:null},[r,e])}function Gle(t,e){return y.useMemo(()=>t.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:e(i.handler,r)}));return[...n,...s]},[]),[t,e])}var Cd;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Cd||(Cd={}));var m0;(function(t){t.Optimized="optimized"})(m0||(m0={}));const gT=new Map;function qle(t,e){let{dragging:n,dependencies:r,config:o}=e;const[s,i]=y.useState(null),{frequency:a,measure:l,strategy:c}=o,d=y.useRef(t),u=b(),h=xd(u),f=y.useCallback(function(v){v===void 0&&(v=[]),!h.current&&i(x=>x===null?v:x.concat(v.filter(w=>!x.includes(w))))},[h]),p=y.useRef(null),g=du(v=>{if(u&&!n)return gT;if(!v||v===gT||d.current!==t||s!=null){const x=new Map;for(let w of t){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const k=w.node.current,C=k?new Nw(l(k),k):null;w.rect.current=C,C&&x.set(w.id,C)}return x}return v},[t,s,n,u,l]);return y.useEffect(()=>{d.current=t},[t]),y.useEffect(()=>{u||f()},[n,u]),y.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),y.useEffect(()=>{u||typeof a!="number"||p.current!==null||(p.current=setTimeout(()=>{f(),p.current=null},a))},[a,u,f,...r]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:s!=null};function b(){switch(c){case Cd.Always:return!1;case Cd.BeforeDragging:return n;default:return!n}}}function Bw(t,e){return du(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Kle(t,e){return Bw(t,e)}function Yle(t){let{callback:e,disabled:n}=t;const r=Mm(e),o=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return y.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Rm(t){let{callback:e,disabled:n}=t;const r=Mm(e),o=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return y.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Jle(t){return new Nw(vl(t),t)}function yT(t,e,n){e===void 0&&(e=Jle);const[r,o]=y.useState(null);function s(){o(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const i=Yle({callback(l){if(t)for(const c of l){const{type:d,target:u}=c;if(d==="childList"&&u instanceof HTMLElement&&u.contains(t)){s();break}}}}),a=Rm({callback:s});return vr(()=>{s(),t?(a==null||a.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[t]),r}function Zle(t){const e=Bw(t);return XN(t,e)}const bT=[];function Xle(t){const e=y.useRef(t),n=du(r=>t?r&&r!==bT&&t&&e.current&&t.parentNode===e.current.parentNode?r:_m(t):bT,[t]);return y.useEffect(()=>{e.current=t},[t]),n}function Qle(t){const[e,n]=y.useState(null),r=y.useRef(t),o=y.useCallback(s=>{const i=fy(s.target);i&&n(a=>a?(a.set(i,f0(i)),new Map(a)):null)},[]);return y.useEffect(()=>{const s=r.current;if(t!==s){i(s);const a=t.map(l=>{const c=fy(l);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,f0(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{i(t),i(s)};function i(a){a.forEach(l=>{const c=fy(l);c==null||c.removeEventListener("scroll",o)})}},[o,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,i)=>Ia(s,i),wr):s4(t):wr,[t,e])}function vT(t,e){e===void 0&&(e=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},e),y.useEffect(()=>{const r=t!==wr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?kd(t,n.current):wr}function ece(t){y.useEffect(()=>{if(!Em)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function tce(t,e){return y.useMemo(()=>t.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,e)},n},{}),[t,e])}function l4(t){return y.useMemo(()=>t?Ele(t):null,[t])}const wT=[];function nce(t,e){e===void 0&&(e=vl);const[n]=t,r=l4(n?Qt(n):null),[o,s]=y.useState(wT);function i(){s(()=>t.length?t.map(l=>r4(l)?r:new Nw(e(l),l)):wT)}const a=Rm({callback:i});return vr(()=>{a==null||a.disconnect(),i(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),o}function c4(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return cu(e)?e:t}function rce(t){let{measure:e}=t;const[n,r]=y.useState(null),o=y.useCallback(c=>{for(const{target:d}of c)if(cu(d)){r(u=>{const h=e(d);return u?{...u,width:h.width,height:h.height}:h});break}},[e]),s=Rm({callback:o}),i=y.useCallback(c=>{const d=c4(c);s==null||s.disconnect(),d&&(s==null||s.observe(d)),r(d?e(d):null)},[e,s]),[a,l]=Xf(i);return y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const oce=[{sensor:jw,options:{}},{sensor:Ow,options:{}}],sce={current:{}},Eh={draggable:{measure:hT},droppable:{measure:hT,strategy:Cd.WhileDragging,frequency:m0.Optimized},dragOverlay:{measure:vl}};class Mc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const ice={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Mc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Eh,measureDroppableContainers:tp,windowRect:null,measuringScheduled:!1},d4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tp,draggableNodes:new Map,over:null,measureDroppableContainers:tp},hu=y.createContext(d4),u4=y.createContext(ice);function ace(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Mc}}}function lce(t,e){switch(e.type){case ct.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ct.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case ct.DragEnd:case ct.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ct.RegisterDroppable:{const{element:n}=e,{id:r}=n,o=new Mc(t.droppable.containers);return o.set(r,n),{...t,droppable:{...t.droppable,containers:o}}}case ct.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Mc(t.droppable.containers);return i.set(n,{...s,disabled:o}),{...t,droppable:{...t.droppable,containers:i}}}case ct.UnregisterDroppable:{const{id:n,key:r}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const s=new Mc(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function cce(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:o}=y.useContext(hu),s=Qf(r),i=Qf(n==null?void 0:n.id);return y.useEffect(()=>{if(!e&&!r&&s&&i!=null){if(!Am(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[l.current,c.current]){if(!d)continue;const u=ole(d);if(u){u.focus();break}}})}},[r,e,o,i,s]),null}function h4(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((o,s)=>s({transform:o,...r}),n):n}function dce(t){return y.useMemo(()=>({draggable:{...Eh.draggable,...t==null?void 0:t.draggable},droppable:{...Eh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Eh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function uce(t){let{activeNode:e,measure:n,initialRect:r,config:o=!0}=t;const s=y.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;vr(()=>{if(!i&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const d=n(c),u=XN(d,r);if(i||(u.x=0),a||(u.y=0),s.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const h=e4(c);h&&h.scrollBy({top:u.y,left:u.x})}},[e,i,a,r,n])}const Pm=y.createContext({...wr,scaleX:1,scaleY:1});var cs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(cs||(cs={}));const hce=y.memo(function(e){var n,r,o,s;let{id:i,accessibility:a,autoScroll:l=!0,children:c,sensors:d=oce,collisionDetection:u=wle,measuring:h,modifiers:f,...p}=e;const g=y.useReducer(lce,void 0,ace),[b,v]=g,[x,w]=dle(),[k,C]=y.useState(cs.Uninitialized),S=k===cs.Initialized,{draggable:{active:T,nodes:E,translate:M},droppable:{containers:_}}=b,P=T!=null?E.get(T):null,L=y.useRef({initial:null,translated:null}),V=y.useMemo(()=>{var Dt;return T!=null?{id:T,data:(Dt=P==null?void 0:P.data)!=null?Dt:sce,rect:L}:null},[T,P]),F=y.useRef(null),[z,Z]=y.useState(null),[N,B]=y.useState(null),H=xd(p,Object.values(p)),X=uu("DndDescribedBy",i),G=y.useMemo(()=>_.getEnabled(),[_]),Q=dce(h),{droppableRects:pe,measureDroppableContainers:Fe,measuringScheduled:Ke}=qle(G,{dragging:S,dependencies:[M.x,M.y],config:Q.droppable}),ve=Wle(E,T),Oe=y.useMemo(()=>N?ep(N):null,[N]),Ye=a3(),$e=Kle(ve,Q.draggable.measure);uce({activeNode:T!=null?E.get(T):null,config:Ye.layoutShiftCompensation,initialRect:$e,measure:Q.draggable.measure});const le=yT(ve,Q.draggable.measure,$e),en=yT(ve?ve.parentElement:null),Pt=y.useRef({activatorEvent:null,active:null,activeNode:ve,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:_,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),tn=_.getNodeFor((n=Pt.current.over)==null?void 0:n.id),It=rce({measure:Q.dragOverlay.measure}),Rn=(r=It.nodeRef.current)!=null?r:ve,Sr=S?(o=It.rect)!=null?o:le:null,Ki=!!(It.nodeRef.current&&It.rect),Yi=Zle(Ki?null:le),zo=l4(Rn?Qt(Rn):null),Ve=Xle(S?tn??ve:null),Ji=nce(Ve),Zi=h4(f,{transform:{x:M.x-Yi.x,y:M.y-Yi.y,scaleX:1,scaleY:1},activatorEvent:N,active:V,activeNodeRect:le,containerNodeRect:en,draggingNodeRect:Sr,over:Pt.current.over,overlayNodeRect:It.rect,scrollableAncestors:Ve,scrollableAncestorRects:Ji,windowRect:zo}),yu=Oe?Ia(Oe,M):null,bu=Qle(Ve),vu=vT(bu),wu=vT(bu,[le]),oo=Ia(Zi,vu),so=Sr?Cle(Sr,Zi):null,Uo=V&&so?u({active:V,collisionRect:so,droppableRects:pe,droppableContainers:G,pointerCoordinates:yu}):null,Cl=ZN(Uo,"id"),[Je,kx]=y.useState(null),n3=Ki?Zi:Ia(Zi,wu),r3=xle(n3,(s=Je==null?void 0:Je.rect)!=null?s:null,le),Lm=y.useRef(null),Cx=y.useCallback((Dt,mn)=>{let{sensor:gn,options:Wo}=mn;if(F.current==null)return;const Pn=E.get(F.current);if(!Pn)return;const yn=Dt.nativeEvent,Tr=new gn({active:F.current,activeNode:Pn,event:yn,options:Wo,context:Pt,onAbort(yt){if(!E.get(yt))return;const{onDragAbort:Er}=H.current,io={id:yt};Er==null||Er(io),x({type:"onDragAbort",event:io})},onPending(yt,Go,Er,io){if(!E.get(yt))return;const{onDragPending:Tl}=H.current,qo={id:yt,constraint:Go,initialCoordinates:Er,offset:io};Tl==null||Tl(qo),x({type:"onDragPending",event:qo})},onStart(yt){const Go=F.current;if(Go==null)return;const Er=E.get(Go);if(!Er)return;const{onDragStart:io}=H.current,Sl={activatorEvent:yn,active:{id:Go,data:Er.data,rect:L}};St.unstable_batchedUpdates(()=>{io==null||io(Sl),C(cs.Initializing),v({type:ct.DragStart,initialCoordinates:yt,active:Go}),x({type:"onDragStart",event:Sl}),Z(Lm.current),B(yn)})},onMove(yt){v({type:ct.DragMove,coordinates:yt})},onEnd:Xi(ct.DragEnd),onCancel:Xi(ct.DragCancel)});Lm.current=Tr;function Xi(yt){return async function(){const{active:Er,collisions:io,over:Sl,scrollAdjustedTranslate:Tl}=Pt.current;let qo=null;if(Er&&Tl){const{cancelDrop:El}=H.current;qo={activatorEvent:yn,active:Er,collisions:io,delta:Tl,over:Sl},yt===ct.DragEnd&&typeof El=="function"&&await Promise.resolve(El(qo))&&(yt=ct.DragCancel)}F.current=null,St.unstable_batchedUpdates(()=>{v({type:yt}),C(cs.Uninitialized),kx(null),Z(null),B(null),Lm.current=null;const El=yt===ct.DragEnd?"onDragEnd":"onDragCancel";if(qo){const jm=H.current[El];jm==null||jm(qo),x({type:El,event:qo})}})}}},[E]),o3=y.useCallback((Dt,mn)=>(gn,Wo)=>{const Pn=gn.nativeEvent,yn=E.get(Wo);if(F.current!==null||!yn||Pn.dndKit||Pn.defaultPrevented)return;const Tr={active:yn};Dt(gn,mn.options,Tr)===!0&&(Pn.dndKit={capturedBy:mn.sensor},F.current=Wo,Cx(gn,mn))},[E,Cx]),Sx=Gle(d,o3);ece(d),vr(()=>{le&&k===cs.Initializing&&C(cs.Initialized)},[le,k]),y.useEffect(()=>{const{onDragMove:Dt}=H.current,{active:mn,activatorEvent:gn,collisions:Wo,over:Pn}=Pt.current;if(!mn||!gn)return;const yn={active:mn,activatorEvent:gn,collisions:Wo,delta:{x:oo.x,y:oo.y},over:Pn};St.unstable_batchedUpdates(()=>{Dt==null||Dt(yn),x({type:"onDragMove",event:yn})})},[oo.x,oo.y]),y.useEffect(()=>{const{active:Dt,activatorEvent:mn,collisions:gn,droppableContainers:Wo,scrollAdjustedTranslate:Pn}=Pt.current;if(!Dt||F.current==null||!mn||!Pn)return;const{onDragOver:yn}=H.current,Tr=Wo.get(Cl),Xi=Tr&&Tr.rect.current?{id:Tr.id,rect:Tr.rect.current,data:Tr.data,disabled:Tr.disabled}:null,yt={active:Dt,activatorEvent:mn,collisions:gn,delta:{x:Pn.x,y:Pn.y},over:Xi};St.unstable_batchedUpdates(()=>{kx(Xi),yn==null||yn(yt),x({type:"onDragOver",event:yt})})},[Cl]),vr(()=>{Pt.current={activatorEvent:N,active:V,activeNode:ve,collisionRect:so,collisions:Uo,droppableRects:pe,draggableNodes:E,draggingNode:Rn,draggingNodeRect:Sr,droppableContainers:_,over:Je,scrollableAncestors:Ve,scrollAdjustedTranslate:oo},L.current={initial:Sr,translated:so}},[V,ve,Uo,so,E,Rn,Sr,pe,_,Je,Ve,oo]),Fle({...Ye,delta:M,draggingRect:so,pointerCoordinates:yu,scrollableAncestors:Ve,scrollableAncestorRects:Ji});const s3=y.useMemo(()=>({active:V,activeNode:ve,activeNodeRect:le,activatorEvent:N,collisions:Uo,containerNodeRect:en,dragOverlay:It,draggableNodes:E,droppableContainers:_,droppableRects:pe,over:Je,measureDroppableContainers:Fe,scrollableAncestors:Ve,scrollableAncestorRects:Ji,measuringConfiguration:Q,measuringScheduled:Ke,windowRect:zo}),[V,ve,le,N,Uo,en,It,E,_,pe,Je,Fe,Ve,Ji,Q,Ke,zo]),i3=y.useMemo(()=>({activatorEvent:N,activators:Sx,active:V,activeNodeRect:le,ariaDescribedById:{draggable:X},dispatch:v,draggableNodes:E,over:Je,measureDroppableContainers:Fe}),[N,Sx,V,le,v,X,E,Je,Fe]);return I.createElement(KN.Provider,{value:w},I.createElement(hu.Provider,{value:i3},I.createElement(u4.Provider,{value:s3},I.createElement(Pm.Provider,{value:r3},c)),I.createElement(cce,{disabled:(a==null?void 0:a.restoreFocus)===!1})),I.createElement(fle,{...a,hiddenTextDescribedById:X}));function a3(){const Dt=(z==null?void 0:z.autoScrollEnabled)===!1,mn=typeof l=="object"?l.enabled===!1:l===!1,gn=S&&!Dt&&!mn;return typeof l=="object"?{...l,enabled:gn}:{enabled:gn}}}),fce=y.createContext(null),xT="button",pce="Draggable";function mce(t){let{id:e,data:n,disabled:r=!1,attributes:o}=t;const s=uu(pce),{activators:i,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=y.useContext(hu),{role:f=xT,roleDescription:p="draggable",tabIndex:g=0}=o??{},b=(l==null?void 0:l.id)===e,v=y.useContext(b?Pm:fce),[x,w]=Xf(),[k,C]=Xf(),S=tce(i,e),T=xd(n);vr(()=>(u.set(e,{id:e,key:s,node:x,activatorNode:k,data:T}),()=>{const M=u.get(e);M&&M.key===s&&u.delete(e)}),[u,e]);const E=y.useMemo(()=>({role:f,tabIndex:g,"aria-disabled":r,"aria-pressed":b&&f===xT?!0:void 0,"aria-roledescription":p,"aria-describedby":d.draggable}),[r,f,g,b,p,d.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:E,isDragging:b,listeners:r?void 0:S,node:x,over:h,setNodeRef:w,setActivatorNodeRef:C,transform:v}}function f4(){return y.useContext(u4)}const gce="Droppable",yce={timeout:25};function p4(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:o}=t;const s=uu(gce),{active:i,dispatch:a,over:l,measureDroppableContainers:c}=y.useContext(hu),d=y.useRef({disabled:n}),u=y.useRef(!1),h=y.useRef(null),f=y.useRef(null),{disabled:p,updateMeasurementsFor:g,timeout:b}={...yce,...o},v=xd(g??r),x=y.useCallback(()=>{if(!u.current){u.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),f.current=null},b)},[b]),w=Rm({callback:x,disabled:p||!i}),k=y.useCallback((E,M)=>{w&&(M&&(w.unobserve(M),u.current=!1),E&&w.observe(E))},[w]),[C,S]=Xf(k),T=xd(e);return y.useEffect(()=>{!w||!C.current||(w.disconnect(),u.current=!1,w.observe(C.current))},[C,w]),y.useEffect(()=>(a({type:ct.RegisterDroppable,element:{id:r,key:s,disabled:n,node:C,rect:h,data:T}}),()=>a({type:ct.UnregisterDroppable,key:s,id:r})),[r]),y.useEffect(()=>{n!==d.current.disabled&&(a({type:ct.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,a]),{active:i,rect:h,isOver:(l==null?void 0:l.id)===r,node:C,over:l,setNodeRef:S}}function bce(t){let{animation:e,children:n}=t;const[r,o]=y.useState(null),[s,i]=y.useState(null),a=Qf(n);return!n&&!r&&a&&o(a),vr(()=>{if(!s)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){o(null);return}Promise.resolve(e(c,s)).then(()=>{o(null)})},[e,r,s]),I.createElement(I.Fragment,null,n,r?y.cloneElement(r,{ref:i}):null)}const vce={x:0,y:0,scaleX:1,scaleY:1};function wce(t){let{children:e}=t;return I.createElement(hu.Provider,{value:d4},I.createElement(Pm.Provider,{value:vce},e))}const xce={position:"fixed",touchAction:"none"},kce=t=>Am(t)?"transform 250ms ease":void 0,Cce=y.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:i,rect:a,style:l,transform:c,transition:d=kce}=t;if(!a)return null;const u=o?c:{...c,scaleX:1,scaleY:1},h={...xce,width:a.width,height:a.height,top:a.top,left:a.left,transform:Os.Transform.toString(u),transformOrigin:o&&r?mle(r,a):void 0,transition:typeof d=="function"?d(r):d,...l};return I.createElement(n,{className:i,style:h,ref:e},s)}),Sce=t=>e=>{let{active:n,dragOverlay:r}=e;const o={},{styles:s,className:i}=t;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,c]of Object.entries(o))n.node.style.setProperty(l,c);i!=null&&i.active&&n.node.classList.remove(i.active)}},Tce=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Os.Transform.toString(e)},{transform:Os.Transform.toString(n)}]},Ece={duration:250,easing:"ease",keyframes:Tce,sideEffects:Sce({styles:{active:{opacity:"0"}}})};function Mce(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=t;return Mm((s,i)=>{if(e===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const c=c4(i);if(!c)return;const{transform:d}=Qt(i).getComputedStyle(i),u=QN(d);if(!u)return;const h=typeof e=="function"?e:Ace(e);return i4(l,o.draggable.measure),h({active:{id:s,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:o,transform:u})})}function Ace(t){const{duration:e,easing:n,sideEffects:r,keyframes:o}={...Ece,...t};return s=>{let{active:i,dragOverlay:a,transform:l,...c}=s;if(!e)return;const d={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},u={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/a.rect.height:1},h={x:l.x-d.x,y:l.y-d.y,...u},f=o({...c,active:i,dragOverlay:a,transform:{initial:l,final:h}}),[p]=f,g=f[f.length-1];if(JSON.stringify(p)===JSON.stringify(g))return;const b=r==null?void 0:r({active:i,dragOverlay:a,...c}),v=a.node.animate(f,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{v.onfinish=()=>{b==null||b(),x()}})}}let kT=0;function _ce(t){return y.useMemo(()=>{if(t!=null)return kT++,kT},[t])}const Rce=I.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:i,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:d,active:u,activeNodeRect:h,containerNodeRect:f,draggableNodes:p,droppableContainers:g,dragOverlay:b,over:v,measuringConfiguration:x,scrollableAncestors:w,scrollableAncestorRects:k,windowRect:C}=f4(),S=y.useContext(Pm),T=_ce(u==null?void 0:u.id),E=h4(i,{activatorEvent:d,active:u,activeNodeRect:h,containerNodeRect:f,draggingNodeRect:b.rect,over:v,overlayNodeRect:b.rect,scrollableAncestors:w,scrollableAncestorRects:k,transform:S,windowRect:C}),M=Bw(h),_=Mce({config:r,draggableNodes:p,droppableContainers:g,measuringConfiguration:x}),P=M?b.setRef:void 0;return I.createElement(wce,null,I.createElement(bce,{animation:_},u&&T?I.createElement(Cce,{key:T,id:u.id,ref:P,as:a,activatorEvent:d,adjustScale:e,className:l,transition:s,rect:M,style:{zIndex:c,...o},transform:E},n):null))});function $w(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function Pce(t,e){return t.reduce((n,r,o)=>{const s=e.get(r);return s&&(n[o]=s),n},Array(t.length))}function Ju(t){return t!==null&&t>=0}function Ice(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Dce(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const m4=t=>{let{rects:e,activeIndex:n,overIndex:r,index:o}=t;const s=$w(e,r,n),i=e[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},Zu={scaleX:1,scaleY:1},Nce=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(o===n){const c=s[i];return c?{x:0,y:n<i?c.top+c.height-(a.top+a.height):c.top-a.top,...Zu}:null}const l=Oce(s,o,n);return o>n&&o<=i?{x:0,y:-a.height-l,...Zu}:o<n&&o>=i?{x:0,y:a.height+l,...Zu}:{x:0,y:0,...Zu}};function Oce(t,e,n){const r=t[e],o=t[e-1],s=t[e+1];return r?n<e?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const g4="Sortable",y4=I.createContext({activeIndex:-1,containerId:g4,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:m4,disabled:{draggable:!1,droppable:!1}});function Lce(t){let{children:e,id:n,items:r,strategy:o=m4,disabled:s=!1}=t;const{active:i,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:d}=f4(),u=uu(g4,n),h=a.rect!==null,f=y.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),p=i!=null,g=i?f.indexOf(i.id):-1,b=c?f.indexOf(c.id):-1,v=y.useRef(f),x=!Ice(f,v.current),w=b!==-1&&g===-1||x,k=Dce(s);vr(()=>{x&&p&&d(f)},[x,f,p,d]),y.useEffect(()=>{v.current=f},[f]);const C=y.useMemo(()=>({activeIndex:g,containerId:u,disabled:k,disableTransforms:w,items:f,overIndex:b,useDragOverlay:h,sortedRects:Pce(f,l),strategy:o}),[g,u,k.draggable,k.droppable,w,f,b,l,h,o]);return I.createElement(y4.Provider,{value:C},e)}const jce=t=>{let{id:e,items:n,activeIndex:r,overIndex:o}=t;return $w(n,r,o).indexOf(e)},Bce=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==s&&o===i?!1:n?!0:i!==o&&e===l},$ce={duration:200,easing:"ease"},b4="transform",Vce=Os.Transition.toString({property:b4,duration:0,easing:"linear"}),Hce={roleDescription:"sortable"};function Fce(t){let{disabled:e,index:n,node:r,rect:o}=t;const[s,i]=y.useState(null),a=y.useRef(n);return vr(()=>{if(!e&&n!==a.current&&r.current){const l=o.current;if(l){const c=vl(r.current,{ignoreTransform:!0}),d={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(d.x||d.y)&&i(d)}}n!==a.current&&(a.current=n)},[e,n,r,o]),y.useEffect(()=>{s&&i(null)},[s]),s}function zce(t){let{animateLayoutChanges:e=Bce,attributes:n,disabled:r,data:o,getNewIndex:s=jce,id:i,strategy:a,resizeObserverConfig:l,transition:c=$ce}=t;const{items:d,containerId:u,activeIndex:h,disabled:f,disableTransforms:p,sortedRects:g,overIndex:b,useDragOverlay:v,strategy:x}=y.useContext(y4),w=Uce(r,f),k=d.indexOf(i),C=y.useMemo(()=>({sortable:{containerId:u,index:k,items:d},...o}),[u,o,k,d]),S=y.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:T,node:E,isOver:M,setNodeRef:_}=p4({id:i,data:C,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:P,activatorEvent:L,activeNodeRect:V,attributes:F,setNodeRef:z,listeners:Z,isDragging:N,over:B,setActivatorNodeRef:H,transform:X}=mce({id:i,data:C,attributes:{...Hce,...n},disabled:w.draggable}),G=ele(_,z),Q=!!P,pe=Q&&!p&&Ju(h)&&Ju(b),Fe=!v&&N,Ke=Fe&&pe?X:null,Oe=pe?Ke??(a??x)({rects:g,activeNodeRect:V,activeIndex:h,overIndex:b,index:k}):null,Ye=Ju(h)&&Ju(b)?s({id:i,items:d,activeIndex:h,overIndex:b}):k,$e=P==null?void 0:P.id,le=y.useRef({activeId:$e,items:d,newIndex:Ye,containerId:u}),en=d!==le.current.items,Pt=e({active:P,containerId:u,isDragging:N,isSorting:Q,id:i,index:k,items:d,newIndex:le.current.newIndex,previousItems:le.current.items,previousContainerId:le.current.containerId,transition:c,wasDragging:le.current.activeId!=null}),tn=Fce({disabled:!Pt,index:k,node:E,rect:T});return y.useEffect(()=>{Q&&le.current.newIndex!==Ye&&(le.current.newIndex=Ye),u!==le.current.containerId&&(le.current.containerId=u),d!==le.current.items&&(le.current.items=d)},[Q,Ye,u,d]),y.useEffect(()=>{if($e===le.current.activeId)return;if($e!=null&&le.current.activeId==null){le.current.activeId=$e;return}const Rn=setTimeout(()=>{le.current.activeId=$e},50);return()=>clearTimeout(Rn)},[$e]),{active:P,activeIndex:h,attributes:F,data:C,rect:T,index:k,newIndex:Ye,items:d,isOver:M,isSorting:Q,isDragging:N,listeners:Z,node:E,overIndex:b,over:B,setNodeRef:G,setActivatorNodeRef:H,setDroppableNodeRef:_,setDraggableNodeRef:z,transform:tn??Oe,transition:It()};function It(){if(tn||en&&le.current.newIndex===k)return Vce;if(!(Fe&&!Am(L)||!c)&&(Q||Pt))return Os.Transition.toString({...c,property:b4})}}function Uce(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function rp(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Wce=[we.Down,we.Right,we.Up,we.Left],Gce=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:a}}=e;if(Wce.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const h=o.get(u.id);if(h)switch(t.code){case we.Down:r.top<h.top&&l.push(u);break;case we.Up:r.top>h.top&&l.push(u);break;case we.Left:r.left>h.left&&l.push(u);break;case we.Right:r.left<h.left&&l.push(u);break}});const c=ble({collisionRect:r,droppableRects:o,droppableContainers:l});let d=ZN(c,"id");if(d===(i==null?void 0:i.id)&&c.length>1&&(d=c[1].id),d!=null){const u=s.get(n.id),h=s.get(d),f=h?o.get(h.id):null,p=h==null?void 0:h.node.current;if(p&&f&&u&&h){const b=_m(p).some((S,T)=>a[T]!==S),v=v4(u,h),x=qce(u,h),w=b||!v?{x:0,y:0}:{x:x?r.width-f.width:0,y:x?r.height-f.height:0},k={x:f.left,y:f.top};return w.x&&w.y?k:kd(k,w)}}}};function v4(t,e){return!rp(t)||!rp(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function qce(t,e){return!rp(t)||!rp(e)||!v4(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Kce="_selectorCard_1n734_2",Yce="_selected_1n734_6",Jce="_closeIcon_1n734_16",Zce="_resultInput_1n734_20",Xce="_addCustomField_1n734_24",Qce="_selector_1n734_2",ede="_listItemMeta_1n734_35",tde="_item_1n734_42",ho={selectorCard:Kce,selected:Yce,closeIcon:Jce,resultInput:Zce,addCustomField:Xce,selector:Qce,listItemMeta:ede,item:tde},nde="_blurContainer_dfxrr_2",rde="_visible_dfxrr_18",ode="_container_dfxrr_22",gy={blurContainer:nde,visible:rde,container:ode};function w4({children:t,visible:e,className:n,onBlur:r}){const[o,s]=y.useState(e);y.useEffect(()=>{e&&s(!0)},[e]);const i=Tm({translateX:e?-100:0,opacity:e?1:0,onRest:()=>{e||s(!1)}});return!e&&!o?null:St.createPortal(m.jsx(wd.div,{className:re(gy.blurContainer,e&&gy.visible),onClick:r,style:{visibility:o?"visible":"hidden",opacity:i.opacity},children:m.jsx(wd.div,{className:re(gy.container,n),onClick:a=>a.stopPropagation(),style:{transform:i.translateX.to(a=>`translateY(${a}%)`),opacity:i.opacity},children:t})}),document.getElementById("drawer-global-root"))}const sde="_customeFieldInput_1ehjn_2",ide="_addFieldButtonContainer_1ehjn_12",ade="_descriptionInput_1ehjn_21",lde="_descriptionContainer_1ehjn_25",cde="_marginBottom_1ehjn_31",ts={customeFieldInput:sde,addFieldButtonContainer:ide,descriptionInput:ade,descriptionContainer:lde,marginBottom:cde},dde=({className:t,onSubmit:e})=>{const n=Rt(),[r,o]=I.useState({icon:"octicon:goal-24",selectedIconColor:"#607d8b",type:"metric",title:"",unit:"",description:""}),{addRecordField:s}=yp();return m.jsxs("div",{className:re(t),children:[m.jsx(st.ItemMeta,{className:ts.marginBottom,logo:m.jsx(Y,{width:24,icon:"solar:text-field-linear"}),title:n.formatMessage({defaultMessage:"Field Name",id:"label-record-custom.name.label"}),description:n.formatMessage({defaultMessage:"Ex: Push-ups, Squats",id:"label-record-custom.name.description"}),rightComponent:m.jsx(Dr,{value:r.title,onChange:i=>o({...r,title:i.target.value}),border:"dash",className:ts.customeFieldInput})}),m.jsxs("div",{className:ts.descriptionContainer,children:[m.jsx(st.ItemMeta,{logo:m.jsx(Y,{value:r.unit,width:24,icon:"solar:info-circle-bold"}),title:n.formatMessage({defaultMessage:"Description",id:"label-record-custom.description.label"})}),m.jsx(Dr,{border:"dash",placeholder:"More information of the field",className:ts.descriptionInput,onChange:i=>o({...r,description:i.target.value})})]}),m.jsx(st.ItemMeta,{className:ts.marginBottom,logo:m.jsx(Y,{value:r.unit,width:24,icon:"lsicon:number-filled"}),title:n.formatMessage({defaultMessage:"Field Unit",id:"label-record-custom.unit.label"}),description:n.formatMessage({defaultMessage:"Ex: minutes, hours, reps, kg",id:"label-record-custom.unit.description"}),rightComponent:m.jsx(Dr,{border:"dash",onChange:i=>o({...r,unit:i.target.value}),className:ts.customeFieldInput})}),m.jsx(st.ItemMeta,{className:ts.marginBottom,logo:m.jsx(Y,{width:24,icon:"solar:box-minimalistic-outline"}),title:n.formatMessage({defaultMessage:"Type",id:"label-record-custom.type.label"}),rightComponent:m.jsx(Oy,{isButton:!0,value:r.type,onChangeValue:i=>o({...r,type:i}),options:[{label:"Metric",value:"metric"},{label:"Note",value:"note"}]})}),m.jsx(WN,{selectedIcon:r.icon,setSelectedIcon:i=>o({...r,icon:i}),selectedColor:r.selectedIconColor,setSelectedColor:i=>o({...r,selectedIconColor:i})}),m.jsx("div",{className:ts.addFieldButtonContainer,children:m.jsx(dt,{block:!0,size:"lg",type:"primary",onClick:()=>{const i=s(r);e==null||e(i)},children:n.formatMessage({defaultMessage:"Save",id:"label-record-custom.save"})})})]})},ude="_container_1bkp1_2",hde="_drawer_1bkp1_6",fde="_header_1bkp1_14",yy={container:ude,drawer:hde,header:fde},pde=({visible:t,onClose:e,onSubmit:n})=>{const r=Rt();return m.jsxs(w4,{className:yy.drawer,visible:t,onBlur:e,children:[m.jsxs("div",{className:yy.header,children:[m.jsx(ne.Title,{noMargin:!0,level:3,children:r.formatMessage({defaultMessage:"Add more field to record",id:"label-record-custom.title"})}),m.jsx(Y,{width:32,icon:"material-symbols:close-rounded",onClick:e})]}),m.jsx(dde,{className:yy.container,onSubmit:n})]})},mde="_groupContainer_n258c_2",gde="_groupOver_n258c_12",yde="_groupTitle_n258c_17",by={groupContainer:mde,groupOver:gde,groupTitle:yde},bde=({id:t,title:e,items:n,children:r})=>{const{setNodeRef:o,isOver:s}=p4({id:t,data:{type:"Group",items:n}});return m.jsxs("div",{ref:o,className:re(by.groupContainer,s&&by.groupOver),children:[m.jsx(ne.Title,{noMargin:!0,level:4,className:by.groupTitle,children:e}),m.jsx(Lce,{items:n,strategy:Nce,children:r})]})},vde=({id:t,children:e,isDragging:n})=>{const{attributes:r,listeners:o,setNodeRef:s,transform:i,transition:a}=zce({id:t}),l={transform:Os.Transform.toString(i),transition:a,opacity:n?0:1};return m.jsx("div",{ref:s,style:l,...r,...o,children:e})},wde=({selectedRecords:t=[],setSelectedRecords:e,fieldGroups:n,setFieldGroups:r})=>{const{getAllRecordFields:o}=yp(),s=Rt(),[i,a]=I.useState(!1),[l,c]=I.useState(o()),[d,u]=I.useState(null);I.useEffect(()=>{c(o())},[]);const h=ple(cT(jw),cT(Ow,{coordinateGetter:Gce})),f=k=>{if(k in n)return k;for(const C of n)if(C.fields.includes(k))return C.id;return null},p=k=>l.find(C=>C.id===k),g=k=>{u(k.active.id)},b=k=>{var M,_;const{active:C,over:S}=k;if(u(null),!S)return;const T=f(C.id),E=f(S.id);if(T&&E&&T===E){const P=[...n],L=P.findIndex(V=>V.id===T);if(L!==-1){const V=P[L].fields.indexOf(C.id),F=P[L].fields.indexOf(S.id);P[L].fields=$w(P[L].fields,V,F)}r(P)}else if(T&&E&&T!==E){const P=[...n],L=P.findIndex(F=>F.id===T),V=P.findIndex(F=>F.id===E);if(L!==-1&&V!==-1){const[F]=P[L].fields.splice(P[L].fields.indexOf(C.id),1),z=P[V].fields.indexOf(S.id);z!==-1?P[V].fields.splice(z,0,F):P[V].fields.push(F)}r(P)}else if(T&&((_=(M=S.data)==null?void 0:M.current)==null?void 0:_.type)==="Group"&&T!==S.id){const P=[...n],L=P.findIndex(F=>F.id===T),V=P.findIndex(F=>F.id===S.id);if(L!==-1&&V!==-1){const[F]=P[L].fields.splice(P[L].fields.indexOf(C.id),1);P[V].fields.push(F)}r(P)}},v=({id:k})=>{const C=new Set([...t,k]);e([...C]);const S=[...n];S.some(E=>E.fields.includes(k))||r([...S,{id:sn(),title:s.formatMessage({id:"label-group",defaultMessage:"Group"})+` ${S.length+1}`,fields:[k]}])},x=k=>{e(t.filter(S=>S!==k));const C=n.map(S=>({...S,fields:S.fields.filter(T=>T!==k)})).filter(S=>S.fields.length>0);r(C)},w=d?p(d):null;return console.log({recordFields:l}),m.jsxs("div",{children:[m.jsx(pde,{visible:i,onSubmit:k=>{a(!1),c([...l,k]),v({id:k.id})},onClose:()=>a(!1)}),m.jsx(Qae,{options:l.map(k=>({...k,label:k.title,value:k.id})),classes:{container:ho.selector},renderInput:()=>t.length===0?m.jsx(ne.Text,{children:"Record & Metric"}):m.jsx("div",{className:ho.resultInput,children:t.map(k=>{const C=l.find(S=>S.id===k);return m.jsxs("div",{className:ho.selected,children:[m.jsx(ne.Text,{children:C==null?void 0:C.title}),m.jsx(Y,{icon:"material-symbols:close-rounded",width:16,height:16,className:ho.closeIcon,onClick:()=>x(k)})]},k)})}),renderOptionFooter:({close:k})=>m.jsx("div",{onClick:()=>{a(!0),k()},className:ho.addCustomField,children:m.jsx(ne.Text,{children:s.formatMessage({id:"label-add-custom-field",defaultMessage:"Add custom field"})})}),onChange:({id:k},{close:C})=>{C(),v({id:k})},renderOption:k=>m.jsx(st.ItemMeta,{className:ho.selectorCard,logo:m.jsx(Y,{width:24,icon:k.icon}),title:k.title,description:k.description})}),m.jsxs(hce,{sensors:h,collisionDetection:yle,onDragStart:g,onDragEnd:b,children:[m.jsx("div",{className:ho.groupsContainer,children:n.map(k=>m.jsx(bde,{id:k.id,title:k.title,items:k.fields,children:k.fields.map(C=>{const S=p(C);return S?m.jsx(vde,{id:C,children:m.jsx(st.ItemMeta,{logo:m.jsx(Y,{width:24,icon:"ci:drag-vertical"}),className:ho.item,title:S.title,description:S.description})},C):null})},k.id))}),m.jsx(Rce,{children:d&&w?m.jsx(st.ItemMeta,{className:ho.listItemMeta,logo:m.jsx(Y,{width:24,icon:"ci:drag-vertical"}),title:w.title,description:w.description,style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.15)",padding:"15px",width:"300px"}}):null})]})]})},xde="_menu_so4vj_2",kde="_input_so4vj_7",Cde="_container_so4vj_27",Sde="_submitButton_so4vj_31",Tde="_deleteButton_so4vj_48",Ede="_footer_so4vj_63",Mde="_footerCenter_so4vj_74",ns={menu:xde,input:kde,container:Cde,submitButton:Sde,deleteButton:Tde,footer:Ede,footerCenter:Mde},x4=({initialValues:t,onSubmit:e,onClickDeleteButton:n})=>{const[r,o]=I.useState(t),{selectedRecords:s,checklistText:i,weeklyHobbies:a,startedAt:l,selectedIcon:c,selectedColor:d,fieldGroups:u}=r,h=k=>{o(C=>({...C,selectedRecords:k}))},f=k=>{o(C=>({...C,checklistText:k}))},p=k=>{o(C=>({...C,weeklyHobbies:k}))},g=k=>{o(C=>({...C,startedAt:k}))},b=k=>{o(C=>({...C,selectedIcon:k}))},v=k=>{o(C=>({...C,selectedColor:k}))},x=k=>{o(C=>({...C,fieldGroups:k}))},w=Rt();return m.jsxs("div",{className:ns.container,children:[m.jsxs(Yn,{className:ns.container,children:[m.jsx("div",{className:ns.menu}),m.jsx(wre,{placeholder:w.formatMessage({id:"CreateChecklist.label-create-checklist-input-placeholder",defaultMessage:"Write your task here"}),className:ns.input,maxRows:3,autoFocus:!0,onChange:k=>{f(k.currentTarget.value)},value:i}),m.jsx(Nae,{values:a,setValues:p}),m.jsx(ac,{}),m.jsx(WN,{selectedIcon:c,setSelectedIcon:b,selectedColor:d,setSelectedColor:v}),m.jsx(ac,{}),m.jsx(Qse,{date:l,setDate:g}),m.jsx(ac,{}),m.jsx(wde,{selectedRecords:s,setSelectedRecords:h,fieldGroups:u,setFieldGroups:x})]}),m.jsx("div",{className:ns.footer,children:m.jsxs("div",{className:ns.footerCenter,children:[n&&m.jsx(dt,{onClick:n,className:ns.deleteButton,children:w.formatMessage({id:"CreateChecklist.label-delete",defaultMessage:"DELETE"})}),m.jsx(dt,{type:"primary",className:ns.submitButton,onClick:()=>{const k=u.filter(C=>C.fields.length>0);e({...r,fieldGroups:k})},children:w.formatMessage({id:"CreateChecklist.label-submit",defaultMessage:"SUBMIT"})})]})})]})},k4=({weeklyHobbies:t})=>{if(!(!t||t.length===0))return t.length===7?{startedAt:new Date().toISOString(),dayOfWeek:"*",minute:"0",hour:"8",dayOfMonth:"*",month:"*"}:{startedAt:new Date().toISOString(),minute:"0",hour:"8",dayOfMonth:"*",month:"*",dayOfWeek:t.map(e=>{switch(e){case ae.Mon:return"1";case ae.Tue:return"2";case ae.Wed:return"3";case ae.Thu:return"4";case ae.Fri:return"5";case ae.Sat:return"6";case ae.Sun:return"0"}}).join(",")}},Ade=()=>{const t=new Date;return[ae.Sun,ae.Mon,ae.Tue,ae.Wed,ae.Thu,ae.Fri,ae.Sat][t.getDay()]},_de=()=>{const{addChecklistTemplate:t}=Es(),{addChecklist:e}=pp(),n=xr(),r=({startedAt:o,selectedRecords:s,selectedColor:i,selectedIcon:a,checklistText:l,weeklyHobbies:c,fieldGroups:d})=>{const u=k4({weeklyHobbies:c}),{id:h}=t({title:l,repeat:u,avatar:{type:"icon",name:a,color:i},records:s,fieldGroups:d});u||e({title:l,checklistTemplateId:h,startedAt:o,endedAt:new Date(new Date(o).setHours(23,59,59,999)).toISOString()}),n("/")};return m.jsxs(m.Fragment,{children:[m.jsx(Xa,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Create Task"}),onClickLeftButton:()=>n("/")}),m.jsx(x4,{onSubmit:r,initialValues:{selectedRecords:[],checklistText:"",weeklyHobbies:[Ade()],startedAt:new Date().toISOString().split("T")[0],selectedIcon:"material-symbols:checklist",selectedColor:"#607d8b",fieldGroups:[]}})]})};function Rde(t){return m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...t,children:m.jsx("g",{id:"warning_amber_24px",children:m.jsx("path",{id:"icon/alert/warning_amber_24px",fillRule:"evenodd",clipRule:"evenodd",d:"M4.46999 20.5037C2.93001 20.5037 1.96999 18.8337 2.74001 17.5037L10.27 4.49374C11.04 3.16375 12.96 3.16375 13.73 4.49374L21.26 17.5037C22.03 18.8337 21.07 20.5037 19.53 20.5037H4.46999ZM19.53 18.5037L12 5.49374L4.46999 18.5037H19.53ZM11 10.5037V12.5037C11 13.0537 11.45 13.5037 12 13.5037C12.55 13.5037 13 13.0537 13 12.5037V10.5037C13 9.95376 12.55 9.50375 12 9.50375C11.45 9.50375 11 9.95376 11 10.5037ZM13 17.5037V15.5037H11V17.5037H13Z"})})})}const Pde="_container_1avzj_1",Ide={container:Pde};function Dde(){return m.jsx("hr",{className:Ide.container})}const Nde="_overlay_1ach8_2",Ode="_container_1ach8_17",Lde="_content_1ach8_29",jde="_footer_1ach8_34",Bde="_header_1ach8_44",$de="_logo_1ach8_49",Vde="_icon_1ach8_64",Hde="_title_1ach8_70",Fde="_primaryButton_1ach8_74",zde="_secondaryButton_1ach8_81",Ar={overlay:Nde,container:Ode,content:Lde,footer:jde,header:Bde,logo:$de,icon:Vde,title:Hde,primaryButton:Fde,secondaryButton:zde};function C4({visible:t,primaryButtonText:e,secondaryButtonText:n,primaryButtonOnClick:r,secondaryButtonClick:o,content:s,title:i}){return t?m.jsx("div",{className:Ar.overlay,children:m.jsxs("div",{className:Ar.container,children:[m.jsxs("div",{className:Ar.header,children:[m.jsx("div",{className:Ar.logo,children:m.jsx(Rde,{className:Ar.icon})}),m.jsx(ne.Title,{className:Ar.title,level:3,noMargin:!0,children:i})]}),m.jsx(Dde,{}),m.jsx("div",{className:Ar.content,children:s}),m.jsxs("div",{className:Ar.footer,children:[m.jsx(dt,{size:"lg",type:"ghost",className:Ar.secondaryButton,onClick:o,children:n}),m.jsx(dt,{onClick:r,size:"lg",className:Ar.primaryButton,children:e})]})]})}):null}const Ude=t=>t!=null&&t.dayOfWeek?t.dayOfWeek==="*"?[ae.Sun,ae.Mon,ae.Tue,ae.Wed,ae.Thu,ae.Fri,ae.Sat]:t.dayOfWeek.split(",").map(e=>{switch(e){case"0":return ae.Sun;case"1":return ae.Mon;case"2":return ae.Tue;case"3":return ae.Wed;case"4":return ae.Thu;case"5":return ae.Fri;case"6":return ae.Sat;default:return ae.Sun}}):[new Date().getDay()],Wde=()=>{var f,p,g;const{checklistTemplate:t,deleteChecklistTemplate:e}=Es(),{id:n}=ZE(),r=t[n||""],{updateChecklistTemplate:o}=Es(),s=xr(),i=Rt(),a=({startedAt:b,selectedRecords:v,selectedColor:x,selectedIcon:w,checklistText:k,weeklyHobbies:C,fieldGroups:S})=>{const T=k4({weeklyHobbies:C});o({id:r.id,records:v,title:k,repeat:T,avatar:{type:"icon",name:w,color:x},fieldGroups:S}),s("/")},[l,c]=I.useState(!1),d=()=>{c(!0)},u=()=>{n&&(e(n),c(!1),s("/"))},h=()=>{c(!1)};return r?m.jsxs(m.Fragment,{children:[m.jsx(Xa,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Edit Task"}),onClickLeftButton:()=>s("/")}),m.jsx(C4,{visible:l,title:i.formatMessage({id:"EditChecklistTemplate.delete-confirm-title",defaultMessage:"Delete Checklist Template"}),primaryButtonText:i.formatMessage({id:"EditChecklistTemplate..delete-confirm-ok",defaultMessage:"Delete"}),primaryButtonOnClick:u,secondaryButtonText:i.formatMessage({id:"EditChecklistTemplate..delete-confirm-cancel",defaultMessage:"Cancel"}),secondaryButtonClick:h,content:m.jsx(ne.Text,{children:i.formatMessage({id:"ChecklistTemplate.delete-confirm-message",defaultMessage:"Are you sure you want to delete this checklist template? This action cannot be undone."})})}),m.jsx(x4,{onClickDeleteButton:d,onSubmit:a,initialValues:{selectedRecords:r.records,checklistText:r.title,weeklyHobbies:Ude(r.repeat),startedAt:(f=r==null?void 0:r.repeat)!=null&&f.startedAt?new Date(r.repeat.startedAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],selectedIcon:(p=r==null?void 0:r.avatar)==null?void 0:p.name,selectedColor:((g=r==null?void 0:r.avatar)==null?void 0:g.color)||"#607d8b",fieldGroups:r.fieldGroups}})]}):null},Gde="_container_1czko_1",qde={container:Gde},Kde=()=>{const{chartData:t,updateChartDate:e}=F0();I.useEffect(()=>{e()},[]);const n={stroke:{curve:"smooth"},fill:{type:"gradient"},xaxis:{categories:t==null?void 0:t.categories}},r=[{name:"weight",data:t==null?void 0:t.weights},{name:"belly's size",data:t==null?void 0:t.bellySizes}];return!t||!t.categories||(t==null?void 0:t.categories.length)===0||(t==null?void 0:t.weights.length)===0||(t==null?void 0:t.bellySizes.length)===0?null:m.jsxs(Yn,{className:qde.container,children:[m.jsx(ne.Title,{level:3,noMargin:!0,children:"Timeline"}),m.jsx(aN,{options:n,series:r,type:"line"})]})},Yde="_header_1oykc_1",Jde="_iconSuccess_1oykc_7",Zde="_numberInput_1oykc_13",Xde="_kgText_1oykc_21",Qde="_titleAnswer_1oykc_27",eue="_iconAnswerContainer_1oykc_33",tue="_inputContainer_1oykc_37",nue="_questionTitle_1oykc_44",rue="_divider_1oykc_48",oue="_editFooter_1oykc_54",Pe={header:Yde,iconSuccess:Jde,numberInput:Zde,kgText:Xde,titleAnswer:Qde,iconAnswerContainer:eue,inputContainer:tue,questionTitle:nue,divider:rue,editFooter:oue},sue="_player_109l2_14",iue="_currentContainer_109l2_19",aue="_icon_109l2_33",Xu={player:sue,currentContainer:iue,icon:aue},lue=t=>new Date(t.getTime()-24*60*60*1e3),cue=t=>new Date(t.getTime()+24*60*60*1e3),due=({date:t,onDateChange:e,getText:n})=>{const r=new Date(t).toLocaleDateString()===new Date().toLocaleDateString();return m.jsxs("div",{className:Xu.player,children:[m.jsx(Y,{onClick:()=>e(lue(t)),width:30,icon:"basil:skip-prev-outline",className:Xu.icon}),m.jsx("div",{className:Xu.currentContainer,onClick:()=>e(new Date),children:n({isToday:r})}),m.jsx(Y,{onClick:()=>e(cue(t)),width:30,icon:"basil:skip-next-outline",className:Xu.icon})]})},uue="_container_fgz2s_1",hue={container:uue},CT=()=>{const[t,e]=I.useState(new Date),{updateCurrentBodyMetric:n}=F0(),r=o=>{e(o),n({date:o})};return m.jsx("div",{className:hue.container,children:m.jsx(due,{date:t,onDateChange:r,getText:({isToday:o})=>o?"Today":new Date(t).toLocaleDateString()})})},fue=()=>{const[t,e]=I.useState(40),[n,r]=I.useState(50),{addBodyMetric:o,currentBodyMetric:s,currentDay:i}=F0(),[a,l]=I.useState(!!s);I.useEffect(()=>{l(!!s)},[s]),I.useEffect(()=>{s&&(e(s.weight),r(s.bellySize))},[s]);const c=Rt();return a&&s?m.jsxs(Yn,{children:[m.jsx(CT,{}),m.jsxs("div",{className:Pe.header,children:[m.jsx(Y,{width:100,color:"rgba(16,154,0,0.16)",icon:"ion:checkmark-done-circle-outline",className:Pe.iconSuccess}),m.jsx(ne.Title,{level:3,className:Pe.questionTitle,children:c.formatMessage({id:"pregnant-weight-record.label-recorded",defaultMessage:"You've already recorded your weight and belly's size."})})]}),m.jsx("div",{className:Pe.divider}),m.jsxs("div",{className:Pe.inputContainer,children:[m.jsxs("div",{className:Pe.iconAnswerContainer,children:[m.jsx(Y,{width:24,icon:"icon-park-outline:industrial-scales"}),m.jsx(ne.Text,{className:Pe.titleAnswer,children:"Weight"})]}),m.jsx(Dr,{type:"number",readOnly:!0,className:Pe.numberInput,value:s.weight,step:"0.01",min:20,max:120}),m.jsx(ne.Text,{className:Pe.kgText,children:"Kg"})]}),m.jsxs("div",{className:Pe.inputContainer,children:[m.jsxs("div",{className:Pe.iconAnswerContainer,children:[m.jsx(Y,{width:24,icon:"twemoji:straight-ruler"}),m.jsx(ne.Text,{className:Pe.titleAnswer,children:"Belly's Size"})]}),m.jsx(Dr,{type:"number",readOnly:!0,className:Pe.numberInput,value:s.bellySize,step:"0.01",min:20,max:120}),m.jsx(ne.Text,{className:Pe.kgText,children:"Cm"})]}),m.jsx("div",{className:Pe.editFooter,children:m.jsx(dt,{onClick:()=>{l(!1)},children:"EDIT"})})]}):m.jsxs(Yn,{children:[m.jsx(CT,{}),m.jsx("div",{children:m.jsx(ne.Title,{level:3,className:Pe.questionTitle,children:c.formatMessage({id:"pregnant-weight-record.label-pregnant-weight",defaultMessage:"What's your weight {{day}}? And how's your belly growing, mama?"},{day:new Date(i).toLocaleDateString()===new Date().toLocaleDateString()?"today":new Date(i).toLocaleDateString()})})}),m.jsx("div",{className:Pe.divider}),m.jsxs("div",{className:Pe.inputContainer,children:[m.jsxs("div",{className:Pe.iconAnswerContainer,children:[m.jsx(Y,{width:24,icon:"icon-park-outline:industrial-scales"}),m.jsx(ne.Text,{className:Pe.titleAnswer,children:"Weight"})]}),m.jsx(Dr,{type:"number",border:"dash",className:Pe.numberInput,onChange:d=>e(Number(d.target.value)),value:t,step:"0.01",min:20,max:120}),m.jsx(ne.Text,{className:Pe.kgText,children:"Kg"})]}),m.jsxs("div",{className:Pe.inputContainer,children:[m.jsxs("div",{className:Pe.iconAnswerContainer,children:[m.jsx(Y,{width:24,icon:"twemoji:straight-ruler"}),m.jsx(ne.Text,{className:Pe.titleAnswer,children:"Belly's Size"})]}),m.jsx(Dr,{type:"number",border:"dash",className:Pe.numberInput,value:n,onChange:d=>r(Number(d.target.value)),step:"0.01",min:20,max:120}),m.jsx(ne.Text,{className:Pe.kgText,children:"Cm"})]}),m.jsx(dt,{onClick:()=>{o({weight:t,bellySize:n,createdAt:i.toISOString()}),l(!0)},children:"SUBMIT"})]})},pue=()=>m.jsxs("div",{children:[m.jsx(fue,{}),m.jsx(Kde,{})]}),mue="_card_1reeb_1",gue="_checklistItem_1reeb_6",yue="_checklistTemplateContainer_1reeb_11",bue="_checklistBody_1reeb_16",vue="_text_1reeb_21",wue="_checkbox_1reeb_26",xue="_label_1reeb_31",kue="_enabled_1reeb_40",Cue="_footer_1reeb_45",Sue="_editIcon_1reeb_49",Tue="_deleteIcon_1reeb_60",Dn={card:mue,checklistItem:gue,checklistTemplateContainer:yue,checklistBody:bue,text:vue,checkbox:wue,label:xue,enabled:kue,footer:Cue,editIcon:Sue,deleteIcon:Tue},Eue=()=>{const{getRecommendChecklistTemplates:t,selectedChecklistTemplates:e,updateSelectedChecklistTemplate:n,deleteChecklistTemplate:r}=Es(),o=Rt(),s=xr(),[i,a]=I.useState(!1),[l,c]=I.useState(null),d=p=>{var v;const g=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],b=((v=p==null?void 0:p.dayOfWeek)==null?void 0:v.split(","))||[];return b.includes("*")?[{enabled:!0,text:o.formatMessage({id:"PregnantIntro.repeat.everyday",defaultMessage:"Every day"})}]:[0,1,2,3,4,5,6].map(x=>({day:x,enabled:b.includes(x.toString())||b.includes("*"),text:o.formatMessage({id:`PregnantIntro.repeat.${x}`,defaultMessage:g[x]})}))},u=p=>{c(p),a(!0)},h=()=>{l&&(r(l),a(!1),c(null))},f=()=>{a(!1),c(null)};return m.jsxs(m.Fragment,{children:[m.jsx(Xa,{renderLeftComponent:()=>o.formatMessage({id:"ChecklistTemplatePageInfo.back",defaultMessage:"Back"})}),m.jsx(Yn,{className:Dn.card,children:m.jsxs(m.Fragment,{children:[m.jsx("p",{className:Dn.label,children:o.formatMessage({id:"PregnantIntro.checklists-management",defaultMessage:"Checklist Template Management"})}),t().map(({id:p,title:g,avatar:b,repeat:v})=>m.jsxs("div",{className:Dn.checklistTemplateContainer,children:[m.jsxs("div",{className:Dn.checklistItem,children:[m.jsx(Y,{color:b.color||"#8A8A8A",width:32,height:32,icon:b.name}),m.jsx("div",{className:Dn.checklistBody,children:m.jsx(ne.Text,{className:Dn.text,children:g})}),m.jsx(Y,{className:Dn.editIcon,width:24,height:24,icon:"material-symbols:edit-outline",onClick:()=>s(`/edit-checklist/${p}`)}),m.jsx(Y,{className:Dn.deleteIcon,width:24,height:24,icon:"material-symbols:delete-outline",onClick:()=>u(p)}),m.jsx(yw,{checked:e.includes(p),onChange:x=>{const w=x.target.checked;n(w?[...e,p]:e.filter(k=>k!==p))},className:Dn.checkbox})]}),m.jsx("div",{className:Dn.footer,children:d(v).map(({enabled:x,text:w})=>m.jsx(ne.Text,{className:re(Dn.text,{[Dn.enabled]:x}),children:w},w))})]},p))]})}),m.jsx(C4,{visible:i,title:o.formatMessage({id:"ChecklistTemplate.delete-confirm-title",defaultMessage:"Delete Checklist Template"}),primaryButtonText:o.formatMessage({id:"ChecklistTemplate.delete-confirm-ok",defaultMessage:"Delete"}),primaryButtonOnClick:h,secondaryButtonText:o.formatMessage({id:"ChecklistTemplate.delete-confirm-cancel",defaultMessage:"Cancel"}),secondaryButtonClick:f,content:m.jsx(ne.Text,{children:o.formatMessage({id:"ChecklistTemplate.delete-confirm-message",defaultMessage:"Are you sure you want to delete this checklist template? This action cannot be undone."})})})]})},Mue=JSON.parse(`[{"identify_key":"the_golden_heart","name":"The Golden Heart","detail":"In a small village nestled between rolling hills and a dense forest, there lived a young girl named Lily. Unlike other children who spent their days playing games, Lily spent her time helping others. She would carry water for the elderly, gather firewood for widows, and share her lunch with those who had none.\\n\\nOne particularly harsh winter, when food was scarce and the cold was unbearable, Lily noticed that many villagers were suffering. Despite having little herself, she decided to venture into the forest to find food and supplies for everyone. The forest was known to be dangerous, especially in winter, but Lily's heart was set on helping others.\\n\\nAs she wandered deeper into the forest, she came across an injured fox caught in a hunter's trap. While others might have passed by, Lily stopped to help. She carefully freed the fox, bandaged its wound, and shared her last piece of bread with it. To her surprise, the fox spoke to her in a gentle voice.\\n\\n'I am the Guardian of the Forest,' the fox said. 'Your kindness has touched my heart. I will help you find what you seek.' The fox led Lily to a hidden grove where magical plants grew year-round. There, she found enough food and medicinal herbs to help the entire village.\\n\\nBut the fox had one more gift. It touched Lily's chest with its paw, and her heart began to glow with a golden light. 'This is the mark of true kindness,' the fox explained. 'As long as you continue to help others, this light will guide you and protect you.'\\n\\nLily returned to the village with the supplies, and her golden heart became a beacon of hope. The villagers, inspired by her selflessness, began to help each other more. The village flourished, and Lily's story spread far and wide, teaching everyone that true wealth lies not in gold or possessions, but in the kindness we show to others.\\n\\nYears passed, and Lily grew into a wise woman. Her golden heart continued to glow, becoming brighter with each act of kindness she performed. The village became known as the Village of the Golden Heart, a place where people lived in harmony and helped one another without hesitation.","lesson":"True wealth and happiness come from helping others. Kindness is a gift that grows stronger the more you share it, and it has the power to transform not just individuals, but entire communities. When we put others before ourselves, we create a world where everyone can thrive."},{"identify_key":"the_patient_gardener","name":"The Patient Gardener","detail":"In a bustling city, there lived an old gardener named Mr. Chen. His small garden was the most beautiful in the neighborhood, filled with flowers that bloomed in perfect harmony. People often asked him his secret, but he would just smile and say, 'Patience and care.'\\n\\nOne spring, a young boy named Tom moved next door. He was eager to grow his own garden and asked Mr. Chen for help. The old gardener gave him some seeds and basic instructions, but Tom wanted results immediately. He watered the seeds too much, dug them up to check their progress, and became frustrated when nothing grew.\\n\\nMr. Chen watched quietly, then invited Tom to help in his garden. Day by day, he taught the boy about the importance of patience. 'Plants, like people, need time to grow,' he explained. 'You cannot rush nature.'\\n\\nAs the weeks passed, Tom learned to observe the subtle changes in his plants. He discovered that growth happens slowly, often when we're not looking. His garden began to flourish, and he found joy in the process of nurturing life.\\n\\nYears later, Tom became a successful botanist, known for his innovative methods. But he always credited Mr. Chen for teaching him the most important lesson: that true growth comes from patience and consistent care.","lesson":"Patience is a virtue that leads to lasting success. Growth takes time, and rushing the process often leads to failure. By learning to wait and nurture things properly, we can achieve beautiful results that last."},{"identify_key":"the_honest_merchant","name":"The Honest Merchant","detail":"In a busy marketplace, there was a merchant named Sarah who ran a small shop selling handmade crafts. While other merchants would sometimes exaggerate the quality of their goods to make sales, Sarah always told the truth about her products.\\n\\nOne day, a wealthy customer came to her shop looking for a special gift. Sarah showed her a beautiful vase, but honestly pointed out a small flaw that others might have hidden. The customer was surprised by her honesty and bought the vase anyway.\\n\\nWord of Sarah's integrity spread, and soon her shop became the most trusted in the market. People knew they could rely on her to tell the truth, even if it meant losing a sale. Her business grew steadily, while other merchants who had been dishonest found their customers leaving.\\n\\nYears later, when the market faced tough times, Sarah's shop remained strong. Her loyal customers supported her because they knew they could trust her completely. She became known as the merchant who proved that honesty is not just the best policy, but the most profitable one too.","lesson":"Honesty builds trust and lasting relationships. While it might seem easier to tell small lies for immediate gain, the truth always leads to better long-term success. Integrity is the foundation of any lasting business or relationship."},{"identify_key":"the_brave_little_turtle","name":"The Brave Little Turtle","detail":"In a peaceful pond, there lived a small turtle named Timmy. Unlike other turtles who spent their days basking in the sun, Timmy dreamed of exploring the world beyond the pond. The other turtles warned him about the dangers outside, but Timmy's curiosity grew stronger each day.\\n\\nOne morning, Timmy decided to venture beyond the pond's edge. The journey was difficult - he had to climb steep banks, cross a busy road, and face many challenges. But Timmy's determination never wavered.\\n\\nAlong the way, he met a lost baby bird who had fallen from its nest. Despite being small and slow, Timmy helped the bird find its way home. This act of kindness earned him the respect of the forest animals, who helped him on his journey.\\n\\nWhen Timmy finally reached the ocean, he discovered a whole new world of possibilities. He learned that being brave doesn't mean being fearless, but rather facing your fears and moving forward despite them. Timmy's adventures taught him that the world is full of wonder for those who dare to explore it.","lesson":"Courage is not the absence of fear, but the willingness to face it. By stepping out of our comfort zones, we discover new possibilities and grow stronger. Every challenge we overcome makes us more capable of handling future obstacles."},{"identify_key":"the_sharing_tree","name":"The Sharing Tree","detail":"In a magical forest, there stood an ancient tree that bore the most delicious fruits. The tree had a special rule: it would only give fruit to those who shared with others. Many animals came to the tree, but only those who understood the value of sharing received its gifts.\\n\\nOne summer, a young squirrel named Sammy discovered the tree. He was hungry and wanted to keep all the fruit for himself. But the tree remained silent, its branches empty. Sammy tried everything to get the fruit, but nothing worked.\\n\\nOne day, Sammy noticed a hungry bird nearby. Remembering his own hunger, he shared his last acorn with the bird. To his surprise, the tree suddenly bore fruit, and Sammy received more than he could have imagined.\\n\\nAs time passed, Sammy became known as the most generous squirrel in the forest. He learned that the more he shared, the more the tree gave him. The forest became a happier place as animals learned from Sammy's example, understanding that sharing brings abundance to everyone.","lesson":"Sharing creates abundance for everyone. When we give freely to others, we often receive more in return. Generosity creates a cycle of giving and receiving that benefits the entire community."},{"identify_key":"the_persistent_ant","name":"The Persistent Ant","detail":"In a vast garden, there lived a tiny ant named Andy. While other ants worked together in large groups, Andy preferred to work alone. He was determined to build the biggest anthill in the garden, despite being told it was impossible for one ant.\\n\\nDay after day, Andy carried grains of sand and small pebbles, building his hill one piece at a time. Other ants laughed at his efforts, but Andy never gave up. When storms came and destroyed his work, he simply started again.\\n\\nOne particularly bad storm left many ants homeless. Andy, who had built his hill strong and tall, opened his home to those in need. The other ants were amazed by his achievement and his kindness.\\n\\nThrough his persistence, Andy proved that even the smallest creature can achieve great things. His story taught the other ants that determination and hard work can overcome any obstacle, and that helping others makes success even sweeter.","lesson":"Persistence and determination can overcome any obstacle. Even the smallest efforts, when continued consistently, can lead to great achievements. Never underestimate the power of steady, focused work."},{"identify_key":"the_wise_owl","name":"The Wise Owl","detail":"In a tall oak tree, there lived an old owl named Oliver. He was known throughout the forest for his wisdom and ability to solve problems. Animals would come to him with their troubles, and he would listen carefully before offering advice.\\n\\nOne day, a group of young animals came to Oliver with a problem: they couldn't agree on how to share the forest's resources. Each wanted what was best for their own kind, leading to constant arguments.\\n\\nInstead of telling them what to do, Oliver asked them to look at the forest from his high perch. From there, they could see how everything was connected - how the trees provided homes for birds, how the streams watered the plants, and how each creature played a vital role.\\n\\nThe young animals realized that working together would benefit everyone. They learned that true wisdom comes from understanding how all parts of a system work together, and that cooperation leads to better solutions than competition.","lesson":"Wisdom comes from seeing the bigger picture and understanding how everything is connected. By working together and considering different perspectives, we can find solutions that benefit everyone."},{"identify_key":"the_grateful_rabbit","name":"The Grateful Rabbit","detail":"In a beautiful meadow, there lived a rabbit named Rosie who always found something to be grateful for, even on the darkest days. When it rained, she was thankful for the water that helped the flowers grow. When it was cold, she appreciated her warm burrow.\\n\\nOne winter, a terrible storm destroyed many animals' homes. While others complained about their losses, Rosie focused on what she still had - her family, her health, and her ability to help others.\\n\\nRosie organized the animals to help each other rebuild. She showed them how to find joy in small things, like a warm ray of sunshine or a shared meal. Her positive attitude inspired others to look for the good in every situation.\\n\\nAs the meadow recovered, the animals realized that Rosie's gratitude had helped them all survive the hard times. They learned that being thankful for what we have makes us stronger and helps us face life's challenges with hope.","lesson":"Gratitude transforms our perspective and helps us find joy in every situation. By focusing on what we have rather than what we lack, we can maintain hope and strength even in difficult times."},{"identify_key":"the_creative_caterpillar","name":"The Creative Caterpillar","detail":"In a colorful garden, there lived a caterpillar named Clara who saw the world differently from others. While other caterpillars followed the same paths and ate the same leaves, Clara explored new places and tried different foods.\\n\\nSome caterpillars thought Clara was strange, but she didn't mind. She believed that being different was a gift. She used her unique perspective to solve problems in new ways, like finding alternative food sources when the usual leaves were scarce.\\n\\nWhen it was time to build her cocoon, Clara chose a special spot that others had never considered. Her transformation was different too - she emerged as a butterfly with the most beautiful and unique pattern in the garden.\\n\\nClara's story taught the other creatures that being different is not a weakness but a strength. Her creativity and willingness to try new things led to discoveries that benefited the entire garden.","lesson":"Creativity and being different are strengths, not weaknesses. By embracing our uniqueness and thinking outside the box, we can find new solutions and create beautiful things that others might never imagine."},{"identify_key":"the_friendly_dragon","name":"The Friendly Dragon","detail":"In a kingdom surrounded by mountains, there lived a dragon named Drake. Unlike other dragons who hoarded gold and scared villagers, Drake was kind and helpful. He used his fire breath to light the town's lamps and his wings to create gentle breezes for the crops.\\n\\nAt first, the villagers were afraid of Drake, but he patiently showed them that he meant no harm. He helped build bridges, cleared paths through the mountains, and even babysat the children when their parents were busy.\\n\\nOne day, a group of knights came to slay the dragon, believing all dragons were dangerous. The villagers stood up for Drake, explaining how he had helped them. The knights were amazed to see a dragon who used his powers for good.\\n\\nDrake's story spread throughout the kingdom, teaching everyone that we shouldn't judge others by their appearance or what we've heard about them. True character is shown through actions, not stereotypes.","lesson":"Don't judge others by their appearance or what you've heard about them. Everyone deserves a chance to show their true character through their actions. Kindness and understanding can break down even the strongest prejudices."},{"identify_key":"the_determined_seed","name":"The Determined Seed","detail":"In a dry, rocky field, there was a tiny seed that dreamed of growing into a great tree. The other seeds told it that the soil was too poor and the conditions too harsh, but this seed refused to give up.\\n\\nDay after day, the seed pushed its roots deeper into the ground, searching for water and nutrients. It faced many challenges - scorching sun, strong winds, and hungry animals. But each obstacle made it stronger.\\n\\nYears passed, and the seed grew into a magnificent tree. Its roots had broken through the rocks, creating paths for water to flow. Its shade provided shelter for animals, and its leaves enriched the soil. The once-barren field became a thriving ecosystem.\\n\\nThe tree's story inspired other seeds to try growing in difficult places. They learned that challenges can be opportunities for growth, and that determination can transform even the harshest conditions into something beautiful.","lesson":"Challenges can be opportunities for growth. With determination and perseverance, we can overcome even the most difficult circumstances and create something beautiful that benefits others."},{"identify_key":"the_musical_stream","name":"The Musical Stream","detail":"In a quiet valley, there flowed a stream that had lost its song. Once, it had been known for its beautiful melodies as it danced over rocks and through meadows. But over time, it had become silent and still.\\n\\nOne day, a young girl named Melody came to the stream. She noticed its silence and decided to help it find its music again. She started by clearing away the fallen leaves and branches that had blocked its path. Then, she carefully placed small stones in patterns that would create gentle ripples.\\n\\nAs the water began to flow freely again, it started to make soft sounds. Melody added more stones, each placed with care to create different notes. Soon, the stream was singing a beautiful melody that echoed through the valley.\\n\\nThe stream's music attracted birds and animals, who added their own voices to the symphony. The valley became alive with sound, and people came from far and wide to hear the stream's song. Melody had shown that sometimes, all it takes is a little care and attention to bring back the music in our lives.","lesson":"Beauty and joy can be found in the simplest things. By taking care of our surroundings and adding our own creative touch, we can bring harmony and music to the world around us."},{"identify_key":"the_colorful_chameleon","name":"The Colorful Chameleon","detail":"In a vibrant jungle, there lived a chameleon named Charlie who was different from other chameleons. While his friends changed colors to blend in with their surroundings, Charlie loved to stand out with bright, bold colors.\\n\\nAt first, the other chameleons thought Charlie was strange. They believed that blending in was the only way to be safe. But Charlie showed them that being different could be beautiful and useful too.\\n\\nOne day, a group of lost butterflies flew into the jungle. They were tired and couldn't find their way home. Charlie used his bright colors to create a path of light through the dark jungle, guiding the butterflies to safety.\\n\\nThe other chameleons learned that sometimes, standing out and being different can help others. They began to appreciate their ability to change colors not just for hiding, but for creating beauty and helping those in need.","lesson":"Being different is a gift that can be used to help others. Sometimes, standing out and being unique is more valuable than blending in with the crowd."},{"identify_key":"the_dreaming_star","name":"The Dreaming Star","detail":"High in the night sky, there was a small star named Stella who had big dreams. While other stars were content to simply shine, Stella wanted to learn about the world below. She watched the Earth with wonder, curious about everything she saw.\\n\\nOne night, Stella noticed a little girl named Luna looking up at the stars. Luna was feeling sad and alone. Stella decided to shine extra bright, creating a special pattern of light just for Luna.\\n\\nLuna saw the star's special message and smiled. She started to write stories about the stars, imagining their adventures and dreams. Her stories brought joy to many children, and soon, people all over the world were looking up at the stars with wonder.\\n\\nStella learned that even though she couldn't visit Earth, she could still touch people's lives through her light. Her dreams of connecting with the world below came true in a way she never expected.","lesson":"Dreams can come true in unexpected ways. Even when we can't achieve our goals exactly as we planned, we can still make a difference and touch others' lives in meaningful ways."},{"identify_key":"the_helping_hands","name":"The Helping Hands","detail":"In a busy city, there was a small community garden where people from different backgrounds came together. Each person had their own plot, but they all shared tools and knowledge. The garden was a place of peace and cooperation.\\n\\nOne summer, a terrible storm damaged many of the garden plots. Some people lost their entire crops, while others had minor damage. Instead of focusing on their own losses, everyone came together to help each other rebuild.\\n\\nThey shared seeds, tools, and time. Those with undamaged plots offered space to those who had lost everything. They worked together to make the garden stronger than before, adding better drainage and wind protection.\\n\\nThe garden became a symbol of community strength. People learned that by helping others, they created a stronger, more resilient community. The garden flourished, and so did the friendships that grew there.","lesson":"Community strength comes from helping each other. When we work together and support one another, we can overcome any challenge and create something beautiful that benefits everyone."},{"identify_key":"the_wise_mountain","name":"The Wise Mountain","detail":"In a distant land, there stood an ancient mountain that had watched over the valley for thousands of years. The mountain had seen many changes - seasons coming and going, rivers changing course, and civilizations rising and falling.\\n\\nPeople would come to the mountain seeking wisdom, but the mountain never spoke. Instead, it taught through its presence. It showed that true strength comes from standing firm in the face of change, that beauty can be found in every season, and that perspective changes everything.\\n\\nOne day, a young shepherd named Kira came to the mountain, troubled by the changes in her village. She sat quietly, watching the mountain's shadow move across the valley. As she observed, she began to understand that change is natural and necessary.\\n\\nThe mountain taught Kira that wisdom comes from observation and patience. She returned to her village with a new understanding of how to face change with grace and strength.","lesson":"True wisdom comes from observation and patience. By learning to see the bigger picture and understanding that change is natural, we can face life's challenges with grace and strength."},{"identify_key":"the_dancing_clouds","name":"The Dancing Clouds","detail":"In the vast sky, there lived a group of clouds who loved to dance. They would swirl and twirl, creating beautiful patterns that delighted everyone who looked up. But one cloud, named Cirrus, was different. She preferred to stay still and watch the others dance.\\n\\nThe other clouds tried to convince Cirrus to join them, but she was afraid of making mistakes. She thought her movements wouldn't be as graceful as the others. One day, a strong wind came and forced all the clouds to move.\\n\\nTo her surprise, Cirrus discovered that she could dance too. Her movements were unique and beautiful in their own way. The other clouds were amazed by her style and began to incorporate her moves into their dances.\\n\\nThe sky became more beautiful than ever, with each cloud adding its own special touch to the dance. Cirrus learned that everyone has their own unique way of moving and that the beauty of dance comes from the combination of different styles.","lesson":"Everyone has their own unique talents and ways of expression. By embracing our individuality and sharing it with others, we can create something more beautiful than we could ever achieve alone."},{"identify_key":"the_healing_garden","name":"The Healing Garden","detail":"In a hospital courtyard, there was a neglected garden that had once been beautiful. The plants were wilted, the paths were overgrown, and no one visited anymore. But a young patient named Maya saw its potential.\\n\\nDespite being in a wheelchair, Maya started to care for the garden. She planted flowers that could grow in shade, added herbs with healing properties, and created paths that were accessible to everyone. Other patients began to help, each adding their own touch to the garden.\\n\\nAs the garden grew, it became a place of healing and hope. Patients would come to sit among the flowers, finding peace and strength in nature's beauty. Doctors noticed that patients who spent time in the garden recovered faster.\\n\\nThe garden taught everyone that healing comes in many forms. Sometimes, the act of creating something beautiful can be the best medicine of all.","lesson":"Healing can come from unexpected places. By creating beauty and nurturing life, we can bring hope and strength to ourselves and others."},{"identify_key":"the_singing_stones","name":"The Singing Stones","detail":"On a remote beach, there were special stones that could sing when the waves touched them. Each stone had its own unique sound, creating a beautiful symphony when the tide came in. But the stones were scattered and disorganized, their music chaotic.\\n\\nA young musician named Rio discovered the stones and decided to organize them. He spent days listening to each stone's sound, then arranged them in a pattern that created harmonious melodies. The stones' music became more beautiful than ever.\\n\\nPeople came from far and wide to hear the stones' song. They would sit on the beach, letting the music wash over them like the waves. The stones taught them that even the most ordinary things can create extraordinary beauty when they work together in harmony.","lesson":"Harmony comes from working together. When we organize our talents and work in concert with others, we can create something more beautiful than we could ever achieve alone."},{"identify_key":"the_light_bearer","name":"The Light Bearer","detail":"In a village that had lost its way, there lived a young girl named Lucia who carried a special lantern. The lantern's light was different from ordinary light - it could show people their true paths when they were lost.\\n\\nAt first, the villagers were afraid of the light. They had grown comfortable in their darkness and didn't want to see the truth. But Lucia was patient. She would sit with people, sharing her light gently until they were ready to see.\\n\\nOne by one, the villagers began to accept the light. They discovered new paths and possibilities they had never imagined. The village transformed, becoming a place of hope and growth.\\n\\nLucia's lantern taught everyone that sometimes, we need someone to show us the way, but we must be ready to see the light for ourselves.","lesson":"True guidance comes from within, but sometimes we need help to find our way. By being patient and gentle, we can help others discover their own path to light and truth."},{"identify_key":"the_whispering_wind","name":"The Whispering Wind","detail":"In a quiet valley, there was a special wind that could carry messages between people. It would whisper secrets, share stories, and bring comfort to those who were lonely. But the wind was shy and would only speak to those who truly listened.\\n\\nA young boy named Echo learned to listen to the wind. He would sit still for hours, hearing its stories and messages. The wind taught him about the valley's history, about the people who lived there, and about the importance of listening.\\n\\nEcho began to share the wind's messages with others. He helped people connect with each other, carrying their words and feelings through the valley. The community grew stronger as people learned to listen and understand each other better.\\n\\nThe wind's whispers taught everyone that true communication requires both speaking and listening, and that sometimes the most important messages are the ones we hear in the silence.","lesson":"True communication requires both speaking and listening. By learning to listen carefully, we can understand others better and create stronger connections in our community."}]`),Aue="_container_fe1o7_1",_ue="_header_fe1o7_7",ST={container:Aue,header:_ue},Rue=()=>{const[t,e]=fr("story_key",{story:{},seen:[]}),n=i=>{t.seen.includes(i)||e({...t,seen:[...t.seen,i]})},[r,o]=I.useState(""),s=i=>{o(r===i?"":i),n(i)};return m.jsx("div",{children:Mue.map(({name:i,detail:a,identify_key:l,lesson:c})=>{var d;return m.jsxs(Yn,{onClick:()=>{s(l)},className:ST.container,children:[m.jsxs("div",{className:ST.header,children:[m.jsx(ne.Title,{level:3,noMargin:!0,children:i}),m.jsx(ne.Text,{children:((d=t.seen)==null?void 0:d.includes(l))&&"Seen"})]}),r===l&&m.jsxs("div",{children:[m.jsx(ne.Title,{level:4,noMargin:!0,children:"Detail"}),m.jsx(ne.Paragraph,{children:a}),m.jsx(ne.Title,{level:4,noMargin:!0,children:"Lesson"}),m.jsx(ne.Paragraph,{children:c})]})]},l)})})},Pue=()=>null,Vw=y.createContext({});function Hw(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Fw=typeof window<"u",S4=Fw?y.useLayoutEffect:y.useEffect,Im=y.createContext(null),zw=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function T4(t){return typeof t=="object"&&t!==null}function Uw(t){return T4(t)&&"offsetHeight"in t}class Iue extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=Uw(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=o-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Due({children:t,isPresent:e,anchorX:n}){const r=y.useId(),o=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=y.useContext(zw);return y.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:d,right:u}=s.current;if(e||!o.current||!a||!l)return;const h=n==="left"?`left: ${d}`:`right: ${u}`;o.current.dataset.motionPopId=r;const f=document.createElement("style");return i&&(f.nonce=i),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[e]),m.jsx(Iue,{isPresent:e,childRef:o,sizeRef:s,children:y.cloneElement(t,{ref:o})})}const Nue=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:s,mode:i,anchorX:a})=>{const l=Hw(Oue),c=y.useId();let d=!0,u=y.useMemo(()=>(d=!1,{id:c,initial:e,isPresent:n,custom:o,onExitComplete:h=>{l.set(h,!0);for(const f of l.values())if(!f)return;r&&r()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[n,l,r]);return s&&d&&(u={...u}),y.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[n]),y.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),i==="popLayout"&&(t=m.jsx(Due,{isPresent:n,anchorX:a,children:t})),m.jsx(Im.Provider,{value:u,children:t})};function Oue(){return new Map}function E4(t=!0){const e=y.useContext(Im);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=e,s=y.useId();y.useEffect(()=>{if(t)return o(s)},[t]);const i=y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,i]:[!0]}const Qu=t=>t.key||"";function TT(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const Lue=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:s="sync",propagate:i=!1,anchorX:a="left"})=>{const[l,c]=E4(i),d=y.useMemo(()=>TT(t),[t]),u=i&&!l?[]:d.map(Qu),h=y.useRef(!0),f=y.useRef(d),p=Hw(()=>new Map),[g,b]=y.useState(d),[v,x]=y.useState(d);S4(()=>{h.current=!1,f.current=d;for(let C=0;C<v.length;C++){const S=Qu(v[C]);u.includes(S)?p.delete(S):p.get(S)!==!0&&p.set(S,!1)}},[v,u.length,u.join("-")]);const w=[];if(d!==g){let C=[...d];for(let S=0;S<v.length;S++){const T=v[S],E=Qu(T);u.includes(E)||(C.splice(S,0,T),w.push(T))}return s==="wait"&&w.length&&(C=w),x(TT(C)),b(d),null}const{forceRender:k}=y.useContext(Vw);return m.jsx(m.Fragment,{children:v.map(C=>{const S=Qu(C),T=i&&!l?!1:d===v||u.includes(S),E=()=>{if(p.has(S))p.set(S,!0);else return;let M=!0;p.forEach(_=>{_||(M=!1)}),M&&(k==null||k(),x(f.current),i&&(c==null||c()),r&&r())};return m.jsx(Nue,{isPresent:T,initial:!h.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:s,onExitComplete:T?void 0:E,anchorX:a,children:C},S)})})},eh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ET={value:null};function jue(t,e){let n=new Set,r=new Set,o=!1,s=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(u){i.has(u)&&(d.schedule(u),t()),l++,u(a)}const d={schedule:(u,h=!1,f=!1)=>{const g=f&&o?n:r;return h&&i.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),i.delete(u)},process:u=>{if(a=u,o){s=!0;return}o=!0,[n,r]=[r,n],n.forEach(c),e&&ET.value&&ET.value.frameloop[e].push(l),l=0,n.clear(),o=!1,s&&(s=!1,d.process(u))}};return d}const No={},Bue=40;function M4(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=eh.reduce((w,k)=>(w[k]=jue(s,e?k:void 0),w),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:f,postRender:p}=i,g=()=>{const w=No.useManualTiming?o.timestamp:performance.now();n=!1,No.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,Bue),1)),o.timestamp=w,o.isProcessing=!0,a.process(o),l.process(o),c.process(o),d.process(o),u.process(o),h.process(o),f.process(o),p.process(o),o.isProcessing=!1,n&&e&&(r=!1,t(g))},b=()=>{n=!0,r=!0,o.isProcessing||t(g)};return{schedule:eh.reduce((w,k)=>{const C=i[k];return w[k]=(S,T=!1,E=!1)=>(n||b(),C.schedule(S,T,E)),w},{}),cancel:w=>{for(let k=0;k<eh.length;k++)i[eh[k]].cancel(w)},state:o,steps:i}}const Kn=t=>t,{schedule:qe,cancel:Ls,state:xt,steps:vy}=M4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Kn,!0),A4=y.createContext({strict:!1}),MT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ka={};for(const t in MT)Ka[t]={isEnabled:e=>MT[t].some(n=>!!e[n])};function $ue(t){for(const e in t)Ka[e]={...Ka[e],...t[e]}}const Vue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function op(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Vue.has(t)}let _4=t=>!op(t);function Hue(t){t&&(_4=e=>e.startsWith("on")?!op(e):t(e))}try{Hue(require("@emotion/is-prop-valid").default)}catch{}function Fue(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(_4(o)||n===!0&&op(o)||!e&&!op(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}function zue(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}const Dm=y.createContext({});function Nm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Sd(t){return typeof t=="string"||Array.isArray(t)}const Ww=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gw=["initial",...Ww];function Om(t){return Nm(t.animate)||Gw.some(e=>Sd(t[e]))}function R4(t){return!!(Om(t)||t.variants)}function Uue(t,e){if(Om(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Sd(n)?n:void 0,animate:Sd(r)?r:void 0}}return t.inherit!==!1?e:{}}function Wue(t){const{initial:e,animate:n}=Uue(t,y.useContext(Dm));return y.useMemo(()=>({initial:e,animate:n}),[AT(e),AT(n)])}function AT(t){return Array.isArray(t)?t.join(" "):t}const Gue=Symbol.for("motionComponentSymbol");function ya(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function que(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ya(n)&&(n.current=r))},[e])}const qw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kue="framerAppearId",P4="data-"+qw(Kue),I4=y.createContext({}),{schedule:Kw}=M4(queueMicrotask,!1);function Yue(t,e,n,r,o){var g,b;const{visualElement:s}=y.useContext(Dm),i=y.useContext(A4),a=y.useContext(Im),l=y.useContext(zw).reducedMotion,c=y.useRef(null);r=r||i.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,u=y.useContext(I4);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&Jue(c.current,n,o,u);const h=y.useRef(!1);y.useInsertionEffect(()=>{d&&h.current&&d.update(n,a)});const f=n[P4],p=y.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return S4(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Kw.render(d.render),p.current&&d.animationState&&d.animationState.animateChanges())}),y.useEffect(()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),p.current=!1))}),d}function Jue(t,e,n,r){const{layoutId:o,layout:s,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:D4(t.parent)),t.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:!!i||a&&ya(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function D4(t){if(t)return t.options.allowProjection!==!1?t.projection:D4(t.parent)}let Yw=()=>{};function Zue({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:o}){t&&$ue(t);function s(a,l){let c;const d={...y.useContext(zw),...a,layoutId:Xue(a)},{isStatic:u}=d,h=Wue(a),f=r(a,u);if(!u&&Fw){Que();const p=ehe(d);c=p.MeasureLayout,h.visualElement=Yue(o,f,d,e,p.ProjectionNode)}return m.jsxs(Dm.Provider,{value:h,children:[c&&h.visualElement?m.jsx(c,{visualElement:h.visualElement,...d}):null,n(o,a,que(f,h.visualElement,l),f,u,h.visualElement)]})}s.displayName=`motion.${typeof o=="string"?o:`create(${o.displayName??o.name??""})`}`;const i=y.forwardRef(s);return i[Gue]=o,i}function Xue({layoutId:t}){const e=y.useContext(Vw).id;return e&&t!==void 0?e+"-"+t:t}function Que(t,e){y.useContext(A4).strict}function ehe(t){const{drag:e,layout:n}=Ka;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const N4=t=>e=>typeof e=="string"&&e.startsWith(t),Jw=N4("--"),the=N4("var(--"),Zw=t=>the(t)?nhe.test(t.split("/*")[0].trim()):!1,nhe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Td={};function rhe(t){for(const e in t)Td[e]=t[e],Jw(e)&&(Td[e].isCSSVariable=!0)}const wl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xl=new Set(wl);function O4(t,{layout:e,layoutId:n}){return xl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Td[t]||t==="opacity")}const L4=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Oo=(t,e,n)=>n>e?e:n<t?t:n,kl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ed={...kl,transform:t=>Oo(0,1,t)},th={...kl,default:1},_T={...kl,transform:Math.round},fu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ss=fu("deg"),$r=fu("%"),se=fu("px"),ohe=fu("vh"),she=fu("vw"),RT={...$r,parse:t=>$r.parse(t)/100,transform:t=>$r.transform(t*100)},ihe={rotate:ss,rotateX:ss,rotateY:ss,rotateZ:ss,scale:th,scaleX:th,scaleY:th,scaleZ:th,skew:ss,skewX:ss,skewY:ss,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:Ed,originX:RT,originY:RT,originZ:se},Xw={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,backgroundPositionX:se,backgroundPositionY:se,...ihe,zIndex:_T,fillOpacity:Ed,strokeOpacity:Ed,numOctaves:_T},ahe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lhe=wl.length;function che(t,e,n){let r="",o=!0;for(let s=0;s<lhe;s++){const i=wl[s],a=t[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=L4(a,Xw[i]);if(!l){o=!1;const d=ahe[i]||i;r+=`${d}(${c}) `}n&&(e[i]=c)}}return r=r.trim(),n?r=n(e,o?"":r):o&&(r="none"),r}function Qw(t,e,n){const{style:r,vars:o,transformOrigin:s}=t;let i=!1,a=!1;for(const l in e){const c=e[l];if(xl.has(l)){i=!0;continue}else if(Jw(l)){o[l]=c;continue}else{const d=L4(c,Xw[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(i||n?r.transform=che(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const ex=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),jt=t=>!!(t&&t.getVelocity);function j4(t,e,n){for(const r in e)!jt(e[r])&&!O4(r,n)&&(t[r]=e[r])}function dhe({transformTemplate:t},e){return y.useMemo(()=>{const n=ex();return Qw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function uhe(t,e){const n=t.style||{},r={};return j4(r,n,t),Object.assign(r,dhe(t,e)),r}function hhe(t,e){const n={},r=uhe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const fhe={offset:"stroke-dashoffset",array:"stroke-dasharray"},phe={offset:"strokeDashoffset",array:"strokeDasharray"};function mhe(t,e,n=1,r=0,o=!0){t.pathLength=1;const s=o?fhe:phe;t[s.offset]=se.transform(-r);const i=se.transform(e),a=se.transform(n);t[s.array]=`${i} ${a}`}function B4(t,{attrX:e,attrY:n,attrScale:r,pathLength:o,pathSpacing:s=1,pathOffset:i=0,...a},l,c,d){if(Qw(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:u,style:h}=t;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete u.transformBox),e!==void 0&&(u.x=e),n!==void 0&&(u.y=n),r!==void 0&&(u.scale=r),o!==void 0&&mhe(u,o,s,i,!1)}const $4=()=>({...ex(),attrs:{}}),V4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ghe(t,e,n,r){const o=y.useMemo(()=>{const s=$4();return B4(s,e,V4(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};j4(s,t.style,t),o.style={...s,...o.style}}return o}const yhe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tx(t){return typeof t!="string"||t.includes("-")?!1:!!(yhe.indexOf(t)>-1||/[A-Z]/u.test(t))}function bhe(t=!1){return(n,r,o,{latestValues:s},i)=>{const l=(tx(n)?ghe:hhe)(r,s,i,n),c=Fue(r,typeof n=="string",t),d=n!==y.Fragment?{...c,...l,ref:o}:{},{children:u}=r,h=y.useMemo(()=>jt(u)?u.get():u,[u]);return y.createElement(n,{...d,children:h})}}function PT(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function nx(t,e,n,r){if(typeof e=="function"){const[o,s]=PT(r);e=e(n!==void 0?n:t.custom,o,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,s]=PT(r);e=e(n!==void 0?n:t.custom,o,s)}return e}function Mh(t){return jt(t)?t.get():t}function vhe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,o){return{latestValues:whe(n,r,o,t),renderState:e()}}const H4=t=>(e,n)=>{const r=y.useContext(Dm),o=y.useContext(Im),s=()=>vhe(t,e,r,o);return n?s():Hw(s)};function whe(t,e,n,r){const o={},s=r(t,{});for(const h in s)o[h]=Mh(s[h]);let{initial:i,animate:a}=t;const l=Om(t),c=R4(t);e&&c&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const u=d?a:i;if(u&&typeof u!="boolean"&&!Nm(u)){const h=Array.isArray(u)?u:[u];for(let f=0;f<h.length;f++){const p=nx(t,h[f]);if(p){const{transitionEnd:g,transition:b,...v}=p;for(const x in v){let w=v[x];if(Array.isArray(w)){const k=d?w.length-1:0;w=w[k]}w!==null&&(o[x]=w)}for(const x in g)o[x]=g[x]}}}return o}function rx(t,e,n){var s;const{style:r}=t,o={};for(const i in r)(jt(r[i])||e.style&&jt(e.style[i])||O4(i,t)||((s=n==null?void 0:n.getValue(i))==null?void 0:s.liveStyle)!==void 0)&&(o[i]=r[i]);return o}const xhe={useVisualState:H4({scrapeMotionValuesFromProps:rx,createRenderState:ex})};function F4(t,e,n){const r=rx(t,e,n);for(const o in t)if(jt(t[o])||jt(e[o])){const s=wl.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[s]=t[o]}return r}const khe={useVisualState:H4({scrapeMotionValuesFromProps:F4,createRenderState:$4})};function Che(t,e){return function(r,{forwardMotionProps:o}={forwardMotionProps:!1}){const i={...tx(r)?khe:xhe,preloadedFeatures:t,useRender:bhe(o),createVisualElement:e,Component:r};return Zue(i)}}function Md(t,e,n){const r=t.getProps();return nx(r,e,n!==void 0?n:r.custom,t)}const g0=t=>Array.isArray(t);let Ah;function She(){Ah=void 0}const dn={now:()=>(Ah===void 0&&dn.set(xt.isProcessing||No.useManualTiming?xt.timestamp:performance.now()),Ah),set:t=>{Ah=t,queueMicrotask(She)}};function ox(t,e){t.indexOf(e)===-1&&t.push(e)}function sx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ix{constructor(){this.subscriptions=[]}add(e){return ox(this.subscriptions,e),()=>sx(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let s=0;s<o;s++){const i=this.subscriptions[s];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function z4(t,e){return e?t*(1e3/e):0}const IT=30,The=t=>!isNaN(parseFloat(t));class Ehe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{var i,a;const s=dn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();o&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=dn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=The(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ix);const r=this.events[e].add(n);return e==="change"?()=>{r(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=dn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>IT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,IT);return z4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ya(t,e){return new Ehe(t,e)}function Mhe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ya(n))}function Ahe(t){return g0(t)?t[t.length-1]||0:t}function _he(t,e){const n=Md(t,e);let{transitionEnd:r={},transition:o={},...s}=n||{};s={...s,...r};for(const i in s){const a=Ahe(s[i]);Mhe(t,i,a)}}function Rhe(t){return!!(jt(t)&&t.add)}function y0(t,e){const n=t.getValue("willChange");if(Rhe(n))return n.add(e);if(!n&&No.WillChange){const r=new No.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function U4(t){return t.props[P4]}const Phe=t=>t!==null;function Ihe(t,{repeat:e,repeatType:n="loop"},r){const o=t.filter(Phe),s=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[s]}const Dhe={type:"spring",stiffness:500,damping:25,restSpeed:10},Nhe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Ohe={type:"keyframes",duration:.8},Lhe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jhe=(t,{keyframes:e})=>e.length>2?Ohe:xl.has(t)?t.startsWith("scale")?Nhe(e[1]):Dhe:Lhe;function Bhe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:i,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function ax(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Vr=t=>t*1e3,Hr=t=>t/1e3,Ac=t=>Math.round(t*1e5)/1e5,lx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $he(t){return t==null}const Vhe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cx=(t,e)=>n=>!!(typeof n=="string"&&Vhe.test(n)&&n.startsWith(t)||e&&!$he(n)&&Object.prototype.hasOwnProperty.call(n,e)),W4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[o,s,i,a]=r.match(lx);return{[t]:parseFloat(o),[e]:parseFloat(s),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},Hhe=t=>Oo(0,255,t),wy={...kl,transform:t=>Math.round(Hhe(t))},fi={test:cx("rgb","red"),parse:W4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wy.transform(t)+", "+wy.transform(e)+", "+wy.transform(n)+", "+Ac(Ed.transform(r))+")"};function Fhe(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const b0={test:cx("#"),parse:Fhe,transform:fi.transform},ba={test:cx("hsl","hue"),parse:W4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+$r.transform(Ac(e))+", "+$r.transform(Ac(n))+", "+Ac(Ed.transform(r))+")"},Ot={test:t=>fi.test(t)||b0.test(t)||ba.test(t),parse:t=>fi.test(t)?fi.parse(t):ba.test(t)?ba.parse(t):b0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?fi.transform(t):ba.transform(t)},zhe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Uhe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(lx))==null?void 0:e.length)||0)+(((n=t.match(zhe))==null?void 0:n.length)||0)>0}const G4="number",q4="color",Whe="var",Ghe="var(",DT="${}",qhe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ad(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},o=[];let s=0;const a=e.replace(qhe,l=>(Ot.test(l)?(r.color.push(s),o.push(q4),n.push(Ot.parse(l))):l.startsWith(Ghe)?(r.var.push(s),o.push(Whe),n.push(l)):(r.number.push(s),o.push(G4),n.push(parseFloat(l))),++s,DT)).split(DT);return{values:n,split:a,indexes:r,types:o}}function K4(t){return Ad(t).values}function Y4(t){const{split:e,types:n}=Ad(t),r=e.length;return o=>{let s="";for(let i=0;i<r;i++)if(s+=e[i],o[i]!==void 0){const a=n[i];a===G4?s+=Ac(o[i]):a===q4?s+=Ot.transform(o[i]):s+=o[i]}return s}}const Khe=t=>typeof t=="number"?0:t;function Yhe(t){const e=K4(t);return Y4(t)(e.map(Khe))}const js={test:Uhe,parse:K4,createTransformer:Y4,getAnimatableNone:Yhe};function xy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Jhe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,s=0,i=0;if(!e)o=s=i=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;o=xy(l,a,t+1/3),s=xy(l,a,t),i=xy(l,a,t-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(i*255),alpha:r}}function sp(t,e){return n=>n>0?e:t}const We=(t,e,n)=>t+(e-t)*n,ky=(t,e,n)=>{const r=t*t,o=n*(e*e-r)+r;return o<0?0:Math.sqrt(o)},Zhe=[b0,fi,ba],Xhe=t=>Zhe.find(e=>e.test(t));function NT(t){const e=Xhe(t);if(!e)return!1;let n=e.parse(t);return e===ba&&(n=Jhe(n)),n}const OT=(t,e)=>{const n=NT(t),r=NT(e);if(!n||!r)return sp(t,e);const o={...n};return s=>(o.red=ky(n.red,r.red,s),o.green=ky(n.green,r.green,s),o.blue=ky(n.blue,r.blue,s),o.alpha=We(n.alpha,r.alpha,s),fi.transform(o))},v0=new Set(["none","hidden"]);function Qhe(t,e){return v0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}const efe=(t,e)=>n=>e(t(n)),pu=(...t)=>t.reduce(efe);function tfe(t,e){return n=>We(t,e,n)}function dx(t){return typeof t=="number"?tfe:typeof t=="string"?Zw(t)?sp:Ot.test(t)?OT:ofe:Array.isArray(t)?J4:typeof t=="object"?Ot.test(t)?OT:nfe:sp}function J4(t,e){const n=[...t],r=n.length,o=t.map((s,i)=>dx(s)(s,e[i]));return s=>{for(let i=0;i<r;i++)n[i]=o[i](s);return n}}function nfe(t,e){const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=dx(t[o])(t[o],e[o]));return o=>{for(const s in r)n[s]=r[s](o);return n}}function rfe(t,e){const n=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const s=e.types[o],i=t.indexes[s][r[s]],a=t.values[i]??0;n[o]=a,r[s]++}return n}const ofe=(t,e)=>{const n=js.createTransformer(e),r=Ad(t),o=Ad(e);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?v0.has(t)&&!o.values.length||v0.has(e)&&!r.values.length?Qhe(t,e):pu(J4(rfe(r,o),o.values),n):sp(t,e)};function Z4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?We(t,e,n):dx(t)(t,e)}const sfe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>qe.update(e,n),stop:()=>Ls(e),now:()=>xt.isProcessing?xt.timestamp:dn.now()}},X4=(t,e,n=10)=>{let r="";const o=Math.max(Math.round(e/n),2);for(let s=0;s<o;s++)r+=t(s/(o-1))+", ";return`linear(${r.substring(0,r.length-2)})`},ip=2e4;function ux(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ip;)e+=n,r=t.next(e);return e>=ip?1/0:e}function ife(t,e=100,n){const r=n({...t,keyframes:[0,e]}),o=Math.min(ux(r),ip);return{type:"keyframes",ease:s=>r.next(o*s).value/e,duration:Hr(o)}}const afe=5;function Q4(t,e,n){const r=Math.max(e-afe,0);return z4(n-t(r),e-r)}const Xe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},LT=.001;function lfe({duration:t=Xe.duration,bounce:e=Xe.bounce,velocity:n=Xe.velocity,mass:r=Xe.mass}){let o,s,i=1-e;i=Oo(Xe.minDamping,Xe.maxDamping,i),t=Oo(Xe.minDuration,Xe.maxDuration,Hr(t)),i<1?(o=c=>{const d=c*i,u=d*t,h=d-n,f=w0(c,i),p=Math.exp(-u);return LT-h/f*p},s=c=>{const u=c*i*t,h=u*n+n,f=Math.pow(i,2)*Math.pow(c,2)*t,p=Math.exp(-u),g=w0(Math.pow(c,2),i);return(-o(c)+LT>0?-1:1)*((h-f)*p)/g}):(o=c=>{const d=Math.exp(-c*t),u=(c-n)*t+1;return-.001+d*u},s=c=>{const d=Math.exp(-c*t),u=(n-c)*(t*t);return d*u});const a=5/t,l=dfe(o,s,a);if(t=Vr(t),isNaN(l))return{stiffness:Xe.stiffness,damping:Xe.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:t}}}const cfe=12;function dfe(t,e,n){let r=n;for(let o=1;o<cfe;o++)r=r-t(r)/e(r);return r}function w0(t,e){return t*Math.sqrt(1-e*e)}const ufe=["duration","bounce"],hfe=["stiffness","damping","mass"];function jT(t,e){return e.some(n=>t[n]!==void 0)}function ffe(t){let e={velocity:Xe.velocity,stiffness:Xe.stiffness,damping:Xe.damping,mass:Xe.mass,isResolvedFromDuration:!1,...t};if(!jT(t,hfe)&&jT(t,ufe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,s=2*Oo(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:Xe.mass,stiffness:o,damping:s}}else{const n=lfe(t);e={...e,...n,mass:Xe.mass},e.isResolvedFromDuration=!0}return e}function ap(t=Xe.visualDuration,e=Xe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:o}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:f}=ffe({...n,velocity:-Hr(n.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*d)),b=i-s,v=Hr(Math.sqrt(l/d)),x=Math.abs(b)<5;r||(r=x?Xe.restSpeed.granular:Xe.restSpeed.default),o||(o=x?Xe.restDelta.granular:Xe.restDelta.default);let w;if(g<1){const C=w0(v,g);w=S=>{const T=Math.exp(-g*v*S);return i-T*((p+g*v*b)/C*Math.sin(C*S)+b*Math.cos(C*S))}}else if(g===1)w=C=>i-Math.exp(-v*C)*(b+(p+v*b)*C);else{const C=v*Math.sqrt(g*g-1);w=S=>{const T=Math.exp(-g*v*S),E=Math.min(C*S,300);return i-T*((p+g*v*b)*Math.sinh(E)+C*b*Math.cosh(E))/C}}const k={calculatedDuration:f&&u||null,next:C=>{const S=w(C);if(f)a.done=C>=u;else{let T=C===0?p:0;g<1&&(T=C===0?Vr(p):Q4(w,C,S));const E=Math.abs(T)<=r,M=Math.abs(i-S)<=o;a.done=E&&M}return a.value=a.done?i:S,a},toString:()=>{const C=Math.min(ux(k),ip),S=X4(T=>k.next(C*T).value,C,30);return C+"ms "+S},toTransition:()=>{}};return k}ap.applyToOptions=t=>{const e=ife(t,100,ap);return t.ease=e.ease,t.duration=Vr(e.duration),t.type="keyframes",t};function x0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=t[0],h={done:!1,value:u},f=E=>a!==void 0&&E<a||l!==void 0&&E>l,p=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let g=n*e;const b=u+g,v=i===void 0?b:i(b);v!==b&&(g=v-u);const x=E=>-g*Math.exp(-E/r),w=E=>v+x(E),k=E=>{const M=x(E),_=w(E);h.done=Math.abs(M)<=c,h.value=h.done?v:_};let C,S;const T=E=>{f(h.value)&&(C=E,S=ap({keyframes:[h.value,p(h.value)],velocity:Q4(w,E,h.value),damping:o,stiffness:s,restDelta:c,restSpeed:d}))};return T(0),{calculatedDuration:null,next:E=>{let M=!1;return!S&&C===void 0&&(M=!0,k(E),T(E)),C!==void 0&&E>=C?S.next(E-C):(!M&&k(E),h)}}}const _d=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};function pfe(t,e,n){const r=[],o=n||No.mix||Z4,s=t.length-1;for(let i=0;i<s;i++){let a=o(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||Kn:e;a=pu(l,a)}r.push(a)}return r}function mfe(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const s=t.length;if(Yw(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=pfe(e,r,o),l=a.length,c=d=>{if(i&&d<t[0])return e[0];let u=0;if(l>1)for(;u<t.length-2&&!(d<t[u+1]);u++);const h=_d(t[u],t[u+1],d);return a[u](h)};return n?d=>c(Oo(t[0],t[s-1],d)):c}function gfe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=_d(0,e,r);t.push(We(n,1,o))}}function yfe(t){const e=[0];return gfe(e,t.length-1),e}function bfe(t,e){return t.map(n=>n*e)}const eO=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,vfe=1e-7,wfe=12;function xfe(t,e,n,r,o){let s,i,a=0;do i=e+(n-e)/2,s=eO(i,r,o)-t,s>0?n=i:e=i;while(Math.abs(s)>vfe&&++a<wfe);return i}function mu(t,e,n,r){if(t===e&&n===r)return Kn;const o=s=>xfe(s,0,1,t,n);return s=>s===0||s===1?s:eO(o(s),e,r)}const kfe=mu(.42,0,1,1),Cfe=mu(0,0,.58,1),tO=mu(.42,0,.58,1),Sfe=t=>Array.isArray(t)&&typeof t[0]!="number",nO=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,rO=t=>e=>1-t(1-e),oO=mu(.33,1.53,.69,.99),hx=rO(oO),sO=nO(hx),iO=t=>(t*=2)<1?.5*hx(t):.5*(2-Math.pow(2,-10*(t-1))),fx=t=>1-Math.sin(Math.acos(t)),aO=rO(fx),lO=nO(fx),cO=t=>Array.isArray(t)&&typeof t[0]=="number",Tfe={linear:Kn,easeIn:kfe,easeInOut:tO,easeOut:Cfe,circIn:fx,circInOut:lO,circOut:aO,backIn:hx,backInOut:sO,backOut:oO,anticipate:iO},Efe=t=>typeof t=="string",BT=t=>{if(cO(t)){Yw(t.length===4);const[e,n,r,o]=t;return mu(e,n,r,o)}else if(Efe(t))return Tfe[t];return t};function Mfe(t,e){return t.map(()=>e||tO).splice(0,t.length-1)}function _c({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=Sfe(r)?r.map(BT):BT(r),s={done:!1,value:e[0]},i=bfe(n&&n.length===e.length?n:yfe(e),t),a=mfe(i,e,{ease:Array.isArray(o)?o:Mfe(e,o)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Afe=t=>t!==null;function px(t,{repeat:e,repeatType:n="loop"},r,o=1){const s=t.filter(Afe),a=o<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const _fe={decay:x0,inertia:x0,tween:_c,keyframes:_c,spring:ap};function dO(t){typeof t.type=="string"&&(t.type=_fe[t.type])}class mx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Rfe=t=>t/100;class gx extends mx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(n=!0)=>{var r,o;if(n){const{motionValue:s}=this.options;s&&s.updatedAt!==dn.now()&&this.tick(dn.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;dO(e);const{type:n=_c,repeat:r=0,repeatDelay:o=0,repeatType:s,velocity:i=0}=e;let{keyframes:a}=e;const l=n||_c;l!==_c&&typeof a[0]!="number"&&(this.mixKeyframes=pu(Rfe,Z4(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-i})),c.calculatedDuration===null&&(c.calculatedDuration=ux(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:o,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:u,repeatType:h,repeatDelay:f,type:p,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>o;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let w=this.currentTime,k=r;if(u){const E=Math.min(this.currentTime,o)/a;let M=Math.floor(E),_=E%1;!_&&E>=1&&(_=1),_===1&&M--,M=Math.min(M,u+1),!!(M%2)&&(h==="reverse"?(_=1-_,f&&(_-=f/a)):h==="mirror"&&(k=i)),w=Oo(0,1,_)*a}const C=x?{done:!1,value:d[0]}:k.next(w);s&&(C.value=s(C.value));let{done:S}=C;!x&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&p!==x0&&(C.value=px(d,this.options,b,this.speed)),g&&g(C.value),T&&this.finish(),C}then(e,n){return this.finished.then(e,n)}get duration(){return Hr(this.calculatedDuration)}get time(){return Hr(this.currentTime)}set time(e){var n;e=Vr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(dn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Hr(this.currentTime))}play(){var o,s;if(this.isStopped)return;const{driver:e=sfe,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),(s=(o=this.options).onPlay)==null||s.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Pfe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const pi=t=>t*180/Math.PI,k0=t=>{const e=pi(Math.atan2(t[1],t[0]));return C0(e)},Ife={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:k0,rotateZ:k0,skewX:t=>pi(Math.atan(t[1])),skewY:t=>pi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},C0=t=>(t=t%360,t<0&&(t+=360),t),$T=k0,VT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),HT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Dfe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:VT,scaleY:HT,scale:t=>(VT(t)+HT(t))/2,rotateX:t=>C0(pi(Math.atan2(t[6],t[5]))),rotateY:t=>C0(pi(Math.atan2(-t[2],t[0]))),rotateZ:$T,rotate:$T,skewX:t=>pi(Math.atan(t[4])),skewY:t=>pi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function S0(t){return t.includes("scale")?1:0}function T0(t,e){if(!t||t==="none")return S0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=Dfe,o=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Ife,o=a}if(!o)return S0(e);const s=r[e],i=o[1].split(",").map(Ofe);return typeof s=="function"?s(i):i[s]}const Nfe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return T0(n,e)};function Ofe(t){return parseFloat(t.trim())}const FT=t=>t===kl||t===se,Lfe=new Set(["x","y","z"]),jfe=wl.filter(t=>!Lfe.has(t));function Bfe(t){const e=[];return jfe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ci={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>T0(e,"x"),y:(t,{transform:e})=>T0(e,"y")};Ci.translateX=Ci.x;Ci.translateY=Ci.y;const Si=new Set;let E0=!1,M0=!1,A0=!1;function uO(){if(M0){const t=Array.from(Si).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const o=Bfe(r);o.length&&(n.set(r,o),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([s,i])=>{var a;(a=r.getValue(s))==null||a.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}M0=!1,E0=!1,Si.forEach(t=>t.complete(A0)),Si.clear()}function hO(){Si.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(M0=!0)})}function $fe(){A0=!0,hO(),uO(),A0=!1}class yx{constructor(e,n,r,o,s,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=o,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(Si.add(this),E0||(E0=!0,qe.read(hO),qe.resolveKeyframes(uO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:o}=this;if(e[0]===null){const s=o==null?void 0:o.get(),i=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,i);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=i),o&&s===void 0&&o.set(e[0])}Pfe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Si.delete(this)}cancel(){this.state==="scheduled"&&(Si.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Vfe=t=>t.startsWith("--");function Hfe(t,e,n){Vfe(e)?t.style.setProperty(e,n):t.style[e]=n}function bx(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ffe=bx(()=>window.ScrollTimeline!==void 0),zfe={};function Ufe(t,e){const n=bx(t);return()=>zfe[e]??n()}const fO=Ufe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),oc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,zT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:oc([0,.65,.55,1]),circOut:oc([.55,0,1,.45]),backIn:oc([.31,.01,.66,-.59]),backOut:oc([.33,1.53,.69,.99])};function pO(t,e){if(t)return typeof t=="function"?fO()?X4(t,e):"ease-out":cO(t)?oc(t):Array.isArray(t)?t.map(n=>pO(n,e)||zT.easeOut):zT[t]}function Wfe(t,e,n,{delay:r=0,duration:o=300,repeat:s=0,repeatType:i="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const u=pO(a,o);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:i==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(d,h)}function mO(t){return typeof t=="function"&&"applyToOptions"in t}function Gfe({type:t,...e}){return mO(t)&&fO()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class qfe extends mx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:o,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=i,this.options=e,Yw(typeof e.type!="string");const c=Gfe(e);this.animation=Wfe(n,r,o,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=px(o,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):Hfe(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Hr(Number(e))}get time(){return Hr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Vr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Ffe()?(this.animation.timeline=e,Kn):n(this)}}const gO={anticipate:iO,backInOut:sO,circInOut:lO};function Kfe(t){return t in gO}function Yfe(t){typeof t.ease=="string"&&Kfe(t.ease)&&(t.ease=gO[t.ease])}const UT=10;class Jfe extends qfe{constructor(e){Yfe(e),dO(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:o,element:s,...i}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new gx({...i,autoplay:!1}),l=Vr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-UT).value,a.sample(l).value,UT),a.stop()}}const WT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(js.test(t)||t==="0")&&!t.startsWith("url("));function Zfe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Xfe(t,e,n,r){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],i=WT(o,e),a=WT(s,e);return!i||!a?!1:Zfe(t)||(n==="spring"||mO(n))&&r}const Qfe=new Set(["opacity","clipPath","filter","transform"]),epe=bx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tpe(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:o,damping:s,type:i}=t;if(!Uw((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return epe()&&n&&Qfe.has(n)&&(n!=="transform"||!l)&&!a&&!r&&o!=="mirror"&&s!==0&&i!=="inertia"}const npe=40;class rpe extends mx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:i="loop",keyframes:a,name:l,motionValue:c,element:d,...u}){var p;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=dn.now();const h={autoplay:e,delay:n,type:r,repeat:o,repeatDelay:s,repeatType:i,name:l,motionValue:c,element:d,...u},f=(d==null?void 0:d.KeyframeResolver)||yx;this.keyframeResolver=new f(a,(g,b,v)=>this.onKeyframesResolved(g,b,h,!v),l,c,d),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,o){this.keyframeResolver=void 0;const{name:s,type:i,velocity:a,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=dn.now(),Xfe(e,s,i,a)||((No.instantAnimations||!l)&&(d==null||d(px(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const h={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>npe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},f=!c&&tpe(h)?new Jfe({...h,element:h.motionValue.owner.current}):new gx(h);f.finished.then(()=>this.notifyFinished()).catch(Kn),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),$fe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const vx=(t,e,n,r={},o,s)=>i=>{const a=ax(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Vr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:o};Bhe(a)||Object.assign(d,jhe(t,d)),d.duration&&(d.duration=Vr(d.duration)),d.repeatDelay&&(d.repeatDelay=Vr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let u=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(u=!0)),(No.instantAnimations||No.skipAnimations)&&(u=!0,d.duration=0,d.delay=0),d.allowFlatten=!a.type&&!a.ease,u&&!s&&e.get()!==void 0){const h=Ihe(d.keyframes,a);if(h!==void 0){qe.update(()=>{d.onUpdate(h),d.onComplete()});return}}return a.isSync?new gx(d):new rpe(d)},yO=new Set(["width","height","top","left","right","bottom",...wl]);function ope({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function bO(t,e,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:i,...a}=e;r&&(s=r);const l=[],c=o&&t.animationState&&t.animationState.getState()[o];for(const d in a){const u=t.getValue(d,t.latestValues[d]??null),h=a[d];if(h===void 0||c&&ope(c,d))continue;const f={delay:n,...ax(s||{},d)},p=u.get();if(p!==void 0&&!u.isAnimating&&!Array.isArray(h)&&h===p&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const v=U4(t);if(v){const x=window.MotionHandoffAnimation(v,d,qe);x!==null&&(f.startTime=x,g=!0)}}y0(t,d),u.start(vx(d,u,h,t.shouldReduceMotion&&yO.has(d)?{type:!1}:f,t,g));const b=u.animation;b&&l.push(b)}return i&&Promise.all(l).then(()=>{qe.update(()=>{i&&_he(t,i)})}),l}function _0(t,e,n={}){var l;const r=Md(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const s=r?()=>Promise.all(bO(t,r,n)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=o;return spe(t,e,d+c,u,h,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[c,d]=a==="beforeChildren"?[s,i]:[i,s];return c().then(()=>d())}else return Promise.all([s(),i(n.delay)])}function spe(t,e,n=0,r=0,o=1,s){const i=[],a=(t.variantChildren.size-1)*r,l=o===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(ipe).forEach((c,d)=>{c.notify("AnimationStart",e),i.push(_0(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(i)}function ipe(t,e){return t.sortNodePosition(e)}function ape(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(s=>_0(t,s,n));r=Promise.all(o)}else if(typeof e=="string")r=_0(t,e,n);else{const o=typeof e=="function"?Md(t,e,n.custom):e;r=Promise.all(bO(t,o,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function vO(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const lpe=Gw.length;function wO(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?wO(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lpe;n++){const r=Gw[n],o=t.props[r];(Sd(o)||o===!1)&&(e[r]=o)}return e}const cpe=[...Ww].reverse(),dpe=Ww.length;function upe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ape(t,n,r)))}function hpe(t){let e=upe(t),n=GT(),r=!0;const o=l=>(c,d)=>{var h;const u=Md(t,d,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(u){const{transition:f,transitionEnd:p,...g}=u;c={...c,...g,...p}}return c};function s(l){e=l(t)}function i(l){const{props:c}=t,d=wO(t.parent)||{},u=[],h=new Set;let f={},p=1/0;for(let b=0;b<dpe;b++){const v=cpe[b],x=n[v],w=c[v]!==void 0?c[v]:d[v],k=Sd(w),C=v===l?x.isActive:null;C===!1&&(p=b);let S=w===d[v]&&w!==c[v]&&k;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...f},!x.isActive&&C===null||!w&&!x.prevProp||Nm(w)||typeof w=="boolean")continue;const T=fpe(x.prevProp,w);let E=T||v===l&&x.isActive&&!S&&k||b>p&&k,M=!1;const _=Array.isArray(w)?w:[w];let P=_.reduce(o(v),{});C===!1&&(P={});const{prevResolvedValues:L={}}=x,V={...L,...P},F=N=>{E=!0,h.has(N)&&(M=!0,h.delete(N)),x.needsAnimating[N]=!0;const B=t.getValue(N);B&&(B.liveStyle=!1)};for(const N in V){const B=P[N],H=L[N];if(f.hasOwnProperty(N))continue;let X=!1;g0(B)&&g0(H)?X=!vO(B,H):X=B!==H,X?B!=null?F(N):h.add(N):B!==void 0&&h.has(N)?F(N):x.protectedKeys[N]=!0}x.prevProp=w,x.prevResolvedValues=P,x.isActive&&(f={...f,...P}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(S&&T)||M)&&u.push(..._.map(N=>({animation:N,options:{type:v}})))}if(h.size){const b={};if(typeof c.initial!="boolean"){const v=Md(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(b.transition=v.transition)}h.forEach(v=>{const x=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),b[v]=x??null}),u.push({animation:b})}let g=!!u.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(u):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)==null||u.forEach(h=>{var f;return(f=h.animationState)==null?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=i(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:i,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=GT(),r=!0}}}function fpe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!vO(e,t):!1}function Zs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GT(){return{animate:Zs(!0),whileInView:Zs(),whileHover:Zs(),whileTap:Zs(),whileDrag:Zs(),whileFocus:Zs(),exit:Zs()}}class qs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ppe extends qs{constructor(e){super(e),e.animationState||(e.animationState=hpe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let mpe=0;class gpe extends qs{constructor(){super(...arguments),this.id=mpe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ype={animation:{Feature:ppe},exit:{Feature:gpe}};function Rd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const wx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function gu(t){return{point:{x:t.pageX,y:t.pageY}}}const bpe=t=>e=>wx(e)&&t(e,gu(e));function Rc(t,e,n,r){return Rd(t,e,bpe(n),r)}function xO({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function vpe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wpe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const kO=1e-4,xpe=1-kO,kpe=1+kO,CO=.01,Cpe=0-CO,Spe=0+CO;function qt(t){return t.max-t.min}function Tpe(t,e,n){return Math.abs(t-e)<=n}function qT(t,e,n,r=.5){t.origin=r,t.originPoint=We(e.min,e.max,t.origin),t.scale=qt(n)/qt(e),t.translate=We(n.min,n.max,t.origin)-t.originPoint,(t.scale>=xpe&&t.scale<=kpe||isNaN(t.scale))&&(t.scale=1),(t.translate>=Cpe&&t.translate<=Spe||isNaN(t.translate))&&(t.translate=0)}function Pc(t,e,n,r){qT(t.x,e.x,n.x,r?r.originX:void 0),qT(t.y,e.y,n.y,r?r.originY:void 0)}function KT(t,e,n){t.min=n.min+e.min,t.max=t.min+qt(e)}function Epe(t,e,n){KT(t.x,e.x,n.x),KT(t.y,e.y,n.y)}function YT(t,e,n){t.min=e.min-n.min,t.max=t.min+qt(e)}function Ic(t,e,n){YT(t.x,e.x,n.x),YT(t.y,e.y,n.y)}const JT=()=>({translate:0,scale:1,origin:0,originPoint:0}),va=()=>({x:JT(),y:JT()}),ZT=()=>({min:0,max:0}),tt=()=>({x:ZT(),y:ZT()});function jn(t){return[t("x"),t("y")]}function Cy(t){return t===void 0||t===1}function R0({scale:t,scaleX:e,scaleY:n}){return!Cy(t)||!Cy(e)||!Cy(n)}function ti(t){return R0(t)||SO(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function SO(t){return XT(t.x)||XT(t.y)}function XT(t){return t&&t!=="0%"}function lp(t,e,n){const r=t-n,o=e*r;return n+o}function QT(t,e,n,r,o){return o!==void 0&&(t=lp(t,o,r)),lp(t,n,r)+e}function P0(t,e=0,n=1,r,o){t.min=QT(t.min,e,n,r,o),t.max=QT(t.max,e,n,r,o)}function TO(t,{x:e,y:n}){P0(t.x,e.translate,e.scale,e.originPoint),P0(t.y,n.translate,n.scale,n.originPoint)}const eE=.999999999999,tE=1.0000000000001;function Mpe(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let s,i;for(let a=0;a<o;a++){s=n[a],i=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&xa(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,TO(t,i)),r&&ti(s.latestValues)&&xa(t,s.latestValues))}e.x<tE&&e.x>eE&&(e.x=1),e.y<tE&&e.y>eE&&(e.y=1)}function wa(t,e){t.min=t.min+e,t.max=t.max+e}function nE(t,e,n,r,o=.5){const s=We(t.min,t.max,o);P0(t,e,n,s,r)}function xa(t,e){nE(t.x,e.x,e.scaleX,e.scale,e.originX),nE(t.y,e.y,e.scaleY,e.scale,e.originY)}function EO(t,e){return xO(wpe(t.getBoundingClientRect(),e))}function Ape(t,e,n){const r=EO(t,n),{scroll:o}=e;return o&&(wa(r.x,o.offset.x),wa(r.y,o.offset.y)),r}const MO=({current:t})=>t?t.ownerDocument.defaultView:null,rE=(t,e)=>Math.abs(t-e);function _pe(t,e){const n=rE(t.x,e.x),r=rE(t.y,e.y);return Math.sqrt(n**2+r**2)}class AO{constructor(e,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Ty(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=_pe(u.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=u,{timestamp:g}=xt;this.history.push({...p,timestamp:g});const{onStart:b,onMove:v}=this.handlers;h||(b&&b(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,h)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Sy(h,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(u,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Ty(u.type==="pointercancel"?this.lastMoveEventInfo:Sy(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,b),p&&p(u,b)},!wx(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const i=gu(e),a=Sy(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=xt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,Ty(a,this.history)),this.removeListeners=pu(Rc(this.contextWindow,"pointermove",this.handlePointerMove),Rc(this.contextWindow,"pointerup",this.handlePointerUp),Rc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ls(this.updatePoint)}}function Sy(t,e){return e?{point:e(t.point)}:t}function oE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ty({point:t},e){return{point:t,delta:oE(t,_O(e)),offset:oE(t,Rpe(e)),velocity:Ppe(e,.1)}}function Rpe(t){return t[0]}function _O(t){return t[t.length-1]}function Ppe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=_O(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>Vr(e)));)n--;if(!r)return{x:0,y:0};const s=Hr(o.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const i={x:(o.x-r.x)/s,y:(o.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Ipe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?We(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?We(n,t,r.max):Math.min(t,n)),t}function sE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Dpe(t,{top:e,left:n,bottom:r,right:o}){return{x:sE(t.x,n,o),y:sE(t.y,e,r)}}function iE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Npe(t,e){return{x:iE(t.x,e.x),y:iE(t.y,e.y)}}function Ope(t,e){let n=.5;const r=qt(t),o=qt(e);return o>r?n=_d(e.min,e.max-r,t.min):r>o&&(n=_d(t.min,t.max-o,e.min)),Oo(0,1,n)}function Lpe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const I0=.35;function jpe(t=I0){return t===!1?t=0:t===!0&&(t=I0),{x:aE(t,"left","right"),y:aE(t,"top","bottom")}}function aE(t,e,n){return{min:lE(t,e),max:lE(t,n)}}function lE(t,e){return typeof t=="number"?t:t[e]||0}const rr={x:!1,y:!1};function RO(){return rr.x||rr.y}function Bpe(t){return t==="x"||t==="y"?rr[t]?null:(rr[t]=!0,()=>{rr[t]=!1}):rr.x||rr.y?null:(rr.x=rr.y=!0,()=>{rr.x=rr.y=!1})}const $pe=new WeakMap;class Vpe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gu(d).point)},s=(d,u)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Bpe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jn(b=>{let v=this.getAxisMotionValue(b).get()||0;if($r.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[b];w&&(v=qt(w)*(parseFloat(v)/100))}}this.originPoint[b]=v}),p&&qe.postRender(()=>p(d,u)),y0(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(d,u)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=u;if(f&&this.currentDirection===null){this.currentDirection=Hpe(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,b),this.updateAxis("y",u.point,b),this.visualElement.render(),g&&g(d,u)},a=(d,u)=>this.stop(d,u),l=()=>jn(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)==null?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new AO(e,{onSessionStart:o,onStart:s,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:MO(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:s}=this.getProps();s&&qe.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!nh(e,o,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=Ipe(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,o=this.constraints;e&&ya(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Dpe(r.layoutBox,e):this.constraints=!1,this.elastic=jpe(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&jn(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Lpe(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ya(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const s=Ape(r,o.root,this.visualElement.getTransformPagePoint());let i=Npe(o.layout.layoutBox,s);if(n){const a=n(vpe(i));this.hasMutatedConstraints=!!a,a&&(i=xO(a))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=jn(d=>{if(!nh(d,n,this.currentDirection))return;let u=l&&l[d]||{};i&&(u={min:0,max:0});const h=o?200:1e6,f=o?40:1e7,p={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return y0(this.visualElement,e),r.start(vx(e,r,0,n,this.visualElement,!1))}stopAnimation(){jn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){jn(n=>{const{drag:r}=this.getProps();if(!nh(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,s=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:a}=o.layout.layoutBox[n];s.set(e[n]-We(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ya(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};jn(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();o[i]=Ope({min:l,max:l},this.constraints[i])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),jn(i=>{if(!nh(i,e,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set(We(l,c,o[i]))})}addListeners(){if(!this.visualElement.current)return;$pe.set(this.visualElement,this);const e=this.visualElement.current,n=Rc(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ya(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,s=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),qe.read(r);const i=Rd(window,"resize",()=>this.scalePositionWithinConstraints()),a=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(jn(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=l[d].translate,u.set(u.get()+l[d].translate))}),this.visualElement.render())});return()=>{i(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:s=!1,dragElastic:i=I0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:s,dragElastic:i,dragMomentum:a}}}function nh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Hpe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Fpe extends qs{constructor(e){super(e),this.removeGroupControls=Kn,this.removeListeners=Kn,this.controls=new Vpe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const cE=t=>(e,n)=>{t&&qe.postRender(()=>t(e,n))};class zpe extends qs{constructor(){super(...arguments),this.removePointerDownListener=Kn}onPointerDown(e){this.session=new AO(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MO(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:cE(e),onStart:cE(n),onMove:r,onEnd:(s,i)=>{delete this.session,o&&qe.postRender(()=>o(s,i))}}}mount(){this.removePointerDownListener=Rc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _h={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Gl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(se.test(t))t=parseFloat(t);else return t;const n=dE(t,e.target.x),r=dE(t,e.target.y);return`${n}% ${r}%`}},Upe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=js.parse(t);if(o.length>5)return r;const s=js.createTransformer(t),i=typeof o[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;o[0+i]/=a,o[1+i]/=l;const c=We(a,l,.5);return typeof o[2+i]=="number"&&(o[2+i]/=c),typeof o[3+i]=="number"&&(o[3+i]/=c),s(o)}};class Wpe extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:s}=e;rhe(Gpe),s&&(n.group&&n.group.add(s),r&&r.register&&o&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),_h.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:s}=this.props,{projection:i}=r;return i&&(i.isPresent=s,o||e.layoutDependency!==n||n===void 0||e.isPresent!==s?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||qe.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Kw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function PO(t){const[e,n]=E4(),r=y.useContext(Vw);return m.jsx(Wpe,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(I4),isPresent:e,safeToRemove:n})}const Gpe={borderRadius:{...Gl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gl,borderTopRightRadius:Gl,borderBottomLeftRadius:Gl,borderBottomRightRadius:Gl,boxShadow:Upe};function qpe(t,e,n){const r=jt(t)?t:Ya(t);return r.start(vx("",r,e,n)),r.animation}const Kpe=(t,e)=>t.depth-e.depth;class Ype{constructor(){this.children=[],this.isDirty=!1}add(e){ox(this.children,e),this.isDirty=!0}remove(e){sx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Kpe),this.isDirty=!1,this.children.forEach(e)}}function Jpe(t,e){const n=dn.now(),r=({timestamp:o})=>{const s=o-n;s>=e&&(Ls(r),t(s-e))};return qe.setup(r,!0),()=>Ls(r)}const IO=["TopLeft","TopRight","BottomLeft","BottomRight"],Zpe=IO.length,uE=t=>typeof t=="string"?parseFloat(t):t,hE=t=>typeof t=="number"||se.test(t);function Xpe(t,e,n,r,o,s){o?(t.opacity=We(0,n.opacity??1,Qpe(r)),t.opacityExit=We(e.opacity??1,0,eme(r))):s&&(t.opacity=We(e.opacity??1,n.opacity??1,r));for(let i=0;i<Zpe;i++){const a=`border${IO[i]}Radius`;let l=fE(e,a),c=fE(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||hE(l)===hE(c)?(t[a]=Math.max(We(uE(l),uE(c),r),0),($r.test(c)||$r.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=We(e.rotate||0,n.rotate||0,r))}function fE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Qpe=DO(0,.5,aO),eme=DO(.5,.95,Kn);function DO(t,e,n){return r=>r<t?0:r>e?1:n(_d(t,e,r))}function pE(t,e){t.min=e.min,t.max=e.max}function Nn(t,e){pE(t.x,e.x),pE(t.y,e.y)}function mE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gE(t,e,n,r,o){return t-=e,t=lp(t,1/n,r),o!==void 0&&(t=lp(t,1/o,r)),t}function tme(t,e=0,n=1,r=.5,o,s=t,i=t){if($r.test(e)&&(e=parseFloat(e),e=We(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=We(s.min,s.max,r);t===s&&(a-=e),t.min=gE(t.min,e,n,a,o),t.max=gE(t.max,e,n,a,o)}function yE(t,e,[n,r,o],s,i){tme(t,e[n],e[r],e[o],e.scale,s,i)}const nme=["x","scaleX","originX"],rme=["y","scaleY","originY"];function bE(t,e,n,r){yE(t.x,e,nme,n?n.x:void 0,r?r.x:void 0),yE(t.y,e,rme,n?n.y:void 0,r?r.y:void 0)}function vE(t){return t.translate===0&&t.scale===1}function NO(t){return vE(t.x)&&vE(t.y)}function wE(t,e){return t.min===e.min&&t.max===e.max}function ome(t,e){return wE(t.x,e.x)&&wE(t.y,e.y)}function xE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function OO(t,e){return xE(t.x,e.x)&&xE(t.y,e.y)}function kE(t){return qt(t.x)/qt(t.y)}function CE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class sme{constructor(){this.members=[]}add(e){ox(this.members,e),e.scheduleRender()}remove(e){if(sx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const s=this.members[o];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ime(t,e,n){let r="";const o=t.x.translate/e.x,s=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((o||s||i)&&(r=`translate3d(${o}px, ${s}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:u,rotateY:h,skewX:f,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}function LO(t){return T4(t)&&"ownerSVGElement"in t}function ame(t){return LO(t)&&t.tagName==="svg"}const Ey=["","X","Y","Z"],lme={visibility:"hidden"},cme=1e3;let dme=0;function My(t,e,n,r){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),r&&(r[t]=0))}function jO(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=U4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",qe,!(o||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&jO(r)}function BO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},a=e==null?void 0:e()){this.id=dme++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fme),this.nodes.forEach(bme),this.nodes.forEach(vme),this.nodes.forEach(pme)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ype)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new ix),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=LO(i)&&!ame(i),this.instance=i;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d;const u=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Jpe(u,250),_h.hasAnimatedSinceResize&&(_h.hasAnimatedSinceResize=!1,this.nodes.forEach(TE))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||Sme,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=c.getProps(),v=!this.targetLayout||!OO(this.targetLayout,f),x=!u&&h;if(this.options.layoutRoot||this.resumeFrom||x||u&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const w={...ax(p,"layout"),onPlay:g,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else u||TE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ls(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wme),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SE);return}this.isUpdating||this.nodes.forEach(gme),this.isUpdating=!1,this.nodes.forEach(yme),this.nodes.forEach(ume),this.nodes.forEach(hme),this.clearAllSnapshots();const a=dn.now();xt.delta=Oo(0,1e3/60,a-xt.timestamp),xt.timestamp=a,xt.isProcessing=!0,vy.update.process(xt),vy.preRender.process(xt),vy.render.process(xt),xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mme),this.sharedNodes.forEach(xme)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qt(this.snapshot.measuredBox.x)&&!qt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!NO(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;i&&this.instance&&(a||ti(this.latestValues)||d)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),Tme(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:i}=this.options;if(!i)return tt();const a=i.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Eme))){const{scroll:d}=this.root;d&&(wa(a.x,d.offset.x),wa(a.y,d.offset.y))}return a}removeElementScroll(i){var l;const a=tt();if(Nn(a,i),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;d!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&Nn(a,i),wa(a.x,u.offset.x),wa(a.y,u.offset.y))}return a}applyTransform(i,a=!1){const l=tt();Nn(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&xa(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ti(d.latestValues)&&xa(l,d.latestValues)}return ti(this.latestValues)&&xa(l,this.latestValues),l}removeTransform(i){const a=tt();Nn(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ti(c.latestValues))continue;R0(c.latestValues)&&c.updateSnapshot();const d=tt(),u=c.measurePageBox();Nn(d,u),bE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return ti(this.latestValues)&&bE(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:u}=this.options;if(!(!this.layout||!(d||u))){if(this.resolvedRelativeTargetAt=xt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tt(),this.relativeTargetOrigin=tt(),Ic(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tt(),this.targetWithTransforms=tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Epe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nn(this.target,this.layout.layoutBox),TO(this.target,this.targetDelta)):Nn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tt(),this.relativeTargetOrigin=tt(),Ic(this.relativeTargetOrigin,this.target,f.target),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||R0(this.parent.latestValues)||SO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const i=this.getLead(),a=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===xt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Nn(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,h=this.treeScale.y;Mpe(this.layoutCorrected,this.treeScale,this.path,a),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=tt());const{target:f}=i;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mE(this.prevProjectionDelta.x,this.projectionDelta.x),mE(this.prevProjectionDelta.y,this.projectionDelta.y)),Pc(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==h||!CE(this.projectionDelta.x,this.prevProjectionDelta.x)||!CE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=va(),this.projectionDelta=va(),this.projectionDeltaWithTransform=va()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},u=va();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=tt(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,b=this.getStack(),v=!b||b.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(Cme));this.animationProgress=0;let w;this.mixTargetDelta=k=>{const C=k/1e3;EE(u.x,i.x,C),EE(u.y,i.y,C),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ic(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kme(this.relativeTarget,this.relativeTargetOrigin,h,C),w&&ome(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=tt()),Nn(w,this.relativeTarget)),g&&(this.animationValues=d,Xpe(d,c,this.latestValues,C,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(!1),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(!1),this.pendingAnimation&&(Ls(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{_h.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ya(0)),this.currentAnimation=qpe(this.motionValue,[0,1e3],{...i,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),i.onUpdate&&i.onUpdate(d)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cme),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&$O(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||tt();const u=qt(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+u;const h=qt(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}Nn(a,l),xa(a,d),Pc(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new sme),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var a;const{layoutId:i}=this.options;return i?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:i}=this.options;return i?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&My("z",i,c,this.animationValues);for(let d=0;d<Ey.length;d++)My(`rotate${Ey[d]}`,i,c,this.animationValues),My(`skew${Ey[d]}`,i,c,this.animationValues);i.render();for(const d in c)i.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);i.scheduleRender()}getProjectionStyles(i){if(!this.instance||this.isSVG)return;if(!this.isVisible)return lme;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=Mh(i==null?void 0:i.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=Mh(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!ti(this.latestValues)&&(f.transform=l?l({},""):"none",this.hasProjected=!1),f}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=ime(this.projectionDeltaWithTransform,this.treeScale,d),l&&(a.transform=l(d,a.transform));const{x:u,y:h}=this.projectionDelta;a.transformOrigin=`${u.origin*100}% ${h.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const f in Td){if(d[f]===void 0)continue;const{correct:p,applyTo:g,isCSSVariable:b}=Td[f],v=a.transform==="none"?d[f]:p(d[f],c);if(g){const x=g.length;for(let w=0;w<x;w++)a[g[w]]=v}else b?this.options.visualElement.renderState.vars[f]=v:a[f]=v}return this.options.layoutId&&(a.pointerEvents=c===this?Mh(i==null?void 0:i.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)==null?void 0:a.stop(!1)}),this.root.nodes.forEach(SE),this.root.sharedNodes.clear()}}}function ume(t){t.updateLayout()}function hme(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:s}=t.options,i=e.source!==t.layout.source;s==="size"?jn(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],f=qt(h);h.min=r[u].min,h.max=h.min+f}):$O(s,e.layoutBox,r)&&jn(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],f=qt(r[u]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+f)});const a=va();Pc(a,r,e.layoutBox);const l=va();i?Pc(l,t.applyTransform(o,!0),e.measuredBox):Pc(l,r,e.layoutBox);const c=!NO(a);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:f}=u;if(h&&f){const p=tt();Ic(p,e.layoutBox,h.layoutBox);const g=tt();Ic(g,r,f.layoutBox),OO(p,g)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function fme(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function pme(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mme(t){t.clearSnapshot()}function SE(t){t.clearMeasurements()}function gme(t){t.isLayoutDirty=!1}function yme(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function TE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function bme(t){t.resolveTargetDelta()}function vme(t){t.calcProjection()}function wme(t){t.resetSkewAndRotation()}function xme(t){t.removeLeadSnapshot()}function EE(t,e,n){t.translate=We(e.translate,0,n),t.scale=We(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ME(t,e,n,r){t.min=We(e.min,n.min,r),t.max=We(e.max,n.max,r)}function kme(t,e,n,r){ME(t.x,e.x,n.x,r),ME(t.y,e.y,n.y,r)}function Cme(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Sme={duration:.45,ease:[.4,0,.1,1]},AE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_E=AE("applewebkit/")&&!AE("chrome/")?Math.round:Kn;function RE(t){t.min=_E(t.min),t.max=_E(t.max)}function Tme(t){RE(t.x),RE(t.y)}function $O(t,e,n){return t==="position"||t==="preserve-aspect"&&!Tpe(kE(e),kE(n),.2)}function Eme(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Mme=BO({attachResizeListener:(t,e)=>Rd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ay={current:void 0},VO=BO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ay.current){const t=new Mme({});t.mount(window),t.setOptions({layoutScroll:!0}),Ay.current=t}return Ay.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Ame={pan:{Feature:zpe},drag:{Feature:Fpe,ProjectionNode:VO,MeasureLayout:PO}};function _me(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const o=(n==null?void 0:n[t])??r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function HO(t,e){const n=_me(t),r=new AbortController,o={passive:!0,...e,signal:r.signal};return[n,o,()=>r.abort()]}function PE(t){return!(t.pointerType==="touch"||RO())}function Rme(t,e,n={}){const[r,o,s]=HO(t,n),i=a=>{if(!PE(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const d=u=>{PE(u)&&(c(u),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,o)};return r.forEach(a=>{a.addEventListener("pointerenter",i,o)}),s}function IE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,s=r[o];s&&qe.postRender(()=>s(e,gu(e)))}class Pme extends qs{mount(){const{current:e}=this.node;e&&(this.unmount=Rme(e,(n,r)=>(IE(this.node,r,"Start"),o=>IE(this.node,o,"End"))))}unmount(){}}class Ime extends qs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pu(Rd(this.node.current,"focus",()=>this.onFocus()),Rd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const FO=(t,e)=>e?t===e?!0:FO(t,e.parentElement):!1,Dme=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Nme(t){return Dme.has(t.tagName)||t.tabIndex!==-1}const Rh=new WeakSet;function DE(t){return e=>{e.key==="Enter"&&t(e)}}function _y(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ome=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=DE(()=>{if(Rh.has(n))return;_y(n,"down");const o=DE(()=>{_y(n,"up")}),s=()=>_y(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function NE(t){return wx(t)&&!RO()}function Lme(t,e,n={}){const[r,o,s]=HO(t,n),i=a=>{const l=a.currentTarget;if(!NE(a))return;Rh.add(l);const c=e(l,a),d=(f,p)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",h),Rh.has(l)&&Rh.delete(l),NE(f)&&typeof c=="function"&&c(f,{success:p})},u=f=>{d(f,l===window||l===document||n.useGlobalTarget||FO(l,f.target))},h=f=>{d(f,!1)};window.addEventListener("pointerup",u,o),window.addEventListener("pointercancel",h,o)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",i,o),Uw(a)&&(a.addEventListener("focus",c=>Ome(c,o)),!Nme(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function OE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),s=r[o];s&&qe.postRender(()=>s(e,gu(e)))}class jme extends qs{mount(){const{current:e}=this.node;e&&(this.unmount=Lme(e,(n,r)=>(OE(this.node,r,"Start"),(o,{success:s})=>OE(this.node,o,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const D0=new WeakMap,Ry=new WeakMap,Bme=t=>{const e=D0.get(t.target);e&&e(t)},$me=t=>{t.forEach(Bme)};function Vme({root:t,...e}){const n=t||document;Ry.has(n)||Ry.set(n,{});const r=Ry.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver($me,{root:t,...e})),r[o]}function Hme(t,e,n){const r=Vme(e);return D0.set(t,n),r.observe(t),()=>{D0.delete(t),r.unobserve(t)}}const Fme={some:0,all:1};class zme extends qs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:s}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:Fme[o]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),h=c?d:u;h&&h(l)};return Hme(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Ume(e,n))&&this.startObserver()}unmount(){}}function Ume({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Wme={inView:{Feature:zme},tap:{Feature:jme},focus:{Feature:Ime},hover:{Feature:Pme}},Gme={layout:{ProjectionNode:VO,MeasureLayout:PO}},N0={current:null},zO={current:!1};function qme(){if(zO.current=!0,!!Fw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>N0.current=t.matches;t.addListener(e),e()}else N0.current=!1}const Kme=new WeakMap;function Yme(t,e,n){for(const r in e){const o=e[r],s=n[r];if(jt(o))t.addValue(r,o);else if(jt(s))t.addValue(r,Ya(o,{owner:t}));else if(s!==o)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=t.getStaticValue(r);t.addValue(r,Ya(i!==void 0?i:o,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const UO=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),WO=t=>/^0[^.\s]+$/u.test(t),Jme={test:t=>t==="auto",parse:t=>t},GO=t=>e=>e.test(t),qO=[kl,se,$r,ss,she,ohe,Jme],LE=t=>qO.find(GO(t)),Zme=[...qO,Ot,js],Xme=t=>Zme.find(GO(t)),Qme=new Set(["brightness","contrast","saturate","opacity"]);function ege(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(lx)||[];if(!r)return t;const o=n.replace(r,"");let s=Qme.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+o+")"}const tge=/\b([a-z-]*)\(.*?\)/gu,O0={...js,getAnimatableNone:t=>{const e=t.match(tge);return e?e.map(ege).join(" "):t}},nge={...Xw,color:Ot,backgroundColor:Ot,outlineColor:Ot,fill:Ot,stroke:Ot,borderColor:Ot,borderTopColor:Ot,borderRightColor:Ot,borderBottomColor:Ot,borderLeftColor:Ot,filter:O0,WebkitFilter:O0},KO=t=>nge[t];function YO(t,e){let n=KO(t);return n!==O0&&(n=js),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const jE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rge{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=dn.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,qe.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Om(n),this.isVariantNode=R4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in u){const f=u[h];l[h]!==void 0&&jt(f)&&f.set(l[h],!1)}}mount(e){this.current=e,Kme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),zO.current||qme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:N0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ls(this.notifyUpdate),Ls(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=xl.has(e);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&qe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ka){const n=Ka[e];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[e]&&o&&r(this.props)&&(this.features[e]=new o(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jE.length;r++){const o=jE[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const s="on"+o,i=e[s];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=Yme(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ya(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(UO(r)||WO(r))?r=parseFloat(r):!Xme(r)&&js.test(n)&&(r=YO(e,n)),this.setBaseTarget(e,jt(r)?r.get():r)),jt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=nx(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);i&&(r=i[e])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!jt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ix),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}const oge=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sge(t){const e=oge.exec(t);if(!e)return[,];const[,n,r,o]=e;return[`--${n??r}`,o]}function JO(t,e,n=1){const[r,o]=sge(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const i=s.trim();return UO(i)?parseFloat(i):i}return Zw(o)?JO(o,e,n+1):o}function ige(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||WO(t):!0}const age=new Set(["auto","none","0"]);function lge(t,e,n){let r=0,o;for(;r<t.length&&!o;){const s=t[r];typeof s=="string"&&!age.has(s)&&Ad(s).values.length&&(o=t[r]),r++}if(o&&n)for(const s of e)t[s]=YO(n,o)}class cge extends yx{constructor(e,n,r,o,s){super(e,n,r,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Zw(c))){const d=JO(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!yO.has(r)||e.length!==2)return;const[o,s]=e,i=LE(o),a=LE(s);if(i!==a)if(FT(i)&&FT(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Ci[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let o=0;o<e.length;o++)(e[o]===null||ige(e[o]))&&r.push(o);r.length&&lge(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ci[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(r,o).jump(o,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const s=r.length-1,i=r[s];r[s]=Ci[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class ZO extends rge{constructor(){super(...arguments),this.KeyframeResolver=cge}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function XO(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function dge(t){return window.getComputedStyle(t)}class uge extends ZO{constructor(){super(...arguments),this.type="html",this.renderInstance=XO}readValueFromInstance(e,n){var r;if(xl.has(n))return(r=this.projection)!=null&&r.isProjecting?S0(n):Nfe(e,n);{const o=dge(e),s=(Jw(n)?o.getPropertyValue(n):o[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return EO(e,n)}build(e,n,r){Qw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return rx(e,n,r)}}const QO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hge(t,e,n,r){XO(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(QO.has(o)?o:qw(o),e.attrs[o])}class fge extends ZO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(xl.has(n)){const r=KO(n);return r&&r.default||0}return n=QO.has(n)?n:qw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return F4(e,n,r)}build(e,n,r){B4(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,o){hge(e,n,r,o)}mount(e){this.isSVGTag=V4(e.tagName),super.mount(e)}}const pge=(t,e)=>tx(t)?new fge(e):new uge(e,{allowProjection:t!==y.Fragment}),mge=Che({...ype,...Wme,...Ame,...Gme},pge),gge=zue(mge),e3=()=>{const[t,e]=I.useState([]),[n,r]=I.useState([]),{getChecklistRecords:o}=ml(),{getAllRecordFields:s}=yp();return I.useEffect(()=>{const l=s().filter(u=>u.type==="note"),c=l.map(u=>u.id),d=o("",{fieldIds:c});e(Object.values(d).flat()),r(l)},[]),{allNotes:t,allNoteFields:n,getNotes:a=>{const l=o("",{fieldIds:a});e(Object.values(l).flat())}}},yge="_container_4p8xy_2",bge="_item_4p8xy_11",vge="_itemActive_4p8xy_24",wge="_icon_4p8xy_29",xge="_iconActive_4p8xy_33",kge="_menuButtonRotate_4p8xy_49",nr={container:yge,item:bge,itemActive:vge,icon:wge,iconActive:xge,menuButtonRotate:kge},Cge=({onChangeField:t})=>{const[e,n]=I.useState(!1),{allNoteFields:r}=e3(),[o,s]=iM(),i=o.get("fieldId"),a=Tm({width:e?"150px":"50px",config:{tension:400,friction:20}});return m.jsx("div",{children:m.jsx(wd.div,{style:a,children:m.jsxs(Yn,{className:nr.container,children:[m.jsx("div",{onClick:()=>{n(!e)},className:nr.item,children:m.jsx(Y,{icon:"solar:hamburger-menu-outline",className:re(e&&nr.menuButtonRotate)})}),m.jsxs("div",{onClick:()=>{const l=Object.fromEntries(o);delete l.fieldId,s(l),t==null||t(r.map(c=>c.id))},className:re(nr.item,!i&&nr.itemActive),children:[m.jsx(Y,{icon:"solar:notes-line-duotone",className:re(nr.icon,!i&&nr.iconActive)}),e&&m.jsx(ne.Text,{children:"All Notes"})]}),r.map(l=>m.jsxs("div",{onClick:()=>{s({...Object.fromEntries(o),fieldId:l.id}),t==null||t([l.id])},className:re(nr.item,i===l.id&&nr.itemActive),children:[m.jsx(Y,{icon:l.icon,className:re(nr.icon,i===l.id&&nr.iconActive)}),e&&m.jsx(ne.Text,{children:l.title})]},l.id))]})})})},Sge="_container_1o6zy_2",Tge="_addNoteButton_1o6zy_8",Ege="_addIcon_1o6zy_26",Py={container:Sge,addNoteButton:Tge,addIcon:Ege},Mge="_container_q2wrn_2",Age="_noteItem_q2wrn_9",_ge="_itemHeader_q2wrn_13",Rge="_itemHeaderDate_q2wrn_19",rh={container:Mge,noteItem:Age,itemHeader:_ge,itemHeaderDate:Rge},Pge=({allNotes:t,allNoteFields:e=[]})=>{const n=e.reduce((r,o)=>({...r,[o.id]:o}),{});return m.jsx("div",{className:rh.container,children:t.map(r=>{var o;return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:rh.itemHeader,children:[m.jsx(ne.Text,{className:rh.itemHeaderDate,children:new Date(r.createdAt).toLocaleString()}),m.jsx(ne.Text,{children:`${(o=n[r.fieldId])==null?void 0:o.title}`})]}),m.jsx(Yn,{className:rh.noteItem,children:m.jsx(ud,{value:r.value,withoutBorder:!0})})]})})})},Ige=()=>{const{allNotes:t,getNotes:e,allNoteFields:n}=e3();return m.jsxs(m.Fragment,{children:[m.jsx(Xa,{renderLeftComponent:()=>m.jsx(m.Fragment,{children:"Notes"}),renderRightComponent:()=>m.jsxs(dt,{className:Py.addNoteButton,children:[m.jsx(Y,{icon:"fe:plus",className:Py.addIcon,width:20})," Add Note"]})}),m.jsxs("div",{className:Py.container,children:[m.jsx(Cge,{onChangeField:r=>{e(r)}}),m.jsx(Pge,{allNotes:t,allNoteFields:n})]})]})},Dge="_container_jw0vg_2",Nge="_title_jw0vg_8",Oge="_player_jw0vg_12",Lge="_currentContainer_jw0vg_17",jge="_icon_jw0vg_30",ca={container:Dge,title:Nge,player:Oge,currentContainer:Lge,icon:jge},Bge=t=>new Date(t.getTime()-24*60*60*1e3),$ge=t=>new Date(t.getTime()+24*60*60*1e3),Vge=({date:t,onDateChange:e})=>{const n=Rt(),o=new Date(t).toLocaleDateString()===new Date().toLocaleDateString()?n.formatMessage({id:"checklist-calendar.today",defaultMessage:"Today"}):new Date(t).toLocaleDateString();return m.jsxs("div",{className:ca.container,children:[m.jsx(ne.Title,{level:4,noMargin:!0,className:ca.title,children:n.formatMessage({id:"checklist-calendar.title",defaultMessage:"Tasks"})}),m.jsxs("div",{className:ca.player,children:[m.jsx(Y,{onClick:()=>e(Bge(t)),width:30,icon:"basil:skip-prev-outline",className:ca.icon}),m.jsx(ne.Text,{className:ca.currentContainer,onClick:()=>e(new Date),children:o}),m.jsx(Y,{onClick:()=>e($ge(t)),width:30,icon:"basil:skip-next-outline",className:ca.icon})]})]})},Hge="_checklistItem_1ge4q_2",Fge="_lastChecklistItem_1ge4q_17",zge="_checkbox_1ge4q_21",Uge="_title_1ge4q_26",ql={checklistItem:Hge,lastChecklistItem:Fge,checkbox:zge,title:Uge},Wge=({date:t})=>{const{checklistByGivingDateIds:e,allChecklist:n,getChecklistByGivingDate:r,updateChecklist:o}=pp(),{checklistTemplate:s}=Es(),i=xr();return I.useEffect(()=>{r({date:t})},[t]),m.jsx("div",{className:ql.container,children:e.map((a,l)=>{const c=n[a],d=s[c.checklistTemplateId];return m.jsxs("div",{className:re(ql.checklistItem,l===e.length-1&&ql.lastChecklistItem),children:[m.jsx(Y,{color:(d==null?void 0:d.avatar.color)||"#8A8A8A",width:32,height:32,icon:d==null?void 0:d.avatar.name}),m.jsx(ne.Text,{onClick:()=>i(`/task/${c.checklistTemplateId}?currentDay=${t.toISOString()}${c.clientOnly?"":`&checklistId=${c.id}`}`),className:ql.title,children:d==null?void 0:d.title}),m.jsx(yw,{checked:!!(c!=null&&c.completedAt),className:ql.checkbox,onChange:u=>{u.stopPropagation(),o({...c,completedAt:u.target.checked?new Date().toISOString():void 0})}})]},a)})})},Gge="_addChecklist_4jpp5_2",qge="_createBtn_4jpp5_6",BE={addChecklist:Gge,createBtn:qge},Kge=()=>{const t=Rt(),e=xr();return m.jsx("div",{className:BE.addChecklist,children:m.jsx(dt,{onClick:()=>{e("/create-checklist")},type:"dash",size:"md",className:BE.createBtn,block:!0,children:t.formatMessage({id:"checklist-create.label-create-checklist",defaultMessage:"Create Task"})})})};function Yge(t){return m.jsx("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",...t,children:m.jsx("g",{id:"pause_circle_outline_24px",children:m.jsx("path",{id:"icon/av/pause_circle_outline_24px","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 24C4 12.96 12.96 4 24 4C35.04 4 44 12.96 44 24C44 35.04 35.04 44 24 44C12.96 44 4 35.04 4 24ZM22 30C22 31.1 21.1 32 20 32C18.9 32 18 31.1 18 30V18C18 16.9 18.9 16 20 16C21.1 16 22 16.9 22 18V30ZM24 40C15.18 40 8 32.82 8 24C8 15.18 15.18 8 24 8C32.82 8 40 15.18 40 24C40 32.82 32.82 40 24 40ZM30 30C30 31.1 29.1 32 28 32C26.9 32 26 31.1 26 30V18C26 16.9 26.9 16 28 16C29.1 16 30 16.9 30 18V30Z",fill:"white"})})})}function Jge(t){return m.jsx("svg",{width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",...t,children:m.jsx("g",{id:"play_circle_filled_24px",children:m.jsx("path",{id:"icon/av/play_circle_filled_24px","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 24C4 12.96 12.96 4 24 4C35.04 4 44 12.96 44 24C44 35.04 35.04 44 24 44C12.96 44 4 35.04 4 24ZM21.6 16.2C20.94 15.7 20 16.18 20 17V31C20 31.82 20.94 32.3 21.6 31.8L30.94 24.8C31.48 24.4 31.48 23.6 30.94 23.2L21.6 16.2Z",fill:"white"})})})}const Zge="_container_n2rya_2",Xge="_body_n2rya_6",Qge="_icon_n2rya_18",eye="_progressContainer_n2rya_22",tye="_progress_n2rya_22",nye="_pomodoroPhase_n2rya_31",rye="_pomodoroPhaseText_n2rya_39",oye="_loadStatus_n2rya_52",fo={container:Zge,body:Xge,icon:Qge,progressContainer:eye,progress:tye,pomodoroPhase:nye,pomodoroPhaseText:rye,loadStatus:oye},sye={"date-a-live-season-1-ost.mp3":{name:"date a live",id:"date-a-live-season-1-ost.mp3"},"rockabye-baby-twinkle-twinkle.mp3":{name:"rockabye baby twinkle twinkle",id:"rockabye-baby-twinkle-twinkle.mp3"},"twinkle-twinkle-little-star-acoustic-guitar.mp3":{name:"twinkle twinkle little star acoustic guitar",id:"twinkle-twinkle-little-star-acoustic-guitar.mp3"},"einstein-baby-lullaby-academy-brahms.mp3":{name:"Baby Lullaby Music - Einstein Baby Lullaby Academy",id:"einstein-baby-lullaby-academy-brahms.mp3"},"einstein-baby-lullaby.mp3":{name:"Einstein Baby Lullaby",id:"einstein-baby-lullaby.mp3"},"a-whole-new-world.mp3":{id:"a-whole-new-world.mp3",name:"A Whole New World"},"reflection.mp3":{id:"reflection.mp3",name:"Reflection"},"arabesque-piano-relaxation.mp3":{id:"arabesque-piano-relaxation.mp3",name:"Arabesque Piano Relaxation"},"canon-in-d.mp3":{id:"canon-in-d.mp3",name:"Canon in D"},"music-therapy-serenity.mp3":{id:"music-therapy-serenity.mp3",name:"Music Therapy - Serenity"},"prelude-in-c-major.mp3":{id:"prelude-in-c-major.mp3",name:"Prelude in C Major"}},iye=hp(t=>({isPlaying:!1,setIsPlaying:e=>t({isPlaying:e}),currentSongIndex:0,setCurrentSongIndex:e=>t({currentSongIndex:e}),songList:[],setSongList:e=>t({songList:e}),currentTime:0,setCurrentTime:e=>t({currentTime:e}),duration:0,setDuration:e=>t({duration:e})})),Xs=[];let po=null;const t3=({autoPlayDefault:t=!1}={})=>{const{isPlaying:e,songList:n,setSongList:r,setIsPlaying:o,currentSongIndex:s,setCurrentSongIndex:i,currentTime:a,setCurrentTime:l,duration:c,setDuration:d}=iye(),[u,h]=I.useState(t),f=w=>{console.log("currentSingIndex",s,n.length),po&&po.pause();let k=(s+1)%n.length;w&&!isNaN(w)&&(k=w),console.log("nextIndex",k),i(k),g(k)},p=()=>{po&&po.pause();const w=(s-1+n.length)%n.length;g(w),i(w)},g=w=>{if(w<0||w>=n.length)return;const k=n[w];let C;console.log("AUTO PLAY",u,Xs[w]),Xs[w]?(C=Xs[w],C.currentTime=0):C=new Audio(k),po=C,C.onended=()=>{console.log("AUDIO END!!!",u),u&&f(w+1)},C.ontimeupdate=()=>{l(C.currentTime),d(C.duration)},C.play().then(()=>{o(!0),l(0)}).catch(console.error)};return{loadSong:g,play:async()=>{if(!po)g(s),o(!0);else{const w=Xs[s];w&&!e&&w.play().then(()=>o(!0)).catch(console.error)}},pause:()=>{po&&e&&(po.pause(),o(!1))},isPlaying:e,autoPlay:u,setAutoPlay:w=>h(w),next:f,prev:p,audio:po,currentTime:a,duration:c,currentSongIndex:s,loadAllSongs:async({songs:w,callback:k})=>{const C=w.filter(T=>!n.includes(T)),S=[...n,...C];C.length&&r(S);for(let T=0;T<S.length;T++){const E=S[T];if(Xs[T]){k(E,T);continue}const M=new Audio(E);Xs.push(M),await new Promise((_,P)=>{M.addEventListener("loadedmetadata",()=>{k(E,T),_()}),M.addEventListener("error",L=>{console.error(`Error loading song: ${E}`,L),P(L)})})}return Xs},songList:n}},aye=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},xx=aye(Object.values(sye)),lye=xx.map(({id:t})=>Qj(t)),cye="_container_fu073_2",dye="_header_fu073_10",uye="_body_fu073_23",hye="_card_fu073_28",fye="_cardActive_fu073_40",pye="_titleActive_fu073_44",mye="_successIcon_fu073_49",Qs={container:cye,header:dye,body:uye,card:hye,cardActive:fye,titleActive:pye,successIcon:mye},gye=({visible:t,onClose:e})=>{const{currentSongIndex:n,next:r}=t3(),o=Rt();return m.jsxs(w4,{className:Qs.container,visible:t,onBlur:e,children:[m.jsxs("div",{className:Qs.header,children:[m.jsx(ne.Title,{noMargin:!0,level:4,children:o.formatMessage({id:"audio-song-list-drawer.title",defaultMessage:"Song List"})}),m.jsx(Y,{width:32,icon:"material-symbols:close-rounded",onClick:e})]}),m.jsx("div",{className:Qs.body,children:xx.map(({name:s},i)=>m.jsxs("div",{onClick:()=>r(i),className:re(Qs.card,n===i&&Qs.cardActive),children:[m.jsx(ne.Paragraph,{noMargin:!0,className:re(n===i&&Qs.titleActive),children:s}),n===i&&m.jsx(Y,{className:Qs.successIcon,icon:"material-symbols:check-circle-rounded"})]},i))})]})},yye=({className:t})=>{const[e,n]=I.useState(0),{play:r,pause:o,isPlaying:s,next:i,prev:a,currentTime:l,currentSongIndex:c,loadAllSongs:d,duration:u,songList:h}=t3({autoPlayDefault:!0}),[f,p]=y.useState(!1),g=async()=>{await d({songs:lye,callback:()=>{n(v=>v+1)}})};I.useEffect(()=>{g()},[]);const b=()=>{s?o():r()};return m.jsxs("div",{className:re(fo.container,t),children:[m.jsx(gye,{visible:f,onClose:()=>p(!1)}),e!==h.length&&m.jsxs(ne.Text,{className:fo.loadStatus,children:["load song",e,"/",h.length]}),l>0&&m.jsx("div",{className:fo.progressContainer,children:m.jsx("div",{className:fo.progress,style:{width:`${l/u*100}%`}})}),m.jsxs("div",{className:fo.body,children:[m.jsx(Y,{icon:"material-symbols:skip-previous-rounded",height:24,color:"white",onClick:()=>a()}),s?m.jsx(Yge,{className:fo.icon,width:42,onClick:b}):m.jsx(Jge,{className:fo.icon,onClick:b}),m.jsx(Y,{icon:"material-symbols:skip-next-rounded",height:32,width:32,color:"white",onClick:()=>i()}),m.jsxs("span",{className:fo.pomodoroPhase,children:[m.jsx(ne.Text,{onClick:()=>p(!0),className:fo.pomodoroPhaseText,children:`${c+1}. ${xx[c].name}`}),m.jsx(Y,{color:"white",onClick:()=>p(!0),icon:"material-symbols:library-music-rounded",width:24})]})]})]})},bye="_container_ia9xq_2",vye="_player_ia9xq_13",wye="_hr_ia9xq_24",xye="_card_ia9xq_29",kye="_body_ia9xq_34",Kl={container:bye,player:vye,hr:wye,card:xye,body:kye},Cye=()=>{const[t,e]=I.useState(new Date);return m.jsxs("div",{className:Kl.container,children:[m.jsx(p9,{}),m.jsx("div",{className:Kl.body,children:m.jsxs(Yn,{className:Kl.card,children:[m.jsx(Vge,{date:t,onDateChange:e}),m.jsx(ac,{classes:{hr:Kl.hr}}),m.jsx(Wge,{date:t}),m.jsx(Kge,{})]})}),m.jsx(yye,{className:Kl.player})]})};function Sye(t,e){const[n,r]=y.useState(()=>{try{const s=window.localStorage.getItem(t);return s||e}catch(s){return console.error("Error reading localStorage:",s),e}});return{storedValue:n,setStoredValue:r,save:()=>{window.localStorage.setItem(t,n)}}}function Tye(){const{storedValue:t,setStoredValue:e,save:n}=Sye("checklist_template",""),r=o=>{e(o.target.value)};return m.jsxs("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[m.jsx("h2",{children:"LocalStorage Editor"}),m.jsx("textarea",{value:t,onChange:r,placeholder:"Start typing here...",style:{width:"100%",height:"300px",padding:"10px",fontSize:"16px",border:"1px solid #ccc",borderRadius:"4px",resize:"vertical"}}),m.jsx("button",{onClick:n,children:"Save"})]})}const On=({children:t})=>m.jsx(gge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:t}),Eye=()=>{const t=Lo();return m.jsx(Lue,{mode:"wait",children:m.jsxs(u5,{location:t,children:[m.jsx(bn,{path:"/",element:m.jsx(On,{children:m.jsx(Cye,{})})}),m.jsx(bn,{path:"/task/:id",element:m.jsx(On,{children:m.jsx(Ose,{})})}),m.jsx(bn,{path:"/create-checklist",element:m.jsx(On,{children:m.jsx(_de,{})})}),m.jsx(bn,{path:"/edit-checklist/:id",element:m.jsx(On,{children:m.jsx(Wde,{})})}),m.jsx(bn,{path:"/weight-record",element:m.jsx(On,{children:m.jsx(pue,{})})}),m.jsx(bn,{path:"/intro",element:m.jsx(On,{children:m.jsx(Jse,{})})}),m.jsx(bn,{path:"/checklist-template",element:m.jsx(On,{children:m.jsx(Eue,{})})}),m.jsx(bn,{path:"/setting",element:m.jsx(On,{children:m.jsx(g9,{})})}),m.jsx(bn,{path:"/story",element:m.jsx(On,{children:m.jsx(Rue,{})})}),m.jsx(bn,{path:"/audio",element:m.jsx(On,{children:m.jsx(Pue,{})})}),m.jsx(bn,{path:"/setting/local-storage-editor",element:m.jsx(On,{children:m.jsx(Tye,{})})}),m.jsx(bn,{path:"/notes",element:m.jsx(On,{children:m.jsx(Ige,{})})})]},t.pathname)})},Mye=()=>m.jsx(L5,{children:m.jsx(Eye,{})}),Aye="_container_1qdlo_1",_ye="_toast_1qdlo_8",Rye="_toastMessage_1qdlo_22",Pye="_toastButton_1qdlo_26",Yl={container:Aye,toast:_ye,toastMessage:Rye,toastButton:Pye};function Iye(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t;let a,l;const c=async(u=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await kt(async()=>{const{Workbox:u}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:u}},[]).then(({Workbox:u})=>new u("/sw.js",{scope:"/",type:"classic"})).catch(u=>{i==null||i(u)}),!a)return;a.addEventListener("activated",u=>{(u.isUpdate||u.isExternal)&&window.location.reload()}),a.addEventListener("installed",u=>{u.isUpdate||r==null||r()}),a.register({immediate:e}).then(u=>{s?s("/sw.js",u):o==null||o(u)}).catch(u=>{i==null||i(u)})}}return l=d(),c}function Dye(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t,[a,l]=y.useState(!1),[c,d]=y.useState(!1),[u]=y.useState(()=>Iye({immediate:e,onOfflineReady(){d(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:o,onRegisteredSW:s,onRegisterError:i}));return{needRefresh:[a,l],offlineReady:[c,d],updateServiceWorker:u}}function Nye(){const{offlineReady:[t,e],needRefresh:[n,r],updateServiceWorker:o}=Dye({onRegistered(i){console.log("SW Registered: "+i)},onRegisterError(i){console.log("SW registration error",i)}}),s=()=>{e(!1),r(!1)};return I.useEffect(()=>{n&&o(!0)},[n]),m.jsx("div",{className:Yl.container,children:(t||n)&&m.jsxs("div",{className:Yl.toast,children:[m.jsx("div",{className:Yl.toastMessage,children:t?m.jsx("span",{children:"App ready to work offline"}):m.jsx("span",{children:"New content available, click on reload button to update."})}),n&&m.jsx("button",{className:Yl.toastButton,onClick:()=>o(!0),children:"Reload"}),m.jsx("button",{className:Yl.toastButton,onClick:()=>s(),children:"Close"})]})})}const Oye="_container_t8rr9_164",Lye="_body_t8rr9_172",$E={container:Oye,body:Lye};function jye(){const{theme:t}=mp();return m.jsxs("div",{className:$E.container,"data-theme":t,children:[m.jsxs("div",{className:$E.body,children:[m.jsx(Mye,{}),m.jsx(Nye,{})]}),m.jsx("div",{id:"drawer-global-root"})]})}const Bye=tB(Xj(jye));St.render(m.jsx(Bye,{}),document.getElementById("app"));
